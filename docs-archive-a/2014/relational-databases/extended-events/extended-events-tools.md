---
title: 扩展事件工具 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xevents
ms.topic: conceptual
helpviewer_keywords:
- extended events [SQL Server], using
- extended events [SQL Server], options for using
ms.assetid: d312a9ff-50ba-4721-baef-50bfd3169d38
author: rothja
ms.author: jroth
ms.openlocfilehash: 7a74080352beeda4f92ad6afa7b8266a8ebee5a2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87591339"
---
# <a name="extended-events-tools"></a><span data-ttu-id="04de5-102">扩展事件工具</span><span class="sxs-lookup"><span data-stu-id="04de5-102">Extended Events Tools</span></span>
  <span data-ttu-id="04de5-103">您可以使用以下工具创建和管理 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 扩展事件会话：</span><span class="sxs-lookup"><span data-stu-id="04de5-103">You can use the following tools to create and manage [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Extended Events sessions:</span></span>  
  
-   <span data-ttu-id="04de5-104">数据定义语言 (DDL) 语句。</span><span class="sxs-lookup"><span data-stu-id="04de5-104">Data Definition Language (DDL) statements.</span></span> <span data-ttu-id="04de5-105">这些语句可用于创建和修改扩展事件会话。</span><span class="sxs-lookup"><span data-stu-id="04de5-105">These enable you to create and modify an Extended Events session.</span></span>  
  
-   <span data-ttu-id="04de5-106">动态管理视图、目录视图和系统表。</span><span class="sxs-lookup"><span data-stu-id="04de5-106">Dynamic management views, catalog views and system tables.</span></span> <span data-ttu-id="04de5-107">这些视图和表可用于通过使用 [!INCLUDE[tsql](../../includes/tsql-md.md)] 语句获取会话数据和元数据。</span><span class="sxs-lookup"><span data-stu-id="04de5-107">These enable you to obtain session data and metadata by using [!INCLUDE[tsql](../../includes/tsql-md.md)] statements.</span></span> <span data-ttu-id="04de5-108">这些系统表可帮助您确定用于 SQL 跟踪事件类和列的现有扩展事件等效项。</span><span class="sxs-lookup"><span data-stu-id="04de5-108">The system tables help you determine the existing Extended Events equivalents for SQL Trace event classes and columns.</span></span>  
  
-   <span data-ttu-id="04de5-109">对象资源管理器的 **“扩展事件”** 节点。</span><span class="sxs-lookup"><span data-stu-id="04de5-109">The **Extended Events** node of Object Explorer.</span></span> <span data-ttu-id="04de5-110">该节点可用于启动、停止或删除会话，或者用于导入和导出会话模板。</span><span class="sxs-lookup"><span data-stu-id="04de5-110">This enables you to start, stop or delete a session, or to import and export session templates.</span></span>  
  
-   <span data-ttu-id="04de5-111">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] PowerShell 提供程序。</span><span class="sxs-lookup"><span data-stu-id="04de5-111">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] PowerShell provider.</span></span> <span data-ttu-id="04de5-112">这是一个强大的工具，可用于创建、更改和管理扩展事件会话。</span><span class="sxs-lookup"><span data-stu-id="04de5-112">This is a powerful tool that you can use to create, alter, and manage Extended Events sessions.</span></span> <span data-ttu-id="04de5-113">有关详细信息，请参阅 [对扩展事件使用 PowerShell 提供程序](use-the-powershell-provider-for-extended-events.md)。</span><span class="sxs-lookup"><span data-stu-id="04de5-113">For more information, see [Use the PowerShell Provider for Extended Events](use-the-powershell-provider-for-extended-events.md).</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="04de5-114">.</span><span class="sxs-lookup"><span data-stu-id="04de5-114">.</span></span> <span data-ttu-id="04de5-115">该工具可用于创建和执行在扩展事件主题中提供的代码示例。</span><span class="sxs-lookup"><span data-stu-id="04de5-115">This enables you to create and execute the code samples that are provided in the Extended Events topics.</span></span> <span data-ttu-id="04de5-116">有关详细信息，请参阅 [对象资源管理器](../../ssms/object/object-explorer.md)。</span><span class="sxs-lookup"><span data-stu-id="04de5-116">For more information, see [Object Explorer](../../ssms/object/object-explorer.md).</span></span>  
  
 <span data-ttu-id="04de5-117">除了您创建的会话之外，在服务器上存在一个默认的系统运行状况会话。</span><span class="sxs-lookup"><span data-stu-id="04de5-117">In addition to sessions that you create, a default system health session exists on the server.</span></span> <span data-ttu-id="04de5-118">该会话收集的系统数据可用于帮助解决性能问题。</span><span class="sxs-lookup"><span data-stu-id="04de5-118">The session collects system data that you can use to help troubleshoot performance issues.</span></span> <span data-ttu-id="04de5-119">有关详细信息，请参阅 [使用 system_health 会话](use-the-ssms-xe-profiler.md)。</span><span class="sxs-lookup"><span data-stu-id="04de5-119">For more information, see [Use the system_health Session](use-the-ssms-xe-profiler.md).</span></span>  
  
## <a name="ddl-statements"></a><span data-ttu-id="04de5-120">DDL 语句</span><span class="sxs-lookup"><span data-stu-id="04de5-120">DDL Statements</span></span>  
 <span data-ttu-id="04de5-121">请以下 DDL 语句可以创建、更改和删除扩展事件会话。</span><span class="sxs-lookup"><span data-stu-id="04de5-121">Use the following DDL statements to create, change, and drop an Extended Events session.</span></span>  
  
|<span data-ttu-id="04de5-122">名称</span><span class="sxs-lookup"><span data-stu-id="04de5-122">Name</span></span>|<span data-ttu-id="04de5-123">说明</span><span class="sxs-lookup"><span data-stu-id="04de5-123">Description</span></span>|  
|----------|-----------------|  
|[<span data-ttu-id="04de5-124">CREATE EVENT SESSION (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-124">CREATE EVENT SESSION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-event-session-transact-sql)|<span data-ttu-id="04de5-125">创建用于标识事件源、事件会话目标和事件会话参数的扩展事件会话对象。</span><span class="sxs-lookup"><span data-stu-id="04de5-125">Creates an Extended Event session object that identifies the source of the events, the event session targets, and the event session parameters.</span></span>|  
|[<span data-ttu-id="04de5-126">ALTER EVENT SESSION (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-126">ALTER EVENT SESSION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-event-session-transact-sql)|<span data-ttu-id="04de5-127">启动或停止事件会话，或更改事件会话配置。</span><span class="sxs-lookup"><span data-stu-id="04de5-127">Starts or stops an event session or changes an event session configuration.</span></span>|  
|[<span data-ttu-id="04de5-128">DROP EVENT SESSION (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-128">DROP EVENT SESSION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-event-session-transact-sql)|<span data-ttu-id="04de5-129">删除事件会话。</span><span class="sxs-lookup"><span data-stu-id="04de5-129">Drops an event session.</span></span>|  
  
## <a name="catalog-views"></a><span data-ttu-id="04de5-130">目录视图</span><span class="sxs-lookup"><span data-stu-id="04de5-130">Catalog Views</span></span>  
 <span data-ttu-id="04de5-131">使用下面的目录视图可获取创建事件会话时所创建的元数据。</span><span class="sxs-lookup"><span data-stu-id="04de5-131">Use the following catalog views to obtain the metadata that is created when you create an event session.</span></span>  
  
|<span data-ttu-id="04de5-132">名称</span><span class="sxs-lookup"><span data-stu-id="04de5-132">Name</span></span>|<span data-ttu-id="04de5-133">说明</span><span class="sxs-lookup"><span data-stu-id="04de5-133">Description</span></span>|  
|----------|-----------------|  
|[<span data-ttu-id="04de5-134">sys.server_event_sessions (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-134">sys.server_event_sessions &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-server-event-sessions-transact-sql)|<span data-ttu-id="04de5-135">列出所有事件会话定义。</span><span class="sxs-lookup"><span data-stu-id="04de5-135">Lists all event session definitions.</span></span>|  
|[<span data-ttu-id="04de5-136">sys.server_event_session_actions (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-136">sys.server_event_session_actions &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-server-event-session-actions-transact-sql)|<span data-ttu-id="04de5-137">返回针对事件会话的每个事件执行的每个操作所对应的行。</span><span class="sxs-lookup"><span data-stu-id="04de5-137">Returns a row for each action on each event of an event session.</span></span>|  
|[<span data-ttu-id="04de5-138">sys.server_event_session_events (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-138">sys.server_event_session_events &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-server-event-session-events-transact-sql)|<span data-ttu-id="04de5-139">返回事件会话中每个事件所对应的行。</span><span class="sxs-lookup"><span data-stu-id="04de5-139">Returns a row for each event in an event session.</span></span>|  
|[<span data-ttu-id="04de5-140">sys.server_event_session_fields (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-140">sys.server_event_session_fields &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-server-event-session-fields-transact-sql)|<span data-ttu-id="04de5-141">对在事件和目标上显式设置的每个可自定义列都返回一行。</span><span class="sxs-lookup"><span data-stu-id="04de5-141">Returns a row for each customizable column that was explicitly set on events and targets.</span></span>|  
|[<span data-ttu-id="04de5-142">sys.server_event_session_targets (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-142">sys.server_event_session_targets &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-server-event-session-targets-transact-sql)|<span data-ttu-id="04de5-143">返回事件会话的每个事件目标所对应的行。</span><span class="sxs-lookup"><span data-stu-id="04de5-143">Returns a row for each event target for an event session.</span></span>|  
  
## <a name="dynamic-management-views"></a><span data-ttu-id="04de5-144">动态管理视图</span><span class="sxs-lookup"><span data-stu-id="04de5-144">Dynamic Management Views</span></span>  
 <span data-ttu-id="04de5-145">使用下面的动态管理视图可以获取会话元数据和会话数据。</span><span class="sxs-lookup"><span data-stu-id="04de5-145">Use the following dynamic management views to obtain session metadata and session data.</span></span> <span data-ttu-id="04de5-146">将从目录视图中获取元数据，当启动并运行事件会话时即创建会话数据。</span><span class="sxs-lookup"><span data-stu-id="04de5-146">The metadata is obtained from the catalog views, and the session data is created when you start and run an event session.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="04de5-147">直到会话启动，这些视图中才会包含会话数据。</span><span class="sxs-lookup"><span data-stu-id="04de5-147">These views do not contain session data until a session starts.</span></span>  
  
|<span data-ttu-id="04de5-148">名称</span><span class="sxs-lookup"><span data-stu-id="04de5-148">Name</span></span>|<span data-ttu-id="04de5-149">说明</span><span class="sxs-lookup"><span data-stu-id="04de5-149">Description</span></span>|  
|----------|-----------------|  
|[<span data-ttu-id="04de5-150">sys.dm_os_dispatcher_pools (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-150">sys.dm_os_dispatcher_pools &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-dispatcher-pools-transact-sql)|<span data-ttu-id="04de5-151">返回有关会话调度程序池的信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-151">Returns information about session dispatcher pools.</span></span>|  
|[<span data-ttu-id="04de5-152">sys.dm_xe_objects (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-152">sys.dm_xe_objects &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-objects-transact-sql)|<span data-ttu-id="04de5-153">对事件包显示的每个对象都返回一行。</span><span class="sxs-lookup"><span data-stu-id="04de5-153">Returns a row for each object that is exposed by an event package.</span></span>|  
|[<span data-ttu-id="04de5-154">sys.dm_xe_object_columns (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-154">sys.dm_xe_object_columns &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-object-columns-transact-sql)|<span data-ttu-id="04de5-155">返回所有对象的架构信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-155">Returns the schema information for all the objects.</span></span>|  
|[<span data-ttu-id="04de5-156">sys.dm_xe_packages (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-156">sys.dm_xe_packages &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-packages-transact-sql)|<span data-ttu-id="04de5-157">列出向扩展事件引擎注册的所有包。</span><span class="sxs-lookup"><span data-stu-id="04de5-157">Lists all the packages registered with the Extended Events engine.</span></span>|  
|[<span data-ttu-id="04de5-158">sys.dm_xe_sessions (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-158">sys.dm_xe_sessions &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-sessions-transact-sql)|<span data-ttu-id="04de5-159">返回有关处于活动状态的扩展事件会话的信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-159">Returns information about an active Extended Events session.</span></span>|  
|[<span data-ttu-id="04de5-160">sys.dm_xe_session_targets (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-160">sys.dm_xe_session_targets &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-session-targets-transact-sql)|<span data-ttu-id="04de5-161">返回有关会话目标的信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-161">Returns information about session targets.</span></span>|  
|[<span data-ttu-id="04de5-162">sys.dm_xe_session_events (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-162">sys.dm_xe_session_events &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-session-events-transact-sql)|<span data-ttu-id="04de5-163">返回有关会话事件的信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-163">Returns information about session events.</span></span>|  
|[<span data-ttu-id="04de5-164">sys.dm_xe_session_event_actions (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-164">sys.dm_xe_session_event_actions &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-session-event-actions-transact-sql)|<span data-ttu-id="04de5-165">返回有关事件会话操作的信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-165">Returns information about event session actions.</span></span>|  
|[<span data-ttu-id="04de5-166">sys.dm_xe_map_values (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-166">sys.dm_xe_map_values &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-map-values-transact-sql)|<span data-ttu-id="04de5-167">提供一个从内部数字键到可读文本的映射。</span><span class="sxs-lookup"><span data-stu-id="04de5-167">Provides a mapping of internal numeric keys to human-readable text.</span></span>|  
|[<span data-ttu-id="04de5-168">sys.dm_xe_session_object_columns (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-168">sys.dm_xe_session_object_columns &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-xe-session-object-columns-transact-sql)|<span data-ttu-id="04de5-169">显示绑定到会话的对象的配置值。</span><span class="sxs-lookup"><span data-stu-id="04de5-169">Shows the configuration values for objects that are bound to a session.</span></span>|  
  
## <a name="system-tables"></a><span data-ttu-id="04de5-170">系统表</span><span class="sxs-lookup"><span data-stu-id="04de5-170">System Tables</span></span>  
 <span data-ttu-id="04de5-171">使用下面的系统表可以获取与 SQL 跟踪事件类和列的扩展事件等效项有关的信息。</span><span class="sxs-lookup"><span data-stu-id="04de5-171">Use the following system tables to obtain information about the Extended Events equivalents for SQL Trace event classes and columns.</span></span>  
  
|<span data-ttu-id="04de5-172">名称</span><span class="sxs-lookup"><span data-stu-id="04de5-172">Name</span></span>|<span data-ttu-id="04de5-173">说明</span><span class="sxs-lookup"><span data-stu-id="04de5-173">Description</span></span>|  
|----------|-----------------|  
|[<span data-ttu-id="04de5-174">trace_xe_event_map (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-174">trace_xe_event_map &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-tables/extended-events-tables-trace-xe-event-map)|<span data-ttu-id="04de5-175">映射到 SQL 跟踪事件类的每个扩展事件各占一行。</span><span class="sxs-lookup"><span data-stu-id="04de5-175">Contains one row for each Extended Events event that is mapped to a SQL Trace event class.</span></span>|  
|[<span data-ttu-id="04de5-176">trace_xe_action_map (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="04de5-176">trace_xe_action_map &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-tables/extended-events-tables-trace-xe-action-map)|<span data-ttu-id="04de5-177">映射到 SQL 跟踪列 ID 的每个扩展事件操作各占一行。</span><span class="sxs-lookup"><span data-stu-id="04de5-177">Contains one row for each Extended Events action that is mapped to a SQL Trace column ID.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="04de5-178">另请参阅</span><span class="sxs-lookup"><span data-stu-id="04de5-178">See Also</span></span>  
 <span data-ttu-id="04de5-179">[动态管理视图和函数 (Transact-SQL)](../views/views.md) </span><span class="sxs-lookup"><span data-stu-id="04de5-179">[Dynamic Management Views and Functions &#40;Transact-SQL&#41;](../views/views.md) </span></span>  
 <span data-ttu-id="04de5-180">[目录视图 (Transact-SQL)](/sql/relational-databases/system-catalog-views/catalog-views-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="04de5-180">[Catalog Views &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/catalog-views-transact-sql) </span></span>  
 <span data-ttu-id="04de5-181">[&#40;Transact-sql&#41;SQL Server 扩展事件表](/sql/relational-databases/system-tables/system-tables-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="04de5-181">[SQL Server Extended Events Tables &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/system-tables-transact-sql) </span></span>  
 <span data-ttu-id="04de5-182">[使用 system_health 会话](use-the-ssms-xe-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="04de5-182">[Use the system_health Session](use-the-ssms-xe-profiler.md) </span></span>  
 [<span data-ttu-id="04de5-183">对扩展事件使用 PowerShell 提供程序</span><span class="sxs-lookup"><span data-stu-id="04de5-183">Use the PowerShell Provider for Extended Events</span></span>](use-the-powershell-provider-for-extended-events.md)  
  
  
