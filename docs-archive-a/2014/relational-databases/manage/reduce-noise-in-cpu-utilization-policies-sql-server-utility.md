---
title: 减少 CPU 使用策略中的干扰（SQL Server 实用工具）| Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
f1_keywords:
- sql12.SWB.UE.ReduceNoise.F1
ms.assetid: 94bf4d93-c0ff-4869-bde7-80c24866092e
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 70677d5b21b47af87d596db1f18d0b5bc14145a2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692403"
---
# <a name="reduce-noise-in-cpu-utilization-policies-sql-server-utility"></a><span data-ttu-id="4cf72-102">减少 CPU 使用策略中的干扰（SQL Server 实用工具）</span><span class="sxs-lookup"><span data-stu-id="4cf72-102">Reduce Noise in CPU Utilization Policies (SQL Server Utility)</span></span>
  <span data-ttu-id="4cf72-103">使用以下策略可以减少 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实用工具资源使用策略中报告的干扰和意外的策略违反情况。</span><span class="sxs-lookup"><span data-stu-id="4cf72-103">Use the following strategies to reduce reporting noise and unwanted violations in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility resource utilization policies.</span></span>  
  
## <a name="how-frequently-should-processor-utilization-be-in-violation-before-it-is-reported-as-overutilized"></a><span data-ttu-id="4cf72-104">违反处理器使用率策略的频度有多高后才应报告为使用过度？</span><span class="sxs-lookup"><span data-stu-id="4cf72-104">How frequently should processor utilization be in violation before it is reported as overutilized?</span></span>  
 <span data-ttu-id="4cf72-105">评估时间段和违反百分比公差均可使用实用工具资源管理器的 **“实用工具管理”** 节点中的 **“策略”** 选项卡设置进行配置。</span><span class="sxs-lookup"><span data-stu-id="4cf72-105">The evaluation time period and tolerance for percent violations are both configurable using the **Policy** tab settings in the **Utility Administration** node of Utility Explorer.</span></span> <span data-ttu-id="4cf72-106">若要更改策略，请使用策略说明右侧的滑块控件，然后单击 **“应用”** 。</span><span class="sxs-lookup"><span data-stu-id="4cf72-106">To change policies, use the slider controls to the right of policy descriptions, then click **Apply**.</span></span> <span data-ttu-id="4cf72-107">您还可以使用显示底部的按钮还原默认值或放弃更改。</span><span class="sxs-lookup"><span data-stu-id="4cf72-107">You can also restore default values or discard changes using buttons at the bottom of the display.</span></span>  
  
-   <span data-ttu-id="4cf72-108">数据收集间隔为 15 分钟。</span><span class="sxs-lookup"><span data-stu-id="4cf72-108">The data collection interval is 15 minutes.</span></span> <span data-ttu-id="4cf72-109">此值是不可配置的。</span><span class="sxs-lookup"><span data-stu-id="4cf72-109">This value is not configurable.</span></span>  
  
-   <span data-ttu-id="4cf72-110">处理器使用策略的默认阈值上限是 70%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-110">The default upper threshold processor utilization policy is 70%.</span></span> <span data-ttu-id="4cf72-111">选项范围是从 0% 到 100%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-111">Options range from 0% to 100%.</span></span>  
  
-   <span data-ttu-id="4cf72-112">处理器使用过度的默认评估期是 1 小时。</span><span class="sxs-lookup"><span data-stu-id="4cf72-112">The default evaluation period for processor overutilization is 1 hour.</span></span> <span data-ttu-id="4cf72-113">选项范围是从 1 小时到 1 周。</span><span class="sxs-lookup"><span data-stu-id="4cf72-113">Options range from 1 hour to 1 week.</span></span>  
  
-   <span data-ttu-id="4cf72-114">在达到该值之后会将 CPU 报告为利用使用的违反策略的数据点的默认百分比是 20%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-114">The default percentage of data points in violation before CPU is reported as overutilized is 20%.</span></span> <span data-ttu-id="4cf72-115">选项范围是从 0% 到 100%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-115">Options range from 0% to 100%.</span></span>  
  
 <span data-ttu-id="4cf72-116">例如，基于默认值，每小时将收集 4 个数据点，并且策略阈值为 20%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-116">For example, based on default values, 4 data points will be collected every hour, and the policy threshold is 20%.</span></span> <span data-ttu-id="4cf72-117">因此，默认情况下，1 小时收集期中的任何策略违反都将是 4 个数据点的 25%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-117">So by default, any violation in a 1-hour collection period will be 25% of 4 data points.</span></span> <span data-ttu-id="4cf72-118">这些默认值将报告任何违反 CPU 使用过度策略阈值的情况。</span><span class="sxs-lookup"><span data-stu-id="4cf72-118">The default values report any violation of the CPU overutilization policy threshold.</span></span>  
  
 <span data-ttu-id="4cf72-119">若要减少单个策略违反情况产生的干扰，请考虑以下选项：</span><span class="sxs-lookup"><span data-stu-id="4cf72-119">To reduce noise generated by a single violation, consider the following options:</span></span>  
  
-   <span data-ttu-id="4cf72-120">以 1 小时为增量将评估期增加到 6 小时。</span><span class="sxs-lookup"><span data-stu-id="4cf72-120">Increase the evaluation period by 1 increment to 6 hours.</span></span> <span data-ttu-id="4cf72-121">6 小时中的单个策略违反情况将是示例大小 24 中的 1 个数据点。</span><span class="sxs-lookup"><span data-stu-id="4cf72-121">A single violation in 6 hours would be 1 data point in a sample size of 24.</span></span> <span data-ttu-id="4cf72-122">在此情况下，该策略将容忍在 6 小时中有 4 个策略阈值违反情况（16.7% 的数据点），但如果在 6 小时的收集期中有 5 个或更多的策略违反情况（>20% 的数据点），则会报告使用过度。</span><span class="sxs-lookup"><span data-stu-id="4cf72-122">In this case, the policy would tolerate 4 violations of the policy threshold (16.7% of data points) in 6 hours, but would report overutilization for 5 or more violations (>20% of data points) in a 6-hour collection period.</span></span>  
  
-   <span data-ttu-id="4cf72-123">以 1 为增量将违反策略百分比的公差增加到 30%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-123">Increase the tolerance for percentage of violations by 1 increment to 30%.</span></span> <span data-ttu-id="4cf72-124">1 小时中的单个策略违反情况将是示例大小 4 中的 1 个数据点。</span><span class="sxs-lookup"><span data-stu-id="4cf72-124">A single violation in 1 hour would be 1 data point in a sample size of 4.</span></span> <span data-ttu-id="4cf72-125">在此情况下，该策略容忍每小时 1 个策略违反，但如果在 1 小时的收集期中有 2 个或更多的策略违反（>30% 的数据点），则会报告使用过度。</span><span class="sxs-lookup"><span data-stu-id="4cf72-125">In this case, the policy would tolerate 1 violation per hour, but would report overutilization for 2 or more violations (>30% of data points) in a 1-hour collection period.</span></span>  
  
-   <span data-ttu-id="4cf72-126">增加 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 托管实例和数据层应用程序的处理器使用率的策略阈值。</span><span class="sxs-lookup"><span data-stu-id="4cf72-126">Increase policy thresholds for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] managed instance and data-tier application processor utilization.</span></span> <span data-ttu-id="4cf72-127">有关如何为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的托管实例或数据层应用程序更改全局 CPU 使用策略的详细信息，请参阅 [实用工具管理（SQL Server 实用工具）](../../database-engine/utility-administration-sql-server-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="4cf72-127">For more information about how to change the global CPU utilization policies for managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or data-tier applications, see [Utility Administration &#40;SQL Server Utility&#41;](../../database-engine/utility-administration-sql-server-utility.md).</span></span> <span data-ttu-id="4cf72-128">有关如何为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的单独实例更改 CPU 使用策略的详细信息，请参阅[托管实例详细信息（SQL Server 实用工具）](../../database-engine/managed-instance-details-sql-server-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="4cf72-128">For more information about how to change CPU utilization policies for individual instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Managed Instance Details &#40;SQL Server Utility&#41;](../../database-engine/managed-instance-details-sql-server-utility.md).</span></span> <span data-ttu-id="4cf72-129">有关如何为单独的数据层应用程序更改 CPU 使用策略的详细信息，请参阅[已部署的数据层应用程序详细信息（SQL Server 实用工具）](../../database-engine/deployed-data-tier-application-details-sql-server-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="4cf72-129">For more information about how to change CPU utilization policies for individual data-tier applications, see [Deployed Data-tier Application Details &#40;SQL Server Utility&#41;](../../database-engine/deployed-data-tier-application-details-sql-server-utility.md).</span></span>  
  
## <a name="how-frequently-should-processor-utilization-be-in-violation-before-it-is-reported-as-underutilized"></a><span data-ttu-id="4cf72-130">违反处理器使用率策略的频度有多高后才应报告为使用不足？</span><span class="sxs-lookup"><span data-stu-id="4cf72-130">How frequently should processor utilization be in violation before it is reported as underutilized?</span></span>  
 <span data-ttu-id="4cf72-131">评估时间段和违反百分比公差均可使用实用工具资源管理器的 **“实用工具管理”** 节点中的 **“策略”** 选项卡设置进行配置。</span><span class="sxs-lookup"><span data-stu-id="4cf72-131">The evaluation time period and tolerance for percent violations are both configurable using the **Policy** tab settings in the **Utility Administration** node of Utility Explorer.</span></span> <span data-ttu-id="4cf72-132">若要更改策略，请使用策略说明右侧的滑块控件，然后单击 **“应用”** 。</span><span class="sxs-lookup"><span data-stu-id="4cf72-132">To change policies, use the slider controls to the right of policy descriptions, then click **Apply**.</span></span> <span data-ttu-id="4cf72-133">您还可以使用显示底部的按钮还原默认值或放弃更改。</span><span class="sxs-lookup"><span data-stu-id="4cf72-133">You can also restore default values or discard changes using buttons at the bottom of the display.</span></span>  
  
-   <span data-ttu-id="4cf72-134">数据收集间隔为 15 分钟。</span><span class="sxs-lookup"><span data-stu-id="4cf72-134">The data collection interval is 15 minutes.</span></span> <span data-ttu-id="4cf72-135">此值是不可配置的。</span><span class="sxs-lookup"><span data-stu-id="4cf72-135">This value is not configurable.</span></span>  
  
-   <span data-ttu-id="4cf72-136">处理器使用策略的默认阈值下限是 0%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-136">The default lower threshold for processor utilization policy is 0%.</span></span> <span data-ttu-id="4cf72-137">选项范围是从 0% 到 100%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-137">Options range from 0% to 100%.</span></span>  
  
-   <span data-ttu-id="4cf72-138">处理器使用不足的默认评估期是 1 周。</span><span class="sxs-lookup"><span data-stu-id="4cf72-138">The default evaluation period for processor underutilization is 1 week.</span></span> <span data-ttu-id="4cf72-139">选项范围是从 1 天到 1 个月。</span><span class="sxs-lookup"><span data-stu-id="4cf72-139">Options range from 1 day to 1 month.</span></span>  
  
-   <span data-ttu-id="4cf72-140">在达到该值之后会将 CPU 报告为使用不足的违反策略的数据点的默认百分比是 90%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-140">The default percentage of data points in violation before CPU is reported as underutilized is 90%.</span></span> <span data-ttu-id="4cf72-141">选项范围是从 0% 到 100%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-141">Options range from 0% to 100%.</span></span>  
  
 <span data-ttu-id="4cf72-142">基于默认值，每周收集 672 个数据点，但策略阈值是 0%。</span><span class="sxs-lookup"><span data-stu-id="4cf72-142">Based on default values, 672 data points are collected every week, but the policy threshold is 0%.</span></span> <span data-ttu-id="4cf72-143">因此，默认情况下，该策略不会生成处理器使用不足违反策略情况。</span><span class="sxs-lookup"><span data-stu-id="4cf72-143">So by default, this policy does not generate processor underutilization violations.</span></span> <span data-ttu-id="4cf72-144">有关如何为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的托管实例或数据层应用程序更改全局 CPU 使用策略的详细信息，请参阅 [实用工具管理（SQL Server 实用工具）](../../database-engine/utility-administration-sql-server-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="4cf72-144">For more information about how to change the global CPU utilization policies for managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or data-tier applications, see [Utility Administration &#40;SQL Server Utility&#41;](../../database-engine/utility-administration-sql-server-utility.md).</span></span> <span data-ttu-id="4cf72-145">有关如何为 SQL Server 的单独实例更改 CPU 使用策略的详细信息，请参阅[托管实例详细信息（SQL Server 实用工具）](../../database-engine/managed-instance-details-sql-server-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="4cf72-145">For more information about how to change CPU utilization policies for individual instances of SQL Server, see [Managed Instance Details &#40;SQL Server Utility&#41;](../../database-engine/managed-instance-details-sql-server-utility.md).</span></span> <span data-ttu-id="4cf72-146">有关如何为单独的数据层应用程序更改 CPU 使用策略的详细信息，请参阅[已部署的数据层应用程序详细信息（SQL Server 实用工具）](../../database-engine/deployed-data-tier-application-details-sql-server-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="4cf72-146">For more information about how to change CPU utilization policies for individual data-tier applications, see [Deployed Data-tier Application Details &#40;SQL Server Utility&#41;](../../database-engine/deployed-data-tier-application-details-sql-server-utility.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4cf72-147">另请参阅</span><span class="sxs-lookup"><span data-stu-id="4cf72-147">See Also</span></span>  
 <span data-ttu-id="4cf72-148">[实用工具管理（SQL Server 实用工具）](../../database-engine/utility-administration-sql-server-utility.md) </span><span class="sxs-lookup"><span data-stu-id="4cf72-148">[Utility Administration &#40;SQL Server Utility&#41;](../../database-engine/utility-administration-sql-server-utility.md) </span></span>  
 <span data-ttu-id="4cf72-149">[在 SQL Server 实用工具中监视 SQL Server 的实例](monitor-instances-of-sql-server-in-the-sql-server-utility.md) </span><span class="sxs-lookup"><span data-stu-id="4cf72-149">[Monitor Instances of SQL Server in the SQL Server Utility](monitor-instances-of-sql-server-in-the-sql-server-utility.md) </span></span>  
 <span data-ttu-id="4cf72-150">[修改资源运行状况策略定义（SQL Server 实用工具）](modify-a-resource-health-policy-definition-sql-server-utility.md) </span><span class="sxs-lookup"><span data-stu-id="4cf72-150">[Modify a Resource Health Policy Definition &#40;SQL Server Utility&#41;](modify-a-resource-health-policy-definition-sql-server-utility.md) </span></span>  
 [<span data-ttu-id="4cf72-151">SQL Server 实用工具功能和任务</span><span class="sxs-lookup"><span data-stu-id="4cf72-151">SQL Server Utility Features and Tasks</span></span>](sql-server-utility-features-and-tasks.md)  
  
  
