---
title: 创建格式化文件 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: data-movement
ms.topic: conceptual
helpviewer_keywords:
- format files [SQL Server], creating
ms.assetid: f680b4a0-630f-4052-9c79-d348c1076f7b
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ca9c85bfcac3380ce13ba89fff6de0b5daadbece
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87576752"
---
# <a name="create-a-format-file-sql-server"></a><span data-ttu-id="163cd-102">创建格式化文件 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="163cd-102">Create a Format File (SQL Server)</span></span>
  <span data-ttu-id="163cd-103">当对 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 表进行大容量的数据导入或导出时，您可使用格式化文件提供一个灵活的系统，用于写入需要少量编辑或不需要编辑即可符合其他数据格式的数据文件，或用于从其他软件程序读取数据文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-103">When you bulk import into a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] table or bulk export data from a table, you can use a format file to a flexible system for writing data files that requires little or no editing to comply with other data formats or to read data files from other software programs.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="163cd-104">支持两种类型的格式化文件：非 XML 格式和 XML 格式。</span><span class="sxs-lookup"><span data-stu-id="163cd-104">support two types of format file: non-XML format and XML format.</span></span> <span data-ttu-id="163cd-105">非 XML 格式是 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]早期版本支持的原始格式。</span><span class="sxs-lookup"><span data-stu-id="163cd-105">The non-XML format is the original format that is supported by earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="163cd-106">通常，XML 与非 XML 格式化文件可以互换。</span><span class="sxs-lookup"><span data-stu-id="163cd-106">Generally, XML and non-XML format files are interchangeable.</span></span> <span data-ttu-id="163cd-107">但是，建议您为新的格式化文件使用 XML 语法，因为与非 XML 格式化文件相比，格式化文件具有多项优点。</span><span class="sxs-lookup"><span data-stu-id="163cd-107">However, we recommend that you use the XML syntax for new format files because they provide several advantages over non-XML format files.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="163cd-108">读取格式化文件所用的 **bcp** 实用工具 (Bcp.exe) 的版本必须与创建格式化文件所用的版本相同或更高。</span><span class="sxs-lookup"><span data-stu-id="163cd-108">The version of the **bcp** utility (Bcp.exe) used to read a format file must be the same as, or later than the version used to create the format file.</span></span> <span data-ttu-id="163cd-109">例如， [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] **bcp**可以读取由 bcp 生成的版本10.0 格式文件， [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] **bcp**但 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] **bcp**无法读取 bcp 生成的版本11.0 格式文件 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] **bcp**。</span><span class="sxs-lookup"><span data-stu-id="163cd-109">For example, [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]**bcp** can read a version 10.0 format file, which is generated by [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]**bcp**, but [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]**bcp** cannot read a version 11.0 format file, which is generated by [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]**bcp**.</span></span>  
  
 <span data-ttu-id="163cd-110">本主题说明了如何使用 [bcp 实用工具](../../tools/bcp-utility.md) 为特定表创建格式化文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-110">This topic describes how to use the [bcp utility](../../tools/bcp-utility.md) to create a format file for a particular table.</span></span> <span data-ttu-id="163cd-111">格式化文件基于指定的数据类型选项（ **-n**、 **-c**、 **-w**或 **-N**）以及表或视图分隔符。</span><span class="sxs-lookup"><span data-stu-id="163cd-111">The format file is based on the data-type option specified (**-n**, **-c**, **-w**,or **-N**) and the table or view delimiters.</span></span>  
  
## <a name="creating-a-non-xml-format-file"></a><span data-ttu-id="163cd-112">创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-112">Creating a Non-XML Format File</span></span>  
 <span data-ttu-id="163cd-113">若要使用 **bcp** 命令创建格式化文件，请指定 **format** 参数，并使用 **nul** 而不是数据文件路径。</span><span class="sxs-lookup"><span data-stu-id="163cd-113">To use a **bcp** command to create a format file, specify the **format** argument and use **nul** instead of a data-file path.</span></span> <span data-ttu-id="163cd-114">**format** 选项还需要 **-f** 选项，例如：</span><span class="sxs-lookup"><span data-stu-id="163cd-114">The **format** option also requires the **-f** option, such as:</span></span>  
  
 <span data-ttu-id="163cd-115">**bcp** _table_or_view_ **format** nul **-f**_format_file_name_</span><span class="sxs-lookup"><span data-stu-id="163cd-115">**bcp** _table_or_view_ **format** nul **-f**_format_file_name_</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="163cd-116">为区分非 XML 格式化文件，我们建议使用 .fmt 作为文件扩展名，例如 MyTable.fmt。</span><span class="sxs-lookup"><span data-stu-id="163cd-116">To distinguish a non-XML format file, we recommend that you use .fmt as the file name extension, for example, MyTable.fmt.</span></span>  
  
 <span data-ttu-id="163cd-117">有关非 XML 格式化文件结构和字段的信息，请参阅 [非 XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md)早期版本支持的原始格式。</span><span class="sxs-lookup"><span data-stu-id="163cd-117">For information about the structure and fields of non-XML format files, see [Non-XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md).</span></span>  
  
### <a name="examples"></a><span data-ttu-id="163cd-118">示例</span><span class="sxs-lookup"><span data-stu-id="163cd-118">Examples</span></span>  
 <span data-ttu-id="163cd-119">本部分包含以下示例，演示如何使用 **bcp** 命令创建非 XML 格式化文件：</span><span class="sxs-lookup"><span data-stu-id="163cd-119">This section contains the following examples that show how to use **bcp** commands to create a non-XML format file:</span></span>  
  
-   <span data-ttu-id="163cd-120">A.</span><span class="sxs-lookup"><span data-stu-id="163cd-120">A.</span></span> <span data-ttu-id="163cd-121">为本机数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-121">Creating a non-XML format file for native data</span></span>  
  
-   <span data-ttu-id="163cd-122">B.</span><span class="sxs-lookup"><span data-stu-id="163cd-122">B.</span></span> <span data-ttu-id="163cd-123">为字符数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-123">Creating a non-XML format file for character data</span></span>  
  
-   <span data-ttu-id="163cd-124">C.</span><span class="sxs-lookup"><span data-stu-id="163cd-124">C.</span></span> <span data-ttu-id="163cd-125">为 Unicode 本机数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-125">Creating a non-XML format file for Unicode native data</span></span>  
  
-   <span data-ttu-id="163cd-126">D.</span><span class="sxs-lookup"><span data-stu-id="163cd-126">D.</span></span> <span data-ttu-id="163cd-127">为 Unicode 字符数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-127">Creating a non-XML format file for Unicode character data</span></span>  
  
 <span data-ttu-id="163cd-128">本示例使用 `HumanResources.Department` 示例数据库中的 [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] 表。</span><span class="sxs-lookup"><span data-stu-id="163cd-128">The examples use the `HumanResources.Department` table in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] sample database.</span></span> <span data-ttu-id="163cd-129">`HumanResources.Department` 表包含四列： `DepartmentID`、 `Name`、 `GroupName`和 `ModifiedDate`。</span><span class="sxs-lookup"><span data-stu-id="163cd-129">The `HumanResources.Department` table contains four columns: `DepartmentID`, `Name`, `GroupName`, and `ModifiedDate`.</span></span>  
  
#### <a name="a-creating-a-non-xml-format-file-for-native-data"></a><span data-ttu-id="163cd-130">A.</span><span class="sxs-lookup"><span data-stu-id="163cd-130">A.</span></span> <span data-ttu-id="163cd-131">为本机数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-131">Creating a non-XML format file for native data</span></span>  
 <span data-ttu-id="163cd-132">以下示例将为 `Department-n.xml`表创建 XML 格式化文件 [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)]`HumanResources.Department` 。</span><span class="sxs-lookup"><span data-stu-id="163cd-132">The following example creates an XML format file, `Department-n.xml`, for the [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)]`HumanResources.Department` table.</span></span> <span data-ttu-id="163cd-133">格式化文件使用本机数据类型。</span><span class="sxs-lookup"><span data-stu-id="163cd-133">The format file uses native data types.</span></span> <span data-ttu-id="163cd-134">在命令之后显示生成的格式化文件的内容。</span><span class="sxs-lookup"><span data-stu-id="163cd-134">The contents of the generated format file are presented after the command.</span></span>  
  
 <span data-ttu-id="163cd-135">**bcp** 命令包含以下限定符。</span><span class="sxs-lookup"><span data-stu-id="163cd-135">The **bcp** command contains the following qualifiers.</span></span>  
  
|<span data-ttu-id="163cd-136">限定符</span><span class="sxs-lookup"><span data-stu-id="163cd-136">Qualifiers</span></span>|<span data-ttu-id="163cd-137">说明</span><span class="sxs-lookup"><span data-stu-id="163cd-137">Description</span></span>|  
|----------------|-----------------|  
|<span data-ttu-id="163cd-138">**formatnul-f** _format_file_</span><span class="sxs-lookup"><span data-stu-id="163cd-138">**formatnul-f** _format_file_</span></span>|<span data-ttu-id="163cd-139">指定非 XML 格式化文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-139">Specifies the non-XML format file.</span></span>|  
|<span data-ttu-id="163cd-140">**-n**</span><span class="sxs-lookup"><span data-stu-id="163cd-140">**-n**</span></span>|<span data-ttu-id="163cd-141">指定本机数据类型。</span><span class="sxs-lookup"><span data-stu-id="163cd-141">Specifies native data types.</span></span>|  
|<span data-ttu-id="163cd-142">**-T**</span><span class="sxs-lookup"><span data-stu-id="163cd-142">**-T**</span></span>|<span data-ttu-id="163cd-143">指定 **bcp** 实用工具通过使用集成安全性的受信任连接连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="163cd-143">Specifies that the **bcp** utility connects to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] with a trusted connection using integrated security.</span></span> <span data-ttu-id="163cd-144">如果未指定 **-T** ，则必须指定 **-U** 和 **-P** 才能成功登录。</span><span class="sxs-lookup"><span data-stu-id="163cd-144">If **-T** is not specified, you must specify **-U** and **-P** to successfully log in.</span></span>|  
  
 <span data-ttu-id="163cd-145">在 Windows 命令提示符下，输入以下 `bcp` 命令：</span><span class="sxs-lookup"><span data-stu-id="163cd-145">At the Windows command prompt, enter the following `bcp` command:</span></span>  
  
```  
bcp AdventureWorks2012.HumanResources.Department format nul -T -n -f Department-n.fmt  
```  
  
 <span data-ttu-id="163cd-146">生成的格式化文件 `Department-n.fmt`包含以下信息：</span><span class="sxs-lookup"><span data-stu-id="163cd-146">The generated format file, `Department-n.fmt`, contains the following information:</span></span>  
  
```  
12.0  
4  
1       SQLSMALLINT   0       2       ""   1     DepartmentID                 ""  
2       SQLNCHAR      2       100     ""   2     Name                         SQL_Latin1_General_CP1_CI_AS  
3       SQLNCHAR      2       100     ""   3     GroupName                    SQL_Latin1_General_CP1_CI_AS  
4       SQLDATETIME   0       8       ""   4     ModifiedDate                 ""  
```  
  
 <span data-ttu-id="163cd-147">有关详细信息，请参阅 [非 XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md)早期版本支持的原始格式。</span><span class="sxs-lookup"><span data-stu-id="163cd-147">For more information, see [Non-XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md).</span></span>  
  
#### <a name="b-creating-a-non-xml-format-file-for-character-data"></a><span data-ttu-id="163cd-148">B.</span><span class="sxs-lookup"><span data-stu-id="163cd-148">B.</span></span> <span data-ttu-id="163cd-149">为字符数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-149">Creating a non-XML format file for character data</span></span>  
 <span data-ttu-id="163cd-150">以下示例将为 `Department.fmt`表创建 XML 格式化文件 [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)]`HumanResources.Department` 。</span><span class="sxs-lookup"><span data-stu-id="163cd-150">The following example creates an XML format file, `Department.fmt`, for the [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)]`HumanResources.Department` table.</span></span> <span data-ttu-id="163cd-151">格式化文件使用字符数据格式和非默认字段终止符 (`,`)。</span><span class="sxs-lookup"><span data-stu-id="163cd-151">The format file uses character data formats and a non-default field terminator (`,`).</span></span> <span data-ttu-id="163cd-152">在命令之后显示生成的格式化文件的内容。</span><span class="sxs-lookup"><span data-stu-id="163cd-152">The contents of the generated format file are presented after the command.</span></span>  
  
 <span data-ttu-id="163cd-153">**bcp** 命令包含以下限定符。</span><span class="sxs-lookup"><span data-stu-id="163cd-153">The **bcp** command contains the following qualifiers.</span></span>  
  
|<span data-ttu-id="163cd-154">限定符</span><span class="sxs-lookup"><span data-stu-id="163cd-154">Qualifiers</span></span>|<span data-ttu-id="163cd-155">说明</span><span class="sxs-lookup"><span data-stu-id="163cd-155">Description</span></span>|  
|----------------|-----------------|  
|<span data-ttu-id="163cd-156">**formatnul-f** _format_file_</span><span class="sxs-lookup"><span data-stu-id="163cd-156">**formatnul-f** _format_file_</span></span>|<span data-ttu-id="163cd-157">指定非 XML 格式化文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-157">Specifies a non-XML format file.</span></span>|  
|<span data-ttu-id="163cd-158">**-c**</span><span class="sxs-lookup"><span data-stu-id="163cd-158">**-c**</span></span>|<span data-ttu-id="163cd-159">指定字符数据。</span><span class="sxs-lookup"><span data-stu-id="163cd-159">Specifies character data.</span></span>|  
|<span data-ttu-id="163cd-160">**-T**</span><span class="sxs-lookup"><span data-stu-id="163cd-160">**-T**</span></span>|<span data-ttu-id="163cd-161">指定 **bcp** 实用工具通过使用集成安全性的受信任连接连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="163cd-161">Specifies that the **bcp** utility connects to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] with a trusted connection using integrated security.</span></span> <span data-ttu-id="163cd-162">如果未指定 **-T** ，则必须指定 **-U** 和 **-P** 才能成功登录。</span><span class="sxs-lookup"><span data-stu-id="163cd-162">If **-T** is not specified, you must specify **-U** and **-P** to successfully log in.</span></span>|  
  
 <span data-ttu-id="163cd-163">在 Windows 命令提示符下，输入以下 `bcp` 命令：</span><span class="sxs-lookup"><span data-stu-id="163cd-163">At the Windows command prompt, enter the following `bcp` command:</span></span>  
  
```  
bcp AdventureWorks2012.HumanResources.Department format nul -c -f Department-c.fmt -T  
```  
  
 <span data-ttu-id="163cd-164">生成的格式化文件 `Department-c.fmt`包含以下信息：</span><span class="sxs-lookup"><span data-stu-id="163cd-164">The generated format file, `Department-c.fmt`, contains the following information:</span></span>  
  
```  
12.0  
4  
1       SQLCHAR       0       7       "\t"     1     DepartmentID                 ""  
2       SQLCHAR       0       100     "\t"     2     Name                         SQL_Latin1_General_CP1_CI_AS  
3       SQLCHAR       0       100     "\t"     3     GroupName                    SQL_Latin1_General_CP1_CI_AS  
4       SQLCHAR       0       24      "\r\n"   4     ModifiedDate                 ""  
```  
  
 <span data-ttu-id="163cd-165">有关详细信息，请参阅 [非 XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md)早期版本支持的原始格式。</span><span class="sxs-lookup"><span data-stu-id="163cd-165">For more information, see [Non-XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md).</span></span>  
  
#### <a name="c-creating-a-non-xml-format-file-for-unicode-native-data"></a><span data-ttu-id="163cd-166">C.</span><span class="sxs-lookup"><span data-stu-id="163cd-166">C.</span></span> <span data-ttu-id="163cd-167">为 Unicode 本机数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-167">Creating a non-XML format file for Unicode native data</span></span>  
 <span data-ttu-id="163cd-168">若要为 `HumanResources.Department` 表中的 Unicode 本机数据创建非 XML 格式化文件，请使用以下命令：</span><span class="sxs-lookup"><span data-stu-id="163cd-168">To create a non-XML format file for Unicode native data for the `HumanResources.Department` table, use the following command:</span></span>  
  
```  
bcp AdventureWorks2012.HumanResources.Department format nul -T -N -f Department-n.fmt  
```  
  
 <span data-ttu-id="163cd-169">有关如何使用 Unicode 本机数据的详细信息，请参阅[使用 Unicode 本机格式导入或导出数据 (SQL Server)](use-unicode-native-format-to-import-or-export-data-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="163cd-169">For more information about how to use Unicode native data, see [Use Unicode Native Format to Import or Export Data &#40;SQL Server&#41;](use-unicode-native-format-to-import-or-export-data-sql-server.md).</span></span>  
  
#### <a name="d-creating-a-non-xml-format-file-for-unicode-character-data"></a><span data-ttu-id="163cd-170">D.</span><span class="sxs-lookup"><span data-stu-id="163cd-170">D.</span></span> <span data-ttu-id="163cd-171">为 Unicode 字符数据创建非 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-171">Creating a non-XML format file For Unicode character data</span></span>  
 <span data-ttu-id="163cd-172">若要为 `HumanResources.Department` 表中使用默认终止符的 Unicode 字符数据创建非 XML 格式化文件，请使用以下命令：</span><span class="sxs-lookup"><span data-stu-id="163cd-172">To create a non-XML format file for Unicode character data for the `HumanResources.Department` table that uses default terminators, use the following command:</span></span>  
  
```  
bcp AdventureWorks2012.HumanResources.Department format nul -T -w -f Department-w.fmt  
```  
  
 <span data-ttu-id="163cd-173">有关如何使用 Unicode 字符数据的详细信息，请参阅[使用 Unicode 字符格式导入或导出数据 (SQL Server)](use-unicode-character-format-to-import-or-export-data-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="163cd-173">For more information about how to use Unicode character data, see [Use Unicode Character Format to Import or Export Data &#40;SQL Server&#41;](use-unicode-character-format-to-import-or-export-data-sql-server.md).</span></span>  
  
## <a name="creating-an-xml-format-file"></a><span data-ttu-id="163cd-174">创建 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-174">Creating an XML Format File</span></span>  
 <span data-ttu-id="163cd-175">若要使用 **bcp** 命令创建格式化文件，请指定 **format** 参数，并使用 **nul** 而不是数据文件路径。</span><span class="sxs-lookup"><span data-stu-id="163cd-175">To use a **bcp** command to create a format file, specify the **format** argument and use **nul** instead of a data-file path.</span></span> <span data-ttu-id="163cd-176">**format** 选项始终要求 **-f** 选项，若要创建 XML 格式化文件，还必须指定 **-x** 选项，例如：</span><span class="sxs-lookup"><span data-stu-id="163cd-176">The **format** option always requires the **-f** option, and to create an XML format file, you must also specify the **-x** option, such as:</span></span>  
  
 <span data-ttu-id="163cd-177">**bcp** _table_or_view_ **format nul-f** _format_file_name_ **-x**</span><span class="sxs-lookup"><span data-stu-id="163cd-177">**bcp** _table_or_view_ **format nul-f** _format_file_name_ **-x**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="163cd-178">为区分 XML 格式化文件，我们建议使用 .xml 作为文件扩展名，例如 MyTable.xml。</span><span class="sxs-lookup"><span data-stu-id="163cd-178">To distinguish an XML format file, we recommend that you use .xml as the file name extension, for example, MyTable.xml.</span></span>  
  
 <span data-ttu-id="163cd-179">有关 XML 格式化文件结构和字段的信息，请参阅 [XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md)早期版本支持的原始格式。</span><span class="sxs-lookup"><span data-stu-id="163cd-179">For information about the structure and fields of XML format files, see [XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md).</span></span>  
  
### <a name="examples"></a><span data-ttu-id="163cd-180">示例</span><span class="sxs-lookup"><span data-stu-id="163cd-180">Examples</span></span>  
 <span data-ttu-id="163cd-181">本部分包含以下示例，演示如何使用 **bcp** 命令创建 XML 格式化文件：</span><span class="sxs-lookup"><span data-stu-id="163cd-181">This section contains the following examples that show how to use **bcp** commands to create an XML format file:</span></span>  
  
-   <span data-ttu-id="163cd-182">A.</span><span class="sxs-lookup"><span data-stu-id="163cd-182">A.</span></span> <span data-ttu-id="163cd-183">为字符数据创建 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-183">Creating an XML format file for character data</span></span>  
  
-   <span data-ttu-id="163cd-184">B.</span><span class="sxs-lookup"><span data-stu-id="163cd-184">B.</span></span> <span data-ttu-id="163cd-185">为本机数据创建 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-185">Creating an XML format file for native data</span></span>  
  
 <span data-ttu-id="163cd-186">本示例使用 `HumanResources.Department` 示例数据库中的 [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] 表。</span><span class="sxs-lookup"><span data-stu-id="163cd-186">The examples use the `HumanResources.Department` table in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] sample database.</span></span> <span data-ttu-id="163cd-187">`HumanResources.Department` 表包含四列： `DepartmentID`、 `Name`、 `GroupName`和 `ModifiedDate`。</span><span class="sxs-lookup"><span data-stu-id="163cd-187">The `HumanResources.Department` table contains four columns: `DepartmentID`, `Name`, `GroupName`, and `ModifiedDate`.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssSampleDBdesc](../../includes/sssampledbdesc-md.md)]  
  
#### <a name="a-creating-an-xml-format-file-for-character-data"></a><span data-ttu-id="163cd-188">A.</span><span class="sxs-lookup"><span data-stu-id="163cd-188">A.</span></span> <span data-ttu-id="163cd-189">为字符数据创建 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-189">Creating an XML format file for character data</span></span>  
 <span data-ttu-id="163cd-190">以下示例将为 `Department.xml`表创建 XML 格式化文件 [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)]`HumanResources.Department` 。</span><span class="sxs-lookup"><span data-stu-id="163cd-190">The following example creates an XML format file, `Department.xml`, for the [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)]`HumanResources.Department` table.</span></span> <span data-ttu-id="163cd-191">格式化文件使用字符数据格式和非默认字段终止符 (`,`)。</span><span class="sxs-lookup"><span data-stu-id="163cd-191">The format file uses character data formats and a non-default field terminator (`,`).</span></span> <span data-ttu-id="163cd-192">在命令之后显示生成的格式化文件的内容。</span><span class="sxs-lookup"><span data-stu-id="163cd-192">The contents of the generated format file are presented after the command.</span></span>  
  
 <span data-ttu-id="163cd-193">**bcp** 命令包含以下限定符。</span><span class="sxs-lookup"><span data-stu-id="163cd-193">The **bcp** command contains the following qualifiers.</span></span>  
  
|<span data-ttu-id="163cd-194">限定符</span><span class="sxs-lookup"><span data-stu-id="163cd-194">Qualifiers</span></span>|<span data-ttu-id="163cd-195">说明</span><span class="sxs-lookup"><span data-stu-id="163cd-195">Description</span></span>|  
|----------------|-----------------|  
|<span data-ttu-id="163cd-196">**formatnul-f** _format_file_ **-x**</span><span class="sxs-lookup"><span data-stu-id="163cd-196">**formatnul-f** _format_file_ **-x**</span></span>|<span data-ttu-id="163cd-197">指定 XML 格式化文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-197">Specifies the XML format file.</span></span>|  
|<span data-ttu-id="163cd-198">**-c**</span><span class="sxs-lookup"><span data-stu-id="163cd-198">**-c**</span></span>|<span data-ttu-id="163cd-199">指定字符数据。</span><span class="sxs-lookup"><span data-stu-id="163cd-199">Specifies character data.</span></span>|  
|<span data-ttu-id="163cd-200">**-t** `,`</span><span class="sxs-lookup"><span data-stu-id="163cd-200">**-t** `,`</span></span>|<span data-ttu-id="163cd-201">将逗号 ( **,** ) 指定为字段终止符。</span><span class="sxs-lookup"><span data-stu-id="163cd-201">Specifies a comma (**,**) as the field terminator.</span></span><br /><br /> <span data-ttu-id="163cd-202">注意：如果数据文件使用默认的字段终止符 (`\t`)，则不需要 -t 开关  。</span><span class="sxs-lookup"><span data-stu-id="163cd-202">Note: If the data file uses the default field terminator (`\t`), the **-t** switch is unnecessary.</span></span>|  
|<span data-ttu-id="163cd-203">**-T**</span><span class="sxs-lookup"><span data-stu-id="163cd-203">**-T**</span></span>|<span data-ttu-id="163cd-204">指定 **bcp** 实用工具通过使用集成安全性的受信任连接连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="163cd-204">Specifies that the **bcp** utility connects to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] with a trusted connection using integrated security.</span></span> <span data-ttu-id="163cd-205">如果未指定 **-T** ，则必须指定 **-U** 和 **-P** 才能成功登录。</span><span class="sxs-lookup"><span data-stu-id="163cd-205">If **-T** is not specified, you must specify **-U** and **-P** to successfully log in.</span></span>|  
  
 <span data-ttu-id="163cd-206">在 Windows 命令提示符下，输入以下 `bcp` 命令：</span><span class="sxs-lookup"><span data-stu-id="163cd-206">At the Windows command prompt, enter the following `bcp` command:</span></span>  
  
```  
bcp AdventureWorks2012.HumanResources.Department format nul -c -x -f Department-c..xml -t, -T  
```  
  
 <span data-ttu-id="163cd-207">生成的格式化文件 `Department-c.xml`包含以下 XML 元素：</span><span class="sxs-lookup"><span data-stu-id="163cd-207">The generated format file, `Department-c.xml`, contains the following XML elements:</span></span>  
  
```  
<?xml version="1.0"?>  
<BCPFORMAT xmlns="https://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">  
 <RECORD>  
  <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="," MAX_LENGTH="7"/>  
  <FIELD ID="2" xsi:type="CharTerm" TERMINATOR="," MAX_LENGTH="100" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>  
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR="," MAX_LENGTH="100" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>  
  <FIELD ID="4" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="24"/>  
 </RECORD>  
 <ROW>  
  <COLUMN SOURCE="1" NAME="DepartmentID" xsi:type="SQLSMALLINT"/>  
  <COLUMN SOURCE="2" NAME="Name" xsi:type="SQLNVARCHAR"/>  
  <COLUMN SOURCE="3" NAME="GroupName" xsi:type="SQLNVARCHAR"/>  
  <COLUMN SOURCE="4" NAME="ModifiedDate" xsi:type="SQLDATETIME"/>  
 </ROW>  
</BCPFORMAT>  
```  
  
 <span data-ttu-id="163cd-208">有关此格式化文件语法的详细信息，请参阅 [XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="163cd-208">For information about the syntax of this format file, see [XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md).</span></span> <span data-ttu-id="163cd-209">有关字符数据的详细信息，请参阅[使用字符格式导入或导出数据 (SQL Server)](use-character-format-to-import-or-export-data-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="163cd-209">For information about character data, see [Use Character Format to Import or Export Data &#40;SQL Server&#41;](use-character-format-to-import-or-export-data-sql-server.md).</span></span>  
  
#### <a name="b-creating-an-xml-format-file-for-native-data"></a><span data-ttu-id="163cd-210">B.</span><span class="sxs-lookup"><span data-stu-id="163cd-210">B.</span></span> <span data-ttu-id="163cd-211">为本机数据创建 XML 格式化文件</span><span class="sxs-lookup"><span data-stu-id="163cd-211">Creating an XML format file for native data</span></span>  
 <span data-ttu-id="163cd-212">以下示例将为 `Department-n.xml`表创建 XML 格式化文件 `HumanResources.Department` 。</span><span class="sxs-lookup"><span data-stu-id="163cd-212">The following example creates an XML format file, `Department-n.xml`, for the `HumanResources.Department` table.</span></span> <span data-ttu-id="163cd-213">格式化文件使用本机数据类型。</span><span class="sxs-lookup"><span data-stu-id="163cd-213">The format file uses native data types.</span></span> <span data-ttu-id="163cd-214">在命令之后显示生成的格式化文件的内容。</span><span class="sxs-lookup"><span data-stu-id="163cd-214">The contents of the generated format file are presented after the command.</span></span>  
  
 <span data-ttu-id="163cd-215">**bcp** 命令包含以下限定符。</span><span class="sxs-lookup"><span data-stu-id="163cd-215">The **bcp** command contains the following qualifiers.</span></span>  
  
|<span data-ttu-id="163cd-216">限定符</span><span class="sxs-lookup"><span data-stu-id="163cd-216">Qualifiers</span></span>|<span data-ttu-id="163cd-217">说明</span><span class="sxs-lookup"><span data-stu-id="163cd-217">Description</span></span>|  
|----------------|-----------------|  
|<span data-ttu-id="163cd-218">**formatnul-f** _format_file_ **-x**</span><span class="sxs-lookup"><span data-stu-id="163cd-218">**formatnul-f** _format_file_ **-x**</span></span>|<span data-ttu-id="163cd-219">指定 XML 格式化文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-219">Specifies the XML format file.</span></span>|  
|<span data-ttu-id="163cd-220">**-n**</span><span class="sxs-lookup"><span data-stu-id="163cd-220">**-n**</span></span>|<span data-ttu-id="163cd-221">指定本机数据类型。</span><span class="sxs-lookup"><span data-stu-id="163cd-221">Specifies native data types.</span></span>|  
|<span data-ttu-id="163cd-222">**-T**</span><span class="sxs-lookup"><span data-stu-id="163cd-222">**-T**</span></span>|<span data-ttu-id="163cd-223">指定 **bcp** 实用工具通过使用集成安全性的受信任连接连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="163cd-223">Specifies that the **bcp** utility connects to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] with a trusted connection using integrated security.</span></span> <span data-ttu-id="163cd-224">如果未指定 **-T** ，则必须指定 **-U** 和 **-P** 才能成功登录。</span><span class="sxs-lookup"><span data-stu-id="163cd-224">If **-T** is not specified, you must specify **-U** and **-P** to successfully log in.</span></span>|  
  
 <span data-ttu-id="163cd-225">在 Windows 命令提示符下，输入以下 `bcp` 命令：</span><span class="sxs-lookup"><span data-stu-id="163cd-225">At the Windows command prompt, enter the following `bcp` command:</span></span>  
  
```  
bcp AdventureWorks2012.HumanResources.Department format nul -x -f Department-n..xml -n -T  
```  
  
 <span data-ttu-id="163cd-226">生成的格式化文件 `Department-n.xml`包含以下 XML 元素：</span><span class="sxs-lookup"><span data-stu-id="163cd-226">The generated format file, `Department-n.xml`, contains the following XML elements:</span></span>  
  
```  
<?xml version="1.0"?>  
<BCPFORMAT xmlns="https://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">  
 <RECORD>  
  <FIELD ID="1" xsi:type="NativeFixed" LENGTH="2"/>  
  <FIELD ID="2" xsi:type="NCharPrefix" PREFIX_LENGTH="2" MAX_LENGTH="100" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>  
  <FIELD ID="3" xsi:type="NCharPrefix" PREFIX_LENGTH="2" MAX_LENGTH="100" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>  
  <FIELD ID="4" xsi:type="NativeFixed" LENGTH="8"/>  
 </RECORD>  
 <ROW>  
  <COLUMN SOURCE="1" NAME="DepartmentID" xsi:type="SQLSMALLINT"/>  
  <COLUMN SOURCE="2" NAME="Name" xsi:type="SQLNVARCHAR"/>  
  <COLUMN SOURCE="3" NAME="GroupName" xsi:type="SQLNVARCHAR"/>  
  <COLUMN SOURCE="4" NAME="ModifiedDate" xsi:type="SQLDATETIME"/>  
 </ROW>  
</BCPFORMAT>  
```  
  
 <span data-ttu-id="163cd-227">有关此格式化文件语法的详细信息，请参阅 [XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="163cd-227">For information about the syntax of this format file, see [XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md).</span></span> <span data-ttu-id="163cd-228">有关如何使用本机数据的详细信息，请参阅[使用本机格式导入或导出数据 (SQL Server)](use-native-format-to-import-or-export-data-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="163cd-228">For information about how to use native data, see [Use Native Format to Import or Export Data &#40;SQL Server&#41;](use-native-format-to-import-or-export-data-sql-server.md).</span></span>  
  
## <a name="mapping-data-fields-to-table-columns"></a><span data-ttu-id="163cd-229">将数据字段映射到表列</span><span class="sxs-lookup"><span data-stu-id="163cd-229">Mapping Data Fields to Table Columns</span></span>  
 <span data-ttu-id="163cd-230">如同使用 **bcp**创建一样，格式化文件按顺序说明所有的表列。</span><span class="sxs-lookup"><span data-stu-id="163cd-230">As created by **bcp**, a format file describes all the table columns in order.</span></span> <span data-ttu-id="163cd-231">可以修改格式化文件以重新安排或忽略表列。</span><span class="sxs-lookup"><span data-stu-id="163cd-231">You can modify a format file to rearrange or omit table rows.</span></span> <span data-ttu-id="163cd-232">这便于您针对字段未直接映射到表列的数据文件来自定义格式化文件。</span><span class="sxs-lookup"><span data-stu-id="163cd-232">This lets you customize a format file to a data file whose fields do not map directly to the table columns.</span></span> <span data-ttu-id="163cd-233">有关详情，请参阅以下主题：</span><span class="sxs-lookup"><span data-stu-id="163cd-233">For more information, see the following topics:</span></span>  
  
-   [<span data-ttu-id="163cd-234">使用格式化文件跳过表列 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="163cd-234">Use a Format File to Skip a Table Column &#40;SQL Server&#41;</span></span>](use-a-format-file-to-skip-a-table-column-sql-server.md)  
  
-   [<span data-ttu-id="163cd-235">使用格式化文件跳过数据字段 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="163cd-235">Use a Format File to Skip a Data Field &#40;SQL Server&#41;</span></span>](use-a-format-file-to-skip-a-data-field-sql-server.md)  
  
-   [<span data-ttu-id="163cd-236">使用格式化文件将表列映射到数据文件字段 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="163cd-236">Use a Format File to Map Table Columns to Data-File Fields &#40;SQL Server&#41;</span></span>](use-a-format-file-to-map-table-columns-to-data-file-fields-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="163cd-237">另请参阅</span><span class="sxs-lookup"><span data-stu-id="163cd-237">See Also</span></span>  
 <span data-ttu-id="163cd-238">[bcp 实用工具](../../tools/bcp-utility.md) </span><span class="sxs-lookup"><span data-stu-id="163cd-238">[bcp Utility](../../tools/bcp-utility.md) </span></span>  
 <span data-ttu-id="163cd-239">[使用格式化文件将表列映射到数据文件字段 (SQL Server)](use-a-format-file-to-map-table-columns-to-data-file-fields-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="163cd-239">[Use a Format File to Map Table Columns to Data-File Fields &#40;SQL Server&#41;](use-a-format-file-to-map-table-columns-to-data-file-fields-sql-server.md) </span></span>  
 <span data-ttu-id="163cd-240">[使用格式化文件跳过表列 (SQL Server)](use-a-format-file-to-skip-a-table-column-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="163cd-240">[Use a Format File to Skip a Table Column &#40;SQL Server&#41;](use-a-format-file-to-skip-a-table-column-sql-server.md) </span></span>  
 <span data-ttu-id="163cd-241">[使用格式化文件跳过数据字段 (SQL Server)](use-a-format-file-to-skip-a-data-field-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="163cd-241">[Use a Format File to Skip a Data Field &#40;SQL Server&#41;](use-a-format-file-to-skip-a-data-field-sql-server.md) </span></span>  
 <span data-ttu-id="163cd-242">[非 XML 格式化文件 (SQL Server)](xml-format-files-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="163cd-242">[Non-XML Format Files &#40;SQL Server&#41;](xml-format-files-sql-server.md) </span></span>  
 [<span data-ttu-id="163cd-243">XML 格式化文件 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="163cd-243">XML Format Files &#40;SQL Server&#41;</span></span>](xml-format-files-sql-server.md)  
  
  
