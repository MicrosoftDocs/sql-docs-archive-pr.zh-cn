---
title: 行压缩的实现 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- compression [SQL Server], row
- row compression [Database Engine]
ms.assetid: dcd97ac1-1c85-4142-9594-9182e62f6832
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9fd2262ef7e892ef79366dbbf2ed7705a66978b9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87589697"
---
# <a name="row-compression-implementation"></a><span data-ttu-id="78194-102">Row Compression Implementation</span><span class="sxs-lookup"><span data-stu-id="78194-102">Row Compression Implementation</span></span>
  <span data-ttu-id="78194-103">本主题概述了 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 是如何实现行压缩的。</span><span class="sxs-lookup"><span data-stu-id="78194-103">This topic summarizes how [!INCLUDE[ssDE](../../includes/ssde-md.md)] implements row compression.</span></span> <span data-ttu-id="78194-104">此摘要提供了有助于您规划数据所需存储空间的基本信息。</span><span class="sxs-lookup"><span data-stu-id="78194-104">This summary provides basic information to help you plan the storage space that you need for your data.</span></span>  
  
 <span data-ttu-id="78194-105">启用压缩只会更改与数据类型相关联的数据的物理存储格式，而不会更改其语法或语义。</span><span class="sxs-lookup"><span data-stu-id="78194-105">Enabling compression only changes the physical storage format of the data that is associated with a data type but not its syntax or semantics.</span></span> <span data-ttu-id="78194-106">当对一个或多个表启用压缩时，不需要更改应用程序。</span><span class="sxs-lookup"><span data-stu-id="78194-106">Application changes are not required when one or more tables are enabled for compression.</span></span> <span data-ttu-id="78194-107">新的记录存储格式主要有以下更改：</span><span class="sxs-lookup"><span data-stu-id="78194-107">The new record storage format has the following main changes:</span></span>  
  
-   <span data-ttu-id="78194-108">减少了与记录相关联的元数据开销。</span><span class="sxs-lookup"><span data-stu-id="78194-108">It reduces the metadata overhead that is associated with the record.</span></span> <span data-ttu-id="78194-109">此元数据为有关列、列长度和偏移量的信息。</span><span class="sxs-lookup"><span data-stu-id="78194-109">This metadata is information about columns, their lengths and offsets.</span></span> <span data-ttu-id="78194-110">在某些情况下，元数据开销可能大于旧的存储格式。</span><span class="sxs-lookup"><span data-stu-id="78194-110">In some cases, the metadata overhead might be larger than the old storage format.</span></span>  
  
-   <span data-ttu-id="78194-111">它对于数值类型（例如，`integer`、`decimal` 和 `float`）和基于数值的类型（例如，`datetime` 和 `money`）使用可变长度存储格式。</span><span class="sxs-lookup"><span data-stu-id="78194-111">It uses variable-length storage format for numeric types (for example `integer`, `decimal`, and `float`) and the types that are based on numeric (for example `datetime` and `money`).</span></span>  
  
-   <span data-ttu-id="78194-112">它通过使用不存储空字符的可变长度格式来存储定长字符串。</span><span class="sxs-lookup"><span data-stu-id="78194-112">It stores fixed character strings by using variable-length format by not storing the blank characters.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="78194-113">将对所有数据类型的 NULL 和 0 值进行优化，从而使它们不占用任何字节。</span><span class="sxs-lookup"><span data-stu-id="78194-113">NULL and 0 values across all data types are optimized and take no bytes.</span></span>  
  
## <a name="how-row-compression-affects-storage"></a><span data-ttu-id="78194-114">行压缩影响存储的方式</span><span class="sxs-lookup"><span data-stu-id="78194-114">How Row Compression Affects Storage</span></span>  
 <span data-ttu-id="78194-115">下表介绍了行压缩是如何影响 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中的现有类型的。</span><span class="sxs-lookup"><span data-stu-id="78194-115">The following table describes how row compression affects the existing types in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="78194-116">此表不包括通过使用页压缩可以节省的空间。</span><span class="sxs-lookup"><span data-stu-id="78194-116">The table does not include the savings that can be achieved by using page compression.</span></span>  
  
|<span data-ttu-id="78194-117">数据类型</span><span class="sxs-lookup"><span data-stu-id="78194-117">Data type</span></span>|<span data-ttu-id="78194-118">是否影响存储？</span><span class="sxs-lookup"><span data-stu-id="78194-118">Is storage affected?</span></span>|<span data-ttu-id="78194-119">说明</span><span class="sxs-lookup"><span data-stu-id="78194-119">Description</span></span>|  
|---------------|--------------------------|-----------------|  
|`tinyint`|<span data-ttu-id="78194-120">否</span><span class="sxs-lookup"><span data-stu-id="78194-120">No</span></span>|<span data-ttu-id="78194-121">1 个字节是所需的最小存储单位。</span><span class="sxs-lookup"><span data-stu-id="78194-121">1 byte is the minimum storage needed.</span></span>|  
|`smallint`|<span data-ttu-id="78194-122">是</span><span class="sxs-lookup"><span data-stu-id="78194-122">Yes</span></span>|<span data-ttu-id="78194-123">如果值使用 1 个字节即可存储，则将只使用 1 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-123">If the value fits in 1 byte, only 1 byte will be used.</span></span>|  
|`int`|<span data-ttu-id="78194-124">是</span><span class="sxs-lookup"><span data-stu-id="78194-124">Yes</span></span>|<span data-ttu-id="78194-125">只使用所需字节数。</span><span class="sxs-lookup"><span data-stu-id="78194-125">Uses only the bytes that are needed.</span></span> <span data-ttu-id="78194-126">例如，如果值可以用 1 个字节存储，则将只占用 1 个字节的存储空间。</span><span class="sxs-lookup"><span data-stu-id="78194-126">For example, if a value can be stored in 1 byte, storage will take only 1 byte.</span></span>|  
|`bigint`|<span data-ttu-id="78194-127">是</span><span class="sxs-lookup"><span data-stu-id="78194-127">Yes</span></span>|<span data-ttu-id="78194-128">只使用所需字节数。</span><span class="sxs-lookup"><span data-stu-id="78194-128">Uses only the bytes that are needed.</span></span> <span data-ttu-id="78194-129">例如，如果值可以用 1 个字节存储，则将只占用 1 个字节的存储空间。</span><span class="sxs-lookup"><span data-stu-id="78194-129">For example, if a value can be stored in 1 byte, storage will take only 1 byte.</span></span>|  
|`decimal`|<span data-ttu-id="78194-130">是</span><span class="sxs-lookup"><span data-stu-id="78194-130">Yes</span></span>|<span data-ttu-id="78194-131">此存储与 vardecimal 存储格式完全相同。</span><span class="sxs-lookup"><span data-stu-id="78194-131">This storage is exactly same as the vardecimal storage format.</span></span>|  
|`numeric`|<span data-ttu-id="78194-132">是</span><span class="sxs-lookup"><span data-stu-id="78194-132">Yes</span></span>|<span data-ttu-id="78194-133">此存储与 vardecimal 存储格式完全相同。</span><span class="sxs-lookup"><span data-stu-id="78194-133">This storage is exactly same as the vardecimal storage format.</span></span>|  
|`bit`|<span data-ttu-id="78194-134">是</span><span class="sxs-lookup"><span data-stu-id="78194-134">Yes</span></span>|<span data-ttu-id="78194-135">元数据开销使此类型达到 4 个位。</span><span class="sxs-lookup"><span data-stu-id="78194-135">The metadata overhead brings this to 4 bits.</span></span>|  
|`smallmoney`|<span data-ttu-id="78194-136">是</span><span class="sxs-lookup"><span data-stu-id="78194-136">Yes</span></span>|<span data-ttu-id="78194-137">使用 4 字节整数表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-137">Uses the integer data representation by using a 4-byte integer.</span></span> <span data-ttu-id="78194-138">货币值乘以 10000，并在存储生成的整数值时删除小数点之后的所有位数。</span><span class="sxs-lookup"><span data-stu-id="78194-138">Currency value is multiplied by 10000 and the resulting integer value is stored by removing any digits after the decimal point.</span></span> <span data-ttu-id="78194-139">此类型具有类似于整数类型存储优化的存储优化。</span><span class="sxs-lookup"><span data-stu-id="78194-139">This type has a storage optimization similar to that for integer types.</span></span>|  
|`money`|<span data-ttu-id="78194-140">是</span><span class="sxs-lookup"><span data-stu-id="78194-140">Yes</span></span>|<span data-ttu-id="78194-141">使用 8 字节整数表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-141">Uses the integer data representation by using an 8-byte integer.</span></span> <span data-ttu-id="78194-142">货币值乘以 10000，并在存储生成的整数值时删除小数点之后的所有位数。</span><span class="sxs-lookup"><span data-stu-id="78194-142">Currency value is multiplied by 10000 and the resulting integer value is stored by removing any digits after the decimal point.</span></span> <span data-ttu-id="78194-143">此类型的范围比 `smallmoney` 更大。</span><span class="sxs-lookup"><span data-stu-id="78194-143">This type has a larger range than `smallmoney`.</span></span> <span data-ttu-id="78194-144">此类型具有类似于整数类型存储优化的存储优化。</span><span class="sxs-lookup"><span data-stu-id="78194-144">This type has a storage optimization similar to that for integer types.</span></span>|  
|`float`|<span data-ttu-id="78194-145">是</span><span class="sxs-lookup"><span data-stu-id="78194-145">Yes</span></span>|<span data-ttu-id="78194-146">不存储带零的最低有效字节。</span><span class="sxs-lookup"><span data-stu-id="78194-146">Least significant bytes with zeros are not stored.</span></span> <span data-ttu-id="78194-147">`float` 压缩主要适用于尾数中的非小数值。</span><span class="sxs-lookup"><span data-stu-id="78194-147">`float` compression is applicable mostly for nonfractional values in mantissa.</span></span>|  
|`real`|<span data-ttu-id="78194-148">是</span><span class="sxs-lookup"><span data-stu-id="78194-148">Yes</span></span>|<span data-ttu-id="78194-149">不存储带零的最低有效字节。</span><span class="sxs-lookup"><span data-stu-id="78194-149">Least significant bytes with zeros are not stored.</span></span> <span data-ttu-id="78194-150">`real` 压缩主要适用于尾数中的非小数值。</span><span class="sxs-lookup"><span data-stu-id="78194-150">`real` compression is applicable mostly for nonfractional values in mantissa.</span></span>|  
|`smalldatetime`|<span data-ttu-id="78194-151">否</span><span class="sxs-lookup"><span data-stu-id="78194-151">No</span></span>|<span data-ttu-id="78194-152">使用两个 2 字节整数表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-152">Uses the integer data representation by using two 2-byte integers.</span></span> <span data-ttu-id="78194-153">日期占用 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-153">The date takes 2 bytes.</span></span> <span data-ttu-id="78194-154">它是自 1901 年 1 月 1 日以来经过的天数。</span><span class="sxs-lookup"><span data-stu-id="78194-154">It is the number of days since 1/1/1901.</span></span> <span data-ttu-id="78194-155">从 1902 年起便需要 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-155">This needs 2 bytes starting from 1902.</span></span> <span data-ttu-id="78194-156">因此，自该时间之后的日期不会节省任何空间。</span><span class="sxs-lookup"><span data-stu-id="78194-156">Therefore, there is no savings after that point.</span></span><br /><br /> <span data-ttu-id="78194-157">时间是自午夜以来经过的分钟数。</span><span class="sxs-lookup"><span data-stu-id="78194-157">The time is the number of minutes since midnight.</span></span> <span data-ttu-id="78194-158">超过 4AM 后，时间值就开始使用第二个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-158">Time values that are slightly past 4AM start to use the second byte.</span></span><br /><br /> <span data-ttu-id="78194-159">如果 `smalldatetime` 只用于表示日期（常见情况），则时间为 0.0。</span><span class="sxs-lookup"><span data-stu-id="78194-159">If a `smalldatetime` is only used to represent a date (a common case), the time is 0.0.</span></span> <span data-ttu-id="78194-160">通过为行压缩以最高有效字节格式存储时间，压缩操作可节省 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-160">Compression saves 2 bytes by storing the time in most significant byte format for row compression.</span></span>|  
|`datetime`|<span data-ttu-id="78194-161">是</span><span class="sxs-lookup"><span data-stu-id="78194-161">Yes</span></span>|<span data-ttu-id="78194-162">使用两个 4 字节整数表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-162">Uses the integer data representation by using two 4-byte integers.</span></span> <span data-ttu-id="78194-163">此整数值表示自 1900 年 1 月 1 日以来经过的天数。</span><span class="sxs-lookup"><span data-stu-id="78194-163">The integer value represents the number of days with base date of 1/1/1900.</span></span> <span data-ttu-id="78194-164">前 2 个字节最高可以表示 2079 年。</span><span class="sxs-lookup"><span data-stu-id="78194-164">The first 2 bytes can represent up to the year 2079.</span></span> <span data-ttu-id="78194-165">在 2079 年之前，此类压缩始终可以节省 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-165">Compression can always save 2 bytes here until that point.</span></span> <span data-ttu-id="78194-166">每个整数值表示 3.33 毫秒。</span><span class="sxs-lookup"><span data-stu-id="78194-166">Each integer value represents 3.33 milliseconds.</span></span> <span data-ttu-id="78194-167">压缩在前五分钟只占用前 2 个字节，在 4PM 之后将使用第四个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-167">Compression exhausts the first 2 bytes in first five minutes and needs the fourth byte after 4PM.</span></span> <span data-ttu-id="78194-168">因此，压缩在 4PM 之后只能节省 1 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-168">Therefore, compression can save only 1 byte after 4PM.</span></span> <span data-ttu-id="78194-169">当 `datetime` 像任何其他整数一样进行压缩时，压缩可在日期方面节省 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-169">When `datetime` is compressed like any other integer, compression saves 2 bytes in the date.</span></span>|  
|`date`|<span data-ttu-id="78194-170">否</span><span class="sxs-lookup"><span data-stu-id="78194-170">No</span></span>|<span data-ttu-id="78194-171">使用 3 个字节表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-171">Uses the integer data representation by using 3 bytes.</span></span> <span data-ttu-id="78194-172">这表示自 0001 年 1 月 1 日起的日期。</span><span class="sxs-lookup"><span data-stu-id="78194-172">This represents the date from 1/1/0001.</span></span> <span data-ttu-id="78194-173">对于当代日期，行压缩使用所有 3 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-173">For contemporary dates, row compression uses all 3 bytes.</span></span> <span data-ttu-id="78194-174">这不会节省任何空间。</span><span class="sxs-lookup"><span data-stu-id="78194-174">This achieves no savings.</span></span>|  
|`time`|<span data-ttu-id="78194-175">否</span><span class="sxs-lookup"><span data-stu-id="78194-175">No</span></span>|<span data-ttu-id="78194-176">使用 3 到 6 个字节表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-176">Uses the integer data representation by using 3 to 6 bytes.</span></span> <span data-ttu-id="78194-177">有从 0 到 9 的各种精度，会占用 3 到 6 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-177">There are various precisions that start with 0 to 9 that can take 3 to 6 bytes.</span></span> <span data-ttu-id="78194-178">请注意，进行行压缩时存储不做任何更改。</span><span class="sxs-lookup"><span data-stu-id="78194-178">Note that there is no change in storage for row compression.</span></span> <span data-ttu-id="78194-179">总体上而言，压缩 `time` 数据类型不会获得很大的空间节省。</span><span class="sxs-lookup"><span data-stu-id="78194-179">Overall, not much savings can be expected from compressing the `time` data type.</span></span> <span data-ttu-id="78194-180">压缩后的空间按如下方式使用：</span><span class="sxs-lookup"><span data-stu-id="78194-180">Compressed space is used as follows:</span></span><br /><br /> <span data-ttu-id="78194-181">精度 = 0。</span><span class="sxs-lookup"><span data-stu-id="78194-181">Precision = 0.</span></span> <span data-ttu-id="78194-182">字节数 = 3。</span><span class="sxs-lookup"><span data-stu-id="78194-182">Bytes = 3.</span></span> <span data-ttu-id="78194-183">每个整数值表示一秒。</span><span class="sxs-lookup"><span data-stu-id="78194-183">Each integer value represents a second.</span></span> <span data-ttu-id="78194-184">使用 2 个字节，压缩最长可表示到 6PM，这样可以节省 1 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-184">Compression can represent time up to 6PM by using 2 bytes, potentially saving 1 byte.</span></span><br /><br /> <span data-ttu-id="78194-185">精度 = 1。</span><span class="sxs-lookup"><span data-stu-id="78194-185">Precision = 1.</span></span> <span data-ttu-id="78194-186">字节数 = 3。</span><span class="sxs-lookup"><span data-stu-id="78194-186">Bytes = 3.</span></span> <span data-ttu-id="78194-187">每个整数值表示 1/10 秒。</span><span class="sxs-lookup"><span data-stu-id="78194-187">Each integer value represents 1/10 seconds.</span></span> <span data-ttu-id="78194-188">在 2AM 之前，压缩使用第三个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-188">Compression uses the third byte before 2AM.</span></span> <span data-ttu-id="78194-189">结果是只能节省很少的空间。</span><span class="sxs-lookup"><span data-stu-id="78194-189">Results in little savings.</span></span><br /><br /> <span data-ttu-id="78194-190">精度 = 2。</span><span class="sxs-lookup"><span data-stu-id="78194-190">Precision = 2.</span></span> <span data-ttu-id="78194-191">字节数 = 3。</span><span class="sxs-lookup"><span data-stu-id="78194-191">Bytes = 3.</span></span> <span data-ttu-id="78194-192">与前一情况类似，节省空间的可能性很小。</span><span class="sxs-lookup"><span data-stu-id="78194-192">Similar to the previous case, it is unlikely to achieve savings.</span></span><br /><br /> <span data-ttu-id="78194-193">精度 = 3。</span><span class="sxs-lookup"><span data-stu-id="78194-193">Precision = 3.</span></span> <span data-ttu-id="78194-194">字节数 = 4。</span><span class="sxs-lookup"><span data-stu-id="78194-194">Bytes = 4.</span></span> <span data-ttu-id="78194-195">由于直到 5AM 都将使用前 3 个字节，因而节省的空间很小。</span><span class="sxs-lookup"><span data-stu-id="78194-195">Because the first 3 bytes are taken by 5AM, achieves little savings.</span></span><br /><br /> <span data-ttu-id="78194-196">精度 = 4。</span><span class="sxs-lookup"><span data-stu-id="78194-196">Precision = 4.</span></span> <span data-ttu-id="78194-197">字节数 = 4。</span><span class="sxs-lookup"><span data-stu-id="78194-197">Bytes = 4.</span></span> <span data-ttu-id="78194-198">前 27 秒会使用前 3 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-198">The first 3 bytes are taken in the first 27 seconds.</span></span> <span data-ttu-id="78194-199">不会节省任何空间。</span><span class="sxs-lookup"><span data-stu-id="78194-199">No savings are expected.</span></span><br /><br /> <span data-ttu-id="78194-200">精度 = 5，字节数 = 5。</span><span class="sxs-lookup"><span data-stu-id="78194-200">Precision = 5, Bytes = 5.</span></span> <span data-ttu-id="78194-201">在中午 12 点之后，将使用第五个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-201">Fifth byte will be used after 12-noon.</span></span><br /><br /> <span data-ttu-id="78194-202">精度 = 6 和 7，字节数 = 5。</span><span class="sxs-lookup"><span data-stu-id="78194-202">Precision = 6 and 7, Bytes = 5.</span></span> <span data-ttu-id="78194-203">不能实现任何节省。</span><span class="sxs-lookup"><span data-stu-id="78194-203">Achieves no savings.</span></span><br /><br /> <span data-ttu-id="78194-204">精度 = 8，字节数 = 6。</span><span class="sxs-lookup"><span data-stu-id="78194-204">Precision = 8, Bytes = 6.</span></span> <span data-ttu-id="78194-205">在 3AM 之后将使用第六个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-205">Sixth byte will be used after 3AM.</span></span>|  
|`datetime2`|<span data-ttu-id="78194-206">是</span><span class="sxs-lookup"><span data-stu-id="78194-206">Yes</span></span>|<span data-ttu-id="78194-207">使用 6 到 9 个字节表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-207">Uses the integer data representation by using 6 to 9 bytes.</span></span> <span data-ttu-id="78194-208">前 4 个字节表示日期。</span><span class="sxs-lookup"><span data-stu-id="78194-208">The first 4 bytes represent the date.</span></span> <span data-ttu-id="78194-209">时间占用的字节数将取决于指定的时间精度。</span><span class="sxs-lookup"><span data-stu-id="78194-209">The bytes taken by the time will depend on the precision of the time that is specified.</span></span><br /><br /> <span data-ttu-id="78194-210">此整数值表示自 0001 年 1 月 1 日以来经过的天数，上限为 9999 年 12 月 31 日。</span><span class="sxs-lookup"><span data-stu-id="78194-210">The integer value represents the number of days since 1/1/0001 with an upper bound of 12/31/9999.</span></span> <span data-ttu-id="78194-211">若要表示 2005 年的日期，压缩操作将使用 3 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-211">To represent a date in year 2005, compression takes 3 bytes.</span></span><br /><br /> <span data-ttu-id="78194-212">对于时间则不会节省任何空间，这是因为压缩允许对于各种时间精度使用 2 到 4 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-212">There is no savings on time because it allows for 2 to 4 bytes for various time precisions.</span></span> <span data-ttu-id="78194-213">因此，当时间精度为一秒时，压缩使用 2 个字节来存储时间，在 255 秒之后将使用第二个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-213">Therefore, for one-second time precision, compression uses 2 bytes for time, which takes the second byte after 255 seconds.</span></span>|  
|`datetimeoffset`|<span data-ttu-id="78194-214">是</span><span class="sxs-lookup"><span data-stu-id="78194-214">Yes</span></span>|<span data-ttu-id="78194-215">类似于 `datetime2`，所不同的是格式为 HH:MM 的时区占用 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-215">Resembles `datetime2`, except that there are 2 bytes of time zone of the format (HH:MM).</span></span><br /><br /> <span data-ttu-id="78194-216">就像 `datetime2`，压缩可以节省 2 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-216">Like `datetime2`, compression can save 2 bytes.</span></span><br /><br /> <span data-ttu-id="78194-217">对于时区值，在大多数情况下 MM 值都可能是 0。</span><span class="sxs-lookup"><span data-stu-id="78194-217">For time zone values, MM value might be 0 for most cases.</span></span> <span data-ttu-id="78194-218">因此，压缩可能会节省 1 个字节。</span><span class="sxs-lookup"><span data-stu-id="78194-218">Therefore, compression can possibly save 1 byte.</span></span><br /><br /> <span data-ttu-id="78194-219">进行行压缩时存储不做任何更改。</span><span class="sxs-lookup"><span data-stu-id="78194-219">There are no changes in storage for row compression.</span></span>|  
|`char`|<span data-ttu-id="78194-220">是</span><span class="sxs-lookup"><span data-stu-id="78194-220">Yes</span></span>|<span data-ttu-id="78194-221">将删除尾随填充字符。</span><span class="sxs-lookup"><span data-stu-id="78194-221">Trailing padding characters are removed.</span></span> <span data-ttu-id="78194-222">请注意，不管使用何种排序规则， [!INCLUDE[ssDE](../../includes/ssde-md.md)] 均将插入相同的填充字符。</span><span class="sxs-lookup"><span data-stu-id="78194-222">Note that the [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserts the same padding character regardless of the collation that is used.</span></span>|  
|`varchar`|<span data-ttu-id="78194-223">否</span><span class="sxs-lookup"><span data-stu-id="78194-223">No</span></span>|<span data-ttu-id="78194-224">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-224">No effect.</span></span>|  
|`text`|<span data-ttu-id="78194-225">否</span><span class="sxs-lookup"><span data-stu-id="78194-225">No</span></span>|<span data-ttu-id="78194-226">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-226">No effect.</span></span>|  
|`nchar`|<span data-ttu-id="78194-227">是</span><span class="sxs-lookup"><span data-stu-id="78194-227">Yes</span></span>|<span data-ttu-id="78194-228">将删除尾随填充字符。</span><span class="sxs-lookup"><span data-stu-id="78194-228">Trailing padding characters are removed.</span></span> <span data-ttu-id="78194-229">请注意，不管使用何种排序规则， [!INCLUDE[ssDE](../../includes/ssde-md.md)] 均将插入相同的填充字符。</span><span class="sxs-lookup"><span data-stu-id="78194-229">Note that the [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserts the same padding character regardless of the collation that is used.</span></span>|  
|`nvarchar`|<span data-ttu-id="78194-230">否</span><span class="sxs-lookup"><span data-stu-id="78194-230">No</span></span>|<span data-ttu-id="78194-231">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-231">No effect.</span></span>|  
|`ntext`|<span data-ttu-id="78194-232">否</span><span class="sxs-lookup"><span data-stu-id="78194-232">No</span></span>|<span data-ttu-id="78194-233">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-233">No effect.</span></span>|  
|`binary`|<span data-ttu-id="78194-234">是</span><span class="sxs-lookup"><span data-stu-id="78194-234">Yes</span></span>|<span data-ttu-id="78194-235">将删除尾随的零。</span><span class="sxs-lookup"><span data-stu-id="78194-235">Trailing zeros are removed.</span></span>|  
|`varbinary`|<span data-ttu-id="78194-236">否</span><span class="sxs-lookup"><span data-stu-id="78194-236">No</span></span>|<span data-ttu-id="78194-237">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-237">No effect.</span></span>|  
|`image`|<span data-ttu-id="78194-238">否</span><span class="sxs-lookup"><span data-stu-id="78194-238">No</span></span>|<span data-ttu-id="78194-239">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-239">No effect.</span></span>|  
|`cursor`|<span data-ttu-id="78194-240">否</span><span class="sxs-lookup"><span data-stu-id="78194-240">No</span></span>|<span data-ttu-id="78194-241">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-241">No effect.</span></span>|  
|`timestamp` / `rowversion`|<span data-ttu-id="78194-242">是</span><span class="sxs-lookup"><span data-stu-id="78194-242">Yes</span></span>|<span data-ttu-id="78194-243">使用 8 个字节表示整数数据。</span><span class="sxs-lookup"><span data-stu-id="78194-243">Uses the integer data representation by using 8 bytes.</span></span> <span data-ttu-id="78194-244">每个数据库均维护有一个时间戳计数器，并且它的值从 0 开始。</span><span class="sxs-lookup"><span data-stu-id="78194-244">There is a timestamp counter that is maintained for each database, and its value starts from 0.</span></span> <span data-ttu-id="78194-245">会像压缩任何其他整数值一样压缩此值。</span><span class="sxs-lookup"><span data-stu-id="78194-245">This can be compressed like any other integer value.</span></span>|  
|`sql_variant`|<span data-ttu-id="78194-246">否</span><span class="sxs-lookup"><span data-stu-id="78194-246">No</span></span>|<span data-ttu-id="78194-247">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-247">No effect.</span></span>|  
|`uniqueidentifier`|<span data-ttu-id="78194-248">否</span><span class="sxs-lookup"><span data-stu-id="78194-248">No</span></span>|<span data-ttu-id="78194-249">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-249">No effect.</span></span>|  
|`table`|<span data-ttu-id="78194-250">否</span><span class="sxs-lookup"><span data-stu-id="78194-250">No</span></span>|<span data-ttu-id="78194-251">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-251">No effect.</span></span>|  
|`xml`|<span data-ttu-id="78194-252">否</span><span class="sxs-lookup"><span data-stu-id="78194-252">No</span></span>|<span data-ttu-id="78194-253">无效。</span><span class="sxs-lookup"><span data-stu-id="78194-253">No effect.</span></span>|  
|<span data-ttu-id="78194-254">用户定义类型</span><span class="sxs-lookup"><span data-stu-id="78194-254">User-defined types</span></span>|<span data-ttu-id="78194-255">否</span><span class="sxs-lookup"><span data-stu-id="78194-255">No</span></span>|<span data-ttu-id="78194-256">这在内部表示为 `varbinary`。</span><span class="sxs-lookup"><span data-stu-id="78194-256">This is represented internally as `varbinary`.</span></span>|  
|<span data-ttu-id="78194-257">FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="78194-257">FILESTREAM</span></span>|<span data-ttu-id="78194-258">否</span><span class="sxs-lookup"><span data-stu-id="78194-258">No</span></span>|<span data-ttu-id="78194-259">这在内部表示为 `varbinary`。</span><span class="sxs-lookup"><span data-stu-id="78194-259">This is represented internally as `varbinary`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="78194-260">另请参阅</span><span class="sxs-lookup"><span data-stu-id="78194-260">See Also</span></span>  
 <span data-ttu-id="78194-261">[数据压缩](data-compression.md) </span><span class="sxs-lookup"><span data-stu-id="78194-261">[Data Compression](data-compression.md) </span></span>  
 [<span data-ttu-id="78194-262">页压缩的实现</span><span class="sxs-lookup"><span data-stu-id="78194-262">Page Compression Implementation</span></span>](page-compression-implementation.md)  
  
  
