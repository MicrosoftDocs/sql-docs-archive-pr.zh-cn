---
title: 内存中 OLTP 不支持的 Transact-SQL 构造 | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: e3f8009c-319d-4d7b-8993-828e55ccde11
author: rothja
ms.author: jroth
ms.openlocfilehash: 2b5df47d05730b8f6ec6a82045686d462ace1682
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87693328"
---
# <a name="transact-sql-constructs-not-supported-by-in-memory-oltp"></a><span data-ttu-id="5ad1b-102">内存中 OLTP 不支持的 Transact-SQL 构造</span><span class="sxs-lookup"><span data-stu-id="5ad1b-102">Transact-SQL Constructs Not Supported by In-Memory OLTP</span></span>
  <span data-ttu-id="5ad1b-103">内存优化的表和本机编译的存储过程不支持基于磁盘的表和解释的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 存储过程所支持的完整 [!INCLUDE[tsql](../../includes/tsql-md.md)] 外围应用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-103">Memory-optimized tables and natively compiled stored procedures do not support the full [!INCLUDE[tsql](../../includes/tsql-md.md)] surface area that is supported by disk-based tables and interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] stored procedures.</span></span> <span data-ttu-id="5ad1b-104">尝试使用某个不支持的功能时，服务器返回错误。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-104">When attempting to use one of the unsupported features, the server returns an error.</span></span>  
  
 <span data-ttu-id="5ad1b-105">错误消息文本提及 [!INCLUDE[tsql](../../includes/tsql-md.md)] 语句的类型（例如功能、操作、选项）以及功能或 [!INCLUDE[tsql](../../includes/tsql-md.md)] 关键字的名称。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-105">The error message text mentions the type of [!INCLUDE[tsql](../../includes/tsql-md.md)] statement (feature, operation, option, for example) and well as the name of the feature or [!INCLUDE[tsql](../../includes/tsql-md.md)] keyword.</span></span> <span data-ttu-id="5ad1b-106">大多数不支持的功能将返回错误 10794，并带有错误消息文本，指示不支持该功能。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-106">Most unsupported features will return error 10794, with the error message text indicating the unsupported feature.</span></span> <span data-ttu-id="5ad1b-107">下表列出可在错误消息文本中显示的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字，以及用于解决问题的更正操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-107">The following tables list the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the error message text, as well as the corrective action to resolve the error.</span></span>  
  
 <span data-ttu-id="5ad1b-108">有关针对内存优化表和编辑编译的存储过程的支持的功能的详细信息，请参阅：</span><span class="sxs-lookup"><span data-stu-id="5ad1b-108">For more information on supported features with memory-optimized tables and natively compiled stored procedures, see:</span></span>  
  
-   [<span data-ttu-id="5ad1b-109">本机编译存储过程的迁移问题</span><span class="sxs-lookup"><span data-stu-id="5ad1b-109">Migration Issues for Natively Compiled Stored Procedures</span></span>](migration-issues-for-natively-compiled-stored-procedures.md)  
  
-   [<span data-ttu-id="5ad1b-110">对内存中 OLTP 的 Transact-SQL 支持</span><span class="sxs-lookup"><span data-stu-id="5ad1b-110">Transact-SQL Support for In-Memory OLTP</span></span>](transact-sql-support-for-in-memory-oltp.md)  
  
-   [<span data-ttu-id="5ad1b-111">支持的 SQL Server 功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-111">Supported SQL Server Features</span></span>](unsupported-sql-server-features-for-in-memory-oltp.md)  
  
-   [<span data-ttu-id="5ad1b-112">本机编译的存储过程</span><span class="sxs-lookup"><span data-stu-id="5ad1b-112">Natively Compiled Stored Procedures</span></span>](../in-memory-oltp/natively-compiled-stored-procedures.md)  
  
## <a name="databases-that-use-in-memory-oltp"></a><span data-ttu-id="5ad1b-113">使用内存中 OLTP 的数据库</span><span class="sxs-lookup"><span data-stu-id="5ad1b-113">Databases That Use In-Memory OLTP</span></span>  
 <span data-ttu-id="5ad1b-114">下表列出了涉及内存中 OLTP 数据库的错误的消息文本中可能出现的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-114">The following table lists the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the message text of an error involving an In-Memory OLTP database.</span></span>  
  
|<span data-ttu-id="5ad1b-115">类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-115">Type</span></span>|<span data-ttu-id="5ad1b-116">名称</span><span class="sxs-lookup"><span data-stu-id="5ad1b-116">Name</span></span>|<span data-ttu-id="5ad1b-117">解决方法</span><span class="sxs-lookup"><span data-stu-id="5ad1b-117">Resolution</span></span>|  
|----------|----------|----------------|  
|<span data-ttu-id="5ad1b-118">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-118">Option</span></span>|<span data-ttu-id="5ad1b-119">AUTO_CLOSE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-119">AUTO_CLOSE</span></span>|<span data-ttu-id="5ad1b-120">具有 MEMORY_OPTIMIZED_DATA 文件组的数据库不支持数据库选项 AUTO_CLOSE=ON。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-120">The database option AUTO_CLOSE=ON is not supported with databases that have a MEMORY_OPTIMIZED_DATA filegroup.</span></span>|  
|<span data-ttu-id="5ad1b-121">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-121">Option</span></span>|<span data-ttu-id="5ad1b-122">ATTACH_REBUILD_LOG</span><span class="sxs-lookup"><span data-stu-id="5ad1b-122">ATTACH_REBUILD_LOG</span></span>|<span data-ttu-id="5ad1b-123">具有 MEMORY_OPTIMIZED_DATA 文件组的数据库不支持 CREATE 数据库选项 ATTACH_REBUILD_LOG。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-123">The CREATE database option ATTACH_REBUILD_LOG is not supported with databases that have a MEMORY_OPTIMIZED_DATA filegroup.</span></span>|  
|<span data-ttu-id="5ad1b-124">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-124">Feature</span></span>|<span data-ttu-id="5ad1b-125">DATABASE SNAPSHOT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-125">DATABASE SNAPSHOT</span></span>|<span data-ttu-id="5ad1b-126">具有 MEMORY_OPTIMIZED_DATA 文件组的数据库不支持创建数据库快照。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-126">Creating database snapshots is not supported with databases that have a MEMORY_OPTIMIZED_DATA filegroup.</span></span>|  
|<span data-ttu-id="5ad1b-127">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-127">Feature</span></span>|<span data-ttu-id="5ad1b-128">使用 sync_method“database snapshot”或“database snapshot character”进行复制</span><span class="sxs-lookup"><span data-stu-id="5ad1b-128">Replication using the sync_method 'database snapshot' or 'database snapshot character'</span></span>|<span data-ttu-id="5ad1b-129">具有 MEMORY_OPTIMIZED_DATA 文件组的数据库不支持使用 sync_method“database snapshot”或“database snapshot character”进行复制。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-129">Replication using the sync_method 'database snapshot' or 'database snapshot character' is not supported with databases that have a MEMORY_OPTIMIZED_DATA filegroup.</span></span>|  
|<span data-ttu-id="5ad1b-130">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-130">Feature</span></span>|<span data-ttu-id="5ad1b-131">DBCC CHECKDB</span><span class="sxs-lookup"><span data-stu-id="5ad1b-131">DBCC CHECKDB</span></span><br /><br /> <span data-ttu-id="5ad1b-132">DBCC CHECKTABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-132">DBCC CHECKTABLE</span></span>|<span data-ttu-id="5ad1b-133">DBCC CHECKDB 跳过数据库中的内存优化表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-133">DBCC CHECKDB skips the memory-optimized tables in the database.</span></span><br /><br /> <span data-ttu-id="5ad1b-134">对内存优化表执行 DBCC CHECKTABLE 将失败。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-134">DBCC CHECKTABLE will fail for memory-optimized tables.</span></span>|  
  
## <a name="memory-optimized-tables"></a><span data-ttu-id="5ad1b-135">内存优化表</span><span class="sxs-lookup"><span data-stu-id="5ad1b-135">Memory-Optimized Tables</span></span>  
 <span data-ttu-id="5ad1b-136">下表列出可在涉及内存优化表的错误消息文本中显示的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字，以及用于解决问题的更正操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-136">The following table lists the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the message text of an error involving a memory-optimized table, as well as the corrective action to resolve the error.</span></span>  
  
|<span data-ttu-id="5ad1b-137">类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-137">Type</span></span>|<span data-ttu-id="5ad1b-138">名称</span><span class="sxs-lookup"><span data-stu-id="5ad1b-138">Name</span></span>|<span data-ttu-id="5ad1b-139">解决方法</span><span class="sxs-lookup"><span data-stu-id="5ad1b-139">Resolution</span></span>|  
|----------|----------|----------------|  
|<span data-ttu-id="5ad1b-140">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-140">Feature</span></span>|<span data-ttu-id="5ad1b-141">ON</span><span class="sxs-lookup"><span data-stu-id="5ad1b-141">ON</span></span>|<span data-ttu-id="5ad1b-142">内存优化的表不能放置在文件组或分区方案上。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-142">Memory-optimized tables cannot be placed on a filegroup or partition scheme.</span></span> <span data-ttu-id="5ad1b-143">从 `CREATE TABLE` 语句删除 ON 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-143">Remove the ON clause from the `CREATE TABLE` statement.</span></span>|  
|<span data-ttu-id="5ad1b-144">数据类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-144">Data type</span></span>|<span data-ttu-id="5ad1b-145">数据类型名称</span><span class="sxs-lookup"><span data-stu-id="5ad1b-145">*Data type name*</span></span>|<span data-ttu-id="5ad1b-146">不支持所示的数据类型。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-146">The indicated data type is not supported.</span></span> <span data-ttu-id="5ad1b-147">使用支持的数据类型之一替换该类型。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-147">Replace the type with one of the supported data types.</span></span> <span data-ttu-id="5ad1b-148">有关详细信息，请参阅[支持的数据类型](supported-data-types-for-in-memory-oltp.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-148">For more information, see [Supported Data Types](supported-data-types-for-in-memory-oltp.md).</span></span>|  
|<span data-ttu-id="5ad1b-149">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-149">Feature</span></span>|<span data-ttu-id="5ad1b-150">计算列</span><span class="sxs-lookup"><span data-stu-id="5ad1b-150">Computed columns</span></span>|<span data-ttu-id="5ad1b-151">内存优化的表不支持计算列。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-151">Computed columns are not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-152">从 `CREATE TABLE` 语句删除计算列。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-152">Remove the computed columns from the `CREATE TABLE` statement.</span></span>|  
|<span data-ttu-id="5ad1b-153">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-153">Feature</span></span>|<span data-ttu-id="5ad1b-154">复制</span><span class="sxs-lookup"><span data-stu-id="5ad1b-154">Replication</span></span>|<span data-ttu-id="5ad1b-155">内存优化表不支持复制。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-155">Replication is not supported with memory-optimized tables.</span></span>|  
|<span data-ttu-id="5ad1b-156">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-156">Feature</span></span>|<span data-ttu-id="5ad1b-157">FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="5ad1b-157">FILESTREAM</span></span>|<span data-ttu-id="5ad1b-158">内存优化的表列不支持 FILESTREAM 存储。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-158">FILESTREAM storage is not supported columns of memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-159">从列定义中删除 `FILESTREAM` 关键字。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-159">Remove the `FILESTREAM` keyword from the column definition.</span></span>|  
|<span data-ttu-id="5ad1b-160">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-160">Feature</span></span>|<span data-ttu-id="5ad1b-161">SPARSE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-161">SPARSE</span></span>|<span data-ttu-id="5ad1b-162">内存优化的表列不能定义为 SPARSE。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-162">Columns of memory-optimized tables cannot be defined as SPARSE.</span></span> <span data-ttu-id="5ad1b-163">从列定义中删除 `SPARSE` 关键字。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-163">Remove the `SPARSE` keyword from the column definition.</span></span>|  
|<span data-ttu-id="5ad1b-164">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-164">Feature</span></span>|<span data-ttu-id="5ad1b-165">ROWGUIDCOL</span><span class="sxs-lookup"><span data-stu-id="5ad1b-165">ROWGUIDCOL</span></span>|<span data-ttu-id="5ad1b-166">内存优化的表列不支持选项 ROWGUIDCOL。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-166">The option ROWGUIDCOL is not supported for columns of memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-167">从列定义中删除 `ROWGUIDCOL` 关键字。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-167">Remove the `ROWGUIDCOL` keyword from the column definition.</span></span>|  
|<span data-ttu-id="5ad1b-168">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-168">Feature</span></span>|<span data-ttu-id="5ad1b-169">FOREIGN KEY</span><span class="sxs-lookup"><span data-stu-id="5ad1b-169">FOREIGN KEY</span></span>|<span data-ttu-id="5ad1b-170">内存优化的表不支持 FOREIGN KEY 约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-170">FOREIGN KEY constraints are not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-171">从表定义中删除该约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-171">Remove the constraint from the table definition.</span></span><br /><br /> <span data-ttu-id="5ad1b-172">有关如何缓解不支持约束的信息，请参阅[迁移 Check 和 Foreign Key 约束](../../database-engine/migrating-check-and-foreign-key-constraints.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-172">For information about how to mitigate the lack of support for constraints, see [Migrating Check and Foreign Key Constraints](../../database-engine/migrating-check-and-foreign-key-constraints.md).</span></span>|  
|<span data-ttu-id="5ad1b-173">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-173">Feature</span></span>|<span data-ttu-id="5ad1b-174">CHECK</span><span class="sxs-lookup"><span data-stu-id="5ad1b-174">CHECK</span></span>|<span data-ttu-id="5ad1b-175">内存优化的表不支持 CHECK 约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-175">CHECK constraints are not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-176">从表定义中删除该约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-176">Remove the constraint from the table definition.</span></span><br /><br /> <span data-ttu-id="5ad1b-177">有关如何缓解不支持约束的信息，请参阅[迁移 Check 和 Foreign Key 约束](../../database-engine/migrating-check-and-foreign-key-constraints.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-177">For information about how to mitigate the lack of support for constraints, see [Migrating Check and Foreign Key Constraints](../../database-engine/migrating-check-and-foreign-key-constraints.md).</span></span>|  
|<span data-ttu-id="5ad1b-178">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-178">Feature</span></span>|<span data-ttu-id="5ad1b-179">UNIQUE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-179">UNIQUE</span></span>|<span data-ttu-id="5ad1b-180">内存优化的表不支持 UNIQUE 约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-180">UNIQUE constraints are not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-181">从表定义中删除该约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-181">Remove the constraint from the table definition.</span></span><br /><br /> <span data-ttu-id="5ad1b-182">有关如何缓解不支持约束的信息，请参阅[迁移 Check 和 Foreign Key 约束](../../database-engine/migrating-check-and-foreign-key-constraints.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-182">For information about how to mitigate the lack of support for constraints, see [Migrating Check and Foreign Key Constraints](../../database-engine/migrating-check-and-foreign-key-constraints.md).</span></span>|  
|<span data-ttu-id="5ad1b-183">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-183">Feature</span></span>|<span data-ttu-id="5ad1b-184">COLUMNSTORE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-184">COLUMNSTORE</span></span>|<span data-ttu-id="5ad1b-185">内存优化的表不支持 COLUMNSTORE 索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-185">COLUMNSTORE indexes are not supported with memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-186">改为指定 NONCLUSTERED 或 NONCLUSTERED HASH 索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-186">Specify a NONCLUSTERED or NONCLUSTERED HASH index instead.</span></span>|  
|<span data-ttu-id="5ad1b-187">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-187">Feature</span></span>|<span data-ttu-id="5ad1b-188">聚集索引</span><span class="sxs-lookup"><span data-stu-id="5ad1b-188">clustered index</span></span>|<span data-ttu-id="5ad1b-189">指定非聚集索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-189">Specify a nonclustered index.</span></span> <span data-ttu-id="5ad1b-190">在主键索引的情况下，务必指定 `PRIMARY KEY NONCLUSTERED [HASH]`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-190">In the case of a primary key index be sure to specify `PRIMARY KEY NONCLUSTERED [HASH]`.</span></span>|  
|<span data-ttu-id="5ad1b-191">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-191">Feature</span></span>|<span data-ttu-id="5ad1b-192">非 1252 代码页</span><span class="sxs-lookup"><span data-stu-id="5ad1b-192">non-1252 code page</span></span>|<span data-ttu-id="5ad1b-193">具有数据类型 `char` 和 `varchar` 的内存优化表中的列必须使用代码页 1252。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-193">Columns in memory-optimized tables with data types `char` and `varchar` must use code page 1252.</span></span> <span data-ttu-id="5ad1b-194">请使用 n(var)char 替代 (var)char，或使用具有代码页 1252 的排序规则（例如 Latin1_General_BIN2）。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-194">Use n(var)char instead of (var)char, or use a collation with code page 1252 (for example, Latin1_General_BIN2).</span></span> <span data-ttu-id="5ad1b-195">有关详细信息，请参阅 [Collations and Code Pages](../../database-engine/collations-and-code-pages.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-195">For more information, see [Collations and Code Pages](../../database-engine/collations-and-code-pages.md).</span></span>|  
|<span data-ttu-id="5ad1b-196">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-196">Feature</span></span>|<span data-ttu-id="5ad1b-197">事务中的 DDL</span><span class="sxs-lookup"><span data-stu-id="5ad1b-197">DDL inside transactions</span></span>|<span data-ttu-id="5ad1b-198">在用户事务的上下文中无法创建或删除内存优化的表和本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-198">Memory-optimized tables and natively compiled stored procedures cannot be created or dropped in the context of a user transaction.</span></span> <span data-ttu-id="5ad1b-199">在执行 CREATE 或 DROP 语句前不要启动事务并确保会话设置 IMPLICIT_TRANSACTIONS 为 OFF。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-199">Do not start a transaction and ensure the session setting IMPLICIT_TRANSACTIONS is OFF before executing the CREATE or DROP statement.</span></span>|  
|<span data-ttu-id="5ad1b-200">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-200">Feature</span></span>|<span data-ttu-id="5ad1b-201">DDL 触发器</span><span class="sxs-lookup"><span data-stu-id="5ad1b-201">DDL triggers</span></span>|<span data-ttu-id="5ad1b-202">如果存在该 DDL 操作的服务器或数据库触发器，则无法创建或删除内存优化的表和本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-202">Memory-optimized tables and natively compiled stored procedures cannot be created or dropped if there is a server or database trigger for that DDL operation.</span></span> <span data-ttu-id="5ad1b-203">在 CREATE/DROP TABLE 和 CREATE/DROP PROCEDURE 时删除服务器和数据库触发器。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-203">Remove the server and database triggers on CREATE/DROP TABLE and CREATE/DROP PROCEDURE.</span></span>|  
|<span data-ttu-id="5ad1b-204">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-204">Feature</span></span>|<span data-ttu-id="5ad1b-205">EVENT NOTIFICATION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-205">EVENT NOTIFICATION</span></span>|<span data-ttu-id="5ad1b-206">如果存在该 DDL 操作的服务器或数据库事件通知，则无法创建或删除内存优化的表和本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-206">Memory-optimized tables and natively compiled stored procedures cannot be created or dropped if there is a server or database event notification for that DDL operation.</span></span> <span data-ttu-id="5ad1b-207">在 CREATE TABLE 或 DROP TABLE 和 CREATE PROCEDURE 或 DROP PROCEDURE 时删除服务器和数据库事件通知。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-207">Remove the server and database event notifications on CREATE TABLE or DROP TABLE and CREATE PROCEDURE or DROP PROCEDURE.</span></span>|  
|<span data-ttu-id="5ad1b-208">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-208">Feature</span></span>|<span data-ttu-id="5ad1b-209">FileTable</span><span class="sxs-lookup"><span data-stu-id="5ad1b-209">FileTable</span></span>|<span data-ttu-id="5ad1b-210">无法将内存优化的表创建为文件表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-210">Memory-optimized tables cannot be created as file tables.</span></span> <span data-ttu-id="5ad1b-211">从 `AS FileTable` 语句删除参数 `CREATE TABLE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-211">Remove the argument `AS FileTable` from the `CREATE TABLE` statement</span></span>|  
|<span data-ttu-id="5ad1b-212">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-212">Operation</span></span>|<span data-ttu-id="5ad1b-213">更新主键列</span><span class="sxs-lookup"><span data-stu-id="5ad1b-213">Update of primary key columns</span></span>|<span data-ttu-id="5ad1b-214">无法更新内存优化的表和表类型中的主键列。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-214">Primary key columns in memory-optimized tables and table types cannot be updated.</span></span> <span data-ttu-id="5ad1b-215">如果需要更新主键，请删除旧的行并插入包含更新的主键的新行。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-215">If the primary key needs to be updated, delete the old row and insert the new row with the updated primary key.</span></span>|  
|<span data-ttu-id="5ad1b-216">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-216">Operation</span></span>|<span data-ttu-id="5ad1b-217">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="5ad1b-217">CREATE INDEX</span></span>|<span data-ttu-id="5ad1b-218">必须使用 `CREATE TABLE` 语句内联指定内存优化的表的索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-218">Indexes on memory-optimized tables must be specified inline with the `CREATE TABLE` statement.</span></span> <span data-ttu-id="5ad1b-219">要将索引添加到内存优化的表，请删除并重新创建该表，包括指定新索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-219">To add an index to a memory-optimized table, drop and recreate the table, including the new index specification.</span></span>|  
|<span data-ttu-id="5ad1b-220">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-220">Operation</span></span>|<span data-ttu-id="5ad1b-221">ALTER TABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-221">ALTER TABLE</span></span>|<span data-ttu-id="5ad1b-222">不支持更改内存优化的表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-222">Altering memory-optimized tables is not supported.</span></span> <span data-ttu-id="5ad1b-223">删除表并使用更新的表定义重新创建它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-223">Drop and recreate the table using the updated table definition.</span></span>|  
|<span data-ttu-id="5ad1b-224">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-224">Operation</span></span>|<span data-ttu-id="5ad1b-225">CREATE FULLTEXT INDEX</span><span class="sxs-lookup"><span data-stu-id="5ad1b-225">CREATE FULLTEXT INDEX</span></span>|<span data-ttu-id="5ad1b-226">内存优化的表不支持全文检索。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-226">Fulltext indexes are not supported for memory-optimized tables.</span></span>|  
|<span data-ttu-id="5ad1b-227">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-227">Operation</span></span>|<span data-ttu-id="5ad1b-228">架构更改</span><span class="sxs-lookup"><span data-stu-id="5ad1b-228">schema change</span></span>|<span data-ttu-id="5ad1b-229">内存优化的表和本机编译的存储过程不支持架构更改，例如 `sp_rename`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-229">Memory-optimized tables and natively compiled stored procedures do not support shema changes, for example, `sp_rename`.</span></span><br /><br /> <span data-ttu-id="5ad1b-230">尝试作出架构更改（如重命名表）将产生错误 12320。内存优化的表不支持需要更改架构版本的操作（例如，重命名）。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-230">Attempting to make schema changes, such as renaming a table, will generate error 12320, Operations that require a change to the schema version, for example renaming, are not supported with memory-optimized tables.</span></span><br /><br /> <span data-ttu-id="5ad1b-231">要更改架构，请删除表或过程并使用更新的定义重新创建它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-231">To change the schema, drop and recreate the table or procedure using an updated definition.</span></span>|  
|<span data-ttu-id="5ad1b-232">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-232">Operation</span></span>|<span data-ttu-id="5ad1b-233">CREATE TRIGGER</span><span class="sxs-lookup"><span data-stu-id="5ad1b-233">CREATE TRIGGER</span></span>|<span data-ttu-id="5ad1b-234">不支持内存优化的表的触发器。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-234">Triggers on memory-optimized tables are not supported.</span></span>|  
|<span data-ttu-id="5ad1b-235">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-235">Operation</span></span>|<span data-ttu-id="5ad1b-236">TRUNCATE TABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-236">TRUNCATE TABLE</span></span>|<span data-ttu-id="5ad1b-237">内存优化的表不支持 TRUNCATE 操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-237">The TRUNCATE operation is not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-238">若要从表中删除所有行，请使用表删除所有行， `DELETE FROM` *table*或删除并重新创建该表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-238">To remove all rows from a table, delete all rows using `DELETE FROM`*table* or drop and recreate the table.</span></span>|  
|<span data-ttu-id="5ad1b-239">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-239">Operation</span></span>|<span data-ttu-id="5ad1b-240">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-240">ALTER AUTHORIZATION</span></span>|<span data-ttu-id="5ad1b-241">不支持更改现有内存优化的表或本机编译的存储过程的所有者。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-241">Changing the owner of an existing memory-optimized table or natively compiled stored procedure is not supported.</span></span> <span data-ttu-id="5ad1b-242">请删除并重新创建该表或过程来更改所有权。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-242">Drop and recreate the table or procedure to change ownership.</span></span>|  
|<span data-ttu-id="5ad1b-243">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-243">Operation</span></span>|<span data-ttu-id="5ad1b-244">ALTER SCHEMA</span><span class="sxs-lookup"><span data-stu-id="5ad1b-244">ALTER SCHEMA</span></span>|<span data-ttu-id="5ad1b-245">不支持更改现有内存优化的表或本机编译的存储过程的架构。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-245">Changing the schema of an existing memory-optimized table or natively compiled stored procedure is not supported.</span></span> <span data-ttu-id="5ad1b-246">若要更改架构，请删除再重新创建表或过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-246">Drop and recreate the table or procedure to change the schema.</span></span>|  
|<span data-ttu-id="5ad1b-247">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-247">Operation</span></span>|<span data-ttu-id="5ad1b-248">DBCC CHECKTABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-248">DBCC CHECKTABLE</span></span>|<span data-ttu-id="5ad1b-249">内存优化的表不支持 DBCC CHECKTABLE。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-249">DBCC CHECKTABLE is not supported with memory-optimized tables.</span></span>|  
|<span data-ttu-id="5ad1b-250">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-250">Feature</span></span>|<span data-ttu-id="5ad1b-251">ANSI_PADDING OFF</span><span class="sxs-lookup"><span data-stu-id="5ad1b-251">ANSI_PADDING OFF</span></span>|<span data-ttu-id="5ad1b-252">创建内存优化的表或本机编译的存储过程时会话选项 `ANSI_PADDING` 必须为 ON。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-252">The session option `ANSI_PADDING` must be ON when creating memory-optimized tables or natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-253">在运行 CREATE 语句前执行 `SET ANSI_PADDING ON`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-253">Execute `SET ANSI_PADDING ON` before running the CREATE statement.</span></span>|  
|<span data-ttu-id="5ad1b-254">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-254">Option</span></span>|<span data-ttu-id="5ad1b-255">DATA_COMPRESSION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-255">DATA_COMPRESSION</span></span>|<span data-ttu-id="5ad1b-256">内存优化的表不支持数据压缩。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-256">Data compression is not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-257">从表定义中删除该选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-257">Remove the option from the table definition.</span></span>|  
|<span data-ttu-id="5ad1b-258">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-258">Feature</span></span>|<span data-ttu-id="5ad1b-259">DTC</span><span class="sxs-lookup"><span data-stu-id="5ad1b-259">DTC</span></span>|<span data-ttu-id="5ad1b-260">不能从分布式事务访问内存优化的表和本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-260">Memory-optimized tables and natively compiled stored procedures cannot be accessed from distributed transactions.</span></span> <span data-ttu-id="5ad1b-261">请改用 SQL 事务。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-261">Use SQL transactions instead.</span></span>|  
|<span data-ttu-id="5ad1b-262">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-262">Feature</span></span>|<span data-ttu-id="5ad1b-263">多个活动的结果集 (MARS)</span><span class="sxs-lookup"><span data-stu-id="5ad1b-263">Multiple Active Result Sets (MARS)</span></span>|<span data-ttu-id="5ad1b-264">内存优化表不支持多个活动结果集 (MARS)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-264">Multiple Active Result Sets (MARS) is not supported with memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-265">此错误还可能指示使用了链接服务器。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-265">This error can also indicate linked server use.</span></span> <span data-ttu-id="5ad1b-266">链接服务器可以使用 MARS。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-266">Linked server can use MARS.</span></span> <span data-ttu-id="5ad1b-267">内存优化表不支持链接服务器。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-267">Linked servers are not supported with memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-268">请直接连接到内存优化的表所在的服务器和数据库。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-268">Instead, connect directly to the server and database that hosts the memory-optimized tables.</span></span>|  
|<span data-ttu-id="5ad1b-269">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-269">Operation</span></span>|<span data-ttu-id="5ad1b-270">内存优化的表作为 MERGE 的目标</span><span class="sxs-lookup"><span data-stu-id="5ad1b-270">Memory-optimized tables as target of MERGE</span></span>|<span data-ttu-id="5ad1b-271">内存优化的表不能是 `MERGE` 操作的目标。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-271">Memory-optimized tables cannot be the target of a `MERGE` operation.</span></span> <span data-ttu-id="5ad1b-272">请改用 `INSERT`、`UPDATE` 或 `DELETE` 语句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-272">Use `INSERT`, `UPDATE`, or `DELETE` statements instead.</span></span>|  
  
## <a name="indexes-on-memory-optimized-tables"></a><span data-ttu-id="5ad1b-273">内存优化的表的索引</span><span class="sxs-lookup"><span data-stu-id="5ad1b-273">Indexes on Memory-Optimized Tables</span></span>  
 <span data-ttu-id="5ad1b-274">下表列出可在涉及内存优化表的索引错误消息文本中显示的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字，以及用于解决问题的更正操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-274">The following table lists the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the message text of an error involving an index on a memory-optimized table, as well as the corrective action to resolve the error.</span></span>  
  
|<span data-ttu-id="5ad1b-275">类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-275">Type</span></span>|<span data-ttu-id="5ad1b-276">名称</span><span class="sxs-lookup"><span data-stu-id="5ad1b-276">Name</span></span>|<span data-ttu-id="5ad1b-277">解决方法</span><span class="sxs-lookup"><span data-stu-id="5ad1b-277">Resolution</span></span>|  
|----------|----------|----------------|  
|<span data-ttu-id="5ad1b-278">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-278">Feature</span></span>|<span data-ttu-id="5ad1b-279">筛选索引</span><span class="sxs-lookup"><span data-stu-id="5ad1b-279">Filtered index</span></span>|<span data-ttu-id="5ad1b-280">内存优化的表不支持筛选的索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-280">Filtered indexes are not supported with memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-281">从索引定义中省略 `WHERE` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-281">Omit the `WHERE` clause from the index specification.</span></span>|  
|<span data-ttu-id="5ad1b-282">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-282">Feature</span></span>|<span data-ttu-id="5ad1b-283">UNIQUE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-283">UNIQUE</span></span>|<span data-ttu-id="5ad1b-284">内存优化的表不支持唯一索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-284">Unique indexes are not supported for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-285">从索引定义中删除参数 `UNIQUE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-285">Remove the argument `UNIQUE` from the index specification.</span></span>|  
|<span data-ttu-id="5ad1b-286">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-286">Feature</span></span>|<span data-ttu-id="5ad1b-287">可为 Null 的列</span><span class="sxs-lookup"><span data-stu-id="5ad1b-287">Nullable columns</span></span>|<span data-ttu-id="5ad1b-288">内存优化表的索引键中的所有列必须指定为 `NOT NULL`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-288">All columns in the key of an index on a memory-optimized table must be specified as `NOT NULL`.</span></span> <span data-ttu-id="5ad1b-289">包含具有索引键中所有列的 `NOT NULL` 约束。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-289">Include the `NOT NULL` constraint with all columns in the index keys.</span></span>|  
|<span data-ttu-id="5ad1b-290">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-290">Feature</span></span>|<span data-ttu-id="5ad1b-291">非 bin2 排序规则</span><span class="sxs-lookup"><span data-stu-id="5ad1b-291">non-bin2 collation</span></span>|<span data-ttu-id="5ad1b-292">必须使用 BIN2 排序规则声明内存优化的索引键中的所有字符列。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-292">All character columns in the key of a memory-optimized index must be declared using a BIN2 collation.</span></span> <span data-ttu-id="5ad1b-293">使用 `COLLATE` 子句在列定义中设置排序规则。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-293">Use the `COLLATE` clause to set the collation in the column definition.</span></span> <span data-ttu-id="5ad1b-294">有关详细信息，请参阅 [Collations and Code Pages](../../database-engine/collations-and-code-pages.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-294">For more information, see [Collations and Code Pages](../../database-engine/collations-and-code-pages.md).</span></span>|  
|<span data-ttu-id="5ad1b-295">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-295">Feature</span></span>|<span data-ttu-id="5ad1b-296">包含列</span><span class="sxs-lookup"><span data-stu-id="5ad1b-296">Included columns</span></span>|<span data-ttu-id="5ad1b-297">指定包含列不是内存优化表所必需的。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-297">Specifying included columns is not necessary for memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-298">内存优化表的所有列都隐式包含在每个内存优化索引中。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-298">All columns of the memory-optimized table are implicitly included in every memory-optimized index.</span></span>|  
|<span data-ttu-id="5ad1b-299">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-299">Operation</span></span>|<span data-ttu-id="5ad1b-300">ALTER INDEX</span><span class="sxs-lookup"><span data-stu-id="5ad1b-300">ALTER INDEX</span></span>|<span data-ttu-id="5ad1b-301">不支持更改内存优化的表的索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-301">Altering indexes on memory-optimized tables is not supported.</span></span> <span data-ttu-id="5ad1b-302">请删除该表并使用更新的索引定义重新创建它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-302">Instead, drop the table and recreate it using the updated index specification.</span></span>|  
|<span data-ttu-id="5ad1b-303">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-303">Operation</span></span>|<span data-ttu-id="5ad1b-304">DROP INDEX</span><span class="sxs-lookup"><span data-stu-id="5ad1b-304">DROP INDEX</span></span>|<span data-ttu-id="5ad1b-305">不支持删除内存优化的表的索引。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-305">Dropping indexes on memory-optimized tables is not supported.</span></span> <span data-ttu-id="5ad1b-306">请删除该表并使用所需的索引重新创建它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-306">Instead, drop the table and recreate it with the desired indexes.</span></span>|  
|<span data-ttu-id="5ad1b-307">索引选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-307">Index option</span></span>|<span data-ttu-id="5ad1b-308">*索引选项*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-308">*Index option*</span></span>|<span data-ttu-id="5ad1b-309">内存优化的表的索引不支持所示的索引选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-309">The indicated index option is not supported with indexes on memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-310">从索引定义中删除该选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-310">Remove the option from the index specification.</span></span>|  
  
## <a name="nonclustered-hash-indexes"></a><span data-ttu-id="5ad1b-311">非聚集哈希索引</span><span class="sxs-lookup"><span data-stu-id="5ad1b-311">Nonclustered Hash Indexes</span></span>  
 <span data-ttu-id="5ad1b-312">下表列出可在涉及非聚集哈希索引的错误消息文本中显示的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字，以及用于解决问题的更正操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-312">The following table lists the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the message text of an error involving a nonclustered hash index, as well as the corrective action to resolve the error.</span></span>  
  
|<span data-ttu-id="5ad1b-313">类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-313">Type</span></span>|<span data-ttu-id="5ad1b-314">名称</span><span class="sxs-lookup"><span data-stu-id="5ad1b-314">Name</span></span>|<span data-ttu-id="5ad1b-315">解决方法</span><span class="sxs-lookup"><span data-stu-id="5ad1b-315">Resolution</span></span>|  
|----------|----------|----------------|  
|<span data-ttu-id="5ad1b-316">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-316">Option</span></span>|<span data-ttu-id="5ad1b-317">ASC/DESC</span><span class="sxs-lookup"><span data-stu-id="5ad1b-317">ASC/DESC</span></span>|<span data-ttu-id="5ad1b-318">非聚集哈希索引不排序。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-318">Nonclustered hash indexes are not ordered.</span></span> <span data-ttu-id="5ad1b-319">从索引键定义中删除关键字 `ASC` 和 `DESC`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-319">Remove the keywords `ASC` and `DESC` from the index key specification.</span></span>|  
  
## <a name="natively-compiled-stored-procedures"></a><span data-ttu-id="5ad1b-320">本机编译的存储过程</span><span class="sxs-lookup"><span data-stu-id="5ad1b-320">Natively Compiled Stored Procedures</span></span>  
 <span data-ttu-id="5ad1b-321">下表列出可在涉及本机编译存储过程的错误消息文本中显示的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字，以及用于解决问题的更正操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-321">The following table lists the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the message text of an error involving natively compiled stored procedures, as well as the corrective action to resolve the error.</span></span>  
  
|<span data-ttu-id="5ad1b-322">类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-322">Type</span></span>|<span data-ttu-id="5ad1b-323">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-323">Feature</span></span>|<span data-ttu-id="5ad1b-324">解决方法</span><span class="sxs-lookup"><span data-stu-id="5ad1b-324">Resolution</span></span>|  
|----------|-------------|----------------|  
|<span data-ttu-id="5ad1b-325">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-325">Feature</span></span>|<span data-ttu-id="5ad1b-326">内联表变量</span><span class="sxs-lookup"><span data-stu-id="5ad1b-326">Inline table variables</span></span>|<span data-ttu-id="5ad1b-327">不能使用变量声明内联声明表类型。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-327">Table types cannot be declared inline with variable declarations.</span></span> <span data-ttu-id="5ad1b-328">必须使用 `CREATE TYPE` 语句显式声明表类型。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-328">Table types must be declared explicitly using a `CREATE TYPE` statement.</span></span>|  
|<span data-ttu-id="5ad1b-329">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-329">Feature</span></span>|<span data-ttu-id="5ad1b-330">游标</span><span class="sxs-lookup"><span data-stu-id="5ad1b-330">Cursors</span></span>|<span data-ttu-id="5ad1b-331">本机编译的存储过程不支持游标。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-331">Cursors are not supported on or in natively compiled stored procedures.</span></span><br /><br /> <span data-ttu-id="5ad1b-332">-从客户端执行该过程时，请使用 RPC 而非游标 API。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-332">-When executing the procedure from the client, use RPC rather than the cursor API.</span></span> <span data-ttu-id="5ad1b-333">对于 ODBC，避免 [!INCLUDE[tsql](../../includes/tsql-md.md)] 语句 `EXECUTE`，直接指定过程的名称。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-333">With ODBC, avoid the [!INCLUDE[tsql](../../includes/tsql-md.md)] statement `EXECUTE`, instead specify the name of the procedure directly.</span></span><br /><br /> <span data-ttu-id="5ad1b-334">-从 [!INCLUDE[tsql](../../includes/tsql-md.md)] 批处理或其他存储过程执行该过程时，请避免将游标用于本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-334">-When executing the procedure from a [!INCLUDE[tsql](../../includes/tsql-md.md)] batch or another stored procedure, avoid using a cursor with the natively compiled stored procedure.</span></span><br /><br /> <span data-ttu-id="5ad1b-335">-在创建本机编译的存储过程时，请使用基于集的逻辑或循环来创建本机编译的存储过程，而不是使用游标 `WHILE` 。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-335">-When creating a natively compiled stored procedure, rather than using a cursor, use set-based logic or a `WHILE` loop.</span></span>|  
|<span data-ttu-id="5ad1b-336">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-336">Feature</span></span>|<span data-ttu-id="5ad1b-337">非常量参数默认值</span><span class="sxs-lookup"><span data-stu-id="5ad1b-337">Non-constant parameter defaults</span></span>|<span data-ttu-id="5ad1b-338">将默认值与本机编译的存储过程参数一起使用时，这些值必须为常量。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-338">When using default values with parameters on natively compiled stored procedures, the values must be constants.</span></span> <span data-ttu-id="5ad1b-339">从参数声明中删除所有通配符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-339">Remove any wildcards from the parameter declarations.</span></span>|  
|<span data-ttu-id="5ad1b-340">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-340">Feature</span></span>|<span data-ttu-id="5ad1b-341">EXTERNAL</span><span class="sxs-lookup"><span data-stu-id="5ad1b-341">EXTERNAL</span></span>|<span data-ttu-id="5ad1b-342">无法本机编译 CLR 存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-342">CLR stored procedures cannot be natively compiled.</span></span> <span data-ttu-id="5ad1b-343">从 CREATE PROCEDURE 语句中删除 AS EXTERNAL 子句或 NATIVE_COMPILATION 选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-343">Either remove the AS EXTERNAL clause or the NATIVE_COMPILATION option from the CREATE PROCEDURE statement.</span></span>|  
|<span data-ttu-id="5ad1b-344">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-344">Feature</span></span>|<span data-ttu-id="5ad1b-345">带编号的存储过程</span><span class="sxs-lookup"><span data-stu-id="5ad1b-345">Numbered stored procedures</span></span>|<span data-ttu-id="5ad1b-346">不能对本机编译的存储过程编号。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-346">Natively compiled stored procedures cannot be numbered.</span></span> <span data-ttu-id="5ad1b-347">`;`从语句中删除该*数字* `CREATE PROCEDURE` 。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-347">Remove the `;`*number* from the `CREATE PROCEDURE` statement.</span></span>|  
|<span data-ttu-id="5ad1b-348">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-348">Feature</span></span>|<span data-ttu-id="5ad1b-349">多行 INSERT ...VALUES 语句</span><span class="sxs-lookup"><span data-stu-id="5ad1b-349">multi-row INSERT ... VALUES statements</span></span>|<span data-ttu-id="5ad1b-350">在本机编译的存储过程中无法使用同一 `INSERT` 语句插入多行。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-350">Cannot insert multiple rows using the same `INSERT` statement in a natively compiled stored procedure.</span></span> <span data-ttu-id="5ad1b-351">为每行创建 `INSERT` 语句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-351">Create `INSERT` statements for each row.</span></span>|  
|<span data-ttu-id="5ad1b-352">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-352">Feature</span></span>|<span data-ttu-id="5ad1b-353">公用表表达式 (CTE)</span><span class="sxs-lookup"><span data-stu-id="5ad1b-353">Common Table Expressions (CTEs)</span></span>|<span data-ttu-id="5ad1b-354">本机编译的存储过程中不支持公用表表达式 (CTE)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-354">Common table expressions (CTE) are not supported in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-355">重写查询。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-355">Rewrite the query.</span></span>|  
|<span data-ttu-id="5ad1b-356">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-356">Feature</span></span>|<span data-ttu-id="5ad1b-357">子查询</span><span class="sxs-lookup"><span data-stu-id="5ad1b-357">subquery</span></span>|<span data-ttu-id="5ad1b-358">不支持子查询（查询嵌套在另一个查询中）。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-358">Subqueries (queries nested inside another query) are not supported.</span></span> <span data-ttu-id="5ad1b-359">重写查询。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-359">Rewrite the query.</span></span>|  
|<span data-ttu-id="5ad1b-360">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-360">Feature</span></span>|<span data-ttu-id="5ad1b-361">COMPUTE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-361">COMPUTE</span></span>|<span data-ttu-id="5ad1b-362">不支持 `COMPUTE` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-362">The `COMPUTE` clause is not supported.</span></span> <span data-ttu-id="5ad1b-363">从查询中删除它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-363">Remove it from the query.</span></span>|  
|<span data-ttu-id="5ad1b-364">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-364">Feature</span></span>|<span data-ttu-id="5ad1b-365">SELECT INTO</span><span class="sxs-lookup"><span data-stu-id="5ad1b-365">SELECT INTO</span></span>|<span data-ttu-id="5ad1b-366">`INTO` 语句不支持 `SELECT` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-366">The `INTO` clause is not supported with the `SELECT` statement.</span></span> <span data-ttu-id="5ad1b-367">将查询重写为 `INSERT INTO` *Table* `SELECT` 。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-367">Rewrite the query as `INSERT INTO`*Table*`SELECT`.</span></span>|  
|<span data-ttu-id="5ad1b-368">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-368">Feature</span></span>|<span data-ttu-id="5ad1b-369">OUTPUT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-369">OUTPUT</span></span>|<span data-ttu-id="5ad1b-370">不支持 `OUTPUT` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-370">The `OUTPUT` clause is not supported.</span></span> <span data-ttu-id="5ad1b-371">从查询中删除它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-371">Remove it from the query.</span></span>|  
|<span data-ttu-id="5ad1b-372">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-372">Feature</span></span>|<span data-ttu-id="5ad1b-373">不完整的插入列列表</span><span class="sxs-lookup"><span data-stu-id="5ad1b-373">incomplete insert column list</span></span>|<span data-ttu-id="5ad1b-374">在 `INSERT` 语句中，必须为表中的所有列指定值。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-374">In `INSERT` statements, values must be specified for all columns in the table.</span></span>|  
|<span data-ttu-id="5ad1b-375">函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-375">Function</span></span>|<span data-ttu-id="5ad1b-376">*Function*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-376">*Function*</span></span>|<span data-ttu-id="5ad1b-377">本机编译的存储过程中不支持内置函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-377">The built-in function is not supported in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-378">从存储过程中删除该函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-378">Remove the function from the stored procedure.</span></span> <span data-ttu-id="5ad1b-379">有关支持的内置函数的详细信息，请参阅[本机编译的存储过程](../in-memory-oltp/natively-compiled-stored-procedures.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-379">For more information about supported built-in functions, see [Natively Compiled Stored Procedures](../in-memory-oltp/natively-compiled-stored-procedures.md).</span></span>|  
|<span data-ttu-id="5ad1b-380">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-380">Feature</span></span>|<span data-ttu-id="5ad1b-381">CASE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-381">CASE</span></span>|<span data-ttu-id="5ad1b-382">本机编译的存储过程内的查询中不支持 `CASE` 语句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-382">The `CASE` statement is not supported in queries inside natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-383">创建每个情况的查询。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-383">Create queries for each case.</span></span> <span data-ttu-id="5ad1b-384">有关详细信息，请参阅[实现 CASE 语句](implementing-a-case-expression-in-a-natively-compiled-stored-procedure.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-384">For more information, see [Implementing a CASE Statement](implementing-a-case-expression-in-a-natively-compiled-stored-procedure.md).</span></span>|  
|<span data-ttu-id="5ad1b-385">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-385">Feature</span></span>|<span data-ttu-id="5ad1b-386">用户定义的函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-386">user-defined functions</span></span>|<span data-ttu-id="5ad1b-387">不能在本机编译的存储过程中使用用户定义函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-387">User-defined functions cannot be used in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-388">从过程定义中删除对该函数的引用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-388">Remove the reference to the function from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-389">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-389">Feature</span></span>|<span data-ttu-id="5ad1b-390">用户定义聚合</span><span class="sxs-lookup"><span data-stu-id="5ad1b-390">user-defined aggregates</span></span>|<span data-ttu-id="5ad1b-391">不能在本机编译的存储过程中使用用户定义的聚合函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-391">User-defined aggregate functions cannot be used in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-392">从过程中删除对该函数的引用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-392">Remove the reference to the function from the procedure.</span></span>|  
|<span data-ttu-id="5ad1b-393">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-393">Feature</span></span>|<span data-ttu-id="5ad1b-394">浏览模式元数据</span><span class="sxs-lookup"><span data-stu-id="5ad1b-394">browse mode metadata</span></span>|<span data-ttu-id="5ad1b-395">本机编译的存储过程不支持浏览模式元数据。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-395">Natively compiled stored procedures do not support browse mode metadata.</span></span> <span data-ttu-id="5ad1b-396">确保将会话选项 `NO_BROWSETABLE` 设置为 OFF。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-396">Make sure the session option `NO_BROWSETABLE` is set to OFF.</span></span>|  
|<span data-ttu-id="5ad1b-397">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-397">Feature</span></span>|<span data-ttu-id="5ad1b-398">带 FROM 子句的 DELETE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-398">DELETE with FROM clause</span></span>|<span data-ttu-id="5ad1b-399">表源在本机编译存储过程中的 `FROM` 语句不支持 `DELETE` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-399">The `FROM` clause is not supported for `DELETE` statements with a table source in natively compiled stored procedures.</span></span><br /><br /> <span data-ttu-id="5ad1b-400">在指示要执行删除操作的表时，支持带 `DELETE` 子句的 `FROM`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-400">`DELETE` with the `FROM` clause is supported when it is used to indicate the table to delete from.</span></span>|  
|<span data-ttu-id="5ad1b-401">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-401">Feature</span></span>|<span data-ttu-id="5ad1b-402">带 FROM 子句的 UPDATE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-402">UPDATE with FROM clause</span></span>|<span data-ttu-id="5ad1b-403">本机编译的存储过程中的 `FROM` 语句不支持 `UPDATE` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-403">The `FROM` clause is not supported for `UPDATE` statements in natively compiled stored procedures.</span></span>|  
|<span data-ttu-id="5ad1b-404">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-404">Feature</span></span>|<span data-ttu-id="5ad1b-405">临时程序</span><span class="sxs-lookup"><span data-stu-id="5ad1b-405">temporary procedures</span></span>|<span data-ttu-id="5ad1b-406">临时存储过程无法进行本机编译。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-406">Temporary stored procedures cannot be natively compiled.</span></span> <span data-ttu-id="5ad1b-407">请创建永久的本机编译存储过程或临时的解释型 [!INCLUDE[tsql](../../includes/tsql-md.md)] 存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-407">Either create a permanent natively compiled stored procedure or a temporary interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)] stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-408">隔离级别</span><span class="sxs-lookup"><span data-stu-id="5ad1b-408">Isolation level</span></span>|<span data-ttu-id="5ad1b-409">READ UNCOMMITTED</span><span class="sxs-lookup"><span data-stu-id="5ad1b-409">READ UNCOMMITTED</span></span>|<span data-ttu-id="5ad1b-410">本机编译的存储过程不支持隔离级别 READ UNCOMMITTED。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-410">The isolation level READ UNCOMMITTED is not supported for natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-411">请使用支持的隔离级别，如 SNAPSHOT。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-411">Use a supported isolation level, such as SNAPSHOT.</span></span>|  
|<span data-ttu-id="5ad1b-412">隔离级别</span><span class="sxs-lookup"><span data-stu-id="5ad1b-412">Isolation level</span></span>|<span data-ttu-id="5ad1b-413">READ COMMITTED</span><span class="sxs-lookup"><span data-stu-id="5ad1b-413">READ COMMITTED</span></span>|<span data-ttu-id="5ad1b-414">本机编译的存储过程不支持隔离级别 READ UNCOMMITTED。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-414">The isolation level READ UNCOMMITTED is not supported for natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-415">请使用支持的隔离级别，如 SNAPSHOT。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-415">Use a supported isolation level, such as SNAPSHOT.</span></span>|  
|<span data-ttu-id="5ad1b-416">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-416">Feature</span></span>|<span data-ttu-id="5ad1b-417">临时表</span><span class="sxs-lookup"><span data-stu-id="5ad1b-417">temporary tables</span></span>|<span data-ttu-id="5ad1b-418">tempdb 中的表不能在本机编译的存储过程中使用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-418">Tables in tempdb cannot be used in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-419">请使用表变量或 DURABILITY=SCHEMA_ONLY 的内存优化表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-419">Instead, use a table variable or a memory-optimized table with DURABILITY=SCHEMA_ONLY.</span></span>|  
|<span data-ttu-id="5ad1b-420">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-420">Feature</span></span>|<span data-ttu-id="5ad1b-421">MARS</span><span class="sxs-lookup"><span data-stu-id="5ad1b-421">MARS</span></span>|<span data-ttu-id="5ad1b-422">本机编译的存储过程不支持多个活动结果集 (MARS)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-422">Multiple Active Result Sets (MARS) is not supported with natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-423">此错误还可能指示使用了链接服务器。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-423">This error can also indicate linked server use.</span></span> <span data-ttu-id="5ad1b-424">链接服务器可以使用 MARS。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-424">Linked server can use MARS.</span></span> <span data-ttu-id="5ad1b-425">本机编译的存储过程不支持链接服务器。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-425">Linked servers are not supported with natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-426">请直接连接到本机编译的存储过程所在的服务器和数据库。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-426">Instead, connect directly to the server and database that hosts the natively compiled stored procedures.</span></span>|  
|<span data-ttu-id="5ad1b-427">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-427">Feature</span></span>|<span data-ttu-id="5ad1b-428">DTC</span><span class="sxs-lookup"><span data-stu-id="5ad1b-428">DTC</span></span>|<span data-ttu-id="5ad1b-429">不能从分布式事务访问内存优化的表和本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-429">Memory-optimized tables and natively compiled stored procedures cannot be accessed from distributed transactions.</span></span> <span data-ttu-id="5ad1b-430">请改用 SQL 事务。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-430">Use SQL transactions instead.</span></span>|  
|<span data-ttu-id="5ad1b-431">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-431">Feature</span></span>|<span data-ttu-id="5ad1b-432">非 bin2 排序规则</span><span class="sxs-lookup"><span data-stu-id="5ad1b-432">non-bin2 collation</span></span>|<span data-ttu-id="5ad1b-433">对本机编译的存储过程中的字符串执行比较、排序和其他操作需要使用 BIN2 排序规则。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-433">Comparison, sorting, and other operations on character strings in natively compiled stored procedures require using a BIN2 collation.</span></span> <span data-ttu-id="5ad1b-434">使用 COLLATE 子句或使用具有合适排序规则的列和变量。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-434">Use the COLLATE clause or use columns and variables with an appropriate collation.</span></span> <span data-ttu-id="5ad1b-435">有关详细信息，请参阅 [Collations and Code Pages](../../database-engine/collations-and-code-pages.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-435">For more information, see [Collations and Code Pages](../../database-engine/collations-and-code-pages.md).</span></span>|  
|<span data-ttu-id="5ad1b-436">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-436">Feature</span></span>|<span data-ttu-id="5ad1b-437">按照 SC 排序规则截断字符串。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-437">Truncation of character strings with an SC collation.</span></span>|<span data-ttu-id="5ad1b-438">采用 `_SC` 排序规则的字符串使用 UTF-16 编码。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-438">Character strings with an `_SC` collation use the UTF-16 encoding.</span></span> <span data-ttu-id="5ad1b-439">将 n(var)char 值转换具有更短长度的 n(var)char 值涉及截断。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-439">Converting an n(var)char value to an n(var)char value with a shorted length involves truncation.</span></span> <span data-ttu-id="5ad1b-440">这对于本机编译的存储过程中的 UTF-16 值不受支持。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-440">This is not supported for UTF-16 values in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-441">避免 UTF-16 字符串的截断。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-441">Avoid truncation of UTF-16 strings.</span></span>|  
|<span data-ttu-id="5ad1b-442">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-442">Feature</span></span>|<span data-ttu-id="5ad1b-443">EXECUTE WITH RECOMPILE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-443">EXECUTE WITH RECOMPILE</span></span>|<span data-ttu-id="5ad1b-444">本机编译的存储过程不支持选项 `WITH RECOMPILE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-444">The option `WITH RECOMPILE` is not supported for natively compiled stored procedures.</span></span>|  
|<span data-ttu-id="5ad1b-445">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-445">Feature</span></span>|<span data-ttu-id="5ad1b-446">LEN 和 SUBSTRING 的参数采用 SC 排序规则</span><span class="sxs-lookup"><span data-stu-id="5ad1b-446">LEN and SUBSTRING with an argument in an SC collation</span></span>|<span data-ttu-id="5ad1b-447">采用 _SC 排序规则的字符串使用 UTF-16 编码。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-447">Character strings with an _SC collation use the UTF-16 encoding.</span></span> <span data-ttu-id="5ad1b-448">在本机编译的存储过程内使用内置函数 LEN 和 SUBSTRING 时，这些函数不支持 UTF-16 编码。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-448">The built-in functions LEN and SUBSTRING, when used inside natively compiled stored procedures, do not support the UTF-16 encoding.</span></span> <span data-ttu-id="5ad1b-449">使用其他排序规则或避免使用这些函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-449">Use a different collation or avoid using these functions.</span></span>|  
|<span data-ttu-id="5ad1b-450">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-450">Feature</span></span>|<span data-ttu-id="5ad1b-451">从专用管理员连接执行。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-451">Execution from the dedicated administrator connection.</span></span>|<span data-ttu-id="5ad1b-452">不能从专用管理员连接 (DAC) 执行本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-452">Natively compiled stored procedures cannot be executed from the dedicated admin connection (DAC).</span></span> <span data-ttu-id="5ad1b-453">请改用常规连接。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-453">Use a regular connection instead.</span></span>|  
|<span data-ttu-id="5ad1b-454">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-454">Operation</span></span>|<span data-ttu-id="5ad1b-455">ALTER PROCEDURE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-455">ALTER PROCEDURE</span></span>|<span data-ttu-id="5ad1b-456">不能更改本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-456">Natively compiled stored procedures cannot be altered.</span></span> <span data-ttu-id="5ad1b-457">要更改该过程定义，请删除并重新创建存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-457">To change the procedure definition, drop and recreate the stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-458">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-458">Operation</span></span>|<span data-ttu-id="5ad1b-459">保存点</span><span class="sxs-lookup"><span data-stu-id="5ad1b-459">savepoint</span></span>|<span data-ttu-id="5ad1b-460">不能从具有活动保存点的事务调用本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-460">Natively compiled stored procedures cannot be invoked from transactions that have an active savepoint.</span></span> <span data-ttu-id="5ad1b-461">从事务中删除该保存点。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-461">Remove the savepoint from the transaction.</span></span>|  
|<span data-ttu-id="5ad1b-462">Operation</span><span class="sxs-lookup"><span data-stu-id="5ad1b-462">Operation</span></span>|<span data-ttu-id="5ad1b-463">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-463">ALTER AUTHORIZATION</span></span>|<span data-ttu-id="5ad1b-464">不支持更改现有内存优化的表或本机编译的存储过程的所有者。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-464">Changing the owner of an existing memory-optimized table or natively compiled stored procedure is not supported.</span></span> <span data-ttu-id="5ad1b-465">请删除并重新创建该表或过程来更改所有权。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-465">Drop and recreate the table or procedure to change ownership.</span></span>|  
|<span data-ttu-id="5ad1b-466">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-466">Operator</span></span>|<span data-ttu-id="5ad1b-467">OPENROWSET</span><span class="sxs-lookup"><span data-stu-id="5ad1b-467">OPENROWSET</span></span>|<span data-ttu-id="5ad1b-468">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-468">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-469">从本机编译的存储过程中删除 `OPENROWSET`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-469">Remove `OPENROWSET` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-470">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-470">Operator</span></span>|<span data-ttu-id="5ad1b-471">OPENQUERY</span><span class="sxs-lookup"><span data-stu-id="5ad1b-471">OPENQUERY</span></span>|<span data-ttu-id="5ad1b-472">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-472">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-473">从本机编译的存储过程中删除 `OPENQUERY`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-473">Remove `OPENQUERY` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-474">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-474">Operator</span></span>|<span data-ttu-id="5ad1b-475">OPENDATASOURCE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-475">OPENDATASOURCE</span></span>|<span data-ttu-id="5ad1b-476">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-476">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-477">从本机编译的存储过程中删除 `OPENDATASOURCE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-477">Remove `OPENDATASOURCE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-478">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-478">Operator</span></span>|<span data-ttu-id="5ad1b-479">OPENXML</span><span class="sxs-lookup"><span data-stu-id="5ad1b-479">OPENXML</span></span>|<span data-ttu-id="5ad1b-480">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-480">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-481">从本机编译的存储过程中删除 `OPENXML`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-481">Remove `OPENXML` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-482">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-482">Operator</span></span>|<span data-ttu-id="5ad1b-483">CONTAINSTABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-483">CONTAINSTABLE</span></span>|<span data-ttu-id="5ad1b-484">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-484">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-485">从本机编译的存储过程中删除 `CONTAINSTABLE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-485">Remove `CONTAINSTABLE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-486">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-486">Operator</span></span>|<span data-ttu-id="5ad1b-487">FREETEXTTABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-487">FREETEXTTABLE</span></span>|<span data-ttu-id="5ad1b-488">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-488">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-489">从本机编译的存储过程中删除 `FREETEXTTABLE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-489">Remove `FREETEXTTABLE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-490">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-490">Feature</span></span>|<span data-ttu-id="5ad1b-491">表值函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-491">table-valued functions</span></span>|<span data-ttu-id="5ad1b-492">不能从本机编译的存储过程引用表值函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-492">Table-valued functions cannot be referenced from natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-493">有可能解决此限制的一种方法是将表值函数中的逻辑添加到过程主体。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-493">One possible workaround for this restriction is to add the logic in the table-valued functions to the procedure body.</span></span>|  
|<span data-ttu-id="5ad1b-494">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-494">Operator</span></span>|<span data-ttu-id="5ad1b-495">CHANGETABLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-495">CHANGETABLE</span></span>|<span data-ttu-id="5ad1b-496">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-496">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-497">从本机编译的存储过程中删除 `CHANGETABLE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-497">Remove `CHANGETABLE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-498">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-498">Operator</span></span>|<span data-ttu-id="5ad1b-499">GOTO</span><span class="sxs-lookup"><span data-stu-id="5ad1b-499">GOTO</span></span>|<span data-ttu-id="5ad1b-500">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-500">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-501">使用其他过程构造，如 WHILE。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-501">Use other procedural constructs such as WHILE.</span></span>|  
|<span data-ttu-id="5ad1b-502">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-502">Operator</span></span>|<span data-ttu-id="5ad1b-503">EXECUTE, INSERT EXEC</span><span class="sxs-lookup"><span data-stu-id="5ad1b-503">EXECUTE, INSERT EXEC</span></span>|<span data-ttu-id="5ad1b-504">不支持嵌套本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-504">Nesting natively compiled stored procedures is not supported.</span></span> <span data-ttu-id="5ad1b-505">所需的操作可以内联指定作为存储过程定义的一部分。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-505">The required operations can be specified inline, as part of the stored procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-506">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-506">Operator</span></span>|<span data-ttu-id="5ad1b-507">OFFSET</span><span class="sxs-lookup"><span data-stu-id="5ad1b-507">OFFSET</span></span>|<span data-ttu-id="5ad1b-508">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-508">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-509">从本机编译的存储过程中删除 `OFFSET`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-509">Remove `OFFSET` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-510">运算符</span><span class="sxs-lookup"><span data-stu-id="5ad1b-510">Operator</span></span>|<span data-ttu-id="5ad1b-511">UNION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-511">UNION</span></span>|<span data-ttu-id="5ad1b-512">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-512">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-513">从本机编译的存储过程中删除 `UNION`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-513">Remove `UNION` from the natively compiled stored procedure.</span></span> <span data-ttu-id="5ad1b-514">可以使用表变量将几个结果集合并为单个结果集。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-514">Combining several result sets into a single result set can be done using a table variable.</span></span>|  
|<span data-ttu-id="5ad1b-515">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-515">Operator</span></span>|<span data-ttu-id="5ad1b-516">INTERSECT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-516">INTERSECT</span></span>|<span data-ttu-id="5ad1b-517">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-517">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-518">从本机编译的存储过程中删除 `INTERSECT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-518">Remove `INTERSECT` from the natively compiled stored procedure.</span></span> <span data-ttu-id="5ad1b-519">在某些情况下，可以使用 INNER JOIN 获得相同的结果。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-519">In some cases an INNER JOIN can be used to obtain the same result.</span></span>|  
|<span data-ttu-id="5ad1b-520">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-520">Operator</span></span>|<span data-ttu-id="5ad1b-521">EXCEPT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-521">EXCEPT</span></span>|<span data-ttu-id="5ad1b-522">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-522">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-523">从本机编译的存储过程中删除 `EXCEPT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-523">Remove `EXCEPT` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-524">运算符</span><span class="sxs-lookup"><span data-stu-id="5ad1b-524">Operator</span></span>|<span data-ttu-id="5ad1b-525">OUTER JOIN</span><span class="sxs-lookup"><span data-stu-id="5ad1b-525">OUTER JOIN</span></span>|<span data-ttu-id="5ad1b-526">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-526">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-527">从本机编译的存储过程中删除 `OUTER JOIN`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-527">Remove `OUTER JOIN` from the natively compiled stored procedure.</span></span> <span data-ttu-id="5ad1b-528">有关详细信息，请参阅[实现外部联接](implementing-an-outer-join.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-528">For more information, see [Implementing an Outer Join](implementing-an-outer-join.md).</span></span>|  
|<span data-ttu-id="5ad1b-529">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-529">Operator</span></span>|<span data-ttu-id="5ad1b-530">APPLY</span><span class="sxs-lookup"><span data-stu-id="5ad1b-530">APPLY</span></span>|<span data-ttu-id="5ad1b-531">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-531">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-532">从本机编译的存储过程中删除 `APPLY`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-532">Remove `APPLY` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-533">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-533">Operator</span></span>|<span data-ttu-id="5ad1b-534">PIVOT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-534">PIVOT</span></span>|<span data-ttu-id="5ad1b-535">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-535">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-536">从本机编译的存储过程中删除 `PIVOT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-536">Remove `PIVOT` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-537">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-537">Operator</span></span>|<span data-ttu-id="5ad1b-538">UNPIVOT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-538">UNPIVOT</span></span>|<span data-ttu-id="5ad1b-539">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-539">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-540">从本机编译的存储过程中删除 `UNPIVOT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-540">Remove `UNPIVOT` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-541">运算符</span><span class="sxs-lookup"><span data-stu-id="5ad1b-541">Operator</span></span>|<span data-ttu-id="5ad1b-542">OR, IN</span><span class="sxs-lookup"><span data-stu-id="5ad1b-542">OR, IN</span></span>|<span data-ttu-id="5ad1b-543">本机编译的存储过程中查询的 WHERE 子句中不支持 Disjunction (OR, IN)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-543">Disjunction (OR, IN) is not supported in the WHERE clause of queries in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-544">为每种情况创建查询。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-544">Create queries for each of the cases.</span></span>|  
|<span data-ttu-id="5ad1b-545">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-545">Operator</span></span>|<span data-ttu-id="5ad1b-546">CONTAINS</span><span class="sxs-lookup"><span data-stu-id="5ad1b-546">CONTAINS</span></span>|<span data-ttu-id="5ad1b-547">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-547">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-548">从本机编译的存储过程中删除 `CONTAINS`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-548">Remove `CONTAINS` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-549">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-549">Operator</span></span>|<span data-ttu-id="5ad1b-550">FREETEXT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-550">FREETEXT</span></span>|<span data-ttu-id="5ad1b-551">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-551">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-552">从本机编译的存储过程中删除 `FREETEXT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-552">Remove `FREETEXT` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-553">运算符</span><span class="sxs-lookup"><span data-stu-id="5ad1b-553">Operator</span></span>|<span data-ttu-id="5ad1b-554">NOT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-554">NOT</span></span>|<span data-ttu-id="5ad1b-555">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-555">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-556">从本机编译的存储过程中删除 `NOT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-556">Remove `NOT` from the natively compiled stored procedure.</span></span> <span data-ttu-id="5ad1b-557">在某些情况下，可以使用不相等替换 `NOT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-557">In some cases, `NOT` can be replaced with inequality.</span></span> <span data-ttu-id="5ad1b-558">例如，可以使用 `NOT a=b` 替换 `a!=b`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-558">For example, `NOT a=b` can be replaced with `a!=b`.</span></span>|  
|<span data-ttu-id="5ad1b-559">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-559">Operator</span></span>|<span data-ttu-id="5ad1b-560">TSEQUAL</span><span class="sxs-lookup"><span data-stu-id="5ad1b-560">TSEQUAL</span></span>|<span data-ttu-id="5ad1b-561">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-561">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-562">从本机编译的存储过程中删除 `TSEQUAL`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-562">Remove `TSEQUAL` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-563">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-563">Operator</span></span>|<span data-ttu-id="5ad1b-564">LIKE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-564">LIKE</span></span>|<span data-ttu-id="5ad1b-565">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-565">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-566">从本机编译的存储过程中删除 `LIKE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-566">Remove `LIKE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-567">操作员</span><span class="sxs-lookup"><span data-stu-id="5ad1b-567">Operator</span></span>|<span data-ttu-id="5ad1b-568">NEXT VALUE FOR</span><span class="sxs-lookup"><span data-stu-id="5ad1b-568">NEXT VALUE FOR</span></span>|<span data-ttu-id="5ad1b-569">不能在本机编译的存储过程内引用序列。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-569">Sequences cannot be referenced inside natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-570">使用解释的 [!INCLUDE[tsql](../../includes/tsql-md.md)]获取值，然后将它传递到本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-570">Obtain the value using interpreted [!INCLUDE[tsql](../../includes/tsql-md.md)], and then pass it into the natively compiled stored procedure.</span></span> <span data-ttu-id="5ad1b-571">有关详细信息，请参阅 [在内存优化表中实现 IDENTITY](implementing-identity-in-a-memory-optimized-table.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-571">For more information, see [Implementing IDENTITY in a Memory-Optimized Table](implementing-identity-in-a-memory-optimized-table.md).</span></span>|  
|<span data-ttu-id="5ad1b-572">Set 选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-572">Set option</span></span>|<span data-ttu-id="5ad1b-573">*option*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-573">*option*</span></span>|<span data-ttu-id="5ad1b-574">在本机编译的存储过程内无法更改 SET 选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-574">SET options cannot be changed inside natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-575">可以使用 BEGIN ATOMIC 语句设置某些选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-575">Certain options can be set with the BEGIN ATOMIC statement.</span></span> <span data-ttu-id="5ad1b-576">有关详细信息，请参阅 [Natively Compiled Stored Procedures](../in-memory-oltp/natively-compiled-stored-procedures.md)中有关原子块的章节。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-576">For more information, see the section on atonic blocks in [Natively Compiled Stored Procedures](../in-memory-oltp/natively-compiled-stored-procedures.md).</span></span>|  
|<span data-ttu-id="5ad1b-577">操作数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-577">Operand</span></span>|<span data-ttu-id="5ad1b-578">TABLESAMPLE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-578">TABLESAMPLE</span></span>|<span data-ttu-id="5ad1b-579">不支持此运算符。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-579">This operator is not supported.</span></span> <span data-ttu-id="5ad1b-580">从本机编译的存储过程中删除 `TABLESAMPLE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-580">Remove `TABLESAMPLE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-581">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-581">Option</span></span>|<span data-ttu-id="5ad1b-582">RECOMPILE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-582">RECOMPILE</span></span>|<span data-ttu-id="5ad1b-583">在创建时编译本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-583">Natively compiled stored procedures are compiled at create time.</span></span> <span data-ttu-id="5ad1b-584">要重新编译本机编译的存储过程，请删除并重新创建它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-584">To recompile a natively compiled stored procedure, drop and recreate it.</span></span> <span data-ttu-id="5ad1b-585">`RECOMPILE`从过程定义中删除。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-585">Remove `RECOMPILE` from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-586">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-586">Option</span></span>|<span data-ttu-id="5ad1b-587">ENCRYPTION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-587">ENCRYPTION</span></span>|<span data-ttu-id="5ad1b-588">不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-588">This option is not supported.</span></span> <span data-ttu-id="5ad1b-589">`ENCRYPTION`从过程定义中删除。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-589">Remove `ENCRYPTION` from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-590">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-590">Option</span></span>|<span data-ttu-id="5ad1b-591">FOR REPLICATION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-591">FOR REPLICATION</span></span>|<span data-ttu-id="5ad1b-592">无法为复制创建本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-592">Natively compiled stored procedures cannot be created for replication.</span></span> <span data-ttu-id="5ad1b-593">从过程定义中删除 `FOR REPLICATION`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-593">Removed `FOR REPLICATION` from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-594">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-594">Option</span></span>|<span data-ttu-id="5ad1b-595">FOR XML</span><span class="sxs-lookup"><span data-stu-id="5ad1b-595">FOR XML</span></span>|<span data-ttu-id="5ad1b-596">不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-596">This option is not supported.</span></span> <span data-ttu-id="5ad1b-597">从本机编译的存储过程中删除 `FOR XML`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-597">Remove `FOR XML` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-598">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-598">Option</span></span>|<span data-ttu-id="5ad1b-599">FOR BROWSE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-599">FOR BROWSE</span></span>|<span data-ttu-id="5ad1b-600">不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-600">This option is not supported.</span></span> <span data-ttu-id="5ad1b-601">从本机编译的存储过程中删除 `FOR BROWSE`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-601">Remove `FOR BROWSE` from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-602">联接提示</span><span class="sxs-lookup"><span data-stu-id="5ad1b-602">Join hint</span></span>|<span data-ttu-id="5ad1b-603">HASH、MERGE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-603">HASH, MERGE</span></span>|<span data-ttu-id="5ad1b-604">本机编译的存储过程仅支持嵌套的循环联接。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-604">Natively compiled stored procedures only support nested-loops joins.</span></span> <span data-ttu-id="5ad1b-605">不支持哈希和合并联接。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-605">Hash and merge joins are not supported.</span></span> <span data-ttu-id="5ad1b-606">删除联接提示。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-606">Remove the join hint.</span></span>|  
|<span data-ttu-id="5ad1b-607">查询提示</span><span class="sxs-lookup"><span data-stu-id="5ad1b-607">Query hint</span></span>|<span data-ttu-id="5ad1b-608">*查询提示*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-608">*Query hint*</span></span>|<span data-ttu-id="5ad1b-609">此查询提示不位于本机编译的存储过程内。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-609">This query hint is not inside natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-610">有关支持的查询提示，请参阅[查询提示 (Transact-SQL)](/sql/t-sql/queries/hints-transact-sql-query)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-610">For supported query hints see [Query Hints &#40;Transact-SQL&#41;](/sql/t-sql/queries/hints-transact-sql-query).</span></span>|  
|<span data-ttu-id="5ad1b-611">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-611">Option</span></span>|<span data-ttu-id="5ad1b-612">DISTINCT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-612">DISTINCT</span></span>|<span data-ttu-id="5ad1b-613">不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-613">This option is not supported.</span></span> <span data-ttu-id="5ad1b-614">从本机编译的存储过程中的查询删除 `DISTINCT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-614">Remove `DISTINCT` from the query in the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-615">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-615">Option</span></span>|<span data-ttu-id="5ad1b-616">PERCENT</span><span class="sxs-lookup"><span data-stu-id="5ad1b-616">PERCENT</span></span>|<span data-ttu-id="5ad1b-617">`TOP` 子句不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-617">This option is not supported with `TOP` clauses.</span></span> <span data-ttu-id="5ad1b-618">从本机编译的存储过程中的查询删除 `PERCENT`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-618">Remove `PERCENT` from the query in the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-619">选项</span><span class="sxs-lookup"><span data-stu-id="5ad1b-619">Option</span></span>|<span data-ttu-id="5ad1b-620">WITH TIES</span><span class="sxs-lookup"><span data-stu-id="5ad1b-620">WITH TIES</span></span>|<span data-ttu-id="5ad1b-621">`TOP` 子句不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-621">This option is not supported with `TOP` clauses.</span></span> <span data-ttu-id="5ad1b-622">从本机编译的存储过程中的查询删除 `WITH TIES`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-622">Remove `WITH TIES` from the query in the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-623">聚合函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-623">Aggregate function</span></span>|<span data-ttu-id="5ad1b-624">*聚合函数*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-624">*Aggregate function*</span></span>|<span data-ttu-id="5ad1b-625">不支持此子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-625">This clause is not supported.</span></span> <span data-ttu-id="5ad1b-626">有关本机编译的存储过程中聚合函数的详细信息，请参阅 [Natively Compiled Stored Procedures](../in-memory-oltp/natively-compiled-stored-procedures.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-626">For more information about aggregate functions in natively compiled stored procedures, see [Natively Compiled Stored Procedures](../in-memory-oltp/natively-compiled-stored-procedures.md).</span></span>|  
|<span data-ttu-id="5ad1b-627">排名函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-627">Ranking function</span></span>|<span data-ttu-id="5ad1b-628">*排名函数*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-628">*Ranking function*</span></span>|<span data-ttu-id="5ad1b-629">本机编译的存储过程中不支持排名函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-629">Ranking functions are not supported in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-630">从过程定义中删除它们。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-630">Remove them from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-631">函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-631">Function</span></span>|<span data-ttu-id="5ad1b-632">*Function*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-632">*Function*</span></span>|<span data-ttu-id="5ad1b-633">不支持此函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-633">This function is not supported.</span></span> <span data-ttu-id="5ad1b-634">从本机编译的存储过程中删除它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-634">Remove it from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-635">语句</span><span class="sxs-lookup"><span data-stu-id="5ad1b-635">Statement</span></span>|<span data-ttu-id="5ad1b-636">*Statement*</span><span class="sxs-lookup"><span data-stu-id="5ad1b-636">*Statement*</span></span>|<span data-ttu-id="5ad1b-637">不支持此语句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-637">This statement is not supported.</span></span> <span data-ttu-id="5ad1b-638">从本机编译的存储过程中删除它。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-638">Remove it from the natively compiled stored procedure.</span></span>|  
|<span data-ttu-id="5ad1b-639">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-639">Feature</span></span>|<span data-ttu-id="5ad1b-640">MIN 和 MAX 用于二进制和字符串</span><span class="sxs-lookup"><span data-stu-id="5ad1b-640">MIN and MAX used with binary and character strings</span></span>|<span data-ttu-id="5ad1b-641">聚合函数 `MIN` 和 `MAX` 不能用于本机编译的存储过程中的字符和二进制字符串值。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-641">The aggregate functions `MIN` and `MAX` cannot be used for character and binary string values inside natively compiled stored procedures.</span></span>|  
|<span data-ttu-id="5ad1b-642">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-642">Feature</span></span>|<span data-ttu-id="5ad1b-643">不带聚合函数的 GROUP BY</span><span class="sxs-lookup"><span data-stu-id="5ad1b-643">GROUP BY without aggregate function</span></span>|<span data-ttu-id="5ad1b-644">在本机编译的存储过程中，当查询具有 `GROUP BY` 子句时，该查询也必须在 SELECT 或 HAVING 子句中使用聚合函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-644">In natively compiled stored procedures, when a query has a `GROUP BY` clause, the query must also use an aggregate function in the SELECT or the HAVING clause.</span></span> <span data-ttu-id="5ad1b-645">向查询中添加聚合函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-645">Add an aggregate function to the query.</span></span>|  
|<span data-ttu-id="5ad1b-646">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-646">Feature</span></span>|<span data-ttu-id="5ad1b-647">GROUP BY ALL</span><span class="sxs-lookup"><span data-stu-id="5ad1b-647">GROUP BY ALL</span></span>|<span data-ttu-id="5ad1b-648">在本机编译的存储过程中，不能将 ALL 与 GROUP BY 子句一起使用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-648">ALL cannot be used with GROUP BY clauses in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-649">从 GROUP BY 子句中删除 ALL。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-649">Remove ALL from the GROUP BY clause.</span></span>|  
|<span data-ttu-id="5ad1b-650">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-650">Feature</span></span>|<span data-ttu-id="5ad1b-651">GROUP BY ()</span><span class="sxs-lookup"><span data-stu-id="5ad1b-651">GROUP BY ()</span></span>|<span data-ttu-id="5ad1b-652">不支持按空列表分组。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-652">Grouping by an empty list is not supported.</span></span> <span data-ttu-id="5ad1b-653">删除 GROUP BY 子句，或在分组列表中加入列。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-653">Either remove the GROUP BY clause, or include columns in the grouping list.</span></span>|  
|<span data-ttu-id="5ad1b-654">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-654">Feature</span></span>|<span data-ttu-id="5ad1b-655">ROLLUP</span><span class="sxs-lookup"><span data-stu-id="5ad1b-655">ROLLUP</span></span>|<span data-ttu-id="5ad1b-656">在本机编译的存储过程中，`ROLLUP` 不能与 `GROUP BY` 子句一起使用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-656">`ROLLUP` cannot be used with `GROUP BY` clauses in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-657">`ROLLUP`从过程定义中删除。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-657">Remove `ROLLUP` from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-658">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-658">Feature</span></span>|<span data-ttu-id="5ad1b-659">CUBE</span><span class="sxs-lookup"><span data-stu-id="5ad1b-659">CUBE</span></span>|<span data-ttu-id="5ad1b-660">在本机编译的存储过程中，`CUBE` 不能与 `GROUP BY` 子句一起使用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-660">`CUBE` cannot be used with `GROUP BY` clauses in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-661">`CUBE`从过程定义中删除。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-661">Remove `CUBE` from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-662">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-662">Feature</span></span>|<span data-ttu-id="5ad1b-663">GROUPING SETS</span><span class="sxs-lookup"><span data-stu-id="5ad1b-663">GROUPING SETS</span></span>|<span data-ttu-id="5ad1b-664">在本机编译的存储过程中，`GROUPING SETS` 不能与 `GROUP BY` 子句一起使用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-664">`GROUPING SETS` cannot be used with `GROUP BY` clauses in natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-665">`GROUPING SETS`从过程定义中删除。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-665">Remove `GROUPING SETS` from the procedure definition.</span></span>|  
|<span data-ttu-id="5ad1b-666">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-666">Feature</span></span>|<span data-ttu-id="5ad1b-667">BEGIN TRANSACTION、COMMIT TRANSACTION 和 ROLLBACK TRANSACTION</span><span class="sxs-lookup"><span data-stu-id="5ad1b-667">BEGIN TRANSACTION, COMMIT TRANSACTION, and ROLLBACK TRANSACTION</span></span>|<span data-ttu-id="5ad1b-668">使用 ATOMIC 块控制事务和错误处理。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-668">Use ATOMIC blocks to control transactions and error handling.</span></span> <span data-ttu-id="5ad1b-669">有关详细信息，请参阅 [Atomic Blocks](atomic-blocks-in-native-procedures.md)。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-669">For more information, see [Atomic Blocks](atomic-blocks-in-native-procedures.md).</span></span>|  
|<span data-ttu-id="5ad1b-670">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-670">Feature</span></span>|<span data-ttu-id="5ad1b-671">内联表变量声明。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-671">Inline table variable declarations.</span></span>|<span data-ttu-id="5ad1b-672">表变量必须引用显式定义的内存优化表类型。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-672">Table variables must reference explicitly defined memory-optimized table types.</span></span> <span data-ttu-id="5ad1b-673">应创建内存优化的表类型并将该类型用于变量声明，而不应在行内指定类型。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-673">You should create a memory-optimized table type and use that type for the variable declaration, rather than specifying the type inline.</span></span>|  
|<span data-ttu-id="5ad1b-674">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-674">Feature</span></span>|<span data-ttu-id="5ad1b-675">sp_recompile</span><span class="sxs-lookup"><span data-stu-id="5ad1b-675">sp_recompile</span></span>|<span data-ttu-id="5ad1b-676">不支持重新编译本机编译的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-676">Recompiling natively compiled stored procedures is not supported.</span></span> <span data-ttu-id="5ad1b-677">删除并重新创建过程。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-677">Drop and recreate the procedure.</span></span>|  
|<span data-ttu-id="5ad1b-678">功能</span><span class="sxs-lookup"><span data-stu-id="5ad1b-678">Feature</span></span>|<span data-ttu-id="5ad1b-679">EXECUTE AS CALLER</span><span class="sxs-lookup"><span data-stu-id="5ad1b-679">EXECUTE AS CALLER</span></span>|<span data-ttu-id="5ad1b-680">必须有 `EXECUTE AS` 子句。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-680">The `EXECUTE AS` clause is required.</span></span> <span data-ttu-id="5ad1b-681">但不支持 `EXECUTE AS CALLER`。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-681">But `EXECUTE AS CALLER` is not supported.</span></span> <span data-ttu-id="5ad1b-682">使用 `EXECUTE AS OWNER` 、 `EXECUTE AS` *用户*或 `EXECUTE AS SELF` 。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-682">Use `EXECUTE AS OWNER`, `EXECUTE AS`*user*, or `EXECUTE AS SELF`.</span></span>|  
|<span data-ttu-id="5ad1b-683">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-683">Feature</span></span>|<span data-ttu-id="5ad1b-684">基于磁盘的表</span><span class="sxs-lookup"><span data-stu-id="5ad1b-684">Disk-based tables</span></span>|<span data-ttu-id="5ad1b-685">无法从本机编译的存储过程中访问基于磁盘的表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-685">Disk-based tables cannot be accessed from natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-686">从本机编译的存储过程中删除对基于磁盘的表的引用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-686">Remove references to disk-based tables from the natively-compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-687">或者，将基于磁盘的表转换为内存优化的表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-687">Or, migrate the disk-based table(s) to memory optimized.</span></span>|  
|<span data-ttu-id="5ad1b-688">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-688">Feature</span></span>|<span data-ttu-id="5ad1b-689">视图</span><span class="sxs-lookup"><span data-stu-id="5ad1b-689">Views</span></span>|<span data-ttu-id="5ad1b-690">无法从本机编译的存储过程中访问视图。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-690">Views cannot be accessed from natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-691">不引用视图，改为引用底层基表。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-691">Instead of views, reference the underlying base tables.</span></span>|  
|<span data-ttu-id="5ad1b-692">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-692">Feature</span></span>|<span data-ttu-id="5ad1b-693">表值函数</span><span class="sxs-lookup"><span data-stu-id="5ad1b-693">Table valued functions</span></span>|<span data-ttu-id="5ad1b-694">无法从本机编译的存储过程中访问表值函数。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-694">Table-valued functions cannot be accessed from natively compiled stored procedures.</span></span> <span data-ttu-id="5ad1b-695">从本机编译的存储过程中删除对表值函数的引用。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-695">Remove references to table-valued functions from the natively compiled stored procedure.</span></span>|  
  
## <a name="transactions-that-access-memory-optimized-tables"></a><span data-ttu-id="5ad1b-696">访问内存优化表的事务</span><span class="sxs-lookup"><span data-stu-id="5ad1b-696">Transactions that Access Memory-Optimized Tables</span></span>  
 <span data-ttu-id="5ad1b-697">下表列出可在涉及访问内存优化表的事务错误消息文本中显示的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 功能和关键字，以及用于解决问题的更正操作。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-697">The following table lists the [!INCLUDE[tsql](../../includes/tsql-md.md)] features and keywords that can appear in the message text of an error involving transactions that access memory-optimized tables, as well as the corrective action to resolve the error.</span></span>  
  
|<span data-ttu-id="5ad1b-698">类型</span><span class="sxs-lookup"><span data-stu-id="5ad1b-698">Type</span></span>|<span data-ttu-id="5ad1b-699">名称</span><span class="sxs-lookup"><span data-stu-id="5ad1b-699">Name</span></span>|<span data-ttu-id="5ad1b-700">解决方法</span><span class="sxs-lookup"><span data-stu-id="5ad1b-700">Resolution</span></span>|  
|----------|----------|----------------|  
|<span data-ttu-id="5ad1b-701">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-701">Feature</span></span>|<span data-ttu-id="5ad1b-702">保存点</span><span class="sxs-lookup"><span data-stu-id="5ad1b-702">savepoint</span></span>|<span data-ttu-id="5ad1b-703">不支持在访问内存优化的表的事务中创建显式保存点。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-703">Creating explicit savepoints in transactions that access memory-optimized tables is not supported.</span></span>|  
|<span data-ttu-id="5ad1b-704">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-704">Feature</span></span>|<span data-ttu-id="5ad1b-705">绑定的事务</span><span class="sxs-lookup"><span data-stu-id="5ad1b-705">bound transaction</span></span>|<span data-ttu-id="5ad1b-706">绑定的会话不能参与访问内存优化的表的事务。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-706">Bound sessions cannot participate in transactions that access memory-optimized tables.</span></span> <span data-ttu-id="5ad1b-707">在执行过程前不要绑定会话。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-707">Do not bind the session before executing the procedure.</span></span>|  
|<span data-ttu-id="5ad1b-708">Feature</span><span class="sxs-lookup"><span data-stu-id="5ad1b-708">Feature</span></span>|<span data-ttu-id="5ad1b-709">DTC</span><span class="sxs-lookup"><span data-stu-id="5ad1b-709">DTC</span></span>|<span data-ttu-id="5ad1b-710">访问内存优化的表的事务不能是分布式事务。</span><span class="sxs-lookup"><span data-stu-id="5ad1b-710">Transactions that access memory-optimized tables cannot be distributed transactions.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="5ad1b-711">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5ad1b-711">See Also</span></span>  
 [<span data-ttu-id="5ad1b-712">迁移到内存中 OLTP</span><span class="sxs-lookup"><span data-stu-id="5ad1b-712">Migrating to In-Memory OLTP</span></span>](migrating-to-in-memory-oltp.md)  
  
  
