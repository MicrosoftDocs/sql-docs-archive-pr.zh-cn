---
title: Audit Broker Login 事件类 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
topic_type:
- apiref
helpviewer_keywords:
- Audit Broker Login event class
ms.assetid: af9b1153-2791-40ef-a95c-50923cd0cc97
author: stevestein
ms.author: sstein
ms.openlocfilehash: 200ef467f5c1fc64e4d5056cb60fc442ec998f77
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87689912"
---
# <a name="audit-broker-login-event-class"></a><span data-ttu-id="67b0e-102">Audit Broker Login 事件类</span><span class="sxs-lookup"><span data-stu-id="67b0e-102">Audit Broker Login Event Class</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="67b0e-103">创建 **Audit Broker Login** 事件以报告与 Service Broker 传输安全相关的审核消息。</span><span class="sxs-lookup"><span data-stu-id="67b0e-103">creates an **Audit Broker Login** event to report audit messages related to Service Broker transport security.</span></span>  
  
## <a name="audit-broker-login-event-class-data-columns"></a><span data-ttu-id="67b0e-104">Audit Broker Login 事件类的数据列</span><span class="sxs-lookup"><span data-stu-id="67b0e-104">Audit Broker Login Event Class Data Columns</span></span>  
  
|<span data-ttu-id="67b0e-105">数据列</span><span class="sxs-lookup"><span data-stu-id="67b0e-105">Data column</span></span>|<span data-ttu-id="67b0e-106">类型</span><span class="sxs-lookup"><span data-stu-id="67b0e-106">Type</span></span>|<span data-ttu-id="67b0e-107">说明</span><span class="sxs-lookup"><span data-stu-id="67b0e-107">Description</span></span>|<span data-ttu-id="67b0e-108">列号</span><span class="sxs-lookup"><span data-stu-id="67b0e-108">Column number</span></span>|<span data-ttu-id="67b0e-109">可筛选</span><span class="sxs-lookup"><span data-stu-id="67b0e-109">Filterable</span></span>|  
|-----------------|----------|-----------------|-------------------|----------------|  
|<span data-ttu-id="67b0e-110">ApplicationName </span><span class="sxs-lookup"><span data-stu-id="67b0e-110">**ApplicationName**</span></span>|<span data-ttu-id="67b0e-111">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-111">**nvarchar**</span></span>|<span data-ttu-id="67b0e-112">在此事件类中未使用。</span><span class="sxs-lookup"><span data-stu-id="67b0e-112">Unused in this event class.</span></span>|<span data-ttu-id="67b0e-113">10</span><span class="sxs-lookup"><span data-stu-id="67b0e-113">10</span></span>|<span data-ttu-id="67b0e-114">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-114">Yes</span></span>|  
|<span data-ttu-id="67b0e-115">**ClientProcessID**</span><span class="sxs-lookup"><span data-stu-id="67b0e-115">**ClientProcessID**</span></span>|<span data-ttu-id="67b0e-116">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-116">**int**</span></span>|<span data-ttu-id="67b0e-117">在此事件类中未使用。</span><span class="sxs-lookup"><span data-stu-id="67b0e-117">Unused in this event class.</span></span>|<span data-ttu-id="67b0e-118">9</span><span class="sxs-lookup"><span data-stu-id="67b0e-118">9</span></span>|<span data-ttu-id="67b0e-119">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-119">Yes</span></span>|  
|<span data-ttu-id="67b0e-120">**DatabaseID**</span><span class="sxs-lookup"><span data-stu-id="67b0e-120">**DatabaseID**</span></span>|<span data-ttu-id="67b0e-121">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-121">**int**</span></span>|[!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="67b0e-122">数据列而且服务器可用，则 **ServerName** 将显示数据库名。</span><span class="sxs-lookup"><span data-stu-id="67b0e-122">displays the name of the database if the **ServerName** data column is captured in the trace and the server is available.</span></span> <span data-ttu-id="67b0e-123">可使用 DB_ID 函数来确定数据库的值。</span><span class="sxs-lookup"><span data-stu-id="67b0e-123">Determine the value for a database by using the DB_ID function.</span></span>|<span data-ttu-id="67b0e-124">3</span><span class="sxs-lookup"><span data-stu-id="67b0e-124">3</span></span>|<span data-ttu-id="67b0e-125">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-125">Yes</span></span>|  
|<span data-ttu-id="67b0e-126">**EventClass**</span><span class="sxs-lookup"><span data-stu-id="67b0e-126">**EventClass**</span></span>|<span data-ttu-id="67b0e-127">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-127">**int**</span></span>|<span data-ttu-id="67b0e-128">捕获的事件类的类型。</span><span class="sxs-lookup"><span data-stu-id="67b0e-128">The type of event class captured.</span></span> <span data-ttu-id="67b0e-129">对于 **Audit Broker Login** 始终为 **159**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-129">Always **159** for **Audit Broker Login**.</span></span>|<span data-ttu-id="67b0e-130">27</span><span class="sxs-lookup"><span data-stu-id="67b0e-130">27</span></span>|<span data-ttu-id="67b0e-131">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-131">No</span></span>|  
|<span data-ttu-id="67b0e-132">**EventSequence**</span><span class="sxs-lookup"><span data-stu-id="67b0e-132">**EventSequence**</span></span>|<span data-ttu-id="67b0e-133">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-133">**int**</span></span>|<span data-ttu-id="67b0e-134">此事件的序列号。</span><span class="sxs-lookup"><span data-stu-id="67b0e-134">Sequence number for this event.</span></span>|<span data-ttu-id="67b0e-135">51</span><span class="sxs-lookup"><span data-stu-id="67b0e-135">51</span></span>|<span data-ttu-id="67b0e-136">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-136">No</span></span>|  
|<span data-ttu-id="67b0e-137">**EventSubClass**</span><span class="sxs-lookup"><span data-stu-id="67b0e-137">**EventSubClass**</span></span>|<span data-ttu-id="67b0e-138">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-138">**int**</span></span>|<span data-ttu-id="67b0e-139">事件子类的类型，提供有关每个事件类的进一步信息。</span><span class="sxs-lookup"><span data-stu-id="67b0e-139">The type of event subclass, providing further information about each event class.</span></span> <span data-ttu-id="67b0e-140">下表列出了此事件的事件子类值。</span><span class="sxs-lookup"><span data-stu-id="67b0e-140">The table below lists the event subclass values for this event.</span></span>|<span data-ttu-id="67b0e-141">21</span><span class="sxs-lookup"><span data-stu-id="67b0e-141">21</span></span>|<span data-ttu-id="67b0e-142">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-142">Yes</span></span>|  
|<span data-ttu-id="67b0e-143">**FileName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-143">**FileName**</span></span>|<span data-ttu-id="67b0e-144">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-144">**nvarchar**</span></span>|<span data-ttu-id="67b0e-145">远程 broker 身份验证级别。</span><span class="sxs-lookup"><span data-stu-id="67b0e-145">Remote broker authentication level.</span></span> <span data-ttu-id="67b0e-146">在远程 broker 端点上配置的支持的身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-146">Supported authentication method configured on the remote broker endpoint.</span></span> <span data-ttu-id="67b0e-147">如果有多种可用方法，则接受（目标）端点将确定先试用哪种方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-147">When more than one method is available, the accepting (target) endpoint determines which method is tried first.</span></span> <span data-ttu-id="67b0e-148">可能的值包括：</span><span class="sxs-lookup"><span data-stu-id="67b0e-148">Possible values are:</span></span><br /><br /> <span data-ttu-id="67b0e-149">**无**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-149">**None**.</span></span> <span data-ttu-id="67b0e-150">未配置任何身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-150">No authentication method is configured.</span></span><br /><br /> <span data-ttu-id="67b0e-151">**NTLM**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-151">**NTLM**.</span></span> <span data-ttu-id="67b0e-152">要求使用 NTLM 身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-152">Requires NTLM authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-153">**KERBEROS**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-153">**KERBEROS**.</span></span> <span data-ttu-id="67b0e-154">要求使用 Kerberos 身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-154">Requires Kerberos authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-155">**NEGOTIATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-155">**NEGOTIATE**.</span></span> <span data-ttu-id="67b0e-156">由 Windows 协商身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-156">Windows negotiates the authentication method.</span></span><br /><br /> <span data-ttu-id="67b0e-157">**CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-157">**CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-158">要求使用为端点配置的证书，该证书存储在 **master** 数据库中。</span><span class="sxs-lookup"><span data-stu-id="67b0e-158">Requires the certificate configured for the endpoint, which is stored in the **master** database.</span></span><br /><br /> <span data-ttu-id="67b0e-159">**NTLM、CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-159">**NTLM, CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-160">接受 NTLM 或 SSL 证书身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-160">Accepts NTLM or SSL certificate authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-161">**KERBEROS、CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-161">**KERBEROS, CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-162">接受 Kerberos 或端点证书身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-162">Accepts Kerberos or the endpoint certificate authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-163">**NEGOTIATE、CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-163">**NEGOTIATE, CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-164">由 Windows 协商身份验证方法，或者使用端点证书进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-164">Windows negotiates the authentication method or an endpoint certificate can be used for authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-165">**CERTIFICATE、NTLM**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-165">**CERTIFICATE, NTLM**.</span></span> <span data-ttu-id="67b0e-166">使用端点证书或 NTLM 进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-166">Accepts an endpoint certificate or NTLM for authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-167">**CERTIFICATE、KERBEROS**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-167">**CERTIFICATE, KERBEROS**.</span></span> <span data-ttu-id="67b0e-168">使用端点证书或 Kerberos 进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-168">Accepts an endpoint certificate or Kerberos for authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-169">**CERTIFICATE、NEGOTIATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-169">**CERTIFICATE, NEGOTIATE**.</span></span> <span data-ttu-id="67b0e-170">接受端点证书进行身份验证，或由 Windows 协商身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-170">Accepts an endpoint certificate for authentication or Windows negotiates the authentication method..</span></span>|<span data-ttu-id="67b0e-171">36</span><span class="sxs-lookup"><span data-stu-id="67b0e-171">36</span></span>|<span data-ttu-id="67b0e-172">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-172">No</span></span>|  
|<span data-ttu-id="67b0e-173">**HostName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-173">**HostName**</span></span>|<span data-ttu-id="67b0e-174">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-174">**nvarchar**</span></span>|<span data-ttu-id="67b0e-175">在此事件类中未使用。</span><span class="sxs-lookup"><span data-stu-id="67b0e-175">Unused in this event class.</span></span>|<span data-ttu-id="67b0e-176">8</span><span class="sxs-lookup"><span data-stu-id="67b0e-176">8</span></span>|<span data-ttu-id="67b0e-177">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-177">Yes</span></span>|  
|<span data-ttu-id="67b0e-178">**IsSystem**</span><span class="sxs-lookup"><span data-stu-id="67b0e-178">**IsSystem**</span></span>|<span data-ttu-id="67b0e-179">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-179">**int**</span></span>|<span data-ttu-id="67b0e-180">指示事件是发生在系统进程中还是发生在用户进程中。</span><span class="sxs-lookup"><span data-stu-id="67b0e-180">Indicates whether the event occurred on a system process or a user process.</span></span> <span data-ttu-id="67b0e-181">1 = 系统，0 = 用户。</span><span class="sxs-lookup"><span data-stu-id="67b0e-181">1 = system, 0 = user.</span></span>|<span data-ttu-id="67b0e-182">60</span><span class="sxs-lookup"><span data-stu-id="67b0e-182">60</span></span>|<span data-ttu-id="67b0e-183">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-183">No</span></span>|  
|<span data-ttu-id="67b0e-184">**LoginSid**</span><span class="sxs-lookup"><span data-stu-id="67b0e-184">**LoginSid**</span></span>|<span data-ttu-id="67b0e-185">**图像**</span><span class="sxs-lookup"><span data-stu-id="67b0e-185">**image**</span></span>|<span data-ttu-id="67b0e-186">已登录用户的安全标识号 (SID)。</span><span class="sxs-lookup"><span data-stu-id="67b0e-186">The security identification number (SID) of the logged-in user.</span></span> <span data-ttu-id="67b0e-187">服务器中的每个登录名都具有唯一的 SID。</span><span class="sxs-lookup"><span data-stu-id="67b0e-187">Each SID is unique for each login in the server.</span></span>|<span data-ttu-id="67b0e-188">41</span><span class="sxs-lookup"><span data-stu-id="67b0e-188">41</span></span>|<span data-ttu-id="67b0e-189">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-189">Yes</span></span>|  
|<span data-ttu-id="67b0e-190">**NTDomainName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-190">**NTDomainName**</span></span>|<span data-ttu-id="67b0e-191">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-191">**nvarchar**</span></span>|<span data-ttu-id="67b0e-192">用户所属的 Windows 域。</span><span class="sxs-lookup"><span data-stu-id="67b0e-192">The Windows domain to which the user belongs.</span></span>|<span data-ttu-id="67b0e-193">7</span><span class="sxs-lookup"><span data-stu-id="67b0e-193">7</span></span>|<span data-ttu-id="67b0e-194">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-194">Yes</span></span>|  
|<span data-ttu-id="67b0e-195">**NTUserName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-195">**NTUserName**</span></span>|<span data-ttu-id="67b0e-196">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-196">**nvarchar**</span></span>|<span data-ttu-id="67b0e-197">拥有生成此事件的连接的用户的名称。</span><span class="sxs-lookup"><span data-stu-id="67b0e-197">The name of the user that owns the connection that generated this event.</span></span>|<span data-ttu-id="67b0e-198">6</span><span class="sxs-lookup"><span data-stu-id="67b0e-198">6</span></span>|<span data-ttu-id="67b0e-199">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-199">Yes</span></span>|  
|<span data-ttu-id="67b0e-200">**ObjectName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-200">**ObjectName**</span></span>|<span data-ttu-id="67b0e-201">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-201">**nvarchar**</span></span>|<span data-ttu-id="67b0e-202">用于此连接的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="67b0e-202">The connect string used for this connection.</span></span>|<span data-ttu-id="67b0e-203">34</span><span class="sxs-lookup"><span data-stu-id="67b0e-203">34</span></span>|<span data-ttu-id="67b0e-204">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-204">No</span></span>|  
|<span data-ttu-id="67b0e-205">**OwnerName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-205">**OwnerName**</span></span>|<span data-ttu-id="67b0e-206">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-206">**nvarchar**</span></span>|<span data-ttu-id="67b0e-207">在本地 broker 端点上配置的所支持的身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-207">Supported authentication method configured on the local broker endpoint.</span></span> <span data-ttu-id="67b0e-208">如果有多种可用方法，则接受（目标）端点将确定先试用哪种方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-208">When more than one method is available, the accepting (target) endpoint determines which method is tried first.</span></span> <span data-ttu-id="67b0e-209">可能的值包括：</span><span class="sxs-lookup"><span data-stu-id="67b0e-209">Possible values are:</span></span><br /><br /> <span data-ttu-id="67b0e-210">**无**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-210">**None**.</span></span> <span data-ttu-id="67b0e-211">未配置任何身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-211">No authentication method is configured.</span></span><br /><br /> <span data-ttu-id="67b0e-212">**NTLM**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-212">**NTLM**.</span></span> <span data-ttu-id="67b0e-213">要求使用 NTLM 身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-213">Requires NTLM authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-214">**KERBEROS**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-214">**KERBEROS**.</span></span> <span data-ttu-id="67b0e-215">要求使用 Kerberos 身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-215">Requires Kerberos authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-216">**NEGOTIATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-216">**NEGOTIATE**.</span></span> <span data-ttu-id="67b0e-217">由 Windows 协商身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-217">Windows negotiates the authentication method.</span></span><br /><br /> <span data-ttu-id="67b0e-218">**CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-218">**CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-219">要求使用为端点配置的证书，该证书存储在 **master** 数据库中。</span><span class="sxs-lookup"><span data-stu-id="67b0e-219">Requires the certificate configured for the endpoint, which is stored in the **master** database.</span></span><br /><br /> <span data-ttu-id="67b0e-220">**NTLM、CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-220">**NTLM, CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-221">接受 NTLM 或 SSL 证书身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-221">Accepts NTLM or SSL certificate authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-222">**KERBEROS、CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-222">**KERBEROS, CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-223">接受 Kerberos 或端点证书身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-223">Accepts Kerberos or the endpoint certificate authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-224">**NEGOTIATE、CERTIFICATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-224">**NEGOTIATE, CERTIFICATE**.</span></span> <span data-ttu-id="67b0e-225">由 Windows 协商身份验证方法，或者使用端点证书进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-225">Windows negotiates the authentication method or an endpoint certificate can be used for authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-226">**CERTIFICATE、NTLM**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-226">**CERTIFICATE, NTLM**.</span></span> <span data-ttu-id="67b0e-227">接受端点证书或 NTLM 身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-227">Accepts an endpoint certificate or for NTLM authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-228">**CERTIFICATE、KERBEROS**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-228">**CERTIFICATE, KERBEROS**.</span></span> <span data-ttu-id="67b0e-229">使用端点证书或 Kerberos 进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-229">Accepts an endpoint certificate or Kerberos for authentication.</span></span><br /><br /> <span data-ttu-id="67b0e-230">**CERTIFICATE、NEGOTIATE**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-230">**CERTIFICATE, NEGOTIATE**.</span></span> <span data-ttu-id="67b0e-231">接受端点证书进行身份验证，或由 Windows 协商身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-231">Accepts an endpoint certificate for authentication or Windows negotiates the authentication method..</span></span>|<span data-ttu-id="67b0e-232">37</span><span class="sxs-lookup"><span data-stu-id="67b0e-232">37</span></span>|<span data-ttu-id="67b0e-233">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-233">No</span></span>|  
|<span data-ttu-id="67b0e-234">**ProviderName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-234">**ProviderName**</span></span>|<span data-ttu-id="67b0e-235">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-235">**nvarchar**</span></span>|<span data-ttu-id="67b0e-236">用于此连接的身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="67b0e-236">The authentication method used for this connection</span></span>|<span data-ttu-id="67b0e-237">46</span><span class="sxs-lookup"><span data-stu-id="67b0e-237">46</span></span>|<span data-ttu-id="67b0e-238">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-238">No</span></span>|  
|<span data-ttu-id="67b0e-239">**RoleName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-239">**RoleName**</span></span>|<span data-ttu-id="67b0e-240">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-240">**nvarchar**</span></span>|<span data-ttu-id="67b0e-241">连接的角色。</span><span class="sxs-lookup"><span data-stu-id="67b0e-241">The role of the connection.</span></span> <span data-ttu-id="67b0e-242">这可以是 **initiator** 或 **target**。</span><span class="sxs-lookup"><span data-stu-id="67b0e-242">This is either **initiator** or **target**.</span></span>|<span data-ttu-id="67b0e-243">38</span><span class="sxs-lookup"><span data-stu-id="67b0e-243">38</span></span>|<span data-ttu-id="67b0e-244">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-244">No</span></span>|  
|<span data-ttu-id="67b0e-245">**ServerName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-245">**ServerName**</span></span>|<span data-ttu-id="67b0e-246">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-246">**nvarchar**</span></span>|<span data-ttu-id="67b0e-247">正被跟踪的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="67b0e-247">The name of the instance of SQL Server being traced.</span></span>|<span data-ttu-id="67b0e-248">26</span><span class="sxs-lookup"><span data-stu-id="67b0e-248">26</span></span>|<span data-ttu-id="67b0e-249">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-249">No</span></span>|  
|<span data-ttu-id="67b0e-250">**SPID**</span><span class="sxs-lookup"><span data-stu-id="67b0e-250">**SPID**</span></span>|<span data-ttu-id="67b0e-251">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-251">**int**</span></span>|<span data-ttu-id="67b0e-252">SQL Server 为与客户端相关联的进程分配的服务器进程 ID。</span><span class="sxs-lookup"><span data-stu-id="67b0e-252">The server process ID assigned by SQL Server to the process associated with the client.</span></span>|<span data-ttu-id="67b0e-253">12</span><span class="sxs-lookup"><span data-stu-id="67b0e-253">12</span></span>|<span data-ttu-id="67b0e-254">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-254">Yes</span></span>|  
|<span data-ttu-id="67b0e-255">**StartTime**</span><span class="sxs-lookup"><span data-stu-id="67b0e-255">**StartTime**</span></span>|<span data-ttu-id="67b0e-256">**datetime**</span><span class="sxs-lookup"><span data-stu-id="67b0e-256">**datetime**</span></span>|<span data-ttu-id="67b0e-257">事件（如果有）的开始时间。</span><span class="sxs-lookup"><span data-stu-id="67b0e-257">The time at which the event started, when available.</span></span>|<span data-ttu-id="67b0e-258">14</span><span class="sxs-lookup"><span data-stu-id="67b0e-258">14</span></span>|<span data-ttu-id="67b0e-259">是</span><span class="sxs-lookup"><span data-stu-id="67b0e-259">Yes</span></span>|  
|<span data-ttu-id="67b0e-260">**State**</span><span class="sxs-lookup"><span data-stu-id="67b0e-260">**State**</span></span>|<span data-ttu-id="67b0e-261">**int**</span><span class="sxs-lookup"><span data-stu-id="67b0e-261">**int**</span></span>|<span data-ttu-id="67b0e-262">指示 SQL Server 源代码中生成该事件的位置。</span><span class="sxs-lookup"><span data-stu-id="67b0e-262">Indicates the location within the SQL Server source code that produced the event.</span></span> <span data-ttu-id="67b0e-263">可能生成此事件的每个位置都有不同的状态代码。</span><span class="sxs-lookup"><span data-stu-id="67b0e-263">Each location that may produce this event has a different state code.</span></span> <span data-ttu-id="67b0e-264">Microsoft 支持工程师可使用此状态代码查找生成该事件的位置。</span><span class="sxs-lookup"><span data-stu-id="67b0e-264">A Microsoft support engineer can use this state code to find where the event was produced.</span></span>|<span data-ttu-id="67b0e-265">30</span><span class="sxs-lookup"><span data-stu-id="67b0e-265">30</span></span>|<span data-ttu-id="67b0e-266">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-266">No</span></span>|  
|<span data-ttu-id="67b0e-267">**TargetUserName**</span><span class="sxs-lookup"><span data-stu-id="67b0e-267">**TargetUserName**</span></span>|<span data-ttu-id="67b0e-268">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="67b0e-268">**nvarchar**</span></span>|<span data-ttu-id="67b0e-269">登录状态。</span><span class="sxs-lookup"><span data-stu-id="67b0e-269">Login state.</span></span> <span data-ttu-id="67b0e-270">即以下函数之一：</span><span class="sxs-lookup"><span data-stu-id="67b0e-270">One of:</span></span><br /><br /> <span data-ttu-id="67b0e-271">INITIAL</span><span class="sxs-lookup"><span data-stu-id="67b0e-271">INITIAL</span></span><br /><br /> <span data-ttu-id="67b0e-272">WAIT LOGIN NEGOTIATE</span><span class="sxs-lookup"><span data-stu-id="67b0e-272">WAIT LOGIN NEGOTIATE</span></span><br /><br /> <span data-ttu-id="67b0e-273">ONE ISC</span><span class="sxs-lookup"><span data-stu-id="67b0e-273">ONE ISC</span></span><br /><br /> <span data-ttu-id="67b0e-274">ONE ASC</span><span class="sxs-lookup"><span data-stu-id="67b0e-274">ONE ASC</span></span><br /><br /> <span data-ttu-id="67b0e-275">TWO ISC</span><span class="sxs-lookup"><span data-stu-id="67b0e-275">TWO ISC</span></span><br /><br /> <span data-ttu-id="67b0e-276">TWO ASC</span><span class="sxs-lookup"><span data-stu-id="67b0e-276">TWO ASC</span></span><br /><br /> <span data-ttu-id="67b0e-277">WAIT ISC Confirm</span><span class="sxs-lookup"><span data-stu-id="67b0e-277">WAIT ISC Confirm</span></span><br /><br /> <span data-ttu-id="67b0e-278">WAIT ASC Confirm</span><span class="sxs-lookup"><span data-stu-id="67b0e-278">WAIT ASC Confirm</span></span><br /><br /> <span data-ttu-id="67b0e-279">WAIT REJECT</span><span class="sxs-lookup"><span data-stu-id="67b0e-279">WAIT REJECT</span></span><br /><br /> <span data-ttu-id="67b0e-280">WAIT PRE-MASTER SECRET</span><span class="sxs-lookup"><span data-stu-id="67b0e-280">WAIT PRE-MASTER SECRET</span></span><br /><br /> <span data-ttu-id="67b0e-281">WAIT VALIDATION</span><span class="sxs-lookup"><span data-stu-id="67b0e-281">WAIT VALIDATION</span></span><br /><br /> <span data-ttu-id="67b0e-282">WAIT ARBITRATION</span><span class="sxs-lookup"><span data-stu-id="67b0e-282">WAIT ARBITRATION</span></span><br /><br /> <span data-ttu-id="67b0e-283">ONLINE</span><span class="sxs-lookup"><span data-stu-id="67b0e-283">ONLINE</span></span><br /><br /> <span data-ttu-id="67b0e-284">ERROR</span><span class="sxs-lookup"><span data-stu-id="67b0e-284">ERROR</span></span><br /><br /> <span data-ttu-id="67b0e-285">**注意**ISC = 启动安全上下文。</span><span class="sxs-lookup"><span data-stu-id="67b0e-285">**Note** ISC = Initiate Security Context.</span></span> <span data-ttu-id="67b0e-286">ASC = 接受安全上下文</span><span class="sxs-lookup"><span data-stu-id="67b0e-286">ASC = Accept Security Context</span></span>|<span data-ttu-id="67b0e-287">39</span><span class="sxs-lookup"><span data-stu-id="67b0e-287">39</span></span>|<span data-ttu-id="67b0e-288">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-288">No</span></span>|  
|<span data-ttu-id="67b0e-289">**TransactionID**</span><span class="sxs-lookup"><span data-stu-id="67b0e-289">**TransactionID**</span></span>|<span data-ttu-id="67b0e-290">**bigint**</span><span class="sxs-lookup"><span data-stu-id="67b0e-290">**bigint**</span></span>|<span data-ttu-id="67b0e-291">系统为事务分配的 ID。</span><span class="sxs-lookup"><span data-stu-id="67b0e-291">The system-assigned ID of the transaction.</span></span>|<span data-ttu-id="67b0e-292">4</span><span class="sxs-lookup"><span data-stu-id="67b0e-292">4</span></span>|<span data-ttu-id="67b0e-293">否</span><span class="sxs-lookup"><span data-stu-id="67b0e-293">No</span></span>|  
  
 <span data-ttu-id="67b0e-294">下表列出了此事件类的子类值。</span><span class="sxs-lookup"><span data-stu-id="67b0e-294">The table below lists the subclass values for this event class.</span></span>  
  
|<span data-ttu-id="67b0e-295">ID</span><span class="sxs-lookup"><span data-stu-id="67b0e-295">ID</span></span>|<span data-ttu-id="67b0e-296">子类</span><span class="sxs-lookup"><span data-stu-id="67b0e-296">Subclass</span></span>|<span data-ttu-id="67b0e-297">说明</span><span class="sxs-lookup"><span data-stu-id="67b0e-297">Description</span></span>|  
|--------|--------------|-----------------|  
|<span data-ttu-id="67b0e-298">1</span><span class="sxs-lookup"><span data-stu-id="67b0e-298">1</span></span>|<span data-ttu-id="67b0e-299">Login Success</span><span class="sxs-lookup"><span data-stu-id="67b0e-299">Login Success</span></span>|<span data-ttu-id="67b0e-300">Login Success 事件报告相邻的 broker 登录进程已经成功完成。</span><span class="sxs-lookup"><span data-stu-id="67b0e-300">A Login Success event reports that the adjacent broker login process has finished successfully.</span></span>|  
|<span data-ttu-id="67b0e-301">2</span><span class="sxs-lookup"><span data-stu-id="67b0e-301">2</span></span>|<span data-ttu-id="67b0e-302">Login Protocol Error</span><span class="sxs-lookup"><span data-stu-id="67b0e-302">Login Protocol Error</span></span>|<span data-ttu-id="67b0e-303">Login Protocol Error 事件报告 broker 接收到一个消息，该消息格式正确但对于登录进程的当前状态无效。</span><span class="sxs-lookup"><span data-stu-id="67b0e-303">A Login Protocol Error event reports that the broker receives a message that is well-formed but not valid for the current state of the of the login process.</span></span> <span data-ttu-id="67b0e-304">消息可能已丢失，或未按顺序发送。</span><span class="sxs-lookup"><span data-stu-id="67b0e-304">The message may have been lost or sent out-of-sequence.</span></span>|  
|<span data-ttu-id="67b0e-305">3</span><span class="sxs-lookup"><span data-stu-id="67b0e-305">3</span></span>|<span data-ttu-id="67b0e-306">Message Format Error</span><span class="sxs-lookup"><span data-stu-id="67b0e-306">Message Format Error</span></span>|<span data-ttu-id="67b0e-307">Message Format Error 事件报告 broker 收到一条与所需格式不匹配的消息。</span><span class="sxs-lookup"><span data-stu-id="67b0e-307">A Message Format Error event reports that the broker received a message that does not match the expected format.</span></span> <span data-ttu-id="67b0e-308">该消息可能已损坏，或者 SQL Server 之外的某个程序可能正将消息发送到 Service Broker 使用的端口。</span><span class="sxs-lookup"><span data-stu-id="67b0e-308">The message may have been corrupted, or a program other than SQL Server may be sending messages to the port that Service Broker uses.</span></span>|  
|<span data-ttu-id="67b0e-309">4</span><span class="sxs-lookup"><span data-stu-id="67b0e-309">4</span></span>|<span data-ttu-id="67b0e-310">Negotiate Failure</span><span class="sxs-lookup"><span data-stu-id="67b0e-310">Negotiate Failure</span></span>|<span data-ttu-id="67b0e-311">Negotiate Failure 事件报告本地 broker 和远程 broker 支持身份验证的互斥级别。</span><span class="sxs-lookup"><span data-stu-id="67b0e-311">A Negotiate Failure event reports that the local broker and the remote broker support mutually exclusive levels of authentication.</span></span>|  
|<span data-ttu-id="67b0e-312">5</span><span class="sxs-lookup"><span data-stu-id="67b0e-312">5</span></span>|<span data-ttu-id="67b0e-313">Authentication Failure</span><span class="sxs-lookup"><span data-stu-id="67b0e-313">Authentication Failure</span></span>|<span data-ttu-id="67b0e-314">Authentication Failure 事件报告由于错误 Service Broker 无法对连接执行身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-314">An Authentication Failure event reports that Service Broker cannot perform authentication for the connection due to an error.</span></span> <span data-ttu-id="67b0e-315">对于 Windows 身份验证，此事件报告 Service Broker 无法使用 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-315">For Windows Authentication, this event reports that Service Broker is unable to use Windows Authentication.</span></span> <span data-ttu-id="67b0e-316">对于基于证书的身份验证，此事件报告 Service Broker 无法访问证书。</span><span class="sxs-lookup"><span data-stu-id="67b0e-316">For certificate-based authentication, this event reports that Service Broker is unable to access the certificate.</span></span>|  
|<span data-ttu-id="67b0e-317">6</span><span class="sxs-lookup"><span data-stu-id="67b0e-317">6</span></span>|<span data-ttu-id="67b0e-318">授权失败</span><span class="sxs-lookup"><span data-stu-id="67b0e-318">Authorization Failure</span></span>|<span data-ttu-id="67b0e-319">Authorization Failure 事件报告 Service Broker 已拒绝连接的身份验证。</span><span class="sxs-lookup"><span data-stu-id="67b0e-319">An Authorization Failure event reports that Service Broker denied authorization for the connection.</span></span> <span data-ttu-id="67b0e-320">对于 Windows 身份验证，此事件报告连接的安全标识符与数据库用户不匹配。</span><span class="sxs-lookup"><span data-stu-id="67b0e-320">For Windows Authentication, this event reports that the security identifier for the connection does not match a database user.</span></span> <span data-ttu-id="67b0e-321">对于基于证书的身份验证，此事件报告在消息中传递的公钥并不响应数据库中的证书。</span><span class="sxs-lookup"><span data-stu-id="67b0e-321">For certificate-based authentication, this event reports that the public key delivered in the message does not correspond to a certificate in the database.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="67b0e-322">另请参阅</span><span class="sxs-lookup"><span data-stu-id="67b0e-322">See Also</span></span>  
 <span data-ttu-id="67b0e-323">[CREATE ENDPOINT (Transact-SQL)](/sql/t-sql/statements/create-endpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="67b0e-323">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span></span>  
 <span data-ttu-id="67b0e-324">[ALTER ENDPOINT (Transact-SQL)](/sql/t-sql/statements/alter-endpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="67b0e-324">[ALTER ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-endpoint-transact-sql) </span></span>  
 [<span data-ttu-id="67b0e-325">SQL Server Service Broker</span><span class="sxs-lookup"><span data-stu-id="67b0e-325">SQL Server Service Broker</span></span>](../../database-engine/configure-windows/sql-server-service-broker.md)  
  
  
