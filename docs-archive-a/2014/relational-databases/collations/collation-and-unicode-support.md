---
title: 排序规则和 Unicode 支持 | Microsoft Docs
ms.custom: ''
ms.date: 10/18/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- binary collations [SQL Server]
- expression-level collations [SQL Server]
- Windows collations [SQL Server]
- globalization [SQL Server], about globalization
- supplementary character support
- code pages [SQL Server], about code pages
- collations [SQL Server], about collations
- Unicode [SQL Server], collations
- database-level collations [SQL Server]
- reading order
- column-level collations
- locales [SQL Server], about locales
- locales [SQL Server]
- code pages [SQL Server]
- SQL Server collations
- server-level collations [SQL Server]
ms.assetid: 92d34f48-fa2b-47c5-89d3-a4c39b0f39eb
author: stevestein
ms.author: sstein
ms.openlocfilehash: a9a7c6c48229aa827aaed178e5ed4448c20431b9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87591403"
---
# <a name="collation-and-unicode-support"></a><span data-ttu-id="ae690-102">Collation and Unicode Support</span><span class="sxs-lookup"><span data-stu-id="ae690-102">Collation and Unicode Support</span></span>
  <span data-ttu-id="ae690-103">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中的排序规则可为您的数据提供排序规则、区分大小写属性和区分重音属性。</span><span class="sxs-lookup"><span data-stu-id="ae690-103">Collations in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provide sorting rules, case, and accent sensitivity properties for your data.</span></span> <span data-ttu-id="ae690-104">与诸如 `char` 和 `varchar` 等字符数据类型一起使用的排序规则规定可表示该数据类型的代码页和对应字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-104">Collations that are used with character data types such as `char` and `varchar` dictate the code page and corresponding characters that can be represented for that data type.</span></span> <span data-ttu-id="ae690-105">无论您是要安装 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的新实例，还原数据库备份，还是将服务器连接到客户端数据库，都必须了解您要处理的数据的区域设置要求、排序顺序以及是否区分大小写和重音。</span><span class="sxs-lookup"><span data-stu-id="ae690-105">Whether you are installing a new instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], restoring a database backup, or connecting server to client databases, it is important that you understand the locale requirements, sorting order, and case and accent sensitivity of the data that you will be working with.</span></span> <span data-ttu-id="ae690-106">若要列出在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的实例上可用的排序规则，请参阅 [sys。fn_helpcollations &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-helpcollations-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="ae690-106">To list the collations available on your instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [sys.fn_helpcollations &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-helpcollations-transact-sql).</span></span>  
  
 <span data-ttu-id="ae690-107">在为您的服务器、数据库、列或表达式选择排序规则时，也在向您的数据分配某些特征，这些特征将会影响数据库中许多操作的结果。</span><span class="sxs-lookup"><span data-stu-id="ae690-107">When you select a collation for your server, database, column, or expression, you are assigning certain characteristics to your data that will affect the results of many operations in the database.</span></span> <span data-ttu-id="ae690-108">例如，使用 ORDER BY 构造查询时，结果集的排序顺序可能取决于应用于该数据库的排序规则或 COLLATE 子句中在查询的表达式级别规定的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-108">For example, when you construct a query by using ORDER BY, the sort order of your result set might depend on the collation that is applied to the database or dictated in a COLLATE clause at the expression level of the query.</span></span>  
  
 <span data-ttu-id="ae690-109">为了充分利用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中的排序规则支持，您必须了解本主题中所定义的术语以及这些术语与您的数据的特征之间的关系。</span><span class="sxs-lookup"><span data-stu-id="ae690-109">To best use collation support in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must understand the terms that are defined in this topic, and how they relate to the characteristics of your data.</span></span>  
  
  
###  <a name="collation"></a><a name="Collation_Defn"></a> <span data-ttu-id="ae690-110">排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-110">Collation</span></span>  
 <span data-ttu-id="ae690-111">排序规则指定表示数据集中每个字符的位模式。</span><span class="sxs-lookup"><span data-stu-id="ae690-111">A collation specifies the bit patterns that represent each character in a data set.</span></span> <span data-ttu-id="ae690-112">排序规则还确定数据的排序和比较规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-112">Collations also determine the rules that sort and compare data.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae690-113">支持在单个数据库中存储具有不同排序规则的对象。</span><span class="sxs-lookup"><span data-stu-id="ae690-113">supports storing objects that have different collations in a single database.</span></span> <span data-ttu-id="ae690-114">对于非 Unicode 列，排序规则设置指定数据的代码页以及可以表示哪些字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-114">For non-Unicode columns, the collation setting specifies the code page for the data and which characters can be represented.</span></span> <span data-ttu-id="ae690-115">必须将在非 Unicode 列间移动的数据从源代码页转换到目标代码页。</span><span class="sxs-lookup"><span data-stu-id="ae690-115">Data that is moved between non-Unicode columns must be converted from the source code page to the destination code page.</span></span>  
  
 <span data-ttu-id="ae690-116">当[!INCLUDE[tsql](../../includes/tsql-md.md)] 语句在具有不同排序规则设置的不同数据库上下文中运行时，其运行结果可能会不同。</span><span class="sxs-lookup"><span data-stu-id="ae690-116">[!INCLUDE[tsql](../../includes/tsql-md.md)] statement results can vary when the statement is run in the context of different databases that have different collation settings.</span></span> <span data-ttu-id="ae690-117">如果可能，请为您的组织使用标准化排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-117">If it is possible, use a standardized collation for your organization.</span></span> <span data-ttu-id="ae690-118">这样就不必显式指定每个字符或 Unicode 表达式中的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-118">This way, you do not have to explicitly specify the collation in every character or Unicode expression.</span></span> <span data-ttu-id="ae690-119">如果必须使用具有不同排序规则和代码页设置的对象，请对查询进行编码，以考虑排序规则的优先顺序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-119">If you must work with objects that have different collation and code page settings, code your queries to consider the rules of collation precedence.</span></span> <span data-ttu-id="ae690-120">有关详细信息，请参阅 [排序规则优先顺序 (Transact-SQL)](/sql/t-sql/statements/collation-precedence-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="ae690-120">For more information, see [Collation Precedence (Transact-SQL)](/sql/t-sql/statements/collation-precedence-transact-sql).</span></span>  
  
 <span data-ttu-id="ae690-121">与排序规则关联的选项是区分大小写、区分重音、区分假名以及区分全半角。</span><span class="sxs-lookup"><span data-stu-id="ae690-121">The options associated with a collation are case sensitivity, accent sensitivity, Kana-sensitivity, width sensitivity.</span></span> <span data-ttu-id="ae690-122">指定这些选项的方法是将它们追加到排序规则名称。</span><span class="sxs-lookup"><span data-stu-id="ae690-122">These options are specified by appending them to the collation name.</span></span> <span data-ttu-id="ae690-123">例如，排序规则 `Japanese_Bushu_Kakusu_100_CS_AS_KS_WS` 区分大小写、区分重音、区分假名以及区分全半角。</span><span class="sxs-lookup"><span data-stu-id="ae690-123">For example, this collation `Japanese_Bushu_Kakusu_100_CS_AS_KS_WS` is case-sensitive, accent-sensitive, Kana-sensitive, and width-sensitive.</span></span> <span data-ttu-id="ae690-124">下表描述了与这些选项关联的行为。</span><span class="sxs-lookup"><span data-stu-id="ae690-124">The following table describes the behavior associated with these options.</span></span>  
  
|<span data-ttu-id="ae690-125">选项</span><span class="sxs-lookup"><span data-stu-id="ae690-125">Option</span></span>|<span data-ttu-id="ae690-126">说明</span><span class="sxs-lookup"><span data-stu-id="ae690-126">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="ae690-127">区分大小写 (_CS)</span><span class="sxs-lookup"><span data-stu-id="ae690-127">Case-sensitive (_CS)</span></span>|<span data-ttu-id="ae690-128">区分大写字母和小写字母。</span><span class="sxs-lookup"><span data-stu-id="ae690-128">Distinguishes between uppercase and lowercase letters.</span></span> <span data-ttu-id="ae690-129">如果选择此项，排序时小写字母将在其对应的大写字母之前。</span><span class="sxs-lookup"><span data-stu-id="ae690-129">If selected, lowercase letters sort ahead of their uppercase versions.</span></span> <span data-ttu-id="ae690-130">如果不选择此选项，则排序规则将不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="ae690-130">If this option is not selected, the collation will be case-insensitive.</span></span> <span data-ttu-id="ae690-131">即 SQL Server 在排序时将大写字母和小写字母视为相同。</span><span class="sxs-lookup"><span data-stu-id="ae690-131">That is, SQL Server considers the uppercase and lowercase versions of letters to be identical for sorting purposes.</span></span> <span data-ttu-id="ae690-132">通过指定 _CI，可以显式选择不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="ae690-132">You can explicitly select case insensitivity by specifying _CI.</span></span>|  
|<span data-ttu-id="ae690-133">区分重音 (_AS)</span><span class="sxs-lookup"><span data-stu-id="ae690-133">Accent-sensitive (_AS)</span></span>|<span data-ttu-id="ae690-134">区分重音字符和非重音字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-134">Distinguishes between accented and unaccented characters.</span></span> <span data-ttu-id="ae690-135">例如，"a" 不等于 "&#x1EA5;"。</span><span class="sxs-lookup"><span data-stu-id="ae690-135">For example, 'a' is not equal to '&#x1EA5;'.</span></span> <span data-ttu-id="ae690-136">如果未选择此选项，则排序规则将不区分重音。</span><span class="sxs-lookup"><span data-stu-id="ae690-136">If this option is not selected, the collation will be accent-insensitive.</span></span> <span data-ttu-id="ae690-137">即 SQL Server 在排序时将重音字符和非重音字符视为相同。</span><span class="sxs-lookup"><span data-stu-id="ae690-137">That is, SQL Server considers the accented and unaccented versions of letters to be identical for sorting purposes.</span></span> <span data-ttu-id="ae690-138">通过指定 _AI，可以显式选择不区分重音。</span><span class="sxs-lookup"><span data-stu-id="ae690-138">You can explicitly select accent insensitivity by specifying _AI.</span></span>|  
|<span data-ttu-id="ae690-139">区分假名 (_KS)</span><span class="sxs-lookup"><span data-stu-id="ae690-139">Kana-sensitive (_KS)</span></span>|<span data-ttu-id="ae690-140">区分日语中的两种假名字符类型：平假名和片假名。</span><span class="sxs-lookup"><span data-stu-id="ae690-140">Distinguishes between the two types of Japanese kana characters: Hiragana and Katakana.</span></span> <span data-ttu-id="ae690-141">如果未选择此选项，则排序规则将不区分假名。</span><span class="sxs-lookup"><span data-stu-id="ae690-141">If this option is not selected, the collation is Kana-insensitive.</span></span> <span data-ttu-id="ae690-142">即 SQL Server 在排序时将平假名字符和片假名字符视为相同。</span><span class="sxs-lookup"><span data-stu-id="ae690-142">That is, SQL Server considers Hiragana and Katakana characters to be equal for sorting purposes.</span></span> <span data-ttu-id="ae690-143">省略此选项是指定不区分假名的唯一方法。</span><span class="sxs-lookup"><span data-stu-id="ae690-143">Omitting this option is the only method of specifying Kana-insensitivity.</span></span>|  
|<span data-ttu-id="ae690-144">区分全半角 (_WS)</span><span class="sxs-lookup"><span data-stu-id="ae690-144">Width-sensitive (_WS)</span></span>|<span data-ttu-id="ae690-145">区分全角字符和半角字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-145">Distinguishes between full-width and half-width characters.</span></span> <span data-ttu-id="ae690-146">如果未选择此选项，SQL Server 在排序时将把同一字符的全角和半角形式视为相同。</span><span class="sxs-lookup"><span data-stu-id="ae690-146">If this option is not selected, SQL Server considers the full-width and half-width representation of the same character to be identical for sorting purposes.</span></span> <span data-ttu-id="ae690-147">省略此选项是指定不区分全半角的唯一方法。</span><span class="sxs-lookup"><span data-stu-id="ae690-147">Omitting this option is the only method of specifying width-insensitivity.</span></span>|  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae690-148">支持以下排序规则集：</span><span class="sxs-lookup"><span data-stu-id="ae690-148">supports the following collation sets:</span></span>  
  
 <span data-ttu-id="ae690-149">Windows 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-149">Windows collations</span></span>  
 <span data-ttu-id="ae690-150">Windows 排序规则根据关联的 Windows 系统区域设置来定义字符数据的存储规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-150">Windows collations define rules for storing character data that are based on an associated Windows system locale.</span></span> <span data-ttu-id="ae690-151">在 Windows 排序规则中，使用与 Unicode 数据相同的算法实现非 Unicode 数据的比较。</span><span class="sxs-lookup"><span data-stu-id="ae690-151">For a Windows collation, comparison of non-Unicode data is implemented by using the same algorithm as Unicode data.</span></span> <span data-ttu-id="ae690-152">Windows 基本排序规则指定应用字典排序时所用的字母表或语言，以及用于存储非 Unicode 字符数据的代码页。</span><span class="sxs-lookup"><span data-stu-id="ae690-152">The base Windows collation rules specify which alphabet or language is used when dictionary sorting is applied, and the code page that is used to store non-Unicode character data.</span></span> <span data-ttu-id="ae690-153">Unicode 排序和非 Unicode 排序都与特定 Windows 版本中的字符串比较相兼容。</span><span class="sxs-lookup"><span data-stu-id="ae690-153">Both Unicode and non-Unicode sorting are compatible with string comparisons in a particular version of Windows.</span></span> <span data-ttu-id="ae690-154">这保证了 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中所有数据类型的一致性，还使开发人员能够使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 所使用的相同规则对应用程序中的字符串排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-154">This provides consistency across data types within [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and it also lets developers sort strings in their applications by using the same rules that are used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ae690-155">有关详细信息，请参阅 [Windows 排序规则名称 (Transact-SQL)](/sql/t-sql/statements/windows-collation-name-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="ae690-155">For more information, see [Windows Collation Name &#40;Transact-SQL&#41;](/sql/t-sql/statements/windows-collation-name-transact-sql).</span></span>  
  
 <span data-ttu-id="ae690-156">二进制排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-156">Binary collations</span></span>  
 <span data-ttu-id="ae690-157">二进制排序规则基于区域设置和数据类型定义的编码值顺序来对数据进行排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-157">Binary collations sort data based on the sequence of coded values that are defined by the locale and data type.</span></span> <span data-ttu-id="ae690-158">它们是区分大小写的。</span><span class="sxs-lookup"><span data-stu-id="ae690-158">They are case sensitive.</span></span> <span data-ttu-id="ae690-159">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中的二进制排序规则定义了将使用的区域设置和 ANSI 代码页。</span><span class="sxs-lookup"><span data-stu-id="ae690-159">A binary collation in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] defines the locale and the ANSI code page that will be used.</span></span> <span data-ttu-id="ae690-160">这将强制使用二进制排序顺序。</span><span class="sxs-lookup"><span data-stu-id="ae690-160">This enforces a binary sort order.</span></span> <span data-ttu-id="ae690-161">由于它们相对简单，因此二进制排序规则有助于提高应用程序性能。</span><span class="sxs-lookup"><span data-stu-id="ae690-161">Because they are relatively simple, binary collations help improve application performance.</span></span> <span data-ttu-id="ae690-162">对于非 Unicode 数据类型，数据比较将基于 ANSI 代码页中定义的码位。</span><span class="sxs-lookup"><span data-stu-id="ae690-162">For non-Unicode data types, data comparisons are based on the code points that are defined in the ANSI code page.</span></span> <span data-ttu-id="ae690-163">对于 Unicode 数据类型，数据比较将基于 Unicode 码位。</span><span class="sxs-lookup"><span data-stu-id="ae690-163">For Unicode data types, data comparisons are based on the Unicode code points.</span></span> <span data-ttu-id="ae690-164">对于 Unicode 数据类型的二进制排序规则，数据排序将不考虑区域设置。</span><span class="sxs-lookup"><span data-stu-id="ae690-164">For binary collations on Unicode data types, the locale is not considered in data sorts.</span></span> <span data-ttu-id="ae690-165">例如，对 Unicode 数据应用 Latin_1_General_BIN 和 Japanese_BIN，会得到完全相同的排序结果。</span><span class="sxs-lookup"><span data-stu-id="ae690-165">For example, Latin_1_General_BIN and Japanese_BIN yield identical sorting results when they are used on Unicode data.</span></span>  
  
 <span data-ttu-id="ae690-166">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中有两种二进制排序规则：较早的 `BIN` 排序规则和较新的 `BIN2` 排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-166">There are two types of binary collations in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]; the older `BIN` collations and the newer `BIN2` collations.</span></span> <span data-ttu-id="ae690-167">在 `BIN2` 排序规则中，所有字符根据其码位排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-167">In a `BIN2` collation all characters are sorted according to their code points.</span></span> <span data-ttu-id="ae690-168">在 `BIN` 排序规则中，仅首字符按照码位排序，其余字符根据其字节值排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-168">In a `BIN` collation only the first character is sorted according to the code point, and remaining characters are sorted according to their byte values.</span></span> <span data-ttu-id="ae690-169">（由于 Intel 平台是一个 little endian 体系结构，因此 Unicode 码字符始终以字节对调的形式存储。）</span><span class="sxs-lookup"><span data-stu-id="ae690-169">(Because the Intel platform is a little endian architecture, Unicode code characters are always stored byte-swapped.)</span></span>  
  
 <span data-ttu-id="ae690-170">SQL Server 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-170">SQL Server collations</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae690-171">排序规则 (SQL_\*) 提供与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]早期版本兼容的排序顺序。</span><span class="sxs-lookup"><span data-stu-id="ae690-171">collations (SQL_\*) provide sort order compatibility with earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ae690-172">非 Unicode 数据的字典排序规则与 Windows 操作系统提供的任何排序例程都不兼容。</span><span class="sxs-lookup"><span data-stu-id="ae690-172">The dictionary sorting rules for non-Unicode data are incompatible with any sorting routine that is provided by Windows operating systems.</span></span> <span data-ttu-id="ae690-173">但是，Unicode 数据的排序与特定版本的 Windows 排序规则兼容。</span><span class="sxs-lookup"><span data-stu-id="ae690-173">However, sorting Unicode data is compatible with a particular version of Windows sorting rules.</span></span> <span data-ttu-id="ae690-174">由于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 排序规则对非 Unicode 数据和 Unicode 数据使用不同的比较规则，因此对于相同数据的比较将会看到不同的结果，具体取决于基本数据类型。</span><span class="sxs-lookup"><span data-stu-id="ae690-174">Because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] collations use different comparison rules for non-Unicode and Unicode data, you will see different results for comparisons of the same data, depending on the underlying data type.</span></span> <span data-ttu-id="ae690-175">有关详细信息，请参阅 [SQL Server 排序规则名称 (Transact-SQL)](/sql/t-sql/statements/sql-server-collation-name-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="ae690-175">For more information, see [SQL Server Collation Name &#40;Transact-SQL&#41;](/sql/t-sql/statements/sql-server-collation-name-transact-sql).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ae690-176">升级 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的英文实例时可以指定 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 排序规则 (SQL_\*)，以便与现有 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例兼容。</span><span class="sxs-lookup"><span data-stu-id="ae690-176">When you upgrade an English-language instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] collations (SQL_\*) can be specified for compatibility with existing instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ae690-177">由于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的默认排序规则是在安装过程中定义的，因此在以下情况下确保慎重指定排序规则设置：</span><span class="sxs-lookup"><span data-stu-id="ae690-177">Because the default collation for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is defined during setup, make sure that you specify collation settings carefully when the following are true:</span></span>  
> 
>  -   <span data-ttu-id="ae690-178">应用程序代码依赖早期 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 排序规则的行为。</span><span class="sxs-lookup"><span data-stu-id="ae690-178">Your application code depends on the behavior of previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] collations.</span></span>  
> -   <span data-ttu-id="ae690-179">必须存储反映多种语言的字符数据。</span><span class="sxs-lookup"><span data-stu-id="ae690-179">You must store character data that reflects multiple languages.</span></span>  
  
 <span data-ttu-id="ae690-180">支持在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例的下列级别设置排序规则：</span><span class="sxs-lookup"><span data-stu-id="ae690-180">Setting collations are supported at the following levels of an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
 <span data-ttu-id="ae690-181">服务器级排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-181">Server-level collations</span></span>  
 <span data-ttu-id="ae690-182">默认服务器排序规则是在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 安装过程中设置的，还将成为系统数据库和所有用户数据库的默认排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-182">The default server collation is set during [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup, and also becomes the default collation of the system databases and all user databases.</span></span> <span data-ttu-id="ae690-183">请注意，在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 安装过程中不能选择仅 Unicode 排序规则，因为不支持将它们用作服务器级排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-183">Note that Unicode-only collations cannot be selected during [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup because they are not supported as server-level collations.</span></span>  
  
 <span data-ttu-id="ae690-184">除了导出所有数据库对象和数据、重新生成 `master` 数据库和导入所有数据库对象和数据以外，一旦为服务器分配了某一排序规则后，就无法更改该排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-184">After a collation has been assigned to the server, you cannot change the collation except by exporting all database objects and data, rebuilding the `master` database, and importing all database objects and data.</span></span> <span data-ttu-id="ae690-185">与更改 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例的默认排序规则相反，您可在创建新数据库或数据库列时指定所需的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-185">Instead of changing the default collation of an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you can specify the desired collation at the time that you create a new database or database column.</span></span>  
  
 <span data-ttu-id="ae690-186">数据库级排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-186">Database-level collations</span></span>  
 <span data-ttu-id="ae690-187">创建或修改数据库时，您可使用 CREATE DATABASE 或 ALTER DATABASE 语句的 COLLATE 子句指定默认数据库排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-187">When a database is created or modified, you can use the COLLATE clause of the CREATE DATABASE or ALTER DATABASE statement to specify the default database collation.</span></span> <span data-ttu-id="ae690-188">如果未指定排序规则，将为该数据库分配服务器排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-188">If no collation is specified, the database is assigned the server collation.</span></span>  
  
 <span data-ttu-id="ae690-189">除了更改服务器的排序规则外，无法更改系统数据库的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-189">You cannot change the collation of system databases except by changing the collation for the server.</span></span>  
  
 <span data-ttu-id="ae690-190">数据库排序规则将应用于数据库中的所有元数据，并且是所有字符串列、临时对象、变量名称和数据库中使用的任何其他字符串的默认排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-190">The database collation is used for all metadata in the database, and is the default for all string columns, temporary objects, variable names, and any other strings used in the database.</span></span> <span data-ttu-id="ae690-191">当更改用户数据库的排序规则时，如果在数据库访问临时表中进行查询，则可能出现排序规则冲突。</span><span class="sxs-lookup"><span data-stu-id="ae690-191">When you change the collation of a user database, there can be collation conflicts when queries in the database access temporary tables.</span></span> <span data-ttu-id="ae690-192">临时表始终存储在 `tempdb` 系统数据库中，该数据库将使用实例的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-192">Temporary tables are always stored in the `tempdb` system database, which will use the collation for the instance.</span></span> <span data-ttu-id="ae690-193">如果排序规则导致计算字符数据时出现冲突，则比较用户数据库和 `tempdb` 之间的字符数据的查询可能会失败。</span><span class="sxs-lookup"><span data-stu-id="ae690-193">Queries that compare character data between the user database and `tempdb` may fail if the collations cause a conflict in evaluating the character data.</span></span> <span data-ttu-id="ae690-194">您可以通过在查询中指定 COLLATE 子句来解决此问题。</span><span class="sxs-lookup"><span data-stu-id="ae690-194">You can resolve this by specifying the COLLATE clause in the query.</span></span> <span data-ttu-id="ae690-195">有关详细信息，请参阅[排序规则 (Transact-SQL)](/sql/t-sql/statements/collations)。</span><span class="sxs-lookup"><span data-stu-id="ae690-195">For more information, see [COLLATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/collations).</span></span>  
  
 <span data-ttu-id="ae690-196">列级排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-196">Column-level collations</span></span>  
 <span data-ttu-id="ae690-197">当您创建或更改表时，可使用 COLLATE 子句指定每个字符串列的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-197">When you create or alter a table, you can specify collations for each character-string column by using the COLLATE clause.</span></span> <span data-ttu-id="ae690-198">如果未指定排序规则，则为该列分配数据库的默认排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-198">If no collation is specified, the column is assigned the default collation of the database.</span></span>  
  
 <span data-ttu-id="ae690-199">表达式级排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-199">Expression-level collations</span></span>  
 <span data-ttu-id="ae690-200">表达式级排序规则在语句运行时设置，并且影响结果集的返回方式。</span><span class="sxs-lookup"><span data-stu-id="ae690-200">Expression-level collations are set when a statement is run, and they affect the way a result set is returned.</span></span> <span data-ttu-id="ae690-201">这可以使 ORDER BY 排序结果特定于区域设置。</span><span class="sxs-lookup"><span data-stu-id="ae690-201">This enables ORDER BY sort results to be locale-specific.</span></span> <span data-ttu-id="ae690-202">使用如下的 COLLATE 子句可以实现表达式级排序规则：</span><span class="sxs-lookup"><span data-stu-id="ae690-202">Use a COLLATE clause such as the following to implement expression-level collations:</span></span>  
  
```  
SELECT name FROM customer ORDER BY name COLLATE Latin1_General_CS_AI;  
```  
  
  
###  <a name="locale"></a><a name="Locale_Defn"></a> <span data-ttu-id="ae690-203">区域设置</span><span class="sxs-lookup"><span data-stu-id="ae690-203">Locale</span></span>  
 <span data-ttu-id="ae690-204">区域设置是与位置或区域性相关联的一组信息。</span><span class="sxs-lookup"><span data-stu-id="ae690-204">A locale is a set of information that is associated with a location or a culture.</span></span> <span data-ttu-id="ae690-205">它可以包括所用语言的名称和标识符、用于书写该语言的文字以及文化习俗。</span><span class="sxs-lookup"><span data-stu-id="ae690-205">This can include the name and identifier of the spoken language, the script that is used to write the language, and cultural conventions.</span></span> <span data-ttu-id="ae690-206">排序规则可以与一个或多个区域设置相关联。</span><span class="sxs-lookup"><span data-stu-id="ae690-206">Collations can be associated with one or more locales.</span></span> <span data-ttu-id="ae690-207">有关详细信息，请参阅 [Microsoft 分配的区域设置 ID](https://msdn.microsoft.com/goglobal/bb964664.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ae690-207">For more information, see [Locale IDs Assigned by Microsoft](https://msdn.microsoft.com/goglobal/bb964664.aspx).</span></span>  
  
  
###  <a name="code-page"></a><a name="Code_Page_Defn"></a><span data-ttu-id="ae690-208">代码页</span><span class="sxs-lookup"><span data-stu-id="ae690-208">Code Page</span></span>  
 <span data-ttu-id="ae690-209">代码页是给定脚本的有序字符集，其中数值索引（即码位值）与每个字符相关联。</span><span class="sxs-lookup"><span data-stu-id="ae690-209">A code page is an ordered set of characters of a given script in which a numeric index, or code point value, is associated with each character.</span></span> <span data-ttu-id="ae690-210">Windows 代码页通常被称为“字符集”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="ae690-210">A Windows code page is typically referred to as a *character set* or *charset*.</span></span> <span data-ttu-id="ae690-211">代码页用于支持不同的 Windows 系统区域设置所使用的字符集和键盘布局。</span><span class="sxs-lookup"><span data-stu-id="ae690-211">Code pages are used to provide support for the character sets and keyboard layouts that are used by different Windows system locales.</span></span>  
  
  
###  <a name="sort-order"></a><a name="Sort_Order_Defn"></a><span data-ttu-id="ae690-212">排序顺序</span><span class="sxs-lookup"><span data-stu-id="ae690-212">Sort Order</span></span>  
 <span data-ttu-id="ae690-213">排序顺序指定数据值的排序方式。</span><span class="sxs-lookup"><span data-stu-id="ae690-213">Sort order specifies how data values are sorted.</span></span> <span data-ttu-id="ae690-214">它影响数据比较的结果。</span><span class="sxs-lookup"><span data-stu-id="ae690-214">This affects the results of data comparison.</span></span> <span data-ttu-id="ae690-215">数据的排序通过使用排序规则而实现，且可使用索引对排序进行优化。</span><span class="sxs-lookup"><span data-stu-id="ae690-215">Data is sorted by using collations, and it can be optimized by using indexes.</span></span>  
  
  
##  <a name="unicode-support"></a><a name="Unicode_Defn"></a><span data-ttu-id="ae690-216">Unicode 支持</span><span class="sxs-lookup"><span data-stu-id="ae690-216">Unicode Support</span></span>  
 <span data-ttu-id="ae690-217">Unicode 是一种将码位映射到字符的标准。</span><span class="sxs-lookup"><span data-stu-id="ae690-217">Unicode is a standard for mapping code points to characters.</span></span> <span data-ttu-id="ae690-218">由于它旨在涵盖全球所有语言的所有字符，因此，无需使用不同代码页来处理不同字符集。</span><span class="sxs-lookup"><span data-stu-id="ae690-218">Because it is designed to cover all the characters of all the languages of the world, there is no need for different code pages to handle different sets of characters.</span></span> <span data-ttu-id="ae690-219">如果存储的字符数据反映多种语言，则应始终使用 Unicode 数据类型（`nchar`、`nvarchar` 和 `ntext`），而不要使用非 Unicode 数据类型（`char`、`varchar` 和 `text`）。</span><span class="sxs-lookup"><span data-stu-id="ae690-219">If you store character data that reflects multiple languages, always use Unicode data types (`nchar`, `nvarchar`, and `ntext`) instead of the non-Unicode data types (`char`, `varchar`, and `text`).</span></span>  
  
 <span data-ttu-id="ae690-220">非 Unicode 数据类型有明显的局限性，</span><span class="sxs-lookup"><span data-stu-id="ae690-220">Significant limitations are associated with non-Unicode data types.</span></span> <span data-ttu-id="ae690-221">这是因为非 Unicode 计算机只能使用单个代码页。</span><span class="sxs-lookup"><span data-stu-id="ae690-221">This is because a non-Unicode computer will be limited to use of a single code page.</span></span> <span data-ttu-id="ae690-222">通过使用 Unicode 您可能会体验到性能提升，因为需要较少的代码页转换。</span><span class="sxs-lookup"><span data-stu-id="ae690-222">You might experience performance gain by using Unicode because fewer code-page conversions are required.</span></span> <span data-ttu-id="ae690-223">必须在数据库级、列级或表达式级单独选择 Unicode 排序规则，因为在服务器级不支持 Unicode 排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-223">Unicode collations must be selected individually at the database, column or expression level because they are not supported at the server level.</span></span>  
  
 <span data-ttu-id="ae690-224">客户端使用的代码页由操作系统设置确定。</span><span class="sxs-lookup"><span data-stu-id="ae690-224">The code pages that a client uses are determined by the operating system settings.</span></span> <span data-ttu-id="ae690-225">若要在 Windows 操作系统上设置客户端代码页，请使用“控制面板”中的 **“区域设置”** 。</span><span class="sxs-lookup"><span data-stu-id="ae690-225">To set client code pages on the Windows operating system, use **Regional Settings** in Control Panel.</span></span>  
  
 <span data-ttu-id="ae690-226">在将数据从服务器移到客户端时，服务器排序规则可能无法由旧版本的客户端驱动程序识别。</span><span class="sxs-lookup"><span data-stu-id="ae690-226">When you move data from a server to a client, your server collation might not be recognized by older client drivers.</span></span> <span data-ttu-id="ae690-227">将数据从 Unicode 服务器移到非 Unicode 客户端时，可能会出现此情况。</span><span class="sxs-lookup"><span data-stu-id="ae690-227">This can occur when you move data from a Unicode server to a non-Unicode client.</span></span> <span data-ttu-id="ae690-228">最好升级客户端操作系统，以使基础系统排序规则得以升级。</span><span class="sxs-lookup"><span data-stu-id="ae690-228">Your best option might be to upgrade the client operating system so that the underlying system collations are updated.</span></span> <span data-ttu-id="ae690-229">如果客户端上安装了数据库客户端软件，则可以考虑对数据库客户端软件应用服务更新。</span><span class="sxs-lookup"><span data-stu-id="ae690-229">If the client has database client software installed, you might consider applying a service update to the database client software.</span></span>  
  
 <span data-ttu-id="ae690-230">还可以尝试针对服务器上的数据使用另一个排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-230">You can also try to use a different collation for the data on the server.</span></span> <span data-ttu-id="ae690-231">选择一个将映射到客户端上的代码页的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-231">Choose a collation that will map to a code page on the client.</span></span>  
  
 <span data-ttu-id="ae690-232">若要使用 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]中提供的 UTF-16 排序规则，可以选择一个增补字符 `_SC` 排序规则（仅 Windows 排序规则）来改进对某些 Unicode 字符的搜索和排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-232">To use the UTF-16 collations available in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], you can select one of the supplementary characters `_SC` collations (Windows collations only) to improve searching and sorting of some Unicode characters.</span></span>  
  
 <span data-ttu-id="ae690-233">若要评估与使用 Unicode 或非 Unicode 数据类型相关的问题，请测试您的具体方案以确定您所在环境下的性能差异大小。</span><span class="sxs-lookup"><span data-stu-id="ae690-233">To evaluate issues that are related to using Unicode or non-Unicode data types, test your scenario to measure performance differences in your environment.</span></span> <span data-ttu-id="ae690-234">最好对整个组织中的系统所使用的排序规则进行标准化，并尽可能部署 Unicode 服务器和客户端。</span><span class="sxs-lookup"><span data-stu-id="ae690-234">It is a good practice to standardize the collation that is used on systems across your organization, and deploy Unicode servers and clients wherever possible.</span></span>  
  
 <span data-ttu-id="ae690-235">在许多情况下， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 将与其他服务器或客户端交互，您的组织可能会使用应用程序和服务器实例之间的多种数据访问标准。</span><span class="sxs-lookup"><span data-stu-id="ae690-235">In many situations, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will interact with other servers or clients, and your organization might use multiple data access standards between applications and server instances.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae690-236">客户端是两种主要类型之一：</span><span class="sxs-lookup"><span data-stu-id="ae690-236">clients are one of two main types:</span></span>  
  
-   <span data-ttu-id="ae690-237">使用 OLE DB 和开放式数据库连接 (ODBC) 3.7 版或更高版本的**Unicode 客户端** 。</span><span class="sxs-lookup"><span data-stu-id="ae690-237">**Unicode clients** that use OLE DB and Open Database Connectivity (ODBC) version 3.7 or a later version.</span></span>  
  
-   <span data-ttu-id="ae690-238">使用 DB-Library 和 ODBC 3.6 版或更低版本的**非 Unicode 客户端** 。</span><span class="sxs-lookup"><span data-stu-id="ae690-238">**Non-Unicode clients** that use DB-Library and ODBC version 3.6 or an earlier version.</span></span>  
  
 <span data-ttu-id="ae690-239">下表提供有关以 Unicode 和非 Unicode 服务器的各种组合使用多语言数据的信息。</span><span class="sxs-lookup"><span data-stu-id="ae690-239">The following table provides information about using multilingual data with various combinations of Unicode and non-Unicode servers.</span></span>  
  
|<span data-ttu-id="ae690-240">服务器</span><span class="sxs-lookup"><span data-stu-id="ae690-240">Server</span></span>|<span data-ttu-id="ae690-241">Client</span><span class="sxs-lookup"><span data-stu-id="ae690-241">Client</span></span>|<span data-ttu-id="ae690-242">优点或局限性</span><span class="sxs-lookup"><span data-stu-id="ae690-242">Benefits or Limitations</span></span>|  
|------------|------------|-----------------------------|  
|<span data-ttu-id="ae690-243">Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-243">Unicode</span></span>|<span data-ttu-id="ae690-244">Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-244">Unicode</span></span>|<span data-ttu-id="ae690-245">因为 Unicode 数据将在整个系统中使用，所以此方案可提供最佳的性能并可保护检索到的数据免受破坏。</span><span class="sxs-lookup"><span data-stu-id="ae690-245">Because Unicode data will be used throughout the system, this scenario provides the best performance and protection from corruption of retrieved data.</span></span> <span data-ttu-id="ae690-246">ActiveX 数据对象 (ADO)、OLE DB 和 ODBC 3.7 版或更高版本都采用这样的配置。</span><span class="sxs-lookup"><span data-stu-id="ae690-246">This is the situation with ActiveX Data Objects (ADO), OLE DB, and ODBC version 3.7 or a later version.</span></span>|  
|<span data-ttu-id="ae690-247">Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-247">Unicode</span></span>|<span data-ttu-id="ae690-248">非 Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-248">Non-Unicode</span></span>|<span data-ttu-id="ae690-249">在这种情况下，尤其对于正在运行新操作系统的服务器与正在运行旧版本 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]或基于旧操作系统的客户端之间的连接，当您向客户端计算机移动数据时，会受到限制或出现错误。</span><span class="sxs-lookup"><span data-stu-id="ae690-249">In this scenario, especially with connections between a server that is running a newer operating system and a client that is running an older version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], or on an older operating system, there can be limitations or errors when you move data to a client computer.</span></span> <span data-ttu-id="ae690-250">服务器上的 Unicode 数据会尝试映射到非 Unicode 客户端的对应代码页，以转换数据。</span><span class="sxs-lookup"><span data-stu-id="ae690-250">Unicode data on the server will try to map to a corresponding code page on the non-Unicode client to convert the data.</span></span>|  
|<span data-ttu-id="ae690-251">非 Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-251">Non-Unicode</span></span>|<span data-ttu-id="ae690-252">Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-252">Unicode</span></span>|<span data-ttu-id="ae690-253">该方案对使用多语言数据不是理想配置。</span><span class="sxs-lookup"><span data-stu-id="ae690-253">This is not an ideal configuration for using multilingual data.</span></span> <span data-ttu-id="ae690-254">在此方案下不能向非 Unicode 服务器写入 Unicode 数据。</span><span class="sxs-lookup"><span data-stu-id="ae690-254">You cannot write Unicode data to the non-Unicode server.</span></span> <span data-ttu-id="ae690-255">在向服务器的代码页之外的服务器发送数据时，很可能会发生问题。</span><span class="sxs-lookup"><span data-stu-id="ae690-255">Problems are likely to occur when data is sent to servers that are outside the server's code page.</span></span>|  
|<span data-ttu-id="ae690-256">非 Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-256">Non-Unicode</span></span>|<span data-ttu-id="ae690-257">非 Unicode</span><span class="sxs-lookup"><span data-stu-id="ae690-257">Non-Unicode</span></span>|<span data-ttu-id="ae690-258">这是对多语言数据有极大局限性的方案。</span><span class="sxs-lookup"><span data-stu-id="ae690-258">This is a very limiting scenario for multilingual data.</span></span> <span data-ttu-id="ae690-259">您只可使用一个代码页。</span><span class="sxs-lookup"><span data-stu-id="ae690-259">You can use only a single code page.</span></span>|  
  
  
##  <a name="supplementary-characters"></a><a name="Supplementary_Characters"></a><span data-ttu-id="ae690-260">补充字符</span><span class="sxs-lookup"><span data-stu-id="ae690-260">Supplementary Characters</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="ae690-261">提供数据类型（例如 `nchar` 和） `nvarchar` 来存储 Unicode 数据。</span><span class="sxs-lookup"><span data-stu-id="ae690-261">provides data types such as `nchar` and `nvarchar` to store Unicode data.</span></span> <span data-ttu-id="ae690-262">这些数据类型使用名为 *UTF-16*的格式对文本进行编码。</span><span class="sxs-lookup"><span data-stu-id="ae690-262">These data types encode text in a format called *UTF-16*.</span></span> <span data-ttu-id="ae690-263">Unicode 协会为每个字符分配一个唯一码位，码位是一个介于 0x0000 和 0x10FFFF 之间的值。</span><span class="sxs-lookup"><span data-stu-id="ae690-263">The Unicode Consortium allocates each character a unique codepoint, which is a value in the range 0x0000 to 0x10FFFF.</span></span> <span data-ttu-id="ae690-264">最常用字符的码位值在内存和磁盘上的 16 位字的范围内，但码位值大于 0xFFFF 的字符需要使用两个连续的 16 位字。</span><span class="sxs-lookup"><span data-stu-id="ae690-264">The most frequently used characters have codepoint values that will fit into a 16-bit word in memory and on disk, but characters with codepoint values larger than 0xFFFF require two consecutive 16-bit words.</span></span> <span data-ttu-id="ae690-265">这些字符称为“增补字符” \*\*，两个连续的 16 位字称为“代理项对” \*\*。</span><span class="sxs-lookup"><span data-stu-id="ae690-265">These characters are called *supplementary characters*, and the two consecutive 16-bit words are called *surrogate pairs*.</span></span>  
  
 <span data-ttu-id="ae690-266">如果使用增补字符：</span><span class="sxs-lookup"><span data-stu-id="ae690-266">If you use supplementary characters:</span></span>  
  
-   <span data-ttu-id="ae690-267">只有在 90 版本或更高版本的排序规则中才可以将增补字符用于排序和比较操作。</span><span class="sxs-lookup"><span data-stu-id="ae690-267">Supplementary characters can be used in ordering and comparison operations in collation versions 90 or greater.</span></span>  
  
-   <span data-ttu-id="ae690-268">所有 _100 级排序规则均支持使用增补字符进行语言排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-268">All _100 level collations support linguistic sorting with supplementary characters.</span></span>  
  
-   <span data-ttu-id="ae690-269">不支持将增补字符用在元数据（如数据库对象的名称）中。</span><span class="sxs-lookup"><span data-stu-id="ae690-269">Supplementary characters are not supported for use in metadata, such as in names of database objects.</span></span>  
  
-   <span data-ttu-id="ae690-270">从 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 开始，新的增补字符 (SC) 排序规则系列可用于以下数据类型：`nchar`、`nvarchar` 和 `sql_variant`。</span><span class="sxs-lookup"><span data-stu-id="ae690-270">Introduced in [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], a new family of supplementary character (SC) collations can be used with the data types `nchar`, `nvarchar` and `sql_variant`.</span></span> <span data-ttu-id="ae690-271">例如： `Latin1_General_100_CI_AS_SC`或 `Japanese_Bushu_Kakusu_100_CI_AS_SC`（如果使用日语排序规则）。</span><span class="sxs-lookup"><span data-stu-id="ae690-271">For example: `Latin1_General_100_CI_AS_SC`, or if using a Japanese collation, `Japanese_Bushu_Kakusu_100_CI_AS_SC`.</span></span>  
  
     <span data-ttu-id="ae690-272">SC 标志可应用于：</span><span class="sxs-lookup"><span data-stu-id="ae690-272">The SC flag can be applied to:</span></span>  
  
    -   <span data-ttu-id="ae690-273">90 版本 Windows 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-273">Version 90 Windows collations</span></span>  
  
    -   <span data-ttu-id="ae690-274">100 版本 Windows 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-274">Version 100 Windows collations</span></span>  
  
     <span data-ttu-id="ae690-275">SC 标志不能应用于：</span><span class="sxs-lookup"><span data-stu-id="ae690-275">The SC flag cannot be applied to:</span></span>  
  
    -   <span data-ttu-id="ae690-276">80 版本非版本化 Windows 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-276">Version 80 non-versioned Windows collations</span></span>  
  
    -   <span data-ttu-id="ae690-277">BIN 或 BIN2 二进制排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-277">The BIN or BIN2 binary collations</span></span>  
  
    -   <span data-ttu-id="ae690-278">SQL\* 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-278">The SQL\* collations</span></span>  
  
 <span data-ttu-id="ae690-279">下表比较了在使用具有和没有 SC 排序规则的增补字符时某些字符串函数和字符串运算符的行为。</span><span class="sxs-lookup"><span data-stu-id="ae690-279">The following table compares the behavior of some string functions and string operators when they use supplementary characters with and without a SC collation.</span></span>  
  
|<span data-ttu-id="ae690-280">字符串函数或运算符</span><span class="sxs-lookup"><span data-stu-id="ae690-280">String Function or Operator</span></span>|<span data-ttu-id="ae690-281">具有 SC 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-281">With an SC Collation</span></span>|<span data-ttu-id="ae690-282">没有 SC 排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-282">Without an SC Collation</span></span>|  
|---------------------------------|--------------------------|-----------------------------|  
|[<span data-ttu-id="ae690-283">CHARINDEX</span><span class="sxs-lookup"><span data-stu-id="ae690-283">CHARINDEX</span></span>](/sql/t-sql/functions/charindex-transact-sql)<br /><br /> [<span data-ttu-id="ae690-284">LEN</span><span class="sxs-lookup"><span data-stu-id="ae690-284">LEN</span></span>](/sql/t-sql/functions/len-transact-sql)<br /><br /> [<span data-ttu-id="ae690-285">PATINDEX</span><span class="sxs-lookup"><span data-stu-id="ae690-285">PATINDEX</span></span>](/sql/t-sql/functions/patindex-transact-sql)|<span data-ttu-id="ae690-286">UTF-16 代理项对作为单个码位计数。</span><span class="sxs-lookup"><span data-stu-id="ae690-286">The UTF-16 surrogate pair is counted as a single codepoint.</span></span>|<span data-ttu-id="ae690-287">UTF-16 代理项对作为两个码位计数。</span><span class="sxs-lookup"><span data-stu-id="ae690-287">The UTF-16 surrogate pair is counted as two codepoints.</span></span>|  
|[<span data-ttu-id="ae690-288">LEFT</span><span class="sxs-lookup"><span data-stu-id="ae690-288">LEFT</span></span>](/sql/t-sql/functions/left-transact-sql)<br /><br /> [<span data-ttu-id="ae690-289">REPLACE</span><span class="sxs-lookup"><span data-stu-id="ae690-289">REPLACE</span></span>](/sql/t-sql/functions/replace-transact-sql)<br /><br /> [<span data-ttu-id="ae690-290">REVERSE</span><span class="sxs-lookup"><span data-stu-id="ae690-290">REVERSE</span></span>](/sql/t-sql/functions/reverse-transact-sql)<br /><br /> [<span data-ttu-id="ae690-291">RIGHT</span><span class="sxs-lookup"><span data-stu-id="ae690-291">RIGHT</span></span>](/sql/t-sql/functions/right-transact-sql)<br /><br /> [<span data-ttu-id="ae690-292">SUBSTRING</span><span class="sxs-lookup"><span data-stu-id="ae690-292">SUBSTRING</span></span>](/sql/t-sql/functions/substring-transact-sql)<br /><br /> [<span data-ttu-id="ae690-293">STUFF</span><span class="sxs-lookup"><span data-stu-id="ae690-293">STUFF</span></span>](/sql/t-sql/functions/stuff-transact-sql)|<span data-ttu-id="ae690-294">这些函数会将每个代理项对作为单个码位处理并按预期方式工作。</span><span class="sxs-lookup"><span data-stu-id="ae690-294">These functions treat each surrogate pair as a single codepoint and work as expected.</span></span>|<span data-ttu-id="ae690-295">这些函数可能拆分任意代理项对并导致意外的结果。</span><span class="sxs-lookup"><span data-stu-id="ae690-295">These functions may split any surrogate pairs and lead to unexpected results.</span></span>|  
|[<span data-ttu-id="ae690-296">NCHAR</span><span class="sxs-lookup"><span data-stu-id="ae690-296">NCHAR</span></span>](/sql/t-sql/functions/nchar-transact-sql)|<span data-ttu-id="ae690-297">返回对应于 0 到 0x10FFFF 范围内指定的 Unicode 码位值的字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-297">Returns the character corresponding to the specified Unicode codepoint value in the range 0 to 0x10FFFF.</span></span> <span data-ttu-id="ae690-298">如果指定的值位于 0 到 0xFFFF 范围内，则返回一个字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-298">If the value specified lies in the range 0 through 0xFFFF, one character is returned.</span></span> <span data-ttu-id="ae690-299">对于较高的值，则返回相应的代理项。</span><span class="sxs-lookup"><span data-stu-id="ae690-299">For higher values, the corresponding surrogate is returned.</span></span>|<span data-ttu-id="ae690-300">对于高于 0xFFFF 的值，将返回 NULL 而非相应的代理项。</span><span class="sxs-lookup"><span data-stu-id="ae690-300">A value higher than 0xFFFF returns NULL instead of the corresponding surrogate.</span></span>|  
|[<span data-ttu-id="ae690-301">UNICODE</span><span class="sxs-lookup"><span data-stu-id="ae690-301">UNICODE</span></span>](/sql/t-sql/functions/unicode-transact-sql)|<span data-ttu-id="ae690-302">返回 0 到 0x10FFFF 范围内的一个 UTF-16 码位。</span><span class="sxs-lookup"><span data-stu-id="ae690-302">Returns a UTF-16 codepoint in the range 0 through 0x10FFFF.</span></span>|<span data-ttu-id="ae690-303">返回 0 到 0xFFFF 范围内的一个 UCS-2 码位。</span><span class="sxs-lookup"><span data-stu-id="ae690-303">Returns a UCS-2 codepoint in the range 0 through 0xFFFF.</span></span>|  
|[<span data-ttu-id="ae690-304">匹配一个通配符</span><span class="sxs-lookup"><span data-stu-id="ae690-304">Match One Character Wildcard</span></span>](/sql/t-sql/language-elements/wildcard-match-one-character-transact-sql)<br /><br /> [<span data-ttu-id="ae690-305">通配符 - 无需匹配的字符</span><span class="sxs-lookup"><span data-stu-id="ae690-305">Wildcard - Character(s) Not to Match</span></span>](/sql/t-sql/language-elements/wildcard-character-s-not-to-match-transact-sql)|<span data-ttu-id="ae690-306">增补字符支持所有通配符操作。</span><span class="sxs-lookup"><span data-stu-id="ae690-306">Supplementary characters are supported for all wildcard operations.</span></span>|<span data-ttu-id="ae690-307">增补字符不支持这些通配符操作。</span><span class="sxs-lookup"><span data-stu-id="ae690-307">Supplementary characters are not supported for these wildcard operations.</span></span> <span data-ttu-id="ae690-308">支持其他通配符运算符。</span><span class="sxs-lookup"><span data-stu-id="ae690-308">Other wildcard operators are supported.</span></span>|  
  
  
##  <a name="gb18030-support"></a><a name="GB18030"></a><span data-ttu-id="ae690-309">GB18030 支持</span><span class="sxs-lookup"><span data-stu-id="ae690-309">GB18030 Support</span></span>  
 <span data-ttu-id="ae690-310">GB18030 是在中华人民共和国用于对中文字符进行编码的一个单独标准。</span><span class="sxs-lookup"><span data-stu-id="ae690-310">GB18030 is a separate standard used in the People's Republic of China for encoding Chinese characters.</span></span> <span data-ttu-id="ae690-311">在 GB18030 中，字符长度可以是 1 个字节、2 个字节或 4 个字节。</span><span class="sxs-lookup"><span data-stu-id="ae690-311">In GB18030, characters can be 1, 2, or 4 bytes in length.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae690-312">通过对从客户端应用程序进入服务器的 GB18030 编码字符进行确认，然后在本机将其转换并存储为 Unicode 字符，来对这些字符提供支持。</span><span class="sxs-lookup"><span data-stu-id="ae690-312">provides support for GB18030-encoded characters by recognizing them when they enter the server from a client-side application and converting and storing them natively as Unicode characters.</span></span> <span data-ttu-id="ae690-313">这些字符存储在服务器中后，在所有后续操作中均视为 Unicode 字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-313">After they are stored in the server, they are treated as Unicode characters in any subsequent operations.</span></span> <span data-ttu-id="ae690-314">可以使用任何中文排序规则，最好使用最新的 100 版本。</span><span class="sxs-lookup"><span data-stu-id="ae690-314">You can use any Chinese collation, preferably the latest 100 version.</span></span> <span data-ttu-id="ae690-315">所有 _100 级排序规则均支持使用 GB18030 字符进行语言排序。</span><span class="sxs-lookup"><span data-stu-id="ae690-315">All _100 level collations support linguistic sorting with GB18030 characters.</span></span> <span data-ttu-id="ae690-316">如果数据中包含增补字符（代理项对），您可以使用 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 中提供的 SC 排序规则来改进搜索和排序操作。</span><span class="sxs-lookup"><span data-stu-id="ae690-316">If the data includes supplementary characters (surrogate pairs), you can use the SC collations available in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] to improve searching and sorting.</span></span>  
  
  
##  <a name="complex-script-support"></a><a name="Complex_script"></a><span data-ttu-id="ae690-317">复杂脚本支持</span><span class="sxs-lookup"><span data-stu-id="ae690-317">Complex Script Support</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="ae690-318">可支持输入、存储、更改和显示复杂文种。</span><span class="sxs-lookup"><span data-stu-id="ae690-318">can support inputting, storing, changing, and displaying complex scripts.</span></span> <span data-ttu-id="ae690-319">复杂文种包括下列几种情况：</span><span class="sxs-lookup"><span data-stu-id="ae690-319">Complex scripts include the following:</span></span>  
  
-   <span data-ttu-id="ae690-320">脚本包括从右到左和从左到右两种文字组合，如阿拉伯语和英语文字的组合。</span><span class="sxs-lookup"><span data-stu-id="ae690-320">Scripts that include the combination of both right-to-left and left-to-right text, such as a combination of Arabic and English text.</span></span>  
  
-   <span data-ttu-id="ae690-321">脚本的字符根据其位置或在与其他字符组合时改变形状，如阿拉伯语、印度语和泰语字符。</span><span class="sxs-lookup"><span data-stu-id="ae690-321">Scripts whose characters change shape depending on their position, or when combined with other characters, such as Arabic, Indic, and Thai characters.</span></span>  
  
-   <span data-ttu-id="ae690-322">像泰语这样的语言需要内部词典识别单词，因为这些单词之间不断字。</span><span class="sxs-lookup"><span data-stu-id="ae690-322">Languages such as Thai that require internal dictionaries to recognize words because there are no breaks between them.</span></span>  
  
 <span data-ttu-id="ae690-323">与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 交互的数据库应用程序必须使用支持复杂文种的控件。</span><span class="sxs-lookup"><span data-stu-id="ae690-323">Database applications that interact with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must use controls that support complex scripts.</span></span> <span data-ttu-id="ae690-324">在托管代码中创建的标准 Windows 窗体控件支持复杂文种。</span><span class="sxs-lookup"><span data-stu-id="ae690-324">Standard Windows form controls that are created in managed code are complex script-enabled.</span></span>  
  
  
##  <a name="related-tasks"></a><a name="Related_Tasks"></a> <span data-ttu-id="ae690-325">相关任务</span><span class="sxs-lookup"><span data-stu-id="ae690-325">Related Tasks</span></span>  
  
|<span data-ttu-id="ae690-326">任务</span><span class="sxs-lookup"><span data-stu-id="ae690-326">Task</span></span>|<span data-ttu-id="ae690-327">主题</span><span class="sxs-lookup"><span data-stu-id="ae690-327">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="ae690-328">介绍如何设置或更改 SQL Server 实例的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-328">Describes how to set or change the collation of the instance of SQL Server.</span></span>|[<span data-ttu-id="ae690-329">设置或更改服务器排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-329">Set or Change the Server Collation</span></span>](set-or-change-the-server-collation.md)|  
|<span data-ttu-id="ae690-330">介绍如何设置或更改用户数据库的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-330">Describes how to set or change the collation of a user database.</span></span>|[<span data-ttu-id="ae690-331">设置或更改数据库排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-331">Set or Change the Database Collation</span></span>](set-or-change-the-database-collation.md)|  
|<span data-ttu-id="ae690-332">介绍如何设置或更改数据库中的列的排序规则。</span><span class="sxs-lookup"><span data-stu-id="ae690-332">Describes how to set or change the collation of a column in the database.</span></span>|[<span data-ttu-id="ae690-333">设置或更改列排序规则</span><span class="sxs-lookup"><span data-stu-id="ae690-333">Set or Change the Column Collation</span></span>](set-or-change-the-column-collation.md)|  
|<span data-ttu-id="ae690-334">介绍如何返回服务器级、数据库级或列级的排序规则信息。</span><span class="sxs-lookup"><span data-stu-id="ae690-334">Describes how to return collation information at the server, database, or column level.</span></span>|[<span data-ttu-id="ae690-335">查看排序规则信息</span><span class="sxs-lookup"><span data-stu-id="ae690-335">View Collation Information</span></span>](view-collation-information.md)|  
|<span data-ttu-id="ae690-336">介绍如何编写更易于在不同语言之间移植或更轻松地支持多种语言的 Transact-SQL 语句。</span><span class="sxs-lookup"><span data-stu-id="ae690-336">Describes how to write Transact-SQL statements that will make them more portable from one language to another, or support multiple languages more easily.</span></span>|[<span data-ttu-id="ae690-337">编写国际化 Transact-SQL 语句</span><span class="sxs-lookup"><span data-stu-id="ae690-337">Write International Transact-SQL Statements</span></span>](write-international-transact-sql-statements.md)|  
|<span data-ttu-id="ae690-338">介绍如何更改有关日期、时间和货币数据的使用和显示方式的错误消息和首选项的语言。</span><span class="sxs-lookup"><span data-stu-id="ae690-338">Describes how to change the language of error messages and preferences for how date, time, and currency data are used and displayed.</span></span>|[<span data-ttu-id="ae690-339">设置会话语言</span><span class="sxs-lookup"><span data-stu-id="ae690-339">Set a Session Language</span></span>](set-a-session-language.md)|  
  
  
##  <a name="related-content"></a><a name="Related_Content"></a> <span data-ttu-id="ae690-340">相关内容</span><span class="sxs-lookup"><span data-stu-id="ae690-340">Related Content</span></span>  
 [<span data-ttu-id="ae690-341">SQL Server Best Practices Collation Change</span><span class="sxs-lookup"><span data-stu-id="ae690-341">SQL Server Best Practices Collation Change</span></span>](https://go.microsoft.com/fwlink/?LinkId=113891)  
  
 [<span data-ttu-id="ae690-342">"SQL Server Best Practices Migration to Unicode"</span><span class="sxs-lookup"><span data-stu-id="ae690-342">"SQL Server Best Practices Migration to Unicode"</span></span>](https://go.microsoft.com/fwlink/?LinkId=113890)  
  
 [<span data-ttu-id="ae690-343">Unicode Consortium 网站</span><span class="sxs-lookup"><span data-stu-id="ae690-343">Unicode Consortium Web site</span></span>](https://go.microsoft.com/fwlink/?LinkId=48619)  
  
## <a name="see-also"></a><span data-ttu-id="ae690-344">另请参阅</span><span class="sxs-lookup"><span data-stu-id="ae690-344">See Also</span></span>  
 <span data-ttu-id="ae690-345">[包含数据库的排序规则](../databases/contained-database-collations.md) </span><span class="sxs-lookup"><span data-stu-id="ae690-345">[Contained Database Collations](../databases/contained-database-collations.md) </span></span>  
 <span data-ttu-id="ae690-346">[创建全文索引时选择语言](../search/choose-a-language-when-creating-a-full-text-index.md) </span><span class="sxs-lookup"><span data-stu-id="ae690-346">[Choose a Language When Creating a Full-Text Index](../search/choose-a-language-when-creating-a-full-text-index.md) </span></span>  
 <span data-ttu-id="ae690-347">[sys.fn_helpcollations (Transact-SQL)](https://msdn.microsoft.com/library/ms187963(SQL.130).aspx)</span><span class="sxs-lookup"><span data-stu-id="ae690-347">[sys.fn_helpcollations (Transact-SQL)](https://msdn.microsoft.com/library/ms187963(SQL.130).aspx)</span></span>  
  
  
