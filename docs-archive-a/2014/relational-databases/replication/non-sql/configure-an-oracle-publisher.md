---
title: 配置 Oracle 发布服务器 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Oracle publishing [SQL Server replication], configuring
ms.assetid: 240c8416-c8e5-4346-8433-07e0f779099f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 4941a02deb770678f4efcf4d2dfc7b08243fff54
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87690545"
---
# <a name="configure-an-oracle-publisher"></a><span data-ttu-id="04f26-102">配置 Oracle 发布服务器</span><span class="sxs-lookup"><span data-stu-id="04f26-102">Configure an Oracle Publisher</span></span>
  <span data-ttu-id="04f26-103">Oracle 发布服务器中的发布的创建方法与典型快照和事务发布相同，但在创建 Oracle 发布服务器中的发布之前，必须先完成下列步骤（本主题详细介绍步骤 1、步骤 3 和步骤 4）：</span><span class="sxs-lookup"><span data-stu-id="04f26-103">Publications from Oracle Publishers are created in the same way typical snapshot and transactional publications are created, but prior to creating a publication from an Oracle Publisher, you must complete the following steps (steps one, three, and four are described in detail in this topic.):</span></span>  
  
1.  <span data-ttu-id="04f26-104">使用提供的脚本在 Oracle 数据库中创建复制管理用户。</span><span class="sxs-lookup"><span data-stu-id="04f26-104">Create a replication administrative user within the Oracle database using the supplied script.</span></span>  
  
2.  <span data-ttu-id="04f26-105">对于将发布的表，直接（而不是通过角色）将对每个表的 SELECT 权限授予第一步创建的 Oracle 管理用户。</span><span class="sxs-lookup"><span data-stu-id="04f26-105">For the tables that you will publish, grant SELECT permission directly on each of them (not through a role) to the Oracle administrative user you created in step one.</span></span>  
  
3.  <span data-ttu-id="04f26-106">在 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分发服务器上安装 Oracle 客户端软件和 OLE DB 提供程序，然后停止并重启 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 实例。</span><span class="sxs-lookup"><span data-stu-id="04f26-106">Install the Oracle client software and OLE DB provider on the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor, and then stop and restart the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="04f26-107">如果分发服务器运行在 64 位平台上，则必须使用 64 位版本的 Oracle OLE DB 访问接口。</span><span class="sxs-lookup"><span data-stu-id="04f26-107">If the Distributor is running on a 64 bit platform, you must use the 64 bit version of the Oracle OLE DB provider.</span></span>  
  
4.  <span data-ttu-id="04f26-108">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分发服务器上将 Oracle 数据库配置为发布服务器。</span><span class="sxs-lookup"><span data-stu-id="04f26-108">Configure the Oracle database as a Publisher at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor.</span></span>  
  
 <span data-ttu-id="04f26-109">有关 Oracle 发布服务器可以发布的对象的列表，请参阅 [Oracle 发布服务器的设计注意事项和限制](design-considerations-and-limitations-for-oracle-publishers.md)。</span><span class="sxs-lookup"><span data-stu-id="04f26-109">For a list of objects that can be replicated from an Oracle database, see [Design Considerations and Limitations for Oracle Publishers](design-considerations-and-limitations-for-oracle-publishers.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="04f26-110">您必须是 **sysadmin** 固定服务器角色的成员，才能启用发布服务器或分发服务器以及创建 Oracle 发布或来自 Oracle 发布的订阅。</span><span class="sxs-lookup"><span data-stu-id="04f26-110">You must be a member of the **sysadmin** fixed server role to enable a Publisher or Distributor and to create an Oracle publication or a subscription from an Oracle publication.</span></span>  
  
## <a name="creating-the-replication-administrative-user-schema-within-the-oracle-database"></a><span data-ttu-id="04f26-111">在 Oracle 数据库中创建复制管理用户架构</span><span class="sxs-lookup"><span data-stu-id="04f26-111">Creating the Replication Administrative User Schema within the Oracle Database</span></span>  
 <span data-ttu-id="04f26-112">您必须创建一个用户架构，使复制代理在该用户架构的上下文中连接到 Oracle 数据库并执行操作。</span><span class="sxs-lookup"><span data-stu-id="04f26-112">Replication agents connect to the Oracle database and perform operations in the context of a user schema that you must create.</span></span> <span data-ttu-id="04f26-113">必须授予此架构多种权限，下一部分列出了这些权限。</span><span class="sxs-lookup"><span data-stu-id="04f26-113">This schema must be granted a number of permissions, which are listed in the next section.</span></span> <span data-ttu-id="04f26-114">此架构拥有由 Oracle 发布服务器上的 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 复制进程创建的所有对象，但公共同义词 MSSQLSERVERDISTRIBUTOR 除外。</span><span class="sxs-lookup"><span data-stu-id="04f26-114">This schema owns all objects created by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication process on the Oracle Publisher, with the exception of a public synonym, **MSSQLSERVERDISTRIBUTOR**.</span></span> <span data-ttu-id="04f26-115">有关在 Oracle 数据库中创建的对象的详细信息，请参阅 [Objects Created on the Oracle Publisher](objects-created-on-the-oracle-publisher.md)。</span><span class="sxs-lookup"><span data-stu-id="04f26-115">For more information about the objects created in the Oracle database, see [Objects Created on the Oracle Publisher](objects-created-on-the-oracle-publisher.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="04f26-116">删除 **MSSQLSERVERDISTRIBUTOR** 公共同义词和用 **CASCADE** 选项配置的 Oracle 复制用户，会删除 Oracle 发布服务器上的所有复制对象。</span><span class="sxs-lookup"><span data-stu-id="04f26-116">Dropping the **MSSQLSERVERDISTRIBUTOR** public synonym and the configured Oracle replication user with the **CASCADE** option removes all replication objects from the Oracle Publisher.</span></span>  
  
 <span data-ttu-id="04f26-117">有一个示例脚本可以帮助建立 Oracle 复制用户架构。</span><span class="sxs-lookup"><span data-stu-id="04f26-117">A sample script has been provided to aid in the setup of the Oracle replication user schema.</span></span> <span data-ttu-id="04f26-118">安装 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 后，该脚本位于以下目录中： *\<drive>* :\\\Program Files\Microsoft SQL Server\\ *\<InstanceName>* \MSSQL\Install\oracleadmin.sql。</span><span class="sxs-lookup"><span data-stu-id="04f26-118">The script is available in the following directory after installation of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]: *\<drive>*:\\\Program Files\Microsoft SQL Server\\*\<InstanceName>* \MSSQL\Install\oracleadmin.sql.</span></span> <span data-ttu-id="04f26-119">[Script to Grant Oracle Permissions](script-to-grant-oracle-permissions.md)主题中也包括了此脚本。</span><span class="sxs-lookup"><span data-stu-id="04f26-119">It is also included in the topic [Script to Grant Oracle Permissions](script-to-grant-oracle-permissions.md).</span></span>  
  
 <span data-ttu-id="04f26-120">使用具有 DBA 权限的帐户连接到 Oracle 数据库并执行此脚本。</span><span class="sxs-lookup"><span data-stu-id="04f26-120">Connect to the Oracle database using an account with DBA privileges and execute the script.</span></span> <span data-ttu-id="04f26-121">此脚本将提示输入复制管理用户架构的用户名和密码以及用于创建对象的默认表空间（此表空间必须已存在于 Oracle 数据库中）。</span><span class="sxs-lookup"><span data-stu-id="04f26-121">This script prompts for the user and password for the replication administrative user schema as well as the default tablespace in which to create the objects (the tablespace must already exist in the Oracle database).</span></span> <span data-ttu-id="04f26-122">有关为对象指定其他表空间的信息，请参阅[管理 Oracle 表空间](manage-oracle-tablespaces.md)。</span><span class="sxs-lookup"><span data-stu-id="04f26-122">For information about specifying other tablespaces for objects, see [Manage Oracle Tablespaces](manage-oracle-tablespaces.md).</span></span> <span data-ttu-id="04f26-123">可以任选用户名和强密码，但要将它们记下来，因为以后将 Oracle 数据库配置为发布服务器时会提示您输入此信息。</span><span class="sxs-lookup"><span data-stu-id="04f26-123">Choose any user name and strong password, but make note of both because you will be prompted for this information later when you configure the Oracle database as a Publisher.</span></span> <span data-ttu-id="04f26-124">建议只将此架构用于复制所需的对象，而不要在此架构下创建要发布的表。</span><span class="sxs-lookup"><span data-stu-id="04f26-124">It is recommended that the schema be used only for objects required by replication; do not create tables to be published in this schema.</span></span>  
  
### <a name="creating-the-user-schema-manually"></a><span data-ttu-id="04f26-125">手动创建用户架构</span><span class="sxs-lookup"><span data-stu-id="04f26-125">Creating the User Schema Manually</span></span>  
 <span data-ttu-id="04f26-126">如果手动创建复制管理用户架构，必须通过数据库角色或直接为此架构授予下列权限。</span><span class="sxs-lookup"><span data-stu-id="04f26-126">If you create the replication administrative user schema manually, you must grant the schema the following permissions, either directly or through a database role.</span></span>  
  
-   <span data-ttu-id="04f26-127">CREATE PUBLIC SYNONYM 和 DROP PUBLIC SYNONYM</span><span class="sxs-lookup"><span data-stu-id="04f26-127">CREATE PUBLIC SYNONYM and DROP PUBLIC SYNONYM</span></span>  
  
-   <span data-ttu-id="04f26-128">CREATE PROCEDURE</span><span class="sxs-lookup"><span data-stu-id="04f26-128">CREATE PROCEDURE</span></span>  
  
-   <span data-ttu-id="04f26-129">CREATE SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="04f26-129">CREATE SEQUENCE</span></span>  
  
-   <span data-ttu-id="04f26-130">CREATE SESSION</span><span class="sxs-lookup"><span data-stu-id="04f26-130">CREATE SESSION</span></span>  
  
 <span data-ttu-id="04f26-131">还必须直接为用户授予下列权限（不是通过角色）：</span><span class="sxs-lookup"><span data-stu-id="04f26-131">You must also grant the following permissions to the user directly (not through a role):</span></span>  
  
-   <span data-ttu-id="04f26-132">CREATE ANY TRIGGER。</span><span class="sxs-lookup"><span data-stu-id="04f26-132">CREATE ANY TRIGGER.</span></span> <span data-ttu-id="04f26-133">快照和事务复制都需要此权限。</span><span class="sxs-lookup"><span data-stu-id="04f26-133">This is required only both snapshot and transactional replication.</span></span>  
  
-   <span data-ttu-id="04f26-134">CREATE TABLE</span><span class="sxs-lookup"><span data-stu-id="04f26-134">CREATE TABLE</span></span>  
  
-   <span data-ttu-id="04f26-135">CREATE VIEW</span><span class="sxs-lookup"><span data-stu-id="04f26-135">CREATE VIEW</span></span>  
  
## <a name="installing-and-configuring-oracle-client-networking-software-on-the-sql-server-distributor"></a><span data-ttu-id="04f26-136">在 SQL Server 分发服务器上安装和配置 Oracle 客户端网络软件</span><span class="sxs-lookup"><span data-stu-id="04f26-136">Installing and Configuring Oracle Client Networking Software on the SQL Server Distributor</span></span>  
 <span data-ttu-id="04f26-137">必须在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分发服务器上安装和配置 Oracle 客户端网络软件和 Oracle OLE DB 访问接口，这样分发服务器才能连接到 Oracle 发布服务器。</span><span class="sxs-lookup"><span data-stu-id="04f26-137">You must install and configure Oracle client networking software and the Oracle OLE DB provider on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor, so that the Distributor can make connections to the Oracle Publisher.</span></span> <span data-ttu-id="04f26-138">安装软件后，对安装软件的文件夹设置适当的权限，然后重新启动 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 实例以确保更新所有设置（后面的“设置目录权限”部分对权限进行了介绍）。</span><span class="sxs-lookup"><span data-stu-id="04f26-138">After installing the software, set the appropriate permissions on the folders in which the software is installed, and then stop and restart the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to ensure that all settings are updated (permissions are described later, in the section "Setting Directory Permissions").</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="04f26-139">Oracle 客户端网络软件必须是可以获得的最新版本。</span><span class="sxs-lookup"><span data-stu-id="04f26-139">The Oracle client networking software must be the most recent version available.</span></span> <span data-ttu-id="04f26-140">Oracle 建议用户安装最新版本的客户端软件。</span><span class="sxs-lookup"><span data-stu-id="04f26-140">Oracle recommends that users install the most recent versions of client software.</span></span> <span data-ttu-id="04f26-141">因此，客户端软件的版本通常比数据库软件更高。</span><span class="sxs-lookup"><span data-stu-id="04f26-141">The client software is therefore often a more recent version than the database software.</span></span>  
  
 <span data-ttu-id="04f26-142">安装和配置客户端网络软件的最直接的方法是使用 Oracle 客户端磁盘上的 Oracle Universal Installer 和 Net Configuration Assistant。</span><span class="sxs-lookup"><span data-stu-id="04f26-142">The most straightforward way to install and configure the client networking software is to use the Oracle Universal Installer and Net Configuration Assistant on the Oracle Client disk.</span></span>  
  
 <span data-ttu-id="04f26-143">在 Oracle Universal Installer 中，您需要提供以下信息：</span><span class="sxs-lookup"><span data-stu-id="04f26-143">In the Oracle Universal Installer, you will supply the following information:</span></span>  
  
|<span data-ttu-id="04f26-144">信息</span><span class="sxs-lookup"><span data-stu-id="04f26-144">Information</span></span>|<span data-ttu-id="04f26-145">说明</span><span class="sxs-lookup"><span data-stu-id="04f26-145">Description</span></span>|  
|-----------------|-----------------|  
|<span data-ttu-id="04f26-146">Oracle 主目录</span><span class="sxs-lookup"><span data-stu-id="04f26-146">Oracle Home</span></span>|<span data-ttu-id="04f26-147">这是 Oracle 软件的安装目录的路径。</span><span class="sxs-lookup"><span data-stu-id="04f26-147">This is the path to the install directory for the Oracle software.</span></span> <span data-ttu-id="04f26-148">接受默认路径（C:\oracle\ora90 或类似路径），或输入另一个路径。</span><span class="sxs-lookup"><span data-stu-id="04f26-148">Accept the default (C:\oracle\ora90 or similar) or enter another path.</span></span> <span data-ttu-id="04f26-149">有关 Oracle 主目录的详细信息，请参阅本主题后面的“Oracle 主目录注意事项”部分。</span><span class="sxs-lookup"><span data-stu-id="04f26-149">For more information about the Oracle Home, see the section "Considerations for Oracle Home" later in this topic.</span></span>|  
|<span data-ttu-id="04f26-150">Oracle 主目录名称</span><span class="sxs-lookup"><span data-stu-id="04f26-150">Oracle home name</span></span>|<span data-ttu-id="04f26-151">Oracle 主目录路径的别名。</span><span class="sxs-lookup"><span data-stu-id="04f26-151">An alias for the Oracle home path.</span></span>|  
|<span data-ttu-id="04f26-152">安装类型</span><span class="sxs-lookup"><span data-stu-id="04f26-152">Installation type</span></span>|<span data-ttu-id="04f26-153">在 Oracle 10g 中，选择 **Administrator** 安装选项。</span><span class="sxs-lookup"><span data-stu-id="04f26-153">In Oracle 10g, select the **Administrator** installation option.</span></span>|  
  
 <span data-ttu-id="04f26-154">完成 Oracle Universal Installer 之后，使用 Net Configuration Assistant 配置网络连接。</span><span class="sxs-lookup"><span data-stu-id="04f26-154">After the Oracle Universal Installer is complete, use the Net Configuration Assistant to configure network connectivity.</span></span> <span data-ttu-id="04f26-155">必须提供四部分信息以配置网络连接。</span><span class="sxs-lookup"><span data-stu-id="04f26-155">You must supply four pieces of information to configure network connectivity.</span></span> <span data-ttu-id="04f26-156">在设置数据库和侦听器时，Oracle 数据库管理员将配置网络。如果您没有此信息，应由数据库管理员提供此信息。</span><span class="sxs-lookup"><span data-stu-id="04f26-156">The Oracle database administrator configures the network configuration when setting up the database and listener and should be able to provide this information if you do not have it.</span></span> <span data-ttu-id="04f26-157">必须执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="04f26-157">You must do the following:</span></span>  
  
|<span data-ttu-id="04f26-158">操作</span><span class="sxs-lookup"><span data-stu-id="04f26-158">Action</span></span>|<span data-ttu-id="04f26-159">说明</span><span class="sxs-lookup"><span data-stu-id="04f26-159">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="04f26-160">标识数据库</span><span class="sxs-lookup"><span data-stu-id="04f26-160">Identify the database</span></span>|<span data-ttu-id="04f26-161">标识数据库的方法有两种。</span><span class="sxs-lookup"><span data-stu-id="04f26-161">There are two methods for identifying the database.</span></span> <span data-ttu-id="04f26-162">第一种方法是使用 Oracle 系统标识符 (SID)，该方法在所有 Oracle 版本中均可用。</span><span class="sxs-lookup"><span data-stu-id="04f26-162">The first method uses the Oracle System Identifier (SID) and is available in every Oracle release.</span></span> <span data-ttu-id="04f26-163">第二种方法是使用服务名称，该名称从 Oracle 8.0 版本开始才可用。</span><span class="sxs-lookup"><span data-stu-id="04f26-163">The second method uses the Service Name, which is available starting with Oracle release 8.0.</span></span> <span data-ttu-id="04f26-164">这两种方法都使用一个在创建数据库时所配置的值，并且要注意，客户端网络配置所使用的命名方法要与管理员在配置数据库的侦听器时使用的命名方法相同。</span><span class="sxs-lookup"><span data-stu-id="04f26-164">Both methods use a value that is configured when the database is created and it is important that the client networking configuration use the same naming method that the administrator used when configuring the listener for the database.</span></span>|  
|<span data-ttu-id="04f26-165">标识数据库的网络别名</span><span class="sxs-lookup"><span data-stu-id="04f26-165">Identify a network alias for the database</span></span>|<span data-ttu-id="04f26-166">必须指定网络别名，该别名将用来访问 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="04f26-166">You must specify a network alias, which is used to access the Oracle database.</span></span> <span data-ttu-id="04f26-167">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分发服务器上将 Oracle 数据库标识为发布服务器时，也要提供此别名。</span><span class="sxs-lookup"><span data-stu-id="04f26-167">You also supply this alias when you identify the Oracle database as a Publisher at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor.</span></span> <span data-ttu-id="04f26-168">实际上，网络别名是指向在创建数据库时所配置的远程 SID 或服务名称的指针。在不同的 Oracle 版本和产品中存在多种引用名称，包括 Net 服务名称和 TNS 别名。</span><span class="sxs-lookup"><span data-stu-id="04f26-168">The network alias is essentially a pointer to the remote SID or Service Name that was configured when the database was created; it has been referred to by several names in different Oracle releases and products, including Net Service Name and TNS Alias.</span></span> <span data-ttu-id="04f26-169">在登录时，SQL\*Plus 将提示您输入此别名来作为“Host String”参数。</span><span class="sxs-lookup"><span data-stu-id="04f26-169">SQL\*Plus prompts for this alias as the "Host String" parameter when you log in.</span></span>|  
|<span data-ttu-id="04f26-170">选择网络协议</span><span class="sxs-lookup"><span data-stu-id="04f26-170">Select the network protocol</span></span>|<span data-ttu-id="04f26-171">选择要支持的相应协议。</span><span class="sxs-lookup"><span data-stu-id="04f26-171">Select the appropriate protocols you would like to support.</span></span> <span data-ttu-id="04f26-172">大多数应用程序使用 TCP。</span><span class="sxs-lookup"><span data-stu-id="04f26-172">Most applications use TCP.</span></span>|  
|<span data-ttu-id="04f26-173">指定主机信息以标识数据库侦听器</span><span class="sxs-lookup"><span data-stu-id="04f26-173">Specify the host information to identify the database listener</span></span>|<span data-ttu-id="04f26-174">主机是正在运行 Oracle 侦听器的计算机的名称或 DNS 别名，该计算机通常是该数据库所驻留的计算机。</span><span class="sxs-lookup"><span data-stu-id="04f26-174">The host is the name or DNS alias of the computer on which the Oracle listener is running, which is typically the same computer on which the database resides.</span></span> <span data-ttu-id="04f26-175">对于某些协议，必须提供其他信息。</span><span class="sxs-lookup"><span data-stu-id="04f26-175">For some protocols, you must provide additional information.</span></span> <span data-ttu-id="04f26-176">例如，如果选择 TCP，则必须提供相应的端口，以便侦听器侦听针对目标数据库的连接请求。</span><span class="sxs-lookup"><span data-stu-id="04f26-176">For example, if you select TCP, you must supply the port on which the listener is listening for connection requests to the target database.</span></span> <span data-ttu-id="04f26-177">默认 TCP 配置使用 1521 端口。</span><span class="sxs-lookup"><span data-stu-id="04f26-177">The default TCP configuration uses port 1521.</span></span>|  
  
### <a name="setting-directory-permissions"></a><span data-ttu-id="04f26-178">设置目录权限</span><span class="sxs-lookup"><span data-stu-id="04f26-178">Setting Directory Permissions</span></span>  
 <span data-ttu-id="04f26-179">在分发服务器上运行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服务时所使用的帐户，必须对 Oracle 客户端网络软件的安装目录（和所有子目录）具有读取和执行权限。</span><span class="sxs-lookup"><span data-stu-id="04f26-179">The account under which the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service on the Distributor runs must be granted read and execute permissions for the directory (and all subdirectories) in which the Oracle client networking software is installed.</span></span>  
  
### <a name="testing-connectivity-between-the-sql-server-distributor-and-the-oracle-publisher"></a><span data-ttu-id="04f26-180">测试 SQL Server 分发服务器和 Oracle 发布服务器之间的连接</span><span class="sxs-lookup"><span data-stu-id="04f26-180">Testing Connectivity Between the SQL Server Distributor and the Oracle Publisher</span></span>  
 <span data-ttu-id="04f26-181">Net Configuration Assistant 快要结束的时候，可能会出现一个测试 Oracle 发布服务器连接的选项。</span><span class="sxs-lookup"><span data-stu-id="04f26-181">Near the end of the Net Configuration Assistant there might be an option to test the connection to the Oracle Publisher.</span></span> <span data-ttu-id="04f26-182">在测试连接之前，请确保 Oracle 数据库实例已联机，并且 Oracle 侦听器正在运行。</span><span class="sxs-lookup"><span data-stu-id="04f26-182">Before you test the connection, ensure that the Oracle database instance is online and that the Oracle Listener is running.</span></span> <span data-ttu-id="04f26-183">如果测试不成功，请与负责所要连接的数据库的 Oracle DBA 联系。</span><span class="sxs-lookup"><span data-stu-id="04f26-183">If the test is unsuccessful, contact the Oracle DBA responsible for the database to which you are trying to connect.</span></span>  
  
 <span data-ttu-id="04f26-184">成功连接到 Oracle 发布服务器后，请尝试使用与您所创建的复制管理用户架构关联的帐户和密码登录数据库。</span><span class="sxs-lookup"><span data-stu-id="04f26-184">After you have made a successful connection to the Oracle Publisher, attempt to log in to the database using the account and password associated with the replication administrative user schema you created.</span></span> <span data-ttu-id="04f26-185">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服务所使用的 Windows 帐户下运行时必须执行下列操作：</span><span class="sxs-lookup"><span data-stu-id="04f26-185">The following must be performed while running under the same Windows account that the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service uses:</span></span>  
  
1.  <span data-ttu-id="04f26-186">单击 **“启动”** ，再单击 **“运行”** 。</span><span class="sxs-lookup"><span data-stu-id="04f26-186">Click **Start**, and then click **Run**.</span></span>  
  
2.  <span data-ttu-id="04f26-187">键入 `cmd` ，然后单击 **“确定”** 。</span><span class="sxs-lookup"><span data-stu-id="04f26-187">Type `cmd` and click **OK**.</span></span>  
  
3.  <span data-ttu-id="04f26-188">在命令提示符处，键入：</span><span class="sxs-lookup"><span data-stu-id="04f26-188">At the command prompt, type:</span></span>  
  
     `sqlplus <UserSchemaLogin>/<UserSchemaPassword>@<NetServiceName>`  
  
     <span data-ttu-id="04f26-189">例如： `sqlplus replication/$tr0ngPasswerd@Oracle90Server`</span><span class="sxs-lookup"><span data-stu-id="04f26-189">For example: `sqlplus replication/$tr0ngPasswerd@Oracle90Server`</span></span>  
  
4.  <span data-ttu-id="04f26-190">如果网络配置成功，将成功登录，并显示 `SQL` 提示符。</span><span class="sxs-lookup"><span data-stu-id="04f26-190">If the networking configuration was successful, the login will succeed and you will see a `SQL` prompt.</span></span>  
  
5.  <span data-ttu-id="04f26-191">如果在连接到 Oracle 数据库时出现问题，请参阅 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 中的“ [ssNoVersion](troubleshooting-oracle-publishers.md)。</span><span class="sxs-lookup"><span data-stu-id="04f26-191">If you experience problems connecting to the Oracle database, see the section "The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor cannot connect to the Oracle database instance" in [Troubleshooting Oracle Publishers](troubleshooting-oracle-publishers.md).</span></span>  
  
### <a name="considerations-for-oracle-home"></a><span data-ttu-id="04f26-192">Oracle 主目录注意事项</span><span class="sxs-lookup"><span data-stu-id="04f26-192">Considerations for Oracle Home</span></span>  
 <span data-ttu-id="04f26-193">Oracle 支持并行安装应用程序二进制文件，但是，在给定时间复制过程只能使用一组二进制文件。</span><span class="sxs-lookup"><span data-stu-id="04f26-193">Oracle supports side-by-side installation of application binaries, but only one set of binaries can be used by replication at a given time.</span></span> <span data-ttu-id="04f26-194">每组二进制文件都与一个 Oracle 主目录关联。二进制文件位于 %ORACLE_HOME%\bin 目录中。</span><span class="sxs-lookup"><span data-stu-id="04f26-194">Each set of binaries is associated with an Oracle Home; the binaries are in the directory %ORACLE_HOME%\bin.</span></span> <span data-ttu-id="04f26-195">复制过程中与 Oracle 发布服务器建立连接时，必须确保使用正确的二进制文件集（尤其是客户端网络软件的最新版本）。</span><span class="sxs-lookup"><span data-stu-id="04f26-195">You must ensure that the correct set of binaries (specifically the latest version of the client networking software) is used when replication makes connections to the Oracle Publisher.</span></span>  
  
 <span data-ttu-id="04f26-196">使用 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服务和 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 代理服务所使用的帐户登录到分发服务器，并设置相应的环境变量。</span><span class="sxs-lookup"><span data-stu-id="04f26-196">Log into the Distributor with the accounts used by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent service and set the appropriate environment variables.</span></span> <span data-ttu-id="04f26-197">应将 %ORACLE_HOME% 变量设置为引用在安装客户端网络软件时所指定的安装点。</span><span class="sxs-lookup"><span data-stu-id="04f26-197">The %ORACLE_HOME% variable should be set to refer to the installation point you specified when you installed the client networking software.</span></span> <span data-ttu-id="04f26-198">%PATH% 必须包括 %ORACLE_HOME% \bin 目录作为所遇到的第一个 Oracle 项。</span><span class="sxs-lookup"><span data-stu-id="04f26-198">The %PATH% must include the %ORACLE_HOME% \bin directory as the first Oracle entry that is encountered.</span></span> <span data-ttu-id="04f26-199">有关设置环境变量的信息，请参阅 Windows 文档。</span><span class="sxs-lookup"><span data-stu-id="04f26-199">For information about setting environment variables, see the Windows documentation.</span></span>  
  
## <a name="configuring-the-oracle-database-as-a-publisher-at-the-sql-server-distributor"></a><span data-ttu-id="04f26-200">在 SQL Server 分发服务器上将 Oracle 数据库配置为发布服务器</span><span class="sxs-lookup"><span data-stu-id="04f26-200">Configuring the Oracle Database as a Publisher at the SQL Server Distributor</span></span>  
 <span data-ttu-id="04f26-201">Oracle 发布服务器总是使用远程分发服务器。您必须配置一个 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 实例以作为 Oracle 发布服务器的分发服务器（一个 Oracle 发布服务器只能使用一个分发服务器，但单个分发服务器可以为多个 Oracle 发布服务器提供服务）。</span><span class="sxs-lookup"><span data-stu-id="04f26-201">Oracle Publishers always use a remote Distributor; you must configure an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to act as a Distributor for your Oracle Publisher (an Oracle Publisher can only use one Distributor, but a single Distributor can service more than one Oracle Publisher).</span></span> <span data-ttu-id="04f26-202">配置分发服务器后，通过 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 、Transact-SQL 或复制管理对象 (RMO)，在 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]分发服务器上将 Oracle 数据库实例标识为发布服务器。</span><span class="sxs-lookup"><span data-stu-id="04f26-202">After a Distributor is configured, identify the Oracle database instance as a Publisher at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor through [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], Transact-SQL, or Replication Management Objects (RMO).</span></span> <span data-ttu-id="04f26-203">有关如何配置分发服务器的详细信息，请参阅[配置分发](../configure-distribution.md)。</span><span class="sxs-lookup"><span data-stu-id="04f26-203">For more information about configuring a Distributor, see [Configure Distribution](../configure-distribution.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="04f26-204">Oracle 发布服务器不能与它的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分发服务器同名，也不能与任何使用同一分发服务器的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 发布服务器同名。</span><span class="sxs-lookup"><span data-stu-id="04f26-204">An Oracle Publisher cannot have the same name as its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor or the same name as any of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publishers using the same Distributor.</span></span>  
  
 <span data-ttu-id="04f26-205">将 Oracle 数据库标识为发布服务器时，必须选择 Oracle 发布选项：“完整”或“Oracle 网关”。</span><span class="sxs-lookup"><span data-stu-id="04f26-205">When you identify the Oracle database as a Publisher, you must choose an Oracle publishing option: Complete or Oracle Gateway.</span></span> <span data-ttu-id="04f26-206">标识发布服务器后，除非删除并重新配置发布服务器，否则无法更改此选项。</span><span class="sxs-lookup"><span data-stu-id="04f26-206">After a Publisher is identified, this option cannot be changed without dropping and reconfiguring the Publisher.</span></span> <span data-ttu-id="04f26-207">“完整”选项用于为快照和事务发布提供 Oracle 发布的完整的支持功能集。</span><span class="sxs-lookup"><span data-stu-id="04f26-207">The Complete option is designed to provide snapshot and transactional publications with the complete set of supported features for Oracle publishing.</span></span> <span data-ttu-id="04f26-208">Oracle Gateway 选项提供特定的设计优化，以提高当复制作为系统间的网关时的性能。</span><span class="sxs-lookup"><span data-stu-id="04f26-208">The Oracle Gateway option provides specific design optimizations to improve performance for cases where replication serves as a gateway between systems.</span></span>  
  
 <span data-ttu-id="04f26-209">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分发服务器上标识 Oracle 发布服务器后，复制创建一个链接服务器，其名称与 Oracle 数据库的 TNS 服务名相同。</span><span class="sxs-lookup"><span data-stu-id="04f26-209">After the Oracle Publisher is identified at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributor, replication creates a linked server with the same name as the TNS service name of the Oracle database.</span></span> <span data-ttu-id="04f26-210">此链接服务器只能由复制使用。</span><span class="sxs-lookup"><span data-stu-id="04f26-210">This linked server can be used only by replication.</span></span> <span data-ttu-id="04f26-211">如果需要通过链接服务器连接来连接到 Oracle 发布服务器，请创建另一个 TNS 服务名称，然后在调用 [sp_addlinkedserver &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql) 时使用该名称。</span><span class="sxs-lookup"><span data-stu-id="04f26-211">If you need to connect to the Oracle Publisher over a linked server connection, create another TNS service name, and then use this name when calling [sp_addlinkedserver &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>  
  
 <span data-ttu-id="04f26-212">若要配置 Oracle 发布服务器和创建发布，请参阅 [Create a Publication from an Oracle Database](../publish/create-a-publication-from-an-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="04f26-212">To configure an Oracle Publisher and create a publication, see [Create a Publication from an Oracle Database](../publish/create-a-publication-from-an-oracle-database.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="04f26-213">另请参阅</span><span class="sxs-lookup"><span data-stu-id="04f26-213">See Also</span></span>  
 <span data-ttu-id="04f26-214">[Oracle 发布服务器的管理注意事项](administrative-considerations-for-oracle-publishers.md) </span><span class="sxs-lookup"><span data-stu-id="04f26-214">[Administrative Considerations for Oracle Publishers](administrative-considerations-for-oracle-publishers.md) </span></span>  
 <span data-ttu-id="04f26-215">[Data Type Mapping for Oracle Publishers](data-type-mapping-for-oracle-publishers.md) </span><span class="sxs-lookup"><span data-stu-id="04f26-215">[Data Type Mapping for Oracle Publishers](data-type-mapping-for-oracle-publishers.md) </span></span>  
 <span data-ttu-id="04f26-216">[有关 Oracle 发布的术语词汇表](glossary-of-terms-for-oracle-publishing.md) </span><span class="sxs-lookup"><span data-stu-id="04f26-216">[Glossary of Terms for Oracle Publishing](glossary-of-terms-for-oracle-publishing.md) </span></span>  
 [<span data-ttu-id="04f26-217">Oracle 发布概述</span><span class="sxs-lookup"><span data-stu-id="04f26-217">Oracle Publishing Overview</span></span>](oracle-publishing-overview.md)  
  
  
