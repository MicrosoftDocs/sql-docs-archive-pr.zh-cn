---
title: 指定项目类型（复制 Transact-SQL 编程）| Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
dev_langs:
- TSQL
helpviewer_keywords:
- publishing [SQL Server replication], stored procedure execution
- articles [SQL Server replication], transactional replication options
- articles [SQL Server replication], merge replication options
- stored procedures [SQL Server replication], publishing
ms.assetid: d7effbac-c45b-423f-97ae-fd426b1050ba
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 7864825891203530bf30015471ca22a1daccf9b9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87691659"
---
# <a name="specify-article-types-replication-transact-sql-programming"></a><span data-ttu-id="05978-102">指定项目类型（复制 Transact-SQL 编程）</span><span class="sxs-lookup"><span data-stu-id="05978-102">Specify Article Types (Replication Transact-SQL Programming)</span></span>
  <span data-ttu-id="05978-103">复制的默认项目类型为表项目，但可以将其他数据库对象发布为项目，这些项目包括视图、存储过程、用户定义函数以及存储过程执行。</span><span class="sxs-lookup"><span data-stu-id="05978-103">The default article types for replication are table articles, but you can publish other database objects as articles, including views, stored procedures, user-defined functions, and stored procedure execution.</span></span> <span data-ttu-id="05978-104">定义项目时，您可以使用复制存储过程以编程方式指定项目类型。</span><span class="sxs-lookup"><span data-stu-id="05978-104">You can use replication stored procedures to specify an article type programmatically when you define an article.</span></span> <span data-ttu-id="05978-105">您要使用的具体过程取决于复制的类型和项目的类型。</span><span class="sxs-lookup"><span data-stu-id="05978-105">The procedures that you use depend on the type of replication and article type.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="05978-106">定义表、视图和存储过程项目时采用仅限架构的设计表示只复制对象定义。</span><span class="sxs-lookup"><span data-stu-id="05978-106">The schema-only designation when defining table, view, and stored procedure articles indicates that only the object definition is replicated.</span></span>  
  
### <a name="to-publish-a-table-article-in-a-transactional-or-snapshot-publication"></a><span data-ttu-id="05978-107">在事务发布或快照发布中发布表项目</span><span class="sxs-lookup"><span data-stu-id="05978-107">To publish a table article in a transactional or snapshot publication</span></span>  
  
1.  <span data-ttu-id="05978-108">在发布服务器上，对发布数据库执行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="05978-108">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="05978-109">为 " \*\* \@ 类型\*\*" 指定以下值之一以定义项目类型：</span><span class="sxs-lookup"><span data-stu-id="05978-109">Specify one of the following values for **\@type** to define the type of article:</span></span>  
  
    -   <span data-ttu-id="05978-110">**logbased** - 基于日志的表项目，是事务复制和快照复制的默认值。</span><span class="sxs-lookup"><span data-stu-id="05978-110">**logbased** - a log-based table article, which is the default for transactional and snapshot replication.</span></span> <span data-ttu-id="05978-111">复制会自动生成用于水平筛选的存储过程和定义垂直筛选项目的视图。</span><span class="sxs-lookup"><span data-stu-id="05978-111">Replication automatically generates the stored procedure used for horizontal filtering and the view that defines a vertically filtered article.</span></span>  
  
    -   <span data-ttu-id="05978-112">**logbased manualfilter** -基于日志的水平筛选项目，其中用于水平筛选的存储过程由用户手动创建和定义，并指定为\*\* \@ filter\*\*。</span><span class="sxs-lookup"><span data-stu-id="05978-112">**logbased manualfilter** - a log-based, horizontally filtered article where the stored procedure used for horizontal filtering is manually created and defined by the user and specified for **\@filter**.</span></span> <span data-ttu-id="05978-113">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-113">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md).</span></span>  
  
    -   <span data-ttu-id="05978-114">**logbased manualview** -基于日志的垂直筛选项目，其中定义垂直筛选项目的视图由用户创建和定义，并指定\*\* \@ sync_object\*\*。</span><span class="sxs-lookup"><span data-stu-id="05978-114">**logbased manualview** - a log-based, vertically filtered article where the view that defines the vertically filtered article is created and defined by the user and specified for **\@sync_object**.</span></span> <span data-ttu-id="05978-115">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) 和 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-115">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) and [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
    -   <span data-ttu-id="05978-116">**logbased manualboth** -基于日志的水平和垂直筛选项目，其中用于水平筛选的存储过程和定义垂直筛选项目的视图均由用户创建和定义，并分别指定给\*\* \@ filter**和** \@ sync_object\*\*。</span><span class="sxs-lookup"><span data-stu-id="05978-116">**logbased manualboth** - a log-based, horizontally and vertically filtered article where both the stored procedure used for horizontal filtering and the view that defines the vertically filtered article are created and defined by the user and specified for **\@filter** and **\@sync_object**, respectively.</span></span> <span data-ttu-id="05978-117">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) 和 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-117">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) and [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
     <span data-ttu-id="05978-118">这样便为发布定义了一个新项目。</span><span class="sxs-lookup"><span data-stu-id="05978-118">This defines a new article for the publication.</span></span> <span data-ttu-id="05978-119">有关详细信息，请参阅 [定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-119">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="05978-120">对于 **logbased manualboth** 和 **logbased manualfilter** 项目，请执行 [sp_articlefilter](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql) 生成用于水平筛选项目的筛选存储过程。</span><span class="sxs-lookup"><span data-stu-id="05978-120">For **logbased manualboth** and **logbased manualfilter** articles, execute [sp_articlefilter](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql) to generate the filtering stored procedure for a horizontally filtered article.</span></span> <span data-ttu-id="05978-121">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-121">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md).</span></span>  
  
3.  <span data-ttu-id="05978-122">对于 **logbased manualboth**、 **logbased manualview**和 **logbased manualfilter** 项目，请执行 [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql) 生成用于定义垂直筛选项目的视图。</span><span class="sxs-lookup"><span data-stu-id="05978-122">For **logbased manualboth**, **logbased manualview**, and **logbased manualfilter** articles, execute [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql) to generate the view that defines the vertically filtered article.</span></span> <span data-ttu-id="05978-123">有关详细信息，请参阅 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-123">For more information, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
### <a name="to-publish-a-view-or-indexed-view-article-in-a-transactional-or-snapshot-publication"></a><span data-ttu-id="05978-124">在事务发布或快照发布中发布视图项目或索引视图项目</span><span class="sxs-lookup"><span data-stu-id="05978-124">To publish a view or indexed view article in a transactional or snapshot publication</span></span>  
  
1.  <span data-ttu-id="05978-125">在发布服务器上，对发布数据库执行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="05978-125">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="05978-126">为 " \*\* \@ 类型\*\*" 指定以下值之一以定义项目类型：</span><span class="sxs-lookup"><span data-stu-id="05978-126">Specify one of the following values for **\@type** to define the type of article:</span></span>  
  
    -   <span data-ttu-id="05978-127">**indexed view logbased** - 基于日志的索引视图项目</span><span class="sxs-lookup"><span data-stu-id="05978-127">**indexed view logbased** - a log-based indexed view article.</span></span> <span data-ttu-id="05978-128">复制会自动生成用于水平筛选的存储过程和定义垂直筛选项目的视图。</span><span class="sxs-lookup"><span data-stu-id="05978-128">Replication automatically generates the stored procedure used for horizontal filtering and the view that defines a vertically filtered article.</span></span>  
  
    -   <span data-ttu-id="05978-129">**view schema only** - 仅限架构的视图项目。</span><span class="sxs-lookup"><span data-stu-id="05978-129">**view schema only** - a schema-only view article.</span></span> <span data-ttu-id="05978-130">还必须复制基表。</span><span class="sxs-lookup"><span data-stu-id="05978-130">The base table must also be replicated.</span></span>  
  
    -   <span data-ttu-id="05978-131">**indexed view schema only** - 仅限架构的索引视图项目。</span><span class="sxs-lookup"><span data-stu-id="05978-131">**indexed view schema only** - a schema-only indexed view article.</span></span> <span data-ttu-id="05978-132">还必须复制基表。</span><span class="sxs-lookup"><span data-stu-id="05978-132">The base table must also be replicated.</span></span>  
  
    -   <span data-ttu-id="05978-133">**indexed view logbased manualfilter** -基于日志的水平筛选索引视图项目，其中用于水平筛选的存储过程由用户手动创建和定义，并指定为\*\* \@ filter\*\*。</span><span class="sxs-lookup"><span data-stu-id="05978-133">**indexed view logbased manualfilter** - a log-based, horizontally filtered indexed view article where the stored procedure used for horizontal filtering is manually created and defined by the user and specified for **\@filter**.</span></span> <span data-ttu-id="05978-134">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-134">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md).</span></span>  
  
    -   <span data-ttu-id="05978-135">**indexed view logbased manualview** -基于日志的筛选索引视图项目，其中定义垂直筛选项目的视图由用户创建和定义，并指定为\*\* \@ sync_object\*\*。</span><span class="sxs-lookup"><span data-stu-id="05978-135">**indexed view logbased manualview** - a log-based, filtered indexed view article where the view that defines a vertically filtered article is created and defined by the user and specified for **\@sync_object**.</span></span> <span data-ttu-id="05978-136">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) 和 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-136">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) and [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
    -   <span data-ttu-id="05978-137">**indexed view logbased manualboth** -基于日志的筛选索引视图项目，其中用于水平筛选的存储过程和定义垂直筛选项目的视图均由用户创建和定义，并分别指定给\*\* \@ filter**和** \@ sync_object\*\*。</span><span class="sxs-lookup"><span data-stu-id="05978-137">**indexed view logbased manualboth** - a log-based, filtered indexed view article where both the stored procedure used for horizontal filtering and the view that defines a vertically filtered article are created and defined by the user and specified for **\@filter** and **\@sync_object**, respectively.</span></span> <span data-ttu-id="05978-138">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) 和 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-138">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md) and [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
     <span data-ttu-id="05978-139">这样便为发布定义了一个新项目。</span><span class="sxs-lookup"><span data-stu-id="05978-139">This defines a new article for the publication.</span></span> <span data-ttu-id="05978-140">有关详细信息，请参阅 [定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-140">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="05978-141">对于 **logbased manualboth** 和 **logbased manualfilter** 项目，请执行 [sp_articlefilter](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql) 生成用于水平筛选项目的筛选存储过程。</span><span class="sxs-lookup"><span data-stu-id="05978-141">For **logbased manualboth** and **logbased manualfilter** articles, execute [sp_articlefilter](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql) to generate the filtering stored procedure for a horizontally filtered article.</span></span> <span data-ttu-id="05978-142">有关详细信息，请参阅 [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-142">For more information, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md).</span></span>  
  
3.  <span data-ttu-id="05978-143">对于 **logbased manualboth**、 **logbased manualview**和 **logbased manualfilter** 项目，请执行 [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql) 生成用于定义垂直筛选项目的视图。</span><span class="sxs-lookup"><span data-stu-id="05978-143">For **logbased manualboth**, **logbased manualview**, and **logbased manualfilter** articles, execute [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql) to generate the view that defines the vertically filtered article.</span></span> <span data-ttu-id="05978-144">有关详细信息，请参阅 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-144">For more information, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
### <a name="to-publish-a-stored-procedure-stored-procedure-execution-or-user-defined-function-article-in-a-transactional-or-snapshot-publication"></a><span data-ttu-id="05978-145">在事务发布或快照发布中发布存储过程、存储过程执行或用户定义函数项目</span><span class="sxs-lookup"><span data-stu-id="05978-145">To publish a stored procedure, stored procedure execution, or user-defined function article in a transactional or snapshot publication</span></span>  
  
1.  <span data-ttu-id="05978-146">在发布服务器上，对发布数据库执行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="05978-146">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="05978-147">为 " \*\* \@ 类型\*\*" 指定以下值之一以定义项目类型：</span><span class="sxs-lookup"><span data-stu-id="05978-147">Specify one of the following values for **\@type** to define the type of article:</span></span>  
  
    -   <span data-ttu-id="05978-148">**proc schema only** - 仅限架构的存储过程项目。</span><span class="sxs-lookup"><span data-stu-id="05978-148">**proc schema only** - a schema-only stored procedure article.</span></span>  
  
    -   <span data-ttu-id="05978-149">**proc exec** - 将存储过程的执行复制到项目的所有订阅服务器。</span><span class="sxs-lookup"><span data-stu-id="05978-149">**proc exec** - replicates the execution of the stored procedure to all Subscribers of the article.</span></span> <span data-ttu-id="05978-150">有关详细信息，请参阅 [Publishing Stored Procedure Execution in Transactional Replication](../transactional/publishing-stored-procedure-execution-in-transactional-replication.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-150">For more information, see [Publishing Stored Procedure Execution in Transactional Replication](../transactional/publishing-stored-procedure-execution-in-transactional-replication.md).</span></span>  
  
    -   <span data-ttu-id="05978-151">**serializable proc exec** - 仅当存储过程是在可序列化事务的上下文中执行时才复制存储过程的执行。</span><span class="sxs-lookup"><span data-stu-id="05978-151">**serializable proc exec** - replicates the execution of the stored procedure only if it is executed within the context of a serializable transaction.</span></span> <span data-ttu-id="05978-152">有关详细信息，请参阅 [Publishing Stored Procedure Execution in Transactional Replication](../transactional/publishing-stored-procedure-execution-in-transactional-replication.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-152">For more information, see [Publishing Stored Procedure Execution in Transactional Replication](../transactional/publishing-stored-procedure-execution-in-transactional-replication.md).</span></span>  
  
    -   <span data-ttu-id="05978-153">**func schema only** - 仅限架构的用户定义函数项目。</span><span class="sxs-lookup"><span data-stu-id="05978-153">**func schema only** - a schema-only user-defined function article.</span></span>  
  
     <span data-ttu-id="05978-154">这样便为发布定义了一个新项目。</span><span class="sxs-lookup"><span data-stu-id="05978-154">This defines a new article for the publication.</span></span> <span data-ttu-id="05978-155">有关详细信息，请参阅 [定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-155">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
### <a name="to-publish-a-table-or-view-article-in-a-merge-publication"></a><span data-ttu-id="05978-156">在合并发布中发布表或视图项目</span><span class="sxs-lookup"><span data-stu-id="05978-156">To publish a table or view article in a merge publication</span></span>  
  
1.  <span data-ttu-id="05978-157">在发布服务器上，对发布数据库执行 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="05978-157">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="05978-158">为 " \*\* \@ 类型\*\*" 指定以下值之一以定义项目类型：</span><span class="sxs-lookup"><span data-stu-id="05978-158">Specify one of the following values for **\@type** to define the type of article:</span></span>  
  
    -   <span data-ttu-id="05978-159">**table** - 表项目。</span><span class="sxs-lookup"><span data-stu-id="05978-159">**table** - a table article.</span></span>  
  
    -   <span data-ttu-id="05978-160">**indexed view schema only** - 仅限架构的索引视图项目。</span><span class="sxs-lookup"><span data-stu-id="05978-160">**indexed view schema only** - a schema-only indexed view article.</span></span>  
  
    -   <span data-ttu-id="05978-161">**view schema only** - 仅限架构的视图项目。</span><span class="sxs-lookup"><span data-stu-id="05978-161">**view schema only** - a schema-only view article.</span></span>  
  
     <span data-ttu-id="05978-162">这样便为发布定义了一个新项目。</span><span class="sxs-lookup"><span data-stu-id="05978-162">This defines a new article for the publication.</span></span> <span data-ttu-id="05978-163">有关详细信息，请参阅 [定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-163">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
### <a name="to-publish-a-stored-procedure-or-user-defined-function-article-in-a-merge-publication"></a><span data-ttu-id="05978-164">在合并发布中发布存储过程或用户定义函数项目</span><span class="sxs-lookup"><span data-stu-id="05978-164">To publish a stored procedure or user-defined function article in a merge publication</span></span>  
  
1.  <span data-ttu-id="05978-165">在发布服务器上，对发布数据库执行 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="05978-165">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="05978-166">为 " \*\* \@ 类型\*\*" 指定以下值之一以定义项目类型：</span><span class="sxs-lookup"><span data-stu-id="05978-166">Specify one of the following values for **\@type** to define the type of article:</span></span>  
  
    -   <span data-ttu-id="05978-167">**func schema only** - 仅限架构的用户定义函数项目。</span><span class="sxs-lookup"><span data-stu-id="05978-167">**func schema only** - a schema-only user-defined function article.</span></span>  
  
    -   <span data-ttu-id="05978-168">**proc schema only** - 仅限架构的存储过程项目。</span><span class="sxs-lookup"><span data-stu-id="05978-168">**proc schema only** - a schema-only stored procedure article.</span></span>  
  
     <span data-ttu-id="05978-169">这样便为发布定义了一个新项目。</span><span class="sxs-lookup"><span data-stu-id="05978-169">This defines a new article for the publication.</span></span> <span data-ttu-id="05978-170">有关详细信息，请参阅 [定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="05978-170">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="05978-171">另请参阅</span><span class="sxs-lookup"><span data-stu-id="05978-171">See Also</span></span>  
 <span data-ttu-id="05978-172">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="05978-172">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="05978-173">发布数据和数据库对象</span><span class="sxs-lookup"><span data-stu-id="05978-173">Publish Data and Database Objects</span></span>](publish-data-and-database-objects.md)  
  
  
