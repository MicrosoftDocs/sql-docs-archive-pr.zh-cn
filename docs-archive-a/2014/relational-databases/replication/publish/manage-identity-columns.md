---
title: 管理标识列 | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- identity values [SQL Server replication]
- merge replication [SQL Server replication], identity range management
- publishing [SQL Server replication], identity columns
- transactional replication, identity range management
- identity columns [SQL Server], replication
ms.assetid: 98892836-cf63-494a-bd5d-6577d9810ddf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1b9a7b28c288ef80d24fb67479727d94c3c09fa5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87577530"
---
# <a name="manage-identity-columns"></a><span data-ttu-id="4cb64-102">管理标识列</span><span class="sxs-lookup"><span data-stu-id="4cb64-102">Manage Identity Columns</span></span>
  <span data-ttu-id="4cb64-103">本主题说明如何使用 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 或 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] 在 [!INCLUDE[tsql](../../../includes/tsql-md.md)]中管理标识列。</span><span class="sxs-lookup"><span data-stu-id="4cb64-103">This topic describes how to manage identity columns in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="4cb64-104">在将订阅服务器插入操作复制回发布服务器时，必须对标识列进行管理，以免在订阅服务器和发布服务器上分配相同的标识值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-104">When Subscriber inserts are replicated back to the Publisher, identity columns must be managed to avoid assignment of the same identity value at both the Subscriber and Publisher.</span></span> <span data-ttu-id="4cb64-105">复制可自动管理标识范围，或者您可以选择手动处理标识范围管理。</span><span class="sxs-lookup"><span data-stu-id="4cb64-105">Replication can manage identity ranges automatically or you can choose to manually handle identity range management.</span></span>  <span data-ttu-id="4cb64-106">有关由复制提供的标识范围管理选项的信息，请参阅[复制标识列](replicate-identity-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-106">For information about the identity range management options provided by replication, see [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="4cb64-107">开始之前</span><span class="sxs-lookup"><span data-stu-id="4cb64-107">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="4cb64-108">建议</span><span class="sxs-lookup"><span data-stu-id="4cb64-108">Recommendations</span></span>  
  
-   <span data-ttu-id="4cb64-109">在多个发布中发布表时，必须为这些发布指定相同的标识范围管理选项。</span><span class="sxs-lookup"><span data-stu-id="4cb64-109">When publishing a table in more than one publication, you must specify the same identity range management options for both publications.</span></span> <span data-ttu-id="4cb64-110">有关详细信息，请参阅[发布数据和数据库对象](publish-data-and-database-objects.md)中的“在多个发布中发布表”。</span><span class="sxs-lookup"><span data-stu-id="4cb64-110">For more information, see "Publishing Tables in More Than One Publication" in [Publish Data and Database Objects](publish-data-and-database-objects.md).</span></span>  
  
-   <span data-ttu-id="4cb64-111">要创建一个可在多个表中使用的自动递增数字或者可以从应用程序中调用而不引用任何表的自动递增数字，请参阅[序列号](../../sequence-numbers/sequence-numbers.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-111">To create an automatically incrementing number that can be used in multiple tables or that can be called from applications without referencing any table, see [Sequence Numbers](../../sequence-numbers/sequence-numbers.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="4cb64-112">使用 SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="4cb64-112">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="4cb64-113">可在“新建发布”向导的“项目属性 - \<Article>”对话框的“属性”选项卡上指定标识列管理选项 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-113">Specify an identity column management option on the **Properties** tab of the **Article Properties -\<Article>** dialog box of the New Publication Wizard.</span></span> <span data-ttu-id="4cb64-114">有关使用此向导的详细信息，请参阅[创建发布](create-a-publication.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-114">For more information about using this wizard, see [Create a Publication](create-a-publication.md).</span></span> <span data-ttu-id="4cb64-115">在新建发布向导中：</span><span class="sxs-lookup"><span data-stu-id="4cb64-115">In the New Publication Wizard:</span></span>  
  
-   <span data-ttu-id="4cb64-116">如果在 **“发布类型”** 页上选择 **“合并发布”** 或 **“带有更新订阅的事务发布”** ，那么请选择自动或手动标识范围管理（建议使用默认值自动）。</span><span class="sxs-lookup"><span data-stu-id="4cb64-116">If you select **Merge publication** or **Transactional publication with updating subscriptions** on the **Publication Type** page, select automatic or manual identity range management (automatic, the default, is recommended).</span></span> <span data-ttu-id="4cb64-117">在发布表后不能修改该属性，但可以修改其他相关属性。</span><span class="sxs-lookup"><span data-stu-id="4cb64-117">After the table is published, the property cannot be modified, but other related properties can be modified.</span></span>  
  
-   <span data-ttu-id="4cb64-118">如果选择其他的发布类型，则应将标识范围管理设置为手动。</span><span class="sxs-lookup"><span data-stu-id="4cb64-118">If you select other publication types, identity range management should be set to manual.</span></span>  
  
 <span data-ttu-id="4cb64-119">在“项目属性 - \<Article>”对话框的“属性”选项卡上修改标识范围和阈值，该对话框可在“发布属性 - \<Publication>”对话框中找到  。</span><span class="sxs-lookup"><span data-stu-id="4cb64-119">Modify identity ranges and thresholds on the **Properties** tab of the **Article Properties -\<Article>**, which is available in the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="4cb64-120">有关访问此对话框的详细信息，请参阅 [View and Modify Publication Properties](view-and-modify-publication-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-120">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-an-identity-column-management-option"></a><span data-ttu-id="4cb64-121">指定标识列管理选项</span><span class="sxs-lookup"><span data-stu-id="4cb64-121">To specify an identity column management option</span></span>  
  
1.  <span data-ttu-id="4cb64-122">如果发布服务器运行的是 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 之前的 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]版本，请在新建发布向导的 **“发布类型”** 页上，选择 **“合并发布”** 或 **“带有更新订阅的事务发布”** 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-122">If the Publisher is running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], on the **Publication Type** page of the New Publication Wizard, select **Merge publication** or **Transactional publication with updating subscriptions**.</span></span>  
  
2.  <span data-ttu-id="4cb64-123">在 **“项目”** 页上，选择一个包含标识列的表。</span><span class="sxs-lookup"><span data-stu-id="4cb64-123">On the **Articles** page, select a table with an identity column.</span></span>  
  
3.  <span data-ttu-id="4cb64-124">单击 **“项目属性”** ，再单击 **“设置突出显示的表项目的属性”** 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-124">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
4.  <span data-ttu-id="4cb64-125">在“项目属性 - \<Article>”对话框的“属性”选项卡的“标识范围管理”部分，将“自动管理标识范围”属性设置为“自动”或“手动”（针对运行 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 或更高版本的发布服务器），或者设置为 True 或 False（针对运行版本低于 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的发布服务器）       。</span><span class="sxs-lookup"><span data-stu-id="4cb64-125">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, set the **Automatically manage identity ranges** property to **Automatic** or **Manual** (for Publishers running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or later), or **True** or **False** (for Publishers running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]).</span></span>  
  
5.  <span data-ttu-id="4cb64-126">如果在步骤 4 中选择了 **“自动”** 或 **True** ，请输入下表中列出的选项值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-126">If you selected **Automatic** or **True** in step 4, enter values for the options in the following table.</span></span> <span data-ttu-id="4cb64-127">有关如何使用这些设置的详细信息，请参阅[复制标识列](replicate-identity-columns.md)中的“指定标识范围”部分。</span><span class="sxs-lookup"><span data-stu-id="4cb64-127">For more information on how these settings are used, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    |<span data-ttu-id="4cb64-128">选项</span><span class="sxs-lookup"><span data-stu-id="4cb64-128">Option</span></span>|<span data-ttu-id="4cb64-129">值</span><span class="sxs-lookup"><span data-stu-id="4cb64-129">Value</span></span>|<span data-ttu-id="4cb64-130">说明</span><span class="sxs-lookup"><span data-stu-id="4cb64-130">Description</span></span>|  
    |------------|-----------|-----------------|  
    |<span data-ttu-id="4cb64-131">**发布服务器范围大小**</span><span class="sxs-lookup"><span data-stu-id="4cb64-131">**Publisher range size**</span></span>|<span data-ttu-id="4cb64-132">表示范围大小的整数值（例如 20000）。</span><span class="sxs-lookup"><span data-stu-id="4cb64-132">Integer value for range size (for example, 20000).</span></span>|<span data-ttu-id="4cb64-133">请参阅[复制标识列](replicate-identity-columns.md)中的“指定标识范围”部分。</span><span class="sxs-lookup"><span data-stu-id="4cb64-133">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="4cb64-134">**订阅服务器范围大小**</span><span class="sxs-lookup"><span data-stu-id="4cb64-134">**Subscriber range size**</span></span>|<span data-ttu-id="4cb64-135">表示范围大小的整数值（例如 10000）。</span><span class="sxs-lookup"><span data-stu-id="4cb64-135">Integer value for range size (for example, 10000).</span></span>|<span data-ttu-id="4cb64-136">请参阅[复制标识列](replicate-identity-columns.md)中的“指定标识范围”部分。</span><span class="sxs-lookup"><span data-stu-id="4cb64-136">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="4cb64-137">**范围阈值百分比**</span><span class="sxs-lookup"><span data-stu-id="4cb64-137">**Range threshold percentage**</span></span>|<span data-ttu-id="4cb64-138">表示百分比阈值的整数值（例如，90 相当于 90%）。</span><span class="sxs-lookup"><span data-stu-id="4cb64-138">Integer value for percent threshold (for example, 90 is equivalent to 90 percent).</span></span>|<span data-ttu-id="4cb64-139">指定新标识范围之前在节点上使用的总标识值的百分比。</span><span class="sxs-lookup"><span data-stu-id="4cb64-139">Percent of total identity values used at a node before a new identity range is assigned.</span></span><br /><br /> <span data-ttu-id="4cb64-140">注意：必须指定此值，但它仅用于：使用排队更新订阅的订阅服务器以及运行 [!INCLUDE[ssEW](../../../includes/ssew-md.md)] 或以前版本的其他 SQL Server 版本的合并发布的订阅服务器。</span><span class="sxs-lookup"><span data-stu-id="4cb64-140">Note: This value must be specified, but it is only used by: Subscribers using queued updating subscriptions; and Subscribers to merge publications running [!INCLUDE[ssEW](../../../includes/ssew-md.md)] or previous versions of other SQL Server editions.</span></span> <span data-ttu-id="4cb64-141">有关详细信息，请参阅[复制标识列](replicate-identity-columns.md)中的“指定标识范围”部分。</span><span class="sxs-lookup"><span data-stu-id="4cb64-141">For more information, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="4cb64-142">**下一个范围的起始值**</span><span class="sxs-lookup"><span data-stu-id="4cb64-142">**Next range starting value**</span></span>|<span data-ttu-id="4cb64-143">整数值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-143">Integer value.</span></span> <span data-ttu-id="4cb64-144">只读。</span><span class="sxs-lookup"><span data-stu-id="4cb64-144">Read-only.</span></span>|<span data-ttu-id="4cb64-145">下一个范围的起始值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-145">The value at which the next range will start.</span></span> <span data-ttu-id="4cb64-146">例如，如果当前范围是 5001-6000，此起始值就是 6001。</span><span class="sxs-lookup"><span data-stu-id="4cb64-146">For example, if the current range is 5001-6000, this value will be 6001.</span></span>|  
    |<span data-ttu-id="4cb64-147">**最大标识值**</span><span class="sxs-lookup"><span data-stu-id="4cb64-147">**Maximum identity value**</span></span>|<span data-ttu-id="4cb64-148">整数值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-148">Integer value.</span></span> <span data-ttu-id="4cb64-149">只读。</span><span class="sxs-lookup"><span data-stu-id="4cb64-149">Read-only.</span></span>|<span data-ttu-id="4cb64-150">标识列的最大值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-150">The largest value for the identity column.</span></span> <span data-ttu-id="4cb64-151">由列的基本数据类型决定。</span><span class="sxs-lookup"><span data-stu-id="4cb64-151">Determined by the base data type of the column.</span></span>|  
    |<span data-ttu-id="4cb64-152">**增量**</span><span class="sxs-lookup"><span data-stu-id="4cb64-152">**Increment**</span></span>|<span data-ttu-id="4cb64-153">整数值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-153">Integer value.</span></span> <span data-ttu-id="4cb64-154">只读。</span><span class="sxs-lookup"><span data-stu-id="4cb64-154">Read-only.</span></span>|<span data-ttu-id="4cb64-155">对于每个插入操作，标识列中的数字应增加或减少的量：通常设置为 1。</span><span class="sxs-lookup"><span data-stu-id="4cb64-155">The amount by which the number in the identity column should increase or decrease for each insert: typically set to 1.</span></span>|  
  
6.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### <a name="to-modify-identity-ranges-and-thresholds-after-a-table-is-published"></a><span data-ttu-id="4cb64-156">发布表后修改标识范围和阈值</span><span class="sxs-lookup"><span data-stu-id="4cb64-156">To modify identity ranges and thresholds after a table is published</span></span>  
  
1.  <span data-ttu-id="4cb64-157">在“发布属性 - \<Publication>”对话框的“项目”页面上，选择一个具有标识列的表 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-157">On the **Articles** page of the **Publication Properties - \<Publication>** dialog box, select a table with an identity column.</span></span>  
  
2.  <span data-ttu-id="4cb64-158">单击 **“项目属性”** ，再单击 **“设置突出显示的表项目的属性”** 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-158">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
3.  <span data-ttu-id="4cb64-159">在“项目属性 - \<Article>”对话框的“属性”选项卡的“标识范围管理”部分中，输入下列一个或多个属性的值  ： **“发布服务器范围大小”、“订阅服务器范围大小”和“范围阈值百分比”**  。</span><span class="sxs-lookup"><span data-stu-id="4cb64-159">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, enter values for one or more of the following properties: **Publisher range size**, **Subscriber range size**, and **Range threshold percentage**.</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="4cb64-160">在“发布属性 - \<Publication>”对话框中单击“确定” 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-160">Click **OK** on the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="4cb64-161">使用 Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="4cb64-161">Using Transact-SQL</span></span>  
 <span data-ttu-id="4cb64-162">创建项目时，可使用复制存储过程来指定标识范围管理选项。</span><span class="sxs-lookup"><span data-stu-id="4cb64-162">You can use replication stored procedures to specify identity range management options when an article is created.</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="4cb64-163">定义事务发布的项目时启用自动标识范围管理</span><span class="sxs-lookup"><span data-stu-id="4cb64-163">To enable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="4cb64-164">在发布服务器上，对发布数据库执行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-164">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="4cb64-165">如果要发布的源表具有标识列，则在为 \@threshold 分配新标识范围之前，应将 \@identityrangemanagementoption 的值指定为 auto，指定分配给发布服务器的标识值范围 \@pub_identity_range，指定分配给每个订阅服务器的标识值范围 \@identity_range，并指定所使用的总标识值的百分比    。</span><span class="sxs-lookup"><span data-stu-id="4cb64-165">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to the Publisher for **\@pub_identity_range**, the range of identity values assigned to each Subscribers for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="4cb64-166">有关如何定义项目的详细信息，请参阅[定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-166">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4cb64-167">确保标识列的数据类型足够大，从而能够支持分配到所有订阅服务器的标识总范围。</span><span class="sxs-lookup"><span data-stu-id="4cb64-167">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="4cb64-168">定义事务发布的项目时禁用自动标识范围管理</span><span class="sxs-lookup"><span data-stu-id="4cb64-168">To disable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="4cb64-169">在发布服务器上，对发布数据库执行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-169">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="4cb64-170">将 \@identityrangemanagementoption 的值指定为 manual 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-170">Specify a value of **manual** for **\@identityrangemanagementoption**.</span></span> <span data-ttu-id="4cb64-171">有关如何定义项目的详细信息，请参阅[定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-171">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="4cb64-172">将范围分配到订阅服务器上的标识项目列，以避免在更新订阅服务器时产生冲突。</span><span class="sxs-lookup"><span data-stu-id="4cb64-172">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span> <span data-ttu-id="4cb64-173">有关详细信息，请参阅[复制标识列](replicate-identity-columns.md)主题中的“为手动标识范围管理分配范围”部分。</span><span class="sxs-lookup"><span data-stu-id="4cb64-173">For more information, see the section on assigning ranges for manual identity range management in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="4cb64-174">定义合并发布的项目时启用自动标识范围管理</span><span class="sxs-lookup"><span data-stu-id="4cb64-174">To enable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="4cb64-175">在发布服务器上，对发布数据库执行 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-175">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="4cb64-176">如果要发布的源表具有标识列，则在为 \@threshold 分配新标识范围之前，应将 \@identityrangemanagementoption 的值指定为 auto，指定为分配给服务器订阅的标识值范围 \@pub_identity_range，指定为分配给发布服务器和每个客户端订阅的标识值范围 \@identity_range，并指定所使用的总标识值的百分比    。</span><span class="sxs-lookup"><span data-stu-id="4cb64-176">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to a server subscription for **\@pub_identity_range**, the range of identity values assigned to the Publisher and each client subscription for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="4cb64-177">有关何时分配新标识范围的详细信息，请参阅[复制标识列](replicate-identity-columns.md)主题中的“分配标识范围”。</span><span class="sxs-lookup"><span data-stu-id="4cb64-177">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span> <span data-ttu-id="4cb64-178">有关如何定义项目的详细信息，请参阅[定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-178">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="4cb64-179">确保标识列的数据类型足够大，从而能够支持分配到所有订阅服务器（尤其是具有服务器订阅的订阅服务器）的标识总范围。</span><span class="sxs-lookup"><span data-stu-id="4cb64-179">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers, particularly for Subscribers with server subscriptions.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="4cb64-180">定义合并发布的项目时禁用自动标识范围管理</span><span class="sxs-lookup"><span data-stu-id="4cb64-180">To disable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="4cb64-181">在发布服务器上，对发布数据库执行 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-181">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="4cb64-182">为 \@identityrangemanagementoption 指定下列值之一：</span><span class="sxs-lookup"><span data-stu-id="4cb64-182">Specify one of the following values for **\@identityrangemanagementoption**:</span></span>  
  
    -   <span data-ttu-id="4cb64-183">**manual** - 必须手动分配标识范围以更新订阅服务器。</span><span class="sxs-lookup"><span data-stu-id="4cb64-183">**manual** - Identity ranges must be assigned manually for updating Subscribers.</span></span>  
  
    -   <span data-ttu-id="4cb64-184">**none** - 不将发布服务器上的标识列定义为订阅服务器上的标识列。</span><span class="sxs-lookup"><span data-stu-id="4cb64-184">**none** - Identity columns at the Publisher will not be defined as identity columns at the Subscriber.</span></span>  
  
     <span data-ttu-id="4cb64-185">有关如何定义项目的详细信息，请参阅[定义项目](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="4cb64-185">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="4cb64-186">将范围分配到订阅服务器上的标识项目列，以避免在更新订阅服务器时产生冲突。</span><span class="sxs-lookup"><span data-stu-id="4cb64-186">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="4cb64-187">为快照发布或事务发布中现有的项目更改自动标识范围管理设置</span><span class="sxs-lookup"><span data-stu-id="4cb64-187">To change automatic identity range management settings for an existing article in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="4cb64-188">在发布服务器上，对发布数据库执行 [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) ，并注意结果集中 **identityrangemanagementoption** 的值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-188">At the Publisher on the publication database, execute [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) and note the value of **identityrangemanagementoption** in the result set.</span></span> <span data-ttu-id="4cb64-189">如果该值为 **0**，则未启用自动标识范围管理。</span><span class="sxs-lookup"><span data-stu-id="4cb64-189">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="4cb64-190">如果结果集中 **identityrangemanagementoption** 的值为 **1**，则按下面的方法更改设置：</span><span class="sxs-lookup"><span data-stu-id="4cb64-190">If the value of **identityrangemanagementoption** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="4cb64-191">若要更改已分配的标识范围，请在发布服务器上对发布数据库执行 [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-191">To change the assigned identity ranges, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="4cb64-192">将 \@property 的值指定为 identity_range 或 pub_identity_range，并为 \@value 指定新范围值   。</span><span class="sxs-lookup"><span data-stu-id="4cb64-192">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="4cb64-193">若要更改用于分配新范围的阈值，在发布服务器上对发布数据库执行 [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-193">To change the threshold at which new ranges are assigned, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="4cb64-194">将 \@property 的值指定为 threshold，并为 \@value 指定新阈值  。</span><span class="sxs-lookup"><span data-stu-id="4cb64-194">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-merge-publication"></a><span data-ttu-id="4cb64-195">为合并发布中的现有项目更改自动标识范围管理设置</span><span class="sxs-lookup"><span data-stu-id="4cb64-195">To change automatic identity range management settings for an existing article in a merge publication</span></span>  
  
1.  <span data-ttu-id="4cb64-196">在发布服务器上，对发布数据库执行 [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) ，并注意结果集中 **identity_support** 的值。</span><span class="sxs-lookup"><span data-stu-id="4cb64-196">At the Publisher on the publication database, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) and note the value of **identity_support** in the result set.</span></span> <span data-ttu-id="4cb64-197">如果该值为 **0**，则未启用自动标识范围管理。</span><span class="sxs-lookup"><span data-stu-id="4cb64-197">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="4cb64-198">如果结果集中 **identity_support** 的值为 **1**，则按下面的方法更改设置：</span><span class="sxs-lookup"><span data-stu-id="4cb64-198">If the value of **identity_support** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="4cb64-199">若要更改已分配的标识范围，在发布服务器上对发布数据库执行 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-199">To change the assigned identity ranges, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="4cb64-200">将 \@property 的值指定为 identity_range 或 pub_identity_range，并为 \@value 指定新范围值   。</span><span class="sxs-lookup"><span data-stu-id="4cb64-200">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="4cb64-201">若要更改用于分配新范围的阈值，在发布服务器上对发布数据库执行 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-201">To change the threshold at which new ranges are assigned, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="4cb64-202">将 \@property 的值指定为 threshold，并为 \@value 指定新阈值  。</span><span class="sxs-lookup"><span data-stu-id="4cb64-202">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span> <span data-ttu-id="4cb64-203">有关何时分配新标识范围的详细信息，请参阅[复制标识列](replicate-identity-columns.md)主题中的“分配标识范围”。</span><span class="sxs-lookup"><span data-stu-id="4cb64-203">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    -   <span data-ttu-id="4cb64-204">若要禁用自动标识范围管理，在发布服务器上对发布数据库执行 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="4cb64-204">To disable automatic identity range management, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="4cb64-205">将 \@property 的值指定为 identityrangemanagementoption，并将 \@value 的值指定为 manual 或 none    。</span><span class="sxs-lookup"><span data-stu-id="4cb64-205">Specify a value of **identityrangemanagementoption** for **\@property** and either **manual** or **none** for **\@value**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4cb64-206">另请参阅</span><span class="sxs-lookup"><span data-stu-id="4cb64-206">See Also</span></span>  
 <span data-ttu-id="4cb64-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="4cb64-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="4cb64-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="4cb64-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="4cb64-209">复制标识列</span><span class="sxs-lookup"><span data-stu-id="4cb64-209">Replicate Identity Columns</span></span>](replicate-identity-columns.md)  
  
  
