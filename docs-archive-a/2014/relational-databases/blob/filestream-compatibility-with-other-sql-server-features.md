---
title: FILESTREAM 与其他 SQL Server 功能的兼容性 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: filestream
ms.topic: conceptual
helpviewer_keywords:
- FILESTREAM [SQL Server], other SQL Server features and
- FILESTREAM [SQL Server], limitations
ms.assetid: d2c145dc-d49a-4f5b-91e6-89a2b0adb4f3
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 53bb99ea094261fd96f2a821dfaa5203e9796d8c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87576834"
---
# <a name="filestream-compatibility-with-other-sql-server-features"></a><span data-ttu-id="5dd85-102">FILESTREAM 与其他 SQL Server 功能的兼容性</span><span class="sxs-lookup"><span data-stu-id="5dd85-102">FILESTREAM Compatibility with Other SQL Server Features</span></span>
  <span data-ttu-id="5dd85-103">由于 FILESTREAM 数据存在于文件系统中，因此本主题提供了将 FILESTREAM 与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中的以下功能一起使用时的一些注意事项、指南和限制：</span><span class="sxs-lookup"><span data-stu-id="5dd85-103">Because FILESTREAM data is in the file system, this topic provides some considerations, guidelines, and limitations for using FILESTREAM with the following features in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
-   [<span data-ttu-id="5dd85-104">SQL Server Integration Services (SSIS)</span><span class="sxs-lookup"><span data-stu-id="5dd85-104">SQL Server Integration Services (SSIS)</span></span>](#ssis)  
  
-   [<span data-ttu-id="5dd85-105">分布式查询和链接服务器</span><span class="sxs-lookup"><span data-stu-id="5dd85-105">Distributed Queries and Linked Servers</span></span>](#distqueries)  
  
-   [<span data-ttu-id="5dd85-106">加密</span><span class="sxs-lookup"><span data-stu-id="5dd85-106">Encryption</span></span>](#encryption)  
  
-   [<span data-ttu-id="5dd85-107">数据库快照</span><span class="sxs-lookup"><span data-stu-id="5dd85-107">Database Snapshots</span></span>](#DatabaseSnapshot)  
  
-   [<span data-ttu-id="5dd85-108">复制</span><span class="sxs-lookup"><span data-stu-id="5dd85-108">Replication</span></span>](#Replication)  
  
-   [<span data-ttu-id="5dd85-109">日志传送</span><span class="sxs-lookup"><span data-stu-id="5dd85-109">Log Shipping</span></span>](#LogShipping)  
  
-   [<span data-ttu-id="5dd85-110">数据库镜像</span><span class="sxs-lookup"><span data-stu-id="5dd85-110">Database Mirroring</span></span>](#DatabaseMirroring)  
  
-   [<span data-ttu-id="5dd85-111">全文索引</span><span class="sxs-lookup"><span data-stu-id="5dd85-111">Full-Text Indexing</span></span>](#FullText)  
  
-   [<span data-ttu-id="5dd85-112">故障转移群集</span><span class="sxs-lookup"><span data-stu-id="5dd85-112">Failover Clustering</span></span>](#FailoverClustering)  
  
-   [<span data-ttu-id="5dd85-113">SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="5dd85-113">SQL Server Express</span></span>](#SQLServerExpress)  
  
-   [<span data-ttu-id="5dd85-114">包含的数据库</span><span class="sxs-lookup"><span data-stu-id="5dd85-114">Contained Databases</span></span>](#contained)  
  
##  <a name="sql-server-integration-services-ssis"></a><a name="ssis"></a> <span data-ttu-id="5dd85-115">SQL Server Integration Services (SSIS)</span><span class="sxs-lookup"><span data-stu-id="5dd85-115">SQL Server Integration Services (SSIS)</span></span>  
 <span data-ttu-id="5dd85-116">SQL Server Integration Services (SSIS) 使用 DT_IMAGE SSIS 数据类型像处理任何其他 BLOB 数据一样处理数据流中的 FILESTREAM 数据。</span><span class="sxs-lookup"><span data-stu-id="5dd85-116">SQL Server Integration Services (SSIS) handles FILESTREAM data in the data flow like any other BLOB data by using the DT_IMAGE SSIS data type.</span></span>  
  
 <span data-ttu-id="5dd85-117">您可以使用“导入列”转换将文件从文件系统加载到 FILESTREAM 列，</span><span class="sxs-lookup"><span data-stu-id="5dd85-117">You can use the Import Column transformation to load files from the file system into a FILESTREAM column.</span></span> <span data-ttu-id="5dd85-118">还可以使用“导出列”转换将文件从 FILESTREAM 列提取到文件系统中的另一个位置。</span><span class="sxs-lookup"><span data-stu-id="5dd85-118">You can also use the Export Column transformation to extract files from a FILESTREAM column to another location in the file system.</span></span>  
  
##  <a name="distributed-queries-and-linked-servers"></a><a name="distqueries"></a> <span data-ttu-id="5dd85-119">分布式查询和链接服务器</span><span class="sxs-lookup"><span data-stu-id="5dd85-119">Distributed Queries and Linked Servers</span></span>  
 <span data-ttu-id="5dd85-120">您可以通过将 FILESTREAM 数据视为数据，通过分布式查询和链接服务器来处理这些数据 `varbinary(max)` 。</span><span class="sxs-lookup"><span data-stu-id="5dd85-120">You can work with FILESTREAM data through distributed queries and linked servers by treating it as `varbinary(max)` data.</span></span> <span data-ttu-id="5dd85-121">不能在使用由四部分构成的名称的分布式查询中使用 FILESTREAM **PathName()** 函数，甚至在该名称表示本地服务器时也不能使用。</span><span class="sxs-lookup"><span data-stu-id="5dd85-121">You cannot use the FILESTREAM **PathName()** function in distributed queries that use a four-part name, even when the name refers to the local server.</span></span> <span data-ttu-id="5dd85-122">但是，你可以在使用 **OPENQUERY()** 的传递查询的内部查询中使用 **PathName()** 。</span><span class="sxs-lookup"><span data-stu-id="5dd85-122">However you can use **PathName()** in the inner query of a pass-through query that uses **OPENQUERY()**.</span></span>  
  
##  <a name="encryption"></a><a name="encryption"></a> <span data-ttu-id="5dd85-123">加密</span><span class="sxs-lookup"><span data-stu-id="5dd85-123">Encryption</span></span>  
 <span data-ttu-id="5dd85-124">即使启用了透明数据加密，也不会加密 FILESTREAM 数据。</span><span class="sxs-lookup"><span data-stu-id="5dd85-124">FILESTREAM data is not encrypted even when transparent data encryption is enabled.</span></span>  
  
##  <a name="database-snapshots"></a><a name="DatabaseSnapshot"></a> <span data-ttu-id="5dd85-125">数据库快照</span><span class="sxs-lookup"><span data-stu-id="5dd85-125">Database Snapshots</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="5dd85-126">不支持对 FILESTREAM 文件组使用 [数据库快照](../databases/database-snapshots-sql-server.md) 功能。</span><span class="sxs-lookup"><span data-stu-id="5dd85-126">does not support [database snapshots](../databases/database-snapshots-sql-server.md) for FILESTREAM filegroups.</span></span> <span data-ttu-id="5dd85-127">如果 CREATE DATABASE ON 子句中包含 FILESTREAM 文件组，则相应语句将会失败并会引发错误。</span><span class="sxs-lookup"><span data-stu-id="5dd85-127">If a FILESTREAM filegroup is included in a CREATE DATABASE ON clause, the statement will fail and an error will be raised.</span></span>  
  
 <span data-ttu-id="5dd85-128">当您使用 FILESTREAM 时，您可以创建标准（非 FILESTREAM）文件组的数据库快照。</span><span class="sxs-lookup"><span data-stu-id="5dd85-128">When you are using FILESTREAM, you can create database snapshots of standard (non-FILESTREAM) filegroups.</span></span> <span data-ttu-id="5dd85-129">这些数据库快照的 FILESTREAM 文件组被标记为脱机。</span><span class="sxs-lookup"><span data-stu-id="5dd85-129">The FILESTREAM filegroups are marked as offline for those database snapshots.</span></span>  
  
 <span data-ttu-id="5dd85-130">对数据库快照中的 FILESTREAM 表执行的 SELECT 语句不能包含 FILESTREAM 列；否则将返回以下错误消息：</span><span class="sxs-lookup"><span data-stu-id="5dd85-130">A SELECT statement that is executed on a FILESTREAM table in a database snapshot must not include a FILESTREAM column; otherwise, the following error message will be returned:</span></span>  
  
 `Could not continue scan with NOLOCK due to data movement.`  
  
##  <a name="replication"></a><a name="Replication"></a> <span data-ttu-id="5dd85-131">Replication</span><span class="sxs-lookup"><span data-stu-id="5dd85-131">Replication</span></span>  
 <span data-ttu-id="5dd85-132">可以将发布服务器上启用了 FILESTREAM 属性的 `varbinary(max)` 列复制到订阅服务器，复制时可以带 FILESTREAM 属性，也可以不带。</span><span class="sxs-lookup"><span data-stu-id="5dd85-132">A `varbinary(max)` column that has the FILESTREAM attribute enabled at the Publisher can be replicated to a Subscriber with or without the FILESTREAM attribute.</span></span> <span data-ttu-id="5dd85-133">若要指定复制列的方式，请使用“项目属性 - \<Article>”对话框，或者使用 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) 或 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) 的 @schema_option 参数。</span><span class="sxs-lookup"><span data-stu-id="5dd85-133">To specify the way in which the column is replicated, use the **Article Properties - \<Article>** dialog box or the @schema_option parameter of [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) or [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="5dd85-134">复制到不具有 FILESTREAM 属性的 `varbinary(max)` 列的数据不能超过该数据类型的 2 GB 大小限制；否则，将产生运行时错误。</span><span class="sxs-lookup"><span data-stu-id="5dd85-134">Data that is replicated to a `varbinary(max)` column that does not have the FILESTREAM attribute must not exceed the 2-GB limit for that data type; otherwise, a run-time error is generated.</span></span> <span data-ttu-id="5dd85-135">建议你复制 FILESTREAM 属性，除非你将数据复制到 [!INCLUDE[ssVersion2005](../../includes/ssversion2000-md.md)] 订阅服务器，而不考虑指定的架构选项。</span><span class="sxs-lookup"><span data-stu-id="5dd85-135">We recommend that you replicate the FILESTREAM attribute, unless you are replicating data to [!INCLUDE[ssVersion2005](../../includes/ssversion2000-md.md)] Subscribers is not supported, regardless of the schema option that is specified.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5dd85-136">从 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 复制到 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 订阅服务器的大数据值最多不得超过 256 MB。</span><span class="sxs-lookup"><span data-stu-id="5dd85-136">Replicating large data values from [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Subscribers is limited to a maximum of 256 MB data values.</span></span> <span data-ttu-id="5dd85-137">有关详细信息，请参阅 [最大容量规范](https://go.microsoft.com/fwlink/?LinkId=103810)。</span><span class="sxs-lookup"><span data-stu-id="5dd85-137">For more information, see [Maximum Capacity Specifications](https://go.microsoft.com/fwlink/?LinkId=103810).</span></span>  
  
### <a name="considerations-for-transactional-replication"></a><span data-ttu-id="5dd85-138">事务复制的注意事项</span><span class="sxs-lookup"><span data-stu-id="5dd85-138">Considerations for Transactional Replication</span></span>  
 <span data-ttu-id="5dd85-139">如果您使用为事务复制发布的表中的 FILESTREAM 列，请注意以下事项：</span><span class="sxs-lookup"><span data-stu-id="5dd85-139">If you use FILESTREAM columns in tables that are published for transactional replication, note the following considerations:</span></span>  
  
-   <span data-ttu-id="5dd85-140">如果表中的列具有 FILESTREAM 属性，则不能将 *database snapshot* 或 *database snapshot character* 的值用于 [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) 的 @sync_method 属性。</span><span class="sxs-lookup"><span data-stu-id="5dd85-140">If any tables include columns that have the FILESTREAM attribute, you cannot use values of *database snapshot* or *database snapshot character* for the @sync_method property of [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span></span>  
  
-   <span data-ttu-id="5dd85-141">max text repl size 选项用于指定可以插入到为复制发布的列中的最大数据量。</span><span class="sxs-lookup"><span data-stu-id="5dd85-141">The max text repl size option specifies the maximum amount of data that can be inserted into a column that is published for replication.</span></span> <span data-ttu-id="5dd85-142">此选项可用来控制复制的 FILESTREAM 数据的大小。</span><span class="sxs-lookup"><span data-stu-id="5dd85-142">This option can be used to control the size of FILESTREAM data that is replicated.</span></span>  
  
-   <span data-ttu-id="5dd85-143">如果您指定了用于复制 FILESTREAM 属性的架构选项，但您筛选出了 FILESTREAM 所需的 `uniqueidentifier` 列或指定不复制对该列的 UNIQUE 约束，则复制操作不复制 FILESTREAM 属性。</span><span class="sxs-lookup"><span data-stu-id="5dd85-143">If you specify the schema option to replicate the FILESTREAM attribute, but you filter out the `uniqueidentifier` column that FILESTREAM requires or you specify not to replicate the UNIQUE constraint for the column, replication does not replicate the FILESTREAM attribute.</span></span> <span data-ttu-id="5dd85-144">该列将只作为 `varbinary(max)` 列复制。</span><span class="sxs-lookup"><span data-stu-id="5dd85-144">The column is replicated only as a `varbinary(max)` column.</span></span>  
  
### <a name="considerations-for-merge-replication"></a><span data-ttu-id="5dd85-145">合并复制的注意事项</span><span class="sxs-lookup"><span data-stu-id="5dd85-145">Considerations for Merge Replication</span></span>  
 <span data-ttu-id="5dd85-146">如果您使用为合并复制发布的表中的 FILESTREAM 列，请注意以下事项：</span><span class="sxs-lookup"><span data-stu-id="5dd85-146">If you use FILESTREAM columns in tables that are published for merge replication, note the following considerations:</span></span>  
  
-   <span data-ttu-id="5dd85-147">合并复制和 FILESTREAM 都需要一个数据类型为 `uniqueidentifier` 的列来标识表中的每一行。</span><span class="sxs-lookup"><span data-stu-id="5dd85-147">Both merge replication and FILESTREAM require a column of data type `uniqueidentifier` to identify each row in a table.</span></span> <span data-ttu-id="5dd85-148">如果相应的表中没有这样的列，合并复制会自动添加一列。</span><span class="sxs-lookup"><span data-stu-id="5dd85-148">Merge replication automatically adds a column if the table does not have one.</span></span> <span data-ttu-id="5dd85-149">合并复制要求该列具有 ROWGUIDCOL 属性集和默认值 NEWID() 或 NEWSEQUENTIALID()。</span><span class="sxs-lookup"><span data-stu-id="5dd85-149">Merge replication requires that the column have the ROWGUIDCOL property set and a default of NEWID() or NEWSEQUENTIALID().</span></span> <span data-ttu-id="5dd85-150">除这些要求外，FILESTREAM 还要求为该列定义一个 UNIQUE 约束。</span><span class="sxs-lookup"><span data-stu-id="5dd85-150">In addition to these requirements, FILESTREAM requires that a UNIQUE constraint be defined for the column.</span></span> <span data-ttu-id="5dd85-151">这些要求将产生以下结果：</span><span class="sxs-lookup"><span data-stu-id="5dd85-151">These requirements have the following consequences:</span></span>  
  
    -   <span data-ttu-id="5dd85-152">如果您向已经为合并复制发布的表添加 FILESTREAM 列，请确保 `uniqueidentifier` 列具有 UNIQUE 约束。</span><span class="sxs-lookup"><span data-stu-id="5dd85-152">If you add a FILESTREAM column to a table that is already published for merge replication, make sure that the `uniqueidentifier` column has a UNIQUE constraint.</span></span> <span data-ttu-id="5dd85-153">如果该列不具有 UNIQUE 约束，请向发布数据库中的该表添加一个命名约束。</span><span class="sxs-lookup"><span data-stu-id="5dd85-153">If it does not have a UNIQUE constraint, add a named constraint to the table in the publication database.</span></span> <span data-ttu-id="5dd85-154">默认情况下，合并复制将发布此项架构更改，此更改将应用于每个订阅数据库。</span><span class="sxs-lookup"><span data-stu-id="5dd85-154">By default, merge replication will publish this schema change, and it will be applied to each subscription database.</span></span>  
  
         <span data-ttu-id="5dd85-155">如果您已按照说明手动添加了 UNIQUE 约束，并且要删除合并复制，则您必须先删除 UNIQUE 约束；否则，复制删除操作将失败。</span><span class="sxs-lookup"><span data-stu-id="5dd85-155">If you add a UNIQUE constraint manually as described and you want to remove merge replication, you must first remove the UNIQUE constraint; otherwise, replication removal will fail.</span></span>  
  
    -   <span data-ttu-id="5dd85-156">默认情况下，合并复制使用 NEWSEQUENTIALID()，因为与 NEWID() 相比，它可以提供更高的性能。</span><span class="sxs-lookup"><span data-stu-id="5dd85-156">By default, merge replication uses NEWSEQUENTIALID() because it can provide better performance than NEWID().</span></span> <span data-ttu-id="5dd85-157">如果您要向将为合并复制发布的表添加 `uniqueidentifier` 列，请指定 NEWSEQUENTIALID() 作为默认值。</span><span class="sxs-lookup"><span data-stu-id="5dd85-157">If you add a `uniqueidentifier` column to a table that will be published for merge replication, specify NEWSEQUENTIALID() as the default.</span></span>  
  
-   <span data-ttu-id="5dd85-158">合并复制包括为复制大型对象类型而进行的优化。</span><span class="sxs-lookup"><span data-stu-id="5dd85-158">Merge replication includes an optimization for replicating large object types.</span></span> <span data-ttu-id="5dd85-159">这种优化由 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) 的 @stream_blob_columns 参数控制。</span><span class="sxs-lookup"><span data-stu-id="5dd85-159">This optimization is controlled by the @stream_blob_columns parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="5dd85-160">如果您设置了用于复制 FILESTREAM 属性的架构选项，则 @stream_blob_columns 参数值将设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="5dd85-160">If you set the schema option to replicate the FILESTREAM attribute, the @stream_blob_columns parameter value is set to `true`.</span></span> <span data-ttu-id="5dd85-161">通过使用 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)，可以替代这种优化。</span><span class="sxs-lookup"><span data-stu-id="5dd85-161">This optimization can be overridden by using [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="5dd85-162">此存储过程支持您将 @stream_blob_columns 设置为 `false`。</span><span class="sxs-lookup"><span data-stu-id="5dd85-162">This stored procedure enables you to set @stream_blob_columns to `false`.</span></span> <span data-ttu-id="5dd85-163">如果您要将 FILESTREAM 列添加到已经为合并复制发布的表中，建议您使用 sp_changemergearticle 将该选项设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="5dd85-163">If you add a FILESTREAM column to a table that is already published for merge replication, we recommend that you set the option to `true` by using sp_changemergearticle.</span></span>  
  
-   <span data-ttu-id="5dd85-164">如果 FILESTREAM 列中的数据大小超过 2 GB，则在创建项目后为 FILESTREAM 启用架构选项会导致复制失败，且复制过程中会发生冲突。</span><span class="sxs-lookup"><span data-stu-id="5dd85-164">Enabling the schema option for FILESTREAM after an article is created can cause replication to fail if the data in a FILESTREAM column exceeds 2 GB and there is a conflict during replication.</span></span> <span data-ttu-id="5dd85-165">如果您预计这种情况会发生，建议您删除表项目，然后重新创建它，并在创建时间启用相应的 FILESTREAM 架构选项。</span><span class="sxs-lookup"><span data-stu-id="5dd85-165">If you expect this situation to arise, it is recommended that you drop and re-create the table article with the appropriate FILESTREAM schema option enabled at creation time.</span></span>  
  
-   <span data-ttu-id="5dd85-166">合并复制可以使用 [Web 同步](../replication/merge/merge-replication.md)通过 HTTPS 连接同步 FILESTREAM 数据。</span><span class="sxs-lookup"><span data-stu-id="5dd85-166">Merge replication can synchronize FILESTREAM data over an HTTPS connection by using [Web Synchronization](../replication/merge/merge-replication.md).</span></span> <span data-ttu-id="5dd85-167">此数据不能超过针对 Web 同步的 50 MB 大小限制；否则，将产生运行时错误。</span><span class="sxs-lookup"><span data-stu-id="5dd85-167">This data cannot exceed the 50 MB limit for Web Synchronization; otherwise, a run-time error is generated.</span></span>  
  
##  <a name="log-shipping"></a><a name="LogShipping"></a> <span data-ttu-id="5dd85-168">日志传送</span><span class="sxs-lookup"><span data-stu-id="5dd85-168">Log Shipping</span></span>  
 <span data-ttu-id="5dd85-169">[日志传送](../../database-engine/log-shipping/about-log-shipping-sql-server.md) 支持 FILESTREAM。</span><span class="sxs-lookup"><span data-stu-id="5dd85-169">[Log shipping](../../database-engine/log-shipping/about-log-shipping-sql-server.md) supports FILESTREAM.</span></span> <span data-ttu-id="5dd85-170">主服务器和辅助服务器运行的都必须是 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]或更高版本，并且必须启用 FILESTREAM。</span><span class="sxs-lookup"><span data-stu-id="5dd85-170">Both the primary and secondary servers must be running [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], or a later version, and have FILESTREAM enabled.</span></span>  
  
##  <a name="database-mirroring"></a><a name="DatabaseMirroring"></a> <span data-ttu-id="5dd85-171">数据库镜像</span><span class="sxs-lookup"><span data-stu-id="5dd85-171">Database Mirroring</span></span>  
 <span data-ttu-id="5dd85-172">数据库镜像不支持 FILESTREAM。</span><span class="sxs-lookup"><span data-stu-id="5dd85-172">Database mirroring does not support FILESTREAM.</span></span> <span data-ttu-id="5dd85-173">不能在主体服务器上创建 FILESTREAM 文件组。</span><span class="sxs-lookup"><span data-stu-id="5dd85-173">A FILESTREAM filegroup cannot be created on the principal server.</span></span> <span data-ttu-id="5dd85-174">不能为包含 FILESTREAM 文件组的数据库配置数据库镜像。</span><span class="sxs-lookup"><span data-stu-id="5dd85-174">Database mirroring cannot be configured for a database that contains FILESTREAM filegroups.</span></span>  
  
##  <a name="full-text-indexing"></a><a name="FullText"></a> <span data-ttu-id="5dd85-175">全文索引</span><span class="sxs-lookup"><span data-stu-id="5dd85-175">Full-Text Indexing</span></span>  
 <span data-ttu-id="5dd85-176">[全文索引](../indexes/indexes.md)处理 FILESTREAM 列的方式与处理列的方式相同 `varbinary(max)` 。</span><span class="sxs-lookup"><span data-stu-id="5dd85-176">[Full-text indexing](../indexes/indexes.md) works with a FILESTREAM column in the same way that it does with a `varbinary(max)` column.</span></span> <span data-ttu-id="5dd85-177">FILESTREAM 表必须有一列包含每个 FILESTREAM BLOB 的文件扩展名。</span><span class="sxs-lookup"><span data-stu-id="5dd85-177">The FILESTREAM table must have a column that contains the file name extension for each FILESTREAM BLOB.</span></span> <span data-ttu-id="5dd85-178">有关详细信息，请参阅[使用全文搜索查询](../search/query-with-full-text-search.md)、[配置和管理搜索筛选器](../search/configure-and-manage-filters-for-search.md)和[sys.fulltext_document_types (Transact-SQL)](/sql/relational-databases/system-catalog-views/sys-fulltext-document-types-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="5dd85-178">For more information, see [Query with Full-Text Search](../search/query-with-full-text-search.md), [Configure and Manage Filters for Search](../search/configure-and-manage-filters-for-search.md), and [sys.fulltext_document_types &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-document-types-transact-sql).</span></span>  
  
 <span data-ttu-id="5dd85-179">全文引擎会对 FILESTREAM BLOB 的内容进行索引。</span><span class="sxs-lookup"><span data-stu-id="5dd85-179">The full-text engine indexes the contents of the FILESTREAM BLOBs.</span></span> <span data-ttu-id="5dd85-180">对诸如图像之类的文件进行索引可能没有用。</span><span class="sxs-lookup"><span data-stu-id="5dd85-180">Indexing files such as images might not be useful.</span></span> <span data-ttu-id="5dd85-181">更新 FILESTREAM BLOB 时，会重新对其进行索引。</span><span class="sxs-lookup"><span data-stu-id="5dd85-181">When a FILESTREAM BLOB is updated it is reindexed.</span></span>  
  
##  <a name="failover-clustering"></a><a name="FailoverClustering"></a> <span data-ttu-id="5dd85-182">故障转移群集</span><span class="sxs-lookup"><span data-stu-id="5dd85-182">Failover Clustering</span></span>  
 <span data-ttu-id="5dd85-183">对于故障转移群集，必须将 FILESTREAM 文件组放在共享磁盘上。</span><span class="sxs-lookup"><span data-stu-id="5dd85-183">For failover clustering, FILESTREAM filegroups must be put on a shared disk.</span></span> <span data-ttu-id="5dd85-184">必须在群集中将承载 FILESTREAM 实例的每个节点上启用 FILESTREAM。</span><span class="sxs-lookup"><span data-stu-id="5dd85-184">FILESTREAM must be enabled on each node in the cluster that will host the FILESTREAM instance.</span></span> <span data-ttu-id="5dd85-185">有关详细信息，请参阅 [在故障转移群集中设置 FILESTREAM](set-up-filestream-on-a-failover-cluster.md)。</span><span class="sxs-lookup"><span data-stu-id="5dd85-185">For more information, see [Set Up FILESTREAM on a Failover Cluster](set-up-filestream-on-a-failover-cluster.md).</span></span>  
  
##  <a name="sql-server-express"></a><a name="SQLServerExpress"></a> <span data-ttu-id="5dd85-186">SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="5dd85-186">SQL Server Express</span></span>  
 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] <span data-ttu-id="5dd85-187">支持 FILESTREAM。</span><span class="sxs-lookup"><span data-stu-id="5dd85-187">supports FILESTREAM.</span></span> <span data-ttu-id="5dd85-188">10 GB 的数据库大小限制不包括 FILESTREAM 数据容器。</span><span class="sxs-lookup"><span data-stu-id="5dd85-188">The 10-GB database size limit does not include the FILESTREAM data container.</span></span>  
  
##  <a name="contained-databases"></a><a name="contained"></a> <span data-ttu-id="5dd85-189">包含的数据库</span><span class="sxs-lookup"><span data-stu-id="5dd85-189">Contained Databases</span></span>  
 <span data-ttu-id="5dd85-190">FILESTREAM 功能需要数据库以外的一些配置。</span><span class="sxs-lookup"><span data-stu-id="5dd85-190">The FILESTREAM feature requires some configuration outside of the database.</span></span> <span data-ttu-id="5dd85-191">因此，使用 FILESTREAM 或 FileTable 的数据库并未被完全包含。</span><span class="sxs-lookup"><span data-stu-id="5dd85-191">Therefore a database that uses FILESTREAM or FileTable is not fully contained.</span></span>  
  
 <span data-ttu-id="5dd85-192">如果您想要使用包含的数据库的某些功能（例如包含的用户），则可以将数据库包含设置为 PARTIAL。</span><span class="sxs-lookup"><span data-stu-id="5dd85-192">You can set database containment to PARTIAL if you want to use certain features of contained databases, such as contained users.</span></span> <span data-ttu-id="5dd85-193">但在此情况下，您必须知道某些数据库设置未包含在数据库中，并且在数据库移动时不自动移动。</span><span class="sxs-lookup"><span data-stu-id="5dd85-193">In this case, however, you must be aware that some of the database settings are not contained in the database and are not automatically moved when the database moves.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5dd85-194">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5dd85-194">See Also</span></span>  
 [<span data-ttu-id="5dd85-195">二进制大型对象 (Blob) 数据 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="5dd85-195">Binary Large Object &#40;Blob&#41; Data &#40;SQL Server&#41;</span></span>](binary-large-object-blob-data-sql-server.md)  
  
  
