---
title: 核心 SQLXML 安全注意事项 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- security [SQLXML], about security
ms.assetid: 330cd2ff-d5d5-4c8e-8f93-0869c977be94
author: rothja
ms.author: jroth
ms.openlocfilehash: eceaa28ff4d1a7b998a51b07df3b1076cf524e81
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87591867"
---
# <a name="core-sqlxml-security-considerations"></a><span data-ttu-id="0ab47-102">SQLXML 核心安全性注意事项</span><span class="sxs-lookup"><span data-stu-id="0ab47-102">Core SQLXML Security Considerations</span></span>
  <span data-ttu-id="0ab47-103">以下是使用 SQLXML 进行数据访问的安全性准则。</span><span class="sxs-lookup"><span data-stu-id="0ab47-103">The following are security guidelines for using SQLXML for data access.</span></span>  
  
-   <span data-ttu-id="0ab47-104">SQLXMLOLEDB 访问接口公开 `StreamFlags` 属性，您可以使用该属性设置指示应针对每个特定实例启用或禁用哪些 SQLXML 功能的标志。</span><span class="sxs-lookup"><span data-stu-id="0ab47-104">The SQLXMLOLEDB provider exposes a `StreamFlags` property which allows you to set flags indicating what SQLXML functionality should be enabled or disabled for each specific instance.</span></span> <span data-ttu-id="0ab47-105">您可以使用此属性自定义对 SQLXML 的使用，并确保只启用所需组件。</span><span class="sxs-lookup"><span data-stu-id="0ab47-105">You can use this property to customize your use of SQLXML and to make sure that only the components you want are enabled.</span></span> <span data-ttu-id="0ab47-106">有关详细信息，请参阅[SQLXMLOLEDB Provider &#40;SQLXML 4.0&#41;](../../../database-engine/dev-guide/sqlxmloledb-provider-sqlxml-4-0.md)。</span><span class="sxs-lookup"><span data-stu-id="0ab47-106">For more information, see [SQLXMLOLEDB Provider &#40;SQLXML 4.0&#41;](../../../database-engine/dev-guide/sqlxmloledb-provider-sqlxml-4-0.md).</span></span>  
  
-   <span data-ttu-id="0ab47-107">当出现 SQLXML 错误并返回这些错误时，它们可以包含有关数据库架构的信息，如表名、列名或类型信息。</span><span class="sxs-lookup"><span data-stu-id="0ab47-107">When SQLXML errors occur and are returned, they can include information about the database schema such as table names, column names or type information.</span></span> <span data-ttu-id="0ab47-108">处理这些错误时应非常小心，以使用户无法轻易发现不打算使用或不需要使用的有关您的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安装的信息。</span><span class="sxs-lookup"><span data-stu-id="0ab47-108">You should use care when handling these errors so that information about your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation is not easily discoverable by users where it is not intended or needed.</span></span>  
  
-   <span data-ttu-id="0ab47-109">当使用 SQLXML 查询或向 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 发送更新时，SQLXML 未限制可以交换的数据量，也没有在尝试处理 SQLXML 负载中的数据之前对其大小进行任何检查。</span><span class="sxs-lookup"><span data-stu-id="0ab47-109">When used to either query or send updates to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], SQLXML sets no limit on the amount of data that can be exchanged and does not do any checking on the size of data in a SQLXML payload before attempting to process it.</span></span> <span data-ttu-id="0ab47-110">使用 SQLXML 开发应用程序时，您有责任确保系统上有足够的内存来处理该数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-110">When you develop your application using SQLXML, it is your responsibility to ensure there is enough memory on the system to process the data.</span></span> <span data-ttu-id="0ab47-111">例如，查询服务器上的数据时，应验证客户端上是否具有足够的内存空间来接收该数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-111">For example, when querying data from the server, you should verify there is enough room in memory on the client to receive it.</span></span> <span data-ttu-id="0ab47-112">同样，如果向服务器加载数据，则需要验证该服务器上是否具有足够的可用内存来处理该数据，并且该服务器上是否具有足够的可用磁盘存储空间来存储该数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-112">Likewise, if you are loading data to the server, you need to verify there is enough available memory on the server to process it and enough available disk storage space on the server to store the data.</span></span>  
  
-   <span data-ttu-id="0ab47-113">SQLXML 动态生成 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 查询和更新命令，并将它们发送到 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 执行。</span><span class="sxs-lookup"><span data-stu-id="0ab47-113">SQLXML dynamically generates [!INCLUDE[tsql](../../../includes/tsql-md.md)] queries and update commands and sends them to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] for execution.</span></span> <span data-ttu-id="0ab47-114">这是 SQLXML 查询和更新服务器的唯一方式。</span><span class="sxs-lookup"><span data-stu-id="0ab47-114">This is the only way in which SQLXML queries and updates the server.</span></span> <span data-ttu-id="0ab47-115">结果将以 XML 流或行集的形式接收。</span><span class="sxs-lookup"><span data-stu-id="0ab47-115">Results will be received either as a stream (of XML) or as a rowset.</span></span>  
  
-   <span data-ttu-id="0ab47-116">当接收查询结果时，SQLXML 不会根据收到的数据内容执行任何操作。</span><span class="sxs-lookup"><span data-stu-id="0ab47-116">When receiving query results, SQLXML takes no actions based on the content of the data that it receives.</span></span> <span data-ttu-id="0ab47-117">不会根据数据类型或内容执行额外的处理。</span><span class="sxs-lookup"><span data-stu-id="0ab47-117">No additional processing is done based on the type or contents of the data.</span></span> <span data-ttu-id="0ab47-118">该数据永远不会作为执行操作所使用的代码处理。</span><span class="sxs-lookup"><span data-stu-id="0ab47-118">The data is never treated as code with which to execute actions.</span></span>  
  
-   <span data-ttu-id="0ab47-119">执行 XML 模板时，SQLXML 将提交的模板内包含的 XPath 和 DBObject 查询转换为 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 命令，再针对 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 执行这些命令。</span><span class="sxs-lookup"><span data-stu-id="0ab47-119">When executing XML Templates, SQLXML translates the XPath and DBObject queries contained within the submitted template into [!INCLUDE[tsql](../../../includes/tsql-md.md)] commands that are then executed against [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="0ab47-120">这些命令仅影响现有数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-120">These commands only ever affect existing data.</span></span> <span data-ttu-id="0ab47-121">SQLXML 生成的命令永远不会更改数据库的结构。</span><span class="sxs-lookup"><span data-stu-id="0ab47-121">Commands generated by SQLXML will never alter the structure of the database.</span></span> <span data-ttu-id="0ab47-122">用户必须执行显式命令才能更改数据库结构。</span><span class="sxs-lookup"><span data-stu-id="0ab47-122">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="0ab47-123">例如，将这些命令包含在模板的 `sql:query` 块中。</span><span class="sxs-lookup"><span data-stu-id="0ab47-123">For example, by including them in a `sql:query` block of a template.</span></span>  
  
-   <span data-ttu-id="0ab47-124">当通过映射文件执行 DBObject 查询和 XPath 语句时，SQLXML 不会以任何方式更改数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-124">When executing DBObject queries and XPath statements over mapping files, SQLXML will not alter the data in the database in any way.</span></span>  
  
-   <span data-ttu-id="0ab47-125">SQLXML 可以根据 XML 和 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 数据模型之间的差异更改给定数据的格式。</span><span class="sxs-lookup"><span data-stu-id="0ab47-125">SQLXML may make formatting changes to the given data based on differences between the XML and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] data models.</span></span> <span data-ttu-id="0ab47-126">例如，二者指定时间所采用的格式各不相同。</span><span class="sxs-lookup"><span data-stu-id="0ab47-126">For example, the format for specifying a time is different.</span></span> <span data-ttu-id="0ab47-127">SQLXML 将尝试解析这些差异。</span><span class="sxs-lookup"><span data-stu-id="0ab47-127">SQLXML will attempt to resolve these differences.</span></span> <span data-ttu-id="0ab47-128">因此，可能会丢失某些精度信息。</span><span class="sxs-lookup"><span data-stu-id="0ab47-128">As a result, some precision information may be lost.</span></span>  
  
-   <span data-ttu-id="0ab47-129">SQLXML 未限制其处理数据所需的时间长短。</span><span class="sxs-lookup"><span data-stu-id="0ab47-129">SQLXML sets no limit on the amount of time it takes to process the data.</span></span> <span data-ttu-id="0ab47-130">处理将继续进行，直到出现错误或处理完成为止。</span><span class="sxs-lookup"><span data-stu-id="0ab47-130">Processing will continue until an error occurs or processing is complete.</span></span>  
  
-   <span data-ttu-id="0ab47-131">SQLXML 未能写入文件系统。</span><span class="sxs-lookup"><span data-stu-id="0ab47-131">SQLXML does not write to the file system.</span></span> <span data-ttu-id="0ab47-132">如果用户希望保存从数据库检索到的数据，则必须使用用户自己的代码来执行此操作。</span><span class="sxs-lookup"><span data-stu-id="0ab47-132">If users wish to save the data they retrieve from the database, they must do this in their code.</span></span>  
  
-   <span data-ttu-id="0ab47-133">SQLXML 允许用户对数据库执行所需的任何 SQL 查询。</span><span class="sxs-lookup"><span data-stu-id="0ab47-133">SQLXML allows users to execute any SQL query they like against the database.</span></span> <span data-ttu-id="0ab47-134">此功能决不能向不安全或不受控制的源公开，因为这实质上是公开 SQL 数据库，而不限定任何用户。</span><span class="sxs-lookup"><span data-stu-id="0ab47-134">This functionality should never be exposed to an unsecure or uncontrolled source, as this is essentially opening up the SQL database without provision to any users.</span></span>  
  
-   <span data-ttu-id="0ab47-135">执行 Updategram 时，SQLXML 根据 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 实例将 `updg:sync` 块转换为 DELETE、UPDATE 和 INSERT 命令。</span><span class="sxs-lookup"><span data-stu-id="0ab47-135">When executing Updategrams, SQLXML translates the `updg:sync` blocks into DELETE, UPDATE, and INSERT commands against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="0ab47-136">这些命令仅影响现有数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-136">These commands only ever affect existing data.</span></span> <span data-ttu-id="0ab47-137">SQLXML 生成的命令永远不会更改数据库。</span><span class="sxs-lookup"><span data-stu-id="0ab47-137">Commands generated by SQLXML will never alter the database.</span></span> <span data-ttu-id="0ab47-138">用户必须执行显式命令才能更改数据库结构。</span><span class="sxs-lookup"><span data-stu-id="0ab47-138">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="0ab47-139">例如，将这些命令包含在模板的 `sql:query` 块中。</span><span class="sxs-lookup"><span data-stu-id="0ab47-139">For example, by including them in a `sql:query` block of a template.</span></span>  
  
-   <span data-ttu-id="0ab47-140">执行 DiffGram 时，SQLXML 根据 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 实例将 DiffGram 转换为 DELETE、UPDATE 和 INSERT 命令。</span><span class="sxs-lookup"><span data-stu-id="0ab47-140">When executing DiffGrams, SQLXML translates the DiffGram into DELETE, UPDATE, and INSERT commands against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="0ab47-141">这些命令仅影响现有数据。</span><span class="sxs-lookup"><span data-stu-id="0ab47-141">These commands only ever affect existing data.</span></span> <span data-ttu-id="0ab47-142">SQLXML 生成的命令永远不会更改数据库。</span><span class="sxs-lookup"><span data-stu-id="0ab47-142">Commands generated by SQLXML will never alter the database.</span></span> <span data-ttu-id="0ab47-143">用户必须执行显式命令才能更改数据库结构。</span><span class="sxs-lookup"><span data-stu-id="0ab47-143">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="0ab47-144">例如，将这些命令包含在模板的 `sql:query` 块中。</span><span class="sxs-lookup"><span data-stu-id="0ab47-144">For example, by including them in a `sql:query` block of a template.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0ab47-145">另请参阅</span><span class="sxs-lookup"><span data-stu-id="0ab47-145">See Also</span></span>  
 [<span data-ttu-id="0ab47-146">SQLXML 4.0 安全注意事项</span><span class="sxs-lookup"><span data-stu-id="0ab47-146">SQLXML 4.0 Security Considerations</span></span>](sqlxml-4-0-security-considerations.md)  
  
  
