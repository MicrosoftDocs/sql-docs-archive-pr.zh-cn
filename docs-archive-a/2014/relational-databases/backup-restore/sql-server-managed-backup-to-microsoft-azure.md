---
title: SQL Server 托管备份到 Azure |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: afa01165-39e0-4efe-ac0e-664edb8599fd
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8fbe94eace1244b4e5f37b60848d47b69ecc8144
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87589729"
---
# <a name="sql-server-managed--backup-to-azure"></a><span data-ttu-id="a04e0-102">将托管备份 SQL Server 到 Azure</span><span class="sxs-lookup"><span data-stu-id="a04e0-102">SQL Server Managed  Backup to Azure</span></span>
  [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="a04e0-103">管理和自动执行将 SQL Server 备份到 Azure Blob 存储服务的备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-103">manages and automates SQL Server backups to the Azure Blob storage service.</span></span> <span data-ttu-id="a04e0-104">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]使用的备份策略基于保持期和数据库中的事务工作负载。</span><span class="sxs-lookup"><span data-stu-id="a04e0-104">The backup strategy used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is based on the retention period and the transaction workload on the database.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="a04e0-105">支持指定保持期的时间点还原。</span><span class="sxs-lookup"><span data-stu-id="a04e0-105">supports point in time restore for the retention time period specified.</span></span>   
<span data-ttu-id="a04e0-106">可在数据库级别或实例级别启用[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]以管理 SQL Server 实例上的所有数据库。</span><span class="sxs-lookup"><span data-stu-id="a04e0-106">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] can be enabled at the database level or at the instance level to manage all the databases on the instance of SQL Server.</span></span> <span data-ttu-id="a04e0-107">SQL Server 可以在本地运行，也可以在 Azure 虚拟机等托管环境中运行。</span><span class="sxs-lookup"><span data-stu-id="a04e0-107">The SQL Server can be running on-premises or in hosted environments like the Azure virtual machine.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="a04e0-108">建议用于在 Azure 虚拟机上运行的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="a04e0-108">is recommended for SQL Server running on Azure Virtual Machines.</span></span>  
  
## <a name="benefits-of-automating-sql-server-backup-using-ss_smartbackup"></a><span data-ttu-id="a04e0-109">使用[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]自动化 SQL Server 备份的好处</span><span class="sxs-lookup"><span data-stu-id="a04e0-109">Benefits of Automating SQL Server Backup Using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]</span></span>  
  
-   <span data-ttu-id="a04e0-110">目前，自动备份多个数据库需要制定备份策略、编写自定义代码并安排备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-110">Currently automating backups for multiple databases requires developing a backup strategy, writing custom code, and scheduling backups.</span></span> <span data-ttu-id="a04e0-111">通过使用[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]，只需提供保持期设置和存储位置。</span><span class="sxs-lookup"><span data-stu-id="a04e0-111">Using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], you only are required provide the retention period settings and the storage location.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="a04e0-112">计划、执行并维护备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-112">schedules, performs and maintains the backups.</span></span>  
  
     [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="a04e0-113">可以在数据库级别配置，或以 SQL Server 实例的默认设置来配置。</span><span class="sxs-lookup"><span data-stu-id="a04e0-113">can be configured at the database level or at configured with default settings for an instance of SQL Server.</span></span> <span data-ttu-id="a04e0-114">使用自动备份 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 具有以下优势：</span><span class="sxs-lookup"><span data-stu-id="a04e0-114">Automating backup using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] has the following benefits:</span></span>  
  
    -   <span data-ttu-id="a04e0-115">通过在实例级别设置默认值，可将这些设置应用于任何此后创建的数据库，从而消除了不备份新数据库和丢失数据的风险。</span><span class="sxs-lookup"><span data-stu-id="a04e0-115">By setting the defaults at the instance level, you can apply these settings to any database created thereafter, thus removing the risk of new databases not being backed up and data loss.</span></span>  
  
    -   <span data-ttu-id="a04e0-116">也可在数据库级别启用[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]并设置保持期，从而取代在实例级别设置的默认设置。</span><span class="sxs-lookup"><span data-stu-id="a04e0-116">The option of enabling [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] and setting the retention period at the database level, allows you to override the default settings set at the instance level.</span></span> <span data-ttu-id="a04e0-117">这使您可以对特定数据库的可恢复性具有更为精细的控制力。</span><span class="sxs-lookup"><span data-stu-id="a04e0-117">This allows you to have more granular control on the recoverability for a specific database.</span></span>  
  
-   <span data-ttu-id="a04e0-118">有了[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]，您便无须为数据库指定备份类型或备份频率。</span><span class="sxs-lookup"><span data-stu-id="a04e0-118">With [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], you do not have to specify the type or frequency of the backups for a database.</span></span>  <span data-ttu-id="a04e0-119">指定保持期，并 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 确定数据库在 Azure Blob 存储服务上存储备份的类型和频率。</span><span class="sxs-lookup"><span data-stu-id="a04e0-119">You specify the retention period, and [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] determines the type and frequency of backups for a database stores the backups on Azure Blob storage service.</span></span> <span data-ttu-id="a04e0-120">有关用于创建备份策略的一组条件的详细信息，请 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 参阅本主题中的[组件和概念](#Concepts)部分。</span><span class="sxs-lookup"><span data-stu-id="a04e0-120">For more details on the set of criteria that [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] uses to create the backup strategy,, see the [Components and Concepts](#Concepts) section in this topic.</span></span>  
  
-   <span data-ttu-id="a04e0-121">配置为使用加密后，即提高备份数据的安全性。</span><span class="sxs-lookup"><span data-stu-id="a04e0-121">When configured to use encryption, you have additional security for the backup data.</span></span> <span data-ttu-id="a04e0-122">有关详细信息，请参阅[备份加密](backup-encryption.md)</span><span class="sxs-lookup"><span data-stu-id="a04e0-122">For more information, see [Backup Encryption](backup-encryption.md)</span></span>  
  
 <span data-ttu-id="a04e0-123">有关使用 Azure Blob 存储进行备份的好处的更多详细信息 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，请参阅[使用 Azure Blob 存储服务进行备份和还原 SQL Server](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md)</span><span class="sxs-lookup"><span data-stu-id="a04e0-123">For more details on the benefits of using Azure Blob storage for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups, see [SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md)</span></span>  
  
## <a name="terms-and-definitions"></a><span data-ttu-id="a04e0-124">术语和定义</span><span class="sxs-lookup"><span data-stu-id="a04e0-124">Terms and Definitions</span></span>  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]  
 <span data-ttu-id="a04e0-125">SQL Server 的一项功能，该功能自动备份数据库并根据保持期维护这些备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-125">A SQL Server feature that automates database backup and maintains the backups based on the retention period.</span></span>  
  
 <span data-ttu-id="a04e0-126">保持期</span><span class="sxs-lookup"><span data-stu-id="a04e0-126">Retention Period</span></span>  
 <span data-ttu-id="a04e0-127">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 使用保持期确定为将数据库恢复到指定时间框架的某个时间点，应将哪些备份文件保留在存储中。</span><span class="sxs-lookup"><span data-stu-id="a04e0-127">The retention period is used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] to determine what backup files should be retained in the storage in order to recover a database to a point in time within the time frame specified.</span></span>  <span data-ttu-id="a04e0-128">支持的值为 1 到 30 天的范围。</span><span class="sxs-lookup"><span data-stu-id="a04e0-128">The supported values are in the range of 1-30 days.</span></span>  
  
 <span data-ttu-id="a04e0-129">日志链</span><span class="sxs-lookup"><span data-stu-id="a04e0-129">Log Chain</span></span>  
 <span data-ttu-id="a04e0-130">日志备份的连续序列称为日志链。</span><span class="sxs-lookup"><span data-stu-id="a04e0-130">A continuous sequence of log backups is called a log chain.</span></span> <span data-ttu-id="a04e0-131">日志链从数据库的完整备份开始。</span><span class="sxs-lookup"><span data-stu-id="a04e0-131">A log chain starts with a full backup of the database.</span></span>  
  
##  <a name="requirements-concepts-and-components"></a><a name="Concepts"></a><span data-ttu-id="a04e0-132">要求、概念和组件</span><span class="sxs-lookup"><span data-stu-id="a04e0-132">Requirements, Concepts, and Components</span></span>  
  
  
###  <a name="permissions"></a><a name="Security"></a> <span data-ttu-id="a04e0-133">权限</span><span class="sxs-lookup"><span data-stu-id="a04e0-133">Permissions</span></span>  
 <span data-ttu-id="a04e0-134">Transact-SQL 是用于配置和监控[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]的主要界面。</span><span class="sxs-lookup"><span data-stu-id="a04e0-134">Transact-SQL is the main interface used to configure and monitor [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="a04e0-135">通常，要运行配置存储过程，需要具有**ALTER ANY CREDENTIAL**权限的**db_backupoperator**数据库角色以及 `EXECUTE` 对**sp_delete_backuphistory**存储过程的权限。</span><span class="sxs-lookup"><span data-stu-id="a04e0-135">In general, to run the configuration stored procedures, **db_backupoperator** database role with **ALTER ANY CREDENTIAL** permissions, and `EXECUTE` permissions on **sp_delete_backuphistory** stored procedure is required.</span></span>  <span data-ttu-id="a04e0-136">用于查看信息的存储过程和函数通常分别需要针对存储过程的 `Execute` 权限以及针对函数的 `Select` 权限。</span><span class="sxs-lookup"><span data-stu-id="a04e0-136">Stored procedures and functions used to review information typically require `Execute` permissions on the stored procedure and `Select` on the function respectively.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prereqs"></a><span data-ttu-id="a04e0-137">先决条件</span><span class="sxs-lookup"><span data-stu-id="a04e0-137">Prerequisites</span></span>  
 <span data-ttu-id="a04e0-138">**先决条件：**</span><span class="sxs-lookup"><span data-stu-id="a04e0-138">**Prerequisites:**</span></span>  
  
 <span data-ttu-id="a04e0-139">使用**Azure 存储服务** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 来存储备份文件。</span><span class="sxs-lookup"><span data-stu-id="a04e0-139">**Azure Storage service** is used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] to store the backup files.</span></span>    <span data-ttu-id="a04e0-140">有关创建 Azure 存储帐户的概念、结构和要求详细说明，请查看**SQL Server 备份到 URL** "主题的[关键组件和概念](sql-server-backup-to-url.md#intorkeyconcepts)部分。</span><span class="sxs-lookup"><span data-stu-id="a04e0-140">The concepts, structure, and requirements for creating an Azure storage account is explained in detail in the [Introduction to Key Components and Concepts](sql-server-backup-to-url.md#intorkeyconcepts) section of the **SQL Server Backup to URL** topic.</span></span>  
  
 <span data-ttu-id="a04e0-141">**SQL 凭据**用于存储对 Azure 存储帐户进行身份验证所需的信息。</span><span class="sxs-lookup"><span data-stu-id="a04e0-141">**SQL Credential** is used to store the information required to authenticate to the Azure storage account.</span></span> <span data-ttu-id="a04e0-142">SQL 凭据对象存储帐户名称和访问密钥信息。</span><span class="sxs-lookup"><span data-stu-id="a04e0-142">The SQL Credential object stores the account name and the access key information.</span></span> <span data-ttu-id="a04e0-143">有关详细信息，请参阅**SQL Server 备份到 URL** "主题中的[关键组件和概念简介](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md)部分。</span><span class="sxs-lookup"><span data-stu-id="a04e0-143">For more information, see the [Introduction to Key Components and Concepts](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) section in the **SQL Server Backup to URL** topic.</span></span> <span data-ttu-id="a04e0-144">有关如何创建用于存储 Azure 存储身份验证信息的 SQL 凭据的演练，请参阅[第2课：创建 SQL Server 凭据](../../tutorials/lesson-2-create-a-sql-server-credential.md)。</span><span class="sxs-lookup"><span data-stu-id="a04e0-144">For a walkthrough on how to create a SQL Credential to store Azure Storage authentication information, see [Lesson 2: Create a SQL Server Credential](../../tutorials/lesson-2-create-a-sql-server-credential.md).</span></span>  
  
###  <a name="concepts-and-key-components"></a><a name="Concepts_Components"></a><span data-ttu-id="a04e0-145">概念和关键组件</span><span class="sxs-lookup"><span data-stu-id="a04e0-145">Concepts and Key Components</span></span>  
 <span data-ttu-id="a04e0-146">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]是一项管理备份操作的功能。</span><span class="sxs-lookup"><span data-stu-id="a04e0-146">The [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is a feature that manages the backup operations.</span></span> <span data-ttu-id="a04e0-147">它将元数据存储在**msdb**数据库中，并使用系统作业来写入完整数据库和事务日志备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-147">It stores the metadata in the **msdb** database and uses system jobs to write full database and transaction log backups.</span></span>  
  
#### <a name="components"></a><span data-ttu-id="a04e0-148">组件</span><span class="sxs-lookup"><span data-stu-id="a04e0-148">Components</span></span>  
 <span data-ttu-id="a04e0-149">Transact-SQL 是与 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]交互的主要界面。</span><span class="sxs-lookup"><span data-stu-id="a04e0-149">Transact-SQL is the main interface to interact with [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="a04e0-150">系统存储过程用于启用、配置和监视 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="a04e0-150">System stored procedures are used for enabling, configuring, and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="a04e0-151">系统函数用于检索现有配置设置、参数值和备份文件信息。</span><span class="sxs-lookup"><span data-stu-id="a04e0-151">System functions are used to retrieve existing configuration settings, parameter values, and backup file information.</span></span> <span data-ttu-id="a04e0-152">扩展事件用于呈现错误和警告。</span><span class="sxs-lookup"><span data-stu-id="a04e0-152">Extended events are used to surface errors and warnings.</span></span> <span data-ttu-id="a04e0-153">警报机制通过 SQL 代理作业和 SQL Server 基于策略的管理启用。</span><span class="sxs-lookup"><span data-stu-id="a04e0-153">Alert mechanisms are enabled through SQL Agent jobs and SQL Server Policy Based Management.</span></span> <span data-ttu-id="a04e0-154">以下列表列出了与 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]相关的对象及其功能的说明。</span><span class="sxs-lookup"><span data-stu-id="a04e0-154">The following is a list of the objects and a description of its functionality in relation to [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>  
  
 <span data-ttu-id="a04e0-155">也有 PowerShell cmdlet 可用于配置 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="a04e0-155">PowerShell cmdlets are also available to configure [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="a04e0-156">SQL Server Management Studio 支持还原由 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 使用 **“还原数据库”** 任务创建的备份</span><span class="sxs-lookup"><span data-stu-id="a04e0-156">SQL Server Management Studio supports restoring backups created by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] by using the **Restore Database** task</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="a04e0-157">系统对象</span><span class="sxs-lookup"><span data-stu-id="a04e0-157">System Object</span></span>|<span data-ttu-id="a04e0-158">说明</span><span class="sxs-lookup"><span data-stu-id="a04e0-158">Description</span></span>|  
|<span data-ttu-id="a04e0-159">**MSDB**</span><span class="sxs-lookup"><span data-stu-id="a04e0-159">**MSDB**</span></span>|<span data-ttu-id="a04e0-160">存储由 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]创建的所有备份的元数据和备份历史记录。</span><span class="sxs-lookup"><span data-stu-id="a04e0-160">Stores the metadata, backup history for all the backups created by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|  
|<span data-ttu-id="a04e0-161">[smart_admin set_db_backup &#40;Transact-sql&#41;](https://msdn.microsoft.com/library/dn451013(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="a04e0-161">[smart_admin.set_db_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451013(v=sql.120).aspx)</span></span>|<span data-ttu-id="a04e0-162">为数据库启用和配置[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]的系统存储过程。</span><span class="sxs-lookup"><span data-stu-id="a04e0-162">System stored procedure for enabling and configuring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for a database.</span></span>|  
|<span data-ttu-id="a04e0-163">[smart_admin set_instance_backup &#40;Transact-sql&#41;](https://msdn.microsoft.com/library/dn451009(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="a04e0-163">[smart_admin.set_instance_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451009(v=sql.120).aspx)</span></span>|<span data-ttu-id="a04e0-164">系统存储过程，用于启用和配置 SQL Server 实例的默认设置 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="a04e0-164">System stored procedure for enabling and configuring default settings [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for the SQL Server instance.</span></span>|  
|[<span data-ttu-id="a04e0-165">smart_admin backup_master_switch &#40;Transact-sql&#41;sp_</span><span class="sxs-lookup"><span data-stu-id="a04e0-165">smart_admin.sp_ backup_master_switch &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql)|<span data-ttu-id="a04e0-166">用于暂停和继续运行[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]的系统存储过程。</span><span class="sxs-lookup"><span data-stu-id="a04e0-166">System stored procedure to pause and resume [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|  
|[<span data-ttu-id="a04e0-167">smart_admin sp_set_parameter &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-167">smart_admin.sp_set_parameter &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-set-parameter-transact-sql)|<span data-ttu-id="a04e0-168">用于为[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]启用和配置监视的系统存储过程。</span><span class="sxs-lookup"><span data-stu-id="a04e0-168">System stored procedure to enable and configure monitoring for [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="a04e0-169">示例：启用扩展事件、通知的邮件设置。</span><span class="sxs-lookup"><span data-stu-id="a04e0-169">Examples: enabling extended events, mail settings for notifications.</span></span>|  
|[<span data-ttu-id="a04e0-170">smart_admin sp_backup_on_demand &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-170">smart_admin.sp_backup_on_demand &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-on-demand-transact-sql)|<span data-ttu-id="a04e0-171">系统存储过程，用于对启用的数据库执行即席备份， [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 而无需中断日志链。</span><span class="sxs-lookup"><span data-stu-id="a04e0-171">System stored procedure that is used to perform an ad-hoc backup for a database that is enabled to use [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] without breaking the log chain.</span></span>|  
|[<span data-ttu-id="a04e0-172">smart_admin fn_backup_db_config &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-172">smart_admin.fn_backup_db_config &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-backup-db-config-transact-sql)|<span data-ttu-id="a04e0-173">返回数据库的当前 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 状态和配置值或针对实例上的所有数据库的系统函数。</span><span class="sxs-lookup"><span data-stu-id="a04e0-173">System function that returns the current [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] status and configuration values for a database, or for all the databases on the instance.</span></span>|  
|[<span data-ttu-id="a04e0-174">smart_admin fn_is_master_switch_on &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-174">smart_admin.fn_is_master_switch_on &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-is-master-switch-on-transact-sql)|<span data-ttu-id="a04e0-175">返回主开关状态的系统函数。</span><span class="sxs-lookup"><span data-stu-id="a04e0-175">System function that returns the status of the master switch.</span></span>|  
|[<span data-ttu-id="a04e0-176">smart_admin sp_get_backup_diagnostics &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-176">smart_admin.sp_get_backup_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-get-backup-diagnostics-transact-sql)|<span data-ttu-id="a04e0-177">用于返回扩展事件所记录的事件的系统存储过程。</span><span class="sxs-lookup"><span data-stu-id="a04e0-177">System stored procedure used to return the events logged by Extended Events.</span></span>|  
|[<span data-ttu-id="a04e0-178">smart_admin fn_get_parameter &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-178">smart_admin.fn_get_parameter &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-parameter-transact-sql)|<span data-ttu-id="a04e0-179">返回备份系统设置当前值（如监视和警报的电子邮件设置）的系统函数。</span><span class="sxs-lookup"><span data-stu-id="a04e0-179">System function that returns the current values for backup system settings such as monitoring and mail settings for alerts.</span></span>|  
|[<span data-ttu-id="a04e0-180">smart_admin fn_available_backups &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-180">smart_admin.fn_available_backups &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-available-backups-transact-sql)|<span data-ttu-id="a04e0-181">用于检查指定数据库或实例所有数据库的可用备份的存储过程。</span><span class="sxs-lookup"><span data-stu-id="a04e0-181">Stored Procedure used to retrieve available backups for a specified database or for all the databases in an instance.</span></span>|  
|[<span data-ttu-id="a04e0-182">smart_admin fn_get_current_xevent_settings &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-182">smart_admin.fn_get_current_xevent_settings &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-current-xevent-settings-transact-sql)|<span data-ttu-id="a04e0-183">返回当前扩展事件设置的系统函数。</span><span class="sxs-lookup"><span data-stu-id="a04e0-183">System function that returns the current extended event settings.</span></span>|  
|[<span data-ttu-id="a04e0-184">smart_admin fn_get_health_status &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="a04e0-184">smart_admin.fn_get_health_status &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-health-status-transact-sql)|<span data-ttu-id="a04e0-185">返回由指定期间扩展事件记录的合计错误数的系统函数。</span><span class="sxs-lookup"><span data-stu-id="a04e0-185">System function that returns the aggregated counts of errors logged by Extended Events for a specified period.</span></span>|  
|[<span data-ttu-id="a04e0-186">监视针对 Azure 的 SQL Server 托管备份</span><span class="sxs-lookup"><span data-stu-id="a04e0-186">Monitor SQL Server Managed Backup to Azure</span></span>](sql-server-managed-backup-to-microsoft-azure.md)|<span data-ttu-id="a04e0-187">多种扩展事件，涉及监视[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]、通过电子邮件通知错误和警告、进行 SQL Server 基于策略的管理。</span><span class="sxs-lookup"><span data-stu-id="a04e0-187">Extended Events for monitoring, email notification of errors and warnings, SQL Server Policy Based Management for [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span></span>|  
  
#### <a name="backup-strategy"></a><span data-ttu-id="a04e0-188">备份策略</span><span class="sxs-lookup"><span data-stu-id="a04e0-188">Backup Strategy</span></span>  
 <span data-ttu-id="a04e0-189">**使用的备份策略 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] ：**</span><span class="sxs-lookup"><span data-stu-id="a04e0-189">**Backup Strategy used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]:**</span></span>  
  
 <span data-ttu-id="a04e0-190">安排的备份类型和备份频率是根据数据库的工作负载确定的。</span><span class="sxs-lookup"><span data-stu-id="a04e0-190">The type of backups scheduled and the backup frequency is determined based on the workload of the database.</span></span> <span data-ttu-id="a04e0-191">保持期设置用于决定应在存储中保留备份文件的时间长度以及能否将数据库恢复到保留期内的某个时间点。</span><span class="sxs-lookup"><span data-stu-id="a04e0-191">The retention period settings are used to determine the length of time a backup file should be retained in the storage and the ability to recover the database to a point-in-time within the retention period.</span></span>  
  
 <span data-ttu-id="a04e0-192">**备份容器和文件命名约定：**</span><span class="sxs-lookup"><span data-stu-id="a04e0-192">**Backup Container and File Naming Conventions:**</span></span>  
  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="a04e0-193">使用除可用性数据库之外的所有数据库的 SQL Server 实例名称命名 Azure 存储容器。</span><span class="sxs-lookup"><span data-stu-id="a04e0-193">names the Azure storage container using the SQL Server Instance Name for all databases except availability databases.</span></span>  <span data-ttu-id="a04e0-194">对于可用性数据库，使用可用性组 GUID 来命名 Azure 存储容器。</span><span class="sxs-lookup"><span data-stu-id="a04e0-194">For availability databases, the Availability Group GUID is used to name the Azure storage container.</span></span>  
  
 <span data-ttu-id="a04e0-195">使用以下约定命名非可用性数据库的备份文件：使用数据库名称的前40个字符、不含 "-" 的数据库 GUID 以及时间戳创建名称。</span><span class="sxs-lookup"><span data-stu-id="a04e0-195">The backup file for non availability databases are named using the following convention: The name is created using the first 40 characters of the database name, the database GUID without the '-', and the timestamp.</span></span> <span data-ttu-id="a04e0-196">在各段之间插入下划线字符作为分隔符。</span><span class="sxs-lookup"><span data-stu-id="a04e0-196">The underscore character is inserted between segments as separators.</span></span> <span data-ttu-id="a04e0-197">完整备份使用 **.bak** 文件扩展名，日志备份使用 **.log** 。</span><span class="sxs-lookup"><span data-stu-id="a04e0-197">The **.bak** file extension is used for full backup and **.log** for log backups.</span></span> <span data-ttu-id="a04e0-198">对于可用性组数据库，除了上方所述的文件命名约定之外，还在 40 个字符的数据库名称后添加可用性组数据库 GUID。</span><span class="sxs-lookup"><span data-stu-id="a04e0-198">For Avaialbility Group databases, in addition to the file naming convention described above, the Availability Group database GUID is added after the 40 characters of the database name.</span></span> <span data-ttu-id="a04e0-199">可用性组数据库 GUID 值为 sys.databases 中 group_database_id 的值。</span><span class="sxs-lookup"><span data-stu-id="a04e0-199">The Availability Group database GUID value is the value for group_database_id in sys.databases.</span></span>  
  
 <span data-ttu-id="a04e0-200">**完整数据库备份：** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]如果满足以下任一条件，则代理将计划完整的数据库备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-200">**Full Database Backup:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] agent schedules a full database backup if any of the following is true.</span></span>  
  
-   <span data-ttu-id="a04e0-201">初次为数据库启动 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] ，或在实例级使用默认设置启用 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 时。</span><span class="sxs-lookup"><span data-stu-id="a04e0-201">A database is [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] enabled for the first time, or when [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is enabled with default settings at the instance level.</span></span>  
  
-   <span data-ttu-id="a04e0-202">自上次完备数据库备份以来的日志增长等于或超过 1 GB。</span><span class="sxs-lookup"><span data-stu-id="a04e0-202">The log growth since last full database backup is equal to or larger than 1 GB.</span></span>  
  
-   <span data-ttu-id="a04e0-203">距上次完整数据库备份以来已超过一周的最大时间间隔。</span><span class="sxs-lookup"><span data-stu-id="a04e0-203">The maximum time interval of one week has passed since the last full database backup.</span></span>  
  
-   <span data-ttu-id="a04e0-204">日志链中断。</span><span class="sxs-lookup"><span data-stu-id="a04e0-204">The log chain is broken.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="a04e0-205">会定期进行检查，通过比较备份文件的第一个和最后一个 LSN 确定日志链是否完整。</span><span class="sxs-lookup"><span data-stu-id="a04e0-205">periodically checks to see whether the log chain is intact by comparing the first and last LSNs of the backup files.</span></span> <span data-ttu-id="a04e0-206">如果日志链因为任何原因而存在中断，则 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 会安排一次完整数据库备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-206">If there is break in the log chain for any reason, [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] schedules a full database backup.</span></span> <span data-ttu-id="a04e0-207">日志链断裂的最常见原因可能是使用 Transact-SQL 或通过 SQL Server Management Studio 中的备份任务发出了备份命令。</span><span class="sxs-lookup"><span data-stu-id="a04e0-207">The most common reason for log chain breaks is probably a backup command issued using Transact-SQL or through the Backup task in SQL Server Management Studio.</span></span>  <span data-ttu-id="a04e0-208">其他常见的情况包括意外删除了备份文件或意外的备份覆盖。</span><span class="sxs-lookup"><span data-stu-id="a04e0-208">Other common scenarios include accidental deletion of the backup log files, or accidental overwrites of backups.</span></span>  
  
 <span data-ttu-id="a04e0-209">**事务日志备份：** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]如果满足以下任一条件，则计划日志备份：</span><span class="sxs-lookup"><span data-stu-id="a04e0-209">**Transaction Log Backup:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] schedules a log backup if any of the following is true:</span></span>  
  
-   <span data-ttu-id="a04e0-210">找不到日志备份历史记录。</span><span class="sxs-lookup"><span data-stu-id="a04e0-210">There is no log backup history that can be found.</span></span> <span data-ttu-id="a04e0-211">在首次启动 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 时通常存在这种情况。</span><span class="sxs-lookup"><span data-stu-id="a04e0-211">This is usually true when [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is enabled for the first time.</span></span>  
  
-   <span data-ttu-id="a04e0-212">使用的事务日志空间为 5 MB 或更大。</span><span class="sxs-lookup"><span data-stu-id="a04e0-212">The transaction log space used is 5 MB or larger.</span></span>  
  
-   <span data-ttu-id="a04e0-213">距上次日志备份达到 2 小时的最大时间间隔。</span><span class="sxs-lookup"><span data-stu-id="a04e0-213">The maximum time interval of 2 hours since the last log backup is reached.</span></span>  
  
-   <span data-ttu-id="a04e0-214">事务日志备份滞后于完整备份数据库时。</span><span class="sxs-lookup"><span data-stu-id="a04e0-214">Any time the transaction log backup is lagging behind a full database backup.</span></span> <span data-ttu-id="a04e0-215">目标是使日志链保持在完整备份之前。</span><span class="sxs-lookup"><span data-stu-id="a04e0-215">The goal is to keep the log chain ahead of full backup.</span></span>  
  
#### <a name="retention-period-settings"></a><span data-ttu-id="a04e0-216">保持期设置</span><span class="sxs-lookup"><span data-stu-id="a04e0-216">Retention Period Settings</span></span>  
 <span data-ttu-id="a04e0-217">在启用备份时，必须以天为单位设置保持期：最短为 1 天，最长为 30 天。</span><span class="sxs-lookup"><span data-stu-id="a04e0-217">When enabling backup you must set the retention period in days: The minimum is 1 day, and maximum is 30 days.</span></span>  
  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="a04e0-218">根据保持期设置评估能否恢复到指定的时间点，以决定要保留什么备份文件并找出要删除的备份文件。</span><span class="sxs-lookup"><span data-stu-id="a04e0-218">based on the retention period settings, assesses the ability to recover to a point in time in the specified time, to determine what backup files to keep and identifying the backup files to delete.</span></span> <span data-ttu-id="a04e0-219">备份的 backup_finish_date 用于确定和匹配由保持期设置指定的时间。</span><span class="sxs-lookup"><span data-stu-id="a04e0-219">The backup_finish_date of the backup is used to determine and match the time specified by the retention period settings.</span></span>  
  
#### <a name="important-considerations"></a><span data-ttu-id="a04e0-220">重要注意事项</span><span class="sxs-lookup"><span data-stu-id="a04e0-220">Important Considerations</span></span>  
 <span data-ttu-id="a04e0-221">有一些注意事项对于理解[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]操作十分重要。</span><span class="sxs-lookup"><span data-stu-id="a04e0-221">There are some considerations that are important to understand their impact on [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] operations.</span></span> <span data-ttu-id="a04e0-222">下面列出了这些注意事项：</span><span class="sxs-lookup"><span data-stu-id="a04e0-222">They are listed below:</span></span>  
  
-   <span data-ttu-id="a04e0-223">对于数据库，如果现有完整数据库备份作业正在运行，则 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 将等待当前作业完毕，然后对该数据库进行另一次完整数据库备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-223">For a database, if there is an existing full database backup job running, then [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] waits for the current job to be completed before doing another full database backup for the same database.</span></span> <span data-ttu-id="a04e0-224">同样，给定时间只能运行一个事务日志备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-224">Similarly, only one transaction log backup can be running at a given time.</span></span> <span data-ttu-id="a04e0-225">但是，完整数据库备份和事务日志备份可以同时运行。</span><span class="sxs-lookup"><span data-stu-id="a04e0-225">However, a full database backup and a transaction log backup can run concurrently.</span></span> <span data-ttu-id="a04e0-226">失败会记录为扩展事件。</span><span class="sxs-lookup"><span data-stu-id="a04e0-226">Failures are logged as Extended Events.</span></span>  
  
-   <span data-ttu-id="a04e0-227">如果安排了超过 10 个并发的完整数据库备份，则会通过扩展事件的调试渠道发出一个警告。</span><span class="sxs-lookup"><span data-stu-id="a04e0-227">If more than 10 concurrent full database backups are scheduled, a warning is issued through the debug channel of Extended Events.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="a04e0-228">随后针对其余需要备份的数据库保留一个优先级队列，直到安排并完成所有备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-228">then maintains a priority queue for the remaining databases that require a backup until the all backups are scheduled and completed.</span></span>  
  
###  <a name="support-limitations"></a><a name="support_limits"></a> <span data-ttu-id="a04e0-229">支持限制</span><span class="sxs-lookup"><span data-stu-id="a04e0-229">Support Limitations</span></span>  
 <span data-ttu-id="a04e0-230">以下是对 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 的一些特定限制：</span><span class="sxs-lookup"><span data-stu-id="a04e0-230">The following are some limitations specific to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]:</span></span>  
  
-   [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="a04e0-231">代理只支持数据库完整备份和日志备份。</span><span class="sxs-lookup"><span data-stu-id="a04e0-231">agent supports database backups only: Full and Log Backups.</span></span>  <span data-ttu-id="a04e0-232">不支持文件备份自动化。</span><span class="sxs-lookup"><span data-stu-id="a04e0-232">File backup automation is not supported.</span></span>  
  
-   <span data-ttu-id="a04e0-233">当前支持使用 Transact-SQL 进行[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]操作。</span><span class="sxs-lookup"><span data-stu-id="a04e0-233">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] operations are currently supported using Transact-SQL.</span></span> <span data-ttu-id="a04e0-234">可通过使用扩展事件来进行监视和故障排除。</span><span class="sxs-lookup"><span data-stu-id="a04e0-234">Monitoring and troubleshooting can be done by using Extended Events.</span></span> <span data-ttu-id="a04e0-235">仅在配置 SQL Server 实例的存储和保持期默认设置以及根据 SQL Server 基于策略的管理策略监视备份状态和整体运行状况时支持 PowerShell 和 SMO。</span><span class="sxs-lookup"><span data-stu-id="a04e0-235">PowerShell and SMO support is limited to configuring storage and retention period default settings for an instance of SQL Server, and monitoring the backup status and overall health based on SQL Server Policy Based Management policies.</span></span>  
  
-   <span data-ttu-id="a04e0-236">不支持系统数据库。</span><span class="sxs-lookup"><span data-stu-id="a04e0-236">System Databases are not supported.</span></span>  
  
-   <span data-ttu-id="a04e0-237">Azure Blob 存储服务是唯一受支持的备份存储选项。</span><span class="sxs-lookup"><span data-stu-id="a04e0-237">Azure Blob Storage service is the only supported backup storage option.</span></span> <span data-ttu-id="a04e0-238">不支持备份到磁盘或磁带。</span><span class="sxs-lookup"><span data-stu-id="a04e0-238">Backups to disk or tape are not supported.</span></span>  
  
-   <span data-ttu-id="a04e0-239">目前，Azure 存储中的页 Blob 允许的最大文件大小为 1 TB。</span><span class="sxs-lookup"><span data-stu-id="a04e0-239">Currently, the maximum file size allowed for a Page Blob in Azure Storage is 1 TB.</span></span> <span data-ttu-id="a04e0-240">备份大于 1 TB 的文件将失败。</span><span class="sxs-lookup"><span data-stu-id="a04e0-240">Backup files larger than 1 TB will fail.</span></span> <span data-ttu-id="a04e0-241">为了避免出现这种情况，建议对于大型数据库使用压缩，并在设置[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]之前测试备份文件大小。</span><span class="sxs-lookup"><span data-stu-id="a04e0-241">In order to avoid this situation, we recommend that for large databases, use compression and test the backup file size prior to setting up [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="a04e0-242">可以通过备份到本地磁盘或使用 Transact-sql 语句手动备份到 Azure 存储空间进行测试 `BACKUP TO URL` 。</span><span class="sxs-lookup"><span data-stu-id="a04e0-242">You can either test by backing up to a local disk or manually backing up to Azure storage using `BACKUP TO URL` Transact-SQL statement.</span></span> <span data-ttu-id="a04e0-243">有关详细信息，请参阅 [SQL Server Backup to URL](sql-server-backup-to-url.md)。</span><span class="sxs-lookup"><span data-stu-id="a04e0-243">For more information, see [SQL Server Backup to URL](sql-server-backup-to-url.md).</span></span>  
  
-   <span data-ttu-id="a04e0-244">恢复模式：只支持设置为完整或大容量日志模式的数据库。</span><span class="sxs-lookup"><span data-stu-id="a04e0-244">Recovery Models: Only databases set to Full or Bulk-logged model are supported.</span></span>  <span data-ttu-id="a04e0-245">不支持设置为简单恢复模式的数据库。</span><span class="sxs-lookup"><span data-stu-id="a04e0-245">Databases set to simple recovery model are not supported.</span></span>  
  
-   [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="a04e0-246">可能有一些限制。</span><span class="sxs-lookup"><span data-stu-id="a04e0-246">may have some limitations when it is configured with other technologies supporting backup, high availability, or disaster recovery.</span></span> <span data-ttu-id="a04e0-247">有关详细信息，请参阅[SQL Server 托管备份到 Azure：互操作性和共存](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md)。</span><span class="sxs-lookup"><span data-stu-id="a04e0-247">For more information, see [SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="a04e0-248">相关任务</span><span class="sxs-lookup"><span data-stu-id="a04e0-248">Related Tasks</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="a04e0-249">**任务说明**</span><span class="sxs-lookup"><span data-stu-id="a04e0-249">**Task descriptions**</span></span>|<span data-ttu-id="a04e0-250">**主题**</span><span class="sxs-lookup"><span data-stu-id="a04e0-250">**Topic**</span></span>|  
|<span data-ttu-id="a04e0-251">基本任务包括：为数据库配置[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]或在实例级别配置默认设置，在实例或数据库级别禁用[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]，暂停和重新启动[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="a04e0-251">Basic tasks like configuring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for a database, or configuring default settings at the instance level, disabling [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] at instance or database level, pausing and restarting [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="a04e0-252">针对 Azure 的 SQL Server 托管备份 - 保留和存储设置</span><span class="sxs-lookup"><span data-stu-id="a04e0-252">SQL Server Managed Backup to Azure - Retention and Storage Settings</span></span>](../../database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md)|  
|<span data-ttu-id="a04e0-253">**教程：** 有关配置和监视的分步说明 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="a04e0-253">**Tutorial:** Step by Step instructions to configuring and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="a04e0-254">设置针对 Azure 的 SQL Server 托管备份</span><span class="sxs-lookup"><span data-stu-id="a04e0-254">Setting up SQL Server Managed Backup to Azure</span></span>](enable-sql-server-managed-backup-to-microsoft-azure.md)|  
|<span data-ttu-id="a04e0-255">**教程：** 有关配置和监视 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] 可用性组中的数据库的分步说明。</span><span class="sxs-lookup"><span data-stu-id="a04e0-255">**Tutorial:** Step by Step instructions to configuring and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for databases in Availability Group.</span></span>|[<span data-ttu-id="a04e0-256">为可用性组设置针对 Azure 的 SQL Server 托管备份</span><span class="sxs-lookup"><span data-stu-id="a04e0-256">Setting up SQL Server Managed Backup to Azure for Availability Groups</span></span>](../../database-engine/setting-up-sql-server-managed-backup-to-windows-azure-for-availability-groups.md)|  
|<span data-ttu-id="a04e0-257">与监视[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]相关的工具、概念和任务。</span><span class="sxs-lookup"><span data-stu-id="a04e0-257">Tools and Concepts and tasks related to monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span></span>|[<span data-ttu-id="a04e0-258">监视针对 Azure 的 SQL Server 托管备份</span><span class="sxs-lookup"><span data-stu-id="a04e0-258">Monitor SQL Server Managed Backup to Azure</span></span>](sql-server-managed-backup-to-microsoft-azure.md)|  
|<span data-ttu-id="a04e0-259">对[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]进行故障排除的工具和步骤。</span><span class="sxs-lookup"><span data-stu-id="a04e0-259">Tools and steps to troubleshooting [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="a04e0-260">排查 SQL Server 将托管备份到 Azure 的问题</span><span class="sxs-lookup"><span data-stu-id="a04e0-260">Troubleshooting SQL Server Managed  Backup to Azure</span></span>](../../database-engine/troubleshooting-sql-server-managed-backup-to-windows-azure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="a04e0-261">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a04e0-261">See Also</span></span>  
 <span data-ttu-id="a04e0-262">[SQL Server Azure Blob 存储服务进行备份和还原](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) </span><span class="sxs-lookup"><span data-stu-id="a04e0-262">[SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) </span></span>  
 <span data-ttu-id="a04e0-263">[SQL Server 备份到 URL](sql-server-backup-to-url.md) </span><span class="sxs-lookup"><span data-stu-id="a04e0-263">[SQL Server Backup to URL](sql-server-backup-to-url.md) </span></span>  
 <span data-ttu-id="a04e0-264">[SQL Server 托管备份到 Azure：互操作性和共存](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) </span><span class="sxs-lookup"><span data-stu-id="a04e0-264">[SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) </span></span>  
 [<span data-ttu-id="a04e0-265">排查 SQL Server 将托管备份到 Azure 的问题</span><span class="sxs-lookup"><span data-stu-id="a04e0-265">Troubleshooting SQL Server Managed  Backup to Azure</span></span>](../../database-engine/troubleshooting-sql-server-managed-backup-to-windows-azure.md)  
  
  
