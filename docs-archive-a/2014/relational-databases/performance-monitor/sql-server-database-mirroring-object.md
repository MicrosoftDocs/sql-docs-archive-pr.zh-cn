---
title: SQL Server - Database Mirroring 对象 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Database Mirroring
- database mirroring [SQL Server], performance counters
- performance counters [SQL Server], database mirroring
- Database Mirroring object
ms.assetid: a27b51ee-7637-4525-9424-bcc16947dc13
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 4d4b1b9af5bced6933745d4214d3abcc15af4a60
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87588996"
---
# <a name="sql-server-database-mirroring-object"></a><span data-ttu-id="cba02-102">SQL Server Database Mirroring 对象</span><span class="sxs-lookup"><span data-stu-id="cba02-102">SQL Server, Database Mirroring Object</span></span>
  <span data-ttu-id="cba02-103">**SQLServer:Database Mirroring** 性能对象包含报告有关 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库镜像的性能计数器。</span><span class="sxs-lookup"><span data-stu-id="cba02-103">The **SQLServer:Database Mirroring** performance object contains performance counters that report information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database mirroring.</span></span> <span data-ttu-id="cba02-104">下表列出了此对象包含的计数器。</span><span class="sxs-lookup"><span data-stu-id="cba02-104">The table below lists the counters that this object contains.</span></span>  
  
|<span data-ttu-id="cba02-105">名称</span><span class="sxs-lookup"><span data-stu-id="cba02-105">Name</span></span>|<span data-ttu-id="cba02-106">说明</span><span class="sxs-lookup"><span data-stu-id="cba02-106">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="cba02-107">**Bytes Received/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-107">**Bytes Received/sec**</span></span>|<span data-ttu-id="cba02-108">每秒收到的字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-108">Number of bytes received per second.</span></span>|  
|<span data-ttu-id="cba02-109">**Bytes Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-109">**Bytes Sent/sec**</span></span>|<span data-ttu-id="cba02-110">每秒发送的字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-110">Number of bytes sent per second.</span></span>|  
|<span data-ttu-id="cba02-111">**Log Bytes Received/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-111">**Log Bytes Received/sec**</span></span>|<span data-ttu-id="cba02-112">每秒收到的日志字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-112">Number of bytes of log received per second.</span></span>|  
|<span data-ttu-id="cba02-113">**Log Bytes Redone from Cache/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-113">**Log Bytes Redone from Cache/sec**</span></span>|<span data-ttu-id="cba02-114">在上一秒钟内从镜像日志缓存中获得的重做日志字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-114">Number of redone log bytes that were obtained from the mirroring log cache, in the last second.</span></span><br /><br /> <span data-ttu-id="cba02-115">此计数器只在镜像服务器上使用。</span><span class="sxs-lookup"><span data-stu-id="cba02-115">This counter is used on only the mirror server.</span></span> <span data-ttu-id="cba02-116">在主体服务器上此值始终是 0。</span><span class="sxs-lookup"><span data-stu-id="cba02-116">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="cba02-117">**Log Bytes Sent from Cache/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-117">**Log Bytes Sent from Cache/sec**</span></span>|<span data-ttu-id="cba02-118">在上一秒钟内从镜像日志缓存中获得的发送日志字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-118">Number of sent log bytes that were obtained from the mirroring log cache, in the last second.</span></span><br /><br /> <span data-ttu-id="cba02-119">此计数器只在主体服务器上使用。</span><span class="sxs-lookup"><span data-stu-id="cba02-119">This counter is used on only the principal server.</span></span> <span data-ttu-id="cba02-120">在镜像服务器上此值始终是 0。</span><span class="sxs-lookup"><span data-stu-id="cba02-120">On the mirror server the value is always 0.</span></span>|  
|<span data-ttu-id="cba02-121">**Log Bytes Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-121">**Log Bytes Sent/sec**</span></span>|<span data-ttu-id="cba02-122">每秒发送的日志字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-122">Number of bytes of log sent per second.</span></span>|  
|<span data-ttu-id="cba02-123">**Log Compressed Bytes Rcvd/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-123">**Log Compressed Bytes Rcvd/sec**</span></span>|<span data-ttu-id="cba02-124">在上一秒钟内所接收日志的压缩字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-124">Number of compressed bytes of log received, in the last second.</span></span>|  
|<span data-ttu-id="cba02-125">**Log Compressed Bytes Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-125">**Log Compressed Bytes Sent/sec**</span></span>|<span data-ttu-id="cba02-126">在上一秒钟内所发送日志的压缩字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-126">Number of compressed bytes of log sent, in the last second.</span></span>|  
|<span data-ttu-id="cba02-127">**Log Harden Time (ms)**</span><span class="sxs-lookup"><span data-stu-id="cba02-127">**Log Harden Time (ms)**</span></span>|<span data-ttu-id="cba02-128">日志块在上一秒钟内等待强制写入磁盘的时间（毫秒）。</span><span class="sxs-lookup"><span data-stu-id="cba02-128">Milliseconds that log blocks waited to be hardened to disk, in the last second.</span></span>|  
|<span data-ttu-id="cba02-129">**Log Remaining for Undo KB**</span><span class="sxs-lookup"><span data-stu-id="cba02-129">**Log Remaining for Undo KB**</span></span>|<span data-ttu-id="cba02-130">在故障转移之后等待由新的镜像服务器扫描的日志总字节数 (KB)。</span><span class="sxs-lookup"><span data-stu-id="cba02-130">Total kilobytes of log that remain to be scanned by the new mirror server after failover.</span></span><br /><br /> <span data-ttu-id="cba02-131">此计数器仅可在撤消阶段在镜像服务器上使用。</span><span class="sxs-lookup"><span data-stu-id="cba02-131">This counter is used on only the mirror server during the undo phase.</span></span> <span data-ttu-id="cba02-132">撤销阶段完成后，计数器会重置为 0。</span><span class="sxs-lookup"><span data-stu-id="cba02-132">After the undo phase completes, the counter is reset to 0.</span></span> <span data-ttu-id="cba02-133">在主体服务器上此值始终是 0。</span><span class="sxs-lookup"><span data-stu-id="cba02-133">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="cba02-134">**Log Scanned for Undo KB**</span><span class="sxs-lookup"><span data-stu-id="cba02-134">**Log Scanned for Undo KB**</span></span>|<span data-ttu-id="cba02-135">自故障转移开始已由新的镜像服务器扫描的日志总字节数 (KB)。</span><span class="sxs-lookup"><span data-stu-id="cba02-135">Total kilobytes of log that have been scanned by the new mirror server since failover.</span></span><br /><br /> <span data-ttu-id="cba02-136">此计数器仅可在撤消阶段在镜像服务器上使用。</span><span class="sxs-lookup"><span data-stu-id="cba02-136">This counter is used on only the mirror server during the undo phase.</span></span> <span data-ttu-id="cba02-137">撤销阶段完成后，计数器会重置为 0。</span><span class="sxs-lookup"><span data-stu-id="cba02-137">After the undo phase completes, the counter is reset to 0.</span></span> <span data-ttu-id="cba02-138">在主体服务器上此值始终是 0。</span><span class="sxs-lookup"><span data-stu-id="cba02-138">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="cba02-139">**Log Send Flow Control Time (ms)**</span><span class="sxs-lookup"><span data-stu-id="cba02-139">**Log Send Flow Control Time (ms)**</span></span>|<span data-ttu-id="cba02-140">日志流消息在上一秒钟内等待发送流控制的时间（毫秒）。</span><span class="sxs-lookup"><span data-stu-id="cba02-140">Milliseconds that log stream messages waited for send flow control, in the last second.</span></span><br /><br /> <span data-ttu-id="cba02-141">在数据库镜像中，将日志数据和元数据发送到镜像伙伴是数据量最密集的操作，并可能独占数据库镜像和 Service Broker 发送缓冲区。</span><span class="sxs-lookup"><span data-stu-id="cba02-141">Sending log data and metadata to the mirroring partner is the most data-intensive operation in database mirroring and might monopolize the database mirroring and Service Broker send buffers.</span></span> <span data-ttu-id="cba02-142">使用此计数器可监视数据库镜像会话使用此缓冲区的情况。</span><span class="sxs-lookup"><span data-stu-id="cba02-142">Use this counter to monitor the use of this buffer by the database mirroring session.</span></span>|  
|<span data-ttu-id="cba02-143">**Log Send Queue KB**</span><span class="sxs-lookup"><span data-stu-id="cba02-143">**Log Send Queue KB**</span></span>|<span data-ttu-id="cba02-144">尚未发送到镜像服务器的日志总字节数 (KB)。</span><span class="sxs-lookup"><span data-stu-id="cba02-144">Total number of kilobytes of log that have not yet been sent to the mirror server.</span></span>|  
|<span data-ttu-id="cba02-145">**Mirrored Write Transactions/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-145">**Mirrored Write Transactions/sec**</span></span>|<span data-ttu-id="cba02-146">在上一秒钟内写入镜像数据库并等待日志发送到镜像数据库以进行提交的事务数。</span><span class="sxs-lookup"><span data-stu-id="cba02-146">Number of transactions that wrote to the mirrored database and waited for the log to be sent to the mirror in order to commit, in the last second.</span></span><br /><br /> <span data-ttu-id="cba02-147">仅当主体服务器正在向镜像服务器发送日志记录时，此计数器才会增加。</span><span class="sxs-lookup"><span data-stu-id="cba02-147">This counter is incremented only when the principal server is actively sending log records to the mirror server.</span></span>|  
|<span data-ttu-id="cba02-148">**Pages Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-148">**Pages Sent/sec**</span></span>|<span data-ttu-id="cba02-149">每秒发送的页数。</span><span class="sxs-lookup"><span data-stu-id="cba02-149">Number of pages sent per second.</span></span>|  
|<span data-ttu-id="cba02-150">**Receives/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-150">**Receives/sec**</span></span>|<span data-ttu-id="cba02-151">每秒收到的镜像消息数。</span><span class="sxs-lookup"><span data-stu-id="cba02-151">Number of mirroring messages received per second.</span></span>|  
|<span data-ttu-id="cba02-152">**Redo Bytes/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-152">**Redo Bytes/sec**</span></span>|<span data-ttu-id="cba02-153">每秒在镜像数据库中前滚的日志字节数。</span><span class="sxs-lookup"><span data-stu-id="cba02-153">Number of bytes of log rolled forward on the mirror database per second.</span></span>|  
|<span data-ttu-id="cba02-154">**Redo Queue KB**</span><span class="sxs-lookup"><span data-stu-id="cba02-154">**Redo Queue KB**</span></span>|<span data-ttu-id="cba02-155">当前仍应用于镜像数据库以进行前滚操作的镜像日志的总字节数 (KB)。</span><span class="sxs-lookup"><span data-stu-id="cba02-155">Total number of kilobytes of hardened log that currently remain to be applied to the mirror database to roll it forward.</span></span> <span data-ttu-id="cba02-156">此数据将从镜像数据库发送到主体数据库。</span><span class="sxs-lookup"><span data-stu-id="cba02-156">This is sent to the Principal from the Mirror.</span></span>|  
|<span data-ttu-id="cba02-157">**Send/Receive Ack Time**</span><span class="sxs-lookup"><span data-stu-id="cba02-157">**Send/Receive Ack Time**</span></span>|<span data-ttu-id="cba02-158">在上一秒钟内消息等待伙伴确认的时间（毫秒）。</span><span class="sxs-lookup"><span data-stu-id="cba02-158">Milliseconds that messages waited for acknowledgement from the partner, in the last second.</span></span><br /><br /> <span data-ttu-id="cba02-159">在解决可能由网络瓶颈导致的问题（例如莫名其妙的故障转移、发送队列很大或事务滞后时间较长）时，此计数器非常有用。</span><span class="sxs-lookup"><span data-stu-id="cba02-159">This counter is helpful in troubleshooting a problem that might be caused by a network bottleneck, such as unexplained failovers, a large send queue, or high transaction latency.</span></span> <span data-ttu-id="cba02-160">在这些情况下，可以分析此计数器的值来确定是否是由于网络而导致出现上述问题。</span><span class="sxs-lookup"><span data-stu-id="cba02-160">In such cases, you can analyze the value of this counter to determine whether the network is causing the problem.</span></span>|  
|<span data-ttu-id="cba02-161">**Sends/sec**</span><span class="sxs-lookup"><span data-stu-id="cba02-161">**Sends/sec**</span></span>|<span data-ttu-id="cba02-162">每秒发送的镜像消息数。</span><span class="sxs-lookup"><span data-stu-id="cba02-162">Number of mirroring messages sent per second.</span></span>|  
|<span data-ttu-id="cba02-163">**Transaction Delay**</span><span class="sxs-lookup"><span data-stu-id="cba02-163">**Transaction Delay**</span></span>|<span data-ttu-id="cba02-164">等待未终止的提交确认的延迟时间。</span><span class="sxs-lookup"><span data-stu-id="cba02-164">Delay in waiting for unterminated commit acknowledgement.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="cba02-165">根据每个伙伴当前执行的角色不同，某些计时器显示零值。</span><span class="sxs-lookup"><span data-stu-id="cba02-165">On each partner, some of the counters show a zero value depending on what role the partner is currently performing.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="cba02-166">备注</span><span class="sxs-lookup"><span data-stu-id="cba02-166">Remarks</span></span>  
 <span data-ttu-id="cba02-167">使用性能计数器可以监视数据库镜像性能。</span><span class="sxs-lookup"><span data-stu-id="cba02-167">The performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="cba02-168">例如，可以检查 **Transaction Delay** 计数器以确定数据库镜像是否影响主体服务器的性能，可以检查 **Redo Queue** 和 **Log Send Queue** 计数器以确定镜像数据库与主体数据库之间保持同步的情况。</span><span class="sxs-lookup"><span data-stu-id="cba02-168">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="cba02-169">还可以检查 **Log Bytes Sent/sec** 计数器以监视每秒发送的日志量。</span><span class="sxs-lookup"><span data-stu-id="cba02-169">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cba02-170">另请参阅</span><span class="sxs-lookup"><span data-stu-id="cba02-170">See Also</span></span>  
 [<span data-ttu-id="cba02-171">监视资源使用情况（系统监视器）</span><span class="sxs-lookup"><span data-stu-id="cba02-171">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
