---
title: SQL Server - Transactions 对象 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Transactions
- Transactions object
ms.assetid: 85240267-78fd-476a-9ef6-010d6cf32dd8
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 73071af197c042bf6ef044d6b9a625cffde296e9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687795"
---
# <a name="sql-server-transactions-object"></a><span data-ttu-id="10ab7-102">SQL Server Transactions 对象</span><span class="sxs-lookup"><span data-stu-id="10ab7-102">SQL Server, Transactions Object</span></span>
  <span data-ttu-id="10ab7-103">Microsoft **中的** Transactions [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 对象提供的计数器用于监视 [!INCLUDE[ssDE](../../includes/ssde-md.md)]实例中处于活动状态的事务的数量，以及这些事务对资源（如 **tempdb**中的快照隔离行版本存储区）的影响。</span><span class="sxs-lookup"><span data-stu-id="10ab7-103">The **Transactions** object in Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides counters to monitor the number of transactions active in an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], and the effects of those transactions on resources such as the snapshot isolation row version store in **tempdb**.</span></span> <span data-ttu-id="10ab7-104">事务是工作的逻辑单位，是一组要么必须全部成功要么必须全部从数据库中清除（以便保持数据的逻辑完整性）的操作。</span><span class="sxs-lookup"><span data-stu-id="10ab7-104">Transactions are logical units of work; a set of operations that must either all succeed or all be erased from a database in order to maintain the logical integrity of the data.</span></span> <span data-ttu-id="10ab7-105">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库中，对数据的所有修改都在事务中进行。</span><span class="sxs-lookup"><span data-stu-id="10ab7-105">All modifications of data in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases are made in transactions.</span></span>  
  
 <span data-ttu-id="10ab7-106">当数据库设置为允许快照隔离级别时， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 必须保留对数据库中每行进行修改的记录。</span><span class="sxs-lookup"><span data-stu-id="10ab7-106">When a database is set to allow snapshot isolation level, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must maintain a record of the modifications made to each row in a database.</span></span> <span data-ttu-id="10ab7-107">每次修改行时，由于在修改前行已存在，所以行的副本将记录在 **tempdb**中的行版本存储区。</span><span class="sxs-lookup"><span data-stu-id="10ab7-107">Each time a row is modified, a copy of the row as it existed before the modification is recorded in a row version store in **tempdb**.</span></span> <span data-ttu-id="10ab7-108">**Transaction** 对象中的许多计数器可用来监视 **tempdb**中的行版本存储区的大小和增长速率。</span><span class="sxs-lookup"><span data-stu-id="10ab7-108">Many of the counters in the **Transaction** object can be used to monitor the size and rate of growth of the row version store in **tempdb**.</span></span>  
  
 <span data-ttu-id="10ab7-109">**Transactions** 对象计数器报告一个 [!INCLUDE[ssDE](../../includes/ssde-md.md)]实例的所有事务。</span><span class="sxs-lookup"><span data-stu-id="10ab7-109">The **Transactions** object counters report all transactions in one instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
 <span data-ttu-id="10ab7-110">下表说明了 **SQLServer:Transactions** 计数器。</span><span class="sxs-lookup"><span data-stu-id="10ab7-110">This table describes the **SQLServer:Transactions** counters.</span></span>  
  
|<span data-ttu-id="10ab7-111">SQL Server Transactions 计数器</span><span class="sxs-lookup"><span data-stu-id="10ab7-111">SQL Server Transactions counters</span></span>|<span data-ttu-id="10ab7-112">说明</span><span class="sxs-lookup"><span data-stu-id="10ab7-112">Description</span></span>|  
|--------------------------------------|-----------------|  
|<span data-ttu-id="10ab7-113">**Free Space in tempdb (KB)**</span><span class="sxs-lookup"><span data-stu-id="10ab7-113">**Free Space in tempdb (KB)**</span></span>|<span data-ttu-id="10ab7-114">**tempdb**中的可用空间量 (KB)。</span><span class="sxs-lookup"><span data-stu-id="10ab7-114">The amount of space (in kilobytes) available in **tempdb**.</span></span> <span data-ttu-id="10ab7-115">必须具有足够的可用空间以保存快照隔离级别版本存储区和在 [!INCLUDE[ssDE](../../includes/ssde-md.md)]实例中创建的所有新临时对象。</span><span class="sxs-lookup"><span data-stu-id="10ab7-115">There must be enough free space to hold both the snapshot isolation level version store and all new temporary objects created in this instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>|  
|<span data-ttu-id="10ab7-116">**Longest Transaction Running Time**</span><span class="sxs-lookup"><span data-stu-id="10ab7-116">**Longest Transaction Running Time**</span></span>|<span data-ttu-id="10ab7-117">比任何其他当前事务活动时间都长的事务启动后运行的时间长度（秒）。</span><span class="sxs-lookup"><span data-stu-id="10ab7-117">The length of time (in seconds) since the start of the transaction that has been active longer than any other current transaction.</span></span> <span data-ttu-id="10ab7-118">在数据库处于读取已提交读快照隔离级别之下时，该计数器只显示活动。</span><span class="sxs-lookup"><span data-stu-id="10ab7-118">This counter only shows activity when the database is under read committed snapshot isolation level.</span></span> <span data-ttu-id="10ab7-119">如果数据库处于任何其他隔离级别中，该计数器将不会记录任何活动。</span><span class="sxs-lookup"><span data-stu-id="10ab7-119">It does not log any activity if the database is in any other isolation level.</span></span>|  
|<span data-ttu-id="10ab7-120">**NonSnapshot Version Transactions**</span><span class="sxs-lookup"><span data-stu-id="10ab7-120">**NonSnapshot Version Transactions**</span></span>|<span data-ttu-id="10ab7-121">未使用快照隔离级别并进行了数据修改（这些修改在 **tempdb** 版本存储区中生成行版本）的当前活动事务的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-121">The number of currently active transactions that are not using snapshot isolation level and have made data modifications that have generated row versions in the **tempdb** version store.</span></span>|  
|<span data-ttu-id="10ab7-122">**Snapshot Transactions**</span><span class="sxs-lookup"><span data-stu-id="10ab7-122">**Snapshot Transactions**</span></span>|<span data-ttu-id="10ab7-123">使用快照隔离级别的当前活动事务的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-123">The number of currently active transactions using the snapshot isolation level.</span></span><br /><br /> <span data-ttu-id="10ab7-124">注意：Snapshot Transactions 对象计数器在进行第一次数据访问时响应，而不是在发出 `BEGIN TRANSACTION` 语句时响应。</span><span class="sxs-lookup"><span data-stu-id="10ab7-124">Note: The **Snapshot Transactions** object counter responds when the first data access occurs, not when the `BEGIN TRANSACTION` statement is issued.</span></span>|  
|<span data-ttu-id="10ab7-125">**中的**</span><span class="sxs-lookup"><span data-stu-id="10ab7-125">**Transactions**</span></span>|<span data-ttu-id="10ab7-126">当前活动的所有类型的事务的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-126">The number of currently active transactions of all types.</span></span>|  
|<span data-ttu-id="10ab7-127">**Update conflict ratio**</span><span class="sxs-lookup"><span data-stu-id="10ab7-127">**Update conflict ratio**</span></span>|<span data-ttu-id="10ab7-128">使用快照隔离级别的、在最后一秒内遇到更新冲突的事务的百分比。</span><span class="sxs-lookup"><span data-stu-id="10ab7-128">The percentage of those transactions using the snapshot isolation level that have encountered update conflicts within the last second.</span></span> <span data-ttu-id="10ab7-129">更新冲突在以下情况下发生：快照隔离级别事务尝试修改一行，但该行最近一次修改由在快照隔离级别事务启动时未提交的其他事务执行。</span><span class="sxs-lookup"><span data-stu-id="10ab7-129">An update conflict occurs when a snapshot isolation level transaction attempts to modify a row that last was modified by another transaction that was not committed when the snapshot isolation level transaction started.</span></span>|  
|<span data-ttu-id="10ab7-130">**Update Snapshot Transactions**</span><span class="sxs-lookup"><span data-stu-id="10ab7-130">**Update Snapshot Transactions**</span></span>|<span data-ttu-id="10ab7-131">使用快照隔离级别并已修改数据的当前活动事务的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-131">The number of currently active transactions using the snapshot isolation level and have modified data.</span></span>|  
|<span data-ttu-id="10ab7-132">**Version Cleanup rate (KB/s)**</span><span class="sxs-lookup"><span data-stu-id="10ab7-132">**Version Cleanup rate (KB/s)**</span></span>|<span data-ttu-id="10ab7-133">行版本从 **tempdb**中的快照隔离版本存储区中删除的速率（KB/秒）。</span><span class="sxs-lookup"><span data-stu-id="10ab7-133">The rate (in kilobytes per second) at which row versions are removed from the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="10ab7-134">**Version Generation rate (KB/s)**</span><span class="sxs-lookup"><span data-stu-id="10ab7-134">**Version Generation rate (KB/s)**</span></span>|<span data-ttu-id="10ab7-135">向 **tempdb**中的快照隔离版本存储区中添加新行版本的速率（KB/秒）。</span><span class="sxs-lookup"><span data-stu-id="10ab7-135">The rate (in kilobytes per second) at which new row versions are added to the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="10ab7-136">**Version Store Size (KB)**</span><span class="sxs-lookup"><span data-stu-id="10ab7-136">**Version Store Size (KB)**</span></span>|<span data-ttu-id="10ab7-137">**tempdb** 中用来存储快照隔离级别行版本的空间量 (KB)。</span><span class="sxs-lookup"><span data-stu-id="10ab7-137">The amount of space (in kilobytes) in **tempdb** being used to store snapshot isolation level row versions.</span></span>|  
|<span data-ttu-id="10ab7-138">**Version Store unit count**</span><span class="sxs-lookup"><span data-stu-id="10ab7-138">**Version Store unit count**</span></span>|<span data-ttu-id="10ab7-139">**tempdb**中的快照隔离版本存储区中的活动分配单元的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-139">The number of active allocation units in the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="10ab7-140">**Version Store unit creation**</span><span class="sxs-lookup"><span data-stu-id="10ab7-140">**Version Store unit creation**</span></span>|<span data-ttu-id="10ab7-141">[!INCLUDE[ssDE](../../includes/ssde-md.md)] 实例启动后，在快照隔离存储区中创建的分配单元的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-141">The number of allocation units that have been created in the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
|<span data-ttu-id="10ab7-142">**Version Store unit truncation**</span><span class="sxs-lookup"><span data-stu-id="10ab7-142">**Version Store unit truncation**</span></span>|<span data-ttu-id="10ab7-143">[!INCLUDE[ssDE](../../includes/ssde-md.md)] 实例启动后，从快照隔离存储区中删除的分配单元的数目。</span><span class="sxs-lookup"><span data-stu-id="10ab7-143">The number of allocation units that have been removed from the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="10ab7-144">另请参阅</span><span class="sxs-lookup"><span data-stu-id="10ab7-144">See Also</span></span>  
 [<span data-ttu-id="10ab7-145">监视资源使用情况（系统监视器）</span><span class="sxs-lookup"><span data-stu-id="10ab7-145">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
