---
title: SQL Server - Buffer Manager 对象 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Buffer Manager object
- SQLServer:Buffer Manager
ms.assetid: 9775ebde-111d-476c-9188-b77805f90e98
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: cc473447934b6274e0d202f6240634fb00d90491
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87581166"
---
# <a name="sql-server-buffer-manager-object"></a><span data-ttu-id="75798-102">SQL Server Buffer Manager 对象</span><span class="sxs-lookup"><span data-stu-id="75798-102">SQL Server, Buffer Manager Object</span></span>
  <span data-ttu-id="75798-103">**Buffer Manager** 对象提供了计数器，用于监视 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 如何使用以下项：</span><span class="sxs-lookup"><span data-stu-id="75798-103">The **Buffer Manager** object provides counters to monitor how [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses:</span></span>  
  
-   <span data-ttu-id="75798-104">存储数据页的内存。</span><span class="sxs-lookup"><span data-stu-id="75798-104">Memory to store data pages.</span></span>  
  
-   <span data-ttu-id="75798-105">用于监视 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 读取和写入数据库页时的物理 I/O 的计数器。</span><span class="sxs-lookup"><span data-stu-id="75798-105">Counters to monitor the physical I/O as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reads and writes database pages.</span></span>  
  
-   <span data-ttu-id="75798-106">用于借助高速非易失性存储（如固态硬盘 (SSD)）扩展缓冲区高速缓存的缓冲池扩展。</span><span class="sxs-lookup"><span data-stu-id="75798-106">Buffer pool extension to extend the buffer cache by using fast non-volatile storage such as solid-state drives (SSD).</span></span>  
  
 <span data-ttu-id="75798-107">监视 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 使用的内存和计数器有助于确定：</span><span class="sxs-lookup"><span data-stu-id="75798-107">Monitoring the memory and the counters used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] helps you determine:</span></span>  
  
-   <span data-ttu-id="75798-108">是否存在物理内存不足的瓶颈。</span><span class="sxs-lookup"><span data-stu-id="75798-108">If bottlenecks exist from inadequate physical memory.</span></span> <span data-ttu-id="75798-109">如果 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 无法将经常访问的数据存储在缓存中，则必须从磁盘检索数据。</span><span class="sxs-lookup"><span data-stu-id="75798-109">If it cannot store frequently accessed data in cache, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must retrieve the data from disk.</span></span>  
  
-   <span data-ttu-id="75798-110">是否可以通过添加更多内存或增加数据缓存或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 内部结构的可用内存来提高查询性能。</span><span class="sxs-lookup"><span data-stu-id="75798-110">If query performance can be improved by adding more memory, or by making more memory available to the data cache or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] internal structures.</span></span>  
  
-   <span data-ttu-id="75798-111">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 需要从磁盘读取数据的频率。</span><span class="sxs-lookup"><span data-stu-id="75798-111">How often [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] needs to read data from disk.</span></span> <span data-ttu-id="75798-112">与其他操作（例如内存访问）相比，物理 I/O 会消耗大量时间。</span><span class="sxs-lookup"><span data-stu-id="75798-112">Compared with other operations, such as memory access, physical I/O consumes a lot of time.</span></span> <span data-ttu-id="75798-113">尽可能减少物理 I/O 可以提高查询性能。</span><span class="sxs-lookup"><span data-stu-id="75798-113">Minimizing physical I/O can improve query performance.</span></span>  
  
## <a name="buffer-manager-performance-objects"></a><span data-ttu-id="75798-114">缓冲区管理器性能对象</span><span class="sxs-lookup"><span data-stu-id="75798-114">Buffer Manager Performance Objects</span></span>  
 <span data-ttu-id="75798-115">下表介绍 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Buffer Manager 性能对象。</span><span class="sxs-lookup"><span data-stu-id="75798-115">This table describes the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **Buffer Manager** performance objects.</span></span>  
  
|<span data-ttu-id="75798-116">SQL Server Buffer Manager 计数器</span><span class="sxs-lookup"><span data-stu-id="75798-116">SQL Server Buffer Manager counters</span></span>|<span data-ttu-id="75798-117">说明</span><span class="sxs-lookup"><span data-stu-id="75798-117">Description</span></span>|  
|----------------------------------------|-----------------|  
|<span data-ttu-id="75798-118">**缓冲区缓存命中率**</span><span class="sxs-lookup"><span data-stu-id="75798-118">**Buffer cache hit ratio**</span></span>|<span data-ttu-id="75798-119">指示在缓冲区高速缓存中找到而不需要从磁盘中读取的页的百分比。</span><span class="sxs-lookup"><span data-stu-id="75798-119">Indicates the percentage of pages found in the buffer cache without having to read from disk.</span></span> <span data-ttu-id="75798-120">该比率是缓存命中总次数与过去几千页访问以来的缓存查找总次数之比。</span><span class="sxs-lookup"><span data-stu-id="75798-120">The ratio is the total number of cache hits divided by the total number of cache lookups over the last few thousand page accesses.</span></span> <span data-ttu-id="75798-121">经过很长时间后，该比率的变化很小。</span><span class="sxs-lookup"><span data-stu-id="75798-121">After a long period of time, the ratio moves very little.</span></span> <span data-ttu-id="75798-122">由于从缓存中读取数据比从磁盘中读取数据的开销小得多，一般希望该比率高一些。</span><span class="sxs-lookup"><span data-stu-id="75798-122">Because reading from the cache is much less expensive than reading from disk, you want this ratio to be high.</span></span> <span data-ttu-id="75798-123">通常，可以通过增加 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的可用内存量或使用缓冲池扩展功能来提高缓冲区缓存命中率。</span><span class="sxs-lookup"><span data-stu-id="75798-123">Generally, you can increase the buffer cache hit ratio by increasing the amount of memory available to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or by using the buffer pool extension feature.</span></span>|  
|<span data-ttu-id="75798-124">**Checkpoint pages/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-124">**Checkpoint pages/sec**</span></span>|<span data-ttu-id="75798-125">指示由要求刷新所有脏页的检查点或其他操作每秒刷新到磁盘的页数。</span><span class="sxs-lookup"><span data-stu-id="75798-125">Indicates the number of pages flushed to disk per second by a checkpoint or other operation that require all dirty pages to be flushed.</span></span>|  
|<span data-ttu-id="75798-126">**Database pages**</span><span class="sxs-lookup"><span data-stu-id="75798-126">**Database pages**</span></span>|<span data-ttu-id="75798-127">指示缓冲池中包含数据库内容的页数。</span><span class="sxs-lookup"><span data-stu-id="75798-127">Indicates the number of pages in the buffer pool with database content.</span></span>|  
|<span data-ttu-id="75798-128">**Extension allocated pages**</span><span class="sxs-lookup"><span data-stu-id="75798-128">**Extension allocated pages**</span></span>|<span data-ttu-id="75798-129">缓冲池扩展文件中非空闲高速缓存页的总数。</span><span class="sxs-lookup"><span data-stu-id="75798-129">Total number of non-free cache pages in the buffer pool extension file.</span></span>|  
|<span data-ttu-id="75798-130">**Extension free pages**</span><span class="sxs-lookup"><span data-stu-id="75798-130">**Extension free pages**</span></span>|<span data-ttu-id="75798-131">缓冲池扩展文件中空闲高速缓存页的总数。</span><span class="sxs-lookup"><span data-stu-id="75798-131">Total number of free cache pages in the buffer pool extension file.</span></span>|  
|<span data-ttu-id="75798-132">**Extension in use as percentage**</span><span class="sxs-lookup"><span data-stu-id="75798-132">**Extension in use as percentage**</span></span>|<span data-ttu-id="75798-133">缓冲区管理器页占用的缓冲池扩展分页文件的百分比。</span><span class="sxs-lookup"><span data-stu-id="75798-133">Percentage of the buffer pool extension paging file occupied by buffer manager pages.</span></span>|  
|<span data-ttu-id="75798-134">**Extension outstanding IO counter**</span><span class="sxs-lookup"><span data-stu-id="75798-134">**Extension outstanding IO counter**</span></span>|<span data-ttu-id="75798-135">缓冲池扩展文件的 I/O 队列长度。</span><span class="sxs-lookup"><span data-stu-id="75798-135">I/O queue length for the buffer pool extension file.</span></span>|  
|<span data-ttu-id="75798-136">**Extension page evictions/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-136">**Extension page evictions/sec**</span></span>|<span data-ttu-id="75798-137">每秒从缓冲池扩展文件中逐出的页数。</span><span class="sxs-lookup"><span data-stu-id="75798-137">Number of pages evicted from the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="75798-138">**Extension page reads/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-138">**Extension page reads/sec**</span></span>|<span data-ttu-id="75798-139">每秒从缓冲池扩展文件中读取的页数。</span><span class="sxs-lookup"><span data-stu-id="75798-139">Number of pages read from the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="75798-140">**Extension page unreferenced time**</span><span class="sxs-lookup"><span data-stu-id="75798-140">**Extension page unreferenced time**</span></span>|<span data-ttu-id="75798-141">未被引用时，页在缓冲池扩展中保留的平均时长（以秒计）。</span><span class="sxs-lookup"><span data-stu-id="75798-141">Average seconds a page will stay in the buffer pool extension without references to it.</span></span>|  
|<span data-ttu-id="75798-142">**Extension pages writes/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-142">**Extension pages writes/sec**</span></span>|<span data-ttu-id="75798-143">每秒向缓冲池扩展文件中写入的页数。</span><span class="sxs-lookup"><span data-stu-id="75798-143">Number of pages written to the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="75798-144">**Free list stalls/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-144">**Free list stalls/sec**</span></span>|<span data-ttu-id="75798-145">指示每秒必须等待空闲页面的请求数量。</span><span class="sxs-lookup"><span data-stu-id="75798-145">Indicates the number of requests per second that had to wait for a free page.</span></span>|  
|<span data-ttu-id="75798-146">**Lazy writes/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-146">**Lazy writes/sec**</span></span>|<span data-ttu-id="75798-147">指示缓冲区管理器惰性编写器每秒写入的缓冲区数。</span><span class="sxs-lookup"><span data-stu-id="75798-147">Indicates the number of buffers written per second by the buffer manager's lazy writer.</span></span> <span data-ttu-id="75798-148">“惰性编写器”是一个系统进程，用于成批刷新过期的脏缓冲区（包含更改的缓冲区，必须将这些更改写回磁盘，才能将缓冲区重用于其他页），并使它们可用于用户进程。</span><span class="sxs-lookup"><span data-stu-id="75798-148">The *lazy writer* is a system process that flushes out batches of dirty, aged buffers (buffers that contain changes that must be written back to disk before the buffer can be reused for a different page) and makes them available to user processes.</span></span> <span data-ttu-id="75798-149">惰性编写器不需要为创建可用缓冲区而频繁执行检查点。</span><span class="sxs-lookup"><span data-stu-id="75798-149">The lazy writer eliminates the need to perform frequent checkpoints in order to create available buffers.</span></span>|  
|<span data-ttu-id="75798-150">**Page life expectancy**</span><span class="sxs-lookup"><span data-stu-id="75798-150">**Page life expectancy**</span></span>|<span data-ttu-id="75798-151">指示页面在没有引用的情况下，在此节点的缓冲池中停留的时间（以秒计）。</span><span class="sxs-lookup"><span data-stu-id="75798-151">Indicates the number of seconds a page will stay in the buffer pool without references.</span></span>|  
|<span data-ttu-id="75798-152">**Page lookups/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-152">**Page lookups/sec**</span></span>|<span data-ttu-id="75798-153">指示每秒要求在缓冲池中查找页的请求数。</span><span class="sxs-lookup"><span data-stu-id="75798-153">Indicates the number of requests per second to find a page in the buffer pool.</span></span>|  
|<span data-ttu-id="75798-154">**Page reads/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-154">**Page reads/sec**</span></span>|<span data-ttu-id="75798-155">指示每秒发生的物理数据库页读取数。</span><span class="sxs-lookup"><span data-stu-id="75798-155">Indicates the number of physical database page reads that are issued per second.</span></span> <span data-ttu-id="75798-156">此统计信息显示的是所有数据库间的物理页读取总数。</span><span class="sxs-lookup"><span data-stu-id="75798-156">This statistic displays the total number of physical page reads across all databases.</span></span> <span data-ttu-id="75798-157">由于物理 I/O 的开销大，可以通过使用更大的数据缓存、智能索引、更有效的查询或更改数据库设计等方法，将开销降到最低。</span><span class="sxs-lookup"><span data-stu-id="75798-157">Because physical I/O is expensive, you may be able to minimize the cost, either by using a larger data cache, intelligent indexes, and more efficient queries, or by changing the database design.</span></span>|  
|<span data-ttu-id="75798-158">**Page writes/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-158">**Page writes/sec**</span></span>|<span data-ttu-id="75798-159">指示每秒发出的物理数据库页写入数。</span><span class="sxs-lookup"><span data-stu-id="75798-159">Indicates the number of physical database page writes that are issued per second.</span></span>|  
|<span data-ttu-id="75798-160">**Readahead pages/sec**</span><span class="sxs-lookup"><span data-stu-id="75798-160">**Readahead pages/sec**</span></span>|<span data-ttu-id="75798-161">指示每秒为预期使用读取的页数。</span><span class="sxs-lookup"><span data-stu-id="75798-161">Indicates the number of pages read per second in anticipation of use.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="75798-162">另请参阅</span><span class="sxs-lookup"><span data-stu-id="75798-162">See Also</span></span>  
 <span data-ttu-id="75798-163">[SQL Server:Buffer Node](sql-server-buffer-node.md) </span><span class="sxs-lookup"><span data-stu-id="75798-163">[SQL Server:Buffer Node](sql-server-buffer-node.md) </span></span>  
 <span data-ttu-id="75798-164">[“服务器内存”服务器配置选项](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span><span class="sxs-lookup"><span data-stu-id="75798-164">[Server Memory Server Configuration Options](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span></span>  
 <span data-ttu-id="75798-165">[SQL Server Plan Cache 对象](sql-server-plan-cache-object.md) </span><span class="sxs-lookup"><span data-stu-id="75798-165">[SQL Server, Plan Cache Object](sql-server-plan-cache-object.md) </span></span>  
 <span data-ttu-id="75798-166">[监视资源使用情况（系统监视器）](monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="75798-166">[Monitor Resource Usage &#40;System Monitor&#41;](monitor-resource-usage-system-monitor.md) </span></span>  
 <span data-ttu-id="75798-167">[sys.dm_os_performance_counters (Transact-SQL)](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="75798-167">[sys.dm_os_performance_counters &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql) </span></span>  
 [<span data-ttu-id="75798-168">缓冲池扩展</span><span class="sxs-lookup"><span data-stu-id="75798-168">Buffer Pool Extension</span></span>](../../database-engine/configure-windows/buffer-pool-extension.md)  
  
  
