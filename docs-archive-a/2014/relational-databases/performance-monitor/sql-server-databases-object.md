---
title: SQL Server - Databases 对象 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], monitoring
- Databases object
- SQLServer:Databases
- Availability Groups [SQL Server], performance counters
ms.assetid: a7f9e7d4-fff4-4c72-8b3e-3f18dffc8919
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 2f4f46bd388476934226e41d371c85fa13b94d23
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87588993"
---
# <a name="sql-server-databases-object"></a><span data-ttu-id="21885-102">SQL Server，Databases 对象</span><span class="sxs-lookup"><span data-stu-id="21885-102">SQL Server, Databases Object</span></span>
  <span data-ttu-id="21885-103">SQL Server 中的 **SQLServer:Databases** 对象提供了计数器，来监视大容量复制操作、备份和还原吞吐量以及事务日志活动。</span><span class="sxs-lookup"><span data-stu-id="21885-103">The **SQLServer:Databases** object in SQL Server provides counters to monitor bulk copy operations, backup and restore throughput, and transaction log activities.</span></span> <span data-ttu-id="21885-104">监视事务及事务日志确定数据库中进行的用户活动数量及事务日志的饱满程度。</span><span class="sxs-lookup"><span data-stu-id="21885-104">Monitor transactions and the transaction log to determine how much user activity is occurring in the database and how full the transaction log is becoming.</span></span> <span data-ttu-id="21885-105">用户活动数量可以确定数据库的性能并影响日志大小、锁和复制。</span><span class="sxs-lookup"><span data-stu-id="21885-105">The amount of user activity can determine the performance of the database and affect log size, locking, and replication.</span></span> <span data-ttu-id="21885-106">监视低级日志活动以测量用户活动和资源使用情况，有助于查明性能瓶颈。</span><span class="sxs-lookup"><span data-stu-id="21885-106">Monitoring low-level log activity to gauge user activity and resource usage can help you to identify performance bottlenecks.</span></span>  
  
 <span data-ttu-id="21885-107">可以同时监视 **Databases** 对象的多个实例，每个实例代表一个数据库。</span><span class="sxs-lookup"><span data-stu-id="21885-107">Multiple instances of the **Databases** object, each representing a single database, can be monitored at the same time.</span></span>  
  
 <span data-ttu-id="21885-108">下表说明了 SQL Server **Databases** 计数器。</span><span class="sxs-lookup"><span data-stu-id="21885-108">This table describes the SQL Server **Databases** counters.</span></span>  
  
|<span data-ttu-id="21885-109">SQL Server Databases 计数器</span><span class="sxs-lookup"><span data-stu-id="21885-109">SQL Server Databases counters</span></span>|<span data-ttu-id="21885-110">说明</span><span class="sxs-lookup"><span data-stu-id="21885-110">Description</span></span>|  
|-----------------------------------|-----------------|  
|<span data-ttu-id="21885-111">**Active Transactions**</span><span class="sxs-lookup"><span data-stu-id="21885-111">**Active Transactions**</span></span>|<span data-ttu-id="21885-112">数据库的活动事务数。</span><span class="sxs-lookup"><span data-stu-id="21885-112">Number of active transactions for the database.</span></span>|  
|<span data-ttu-id="21885-113">**Backup/Restore Throughput/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-113">**Backup/Restore Throughput/sec**</span></span>|<span data-ttu-id="21885-114">每秒数据库的备份和还原操作的读取/写入吞吐量。</span><span class="sxs-lookup"><span data-stu-id="21885-114">Read/write throughput for backup and restore operations of a database per second.</span></span> <span data-ttu-id="21885-115">例如，并行使用多个备份设备或使用更快的设备时，可以测量数据库备份操作性能的变化情况。</span><span class="sxs-lookup"><span data-stu-id="21885-115">For example, you can measure how the performance of the database backup operation changes when more backup devices are used in parallel or when faster devices are used.</span></span> <span data-ttu-id="21885-116">数据库的备份或还原操作的吞吐量可以确定备份和还原操作的进程和性能。</span><span class="sxs-lookup"><span data-stu-id="21885-116">Throughput of a database backup or restore operation allows you to determine the progress and performance of your backup and restore operations.</span></span>|  
|<span data-ttu-id="21885-117">**Bulk Copy Rows/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-117">**Bulk Copy Rows/sec**</span></span>|<span data-ttu-id="21885-118">每秒大容量复制的行数。</span><span class="sxs-lookup"><span data-stu-id="21885-118">Number of rows bulk copied per second.</span></span>|  
|<span data-ttu-id="21885-119">**Bulk Copy Throughput/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-119">**Bulk Copy Throughput/sec**</span></span>|<span data-ttu-id="21885-120">每秒大容量复制的数据量 (KB)。</span><span class="sxs-lookup"><span data-stu-id="21885-120">Amount of data bulk copied (in kilobytes) per second.</span></span>|  
|<span data-ttu-id="21885-121">**Commit table entries**</span><span class="sxs-lookup"><span data-stu-id="21885-121">**Commit table entries**</span></span>|<span data-ttu-id="21885-122">数据库提交表的内存中部分的大小。</span><span class="sxs-lookup"><span data-stu-id="21885-122">The size of the in-memory portion of the commit table for the database.</span></span> <span data-ttu-id="21885-123">有关详细信息，请参阅 [sys.dm_tran_commit_table (Transact-SQL)](/sql/relational-databases/system-dynamic-management-views/change-tracking-sys-dm-tran-commit-table)。</span><span class="sxs-lookup"><span data-stu-id="21885-123">For more information, see [sys.dm_tran_commit_table &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/change-tracking-sys-dm-tran-commit-table).</span></span>|  
|<span data-ttu-id="21885-124">**Data File(s) Size (KB)**</span><span class="sxs-lookup"><span data-stu-id="21885-124">**Data File(s) Size (KB)**</span></span>|<span data-ttu-id="21885-125">数据库中所有数据文件的累计大小 (KB)，包括任何自动增长。</span><span class="sxs-lookup"><span data-stu-id="21885-125">Cumulative size (in kilobytes) of all the data files in the database including any automatic growth.</span></span> <span data-ttu-id="21885-126">监视此计数器非常有用，例如可以确定 **tempdb**的准确大小。</span><span class="sxs-lookup"><span data-stu-id="21885-126">Monitoring this counter is useful, for example, for determining the correct size of **tempdb**.</span></span>|  
|<span data-ttu-id="21885-127">**DBCC Logical Scan Bytes/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-127">**DBCC Logical Scan Bytes/sec**</span></span>|<span data-ttu-id="21885-128">每秒数据库控制台命令 (DBCC) 的逻辑读取扫描字节数。</span><span class="sxs-lookup"><span data-stu-id="21885-128">Number of logical read scan bytes per second for database console commands (DBCC).</span></span>|  
|<span data-ttu-id="21885-129">**Log Cache Hit Ratio**</span><span class="sxs-lookup"><span data-stu-id="21885-129">**Log Cache Hit Ratio**</span></span>|<span data-ttu-id="21885-130">日志缓存所满足的日志缓存读取数所占的百分比。</span><span class="sxs-lookup"><span data-stu-id="21885-130">Percentage of log cache reads satisfied from the log cache.</span></span>|  
|<span data-ttu-id="21885-131">**Log Cache Reads/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-131">**Log Cache Reads/sec**</span></span>|<span data-ttu-id="21885-132">每秒通过日志管理器缓存执行的读取数。</span><span class="sxs-lookup"><span data-stu-id="21885-132">Reads performed per second through the log manager cache.</span></span>|  
|<span data-ttu-id="21885-133">**Log File(s) Size (KB)**</span><span class="sxs-lookup"><span data-stu-id="21885-133">**Log File(s) Size (KB)**</span></span>|<span data-ttu-id="21885-134">数据库中所有事务日志文件的累计大小 (KB)。</span><span class="sxs-lookup"><span data-stu-id="21885-134">Cumulative size (in kilobytes) of all the transaction log files in the database.</span></span>|  
|<span data-ttu-id="21885-135">**Log File(s) Used Size (KB)**</span><span class="sxs-lookup"><span data-stu-id="21885-135">**Log File(s) Used Size (KB)**</span></span>|<span data-ttu-id="21885-136">数据库中所有日志文件的累计已用大小。</span><span class="sxs-lookup"><span data-stu-id="21885-136">The cumulative used size of all the log files in the database.</span></span>|  
|<span data-ttu-id="21885-137">**Log Flush Wait Time**</span><span class="sxs-lookup"><span data-stu-id="21885-137">**Log Flush Wait Time**</span></span>|<span data-ttu-id="21885-138">刷新日志的总等待时间（毫秒）。</span><span class="sxs-lookup"><span data-stu-id="21885-138">Total wait time (in milliseconds) to flush the log.</span></span> <span data-ttu-id="21885-139">在 AlwaysOn 辅助数据库上，此值表示日志记录强制写入磁盘的等待时间。</span><span class="sxs-lookup"><span data-stu-id="21885-139">On an AlwaysOn secondary database, this value indicates the wait time for log records to be hardened to disk.</span></span>|  
|<span data-ttu-id="21885-140">**Log Flush Waits/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-140">**Log Flush Waits/sec**</span></span>|<span data-ttu-id="21885-141">每秒等待日志刷新的提交数目。</span><span class="sxs-lookup"><span data-stu-id="21885-141">Number of commits per second waiting for the log flush.</span></span>|  
|<span data-ttu-id="21885-142">**Log Flush Write Time (ms)**</span><span class="sxs-lookup"><span data-stu-id="21885-142">**Log Flush Write Time (ms)**</span></span>|<span data-ttu-id="21885-143">执行在最后一秒完成的写入日志刷新信息的时间（毫秒）。</span><span class="sxs-lookup"><span data-stu-id="21885-143">Time in milliseconds for performing writes of log flushes that were completed in the last second.</span></span>|  
|<span data-ttu-id="21885-144">**Log Flushes/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-144">**Log Flushes/sec**</span></span>|<span data-ttu-id="21885-145">每秒日志刷新数目。</span><span class="sxs-lookup"><span data-stu-id="21885-145">Number of log flushes per second.</span></span>|  
|<span data-ttu-id="21885-146">**Log Growths**</span><span class="sxs-lookup"><span data-stu-id="21885-146">**Log Growths**</span></span>|<span data-ttu-id="21885-147">数据库事务日志增长的总次数。</span><span class="sxs-lookup"><span data-stu-id="21885-147">Total number of times the transaction log for the database has been expanded.</span></span>|  
|<span data-ttu-id="21885-148">**Log Shrinks**</span><span class="sxs-lookup"><span data-stu-id="21885-148">**Log Shrinks**</span></span>|<span data-ttu-id="21885-149">数据库事务日志收缩的总次数。</span><span class="sxs-lookup"><span data-stu-id="21885-149">Total number of times the transaction log for the database has been shrunk.</span></span>|  
|<span data-ttu-id="21885-150">**Log Pool Cache Misses/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-150">**Log Pool Cache Misses/sec**</span></span>|<span data-ttu-id="21885-151">日志块在日志池中不可用的请求数。</span><span class="sxs-lookup"><span data-stu-id="21885-151">Number of requests for which the log block was not available in the log pool.</span></span> <span data-ttu-id="21885-152">“日志池”是事务日志的内存中缓存。</span><span class="sxs-lookup"><span data-stu-id="21885-152">The *log pool* is an in-memory cache of the transaction log.</span></span> <span data-ttu-id="21885-153">这种缓存用于优化对恢复、事务复制、回滚和 [!INCLUDE[ssHADR](../../includes/sshadr-md.md)]日志的读取操作。</span><span class="sxs-lookup"><span data-stu-id="21885-153">This cache is used to optimize reading the log for recovery, transaction replication, rollback, and [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span></span>|  
|<span data-ttu-id="21885-154">**Log Pool Disk Reads/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-154">**Log Pool Disk Reads/sec**</span></span>|<span data-ttu-id="21885-155">日志池发出的提取日志块的磁盘读取数。</span><span class="sxs-lookup"><span data-stu-id="21885-155">Number of disk reads that the log pool issued to fetch log blocks.</span></span>|  
|<span data-ttu-id="21885-156">**Log Pool Requests/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-156">**Log Pool Requests/sec**</span></span>|<span data-ttu-id="21885-157">日志池处理的日志块请求数。</span><span class="sxs-lookup"><span data-stu-id="21885-157">The number of log-block requests processed by the log pool.</span></span>|  
|<span data-ttu-id="21885-158">**Log Truncations**</span><span class="sxs-lookup"><span data-stu-id="21885-158">**Log Truncations**</span></span>|<span data-ttu-id="21885-159">已收缩事务日志的次数。</span><span class="sxs-lookup"><span data-stu-id="21885-159">The number of times the transaction log has been shrunk.</span></span>|  
|<span data-ttu-id="21885-160">**Percent Log Used**</span><span class="sxs-lookup"><span data-stu-id="21885-160">**Percent Log Used**</span></span>|<span data-ttu-id="21885-161">日志中已用空间所占的百分比。</span><span class="sxs-lookup"><span data-stu-id="21885-161">Percentage of space in the log that is in use.</span></span>|  
|<span data-ttu-id="21885-162">**Repl.Pending Xacts**</span><span class="sxs-lookup"><span data-stu-id="21885-162">**Repl. Pending Xacts**</span></span>|<span data-ttu-id="21885-163">发布数据库事务日志中已做复制标记但尚未传递到分发数据库的事务数。</span><span class="sxs-lookup"><span data-stu-id="21885-163">Number of transactions in the transaction log of the publication database marked for replication, but not yet delivered to the distribution database.</span></span>|  
|<span data-ttu-id="21885-164">**Repl.Trans.Rate**</span><span class="sxs-lookup"><span data-stu-id="21885-164">**Repl. Trans. Rate**</span></span>|<span data-ttu-id="21885-165">每秒从发布数据库事务日志中读出并传递到分发数据库的事务数。</span><span class="sxs-lookup"><span data-stu-id="21885-165">Number of transactions per second read out of the transaction log of the publication database and delivered to the distribution database.</span></span>|  
|<span data-ttu-id="21885-166">**Shrink Data Movement Bytes/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-166">**Shrink Data Movement Bytes/sec**</span></span>|<span data-ttu-id="21885-167">每秒由自动收缩操作或者 DBCC SHRINKDATABASE 或 DBCC SHRINKFILE 语句移动的数据量。</span><span class="sxs-lookup"><span data-stu-id="21885-167">Amount of data being moved per second by autoshrink operations, or DBCC SHRINKDATABASE or DBCC SHRINKFILE statements.</span></span>|  
|<span data-ttu-id="21885-168">**Tracked transactions/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-168">**Tracked transactions/sec**</span></span>|<span data-ttu-id="21885-169">数据库提交表中记录的已提交的事务数。</span><span class="sxs-lookup"><span data-stu-id="21885-169">Number of committed transactions recorded in the commit table for the database.</span></span>|  
|<span data-ttu-id="21885-170">**Transactions/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-170">**Transactions/sec**</span></span>|<span data-ttu-id="21885-171">每秒为数据库启动的事务数。</span><span class="sxs-lookup"><span data-stu-id="21885-171">Number of transactions started for the database per second.</span></span><br /><br /> <span data-ttu-id="21885-172">**Transactions/sec** 不对仅限 XTP 的事务（本机编译存储过程启动的事务）进行计数。</span><span class="sxs-lookup"><span data-stu-id="21885-172">**Transactions/sec** does not count XTP-only transactions (transactions started by a natively compiled stored procedure)..</span></span>|  
|<span data-ttu-id="21885-173">**Write Transactions/sec**</span><span class="sxs-lookup"><span data-stu-id="21885-173">**Write Transactions/sec**</span></span>|<span data-ttu-id="21885-174">在上一秒钟内写入数据库并提交的事务数。</span><span class="sxs-lookup"><span data-stu-id="21885-174">Number of transactions that wrote to the database and committed, in the last second.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="21885-175">另请参阅</span><span class="sxs-lookup"><span data-stu-id="21885-175">See Also</span></span>  
 <span data-ttu-id="21885-176">[监视资源使用情况（系统监视器）](monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="21885-176">[Monitor Resource Usage &#40;System Monitor&#41;](monitor-resource-usage-system-monitor.md) </span></span>  
 [<span data-ttu-id="21885-177">SQL Server - 数据库副本</span><span class="sxs-lookup"><span data-stu-id="21885-177">SQL Server, Database Replica</span></span>](sql-server-database-replica.md)  
  
  
