---
title: 查看和使用数据库引擎优化顾问的输出 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
f1_keywords:
- sql12.dta.reports.f1
- sql12.dta.sessionmonitor.f1
- sql12.dta.recommendations.f1
- sql12.dta.applyrecommendations.f1
helpviewer_keywords:
- viewing logs
- recommendations [Database Engine Tuning Advisor]
- summary tuning information [SQL Server]
- Database Engine Tuning Advisor [SQL Server], recommendations
- Database Engine Tuning Advisor [SQL Server], logs
- Database Engine Tuning Advisor [SQL Server], viewing output
- Database Engine Tuning Advisor [SQL Server], reports
- logs [SQL Server], tuning
- reports [SQL Server], tuning
- viewing tuning output
ms.assetid: 47f9d9a7-80b0-416d-9d9a-9e265bc190dc
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 1b5ecf27d01f8492bdc4df55d0762daa3ec41e40
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87689350"
---
# <a name="view-and-work-with-the-output-from-the-database-engine-tuning-advisor"></a><span data-ttu-id="35173-102">查看和使用数据库引擎优化顾问的输出</span><span class="sxs-lookup"><span data-stu-id="35173-102">View and Work with the Output from the Database Engine Tuning Advisor</span></span>
  <span data-ttu-id="35173-103">数据库引擎优化顾问在优化数据库时，会创建摘要、建议、报告和优化日志。</span><span class="sxs-lookup"><span data-stu-id="35173-103">When the Database Engine Tuning Advisor tunes databases, it creates summaries, recommendations, reports, and tuning logs.</span></span> <span data-ttu-id="35173-104">可以使用优化日志输出来对数据库引擎优化顾问优化会话进行故障排除。</span><span class="sxs-lookup"><span data-stu-id="35173-104">You can use the tuning log output to troubleshoot Database Engine Tuning Advisor tuning sessions.</span></span> <span data-ttu-id="35173-105">可以使用摘要、建议和报告来确定是要实施优化建议，还是继续优化直到查询性能可提高到安装 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 所需的程度为止。</span><span class="sxs-lookup"><span data-stu-id="35173-105">You can use the summaries, recommendations, and reports to determine whether you want to implement tuning recommendations or continue tuning until you achieve the query performance improvements that you need for your [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span> <span data-ttu-id="35173-106">有关如何使用数据库优化引擎来创建工作负荷和优化数据库的信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-106">For information about how to use the Database Tuning Advisor to create workloads and tune a database, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
##  <a name="view-tuning-output"></a><a name="View"></a> <span data-ttu-id="35173-107">查看优化输出</span><span class="sxs-lookup"><span data-stu-id="35173-107">View Tuning Output</span></span>  
 <span data-ttu-id="35173-108">下列过程描述了如何使用数据库引擎优化顾问 GUI 来查看优化建议、摘要、报告和优化日志。</span><span class="sxs-lookup"><span data-stu-id="35173-108">The following procedures describe how to view tuning recommendations, summaries, reports, and tuning logs by using the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-109">有关用户界面选项的信息，请参阅本主题后面的 [用户界面说明](#UI) 。</span><span class="sxs-lookup"><span data-stu-id="35173-109">For information about user interface options, see [User Interface Descriptions](#UI) later in this topic.</span></span>  
  
 <span data-ttu-id="35173-110">还可以使用 GUI 查看由 **dta** 命令行实用工具生成的优化输出。</span><span class="sxs-lookup"><span data-stu-id="35173-110">You can also use the GUI to view tuning output that is generated by the **dta** command-line utility.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="35173-111">如果使用 **dta** 命令行实用工具并使用 **-ox** 参数来指定将输出写入 XML 文件，则可以通过单击 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 的“文件”  菜单上的“打开文件”  ，打开和查看 XML 输出文件。</span><span class="sxs-lookup"><span data-stu-id="35173-111">If you use the **dta** command-line utility and specify that output be written to an XML file by using the **-ox** argument, you can open and view the XML output file by clicking **Open File** on the **File** menu of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="35173-112">有关详细信息，请参阅 [Use SQL Server Management Studio](../../database-engine/use-sql-server-management-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-112">For more information, see [Use SQL Server Management Studio](../../database-engine/use-sql-server-management-studio.md).</span></span> <span data-ttu-id="35173-113">有关 **dta** 命令行实用工具的详细信息，请参阅 [dta 实用工具](../../tools/dta/dta-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-113">For information about the **dta** command-line utility, see [dta Utility](../../tools/dta/dta-utility.md).</span></span>  
  
#### <a name="to-view-tuning-recommendations-with-the-database-engine-tuning-advisor-gui"></a><span data-ttu-id="35173-114">使用数据库引擎优化顾问 GUI 查看优化建议</span><span class="sxs-lookup"><span data-stu-id="35173-114">To view tuning recommendations with the Database Engine Tuning Advisor GUI</span></span>  
  
1.  <span data-ttu-id="35173-115">使用数据库引擎优化顾问 GUI 或 **dta** 命令行实用工具优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-115">Tune a database using the Database Engine Tuning Advisor GUI or the **dta** command-line utility.</span></span> <span data-ttu-id="35173-116">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-116">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-117">如果希望使用现有优化会话，请跳过此步骤，转到步骤 2。</span><span class="sxs-lookup"><span data-stu-id="35173-117">If you want to use an existing tuning session, skip this step and proceed to Step 2.</span></span>  
  
2.  <span data-ttu-id="35173-118">启动数据库引擎优化顾问 GUI。</span><span class="sxs-lookup"><span data-stu-id="35173-118">Start the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-119">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-119">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-120">若要查看现有优化会话的优化建议，请双击“会话监视器”  窗口中的会话名称将会话打开。</span><span class="sxs-lookup"><span data-stu-id="35173-120">If you want to view tuning recommendations for an existing tuning session, open it by double-clicking the session name in the **Session Monitor window.**</span></span>  
  
     <span data-ttu-id="35173-121">在新的优化会话完成之后或工具加载了现有会话之后，将显示 **“建议”** 页。</span><span class="sxs-lookup"><span data-stu-id="35173-121">After the new tuning session has finished, or after the tool has loaded the existing session, the **Recommendations** page is displayed.</span></span>  
  
3.  <span data-ttu-id="35173-122">在 **“建议”** 页上，单击 **“分区建议”** 和 **“索引建议”** 以查看显示优化会话结果的窗格。</span><span class="sxs-lookup"><span data-stu-id="35173-122">On the **Recommendations** page, click **Partition Recommendations** and **Index Recommendations** to view panes that display the tuning session results.</span></span> <span data-ttu-id="35173-123">如果在设置此会话的优化选项时未指定分区，则 **“分区建议”** 窗格为空。</span><span class="sxs-lookup"><span data-stu-id="35173-123">If you did not specify partitioning when you set the tuning options for this session, the **Partition Recommendations** pane is empty.</span></span>  
  
4.  <span data-ttu-id="35173-124">在 **“分区建议”** 或 **“索引建议”** 窗格中，使用滚动条来查看网格中显示的所有信息。</span><span class="sxs-lookup"><span data-stu-id="35173-124">In either the **Partition Recommendations** or the **Index Recommendations** pane, use the scroll bars to view all the information displayed in the grid.</span></span>  
  
5.  <span data-ttu-id="35173-125">取消选中 **“建议”** 选项卡式页面底部的 **“显示现有对象”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-125">Uncheck **Show existing objects** at the bottom of the **Recommendations** tabbed page.</span></span> <span data-ttu-id="35173-126">这将导致网格仅显示建议中引用的那些数据库对象。</span><span class="sxs-lookup"><span data-stu-id="35173-126">This causes the grid to display only those database objects that are referenced in the recommendation.</span></span> <span data-ttu-id="35173-127">使用底部滚动条来查看建议网格中最右侧的列，再单击“定义”  列中的某一项来查看或复制在数据库中创建该对象的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 脚本。</span><span class="sxs-lookup"><span data-stu-id="35173-127">Use the bottom scroll bar to view the right-most column in the recommendations grid, and click an item in the **Definition** column to view or copy the [!INCLUDE[tsql](../../includes/tsql-md.md)] script that creates that object in your database.</span></span>  
  
6.  <span data-ttu-id="35173-128">若要将此建议中创建或删除所有数据库对象的所有 [!INCLUDE[tsql](../../includes/tsql-md.md)] 脚本另存为一个脚本文件，请单击 **“操作”** 菜单上的 **“保存建议”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-128">If you want to save all of the [!INCLUDE[tsql](../../includes/tsql-md.md)] scripts that create or drop all database objects in this recommendation into one script file, click **Save Recommendations** on the **Actions** menu.</span></span>  
  
#### <a name="to-view-the-tuning-summary-and-reports-with-the-database-engine-tuning-advisor-gui"></a><span data-ttu-id="35173-129">使用数据库引擎优化顾问 GUI 查看优化摘要和报告</span><span class="sxs-lookup"><span data-stu-id="35173-129">To view the tuning summary and reports with the Database Engine Tuning Advisor GUI</span></span>  
  
1.  <span data-ttu-id="35173-130">使用数据库引擎优化顾问 GUI 或 **dta** 命令行实用工具优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-130">Tune a database using the Database Engine Tuning Advisor GUI or the **dta** command-line utility.</span></span> <span data-ttu-id="35173-131">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-131">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-132">如果希望使用现有优化会话，请跳过此步骤，转到步骤 2。</span><span class="sxs-lookup"><span data-stu-id="35173-132">If you want to use an existing tuning session, skip this step and proceed to step 2.</span></span>  
  
2.  <span data-ttu-id="35173-133">启动数据库引擎优化顾问 GUI。</span><span class="sxs-lookup"><span data-stu-id="35173-133">Start the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-134">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-134">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-135">若要查看现有优化会话的优化摘要和报告，可以双击“会话监视器”  窗口中的会话名称将会话打开。</span><span class="sxs-lookup"><span data-stu-id="35173-135">If you want to view tuning summaries and reports for an existing tuning session, open it by double-clicking the session name in the **Session Monitor.**</span></span>  
  
3.  <span data-ttu-id="35173-136">在新的优化会话完成之后或者工具加载了现有会话之后，单击 **“报告”** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="35173-136">After the new tuning session has finished, or after the tool has loaded the existing session, click the **Reports** tab.</span></span>  
  
4.  <span data-ttu-id="35173-137">**“优化摘要”** 窗格包含有关优化会话的信息。</span><span class="sxs-lookup"><span data-stu-id="35173-137">The **Tuning Summary** pane contains information about the tuning session.</span></span> <span data-ttu-id="35173-138">由 **“预期的提高百分比”** 和 **“建议使用的空间”** 项提供的信息对决定是否要实施建议特别有用。</span><span class="sxs-lookup"><span data-stu-id="35173-138">The information provided by the **Expected percentage improvement** and the **Space used by recommendation** items can be especially useful to decide whether you want to implement the recommendation.</span></span>  
  
5.  <span data-ttu-id="35173-139">在 **“优化报告”** 窗格中，单击 **“选择报告”** 来选择要查看的优化报告。</span><span class="sxs-lookup"><span data-stu-id="35173-139">In the **Tuning Reports** pane, click **Select report** to choose a tuning report to view.</span></span>  
  
#### <a name="to-view-tuning-logs-with-the-database-engine-tuning-advisor-gui"></a><span data-ttu-id="35173-140">用数据库引擎优化顾问 GUI 查看优化日志</span><span class="sxs-lookup"><span data-stu-id="35173-140">To view tuning logs with the Database Engine Tuning Advisor GUI</span></span>  
  
1.  <span data-ttu-id="35173-141">使用数据库引擎优化顾问 GUI 或 **dta** 命令行实用工具优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-141">Tune a database using the Database Engine Tuning Advisor GUI or the **dta** command-line utility.</span></span> <span data-ttu-id="35173-142">请确保在优化工作负荷时选中 **“常规”** 选项卡上的 **“保存优化日志”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-142">Make sure that you check **Save tuning log** on the **General** tab when you tune the workload.</span></span> <span data-ttu-id="35173-143">如果希望使用现有优化会话，请跳过此步骤，转到步骤 2。</span><span class="sxs-lookup"><span data-stu-id="35173-143">If you want to use an existing tuning session, skip this step and proceed to Step 2.</span></span>  
  
2.  <span data-ttu-id="35173-144">启动数据库引擎优化顾问 GUI。</span><span class="sxs-lookup"><span data-stu-id="35173-144">Start the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-145">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-145">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-146">若要查看现有优化会话的优化摘要和报告，可以双击“会话监视器”  窗口中的会话名称将会话打开。</span><span class="sxs-lookup"><span data-stu-id="35173-146">If you want to view tuning summaries and reports for an existing tuning session, open it by double-clicking the session name in the **Session Monitor** window.</span></span>  
  
3.  <span data-ttu-id="35173-147">在新的优化会话完成之后或者工具加载了现有会话之后，单击 **“进度”** 选项卡。 **“优化日志”** 窗格将显示日志的内容。</span><span class="sxs-lookup"><span data-stu-id="35173-147">After the new tuning session has finished, or after the tool has loaded the existing session, click the **Progress** tab. The **Tuning Log** pane displays the contents of the log.</span></span> <span data-ttu-id="35173-148">日志包含有关数据库引擎优化顾问无法分析的工作负荷事件的信息。</span><span class="sxs-lookup"><span data-stu-id="35173-148">The log contains information about workload events that Database Engine Tuning Advisor was unable to analyze.</span></span>  
  
     <span data-ttu-id="35173-149">如果优化会话中的所有事件均被数据库引擎优化顾问分析，将显示消息指示此会话的优化日志为空。</span><span class="sxs-lookup"><span data-stu-id="35173-149">If all events in the tuning session were analyzed by Database Engine Tuning Advisor a message indicating that the tuning log is empty for the session displays.</span></span> <span data-ttu-id="35173-150">如果在最初运行优化会话时未选中 **“常规”** 选项卡上的 **“保存优化日志”** ，将显示一条消息来指出这一点。</span><span class="sxs-lookup"><span data-stu-id="35173-150">If **Save tuning log** was not checked on the **General** tab when the tuning session was originally run, a message displays indicating that.</span></span>  
  
##  <a name="implement-tuning-recommendations"></a><a name="Implement"></a> <span data-ttu-id="35173-151">实施优化建议</span><span class="sxs-lookup"><span data-stu-id="35173-151">Implement Tuning Recommendations</span></span>  
 <span data-ttu-id="35173-152">可以手动实施数据库引擎优化顾问的建议，也可以在优化会话中自动实施。</span><span class="sxs-lookup"><span data-stu-id="35173-152">You can implement the Database Engine Tuning Advisor recommendations manually or automatically as part of the tuning session.</span></span> <span data-ttu-id="35173-153">如果需要在实施建议之前检查优化结果，请使用数据库引擎优化顾问 GUI。</span><span class="sxs-lookup"><span data-stu-id="35173-153">If you want to examine the tuning results first before implementing them, use the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-154">然后，您可以使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 手动运行数据库引擎优化顾问在分析完工作负荷之后生成的 [!INCLUDE[tsql](../../includes/tsql-md.md)] 脚本，以便实施建议。</span><span class="sxs-lookup"><span data-stu-id="35173-154">You can then use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to manually run the [!INCLUDE[tsql](../../includes/tsql-md.md)] scripts that Database Engine Tuning Advisor generates as a result of analyzing a workload to implement the recommendations.</span></span> <span data-ttu-id="35173-155">如果不需要在实施建议之前检查结果，则可以将 **-a** 选项与 **dta** 命令提示符实用工具结合使用。</span><span class="sxs-lookup"><span data-stu-id="35173-155">If you do not need to examine the results before implementing them, you can use the **-a** option with the **dta** command prompt utility.</span></span> <span data-ttu-id="35173-156">这可以使实用工具在分析完工作负荷之后自动实施优化建议。</span><span class="sxs-lookup"><span data-stu-id="35173-156">This causes the utility to automatically implement the tuning recommendations after it analyzes your workload.</span></span> <span data-ttu-id="35173-157">下列过程介绍了如何使用这两个数据库引擎优化顾问界面来实施优化建议。</span><span class="sxs-lookup"><span data-stu-id="35173-157">The following procedures explain how to use both Database Engine Tuning Advisor interfaces to implement tuning recommendations.</span></span>  
  
#### <a name="to-manually-implement-tuning-recommendations-with-the-database-engine-tuning-advisor-gui"></a><span data-ttu-id="35173-158">使用数据库引擎优化顾问 GUI 来手动实施优化建议</span><span class="sxs-lookup"><span data-stu-id="35173-158">To manually implement tuning recommendations with the Database Engine Tuning Advisor GUI</span></span>  
  
1.  <span data-ttu-id="35173-159">使用数据库引擎优化顾问 GUI 或 **dta** 命令提示符实用工具来优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-159">Tune a database using the Database Engine Tuning Advisor GUI or the **dta** command prompt utility.</span></span> <span data-ttu-id="35173-160">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-160">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-161">如果希望使用现有优化会话，请跳过此步骤，转到步骤 2。</span><span class="sxs-lookup"><span data-stu-id="35173-161">If you want to use an existing tuning session, skip this step and proceed to Step 2.</span></span>  
  
2.  <span data-ttu-id="35173-162">启动数据库引擎优化顾问 GUI。</span><span class="sxs-lookup"><span data-stu-id="35173-162">Start the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-163">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-163">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-164">若要在现有的优化会话中实施优化建议，请在“会话监视器”  中双击会话名称将会话打开。</span><span class="sxs-lookup"><span data-stu-id="35173-164">If you want to implement tuning recommendations for an existing tuning session, open it by double-clicking the session name in **Session Monitor**.</span></span>  
  
3.  <span data-ttu-id="35173-165">在新的优化会话完成之后，或者在工具加载了现有会话之后，在 **“操作”** 菜单上，单击 **“应用建议”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-165">After the new tuning session has finished, or after the tool has loaded the existing session, click **Apply Recommendations** on the **Actions** menu.</span></span>  
  
4.  <span data-ttu-id="35173-166">在 **“应用建议”** 对话框中，选择 **“立即应用”** 或 **“安排以后执行”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-166">In the **Apply Recommendations** dialog box choose from **Apply now** or **Schedule for later**.</span></span> <span data-ttu-id="35173-167">如果选择 **“安排以后执行”** ，请选择相应的日期和时间。</span><span class="sxs-lookup"><span data-stu-id="35173-167">If you choose **Schedule for later**, select the appropriate date and time.</span></span>  
  
5.  <span data-ttu-id="35173-168">单击 **“确定”** 应用建议。</span><span class="sxs-lookup"><span data-stu-id="35173-168">Click **OK** to apply the recommendations.</span></span>  
  
#### <a name="to-automatically-implement-tuning-recommendations-using-the-dta-command-prompt-utility"></a><span data-ttu-id="35173-169">使用 dta 命令提示实用工具来自动实施优化建议</span><span class="sxs-lookup"><span data-stu-id="35173-169">To automatically implement tuning recommendations using the dta command prompt utility</span></span>  
  
1.  <span data-ttu-id="35173-170">确定您希望数据库引擎优化顾问在分析过程中考虑添加、删除或保留的数据库功能（索引、索引视图、分区）。</span><span class="sxs-lookup"><span data-stu-id="35173-170">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
     <span data-ttu-id="35173-171">在开始优化之前，请注意下列事项：</span><span class="sxs-lookup"><span data-stu-id="35173-171">Keep the following considerations in mind before you begin tuning:</span></span>  
  
    -   <span data-ttu-id="35173-172">使用跟踪表作为工作负荷时，该表必须位于数据库引擎优化顾问正在优化的那台服务器上。</span><span class="sxs-lookup"><span data-stu-id="35173-172">When using a trace table as a workload, that table must exist on the same server where Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="35173-173">如果所创建的跟踪表位于其他服务器上，请将它移到数据库引擎优化顾问正在优化的服务器上。</span><span class="sxs-lookup"><span data-stu-id="35173-173">If you create the trace table on a different server, move it to the server where Database Engine Tuning Advisor is tuning.</span></span>  
  
    -   <span data-ttu-id="35173-174">如果优化会话运行的时间超出了预期的运行时间，可以按 CTRL+C 来结束优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-174">If a tuning session continues running longer than you had anticipated it would run, you can press CTRL+C to end the tuning session.</span></span> <span data-ttu-id="35173-175">在这种情况下，按 CTRL+C 会强行使 **dta** 根据它所处理的工作负荷生成尽可能好的建议，而不会浪费该工具在优化工作负荷上已经使用的时间。</span><span class="sxs-lookup"><span data-stu-id="35173-175">Pressing CTRL+C under these circumstances forces **dta** to produce the best recommendation possible based on how much of the workload it has consumed, and does not waste the time that the tool has already used to tune the workload.</span></span>  
  
2.  <span data-ttu-id="35173-176">在命令提示符下，输入以下内容：</span><span class="sxs-lookup"><span data-stu-id="35173-176">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -D DatabaseName -if WorkloadFile -s SessionName -a  
    ```  
  
     <span data-ttu-id="35173-177">其中 **-E** 指定优化会话使用可信连接（而不是登录 ID 和密码）， **-D** 指定要优化的数据库的名称或工作负荷所使用的多个数据库的逗号分隔列表， **-if** 指定工作负荷文件的名称和路径， **-s** 指定优化会话的名称， **-a** 指定让 **dta** 命令提示符实用工具在分析完工作负荷之后自动应用优化建议，而不显示提示。</span><span class="sxs-lookup"><span data-stu-id="35173-177">where **-E** specifies that your tuning session uses a trusted connection (instead of a login ID and password), **-D** specifies the name of the database you want to tune or a comma-delimited list of multiple databases that the workload uses, **-if** specifies the name and path to a workload file, **-s** specifies a name for your tuning session, and **-a** specifies that you want the **dta** command prompt utility to automatically apply the tuning recommendations after the workload is analyzed without prompting you.</span></span> <span data-ttu-id="35173-178">有关使用 **dta** 命令提示符实用工具来优化数据库的详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-178">For more information about using the **dta** command prompt utility to tune databases, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
3.  <span data-ttu-id="35173-179">按 Enter。</span><span class="sxs-lookup"><span data-stu-id="35173-179">Press ENTER.</span></span>  
  
##  <a name="perform-exploratory-analysis"></a><a name="Analysis"></a> <span data-ttu-id="35173-180">执行探索性分析</span><span class="sxs-lookup"><span data-stu-id="35173-180">Perform Exploratory Analysis</span></span>  
 <span data-ttu-id="35173-181">数据库管理员可以通过用户指定的数据库引擎优化顾问配置功能执行探索性分析。</span><span class="sxs-lookup"><span data-stu-id="35173-181">The user-specified configuration feature of Database Engine Tuning Advisor enables database administrators to perform exploratory analysis.</span></span> <span data-ttu-id="35173-182">使用此功能，数据库管理员将所需物理数据库设计指定给数据库引擎优化顾问，然后就可以评估该设计的性能效果，而无需实施该设计。</span><span class="sxs-lookup"><span data-stu-id="35173-182">Using this feature, database administrators specify a desired physical database design to Database Engine Tuning Advisor, and then they can evaluate the performance effects of that design without implementing it.</span></span> <span data-ttu-id="35173-183">数据库引擎优化顾问图形用户界面 (GUI) 和命令行实用工具都支持用户指定的配置。</span><span class="sxs-lookup"><span data-stu-id="35173-183">User-specified configuration is supported by both the Database Engine Tuning Advisor graphical user interface (GUI) and the command-line utility.</span></span> <span data-ttu-id="35173-184">但是，命令行实用工具提供的灵活性最大。</span><span class="sxs-lookup"><span data-stu-id="35173-184">However, the command-line utility provides the greatest flexibility.</span></span>  
  
 <span data-ttu-id="35173-185">如果您使用的是数据库引擎优化顾问 GUI，则可以评估实施部分数据库引擎优化顾问优化建议的效果，但无法向数据库引擎优化顾问添加假设物理设计结构来进行评估。</span><span class="sxs-lookup"><span data-stu-id="35173-185">If you use the Database Engine Tuning Advisor GUI, you can evaluate the effects of implementing a subset of a Database Engine Tuning Advisor tuning recommendation, but you cannot add hypothetical physical design structures for Database Engine Tuning Advisor to evaluate.</span></span>  
  
 <span data-ttu-id="35173-186">以下过程说明如何在两个工具界面上使用用户指定的配置功能。</span><span class="sxs-lookup"><span data-stu-id="35173-186">The following procedures explain how to use the user-specified configuration feature with both tool interfaces.</span></span>  
  
### <a name="using-database-engine-tuning-advisor-gui-to-evaluate-tuning-recommendations"></a><span data-ttu-id="35173-187">使用数据库引擎优化顾问 GUI 评估优化建议</span><span class="sxs-lookup"><span data-stu-id="35173-187">Using Database Engine Tuning Advisor GUI to Evaluate Tuning Recommendations</span></span>  
 <span data-ttu-id="35173-188">以下过程说明如何评估数据库引擎优化顾问生成的建议，但是无法通过 GUI 指定新的物理设计结构以进行评估。</span><span class="sxs-lookup"><span data-stu-id="35173-188">The following procedure describes how to evaluate a recommendation that is generated by Database Engine Tuning Advisor, but the GUI does not enable you to specify new physical design structures for evaluation.</span></span>  
  
##### <a name="to-evaluate-tuning-recommendations-with-the-database-engine-tuning-advisor-gui"></a><span data-ttu-id="35173-189">使用数据库引擎优化顾问 GUI 评估优化建议</span><span class="sxs-lookup"><span data-stu-id="35173-189">To evaluate tuning recommendations with the Database Engine Tuning Advisor GUI</span></span>  
  
1.  <span data-ttu-id="35173-190">使用数据库引擎优化顾问 GUI 优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-190">Use the Database Engine Tuning Advisor GUI to tune a database.</span></span> <span data-ttu-id="35173-191">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-191">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-192">若要评估现有优化会话，请在“会话监视器”  中双击该会话。</span><span class="sxs-lookup"><span data-stu-id="35173-192">If you want to evaluate an existing tuning session, double-click it in **Session Monitor**.</span></span>  
  
2.  <span data-ttu-id="35173-193">在 **“建议”** 选项卡上，清除那些已列出但您不想使用的物理设计结构。</span><span class="sxs-lookup"><span data-stu-id="35173-193">On the **Recommendations** tab, clear the recommended physical design structures that you do not want to use.</span></span>  
  
3.  <span data-ttu-id="35173-194">在 **“操作”** 菜单上，单击 **“评估建议”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-194">On the **Actions** menu, click **Evaluate Recommendations**.</span></span> <span data-ttu-id="35173-195">将为您创建一个新的优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-195">A new tuning session is created for you.</span></span>  
  
4.  <span data-ttu-id="35173-196">键入新的 **“会话名称”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-196">Type the new **Session name**.</span></span> <span data-ttu-id="35173-197">若要查看正在评估的物理数据库设计结构配置，请选择数据库引擎优化顾问应用程序窗口底部的 **“说明”** 区域中的 **“单击此处可查看配置部分”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-197">To view the physical database design structure configuration that you are evaluating, choose **Click here to see the configuration section,** in the **Description** area at the bottom of the Database Engine Tuning Advisor application window.</span></span>  
  
5.  <span data-ttu-id="35173-198">在工具栏中，单击 **“开始分析”** 按钮。</span><span class="sxs-lookup"><span data-stu-id="35173-198">Click the **Start Analysis** button on the toolbar.</span></span> <span data-ttu-id="35173-199">数据库引擎优化顾问完成后，您可以在 **“建议”** 选项卡上查看结果。</span><span class="sxs-lookup"><span data-stu-id="35173-199">When Database Engine Tuning Advisor is finished, you can view the results on the **Recommendations** tab.</span></span>  
  
### <a name="using-database-engine-tuning-advisor-gui-to-export-tuning-session-results-for-what-if-tuning-analysis"></a><span data-ttu-id="35173-200">使用数据库引擎优化顾问 GUI 导出假设优化分析的优化会话结果</span><span class="sxs-lookup"><span data-stu-id="35173-200">Using Database Engine Tuning Advisor GUI to Export Tuning Session Results for "What-if" Tuning Analysis</span></span>  
 <span data-ttu-id="35173-201">以下过程说明如何将数据库引擎优化顾问优化会话结果导出到 XML 文件，然后就可以使用 **dta** 命令行实用工具编辑并优化该文件。</span><span class="sxs-lookup"><span data-stu-id="35173-201">The following procedure describes how to export Database Engine Tuning Advisor tuning session results to an XML file, which you can edit, and then tune it with the **dta** command-line utility.</span></span> <span data-ttu-id="35173-202">这使您可以在确定新的假设物理设计结构是否能够实现所需性能改善之前，对这些结构执行优化分析，而不会在数据库中实施这些结构时生成开销。</span><span class="sxs-lookup"><span data-stu-id="35173-202">This enables you to perform tuning analysis on hypothetical new physical design structures without incurring the overhead of implementing them in your database before you find out whether they produce the performance improvements that you need.</span></span> <span data-ttu-id="35173-203">使用数据库引擎优化顾问 GUI 先优化数据库，然后将优化结果导出到 **.xml** 文件，对于使用灵活的数据库引擎优化顾问 XML 架构执行模拟分析的 XML 新用户而言是一种很好的方法。</span><span class="sxs-lookup"><span data-stu-id="35173-203">Using the Database Engine Tuning Advisor GUI to initially tune your database and then exporting the tuning results to an **.xml** file is a good way for users who are new to XML to use the flexibility of the Database Engine Tuning Advisor XML schema to perform "what-if" analysis.</span></span>  
  
##### <a name="to-export-tuning-session-results-from-the-database-engine-tuning-advisor-gui-for-what-if-analysis-with-the-dta-command-line-utility"></a><span data-ttu-id="35173-204">使用 dta 命令行实用工具从数据库引擎优化顾问 GUI 导出假设分析的优化会话结果</span><span class="sxs-lookup"><span data-stu-id="35173-204">To export tuning session results from the Database Engine Tuning Advisor GUI for "what-if" analysis with the dta command-line utility</span></span>  
  
1.  <span data-ttu-id="35173-205">使用数据库引擎优化顾问 GUI 优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-205">Use the Database Engine Tuning Advisor GUI to tune a database.</span></span> <span data-ttu-id="35173-206">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-206">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="35173-207">若要评估现有优化会话，请在“会话监视器”  中双击该会话。</span><span class="sxs-lookup"><span data-stu-id="35173-207">If you want to evaluate an existing tuning session, double-click it in the **Session Monitor**.</span></span>  
  
2.  <span data-ttu-id="35173-208">在 **“文件”** 菜单上，单击 **“导出会话结果”** ，然后将其保存为 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="35173-208">On the **File** menu, click **Export Session Results** and save it as an XML file.</span></span>  
  
3.  <span data-ttu-id="35173-209">在您最喜爱的 XML 编辑器、文本编辑器或 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]中打开在步骤 2 中创建的 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="35173-209">Open the XML file created in Step 2 in your favorite XML editor, text editor, or in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="35173-210">向下滚动到 `Configuration` 元素。</span><span class="sxs-lookup"><span data-stu-id="35173-210">Scroll down to the `Configuration` element.</span></span> <span data-ttu-id="35173-211">复制 `Configuration` 元素部分并将其粘贴到 XML 输入文件模板中的 `TuningOptions` 元素之后。</span><span class="sxs-lookup"><span data-stu-id="35173-211">Copy and paste the `Configuration` element section into an XML input file template after the `TuningOptions` element.</span></span> <span data-ttu-id="35173-212">保存此 XML 输入文件。</span><span class="sxs-lookup"><span data-stu-id="35173-212">Save this XML input file.</span></span>  
  
4.  <span data-ttu-id="35173-213">在步骤 3 中创建的新 XML 输入文件中，指定 `TuningOptions` 元素中所需的任何优化选项，编辑 `Configuration` 元素部分（根据分析需要，添加或删除物理设计结构），保存文件并根据数据库引擎优化顾问 XML 架构验证该文件。</span><span class="sxs-lookup"><span data-stu-id="35173-213">In the new XML input file that you created in Step 3, specify any tuning options you want in the `TuningOptions` element, edit the `Configuration` element section (add or delete the physical design structures as appropriate for your analysis), save the file, and validate it against the Database Engine Tuning Advisor XML schema.</span></span> <span data-ttu-id="35173-214">有关编辑此 XML 文件的详细信息，请参阅 [XML 输入文件引用（数据库引擎优化顾问）](../../tools/dta/xml-input-file-reference-database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-214">For information about editing this XML file, see [XML Input File Reference &#40;Database Engine Tuning Advisor&#41;](../../tools/dta/xml-input-file-reference-database-engine-tuning-advisor.md).</span></span>  
  
5.  <span data-ttu-id="35173-215">将在步骤 4 中创建的 XML 文件用作 **dta** 命令行实用工具的输入。</span><span class="sxs-lookup"><span data-stu-id="35173-215">Use the XML file that you created in Step 4 as input to the **dta** command line utility.</span></span> <span data-ttu-id="35173-216">有关通过此工具使用 XML 输入文件的信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)中的“使用 dta 实用工具优化数据库”部分。</span><span class="sxs-lookup"><span data-stu-id="35173-216">For information about using XML input files with this tool, see the section "Tune a Database by Using the dta Utility" in [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
### <a name="using-the-user-specified-configuration-feature-with-the-dta-command-line-utility"></a><span data-ttu-id="35173-217">通过 dta 命令行实用工具使用用户指定的配置功能</span><span class="sxs-lookup"><span data-stu-id="35173-217">Using the User-specified Configuration Feature with the dta Command Line Utility</span></span>  
 <span data-ttu-id="35173-218">如果您是一个经验丰富的 XML 开发人员，您可以创建一个用于指定物理数据库设计结构的工作负荷和假设配置（例如索引、索引视图或分区）的数据库引擎优化顾问 XML 输入文件。</span><span class="sxs-lookup"><span data-stu-id="35173-218">If you are an experienced XML developer, you can create a Database Engine Tuning Advisor XML input file in which you can specify a workload and a hypothetical configuration of physical database design structures, such as indexes, indexed views, or partitioning.</span></span> <span data-ttu-id="35173-219">然后，你可以使用 **dta** 命令行实用工具来分析此假设配置对你的数据库查询性能的影响。</span><span class="sxs-lookup"><span data-stu-id="35173-219">Then you can use the **dta** command-line utility to analyze the effects this hypothetical configuration has on query performance for your database.</span></span> <span data-ttu-id="35173-220">以下分步解释这个过程：</span><span class="sxs-lookup"><span data-stu-id="35173-220">The following procedure explains this process step by step:</span></span>  
  
##### <a name="to-use-the-user-specified-configuration-feature-with-the-dta-command-line-utility"></a><span data-ttu-id="35173-221">通过 dta 命令行实用工具使用用户指定的配置功能</span><span class="sxs-lookup"><span data-stu-id="35173-221">To use the user-specified configuration feature with the dta command line utility</span></span>  
  
1.  <span data-ttu-id="35173-222">创建优化工作负荷。</span><span class="sxs-lookup"><span data-stu-id="35173-222">Create a tuning workload.</span></span> <span data-ttu-id="35173-223">有关执行此任务的信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-223">For information about performing this task, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
2.  <span data-ttu-id="35173-224">将 [XML 输入文件示例用户指定配置 (DTA)](../../tools/dta/xml-input-file-sample-with-user-specified-configuration-dta.md) 复制并粘贴到你的 XML 编辑器或文本编辑器。</span><span class="sxs-lookup"><span data-stu-id="35173-224">Copy and paste the [XML Input File Sample with User-specified Configuration &#40;DTA&#41;](../../tools/dta/xml-input-file-sample-with-user-specified-configuration-dta.md) into your XML editor or a text editor.</span></span> <span data-ttu-id="35173-225">使用此示例为您的优化会话创建 XML 输入文件。</span><span class="sxs-lookup"><span data-stu-id="35173-225">Use this sample to create an XML input file for your tuning session.</span></span> <span data-ttu-id="35173-226">有关执行此任务的信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)中的“创建 XML 输入文件”部分。</span><span class="sxs-lookup"><span data-stu-id="35173-226">For information about performing this task, see the section "Create XML Input Files" in [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
3.  <span data-ttu-id="35173-227">编辑示例 XML 输入文件中的 `TuningOptions` 和 `Configuration` 元素。</span><span class="sxs-lookup"><span data-stu-id="35173-227">Edit the `TuningOptions` and the `Configuration` elements in the sample XML input file.</span></span> <span data-ttu-id="35173-228">在 `TuningOptions` 元素中，指定希望数据库引擎优化顾问在优化会话期间考虑的物理设计结构。</span><span class="sxs-lookup"><span data-stu-id="35173-228">In the `TuningOptions` element, specify what physical design structures you want Database Engine Tuning Advisor to consider during the tuning session.</span></span> <span data-ttu-id="35173-229">在 `Configuration` 元素中，指定与希望数据库引擎优化顾问分析的物理数据库设计结构的假设配置相匹配的物理设计结构。</span><span class="sxs-lookup"><span data-stu-id="35173-229">In the `Configuration` element, specify the physical design structures that match the hypothetical configuration of physical database design structures that you want Database Engine Tuning Advisor to analyze.</span></span> <span data-ttu-id="35173-230">有关可与和父元素一起使用的属性和子元素的信息 `TuningOptions` `Configuration` ，请参阅[XML 输入文件引用 &#40;数据库引擎优化顾问&#41;](../../tools/dta/xml-input-file-reference-database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-230">For information about what attributes and child elements you can use with the `TuningOptions` and the `Configuration` parent elements, see [XML Input File Reference &#40;Database Engine Tuning Advisor&#41;](../../tools/dta/xml-input-file-reference-database-engine-tuning-advisor.md).</span></span>  
  
4.  <span data-ttu-id="35173-231">保存该输入文件，以 **.xml** 为扩展名。</span><span class="sxs-lookup"><span data-stu-id="35173-231">Save the input file with an **.xml** extension.</span></span>  
  
5.  <span data-ttu-id="35173-232">根据数据库引擎优化顾问 XML 架构验证在步骤 4 中保存的 XML 输入文件。</span><span class="sxs-lookup"><span data-stu-id="35173-232">Validate the XML input file you saved in Step 4 against the Database Engine Tuning Advisor XML schema.</span></span> <span data-ttu-id="35173-233">此架构在安装 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 时安装在以下位置：</span><span class="sxs-lookup"><span data-stu-id="35173-233">This schema is installed at the following location when you install [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
    ```  
    C:\Program Files\Microsoft SQL Server\100\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd  
    ```  
  
     <span data-ttu-id="35173-234">数据库引擎优化顾问 XML 架构也可通过 [https://schemas.microsoft.com/sqlserver/2004/07/dta](https://schemas.microsoft.com/sqlserver/2004/07/dta) 在线获得。</span><span class="sxs-lookup"><span data-stu-id="35173-234">The Database Engine Tuning Advisor XML schema is also available online at [https://schemas.microsoft.com/sqlserver/2004/07/dta](https://schemas.microsoft.com/sqlserver/2004/07/dta).</span></span>  
  
6.  <span data-ttu-id="35173-235">创建工作负荷和 XML 输入文件后，你就可以将该输入文件提交到 **dta** 命令行实用工具进行分析。</span><span class="sxs-lookup"><span data-stu-id="35173-235">After creating a workload and an XML input file, you are ready to submit the input file to the **dta** command-line utility for analysis.</span></span> <span data-ttu-id="35173-236">请确保为 **-ox** 实用工具参数指定 XML 输出文件名。</span><span class="sxs-lookup"><span data-stu-id="35173-236">Make sure that you specify an XML output file name for the **-ox** utility argument.</span></span> <span data-ttu-id="35173-237">这样将创建一个具有 `Configuration` 元素中指定的建议配置的 XML 输出文件。</span><span class="sxs-lookup"><span data-stu-id="35173-237">This creates an XML output file with a recommended configuration specified in the `Configuration` element.</span></span> <span data-ttu-id="35173-238">如果要再次运行数据库引擎优化顾问以检查基于该输出的另一个假设配置，您可以从输出文件中复制 `Configuration` 元素内容，然后将其粘贴到一个新的或原始 XML 输入文件中。</span><span class="sxs-lookup"><span data-stu-id="35173-238">If you want to run Database Engine Tuning Advisor again to check another hypothetical configuration that is based on the output, you can copy and paste the `Configuration` element contents from the output file into a new or your original XML input file.</span></span> <span data-ttu-id="35173-239">有关将 XML 输入文件与 **dta** 实用工具结合使用的信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)中的“使用 dta 实用工具优化数据库”部分。</span><span class="sxs-lookup"><span data-stu-id="35173-239">For information about using an XML input file with the **dta** utility, see the section "Tune a Database by Using the dta Utility" in [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
     <span data-ttu-id="35173-240">优化完成后，可以使用数据库引擎优化顾问 GUI 来查看优化报告，也可以打开该 XML 输出文件查看 `TuningSummary` 和 `Configuration` 元素，以便查看数据库引擎优化顾问建议。</span><span class="sxs-lookup"><span data-stu-id="35173-240">After tuning is finished, either use the Database Engine Tuning Advisor GUI to view the tuning reports, or open the XML output file to view the `TuningSummary` and the `Configuration` elements to view the Database Engine Tuning Advisor recommendations.</span></span> <span data-ttu-id="35173-241">有关查看优化会话结果的信息，请参阅本主题中前面的 [查看优化输出](#View) 。</span><span class="sxs-lookup"><span data-stu-id="35173-241">For information about viewing the results of your tuning session, see [View Tuning Output](#View) earlier in this topic.</span></span> <span data-ttu-id="35173-242">此外，注意，XML 输出文件可能包含数据库引擎优化顾问分析报告。</span><span class="sxs-lookup"><span data-stu-id="35173-242">Also note that the XML output file may contain Database Engine Tuning Advisor analysis reports.</span></span>  
  
7.  <span data-ttu-id="35173-243">重复步骤 6 和步骤 7，直到您所创建的假设配置能使查询性能达到您的要求为止。</span><span class="sxs-lookup"><span data-stu-id="35173-243">Repeat steps 6 and 7 until you create the hypothetical configuration that produces the query performance improvement that you need.</span></span> <span data-ttu-id="35173-244">然后，可以实施该新配置。</span><span class="sxs-lookup"><span data-stu-id="35173-244">Then you can implement the new configuration.</span></span> <span data-ttu-id="35173-245">有关详细信息，请参阅本主题前面的 [实施优化建议](#Implement) 。</span><span class="sxs-lookup"><span data-stu-id="35173-245">For more information, see [Implement Tuning Recommendations](#Implement) earlier in this topic.</span></span>  
  
##  <a name="review-evaluate-and-clone-tuning-sessions"></a><a name="ReviewEvaluateClone"></a> <span data-ttu-id="35173-246">查看、评估和克隆优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-246">Review, Evaluate, and Clone Tuning Sessions</span></span>  
 <span data-ttu-id="35173-247">每当用户开始分析工作负荷对数据库的影响时，数据库引擎优化顾问都会创建新的优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-247">The Database Engine Tuning Advisor creates a new tuning session each time that you start analyzing the effects of a workload on your database or databases.</span></span> <span data-ttu-id="35173-248">可以使用数据库引擎优化顾问 GUI 中的“会话监视器”查看或重新加载在指定的 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例上运行的所有优化会话  。</span><span class="sxs-lookup"><span data-stu-id="35173-248">You can use the **Session Monitor** in the Database Engine Tuning Advisor GUI to view or reload all tuning sessions that have run on a given instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="35173-249">能够查看所有现有优化会话后，就可以轻松实现以下操作：根据现有会话克隆会话，编辑现有优化建议、然后使用数据库引擎优化顾问来评估编辑的会话，或定期执行优化以监视数据库的物理设计。</span><span class="sxs-lookup"><span data-stu-id="35173-249">Having all the existing tuning sessions available to review makes it easy to: clone sessions based on existing ones, edit existing tuning recommendations and then use Database Engine Tuning Advisor to evaluate the edited session, or perform tuning at regular intervals to monitor the physical design of your databases.</span></span> <span data-ttu-id="35173-250">例如，您可以按月优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-250">For example, you may decide to tune database on a monthly schedule.</span></span>  
  
 <span data-ttu-id="35173-251">必须先通过使用数据库引擎优化顾问优化工作负荷，在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例上创建优化会话，然后才能查看服务器实例的优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-251">Before you can review any tuning sessions for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must create tuning sessions on the server instance by tuning workloads with the Database Engine Tuning Advisor.</span></span> <span data-ttu-id="35173-252">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-252">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
### <a name="review-existing-tuning-sessions"></a><span data-ttu-id="35173-253">查看现有优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-253">Review Existing Tuning Sessions</span></span>  
 <span data-ttu-id="35173-254">请按照以下步骤浏览指定的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例上的现有优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-254">Use the following steps to browse the existing tuning sessions on a given instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
##### <a name="to-review-existing-tuning-sessions"></a><span data-ttu-id="35173-255">查看现有优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-255">To review existing tuning sessions</span></span>  
  
1.  <span data-ttu-id="35173-256">启动数据库引擎优化顾问 GUI。</span><span class="sxs-lookup"><span data-stu-id="35173-256">Start the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-257">有关详细信息，请参阅 [启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md)。</span><span class="sxs-lookup"><span data-stu-id="35173-257">For more information, see [Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
2.  <span data-ttu-id="35173-258">所有现有优化会话都显示在 **“会话监视器”** 窗口的上半部分。</span><span class="sxs-lookup"><span data-stu-id="35173-258">All existing tuning sessions are displayed in the upper half of the **Session Monitor** window.</span></span> <span data-ttu-id="35173-259">显示的会话数取决于在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例上优化数据库的次数。</span><span class="sxs-lookup"><span data-stu-id="35173-259">The number of sessions displayed depends on how many times you have tuned databases on this [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="35173-260">可以使用滚动条查看所有优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-260">Use the scroll bars to view all tuning sessions.</span></span>  
  
3.  <span data-ttu-id="35173-261">单击优化会话名称后，其详细信息便会显示在 **“会话监视器”** 窗口的下半部分。</span><span class="sxs-lookup"><span data-stu-id="35173-261">Click a tuning session name once and its details appear in the lower half of the **Session Monitor** window.</span></span>  
  
4.  <span data-ttu-id="35173-262">双击优化会话名称，其信息将加载到数据库引擎优化顾问中。</span><span class="sxs-lookup"><span data-stu-id="35173-262">Double-click a tuning session name and its information is loaded into Database Engine Tuning Advisor.</span></span> <span data-ttu-id="35173-263">加载会话信息后，可以选择任意选项卡查看此优化会话的有关信息。</span><span class="sxs-lookup"><span data-stu-id="35173-263">After the session information loads, you can choose any of the tabs to view information about this tuning session.</span></span>  
  
### <a name="evaluate-existing-tuning-sessions-as-hypothetical-configurations"></a><span data-ttu-id="35173-264">采用假设配置评估现有优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-264">Evaluate Existing Tuning Sessions As Hypothetical Configurations</span></span>  
 <span data-ttu-id="35173-265">请按照以下步骤评估现有优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-265">Use the following steps to evaluate an existing tuning session.</span></span> <span data-ttu-id="35173-266">评估现有优化会话涉及查看和编辑其建议，然后重新优化。</span><span class="sxs-lookup"><span data-stu-id="35173-266">Evaluating an existing tuning session involves viewing and editing its recommendations, and then re-tuning.</span></span> <span data-ttu-id="35173-267">例如，您决定仅对 **table1**创建索引，因此需要从现有优化建议中去掉创建索引视图和分区的步骤。</span><span class="sxs-lookup"><span data-stu-id="35173-267">For example, you decide that you want to only create indexes on **table1**, so you delete the creation of indexed views and partitioning from an existing tuning recommendation.</span></span> <span data-ttu-id="35173-268">然后，数据库引擎优化顾问创建新的优化会话，将编辑过的建议作为假设配置，并优化数据库的工作负荷。</span><span class="sxs-lookup"><span data-stu-id="35173-268">Then Database Engine Tuning Advisor creates a new tuning session and tunes the workload against your databases using the edited recommendations as a hypothetical configuration.</span></span> <span data-ttu-id="35173-269">这意味着数据库引擎优化顾问优化数据库的工作负荷时，就像已实施了编辑过的建议，这样，用户就可以执行有限的假设分析。</span><span class="sxs-lookup"><span data-stu-id="35173-269">This means that Database Engine Tuning Advisor tunes the workload against the databases as if the edited recommendations have been implemented, enabling you to perform limited "what-if" analysis.</span></span> <span data-ttu-id="35173-270">由于使用数据库引擎优化顾问 GUI 时只能选择部分现有建议，因此，只能执行有限的假设分析。</span><span class="sxs-lookup"><span data-stu-id="35173-270">It is limited what-if analysis because you can only choose a subset of an existing recommendation when you use the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="35173-271">若要执行完整的模拟分析，必须将数据库引擎优化顾问 XML 输入文件与 **dta** 命令行实用工具结合使用，指定一种全新的假设配置，而不是采用任何现有优化会话的一部分。</span><span class="sxs-lookup"><span data-stu-id="35173-271">To perform full what-if analysis, specifying a completely new hypothetical configuration that is not a subset of any previous tuning session, you must use the Database Engine Tuning Advisor XML input file with the **dta** command-line utility.</span></span>  
  
##### <a name="to-evaluate-an-existing-tuning-session"></a><span data-ttu-id="35173-272">评估现有优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-272">To evaluate an existing tuning session</span></span>  
  
1.  <span data-ttu-id="35173-273">启动数据库引擎优化顾问后，双击“会话监视器”  上半部分中的优化会话，这会将会话信息加载到数据库引擎优化顾问中。</span><span class="sxs-lookup"><span data-stu-id="35173-273">After starting Database Engine Tuning Advisor, double-click a tuning session in the upper half of the **Session Monitor**, which loads the session information into Database Engine Tuning Advisor.</span></span>  
  
2.  <span data-ttu-id="35173-274">单击 **“进度”** 选项卡查看优化日志，该日志包含有关数据库引擎优化顾问不能优化的工作负荷中的所有事件的错误信息。</span><span class="sxs-lookup"><span data-stu-id="35173-274">Click the **Progress** tab to check the tuning log, which contains error information about any events in the workload that Database Engine Tuning Advisor could not tune.</span></span> <span data-ttu-id="35173-275">这些信息可以帮助您评估工作负荷的影响。</span><span class="sxs-lookup"><span data-stu-id="35173-275">This information can help you evaluate the effectiveness of the workload.</span></span>  
  
3.  <span data-ttu-id="35173-276">如果想进一步查看此会话的优化结果，请单击 **“报表”** 选项卡。您可以在其中查看优化摘要或从 **“选择报表”** 列表中选择优化报表。</span><span class="sxs-lookup"><span data-stu-id="35173-276">If you would like to review the tuning results for this session further, click the **Reports** tab. There you can view the tuning summary or choose a tuning report from the **Select report** list.</span></span>  
  
4.  <span data-ttu-id="35173-277">单击 **“建议”** 选项卡查看优化建议。</span><span class="sxs-lookup"><span data-stu-id="35173-277">Click the **Recommendations** tab to view the tuning recommendations.</span></span>  
  
5.  <span data-ttu-id="35173-278">如果不能确定是否实施某些建议，请取消选中这些建议。</span><span class="sxs-lookup"><span data-stu-id="35173-278">If there are any recommendations that you are unsure about implementing, uncheck them.</span></span>  
  
6.  <span data-ttu-id="35173-279">在 **“操作”** 菜单上，单击 **“评估建议”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-279">On the **Actions** menu, click **Evaluate Recommendations**.</span></span> <span data-ttu-id="35173-280">数据库引擎优化顾问将编辑过的建议作为假设配置来创建新的优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-280">Database Engine Tuning Advisor creates a new tuning session that uses the edited recommendation as a hypothetical configuration.</span></span> <span data-ttu-id="35173-281">若要查看 XML 格式的假设配置，请选择 **“单击此处可查看配置部分”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-281">To view the hypothetical configuration in XML, choose **Click here to see the configuration section**.</span></span>  
  
7.  <span data-ttu-id="35173-282">在 **“常规”** 选项卡的 **“会话名称”** 中键入会话名称，并确保已指定正确的 **“工作负荷”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-282">On the **General** tab, type a **Session name**, and make sure the correct **Workload** is specified.</span></span>  
  
8.  <span data-ttu-id="35173-283">在 **“优化选项”** 选项卡上，可以指定优化时间或任何 **“高级选项”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-283">On the **Tuning Options** tab, you can specify a tuning time, or any of the **Advanced Options**.</span></span>  
  
9. <span data-ttu-id="35173-284">在工具栏中，单击 **“开始分析”** 按钮。</span><span class="sxs-lookup"><span data-stu-id="35173-284">Click the **Start Analysis** button on the toolbar.</span></span> <span data-ttu-id="35173-285">数据库引擎优化顾问将使用假设配置开始优化数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-285">Database Engine Tuning Advisor starts tuning the databases using the hypothetical configuration.</span></span> <span data-ttu-id="35173-286">数据库引擎优化顾问完成后，您可以像平时查看其他会话一样查看此会话的结果。</span><span class="sxs-lookup"><span data-stu-id="35173-286">When Database Engine Tuning Advisor finishes, you can view the results of this session as you normally would for any session.</span></span>  
  
### <a name="clone-existing-tuning-sessions"></a><span data-ttu-id="35173-287">克隆现有优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-287">Clone Existing Tuning Sessions</span></span>  
 <span data-ttu-id="35173-288">可以通过选择数据库引擎优化顾问中的克隆选项来根据现有会话创建新的优化会话。</span><span class="sxs-lookup"><span data-stu-id="35173-288">You can create new tuning sessions based on existing sessions by choosing the cloning option in Database Engine Tuning Advisor.</span></span> <span data-ttu-id="35173-289">使用克隆选项时，新的优化会话会基于现有的会话。</span><span class="sxs-lookup"><span data-stu-id="35173-289">When you use the cloning option, you base a new tuning session on an existing session.</span></span> <span data-ttu-id="35173-290">然后，可以根据需要更改新会话的优化选项。</span><span class="sxs-lookup"><span data-stu-id="35173-290">Then you can change the tuning options for the new session as needed.</span></span> <span data-ttu-id="35173-291">按照前面的过程来评估现有会话时，数据库引擎优化顾问也会创建新的优化会话，但您不能更改优化选项。</span><span class="sxs-lookup"><span data-stu-id="35173-291">When you evaluate an existing session as described in the previous procedure, Database Engine Tuning Advisor also creates a new tuning session, but you cannot change the tuning options.</span></span>  
  
##### <a name="to-create-new-tuning-sessions-by-cloning-existing-sessions"></a><span data-ttu-id="35173-292">通过克隆现有会话创建新的优化会话</span><span class="sxs-lookup"><span data-stu-id="35173-292">To create new tuning sessions by cloning existing sessions</span></span>  
  
1.  <span data-ttu-id="35173-293">启动数据库引擎优化顾问后，双击“会话监视器”  上半部分中的优化会话，这会将会话信息加载到数据库引擎优化顾问中。</span><span class="sxs-lookup"><span data-stu-id="35173-293">After starting Database Engine Tuning Advisor, double-click a tuning session in the upper half of the **Session Monitor**, which loads the session information into Database Engine Tuning Advisor.</span></span>  
  
2.  <span data-ttu-id="35173-294">在 **“操作”** 菜单上，单击 **“克隆会话”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-294">On the **Actions** menu, click **Clone Session**.</span></span>  
  
3.  <span data-ttu-id="35173-295">在 **“常规”** 选项卡的 **“会话名称”** 中键入会话名称，并确保已指定正确的 **“工作负荷”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-295">On the **General** tab, type a **Session name**, and make sure the correct **Workload** is specified.</span></span>  
  
4.  <span data-ttu-id="35173-296">在 **“优化选项”** 选项卡上，可以指定优化时间、数据库引擎优化顾问应考虑创建的物理设计结构以及应考虑在其建议中删除的内容。</span><span class="sxs-lookup"><span data-stu-id="35173-296">On the **Tuning Options** tab, you can specify a tuning time, the physical design structures Database Engine Tuning Advisor should consider creating, and what it should consider dropping in its recommendation.</span></span>  
  
5.  <span data-ttu-id="35173-297">如果要设置建议的空间限制、每个索引的最大列数以及是否希望数据库引擎优化顾问生成在 **联机时可以实施的建议，请单击** “高级选项” [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="35173-297">Click **Advanced Options** if you want to set a space limit for recommendations, a maximum number of columns per index, and whether you want Database Engine Tuning Advisor to generate recommendations that can be implemented while [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is online.</span></span>  
  
6.  <span data-ttu-id="35173-298">像其他优化会话一样，单击工具栏上的 **“开始分析”** 按钮分析工作负荷的影响。</span><span class="sxs-lookup"><span data-stu-id="35173-298">Click the **Start Analysis** button on the toolbar to analyze the effects of the workload like any other tuning session.</span></span> <span data-ttu-id="35173-299">数据库引擎优化顾问完成后，您可以像平时查看其他会话一样查看此会话的结果。</span><span class="sxs-lookup"><span data-stu-id="35173-299">When Database Engine Tuning Advisor finishes, you can view the results of this session as you normally would for any session.</span></span>  
  
##  <a name="user-interface-descriptions"></a><a name="UI"></a> <span data-ttu-id="35173-300">用户界面说明</span><span class="sxs-lookup"><span data-stu-id="35173-300">User Interface Descriptions</span></span>  
  
### <a name="sessions-monitor"></a><span data-ttu-id="35173-301">会话监视器</span><span class="sxs-lookup"><span data-stu-id="35173-301">Sessions Monitor</span></span>  
 <span data-ttu-id="35173-302">**“会话监视器”** 显示有关在数据库引擎优化顾问中打开的会话的信息。</span><span class="sxs-lookup"><span data-stu-id="35173-302">**Session Monitor** displays information about sessions that are opened in the Database Engine Tuning Advisor.</span></span> <span data-ttu-id="35173-303">若要在属性窗口中显示有关会话的信息，请在 **“会话监视器”** 中选择会话名称。</span><span class="sxs-lookup"><span data-stu-id="35173-303">To display information about the session in the property window, select a session name in **Session Monitor**.</span></span>  
  
### <a name="recommendations-tab"></a><span data-ttu-id="35173-304">“建议”选项卡</span><span class="sxs-lookup"><span data-stu-id="35173-304">Recommendations Tab</span></span>  
 <span data-ttu-id="35173-305">在数据库引擎优化顾问完成工作负荷的分析后，将显示 **“建议”** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="35173-305">The **Recommendations** tab appears after Database Engine Tuning Advisor completes analysis of a workload.</span></span> <span data-ttu-id="35173-306">此网格包含对涉及的每个对象的建议。</span><span class="sxs-lookup"><span data-stu-id="35173-306">This grid contains the recommendations for each object considered.</span></span> <span data-ttu-id="35173-307">上方网格将显示分区建议（如果有的话），下方网格将显示索引建议。</span><span class="sxs-lookup"><span data-stu-id="35173-307">Partition recommendations, if any, are presented in the upper grid, and the index recommendations are presented in the lower grid.</span></span> <span data-ttu-id="35173-308">如果没有建议，则不显示网格。</span><span class="sxs-lookup"><span data-stu-id="35173-308">The grids do not appear if there are no recommendations.</span></span>  
  
 <span data-ttu-id="35173-309">**“定义”** 列以超链接形式包含所建议分区或索引的定义。</span><span class="sxs-lookup"><span data-stu-id="35173-309">The **Definition** column contains the definition of the recommended partition or index as a hyperlink.</span></span> <span data-ttu-id="35173-310">此列通常很窄，无法看到整个定义。</span><span class="sxs-lookup"><span data-stu-id="35173-310">This column is usually too narrow to see the entire definition.</span></span> <span data-ttu-id="35173-311">单击超链接可以显示一个对话框，其中包含完整定义及 **“复制到剪贴板”** 按钮。</span><span class="sxs-lookup"><span data-stu-id="35173-311">Click the hyperlink to display a dialog box containing the full definition and the **Copy to Clipboard** button.</span></span>  
  
#### <a name="partition-recommendations"></a><span data-ttu-id="35173-312">“分区建议”</span><span class="sxs-lookup"><span data-stu-id="35173-312">Partition Recommendations</span></span>  
 <span data-ttu-id="35173-313">**Database Name**</span><span class="sxs-lookup"><span data-stu-id="35173-313">**Database Name**</span></span>  
 <span data-ttu-id="35173-314">包含建议修改的对象的数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-314">The database containing the objects recommended to be modified.</span></span>  
  
 <span data-ttu-id="35173-315">**建议**</span><span class="sxs-lookup"><span data-stu-id="35173-315">**Recommendation**</span></span>  
 <span data-ttu-id="35173-316">为提高性能而建议执行的操作。</span><span class="sxs-lookup"><span data-stu-id="35173-316">The action recommended to improve performance.</span></span> <span data-ttu-id="35173-317">可能的值为 Create 和 Drop。</span><span class="sxs-lookup"><span data-stu-id="35173-317">Possible values are Create and Drop.</span></span>  
  
 <span data-ttu-id="35173-318">**建议目标**</span><span class="sxs-lookup"><span data-stu-id="35173-318">**Target of Recommendation**</span></span>  
 <span data-ttu-id="35173-319">受建议影响的分区函数或分区方案。</span><span class="sxs-lookup"><span data-stu-id="35173-319">The partition function or scheme affected by the recommendation.</span></span> <span data-ttu-id="35173-320">此列中的图标反映对删除或添加 **“建议目标”** 的建议，以及该建议是分区函数还是分区方案。</span><span class="sxs-lookup"><span data-stu-id="35173-320">The icon in this column reflects the recommendation to drop or add the **Target of Recommendation** and whether it is a partition function or scheme.</span></span>  
  
 <span data-ttu-id="35173-321">**详细信息**</span><span class="sxs-lookup"><span data-stu-id="35173-321">**Details**</span></span>  
 <span data-ttu-id="35173-322">“建议目标”  的说明。</span><span class="sxs-lookup"><span data-stu-id="35173-322">A description of the **Target of Recommendation**.</span></span> <span data-ttu-id="35173-323">其值可能是一个范围（对于分区函数），或为空（对于分区方案）。</span><span class="sxs-lookup"><span data-stu-id="35173-323">Possible values include a range for partition functions, or blank for partition schemes.</span></span>  
  
 <span data-ttu-id="35173-324">**分区数**</span><span class="sxs-lookup"><span data-stu-id="35173-324">**No. of Partitions**</span></span>  
 <span data-ttu-id="35173-325">由建议的分区函数定义的分区数。</span><span class="sxs-lookup"><span data-stu-id="35173-325">The number of partitions defined by the recommended partitioning functions.</span></span> <span data-ttu-id="35173-326">当此函数与方案一起使用并应用于表时，该值就是表中的数据被划分的分区数。</span><span class="sxs-lookup"><span data-stu-id="35173-326">When this function is used with a scheme and then applied to a table, the data in the table is divided into that many partitions.</span></span>  
  
 <span data-ttu-id="35173-327">**定义**</span><span class="sxs-lookup"><span data-stu-id="35173-327">**Definition**</span></span>  
 <span data-ttu-id="35173-328">“建议目标”  的定义。</span><span class="sxs-lookup"><span data-stu-id="35173-328">The definition of the **Target of Recommendation**.</span></span> <span data-ttu-id="35173-329">单击此列以打开“SQL 脚本预览”对话框，该对话框中包含建议操作的脚本。</span><span class="sxs-lookup"><span data-stu-id="35173-329">Click the column to open the SQL Script Preview dialog box, with a script for the recommended action.</span></span>  
  
##### <a name="index-recommendations"></a><span data-ttu-id="35173-330">“索引建议”</span><span class="sxs-lookup"><span data-stu-id="35173-330">Index Recommendations</span></span>  
 <span data-ttu-id="35173-331">**Database Name**</span><span class="sxs-lookup"><span data-stu-id="35173-331">**Database Name**</span></span>  
 <span data-ttu-id="35173-332">包含建议修改的对象的数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-332">The database containing the objects recommended to be modified.</span></span>  
  
 <span data-ttu-id="35173-333">**Object Name**</span><span class="sxs-lookup"><span data-stu-id="35173-333">**Object Name**</span></span>  
 <span data-ttu-id="35173-334">与建议相关的表。</span><span class="sxs-lookup"><span data-stu-id="35173-334">The table related to the recommendation.</span></span>  
  
 <span data-ttu-id="35173-335">**建议**</span><span class="sxs-lookup"><span data-stu-id="35173-335">**Recommendation**</span></span>  
 <span data-ttu-id="35173-336">为提高性能而建议执行的操作。</span><span class="sxs-lookup"><span data-stu-id="35173-336">The action recommended to improve performance.</span></span> <span data-ttu-id="35173-337">可能的值为 Create 和 Drop。</span><span class="sxs-lookup"><span data-stu-id="35173-337">Possible values are Create and Drop.</span></span>  
  
 <span data-ttu-id="35173-338">**建议目标**</span><span class="sxs-lookup"><span data-stu-id="35173-338">**Target of Recommendation**</span></span>  
 <span data-ttu-id="35173-339">受建议影响的索引或视图。</span><span class="sxs-lookup"><span data-stu-id="35173-339">The index or view affected by the recommendation.</span></span> <span data-ttu-id="35173-340">此列中的图标反映对删除或添加 **“建议目标”** 的建议。</span><span class="sxs-lookup"><span data-stu-id="35173-340">The icon in this column reflects the recommendation to drop or add the **Target of Recommendation**.</span></span>  
  
 <span data-ttu-id="35173-341">**详细信息**</span><span class="sxs-lookup"><span data-stu-id="35173-341">**Details**</span></span>  
 <span data-ttu-id="35173-342">“建议目标”  的说明。</span><span class="sxs-lookup"><span data-stu-id="35173-342">A description of the **Target of Recommendation**.</span></span> <span data-ttu-id="35173-343">其值可能为聚集索引视图或者为空（表示非聚集索引）。</span><span class="sxs-lookup"><span data-stu-id="35173-343">Possible values include clustered, indexed view, or blank indicating a nonclustered index.</span></span> <span data-ttu-id="35173-344">还指示索引是否是唯一的。</span><span class="sxs-lookup"><span data-stu-id="35173-344">Also indicates whether the index is unique.</span></span>  
  
 <span data-ttu-id="35173-345">**分区方案**</span><span class="sxs-lookup"><span data-stu-id="35173-345">**Partition Scheme**</span></span>  
 <span data-ttu-id="35173-346">如果建议了分区，则在此列中提供分区方案。</span><span class="sxs-lookup"><span data-stu-id="35173-346">The partition scheme is provided in this column if partitioning is recommended.</span></span>  
  
 <span data-ttu-id="35173-347">**大小(KB)**</span><span class="sxs-lookup"><span data-stu-id="35173-347">**Size (KB)**</span></span>  
 <span data-ttu-id="35173-348">所建议的新对象的预期大小。</span><span class="sxs-lookup"><span data-stu-id="35173-348">The expected size of the new object that is being recommended.</span></span> <span data-ttu-id="35173-349">如果此列空白，请单击 **“有关现有对象的大小，请参阅‘报告’”** 。</span><span class="sxs-lookup"><span data-stu-id="35173-349">If this column is blank, click **See Reports for sizes of existing objects**.</span></span>  
  
 <span data-ttu-id="35173-350">**定义**</span><span class="sxs-lookup"><span data-stu-id="35173-350">**Definition**</span></span>  
 <span data-ttu-id="35173-351">“建议目标”  的定义。</span><span class="sxs-lookup"><span data-stu-id="35173-351">The definition of the **Target of Recommendation**.</span></span> <span data-ttu-id="35173-352">单击此列以打开“SQL 脚本预览”对话框，该对话框中包含建议操作的脚本。</span><span class="sxs-lookup"><span data-stu-id="35173-352">Click the column to open the SQL Script Preview dialog box, with a script for the recommended action.</span></span>  
  
 <span data-ttu-id="35173-353">**“建议”**</span><span class="sxs-lookup"><span data-stu-id="35173-353">**Show existing objects**</span></span>  
 <span data-ttu-id="35173-354">选择此项可以在网格中显示所有现有对象，即使数据库引擎优化顾问没有提供与对象相关的建议。</span><span class="sxs-lookup"><span data-stu-id="35173-354">Select to show all existing objects in the grid, even if no recommendations related to the objects are made by Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="35173-355">**“有关现有对象的大小，请参阅‘报告’”**</span><span class="sxs-lookup"><span data-stu-id="35173-355">**See Reports for sizes of existing objects**</span></span>  
 <span data-ttu-id="35173-356">选择此项可以查看针对建议网格中现有对象提供大小信息的报告。</span><span class="sxs-lookup"><span data-stu-id="35173-356">Select to view reports that provide the size of existing objects in the recommendations grid.</span></span>  
  
### <a name="actions-menuapply-recommendations-options"></a><span data-ttu-id="35173-357">“操作”菜单/“应用建议”选项</span><span class="sxs-lookup"><span data-stu-id="35173-357">Actions Menu/Apply Recommendations Options</span></span>  
 <span data-ttu-id="35173-358">在分析工作负荷并提出建议后，请在 **“操作”** 菜单上单击 **“应用建议”** 以打开 **“应用建议”** 对话框。</span><span class="sxs-lookup"><span data-stu-id="35173-358">After a workload has been analyzed and recommendations have been presented, on the **Actions** menu, click **Apply Recommendations** to open the **Apply Recommendations** dialog box.</span></span>  
  
 <span data-ttu-id="35173-359">**“立即应用”**</span><span class="sxs-lookup"><span data-stu-id="35173-359">**Apply now**</span></span>  
 <span data-ttu-id="35173-360">为该建议生成脚本，并运行脚本以实施建议。</span><span class="sxs-lookup"><span data-stu-id="35173-360">Generate a script for the recommendations, and runs the script to implement the recommendations.</span></span>  
  
 <span data-ttu-id="35173-361">**“安排以后执行”**</span><span class="sxs-lookup"><span data-stu-id="35173-361">**Schedule for later**</span></span>  
 <span data-ttu-id="35173-362">为该建议生成脚本，并将操作另存为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理作业。</span><span class="sxs-lookup"><span data-stu-id="35173-362">Generate a script for the recommendations, and save the actions as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job.</span></span>  
  
 <span data-ttu-id="35173-363">**Date**</span><span class="sxs-lookup"><span data-stu-id="35173-363">**Date**</span></span>  
 <span data-ttu-id="35173-364">指定要运行 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理作业以应用建议的日期。</span><span class="sxs-lookup"><span data-stu-id="35173-364">Specify the date you want to run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job to apply the recommendations.</span></span>  
  
 <span data-ttu-id="35173-365">**时间**</span><span class="sxs-lookup"><span data-stu-id="35173-365">**Time**</span></span>  
 <span data-ttu-id="35173-366">指定要运行 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理作业以应用建议的时间。</span><span class="sxs-lookup"><span data-stu-id="35173-366">Specify the time you want to run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job to apply the recommendations.</span></span>  
  
### <a name="reports-tab-options"></a><span data-ttu-id="35173-367">“报告”选项卡选项</span><span class="sxs-lookup"><span data-stu-id="35173-367">Reports Tab Options</span></span>  
 <span data-ttu-id="35173-368">在数据库引擎优化顾问完成工作负荷的分析后，将显示 **“报告”** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="35173-368">The **Reports** tab appears after Database Engine Tuning Advisor completes analysis of a workload.</span></span>  
  
 <span data-ttu-id="35173-369">**“优化摘要”**</span><span class="sxs-lookup"><span data-stu-id="35173-369">**Tuning Summary**</span></span>  
 <span data-ttu-id="35173-370">显示数据库引擎优化顾问建议的摘要。</span><span class="sxs-lookup"><span data-stu-id="35173-370">Displays a summary of the Database Engine Tuning Advisor recommendations.</span></span>  
  
 <span data-ttu-id="35173-371">**Date**</span><span class="sxs-lookup"><span data-stu-id="35173-371">**Date**</span></span>  
 <span data-ttu-id="35173-372">数据库引擎优化顾问创建报告的日期。</span><span class="sxs-lookup"><span data-stu-id="35173-372">The date that Database Engine Tuning Advisor created the report.</span></span>  
  
 <span data-ttu-id="35173-373">**时间**</span><span class="sxs-lookup"><span data-stu-id="35173-373">**Time**</span></span>  
 <span data-ttu-id="35173-374">数据库引擎优化顾问创建报告的时间。</span><span class="sxs-lookup"><span data-stu-id="35173-374">The time that Database Engine Tuning Advisor created the report.</span></span>  
  
 <span data-ttu-id="35173-375">**Server**</span><span class="sxs-lookup"><span data-stu-id="35173-375">**Server**</span></span>  
 <span data-ttu-id="35173-376">作为数据库引擎优化顾问工作负荷的目标的服务器。</span><span class="sxs-lookup"><span data-stu-id="35173-376">The server that was the target of the Database Engine Tuning Advisor workload.</span></span>  
  
 <span data-ttu-id="35173-377">**要优化的数据库**</span><span class="sxs-lookup"><span data-stu-id="35173-377">**Databases to tune**</span></span>  
 <span data-ttu-id="35173-378">受数据库引擎优化顾问建议影响的数据库。</span><span class="sxs-lookup"><span data-stu-id="35173-378">The database affected by Database Engine Tuning Advisor recommendations.</span></span>  
  
 <span data-ttu-id="35173-379">**工作负荷文件**</span><span class="sxs-lookup"><span data-stu-id="35173-379">**Workload file**</span></span>  
 <span data-ttu-id="35173-380">当工作负荷为文件时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-380">Appears when the workload is a file.</span></span>  
  
 <span data-ttu-id="35173-381">**工作负荷表**</span><span class="sxs-lookup"><span data-stu-id="35173-381">**Workload table**</span></span>  
 <span data-ttu-id="35173-382">当工作负荷为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 表时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-382">Appears when the workload is a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] table.</span></span>  
  
 <span data-ttu-id="35173-383">**“工作负荷”**</span><span class="sxs-lookup"><span data-stu-id="35173-383">**Workload**</span></span>  
 <span data-ttu-id="35173-384">在工作负荷已从 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]中的查询编辑器中导入后显示。</span><span class="sxs-lookup"><span data-stu-id="35173-384">Appears when the workload has been imported from the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="35173-385">**最长优化时间**</span><span class="sxs-lookup"><span data-stu-id="35173-385">**Maximum tuning time**</span></span>  
 <span data-ttu-id="35173-386">配置为可用于数据库引擎优化顾问分析的最长时间。</span><span class="sxs-lookup"><span data-stu-id="35173-386">The maximum time configured to be available for the Database Engine Tuning Advisor analysis.</span></span>  
  
 <span data-ttu-id="35173-387">**优化所用的时间**</span><span class="sxs-lookup"><span data-stu-id="35173-387">**Time taken for tuning**</span></span>  
 <span data-ttu-id="35173-388">数据库引擎优化顾问分析工作负荷实际使用的时间。</span><span class="sxs-lookup"><span data-stu-id="35173-388">The time actually used by Database Engine Tuning Advisor to analyze the workload.</span></span>  
  
 <span data-ttu-id="35173-389">**“预期的提高百分比”**</span><span class="sxs-lookup"><span data-stu-id="35173-389">**Expected percentage improvement**</span></span>  
 <span data-ttu-id="35173-390">接受数据库引擎优化顾问的所有建议后，目标工作负荷预期的提高百分比。</span><span class="sxs-lookup"><span data-stu-id="35173-390">The percentage improvement expected with the target workload if all Database Engine Tuning Advisor recommendations are implemented.</span></span>  
  
 <span data-ttu-id="35173-391">**建议的最大空间(MB)**</span><span class="sxs-lookup"><span data-stu-id="35173-391">**Maximum space for recommendation (MB)**</span></span>  
 <span data-ttu-id="35173-392">建议使用的最大空间。</span><span class="sxs-lookup"><span data-stu-id="35173-392">The maximum space considered for the recommendations.</span></span> <span data-ttu-id="35173-393">此值是在进行分析之前使用 **“优化选项”** 选项卡上的 **“高级选项”** 按钮进行配置的。</span><span class="sxs-lookup"><span data-stu-id="35173-393">This value is configured before the analysis is made, using the **Advanced Options** button, on the **Tuning Options** tab.</span></span>  
  
 <span data-ttu-id="35173-394">**当前所用空间(MB)**</span><span class="sxs-lookup"><span data-stu-id="35173-394">**Space used currently (MB)**</span></span>  
 <span data-ttu-id="35173-395">由被分析的数据库中的索引当前使用的空间。</span><span class="sxs-lookup"><span data-stu-id="35173-395">The space currently used by indexes in the database analyzed.</span></span>  
  
 <span data-ttu-id="35173-396">**建议使用的空间(MB)**</span><span class="sxs-lookup"><span data-stu-id="35173-396">**Space used by recommendation (MB)**</span></span>  
 <span data-ttu-id="35173-397">接受数据库引擎优化顾问的所有建议后，由索引使用的预期近似空间量。</span><span class="sxs-lookup"><span data-stu-id="35173-397">The approximate space expected to be used by indexes if all the Database Engine Tuning Advisor recommendations are implemented.</span></span>  
  
 <span data-ttu-id="35173-398">**工作负荷中的事件数**</span><span class="sxs-lookup"><span data-stu-id="35173-398">**Number of events in workload**</span></span>  
 <span data-ttu-id="35173-399">工作负荷中包含的事件数。</span><span class="sxs-lookup"><span data-stu-id="35173-399">Number of events contained in the workload.</span></span>  
  
 <span data-ttu-id="35173-400">**已优化的事件数**</span><span class="sxs-lookup"><span data-stu-id="35173-400">**Number of events tuned**</span></span>  
 <span data-ttu-id="35173-401">工作负荷中已优化的事件数。</span><span class="sxs-lookup"><span data-stu-id="35173-401">Number of events in the workload that were tuned.</span></span> <span data-ttu-id="35173-402">如果无法优化某个事件，该事件将列在优化日志中。可以在 **“进度”** 选项卡上访问优化日志。</span><span class="sxs-lookup"><span data-stu-id="35173-402">If an event cannot be tuned, it is listed in the tuning log, which is available on the **Progress** tab.</span></span>  
  
 <span data-ttu-id="35173-403">**已优化的语句数**</span><span class="sxs-lookup"><span data-stu-id="35173-403">**Number of statements tuned**</span></span>  
 <span data-ttu-id="35173-404">工作负荷中已优化的语句数。</span><span class="sxs-lookup"><span data-stu-id="35173-404">Number of statements in the workload that were tuned.</span></span> <span data-ttu-id="35173-405">如果无法优化某个语句，该语句将列在优化日志中。可以在 **“进度”** 选项卡上访问优化日志。</span><span class="sxs-lookup"><span data-stu-id="35173-405">If a statement cannot be tuned, it is listed in the tuning log which is available on the **Progress** tab.</span></span>  
  
 <span data-ttu-id="35173-406">**优化集内的 SELECT 语句百分比**</span><span class="sxs-lookup"><span data-stu-id="35173-406">**Percent SELECT statements in the tuned set**</span></span>  
 <span data-ttu-id="35173-407">已优化语句中 SELECT 语句所占的百分比。</span><span class="sxs-lookup"><span data-stu-id="35173-407">Percentage of tuned statements that are SELECT statements.</span></span> <span data-ttu-id="35173-408">仅在存在已优化的 SELECT 语句时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-408">Only appears if there are SELECT statements that have been tuned.</span></span>  
  
 <span data-ttu-id="35173-409">**优化集内的 UPDATE 语句百分比**</span><span class="sxs-lookup"><span data-stu-id="35173-409">**Percent UPDATE statements in the tuned set**</span></span>  
 <span data-ttu-id="35173-410">已优化语句中 UPDATE 语句所占的百分比。</span><span class="sxs-lookup"><span data-stu-id="35173-410">Percentage of tuned statements that are UPDATE statements.</span></span> <span data-ttu-id="35173-411">仅在存在已优化的 UPDATE 语句时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-411">Only appears if there are UPDATE statements that have been tuned.</span></span>  
  
 <span data-ttu-id="35173-412">**建议创建的索引数/建议删除的索引数**</span><span class="sxs-lookup"><span data-stu-id="35173-412">**Number of indexes recommended to be [created | dropped]**</span></span>  
 <span data-ttu-id="35173-413">建议在已优化数据库中创建或删除的索引数。</span><span class="sxs-lookup"><span data-stu-id="35173-413">Recommended number of indexes to be created or dropped on the tuned database.</span></span> <span data-ttu-id="35173-414">仅在建议中包含索引时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-414">Only appears if indexes are part of the recommendation.</span></span>  
  
 <span data-ttu-id="35173-415">**建议创建的视图索引数/建议删除的视图索引数**</span><span class="sxs-lookup"><span data-stu-id="35173-415">**Number of indexes on views recommended to be [created | dropped]**</span></span>  
 <span data-ttu-id="35173-416">建议在已优化数据库中创建或删除的视图索引数。</span><span class="sxs-lookup"><span data-stu-id="35173-416">Recommended number of indexes on views to be created or dropped on the tuned database.</span></span> <span data-ttu-id="35173-417">仅在建议中包含视图索引时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-417">Only appears if indexes on views are part of the recommendation.</span></span>  
  
 <span data-ttu-id="35173-418">**建议创建的统计信息数**</span><span class="sxs-lookup"><span data-stu-id="35173-418">**Number of statistics recommended to be created**</span></span>  
 <span data-ttu-id="35173-419">建议对已优化的数据库创建的统计信息数。</span><span class="sxs-lookup"><span data-stu-id="35173-419">Recommended number of statistics to be created on the tuned database.</span></span> <span data-ttu-id="35173-420">仅在统计信息有建议值时显示。</span><span class="sxs-lookup"><span data-stu-id="35173-420">Only appears if statistics are recommended.</span></span>  
  
 <span data-ttu-id="35173-421">**Select Report**</span><span class="sxs-lookup"><span data-stu-id="35173-421">**Select Report**</span></span>  
 <span data-ttu-id="35173-422">查看所选报告的详细信息。</span><span class="sxs-lookup"><span data-stu-id="35173-422">See the details of the selected report.</span></span> <span data-ttu-id="35173-423">对于不同的报告，网格中的列可能会有所不同。</span><span class="sxs-lookup"><span data-stu-id="35173-423">The columns in the grid vary with each report.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="35173-424">另请参阅</span><span class="sxs-lookup"><span data-stu-id="35173-424">See Also</span></span>  
 <span data-ttu-id="35173-425">[启动并使用数据库引擎优化顾问](database-engine-tuning-advisor.md) </span><span class="sxs-lookup"><span data-stu-id="35173-425">[Start and Use the Database Engine Tuning Advisor](database-engine-tuning-advisor.md) </span></span>  
 [<span data-ttu-id="35173-426">dta 实用工具</span><span class="sxs-lookup"><span data-stu-id="35173-426">dta Utility</span></span>](../../tools/dta/dta-utility.md)  
  
  
