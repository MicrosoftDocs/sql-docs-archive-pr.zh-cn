---
title: 数据层应用程序 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- designing DACs
- How to [DAC]
- data-tier application [SQL Server], designing
- wizard [DAC]
ms.assetid: a04a2aba-d07a-4423-ab8a-0a31658f6317
author: stevestein
ms.author: sstein
ms.openlocfilehash: 4975f09a29f7b25d248f3a4bc8c5c333e4ac3d06
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87688939"
---
# <a name="data-tier-applications"></a><span data-ttu-id="6316c-102">数据层应用程序</span><span class="sxs-lookup"><span data-stu-id="6316c-102">Data-tier Applications</span></span>
  <span data-ttu-id="6316c-103">数据层应用程序 (DAC) 是一个逻辑数据库管理实体，用于定义与用户数据库关联的所有 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 对象，如表、视图和实例对象（包括登录名）。</span><span class="sxs-lookup"><span data-stu-id="6316c-103">A data-tier application (DAC) is a logical database management entity that defines all of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] objects - like tables, views, and instance objects, including logins - associated with a user's database.</span></span> <span data-ttu-id="6316c-104">DAC 是 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库部署的一个自包含单元，它使数据层开发人员和数据库管理员能够将 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 对象打包到一个名为“DAC 包”（也称作 DACPAC）的可移植项目中。</span><span class="sxs-lookup"><span data-stu-id="6316c-104">A DAC is a self-contained unit of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database deployment that enables data-tier developers and database administrators to package [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] objects into a portable artifact called a DAC package, also known as a DACPAC.</span></span>  
  
 <span data-ttu-id="6316c-105">BACPAC 是一个封装数据库架构以及数据库中存储的数据的相关项目。</span><span class="sxs-lookup"><span data-stu-id="6316c-105">A BACPAC is a related artifact that encapsulates the database schema as well as the data stored in the database.</span></span>  
  
## <a name="benefits-of-data-tier-applications"></a><span data-ttu-id="6316c-106">数据层应用程序的优点</span><span class="sxs-lookup"><span data-stu-id="6316c-106">Benefits of Data-tier Applications</span></span>  
 <span data-ttu-id="6316c-107">大部分数据库应用程序的生命周期涉及开发人员和 DBA 共享并交换有关应用程序更新和维护活动的脚本和临时集成说明。</span><span class="sxs-lookup"><span data-stu-id="6316c-107">The lifecycle of most database applications involves developers and DBAs sharing and exchanging scripts and ad hoc integration notes for application update and maintenance activities.</span></span> <span data-ttu-id="6316c-108">尽管对于少量的数据库，这一点是可接受的，但当数据库的数量、大小和复杂性增大时，它很快会变得不可缩放。</span><span class="sxs-lookup"><span data-stu-id="6316c-108">While this is acceptable for a small number of databases, it quickly becomes unscalable once databases grow in number, size, and complexity.</span></span>  
  
 <span data-ttu-id="6316c-109">DAC 是一种数据库生命周期管理和效率工具，可用于进行声明性数据库开发以简化部署和管理。</span><span class="sxs-lookup"><span data-stu-id="6316c-109">A DAC is a database lifecycle management and productivity tool that enables declarative database development to simplify deployment and management.</span></span> <span data-ttu-id="6316c-110">开发人员可以在 SQL Server Data Tools 数据库项目中创作一个数据库，然后将该数据库生成到 DACPAC 中以便提交给 DBA。</span><span class="sxs-lookup"><span data-stu-id="6316c-110">A developer can author a database in SQL Server Data Tool database project and then build the database into a DACPAC for handoff to a DBA.</span></span> <span data-ttu-id="6316c-111">DBA 可使用 SQL Server Management Studio 将 DAC 部署到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 或 [!INCLUDE[ssSDSfull](../../includes/sssdsfull-md.md)] 的测试或生产实例中。</span><span class="sxs-lookup"><span data-stu-id="6316c-111">The DBA can deploy the DAC using SQL Server Management Studio to a test or production instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssSDSfull](../../includes/sssdsfull-md.md)].</span></span> <span data-ttu-id="6316c-112">或者，DBA 可以使用 DACPAC 升级之前用 SQL Server Management Studio 部署的数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-112">Alternatively, the DBA can use the DACPAC to upgrade a previously deployed database using SQL Server Management Studio.</span></span> <span data-ttu-id="6316c-113">若要完成生命周期，DBA 可将数据库提取到 DACPAC 中，再将其提交给开发人员以反映测试或生产调整，或进一步更改数据库设计以响应应用程序中的更改。</span><span class="sxs-lookup"><span data-stu-id="6316c-113">To complete the lifecycle, the DBA can extract the database into a DACPAC and hand it off to a developer to either reflect test or production adjustments, or to enable further database design changes in response to changes in the application.</span></span>  
  
 <span data-ttu-id="6316c-114">DAC 驱动的部署相对于脚本驱动的做法的优点是，该工具可帮助 DBA 标识和验证各个源和目标数据库中的行为。</span><span class="sxs-lookup"><span data-stu-id="6316c-114">The advantage of a DAC-driven deployment over a script driven exercise is that the tool helps the DBA with identifying and validating behaviors from different source and target databases.</span></span> <span data-ttu-id="6316c-115">在升级期间，该工具会在升级可能导致数据丢失时向 DBA 发出警告，并且还会提供升级计划。</span><span class="sxs-lookup"><span data-stu-id="6316c-115">During upgrades, the tool warns the DBA if the upgrade might cause data loss, and also provide an upgrade plan.</span></span> <span data-ttu-id="6316c-116">DBA 可以评估此计划，然后利用该工具继续进行升级。</span><span class="sxs-lookup"><span data-stu-id="6316c-116">The DBA can evaluate the plan and then utilize the  tool to proceed with the upgrade.</span></span>  
  
 <span data-ttu-id="6316c-117">DAC 还支持版本控制以帮助开发人员和 DBA 在数据库的生命周期内维护和管理数据库沿袭。</span><span class="sxs-lookup"><span data-stu-id="6316c-117">DAC's also support versioning to help the developer and the DBA maintain and manage the database lineage through its lifecycle.</span></span>  
  
## <a name="dac-concepts"></a><span data-ttu-id="6316c-118">DAC 概念</span><span class="sxs-lookup"><span data-stu-id="6316c-118">DAC Concepts</span></span>  
 <span data-ttu-id="6316c-119">DAC 简化了支持应用程序的数据层元素的开发、部署和管理：</span><span class="sxs-lookup"><span data-stu-id="6316c-119">A DAC simplifies the development, deployment, and management of data-tier elements that support an application:</span></span>  
  
-   <span data-ttu-id="6316c-120">数据层应用程序 (DAC) 是一个逻辑数据库管理实体，用于定义与用户数据库关联的所有 SQL Server 对象（如表、视图和实例对象）。</span><span class="sxs-lookup"><span data-stu-id="6316c-120">A data-tier application (DAC) is a logical database management entity that defines all SQL Server objects - such as tables, views, and instance objects - associated with a user's database.</span></span> <span data-ttu-id="6316c-121">DAC 是 SQL Server 数据库部署的一个自包含单元，它使数据层开发人员和 DBA 能够将 SQL Server 对象打包到一个名为“DAC 包”的可移植项目或 .dacpac 文件中。</span><span class="sxs-lookup"><span data-stu-id="6316c-121">It is a self-contained unit of SQL Server database deployment that enables data-tier developers and DBAs to package SQL Server objects into a portable artifact called a DAC package, or .dacpac file.</span></span>  
  
-   <span data-ttu-id="6316c-122">对于要被视为 DAC 的 SQL Server 数据库，必须通过用户操作显式注册或通过某项 DAC 操作隐式注册该数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-122">For a SQL Server database to be treated as a DAC, it must be registered - either explicitly by a user operation, or implicitly by one of the DAC operations.</span></span> <span data-ttu-id="6316c-123">在注册数据库时，DAC 版本和其他属性将记录为数据库的元数据的一部分。</span><span class="sxs-lookup"><span data-stu-id="6316c-123">When a database is registered, the DAC version and other properties are recorded as part of the metadata of the database.</span></span> <span data-ttu-id="6316c-124">反之，也可以注销数据库并删除其 DAC 属性。</span><span class="sxs-lookup"><span data-stu-id="6316c-124">Conversely, a database can also be unregistered and have its DAC properties removed.</span></span>  
  
-   <span data-ttu-id="6316c-125">通常，DAC 工具可以读取由早期版本的 SQL Server 中的 DAC 工具生成的 DACPAC 文件，并且可以将 DACPAC 部署到早期版本的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="6316c-125">In general, DAC tools are capable of reading DACPAC files generated by DAC tools from previous SQL Server versions, and can also deploy DACPAC's to previous versions of SQL Server.</span></span> <span data-ttu-id="6316c-126">但是，早期版本的 DAC 工具无法读取由更高版本的 DAC 工具生成的 DACPAC 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-126">However, DAC tools from earlier versions cannot read DACPAC files generated by DAC tools from later versions.</span></span> <span data-ttu-id="6316c-127">具体来说：</span><span class="sxs-lookup"><span data-stu-id="6316c-127">Specifically:</span></span>  
  
    -   <span data-ttu-id="6316c-128">SQL Server 2008 R2 中引入了 DAC 操作。</span><span class="sxs-lookup"><span data-stu-id="6316c-128">DAC operations were introduced in SQL Server 2008 R2.</span></span> <span data-ttu-id="6316c-129">除了 SQL Server 2008 R2 数据库以外，这些工具还支持从 SQL Server 2008、SQL Server 2005 和 SQL Server 2000 数据库生成 DACPAC 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-129">In addition to SQL Server 2008 R2 databases, the tools support generation of DACPAC files from SQL Server 2008, SQL Server 2005 and SQL Server 2000 databases.</span></span>  
  
    -   <span data-ttu-id="6316c-130">除了 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 数据库以外， [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 附带的这些工具可读取由 SQL Server 2008 R2 或 SQL Server 2012 附带的 DAC 工具生成的 DACPAC 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-130">In addition to [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] databases, the tools shipped with [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] can read DACPAC files generated by DAC tools shipped with SQL Server 2008 R2 or SQL Server 2012.</span></span> <span data-ttu-id="6316c-131">这包括 SQL Server 2012、SQL Server 2008 R2、SQL Server 2008 和 SQL Server 2005 中的数据库，但不包括 SQL Server 2000 中的数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-131">This includes databases from SQL Server 2012, SQL Server 2008 R2, SQL Server 2008, and SQL Server 2005, but not SQL Server 2000.</span></span>  
  
    -   <span data-ttu-id="6316c-132">SQL Server 2008 R2 中的 DAC 工具无法读取由 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 或  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]中的工具生成的 DACPAC 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-132">DAC tools from SQL Server 2008 R2 cannot read DACPAC files generated by tools from [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] or  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
-   <span data-ttu-id="6316c-133">DACPAC 是一个扩展名为 .dacpac 的 Windows 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-133">A DACPAC is a Windows file with a .dacpac extension.</span></span> <span data-ttu-id="6316c-134">该文件支持由表示 DACPAC 源的详细信息的多个 XML 部分、数据库中的对象和其他特征构成的开放格式。</span><span class="sxs-lookup"><span data-stu-id="6316c-134">The file supports an open format consisting of multiple XML sections representing details of the DACPAC origin, the objects in the database, and other characteristics.</span></span> <span data-ttu-id="6316c-135">高级用户可使用产品附带的 DacUnpack.exe 实用工具来解压缩该文件，以便更仔细地检查每个部分。</span><span class="sxs-lookup"><span data-stu-id="6316c-135">An advanced user can unpack the file using the DacUnpack.exe utility that ships with the product to inspect each section more closely.</span></span>  
  
-   <span data-ttu-id="6316c-136">用户必须是 dbmanager 角色的成员或分配了 CREATE DATABASE 权限才能创建数据库，包括通过部署 DAC 包来创建数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-136">The user must be a member of the dbmanager role or assigned CREATE DATABASE permissions to create a database, including creating a database by deploying a DAC package.</span></span> <span data-ttu-id="6316c-137">用户必须是 dbmanager 角色的成员或分配了 DROP DATABASE 权限才能删除数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-137">The user must be a member of the dbmanager role, or have been assigned DROP DATABASE permissions to drop a database.</span></span>  
  
## <a name="dac-tools"></a><span data-ttu-id="6316c-138">DAC 工具</span><span class="sxs-lookup"><span data-stu-id="6316c-138">DAC Tools</span></span>  
 <span data-ttu-id="6316c-139">可以在 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]附带的多个工具中无缝使用 DACPAC。</span><span class="sxs-lookup"><span data-stu-id="6316c-139">A DACPAC can be seamlessly used across multiple tools that ship with [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="6316c-140">这些工具可满足将 DACPAC 用作互操作性单元的各个用户角色的需求。</span><span class="sxs-lookup"><span data-stu-id="6316c-140">These tools address the requirements of different user personas using a DACPAC as the unit of interoperability.</span></span>  
  
-   <span data-ttu-id="6316c-141">应用程序开发人员</span><span class="sxs-lookup"><span data-stu-id="6316c-141">Application Developer</span></span>  
  
    -   <span data-ttu-id="6316c-142">数据库开发人员可以使用 SQL Server Data Tools 数据库项目来设计数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-142">A database developer can use a SQL Server Data Tools database project to design a database.</span></span> <span data-ttu-id="6316c-143">成功生成此项目会导致生成 .dacpac 文件中包含的 DACPAC。</span><span class="sxs-lookup"><span data-stu-id="6316c-143">A successful build of this project results in the generation of a DACPAC contained in a .dacpac file.</span></span>  
  
    -   <span data-ttu-id="6316c-144">此外，开发人员可以将 DACPAC 导入到数据库项目中，并继续设计数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-144">In addition, the developer can import a DACPAC into a database project and continue to design the database.</span></span>  
  
    -   <span data-ttu-id="6316c-145">SQL Server Data Tools 还支持本地 DB 以进行未连接的客户端数据库应用程序开发。</span><span class="sxs-lookup"><span data-stu-id="6316c-145">SQL Server Data Tools also supports a Local DB for unconnected, client-side database application development.</span></span> <span data-ttu-id="6316c-146">开发人员可以拍摄此本地数据库的快照以创建 .dacpac 文件中包含的 DACPAC。</span><span class="sxs-lookup"><span data-stu-id="6316c-146">The developer can take a snapshot of this local database to create DACPAC contained in a .dacpac file.</span></span>  
  
    -   <span data-ttu-id="6316c-147">开发人员可单独将一个数据库项目直接发布到数据库，甚至无需生成 DACPAC。</span><span class="sxs-lookup"><span data-stu-id="6316c-147">Independently, the developer can publish a database project directly to a database without even generating a DACPAC.</span></span> <span data-ttu-id="6316c-148">发布操作的行为与使用其他工具执行的部署操作的行为类似。</span><span class="sxs-lookup"><span data-stu-id="6316c-148">The publish operation follows similar behavior as the deploy operation from other tools.</span></span>  
  
-   <span data-ttu-id="6316c-149">数据库管理员</span><span class="sxs-lookup"><span data-stu-id="6316c-149">Database Administrator</span></span>  
  
    -   <span data-ttu-id="6316c-150">DBA 可使用 SQL Server Management Studio 从现有数据库中提取 DACPAC，并且可以执行其他 DAC 操作。</span><span class="sxs-lookup"><span data-stu-id="6316c-150">A DBA can use SQL Server Management Studio to extract a DACPAC from an existing database, and also perform other DAC operations.</span></span>  
  
    -   <span data-ttu-id="6316c-151">此外， [!INCLUDE[ssSDS](../../includes/sssds-md.md)] 的 DBA 可以使用 Management Portal for SQL Azure 进行 DAC 操作。</span><span class="sxs-lookup"><span data-stu-id="6316c-151">In addition, the DBA for a [!INCLUDE[ssSDS](../../includes/sssds-md.md)] can use the Management Portal for SQL Azure for DAC operations.</span></span>  
  
-   <span data-ttu-id="6316c-152">独立软件供应商</span><span class="sxs-lookup"><span data-stu-id="6316c-152">Independent Software Vendor</span></span>  
  
    -   <span data-ttu-id="6316c-153">托管服务和 SQL Server 的其他数据管理产品可以使用 DACFx API 来进行 DAC 操作。</span><span class="sxs-lookup"><span data-stu-id="6316c-153">Hosting services and other data management products for SQL Server can use the DACFx API for DAC operations.</span></span>  
  
-   <span data-ttu-id="6316c-154">IT 管理员</span><span class="sxs-lookup"><span data-stu-id="6316c-154">IT Administrator</span></span>  
  
    -   <span data-ttu-id="6316c-155">IT 系统集成者和管理员可以使用 SqlPackage.exe 命令行工具来进行 DAC 操作。</span><span class="sxs-lookup"><span data-stu-id="6316c-155">IT systems integrators and administrators can use the SqlPackage.exe command line tool for DAC operations.</span></span>  
  
## <a name="dac-operations"></a><span data-ttu-id="6316c-156">DAC 操作</span><span class="sxs-lookup"><span data-stu-id="6316c-156">DAC Operations</span></span>  
 <span data-ttu-id="6316c-157">DAC 支持以下操作：</span><span class="sxs-lookup"><span data-stu-id="6316c-157">A DAC supports the following operations:</span></span>  
  
-   <span data-ttu-id="6316c-158">**EXTRACT** - 用户可将数据库提取到 DACPAC 中。</span><span class="sxs-lookup"><span data-stu-id="6316c-158">**EXTRACT** - the user can extract a database into a DACPAC.</span></span>  
  
-   <span data-ttu-id="6316c-159">**DEPLOY** - 用户可将 DACPAC 部署到主机服务器。</span><span class="sxs-lookup"><span data-stu-id="6316c-159">**DEPLOY** - the user can deploy a DACPAC to a host server.</span></span> <span data-ttu-id="6316c-160">在通过可管理性工具（如 SQL Server Management Studio 或 Management Portal for SQL Azure）进行部署时，主机服务器中的结果数据库将隐式注册为数据层应用程序。</span><span class="sxs-lookup"><span data-stu-id="6316c-160">When the deployment is done from a manageability tool like SQL Server Management Studio or the Management Portal for SQL Azure, the resulting database in the host server is implicitly registered as a data-tier application.</span></span>  
  
-   <span data-ttu-id="6316c-161">**REGISTER** - 用户可以将数据库注册为数据层应用程序。</span><span class="sxs-lookup"><span data-stu-id="6316c-161">**REGISTER** - the user can register a database as a data-tier application.</span></span>  
  
-   <span data-ttu-id="6316c-162">**UNREGISTER** - 可以注销之前注册为 DAC 的数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-162">**UNREGISTER** - a database previously registered as a DAC can be unregistered.</span></span>  
  
-   <span data-ttu-id="6316c-163">**UPGRADE** - 可以使用 DACPAC 升级数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-163">**UPGRADE** - a database can be upgraded using a DACPAC.</span></span> <span data-ttu-id="6316c-164">甚至在之前未注册为数据层应用程序的数据库上也支持升级操作，但升级操作的结果是，将隐式注册数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-164">Upgrade is supported even on databases that are not previously registered as data-tier applications, but as a consequence of the upgrade, the database will be implicitly registered.</span></span>  
  
## <a name="backup-package-bacpac"></a><span data-ttu-id="6316c-165">备份包 (.bacpac)</span><span class="sxs-lookup"><span data-stu-id="6316c-165">Backup Package (.bacpac)</span></span>  
 <span data-ttu-id="6316c-166">BACPAC 是一个封装数据库架构以及数据库中存储的数据的项目。</span><span class="sxs-lookup"><span data-stu-id="6316c-166">A BACPAC is an artifact that encapsulates the database schema as well as the data stored in the database.</span></span> <span data-ttu-id="6316c-167">BACPAC 是一个扩展名为 .bacpac 的 Windows 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-167">The BACPAC is a Windows file with a .bacpac extension.</span></span> <span data-ttu-id="6316c-168">与 DACPAC 类似，BACPAC 文件是开放的 - BACPAC 的架构内容与 DACPAC 的架构内容相同。</span><span class="sxs-lookup"><span data-stu-id="6316c-168">Similar to the DACPAC, the BACPAC file format is open - the schema contents of the BACPAC are identical to that of the DACPAC.</span></span> <span data-ttu-id="6316c-169">数据是以 JSON 格式存储的。</span><span class="sxs-lookup"><span data-stu-id="6316c-169">The data is stored in JSON format.</span></span>  
  
 <span data-ttu-id="6316c-170">虽然 DACPAC 和 BACPAC 相似，但它们面向的方案不同。</span><span class="sxs-lookup"><span data-stu-id="6316c-170">DACPAC and BACPAC are similar but they target different scenarios.</span></span> <span data-ttu-id="6316c-171">DACPAC 侧重于捕获和部署架构，包括升级现有数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-171">A DACPAC is focused on capturing and deploying schema, including upgrading an existing database.</span></span> <span data-ttu-id="6316c-172">DACPAC 的主要用例是将严格定义的架构部署到开发、测试和生产环境，反之亦然：捕获生产的架构并将其应用于测试和开发环境。</span><span class="sxs-lookup"><span data-stu-id="6316c-172">The primary use case for a DACPAC is to deploy a tightly defined schema to development, test, and then production environments, and the reverse: capturing production's schema and applying it to back to test and development environments.</span></span>  
  
 <span data-ttu-id="6316c-173">另一方面，BACPAC 侧重于捕获架构和数据。</span><span class="sxs-lookup"><span data-stu-id="6316c-173">A BACPAC, on the other hand, is focused on capturing schema and data.</span></span> <span data-ttu-id="6316c-174">BACPAC 是数据库备份的逻辑等效项，且不能用来升级现有数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-174">A BACPAC is the logical equivalent of a database backup and cannot be used to upgrade existing databases.</span></span> <span data-ttu-id="6316c-175">BACPAC 的主要用例是，将数据库从一台服务器移动到另一台服务器（或从本地服务器移动到云），并以开放格式对现有数据库进行存档。</span><span class="sxs-lookup"><span data-stu-id="6316c-175">The primary use case for a BACPAC is to move a database from one server to another - or from a local server to the cloud - and archiving an existing database in an open format.</span></span>  
  
 <span data-ttu-id="6316c-176">BACPAC 支持两个主要操作：</span><span class="sxs-lookup"><span data-stu-id="6316c-176">A BACPAC supports two main operations:</span></span>  
  
-   <span data-ttu-id="6316c-177">**EXPORT** - 用户可以将数据库的架构和数据导出到 BACPAC。</span><span class="sxs-lookup"><span data-stu-id="6316c-177">**EXPORT**- The user can export the schema and the data of a database to a BACPAC.</span></span>  
  
-   <span data-ttu-id="6316c-178">**IMPORT** - 用户可以将架构和数据导入到主机服务器上的新数据库中。</span><span class="sxs-lookup"><span data-stu-id="6316c-178">**IMPORT** - The user can import the schema and the data into a new database in the host server.</span></span>  
  
 <span data-ttu-id="6316c-179">数据库管理工具 Server Management Studio、Management Portal for SQL Azure 和 DACFx API 支持这两种功能。</span><span class="sxs-lookup"><span data-stu-id="6316c-179">Both these capabilities are supported by the database management tools: Server Management Studio, the Management Portal for SQL Azure, and the DACFx API.</span></span>  
  
## <a name="permissions"></a><span data-ttu-id="6316c-180">权限</span><span class="sxs-lookup"><span data-stu-id="6316c-180">Permissions</span></span>  
 <span data-ttu-id="6316c-181">用户必须是 `dbmanager` 角色的成员或分配了 `CREATE DATABASE` 权限才能创建数据库，包括通过部署 DAC 包来创建数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-181">You must be a member of the `dbmanager` role or assigned `CREATE DATABASE` permissions to create a database, including creating a database by deploying a DAC package.</span></span> <span data-ttu-id="6316c-182">用户必须是 `dbmanager` 角色的成员或分配了 `DROP DATABASE` 权限才能删除数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-182">You must be a member of the `dbmanager` role, or have been assigned `DROP DATABASE` permissions to drop a database.</span></span>  
  
## <a name="data-tier-application-tasks"></a><span data-ttu-id="6316c-183">数据层应用程序任务</span><span class="sxs-lookup"><span data-stu-id="6316c-183">Data-tier Application Tasks</span></span>  
  
|<span data-ttu-id="6316c-184">任务说明</span><span class="sxs-lookup"><span data-stu-id="6316c-184">Task Description</span></span>|<span data-ttu-id="6316c-185">主题</span><span class="sxs-lookup"><span data-stu-id="6316c-185">Topic</span></span>|  
|----------------------|-----------|  
|<span data-ttu-id="6316c-186">介绍如何使用 DAC 包文件创建一个新的 DAC 实例。</span><span class="sxs-lookup"><span data-stu-id="6316c-186">Describes how to use a DAC package file to create a new DAC instance.</span></span>|[<span data-ttu-id="6316c-187">部署数据层应用程序</span><span class="sxs-lookup"><span data-stu-id="6316c-187">Deploy a Data-tier Application</span></span>](deploy-a-data-tier-application.md)|  
|<span data-ttu-id="6316c-188">介绍如何使用新的 DAC 包文件将某一实例升级到该 DAC 的新版本。</span><span class="sxs-lookup"><span data-stu-id="6316c-188">Describes how to use a new DAC package file to upgrade an instance to a new version of the DAC.</span></span>|[<span data-ttu-id="6316c-189">升级数据层应用程序</span><span class="sxs-lookup"><span data-stu-id="6316c-189">Upgrade a Data-tier Application</span></span>](upgrade-a-data-tier-application.md)|  
|<span data-ttu-id="6316c-190">介绍如何删除 DAC 实例。</span><span class="sxs-lookup"><span data-stu-id="6316c-190">Describes how to remove a DAC instance.</span></span> <span data-ttu-id="6316c-191">您还可以选择是分离或删除关联数据库，还是保持数据库不变。</span><span class="sxs-lookup"><span data-stu-id="6316c-191">You can choose to also detach or drop the associated database, or leave the database intact.</span></span>|[<span data-ttu-id="6316c-192">删除数据层应用程序</span><span class="sxs-lookup"><span data-stu-id="6316c-192">Delete a Data-tier Application</span></span>](delete-a-data-tier-application.md)|  
|<span data-ttu-id="6316c-193">介绍如何使用 SQL Server 实用工具查看当前部署的 DAC 的运行状况。</span><span class="sxs-lookup"><span data-stu-id="6316c-193">Describes how to view the health of currently deployed DACs by using the SQL Server Utility.</span></span>|[<span data-ttu-id="6316c-194">监视数据层应用程序</span><span class="sxs-lookup"><span data-stu-id="6316c-194">Monitor Data-tier Applications</span></span>](data-tier-applications.md)|  
|<span data-ttu-id="6316c-195">介绍如何创建包含 DAC 中数据和元数据的存档的 .bacpac 文件。</span><span class="sxs-lookup"><span data-stu-id="6316c-195">Describes how to create a .bacpac file that contains an archive of the data and metadata in a DAC.</span></span>|[<span data-ttu-id="6316c-196">导出数据层应用程序</span><span class="sxs-lookup"><span data-stu-id="6316c-196">Export a Data-tier Application</span></span>](export-a-data-tier-application.md)|  
|<span data-ttu-id="6316c-197">介绍如何使用 DAC 存档文件 (.bacpac) 来执行 DAC 的逻辑还原，或者将 DAC 迁移到其他[!INCLUDE[ssDE](../../includes/ssde-md.md)]或 [!INCLUDE[ssSDS](../../includes/sssds-md.md)] 实例。</span><span class="sxs-lookup"><span data-stu-id="6316c-197">Describes how to use a DAC archive file (.bacpac) to either perform a logical restore of a DAC, or to migrate the DAC to another instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] or [!INCLUDE[ssSDS](../../includes/sssds-md.md)].</span></span>|[<span data-ttu-id="6316c-198">导入 BACPAC 文件以创建新的用户数据库</span><span class="sxs-lookup"><span data-stu-id="6316c-198">Import a BACPAC File to Create a New User Database</span></span>](import-a-bacpac-file-to-create-a-new-user-database.md)|  
|<span data-ttu-id="6316c-199">介绍如何导入 BACPAC 文件来在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例中创建新的用户数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-199">Describes how to import a BACPAC file to create a new user database within an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|[<span data-ttu-id="6316c-200">从数据库中提取 DAC</span><span class="sxs-lookup"><span data-stu-id="6316c-200">Extract a DAC From a Database</span></span>](extract-a-dac-from-a-database.md)|  
|<span data-ttu-id="6316c-201">介绍如何将现有数据库提升为 DAC 实例。</span><span class="sxs-lookup"><span data-stu-id="6316c-201">Describes how to promote an existing database to be a DAC instance.</span></span> <span data-ttu-id="6316c-202">DAC 定义将生成并存储于系统数据库中。</span><span class="sxs-lookup"><span data-stu-id="6316c-202">A DAC definition is built and stored in the system databases.</span></span>|[<span data-ttu-id="6316c-203">将数据库注册为 DAC</span><span class="sxs-lookup"><span data-stu-id="6316c-203">Register a Database As a DAC</span></span>](register-a-database-as-a-dac.md)|  
|<span data-ttu-id="6316c-204">介绍如何查看 DAC 包的内容以及在生产系统中使用该包之前 DAC 升级将执行的操作。</span><span class="sxs-lookup"><span data-stu-id="6316c-204">Describes how to review the contents of a DAC package and the actions a DAC upgrade will perform before using the package in a production system.</span></span>|[<span data-ttu-id="6316c-205">验证 DAC 包</span><span class="sxs-lookup"><span data-stu-id="6316c-205">Validate a DAC Package</span></span>](validate-a-dac-package.md)|  
|<span data-ttu-id="6316c-206">介绍如何将 DAC 包的内容放置于一个文件夹中，数据库管理员可以查看该文件夹，以便在将该 DAC 部署到生产服务器之前查看其内容。</span><span class="sxs-lookup"><span data-stu-id="6316c-206">Describes how to place the contents of a DAC package into a folder where a database administrator can review what the DAC does before deploying it to a production server.</span></span>|[<span data-ttu-id="6316c-207">解压缩 DAC 包</span><span class="sxs-lookup"><span data-stu-id="6316c-207">Unpack a DAC Package</span></span>](unpack-a-dac-package.md)|  
|<span data-ttu-id="6316c-208">介绍如何使用向导部署现有数据库。</span><span class="sxs-lookup"><span data-stu-id="6316c-208">Describes how to use a wizard to deploy an existing database.</span></span> <span data-ttu-id="6316c-209">此向导使用 DAC 执行部署。</span><span class="sxs-lookup"><span data-stu-id="6316c-209">The wizard uses DACs to perform the deployment.</span></span>|[<span data-ttu-id="6316c-210">使用 DAC 部署数据库</span><span class="sxs-lookup"><span data-stu-id="6316c-210">Deploy a Database By Using a DAC</span></span>](deploy-a-database-by-using-a-dac.md)|  
  
## <a name="see-also"></a><span data-ttu-id="6316c-211">另请参阅</span><span class="sxs-lookup"><span data-stu-id="6316c-211">See Also</span></span>  
 [<span data-ttu-id="6316c-212">对 SQL Server 对象和版本的 DAC 支持</span><span class="sxs-lookup"><span data-stu-id="6316c-212">DAC Support For SQL Server Objects and Versions</span></span>](dac-support-for-sql-server-objects-and-versions.md)  
  
  
