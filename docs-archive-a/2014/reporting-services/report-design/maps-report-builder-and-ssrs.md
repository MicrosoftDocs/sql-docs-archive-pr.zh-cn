---
title: 地图（报表生成器和 SSRS）| Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
f1_keywords:
- sql12.rtp.rptdesigner.mapproperties.general.f1
- "10508"
- MICROSOFT.REPORTDESIGNER.MAPBINDINGFIELDPAIR.FIELDNAME
- sql12.rtp.rptdesigner.maptitleproperties.general.f1
- MICROSOFT.REPORTDESIGNER.MAPPOLYGON.CENTERPOINTTEMPLATE
- "10500"
ms.assetid: b5e9ef21-11b7-4ed2-838e-d8eecdb5c5f0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: b599d1de3f0f400f9f3df0f1e993a240173fc776
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87691080"
---
# <a name="maps-report-builder-and-ssrs"></a><span data-ttu-id="99443-102">地图（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-102">Maps (Report Builder and SSRS)</span></span>
  <span data-ttu-id="99443-103">若要针对地理背景实现业务数据的可视化，您可以向报表添加地图。</span><span class="sxs-lookup"><span data-stu-id="99443-103">To visualize business data against a geographical background, you can add a map to your report.</span></span> <span data-ttu-id="99443-104">您选择的地图类型取决于您要在报表中传达的信息。</span><span class="sxs-lookup"><span data-stu-id="99443-104">The type of map that you select depends on what information that you want to communicate in your report.</span></span> <span data-ttu-id="99443-105">您可以添加只显示位置的地图、气泡地图（气泡大小随着某地区的家庭数量而变化）、标记地图（标记样式随每个商店盈利情况最好的产品而变化）或线条地图（显示商店之间的路线）。</span><span class="sxs-lookup"><span data-stu-id="99443-105">You can add a map that displays locations only, or a bubble map that varies bubble size based on number of households for an area, or a marker map that varies marker style based on the most profitable product for each store, or a line map that displays routes between stores.</span></span>  
  
 <span data-ttu-id="99443-106">地图包含标题、指定中心点和刻度的视区、一个用于视区的最佳 Bing 地图图块背景、一个或多个显示空间数据的层以及各种帮助用户解释数据可视化效果的图例。</span><span class="sxs-lookup"><span data-stu-id="99443-106">A map contains a title, a viewport that specifies the center point and scale, an optional Bing map tile background for the viewport, one or more layers that display spatial data, and a variety of legends that help users interpret the data visualizations.</span></span> <span data-ttu-id="99443-107">下图显示了地图的基本组成部分。</span><span class="sxs-lookup"><span data-stu-id="99443-107">The following illustration shows the basic parts of a map.</span></span>  
  
 <span data-ttu-id="99443-108">![rs_MapElements](../media/rs-mapelements.gif "rs_MapElements")</span><span class="sxs-lookup"><span data-stu-id="99443-108">![rs_MapElements](../media/rs-mapelements.gif "rs_MapElements")</span></span>  
  
 <span data-ttu-id="99443-109">若要立即开始使用地图，请参阅[教程：地图报表（报表生成器）](../tutorial-map-report-report-builder.md)或[报表示例（报表生成器和 SSRS）](https://go.microsoft.com/fwlink/?LinkId=198283)。</span><span class="sxs-lookup"><span data-stu-id="99443-109">To start to use a map immediately, see [Tutorial: Map Report &#40;Report Builder&#41;](../tutorial-map-report-report-builder.md) or [Report Samples (Report Builder and SSRS)](https://go.microsoft.com/fwlink/?LinkId=198283).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="99443-110">您可以将地图作为报表部件与报表分开保存。</span><span class="sxs-lookup"><span data-stu-id="99443-110">You can save maps separately from a report as report parts.</span></span>  [!INCLUDE[ssRBrptparts](../../includes/ssrbrptparts-md.md)]  
  
> [!NOTE]  
>  [!INCLUDE[ssRBRDDup](../../includes/ssrbrddup-md.md)]  
  
##  <a name="adding-a-map-to-your-report"></a><a name="Process"></a> <span data-ttu-id="99443-111">向报表添加地图</span><span class="sxs-lookup"><span data-stu-id="99443-111">Adding a Map to Your Report</span></span>  
 <span data-ttu-id="99443-112">若要将地图添加到报表，请参阅下面给出的一般步骤列表：</span><span class="sxs-lookup"><span data-stu-id="99443-112">To add a map to your report, here is a list of the general steps to follow:</span></span>  
  
-   <span data-ttu-id="99443-113">确定您要显示哪些分析数据以及您需要哪些类型的空间数据。</span><span class="sxs-lookup"><span data-stu-id="99443-113">Determine which analytical data that you want to display and what types of spatial data that you need.</span></span> <span data-ttu-id="99443-114">例如，若要在气泡图上显示相关的商店年销售额，您需要用于分析数据的商店名称和商店销售额以及用于空间数据的商店名称和商店位置（如经度和纬度）。</span><span class="sxs-lookup"><span data-stu-id="99443-114">For example, to display relative annual store sales on a bubble map, you need store name and store sales for analytical data and store name and store location as latitude and longitude for spatial data.</span></span>  
  
-   <span data-ttu-id="99443-115">决定您所需的地图样式。</span><span class="sxs-lookup"><span data-stu-id="99443-115">Decide on the style of map you want.</span></span> <span data-ttu-id="99443-116">基本图只显示位置。</span><span class="sxs-lookup"><span data-stu-id="99443-116">Basic maps display locations only.</span></span> <span data-ttu-id="99443-117">气泡图的气泡大小根据单个分析值而发生变化。</span><span class="sxs-lookup"><span data-stu-id="99443-117">Bubble maps vary bubble size based on a single analytical value.</span></span> <span data-ttu-id="99443-118">分析颜色图的地图元素随着分析数据的范围而发生变化。</span><span class="sxs-lookup"><span data-stu-id="99443-118">Analytical color maps vary map elements based on ranges of analytical data.</span></span> <span data-ttu-id="99443-119">您选择的样式同时取决于您要实现可视化的数据和您使用的空间数据的类型。</span><span class="sxs-lookup"><span data-stu-id="99443-119">The style that you select depends both on the data that you want to visualize and the type of spatial data that you use.</span></span>  
  
-   <span data-ttu-id="99443-120">收集您指定空间数据源、空间数据、分析数据源和分析数据所必须具有的信息。</span><span class="sxs-lookup"><span data-stu-id="99443-120">Collect the information that you must have to specify spatial data sources, spatial data, analytical data sources, and analytical data.</span></span> <span data-ttu-id="99443-121">这包括到空间数据源的连接字符串，指定您所需的空间数据类型，以及确保报表数据包含将空间数据与分析数据关联起来的匹配字段。</span><span class="sxs-lookup"><span data-stu-id="99443-121">This includes connection strings to spatial data sources, specifying the type of spatial data that you need, and making sure that your report data includes match fields that associate the spatial data and analytical data.</span></span>  
  
-   <span data-ttu-id="99443-122">运行地图向导以便向报表中添加地图。</span><span class="sxs-lookup"><span data-stu-id="99443-122">Run the Map wizard to add a map to your report.</span></span> <span data-ttu-id="99443-123">这可以将第一个地图层添加到地图。</span><span class="sxs-lookup"><span data-stu-id="99443-123">This adds the first map layer to the map.</span></span> <span data-ttu-id="99443-124">运行地图层向导以创建其他层或者修改现有层。</span><span class="sxs-lookup"><span data-stu-id="99443-124">Run the Map Layer wizard to create additional layers or modify existing layers.</span></span> <span data-ttu-id="99443-125">这些向导提供了简单的方法供您开始。</span><span class="sxs-lookup"><span data-stu-id="99443-125">The wizards provide an easy way to get started.</span></span> <span data-ttu-id="99443-126">有关详细信息，请参阅 [地图向导和地图层向导（报表生成器和 SSRS）](map-wizard-and-map-layer-wizard-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-126">For more information, see [Map Wizard and Map Layer Wizard &#40;Report Builder and SSRS&#41;](map-wizard-and-map-layer-wizard-report-builder-and-ssrs.md).</span></span>  
  
-   <span data-ttu-id="99443-127">当您在报表中预览地图之后，您可能要调整地图视图，更改数据改变每层显示的方式，提供图例以帮助用户解释数据，以及调整分辨率来为用户提供良好的查看体验。</span><span class="sxs-lookup"><span data-stu-id="99443-127">After you preview the map in your report, you will probably want to adjust the map view, change the way your data varies the display of each layer, provide legends to help your users interpret the data, and adjust the resolution to provide a good viewing experience for your users.</span></span>  
  
 <span data-ttu-id="99443-128">有关详细信息，请参阅 [规划地图报表（报表生成器和 SSRS）](plan-a-map-report-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-128">For more information, see [Plan a Map Report &#40;Report Builder and SSRS&#41;](plan-a-map-report-report-builder-and-ssrs.md).</span></span>  
  

  
##  <a name="adding-data-to-a-map"></a><a name="AddingData"></a> <span data-ttu-id="99443-129">向地图添加数据</span><span class="sxs-lookup"><span data-stu-id="99443-129">Adding Data to a Map</span></span>  
 <span data-ttu-id="99443-130">地图使用两类数据：空间数据和分析数据。</span><span class="sxs-lookup"><span data-stu-id="99443-130">A map uses two types of data: spatial data and analytical data.</span></span> <span data-ttu-id="99443-131">空间数据定义地图的外观，而分析数据提供与地图关联的值。</span><span class="sxs-lookup"><span data-stu-id="99443-131">Spatial data defines the appearance of the map whereas analytical data provides the values that are associated with the map.</span></span> <span data-ttu-id="99443-132">例如，空间数据定义某个地区中各市县的位置，而分析数据提供每个市县的人口数。</span><span class="sxs-lookup"><span data-stu-id="99443-132">For example, spatial data defines the locations of cities in an area whereas analytical data provides the population for each city.</span></span>  
  
 <span data-ttu-id="99443-133">地图必须具有空间数据；分析数据是可选的。</span><span class="sxs-lookup"><span data-stu-id="99443-133">A map must have spatial data; analytical data is optional.</span></span> <span data-ttu-id="99443-134">例如，您可以添加一个地图，该地图只显示某个市县的商店位置。</span><span class="sxs-lookup"><span data-stu-id="99443-134">For example, you can add a map that displays just store locations in a city.</span></span>  
  
 <span data-ttu-id="99443-135">若要对地图上的数据实现可视化效果，分析数据与空间数据必须具有某种关系。</span><span class="sxs-lookup"><span data-stu-id="99443-135">To visualize data on a map, the analytical data and the spatial data must have a relationship.</span></span> <span data-ttu-id="99443-136">当空间数据和分析数据来自同一个源时，关系是已知的。</span><span class="sxs-lookup"><span data-stu-id="99443-136">When the spatial data and the analytical data come from the same source, the relationship is known.</span></span> <span data-ttu-id="99443-137">当空间数据和分析数据来自不同源时，必须指定匹配字段以使它们相关。</span><span class="sxs-lookup"><span data-stu-id="99443-137">When the spatial data and the analytical data come from different sources, you must specify match fields to relate them.</span></span>  
  
### <a name="spatial-data"></a><span data-ttu-id="99443-138">空间数据</span><span class="sxs-lookup"><span data-stu-id="99443-138">Spatial Data</span></span>  
 <span data-ttu-id="99443-139">空间数据由一系列坐标组成。</span><span class="sxs-lookup"><span data-stu-id="99443-139">Spatial data consists of sets of coordinates.</span></span> <span data-ttu-id="99443-140">来自数据源的空间数据可以是单个点、多个点、单一线条、多个线条或一组多边形。</span><span class="sxs-lookup"><span data-stu-id="99443-140">Spatial data from a data source can be a single point, multiple points, a single line, multiple lines, or a set of polygons.</span></span> <span data-ttu-id="99443-141">每组坐标定义一个“地图元素” \*\*，例如，表示国家/地区轮廓的多边形、表示道路的线条或表示市县所在位置的点。</span><span class="sxs-lookup"><span data-stu-id="99443-141">Each set of coordinates defines a *map element*, for example, a polygon that represents the outline of a county, a line that represents a road, or a point that represents the location of a city.</span></span>  
  
 <span data-ttu-id="99443-142">空间数据基于以下坐标系之一：</span><span class="sxs-lookup"><span data-stu-id="99443-142">Spatial data is based on one of the following coordinate systems:</span></span>  
  
-   <span data-ttu-id="99443-143">**地理** ：通过使用经度和纬度，在球面上指定测地学坐标。</span><span class="sxs-lookup"><span data-stu-id="99443-143">**Geographic** Specifies geodesic coordinates on a spherical surface by using longitude and latitude.</span></span> <span data-ttu-id="99443-144">当空间数据为地理坐标时，必须指定投影。</span><span class="sxs-lookup"><span data-stu-id="99443-144">When spatial data is geographic, a projection must be specified.</span></span> <span data-ttu-id="99443-145">投影是一系列规则，用于指定如何将具有球坐标的物体绘制到平面上。</span><span class="sxs-lookup"><span data-stu-id="99443-145">A projection is a set of rules that specifies how to draw objects that have spherical coordinates onto a planar surface.</span></span> <span data-ttu-id="99443-146">只能比较或组合具有相同投影的地理数据。</span><span class="sxs-lookup"><span data-stu-id="99443-146">Only geographic data with the same projection can be compared or combined.</span></span>  
  
-   <span data-ttu-id="99443-147">**平面数据** ：通过使用 X 和 Y，在平面上指定几何坐标。</span><span class="sxs-lookup"><span data-stu-id="99443-147">**Planar** Specifies geometric coordinates on a planar surface by using X and Y.</span></span>  
  
 <span data-ttu-id="99443-148">每个地图层都显示一种类型的空间数据：多边形、线条或点。</span><span class="sxs-lookup"><span data-stu-id="99443-148">Each map layer displays one type of spatial data: polygons, lines, or points.</span></span> <span data-ttu-id="99443-149">若要显示多种类型的空间数据，请向地图添加多个层。</span><span class="sxs-lookup"><span data-stu-id="99443-149">To display multiple types of spatial data, add multiple layers to the map.</span></span> <span data-ttu-id="99443-150">还可以添加由 Microsoft Bing 地图图块组成的层。</span><span class="sxs-lookup"><span data-stu-id="99443-150">You can also add a layer of Microsoft Bing map tiles.</span></span> <span data-ttu-id="99443-151">图块层不依赖于空间数据。</span><span class="sxs-lookup"><span data-stu-id="99443-151">The tile layer does not depend on spatial data.</span></span> <span data-ttu-id="99443-152">图块层显示与地图视区的坐标相对应的图像图块。</span><span class="sxs-lookup"><span data-stu-id="99443-152">The tile layer displays image tiles that correspond to the coordinates of the map viewport.</span></span>  
  
#### <a name="sources-of-spatial-data"></a><span data-ttu-id="99443-153">空间数据的来源</span><span class="sxs-lookup"><span data-stu-id="99443-153">Sources of Spatial Data</span></span>  
 <span data-ttu-id="99443-154">支持以下空间数据源：</span><span class="sxs-lookup"><span data-stu-id="99443-154">The following sources of spatial data are supported:</span></span>  
  
-   <span data-ttu-id="99443-155">**地图库报表。**</span><span class="sxs-lookup"><span data-stu-id="99443-155">**Map Gallery reports.**</span></span> <span data-ttu-id="99443-156">空间数据嵌入在位于地图库中的报表内。</span><span class="sxs-lookup"><span data-stu-id="99443-156">Spatial data is embedded in reports located in the map gallery.</span></span> <span data-ttu-id="99443-157">默认情况下，地图库安装在 *\<drive>* ： \Program FILES\MICROSOFT SQL Server\Report Builder \mapgallery。中。</span><span class="sxs-lookup"><span data-stu-id="99443-157">By default, the Map Gallery is installed in *\<drive>*:\Program Files\Microsoft SQL Server\Report Builder \MapGallery.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="99443-158">这 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 种映射功能使用 TIGER/Line 形状文件提供的数据， ([http://www.census.gov/](http://www.census.gov/)) 。</span><span class="sxs-lookup"><span data-stu-id="99443-158">This [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] mapping feature uses data from TIGER/Line Shapefiles provided courtesy of the U.S. Census Bureau ([http://www.census.gov/](http://www.census.gov/)).</span></span> <span data-ttu-id="99443-159">TIGER/Line 形状文件是从 Census MAF/TIGER 数据库中精选的地理和制图信息的摘录。</span><span class="sxs-lookup"><span data-stu-id="99443-159">TIGER/Line Shapefiles are an extract of selected geographic and cartographic information from the Census MAF/TIGER database.</span></span> <span data-ttu-id="99443-160">TIGER/Line 形状文件可以从美国人口普查局免费获得。</span><span class="sxs-lookup"><span data-stu-id="99443-160">TIGER/Line Shapefiles are available without charge from the U.S. Census Bureau.</span></span> <span data-ttu-id="99443-161">若要获取关于 TIGER/Line 形状文件的详细信息，请转到 [TIGER/Line 形状文件和 TIGER/Line 文件技术文档](https://www.census.gov/programs-surveys/geography/technical-documentation/complete-technical-documentation/tiger-geo-line.html)。</span><span class="sxs-lookup"><span data-stu-id="99443-161">To obtain more information about the TIGER/Line Shapefiles go to [TIGER/Line Shapefiles and TIGER/Line Files Technical Documentation](https://www.census.gov/programs-surveys/geography/technical-documentation/complete-technical-documentation/tiger-geo-line.html).</span></span> <span data-ttu-id="99443-162">TIGER/Line 形状文件中的边界信息仅用于统计数据收集和制表目的；其中用于统计目的的描述和名称不构成对于司法机构、所有权或享有权利的界定，它们不是法律上关于领土的说明。</span><span class="sxs-lookup"><span data-stu-id="99443-162">The boundary information in the TIGER/Line Shapefiles are for statistical data collection and tabulation purposes only; their depiction and designation for statistical purposes does not constitute a determination of jurisdictional authority or rights of ownership or entitlement and they are not legal land descriptions.</span></span> <span data-ttu-id="99443-163">Census TIGER 和 TIGER/Line 是美国人口普查局的注册商标。</span><span class="sxs-lookup"><span data-stu-id="99443-163">Census TIGER and TIGER/Line are registered trademarks of the U.S. Bureau of the Census.</span></span>  
  
-   <span data-ttu-id="99443-164">**ESRI 形状文件。**</span><span class="sxs-lookup"><span data-stu-id="99443-164">**ESRI Shapefiles.**</span></span> <span data-ttu-id="99443-165">ESRI 形状文件包含符合 Environmental Systems Research Institute, Inc. (ESRI) 形状文件空间数据格式的数据。</span><span class="sxs-lookup"><span data-stu-id="99443-165">ESRI Shapefiles contain data that complies with the Environmental Systems Research Institute, Inc. (ESRI) Shapefile spatial data format.</span></span> <span data-ttu-id="99443-166">ESRI 形状文件指一组文件。</span><span class="sxs-lookup"><span data-stu-id="99443-166">ESRI Shapefiles refer to a set of files.</span></span> <span data-ttu-id="99443-167">.shp 文件中的数据指定地理或几何形状。</span><span class="sxs-lookup"><span data-stu-id="99443-167">Data in the .shp file specifies the geographical or geometrical shapes.</span></span> <span data-ttu-id="99443-168">.dbf 文件中的数据提供形状的属性。</span><span class="sxs-lookup"><span data-stu-id="99443-168">Data in the .dbf file provides attributes for the shapes.</span></span> <span data-ttu-id="99443-169">若要在设计视图中查看地图或从报表服务器运行地图，这两个文件必须位于同一个文件夹中。</span><span class="sxs-lookup"><span data-stu-id="99443-169">To view a map in design view or to run a map from the report server, both files must be in the same folder.</span></span> <span data-ttu-id="99443-170">当您从本地文件系统上的 .shp 文件添加空间数据时，空间数据将嵌入到报表中。</span><span class="sxs-lookup"><span data-stu-id="99443-170">When you add spatial data from a .shp file on your local file system, the spatial data is embedded in your report.</span></span> <span data-ttu-id="99443-171">若要在运行时动态检索空间数据，请将形状文件上载到您的报表服务器中，然后将它们指定为空间数据源。</span><span class="sxs-lookup"><span data-stu-id="99443-171">To retrieve spatial data dynamically at run time, upload the Shapefiles to your report server, and then specify them as the source for spatial data.</span></span> <span data-ttu-id="99443-172">有关详细信息，请参阅 [Finding ESRI Shapefiles for a Map](https://go.microsoft.com/fwlink/?linkid=178814)（查找用于地图的 ESRI 形状文件）。</span><span class="sxs-lookup"><span data-stu-id="99443-172">For more information, see [Finding ESRI Shapefiles for a Map](https://go.microsoft.com/fwlink/?linkid=178814).</span></span>  
  
-   <span data-ttu-id="99443-173">**存储在数据库中的 SQL Server 空间数据。**</span><span class="sxs-lookup"><span data-stu-id="99443-173">**SQL Server spatial data stored in a database.**</span></span> <span data-ttu-id="99443-174">您可以使用一个查询，该查询从 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 关系数据库中指定 `SQLGeometry` 或 `SQLGeography` 数据类型。</span><span class="sxs-lookup"><span data-stu-id="99443-174">You can use a query that specifies `SQLGeometry` or `SQLGeography` data types from a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] relational database.</span></span> <span data-ttu-id="99443-175">有关详细信息，请参阅 [SQL Server 联机丛书](../../relational-databases/spatial/spatial-data-types-overview.md) 中的 [空间数据类型概述](https://go.microsoft.com/fwlink/?linkid=98335)。</span><span class="sxs-lookup"><span data-stu-id="99443-175">For more information, see [Spatial Data Types Overview](../../relational-databases/spatial/spatial-data-types-overview.md) in [SQL Server Books Online](https://go.microsoft.com/fwlink/?linkid=98335).</span></span>  
  
     <span data-ttu-id="99443-176">在您从查询设计器中看到的结果集中，每行空间数据都被视为一个单位并存储在单个地图元素中。</span><span class="sxs-lookup"><span data-stu-id="99443-176">In the result set that you see in the query designer, each row of spatial data is treated as a unit and stored in a single map element.</span></span> <span data-ttu-id="99443-177">例如，如果多个点是在结果集的一行中定义的，则显示属性将应用于该地图元素中的所有点。</span><span class="sxs-lookup"><span data-stu-id="99443-177">For example, if there are multiple points that are defined in one row in the result set, display properties apply to all points in that map element.</span></span>  
  
-   <span data-ttu-id="99443-178">**您创建的自定义位置。**</span><span class="sxs-lookup"><span data-stu-id="99443-178">**Custom locations that you create.**</span></span> <span data-ttu-id="99443-179">可以手动将位置作为嵌入点添加到嵌入点层。</span><span class="sxs-lookup"><span data-stu-id="99443-179">You can manually add locations as embedded points to an embedded point layer.</span></span> <span data-ttu-id="99443-180">有关详细信息，请参阅 [向地图添加自定义位置（报表生成器和 SSRS）](add-custom-locations-to-a-map-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-180">For more information, see [Add Custom Locations to a Map &#40;Report Builder and SSRS&#41;](add-custom-locations-to-a-map-report-builder-and-ssrs.md).</span></span>  
  
#### <a name="spatial-data-in-design-view"></a><span data-ttu-id="99443-181">设计视图中的空间数据</span><span class="sxs-lookup"><span data-stu-id="99443-181">Spatial Data in Design View</span></span>  
 <span data-ttu-id="99443-182">在设计视图中，报表处理器显示示例空间数据，以帮助您设计地图层。</span><span class="sxs-lookup"><span data-stu-id="99443-182">In Design view, the report processor displays sample spatial data to help you design the map layer.</span></span> <span data-ttu-id="99443-183">您看到的数据取决于空间数据的可用性：</span><span class="sxs-lookup"><span data-stu-id="99443-183">The data that you see depends on the availability of the spatial data:</span></span>  
  
-   <span data-ttu-id="99443-184">**嵌入的数据。**</span><span class="sxs-lookup"><span data-stu-id="99443-184">**Embedded data.**</span></span> <span data-ttu-id="99443-185">从嵌入报表的地图层中的地图元素检索示例数据。</span><span class="sxs-lookup"><span data-stu-id="99443-185">The sample data is retrieved from map elements embedded in map layers in your report.</span></span>  
  
-   <span data-ttu-id="99443-186">**链接到 ESRI 形状文件。**</span><span class="sxs-lookup"><span data-stu-id="99443-186">**Link to ESRI Shapefile .**</span></span> <span data-ttu-id="99443-187">如果提供了 ESRI 形状文件 (.shp) 和支持文件 (.dbf)，则从形状文件中加载示例数据。</span><span class="sxs-lookup"><span data-stu-id="99443-187">If the ESRI Shapefile (.shp) and the support file (.dbf) are available, the sample data is loaded from the Shapefile.</span></span> <span data-ttu-id="99443-188">否则，报表处理器生成示例数据并显示消息 **“没有可用的空间数据”**。</span><span class="sxs-lookup"><span data-stu-id="99443-188">Otherwise, the report processor generates sample data and displays the message **No spatial data available**.</span></span>  
  
-   <span data-ttu-id="99443-189">**SQL Server 空间数据。**</span><span class="sxs-lookup"><span data-stu-id="99443-189">**SQL Server spatial data.**</span></span> <span data-ttu-id="99443-190">如果数据源可用且凭据有效，则从数据库的空间数据中加载示例数据。</span><span class="sxs-lookup"><span data-stu-id="99443-190">If the data source is available and the credentials are valid, the sample data is loaded from the spatial data in the database.</span></span> <span data-ttu-id="99443-191">否则，报表处理器生成示例数据并显示消息 **“没有可用的空间数据”**。</span><span class="sxs-lookup"><span data-stu-id="99443-191">Otherwise, the report processor generates sample data and displays the message **No spatial data available**.</span></span>  
  
#### <a name="embedding-spatial-data-in-the-report-definition"></a><span data-ttu-id="99443-192">在报表定义中嵌入空间数据</span><span class="sxs-lookup"><span data-stu-id="99443-192">Embedding Spatial Data in the Report Definition</span></span>  
 <span data-ttu-id="99443-193">与分析数据不同，您可以选择在报表定义中嵌入地图层的空间数据。</span><span class="sxs-lookup"><span data-stu-id="99443-193">Unlike analytical data, you have the option to embed spatial data for a map layer in the report definition.</span></span> <span data-ttu-id="99443-194">当您嵌入空间数据时，您将嵌入在地图层中使用的地图元素。</span><span class="sxs-lookup"><span data-stu-id="99443-194">When you embed spatial data, you embed map elements that are used in the map layer.</span></span>  
  
 <span data-ttu-id="99443-195">嵌入元素增加报表定义的大小，但确保当报表运行时空间数据始终可用（无论是在预览中还是在报表服务器上）。</span><span class="sxs-lookup"><span data-stu-id="99443-195">Embedded elements increase the size of the report definition but ensure that the spatial data is always available when the report runs, either in preview or on the report server.</span></span> <span data-ttu-id="99443-196">数据越多，表明存储空间越大，处理时间越长。</span><span class="sxs-lookup"><span data-stu-id="99443-196">More data means more storage and longer processing times.</span></span> <span data-ttu-id="99443-197">将空间数据限制为只限报表需要的信息（除了其他报表数据外）始终是一个好做法。</span><span class="sxs-lookup"><span data-stu-id="99443-197">It is always a best practice to limit spatial data, in addition to other report data, to just the information that is needed for your report.</span></span>  
  
#### <a name="controlling-map-resolution-at-run-time"></a><span data-ttu-id="99443-198">在运行时控制地图分辨率</span><span class="sxs-lookup"><span data-stu-id="99443-198">Controlling Map Resolution at Run Time</span></span>  
 <span data-ttu-id="99443-199">当您更改空间数据的分辨率时，您是在指定在地图上绘制线条的详细程度。</span><span class="sxs-lookup"><span data-stu-id="99443-199">When you change the resolution for spatial data, you are specifying how detailed you want the lines drawn on a map.</span></span> <span data-ttu-id="99443-200">例如，对于面积，您是需要将粒度降到地球上百米的表面积，还是一英里就足够详细了？</span><span class="sxs-lookup"><span data-stu-id="99443-200">For example, for areas, do you need granularity down to a hundred meters of surface area on the earth, or is one mile enough detail?</span></span>  
  
 <span data-ttu-id="99443-201">如果在报表中嵌入了空间数据，则您使用的分辨率将影响报表定义中的地图元素数。</span><span class="sxs-lookup"><span data-stu-id="99443-201">If the spatial data is embedded in the report, the resolution that you use affects the number of map elements in the report definition.</span></span> <span data-ttu-id="99443-202">分辨率提高将增加以该分辨率绘制边界所需的元素数。</span><span class="sxs-lookup"><span data-stu-id="99443-202">A higher resolution increases the number of elements that are required to draw borders at that resolution.</span></span> <span data-ttu-id="99443-203">如果报表中未嵌入空间数据，则报表服务器在您每次查看报表时，都将计算以该分辨率绘制边界所需的线条数。</span><span class="sxs-lookup"><span data-stu-id="99443-203">If the spatial data is not embedded in the report, the report server calculates the lines that are required to draw the borders at that resolution every time you view the report.</span></span> <span data-ttu-id="99443-204">若要设计一个报表以便在显示分辨率与可接受的呈现时间之间达到平衡，应将地图分辨率简化为在报表中实现分析数据的可视化所需的详细程度。</span><span class="sxs-lookup"><span data-stu-id="99443-204">To design a report that balances display resolution and acceptable report rendering time, simplify the map resolution to the level of detail that you need in your report to visualize your analytical data.</span></span>  
  
=
  
### <a name="analytical-data"></a><span data-ttu-id="99443-205">分析数据</span><span class="sxs-lookup"><span data-stu-id="99443-205">Analytical Data</span></span>  
 <span data-ttu-id="99443-206">分析数据是您要在地图上实现可视化的数据，例如，市县的人口数或商店的总销售额。</span><span class="sxs-lookup"><span data-stu-id="99443-206">Analytical data is the data that you want to visualize on the map, for example, population for a city or sales total for a store.</span></span> <span data-ttu-id="99443-207">分析数据可以来自以下源之一：</span><span class="sxs-lookup"><span data-stu-id="99443-207">Analytical data can come from one of the following sources:</span></span>  
  
-   <span data-ttu-id="99443-208">**数据集字段：**</span><span class="sxs-lookup"><span data-stu-id="99443-208">**Dataset field.**</span></span> <span data-ttu-id="99443-209">来自“报表数据”窗格中某个数据集的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-209">A field from a dataset in the Report Data pane.</span></span>  
  
-   <span data-ttu-id="99443-210">**空间数据源字段：**</span><span class="sxs-lookup"><span data-stu-id="99443-210">**Spatial data source field.**</span></span> <span data-ttu-id="99443-211">空间数据源中随空间数据提供的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-211">A field from the spatial data source that is included with the spatial data.</span></span> <span data-ttu-id="99443-212">例如，ESRI 形状文件常常同时包含空间数据和分析数据。</span><span class="sxs-lookup"><span data-stu-id="99443-212">For example, an ESRI Shapefile frequently includes both spatial and analytical data.</span></span> <span data-ttu-id="99443-213">来自空间数据源的字段名称以 # 开始，当您为某层的规则指定数据字段时，这些字段将出现在字段下拉列表中。</span><span class="sxs-lookup"><span data-stu-id="99443-213">Field names from the spatial data source begin with # and appear in the drop-down list of fields when you are specifying the data field for rules for a layer.</span></span>  
  
-   <span data-ttu-id="99443-214">**地图元素的嵌入数据：**</span><span class="sxs-lookup"><span data-stu-id="99443-214">**Embedded data for a map element.**</span></span> <span data-ttu-id="99443-215">在报表中嵌入多边形、线条或点之后，您可以针对单独的地图元素覆盖数据字段并设置自定义值。</span><span class="sxs-lookup"><span data-stu-id="99443-215">After you embed polygons, lines, or points in a report, you can override the data fields for individual map elements and set custom values.</span></span>  
  
 <span data-ttu-id="99443-216">当为层指定规则并选择分析数据字段时，如果数据类型为数值，则报表处理器将自动使用默认函数 Sum 来计算地图元素的聚合值。</span><span class="sxs-lookup"><span data-stu-id="99443-216">When you specify rules for a layer and select the analytical data field, if the data type is numeric, the report processor automatically uses the default function Sum to calculate aggregate values for the map element.</span></span> <span data-ttu-id="99443-217">如果字段不是数值，则不指定聚合函数，而是使用隐式聚合函数 First。</span><span class="sxs-lookup"><span data-stu-id="99443-217">If the field is not numeric, no aggregate function is specified, and the implicit aggregate function First is used.</span></span> <span data-ttu-id="99443-218">若要更改默认表达式，请针对层的规则更改选项。</span><span class="sxs-lookup"><span data-stu-id="99443-218">To change the default expression, change the options for the rules for the layer.</span></span> <span data-ttu-id="99443-219">有关详细信息，请参阅 [按规则和分析数据更改多边形、线条和点的显示方式（报表生成器和 SSRS）](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-219">For more information, see [Vary Polygon, Line, and Point Display by Rules and Analytical Data &#40;Report Builder and SSRS&#41;](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md).</span></span>  
  
### <a name="match-fields"></a><span data-ttu-id="99443-220">匹配字段</span><span class="sxs-lookup"><span data-stu-id="99443-220">Match Fields</span></span>  
 <span data-ttu-id="99443-221">若要将分析数据与层上的地图元素相关，必须指定“匹配字段” \*\*。</span><span class="sxs-lookup"><span data-stu-id="99443-221">To relate analytical data to map elements on a layer, you must specify *match fields*.</span></span> <span data-ttu-id="99443-222">可以使用匹配字段在地图元素与分析数据之间建立关系。</span><span class="sxs-lookup"><span data-stu-id="99443-222">Match fields are used to build a relationship between map elements and analytical data.</span></span> <span data-ttu-id="99443-223">可以使用一个或多个字段来进行匹配，只要它们能够为每个空间位置指定唯一的分析值。</span><span class="sxs-lookup"><span data-stu-id="99443-223">You can use one or more fields to match on as long as they specify a unique analytical value for each spatial location.</span></span>  
  
 <span data-ttu-id="99443-224">例如，对于气泡大小随市县人口数发生变化的气泡图，需要下面的数据：</span><span class="sxs-lookup"><span data-stu-id="99443-224">For example, for a bubble map that varies bubble size by city population, the following data is needed:</span></span>  
  
-   <span data-ttu-id="99443-225">从空间数据源：</span><span class="sxs-lookup"><span data-stu-id="99443-225">From the spatial data source:</span></span>  
  
    -   <span data-ttu-id="99443-226">**SpatialData。**</span><span class="sxs-lookup"><span data-stu-id="99443-226">**SpatialData.**</span></span> <span data-ttu-id="99443-227">具有指定城市经纬度的空间数据字段。</span><span class="sxs-lookup"><span data-stu-id="99443-227">A field that has spatial data that specifies the latitude and longitude of the city.</span></span>  
  
    -   <span data-ttu-id="99443-228">**名称。**</span><span class="sxs-lookup"><span data-stu-id="99443-228">**Name.**</span></span> <span data-ttu-id="99443-229">具有市县名称的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-229">A field that has the name of the city.</span></span>  
  
    -   <span data-ttu-id="99443-230">**图.**</span><span class="sxs-lookup"><span data-stu-id="99443-230">**Area.**</span></span> <span data-ttu-id="99443-231">具有区域名称的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-231">A field that has the name of the region.</span></span>  
  
-   <span data-ttu-id="99443-232">从分析数据源：</span><span class="sxs-lookup"><span data-stu-id="99443-232">From the analytical data source:</span></span>  
  
    -   <span data-ttu-id="99443-233">**总数.**</span><span class="sxs-lookup"><span data-stu-id="99443-233">**Population.**</span></span> <span data-ttu-id="99443-234">具有市县人口数的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-234">A field that has the city population.</span></span>  
  
    -   <span data-ttu-id="99443-235">**梵蒂冈.**</span><span class="sxs-lookup"><span data-stu-id="99443-235">**City.**</span></span> <span data-ttu-id="99443-236">具有市县名称的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-236">A field that has the name of the city.</span></span>  
  
    -   <span data-ttu-id="99443-237">**图.**</span><span class="sxs-lookup"><span data-stu-id="99443-237">**Area.**</span></span> <span data-ttu-id="99443-238">具有区域、省/市/自治区或地区名称的字段。</span><span class="sxs-lookup"><span data-stu-id="99443-238">A field that has the name of the territory, state, or region.</span></span>  
  
 <span data-ttu-id="99443-239">在本例中，只靠市县名称不足以唯一标识人口数。</span><span class="sxs-lookup"><span data-stu-id="99443-239">In this example, the name of the city alone is not enough to uniquely identify the population.</span></span> <span data-ttu-id="99443-240">例如，在美国有多个市县的名称为 Albany。</span><span class="sxs-lookup"><span data-stu-id="99443-240">For example, there are many cities named Albany in the United States.</span></span> <span data-ttu-id="99443-241">若要指定特定市县，必须指定地区以及市县名称。</span><span class="sxs-lookup"><span data-stu-id="99443-241">To name a specific city, you must specify the area in addition to the city name.</span></span>  
  

  
##  <a name="understanding-the-map-viewport"></a><a name="Viewport"></a> <span data-ttu-id="99443-242">了解地图视区</span><span class="sxs-lookup"><span data-stu-id="99443-242">Understanding the Map Viewport</span></span>  
 <span data-ttu-id="99443-243">在为报表指定地图数据之后，可以通过指定地图“视区” \*\* 来限制地图的显示区域。</span><span class="sxs-lookup"><span data-stu-id="99443-243">After you specify map data for a report, you can limit the display area of the map by specifying a map *viewport*.</span></span> <span data-ttu-id="99443-244">默认情况下，视区为整个地图的区域。</span><span class="sxs-lookup"><span data-stu-id="99443-244">By default, the viewport is the same area as the whole map.</span></span> <span data-ttu-id="99443-245">若要裁剪地图，可以指定中心、缩放级别以及最大和最小坐标，以定义要在报表中包含的区域。</span><span class="sxs-lookup"><span data-stu-id="99443-245">To crop the map, you can specify the center, zoom level, and maximum and minimum coordinates that define the area that you want to include in your report.</span></span> <span data-ttu-id="99443-246">若要改进地图在报表中的显示，可以将图例、距离刻度和色阶移到视区之外。</span><span class="sxs-lookup"><span data-stu-id="99443-246">To improve the display of the map in the report, you can move the legends, distance scale, and color scale outside the viewport.</span></span> <span data-ttu-id="99443-247">下图显示一个视区：</span><span class="sxs-lookup"><span data-stu-id="99443-247">The following figure shows a viewport:</span></span>  
  
 <span data-ttu-id="99443-248">![rs_MapViewport](../media/rs-mapviewport.gif "rs_MapViewport")</span><span class="sxs-lookup"><span data-stu-id="99443-248">![rs_MapViewport](../media/rs-mapviewport.gif "rs_MapViewport")</span></span>  
  
  
  
##  <a name="adding-a-bing-map-tiles-layer"></a><a name="TileLayer"></a> <span data-ttu-id="99443-249">添加 Bing 地图图块层</span><span class="sxs-lookup"><span data-stu-id="99443-249">Adding a Bing Map Tiles Layer</span></span>  
 <span data-ttu-id="99443-250">您可以为 Bing 地图图块添加一个层，以便为由视区定义的当前地图视图提供地理背景。</span><span class="sxs-lookup"><span data-stu-id="99443-250">You can add a layer for Bing map tiles that provides a geographic background for the current map view as defined by the viewport.</span></span> <span data-ttu-id="99443-251">若要添加图块层，必须指定 **“地理”** 坐标系和投影类型 **Mercator**。</span><span class="sxs-lookup"><span data-stu-id="99443-251">To add a tile layer, you must specify the coordinate system **geographic** and the projection type **Mercator**.</span></span> <span data-ttu-id="99443-252">将自动从 Bing 地图 Web 服务中检索与您选择的视区中心和缩放级别匹配的图块。</span><span class="sxs-lookup"><span data-stu-id="99443-252">Tiles that match the viewport center and zoom level that you select are automatically retrieved from Bing Maps Web Services.</span></span>  
  
 <span data-ttu-id="99443-253">可通过指定下列选项自定义层：</span><span class="sxs-lookup"><span data-stu-id="99443-253">You can customize the layer by specifying the following options:</span></span>  
  
-   <span data-ttu-id="99443-254">图块类型。</span><span class="sxs-lookup"><span data-stu-id="99443-254">Tile type.</span></span> <span data-ttu-id="99443-255">支持以下样式：</span><span class="sxs-lookup"><span data-stu-id="99443-255">The following styles are supported:</span></span>  
  
    -   <span data-ttu-id="99443-256">**前方.**</span><span class="sxs-lookup"><span data-stu-id="99443-256">**Road.**</span></span> <span data-ttu-id="99443-257">显示道路地图样式，它具有白色背景、道路和标签文本。</span><span class="sxs-lookup"><span data-stu-id="99443-257">Displays a road map style that has a white background, roads, and label text.</span></span>  
  
    -   <span data-ttu-id="99443-258">**空中：**</span><span class="sxs-lookup"><span data-stu-id="99443-258">**Aerial.**</span></span> <span data-ttu-id="99443-259">显示空中图像样式（无文本）。</span><span class="sxs-lookup"><span data-stu-id="99443-259">Displays an aerial image style without text.</span></span>  
  
    -   <span data-ttu-id="99443-260">**综合.**</span><span class="sxs-lookup"><span data-stu-id="99443-260">**Hybrid.**</span></span> <span data-ttu-id="99443-261">显示 **“道路”** 和 **“空中”** 样式的组合。</span><span class="sxs-lookup"><span data-stu-id="99443-261">Displays a combination of the **Road** and **Aerial** styles.</span></span>  
  
-   <span data-ttu-id="99443-262">用于图块上的显示文本的语言。</span><span class="sxs-lookup"><span data-stu-id="99443-262">The language for the display text on the tiles.</span></span>  
  
-   <span data-ttu-id="99443-263">是否使用安全连接从 Bing 地图 Web 服务检索图块。</span><span class="sxs-lookup"><span data-stu-id="99443-263">Whether to use a secure connection to retrieve the tiles from the Bing Maps Web service.</span></span>  
  
 <span data-ttu-id="99443-264">有关分步说明，请参阅 [添加、更改或删除地图或地图层（报表生成器和 SSRS）](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-264">For step-by-step instructions, see [Add, Change, or Delete a Map or Map Layer &#40;Report Builder and SSRS&#41;](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md).</span></span>  
  
 <span data-ttu-id="99443-265">有关图块的详细信息，请参阅 [Bing 地图图块系统](https://go.microsoft.com/fwlink/?linkid=147315)。</span><span class="sxs-lookup"><span data-stu-id="99443-265">For more information about tiles, see [Bing Maps Tile System](https://go.microsoft.com/fwlink/?linkid=147315).</span></span> <span data-ttu-id="99443-266">有关在报表中使用 Bing 地图图块的详细信息，请参阅 [其他使用条款](https://go.microsoft.com/fwlink/?LinkId=151371) 和 [隐私声明](https://go.microsoft.com/fwlink/?LinkId=151372)。</span><span class="sxs-lookup"><span data-stu-id="99443-266">For more information about the use of Bing map tiles in your report, see [Additional Terms of Use](https://go.microsoft.com/fwlink/?LinkId=151371) and [Privacy Statement](https://go.microsoft.com/fwlink/?LinkId=151372).</span></span>  
  
 
  
##  <a name="understanding-map-layers-and-map-elements"></a><a name="MapLayers"></a><span data-ttu-id="99443-267">了解地图层和地图元素</span><span class="sxs-lookup"><span data-stu-id="99443-267">Understanding Map Layers and Map Elements</span></span>  
 <span data-ttu-id="99443-268">一个地图可以具有多个层。</span><span class="sxs-lookup"><span data-stu-id="99443-268">A map can have multiple layers.</span></span> <span data-ttu-id="99443-269">有三种类型的层。</span><span class="sxs-lookup"><span data-stu-id="99443-269">There are three types of layers.</span></span> <span data-ttu-id="99443-270">每层显示一种类型的空间数据：</span><span class="sxs-lookup"><span data-stu-id="99443-270">Each layer displays one type of spatial data:</span></span>  
  
-   <span data-ttu-id="99443-271">**多边形层。**</span><span class="sxs-lookup"><span data-stu-id="99443-271">**Polygon Layer.**</span></span> <span data-ttu-id="99443-272">显示区域的轮廓或对于多边形中心点显示标记，这是针对每个多边形自动计算的。</span><span class="sxs-lookup"><span data-stu-id="99443-272">Displays outlines of areas or markers for the polygon center point, which is automatically calculated for each polygon.</span></span>  
  
-   <span data-ttu-id="99443-273">**线条层。**</span><span class="sxs-lookup"><span data-stu-id="99443-273">**Line Layer.**</span></span> <span data-ttu-id="99443-274">对于路径或路线显示线条。</span><span class="sxs-lookup"><span data-stu-id="99443-274">Displays lines for paths or routes.</span></span>  
  
-   <span data-ttu-id="99443-275">**点层。**</span><span class="sxs-lookup"><span data-stu-id="99443-275">**Point Layer.**</span></span> <span data-ttu-id="99443-276">对于点位置显示标记。</span><span class="sxs-lookup"><span data-stu-id="99443-276">Displays markers for point locations.</span></span>  
  
 <span data-ttu-id="99443-277">当您为层指定空间数据源时，向导将检查空间数据字段并基于其类型设置层类型。</span><span class="sxs-lookup"><span data-stu-id="99443-277">When you specify the source of spatial data for a layer, the wizard checks the spatial data field and sets the layer type based on its type.</span></span> <span data-ttu-id="99443-278">对于数据源中的每个值，向层中添加一个地图元素。</span><span class="sxs-lookup"><span data-stu-id="99443-278">A map element is added to the layer for each value from the data source.</span></span>  
  
 <span data-ttu-id="99443-279">例如，若要显示从中央仓库到商店的交货路线，您可以添加两个层：具有图钉标记以显示商店位置的点层和显示从该仓库到每个商店的交货路线的线条层。</span><span class="sxs-lookup"><span data-stu-id="99443-279">For example, to display delivery routes from a central warehouse to your stores, you might add two layers: a point layer with pushpin markers to display store locations and a line layer to display delivery routes to each store from the warehouse.</span></span> <span data-ttu-id="99443-280">点层需要用于指定商店位置的“点”空间数据，而线条层需要用于指定交货路线的“线条”空间数据。</span><span class="sxs-lookup"><span data-stu-id="99443-280">The point layer needs Point spatial data that specifies store locations and the line layer needs Line spatial data that specifies the delivery routes.</span></span>  
  
 <span data-ttu-id="99443-281">第四种层类型为图块层。</span><span class="sxs-lookup"><span data-stu-id="99443-281">The fourth type of layer is a tile layer.</span></span> <span data-ttu-id="99443-282">图块层添加与地图视区中心和缩放级别相符的 Bing 地图图块背景。</span><span class="sxs-lookup"><span data-stu-id="99443-282">A tile layer adds a background of Bing map tiles that corresponds to the map viewport center and zoom level.</span></span>  
  
 <span data-ttu-id="99443-283">若要使用层，请在报表设计图面上选择一个地图以显示“地图”窗格。</span><span class="sxs-lookup"><span data-stu-id="99443-283">To work with layers, select a map on the report design surface to display the Map pane.</span></span> <span data-ttu-id="99443-284">“地图”窗格显示为地图定义的层列表。</span><span class="sxs-lookup"><span data-stu-id="99443-284">The Map pane displays the list of layers that are defined for the map.</span></span> <span data-ttu-id="99443-285">使用此窗格可以选择某个层，以便更改选项，更改层的绘制顺序，添加层或运行“地图层”向导，隐藏或显示某个层，以及更改地图视区的视图中心和缩放级别。</span><span class="sxs-lookup"><span data-stu-id="99443-285">Use this pane to select a layer to change the options, to change the drawing order of layers, to add a layer or run the Map Layer wizard, to hide or show a layer, and to change the view center and zoom level for the map viewport.</span></span> <span data-ttu-id="99443-286">下图显示一个视区：</span><span class="sxs-lookup"><span data-stu-id="99443-286">The following figure shows a viewport:</span></span>  
  
 <span data-ttu-id="99443-287">![rsMapLayerZone](../media/rsmaplayerzone.gif "rsMapLayerZone")</span><span class="sxs-lookup"><span data-stu-id="99443-287">![rsMapLayerZone](../media/rsmaplayerzone.gif "rsMapLayerZone")</span></span>  
  
 <span data-ttu-id="99443-288">有关地图层的详细信息，请参阅 [添加、更改或删除地图或地图层（报表生成器和 SSRS）](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-288">For more information about map layers, see [Add, Change, or Delete a Map or Map Layer &#40;Report Builder and SSRS&#41;](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md).</span></span>  
  
### <a name="varying-display-properties-for-points-lines-and-polygons"></a><span data-ttu-id="99443-289">改变点、线条和多边形的显示属性</span><span class="sxs-lookup"><span data-stu-id="99443-289">Varying Display Properties for Points, Lines, and Polygons</span></span>  
 <span data-ttu-id="99443-290">可以在层级别通过对该层使用规则或对单独的元素设置地图元素的显示选项。</span><span class="sxs-lookup"><span data-stu-id="99443-290">Display options for a map elements can be set at the layer level, by using rules for the layer, or on individual elements.</span></span> <span data-ttu-id="99443-291">例如，您可以为层上的所有点设置显示属性；也可以设置规则来控制层上所有点的显示属性（无论它们是否为嵌入的点）；还可以覆盖特定嵌入点的显示属性设置。</span><span class="sxs-lookup"><span data-stu-id="99443-291">For example, you can set display properties for all points on a layer, or you can set rules that control the display properties for all points on a layer whether or not they are embedded, or you can override display property settings for specific embedded points.</span></span>  
  
 <span data-ttu-id="99443-292">当您查看报表时，您看到的显示值由此层次结构控制并按升序列出。</span><span class="sxs-lookup"><span data-stu-id="99443-292">When you view a report, the display values that you see are controlled by this hierarchy, listed in ascending order.</span></span> <span data-ttu-id="99443-293">数字越大，优先级越高：</span><span class="sxs-lookup"><span data-stu-id="99443-293">The higher numbers take precedence:</span></span>  
  
1.  <span data-ttu-id="99443-294">**层属性：**</span><span class="sxs-lookup"><span data-stu-id="99443-294">**Layer properties.**</span></span> <span data-ttu-id="99443-295">适用于整个层的属性。</span><span class="sxs-lookup"><span data-stu-id="99443-295">Properties that apply to the whole layer.</span></span> <span data-ttu-id="99443-296">例如，使用层属性设置分析数据的源或整个层的可见性。</span><span class="sxs-lookup"><span data-stu-id="99443-296">For example, use layer properties to set the source of analytical data or the visibility for the whole layer.</span></span>  
  
2.  <span data-ttu-id="99443-297">**多边形、线条、点属性以及嵌入的多边形、线条、点属性：**</span><span class="sxs-lookup"><span data-stu-id="99443-297">**Polygon, Line, Point properties and Embedded Polygon, Line, Point properties.**</span></span> <span data-ttu-id="99443-298">应用于层上所有地图元素的属性，无论元素来自动态空间数据还是嵌入的空间数据。</span><span class="sxs-lookup"><span data-stu-id="99443-298">Properties that apply to all map elements on a layer, whether the elements are from dynamic spatial data or embedded spatial data.</span></span> <span data-ttu-id="99443-299">例如，使用多边形中心点属性将气泡的填充颜色设置为某个渐变效果，此效果从上到下填充气泡区域，颜色从深蓝渐变到浅蓝。</span><span class="sxs-lookup"><span data-stu-id="99443-299">For example, use polygon center point properties to set the fill color for bubbles to a gradient that fills bubble areas from dark blue to light blue and from top to bottom.</span></span>  
  
3.  <span data-ttu-id="99443-300">**颜色规则、大小规则、宽度规则、标记类型规则：**</span><span class="sxs-lookup"><span data-stu-id="99443-300">**Color Rules, Size Rules, Width Rules, Marker Type Rules.**</span></span> <span data-ttu-id="99443-301">当某个层具有的地图元素与分析数据具有某种关系时，规则将属性应用于该层。</span><span class="sxs-lookup"><span data-stu-id="99443-301">Rules apply properties to a layer when the layer has map elements that have a relationship to analytical data.</span></span> <span data-ttu-id="99443-302">规则的类型随层类型而异。</span><span class="sxs-lookup"><span data-stu-id="99443-302">The type of rules vary based on layer type.</span></span> <span data-ttu-id="99443-303">例如，使用点大小规则以基于人口数改变气泡大小。</span><span class="sxs-lookup"><span data-stu-id="99443-303">For example, use point size rules to vary bubble size based on population.</span></span>  
  
4.  <span data-ttu-id="99443-304">**覆盖嵌入多边形、线条或点属性：**</span><span class="sxs-lookup"><span data-stu-id="99443-304">**Override for Embedded Polygon, Line, or Point properties**.</span></span> <span data-ttu-id="99443-305">对于嵌入地图元素，可以选择覆盖选项并更改任何属性或数据值。</span><span class="sxs-lookup"><span data-stu-id="99443-305">For embedded map elements, you can select the override option and change any property or data value.</span></span> <span data-ttu-id="99443-306">您所做的任何用于覆盖单独元素的规则的更改都是不可逆的。</span><span class="sxs-lookup"><span data-stu-id="99443-306">Any changes that you make to override rules for individual elements are irreversible.</span></span> <span data-ttu-id="99443-307">例如，您可以使用图钉标记来突出显示特定的商店。</span><span class="sxs-lookup"><span data-stu-id="99443-307">For example, you can highlight a specific store by using a pushpin marker.</span></span>  
  
 <span data-ttu-id="99443-308">有关详细信息，请参阅 [按规则和分析数据更改多边形、线条和点的显示方式（报表生成器和 SSRS）](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-308">For more information, see [Vary Polygon, Line, and Point Display by Rules and Analytical Data &#40;Report Builder and SSRS&#41;](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md).</span></span>  
  
 <span data-ttu-id="99443-309">除了改变地图元素的外观之外，还可以通过以下方式向点、线条和多边形或层添加交互性：</span><span class="sxs-lookup"><span data-stu-id="99443-309">In addition to varying the appearance of map elements, you can add interactivity to points, lines, and polygons, or to layers, in the following ways:</span></span>  
  
-   <span data-ttu-id="99443-310">创建工具提示，以便在用户将指针悬停在地图上时提供地图元素的附加详细信息。</span><span class="sxs-lookup"><span data-stu-id="99443-310">Create tooltips to provide additional details for a map element when the user hovers a pointer over the map.</span></span>  
  
-   <span data-ttu-id="99443-311">添加钻取操作以链接到报表中的其他位置、其他报表或网页。</span><span class="sxs-lookup"><span data-stu-id="99443-311">Add drillthrough actions to link to other locations in the report, to other reports, or to Web pages.</span></span>  
  
-   <span data-ttu-id="99443-312">在表达式中添加定义层可见性的参数，以使用户能够显示或隐藏特定的地图层。</span><span class="sxs-lookup"><span data-stu-id="99443-312">Add parameters in expressions that define layer visibility to enable a user to show or hide specific map layers.</span></span>  
  
 <span data-ttu-id="99443-313">有关详细信息，请参阅[交互式排序、文档结构图和链接（报表生成器和 SSRS）](interactive-sort-document-maps-and-links-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-313">For more information, see [Interactive Sort, Document Maps, and Links &#40;Report Builder and SSRS&#41;](interactive-sort-document-maps-and-links-report-builder-and-ssrs.md).</span></span>  
  

  
##  <a name="understanding-map-legends-color-scale-and-distance-scale"></a><a name="Legends"></a> <span data-ttu-id="99443-314">了解地图图例、色阶和距离刻度</span><span class="sxs-lookup"><span data-stu-id="99443-314">Understanding Map Legends, Color Scale, and Distance Scale</span></span>  
 <span data-ttu-id="99443-315">可以向报表中添加各种图例以帮助用户解释地图。</span><span class="sxs-lookup"><span data-stu-id="99443-315">You can add a variety of legends to your report to help users interpret a map.</span></span> <span data-ttu-id="99443-316">地图可以包含以下各项：</span><span class="sxs-lookup"><span data-stu-id="99443-316">Maps can include the following items:</span></span>  
  
-   <span data-ttu-id="99443-317">**图例：**</span><span class="sxs-lookup"><span data-stu-id="99443-317">**Legends.**</span></span> <span data-ttu-id="99443-318">您可以创建多个图例。</span><span class="sxs-lookup"><span data-stu-id="99443-318">You can create multiple legends.</span></span> <span data-ttu-id="99443-319">将根据您为每个层上的地图元素指定的规则，自动生成图例中列出的项。</span><span class="sxs-lookup"><span data-stu-id="99443-319">Items that are listed in a legend are generated automatically based on the rules that you specify for map elements on each layer.</span></span> <span data-ttu-id="99443-320">对于每个规则，您可以指定用于显示其相关项的图例。</span><span class="sxs-lookup"><span data-stu-id="99443-320">For each rule, you specify the legend to use to display its related items.</span></span> <span data-ttu-id="99443-321">通过这种方法，您可以将来自多个层的项分配给同一图例或不同图例。</span><span class="sxs-lookup"><span data-stu-id="99443-321">In this manner, you can assign items from multiple layers to the same legend or to different legends.</span></span>  
  
-   <span data-ttu-id="99443-322">**色阶：**</span><span class="sxs-lookup"><span data-stu-id="99443-322">**Color scale.**</span></span> <span data-ttu-id="99443-323">您可以创建一个色阶。</span><span class="sxs-lookup"><span data-stu-id="99443-323">You can create one color scale.</span></span> <span data-ttu-id="99443-324">作为为颜色规则提供图例的另一种方法，您可以在色阶中显示颜色规则的项。</span><span class="sxs-lookup"><span data-stu-id="99443-324">As an alternative to providing a legend for a color rule, you can display items for a color rule in the color scale.</span></span> <span data-ttu-id="99443-325">多个颜色规则可以应用于此色阶。</span><span class="sxs-lookup"><span data-stu-id="99443-325">Multiple color rules can apply to the color scale.</span></span>  
  
-   <span data-ttu-id="99443-326">**距离刻度：**</span><span class="sxs-lookup"><span data-stu-id="99443-326">**Distance scale.**</span></span> <span data-ttu-id="99443-327">可以显示一个距离刻度。</span><span class="sxs-lookup"><span data-stu-id="99443-327">You can display one distance scale.</span></span> <span data-ttu-id="99443-328">距离刻度同时用公里和英里为当前地图视图显示刻度。</span><span class="sxs-lookup"><span data-stu-id="99443-328">The distance scale displays a scale for the current map view in both kilometers and miles.</span></span>  
  
 <span data-ttu-id="99443-329">您可以将图例、色阶和距离刻度定位在视区内外的不连续位置。</span><span class="sxs-lookup"><span data-stu-id="99443-329">You can position the legends, color scale, and distance scale in discrete locations inside or outside the viewport.</span></span> <span data-ttu-id="99443-330">有关详细信息，请参阅 [更改地图图例、色阶和关联的规则（报表生成器和 SSRS）](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="99443-330">For more information, see [Change Map Legends, Color Scale, and Associated Rules &#40;Report Builder and SSRS&#41;](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md).</span></span>  
  
  
  
##  <a name="troubleshooting-maps"></a><a name="Troubleshooting"></a> <span data-ttu-id="99443-331">排除地图故障</span><span class="sxs-lookup"><span data-stu-id="99443-331">Troubleshooting Maps</span></span>  
 <span data-ttu-id="99443-332">地图报表使用的空间数据和分析数据来自各种数据源。</span><span class="sxs-lookup"><span data-stu-id="99443-332">Map reports use spatial and analytical data from a variety of data sources.</span></span> <span data-ttu-id="99443-333">每个地图层都可能使用不同的数据源。</span><span class="sxs-lookup"><span data-stu-id="99443-333">Each map layer can use different sources of data.</span></span> <span data-ttu-id="99443-334">每个层的显示属性遵循特定的优先顺序（基于层属性、规则和地图元素属性）。</span><span class="sxs-lookup"><span data-stu-id="99443-334">The display properties for each layer follow a specific precedence based on layer properties, rules, map element properties.</span></span>  
  
 <span data-ttu-id="99443-335">如果您查看地图报表时看不到所需的结果，其根源可能是各种问题。</span><span class="sxs-lookup"><span data-stu-id="99443-335">If you do not see the result that you want when you view a map report, the root causes can come from a variety of issues.</span></span> <span data-ttu-id="99443-336">为了帮助您隔离和了解每个问题，一次处理一个层肯定会有所帮助。</span><span class="sxs-lookup"><span data-stu-id="99443-336">To help you isolate and understand each issue, it helps to work with one layer at a time.</span></span> <span data-ttu-id="99443-337">使用“地图”窗格可以选择层并轻松地切换其可见性。</span><span class="sxs-lookup"><span data-stu-id="99443-337">Use the Map pane to select a layer and easily toggle its visibility.</span></span>  
  
 <span data-ttu-id="99443-338">有关地图报表问题的详细信息，请参阅 [报表故障排除：地图报表（报表生成器和 SSRS）](troubleshoot-reports-map-reports-report-builder-and-ssrs.md)</span><span class="sxs-lookup"><span data-stu-id="99443-338">For more information about map report issues, see [Troubleshoot Reports: Map Reports &#40;Report Builder and SSRS&#41;](troubleshoot-reports-map-reports-report-builder-and-ssrs.md)</span></span>  
  

  
##  <a name="how-to-topics"></a><a name="HowTo"></a><span data-ttu-id="99443-339">操作指南主题</span><span class="sxs-lookup"><span data-stu-id="99443-339">How-To Topics</span></span>  
 <span data-ttu-id="99443-340">本部分列出的过程分步向您介绍如何在报表中使用地图和地图层。</span><span class="sxs-lookup"><span data-stu-id="99443-340">This section lists procedures that show you, step by step, how to work with maps and map layers in your reports.</span></span>  
  
-   [<span data-ttu-id="99443-341">添加、更改或删除地图或地图层（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-341">Add, Change, or Delete a Map or Map Layer &#40;Report Builder and SSRS&#41;</span></span>](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md)  
  
-   [<span data-ttu-id="99443-342">更改地图图例、色阶和关联的规则（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-342">Change Map Legends, Color Scale, and Associated Rules &#40;Report Builder and SSRS&#41;</span></span>](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md)  
  
-   [<span data-ttu-id="99443-343">向地图添加自定义位置（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-343">Add Custom Locations to a Map &#40;Report Builder and SSRS&#41;</span></span>](add-custom-locations-to-a-map-report-builder-and-ssrs.md)  
  
 
  
##  <a name="in-this-section"></a><a name="Section"></a> <span data-ttu-id="99443-344">本节内容</span><span class="sxs-lookup"><span data-stu-id="99443-344">In This Section</span></span>  
 [<span data-ttu-id="99443-345">规划地图报表（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-345">Plan a Map Report &#40;Report Builder and SSRS&#41;</span></span>](plan-a-map-report-report-builder-and-ssrs.md)  
  
 [<span data-ttu-id="99443-346">地图向导和地图层向导（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-346">Map Wizard and Map Layer Wizard &#40;Report Builder and SSRS&#41;</span></span>](map-wizard-and-map-layer-wizard-report-builder-and-ssrs.md)  
  
 [<span data-ttu-id="99443-347">自定义地图或地图层的数据和显示（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-347">Customize the Data and Display of a Map or Map Layer &#40;Report Builder and SSRS&#41;</span></span>](customize-the-data-and-display-of-a-map-or-map-layer-report-builder-and-ssrs.md)  
  
 [<span data-ttu-id="99443-348">按规则和分析数据更改多边形、线条和点的显示方式（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-348">Vary Polygon, Line, and Point Display by Rules and Analytical Data &#40;Report Builder and SSRS&#41;</span></span>](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md)  
  
 [<span data-ttu-id="99443-349">添加、更改或删除地图或地图层（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-349">Add, Change, or Delete a Map or Map Layer &#40;Report Builder and SSRS&#41;</span></span>](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md)  
  
 [<span data-ttu-id="99443-350">更改地图图例、色阶和关联的规则（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-350">Change Map Legends, Color Scale, and Associated Rules &#40;Report Builder and SSRS&#41;</span></span>](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md)  
  
 [<span data-ttu-id="99443-351">向地图添加自定义位置（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-351">Add Custom Locations to a Map &#40;Report Builder and SSRS&#41;</span></span>](add-custom-locations-to-a-map-report-builder-and-ssrs.md)  
  
 [<span data-ttu-id="99443-352">报表故障排除：地图报表（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="99443-352">Troubleshoot Reports: Map Reports &#40;Report Builder and SSRS&#41;</span></span>](troubleshoot-reports-map-reports-report-builder-and-ssrs.md)  
  
  
