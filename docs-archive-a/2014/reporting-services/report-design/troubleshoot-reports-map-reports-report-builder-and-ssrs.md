---
title: 报表疑难解答：地图报表（报表生成器和 SSRS）| Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
ms.assetid: a690aec2-056b-40bc-8cab-c694bd2d6d62
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e9279b9cc52aa2a1178fe6093ee56120859b867b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87690376"
---
# <a name="troubleshoot-reports-map-reports-report-builder-and-ssrs"></a><span data-ttu-id="2937b-102">报表故障排除：地图报表（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="2937b-102">Troubleshoot Reports: Map Reports (Report Builder and SSRS)</span></span>
  <span data-ttu-id="2937b-103">当您向报表中添加地图或地图层、自定义报表中的现有地图或地图层、预览报表中的地图或发布具有地图的报表时，报表中的地图可能会出现问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-103">Issues with maps in a report might occur when you add a map or map layer to your report, when you customize an existing map or map layer in your report, when you preview a map in a report, or when you publish a report with a map.</span></span> <span data-ttu-id="2937b-104">使用本主题可以帮助解决这些问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-104">Use this topic to help troubleshoot these issues.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssRBRDDup](../../includes/ssrbrddup-md.md)]  
  
##  <a name="report-definition-size-issues"></a><a name="Embedded"></a><span data-ttu-id="2937b-105">报表定义大小问题</span><span class="sxs-lookup"><span data-stu-id="2937b-105">Report Definition Size Issues</span></span>  
 <span data-ttu-id="2937b-106">使用这一部分可以帮助解决与报表定义大小相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-106">Use this section to help solve issues that relate to report definition size.</span></span>  
  
### <a name="how-do-i-reduce-the-report-definition-size"></a><span data-ttu-id="2937b-107">如何减少报表定义大小？</span><span class="sxs-lookup"><span data-stu-id="2937b-107">How do I reduce the report definition size?</span></span>  
 <span data-ttu-id="2937b-108">地图层包含从空间数据创建的地图元素。</span><span class="sxs-lookup"><span data-stu-id="2937b-108">A map layer contains map elements that are created from spatial data.</span></span> <span data-ttu-id="2937b-109">在某些情况下，地图元素嵌入在报表定义中。</span><span class="sxs-lookup"><span data-stu-id="2937b-109">In some cases, map elements are embedded in the report definition.</span></span> <span data-ttu-id="2937b-110">这以如下方式发生：</span><span class="sxs-lookup"><span data-stu-id="2937b-110">This happens in the following ways:</span></span>  
  
-   <span data-ttu-id="2937b-111">如果空间数据的源来自地图库中的地图，或者来自本地计算机上的 ESRI 形状文件，则将在报表定义中自动嵌入地图元素。</span><span class="sxs-lookup"><span data-stu-id="2937b-111">If the source of spatial data is from a map in the Map Gallery or from an ESRI Shapefile on your local computer, map elements are automatically embedded in the report definition.</span></span>  
  
     <span data-ttu-id="2937b-112">如果您将报表发布到报表服务器，并且对于本地文件具有空间数据源引用，则无法在报表处理期间检索空间数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-112">If you publish a report to the report server and there is a spatial data source reference to a local file, the spatial data cannot be retrieved at report processing time.</span></span> <span data-ttu-id="2937b-113">为避免发生此问题，应将地图数据嵌入在报表定义中。</span><span class="sxs-lookup"><span data-stu-id="2937b-113">To avoid this issue, the map data is embedded in the report definition.</span></span>  
  
-   <span data-ttu-id="2937b-114">在“地图”向导或“层”向导中，如果您选择嵌入空间数据的选项，则基于空间数据的地图元素将嵌入到报表定义的地图层中。</span><span class="sxs-lookup"><span data-stu-id="2937b-114">In the Map wizard or Layer wizard, if you select the option to embed spatial data, map elements based on the spatial data are embedded in the map layer in the report definition.</span></span>  
  
-   <span data-ttu-id="2937b-115">在“地图”窗格中，如果右键单击该层，然后单击 **“嵌入空间数据”** 选项之一，则基于空间数据的地图元素将嵌入到报表定义内的地图层中。</span><span class="sxs-lookup"><span data-stu-id="2937b-115">In the Map pane, if you right-click the layer, and then click one of the **Embed Spatial Data** options, map elements based on the spatial data are embedded in the map layer in the report definition.</span></span>  
  
-   <span data-ttu-id="2937b-116">若要从报表定义中删除基于 ESRI 形状文件的嵌入数据，必须执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2937b-116">To remove embedded data that is based on an ESRI Shapefile from a report definition, you must do the following:</span></span>  
  
1.  <span data-ttu-id="2937b-117">将 ESRI .shp 和 .dbf 文件上载或发布到报表服务器。</span><span class="sxs-lookup"><span data-stu-id="2937b-117">Upload or publish the ESRI .shp and .dbf files to the report server.</span></span>  
  
2.  <span data-ttu-id="2937b-118">在报表中，在“设计”视图的“地图”窗格中，选择具有嵌入数据的层，然后打开 **“层数据”** 属性。</span><span class="sxs-lookup"><span data-stu-id="2937b-118">In the report, in the Map pane in Design view, select the layer that has embedded data, and open the **Layer Data** properties.</span></span> <span data-ttu-id="2937b-119">在 **“使用的空间数据来自”** 中，选择 **“链接到 ESRI 形状文件”**，然后浏览到报表服务器上包含 ESRI 形状文件的文件夹，选择该文件夹，然后单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="2937b-119">In **Use spatial data from**, select **Link to ESRI Shapefile**, and then browse to the folder on the report server that contains the ESRI Shapefiles, select it, and click OK.</span></span>  
  
3.  <span data-ttu-id="2937b-120">保存报表。</span><span class="sxs-lookup"><span data-stu-id="2937b-120">Save your report.</span></span> <span data-ttu-id="2937b-121">您更改的层的嵌入数据已从报表定义中删除。</span><span class="sxs-lookup"><span data-stu-id="2937b-121">The embedded data for the layer that you changed has been removed from the report definition.</span></span>  
  
 <span data-ttu-id="2937b-122">来自地图库中某个报表的地图元素将始终嵌入在某个地图层中。</span><span class="sxs-lookup"><span data-stu-id="2937b-122">Map elements from a report in the Map Gallery will always be embedded in a map layer.</span></span>  
  
  
  
##  <a name="spatial-data-issues"></a><a name="Spatial"></a><span data-ttu-id="2937b-123">空间数据问题</span><span class="sxs-lookup"><span data-stu-id="2937b-123">Spatial Data Issues</span></span>  
 <span data-ttu-id="2937b-124">使用这一部分可以帮助解决与空间数据相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-124">Use this section to help solve issues that relate to spatial data.</span></span>  
  
### <a name="on-the-design-surface-i-see-sample-spatial-data"></a><span data-ttu-id="2937b-125">在设计图面上，我看到了示例空间数据</span><span class="sxs-lookup"><span data-stu-id="2937b-125">On the design surface, I see sample spatial data</span></span>  
 <span data-ttu-id="2937b-126">在设计时，出于以下原因，设计图面可能显示有关示例空间数据的消息：</span><span class="sxs-lookup"><span data-stu-id="2937b-126">At design time, the design surface might show the message about sample spatial data for the following reasons:</span></span>  
  
-   <span data-ttu-id="2937b-127">空间数据来自于 ESRI .shp 文件，但对应的 .dbf 文件不可用。</span><span class="sxs-lookup"><span data-stu-id="2937b-127">Spatial data comes from an ESRI .shp file, but the corresponding .dbf file is not available.</span></span> <span data-ttu-id="2937b-128">ESRI 形状文件通常同时包含一个 .shp 文件（具有空间数据）和一个支持文件 .dbf。</span><span class="sxs-lookup"><span data-stu-id="2937b-128">ESRI Shapefiles usually include both a .shp file with spatial data and a support file .dbf.</span></span> <span data-ttu-id="2937b-129">验证 .dbf 文件与 .shp 文件位于同一个目录下。</span><span class="sxs-lookup"><span data-stu-id="2937b-129">Verify that the .dbf file is in the same directory as the .shp file.</span></span>  
  
-   <span data-ttu-id="2937b-130">空间数据来自数据集，但此查询的数据连接无效或当前凭据无效。</span><span class="sxs-lookup"><span data-stu-id="2937b-130">Spatial data comes from a dataset and the data connection for the query is not valid or the current credentials are not valid.</span></span>  
  
-   <span data-ttu-id="2937b-131">地图层包含一个属性以及一个表达式。</span><span class="sxs-lookup"><span data-stu-id="2937b-131">The map layer contains a property with an expression.</span></span> <span data-ttu-id="2937b-132">在报表运行之前，不计算表达式的值。</span><span class="sxs-lookup"><span data-stu-id="2937b-132">Expressions are not evaluated until the report runs.</span></span> <span data-ttu-id="2937b-133">若要查看地图，必须预览报表。</span><span class="sxs-lookup"><span data-stu-id="2937b-133">To see the map, you must preview the report.</span></span>  
  
-   <span data-ttu-id="2937b-134">空间数据来自具有特定作用域的数据集。</span><span class="sxs-lookup"><span data-stu-id="2937b-134">Spatial data comes from a dataset that has a specific scope.</span></span> <span data-ttu-id="2937b-135">例如，当地图嵌套在 Tablix 数据区域中或地图将相同数据集作用域用于分析数据和空间数据时，将不计算数据作用域，直到报表运行。</span><span class="sxs-lookup"><span data-stu-id="2937b-135">For example, when a map is nested in a tablix data region, or the map uses the same dataset scope for analytical and for spatial data, the data scope is not calculated until the report runs.</span></span>  
  
### <a name="when-i-set-an-offset-for-an-individual-map-element-a-cluster-of-map-elements-move"></a><span data-ttu-id="2937b-136">当我为单独的地图元素设置偏移量时，一系列地图元素移动</span><span class="sxs-lookup"><span data-stu-id="2937b-136">When I set an offset for an individual map element, a cluster of map elements move</span></span>  
 <span data-ttu-id="2937b-137">空间数据定义显示在每个地图层上的地图元素。</span><span class="sxs-lookup"><span data-stu-id="2937b-137">Spatial data defines the map elements that are displayed on each map layer.</span></span> <span data-ttu-id="2937b-138">地图元素可以基于空间数据，该空间数据可以为单个点、一组点、单一线条、一组线条、单个多边形或一组多边形。</span><span class="sxs-lookup"><span data-stu-id="2937b-138">A map element can be based on spatial data that is a single point, a set of points, a single line, a set of lines, a single polygon, or a set of polygons.</span></span> <span data-ttu-id="2937b-139">每个地图元素为一个单元。</span><span class="sxs-lookup"><span data-stu-id="2937b-139">Each map element is a unit.</span></span> <span data-ttu-id="2937b-140">如果地图元素包含多个点，在移动该元素时，将移动该地图元素的所有点。</span><span class="sxs-lookup"><span data-stu-id="2937b-140">If a map element contains multiple points, and you move the element, all points for that map element will move.</span></span>  
  
 <span data-ttu-id="2937b-141">每个地图元素的数据都由来自外部源的空间数据的格式确定。</span><span class="sxs-lookup"><span data-stu-id="2937b-141">The data for each map element is determined by the format of the spatial data from the external source.</span></span> <span data-ttu-id="2937b-142">例如，当查询指定来自 SQL Server 数据库的空间数据时，结果集中的每行可能包含多个点集、行集或多边形坐标集。</span><span class="sxs-lookup"><span data-stu-id="2937b-142">For example, when a query specifies spatial data from a SQL Server database, each row in the result set can contain multiple sets of point or line or polygon coordinates.</span></span> <span data-ttu-id="2937b-143">由单一行在结果集中定义的所有地图元素都被视为单位。</span><span class="sxs-lookup"><span data-stu-id="2937b-143">All map elements that are defined by a single row in the result set are treated as a unit.</span></span> <span data-ttu-id="2937b-144">如果要改变特定坐标集的显示，必须执行以下操作之一：</span><span class="sxs-lookup"><span data-stu-id="2937b-144">If you want to vary the display of specific sets of coordinates, you must do one of the following:</span></span>  
  
-   <span data-ttu-id="2937b-145">更改查询以便在结果集中将坐标集作为单独的行返回。</span><span class="sxs-lookup"><span data-stu-id="2937b-145">Change the query to return the coordinate sets as separate rows in the result set.</span></span>  
  
-   <span data-ttu-id="2937b-146">选择要改变的地图元素，并通过为对应的层类型覆盖默认的显示属性来设置对应的嵌入点、行或多边形属性。</span><span class="sxs-lookup"><span data-stu-id="2937b-146">Select the map elements to vary and set the corresponding embedded point, line, or polygon properties by overriding the default display properties for the corresponding layer type.</span></span>  
  
### <a name="my-layer-that-uses-spatial-data-from-an-esri-shapefile-always-has-embedded-data"></a><span data-ttu-id="2937b-147">使用来自 ESRI 形状文件的空间数据的层始终具有嵌入的数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-147">My layer that uses spatial data from an ESRI Shapefile always has embedded data.</span></span>  
 <span data-ttu-id="2937b-148">若要确保具有地图的报表可以在报表服务器上运行，ESRI 形状文件必须可用作报表服务器上的资源。</span><span class="sxs-lookup"><span data-stu-id="2937b-148">To ensure that reports with maps can run on a report server, ESRI Shapefiles must be available as resources on the report server.</span></span> <span data-ttu-id="2937b-149">如果您将层添加到地图并指定一个位于本地文件系统中的形状文件，则空间数据将自动嵌入到报表中。</span><span class="sxs-lookup"><span data-stu-id="2937b-149">If you add a layer to a map and specify a Shapefile that is on your local file system, the spatial data is automatically embedded in the report.</span></span>  
  
 <span data-ttu-id="2937b-150">若要将嵌入数据替换为指向 ESRI 形状文件的链接，必须将 .shp 文件及其匹配的 .dbf 文件上载到报表服务器，然后更改该层的空间数据的源。</span><span class="sxs-lookup"><span data-stu-id="2937b-150">To replace the embedded data with a link to the ESRI Shapefile, you must upload the .shp file and its matching .dbf file to the report server, and then change the source of spatial data for the layer.</span></span>  
  
### <a name="i-renamed-a-data-source-or-dataset-to-a-friendly-name-and-now-no-data-appears-in-my-map"></a><span data-ttu-id="2937b-151">我将数据源或数据集重命名为友好名称后，现在地图中不显示数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-151">I renamed a data source or dataset to a friendly name and now no data appears in my map.</span></span>  
 <span data-ttu-id="2937b-152">当您手动更改任何报表项的名称时，不会自动更新报表定义。</span><span class="sxs-lookup"><span data-stu-id="2937b-152">The report definition is not automatically updated when you manually change the name of any report item.</span></span>  
  
 <span data-ttu-id="2937b-153">当您更改数据集的名称时，必须手动更新引用该数据集的任何数据区域或地图层。</span><span class="sxs-lookup"><span data-stu-id="2937b-153">When you change the name of a dataset, any data region or map layer that refers to that dataset must be manually updated.</span></span> <span data-ttu-id="2937b-154">若要将 Tablix、图表或仪表绑定到数据集，请在设计图面上选择该项，打开数据区域属性，然后选择适当数据集的名称。</span><span class="sxs-lookup"><span data-stu-id="2937b-154">To rebind a tablix, chart, or gauge to a dataset, select the item on the design surface, open the data region properties, and select the name of the appropriate dataset.</span></span> <span data-ttu-id="2937b-155">若要将地图层绑定到数据集，请选择该层，打开层属性，然后选择适当数据集的名称。</span><span class="sxs-lookup"><span data-stu-id="2937b-155">To rebind a map layer to a dataset, select the layer, open the layer properties, and select the name of the appropriate dataset.</span></span>  
  
### <a name="my-spatial-data-contains-nulls-and-empty-strings"></a><span data-ttu-id="2937b-156">空间数据包含空值或空字符串。</span><span class="sxs-lookup"><span data-stu-id="2937b-156">My spatial data contains nulls and empty strings.</span></span>  
 <span data-ttu-id="2937b-157">在地图报表项的空间数据中，空值设置为零 (0)，而空字符串设置为空白 ("")。</span><span class="sxs-lookup"><span data-stu-id="2937b-157">In spatial data for the map report item, nulls are set to zero (0) and empty strings are set to blank ("").</span></span>  
  
 <span data-ttu-id="2937b-158">对于来自 SQL Server 数据库的空间数据，若要更改其行为，必须更改返回空间数据的查询。</span><span class="sxs-lookup"><span data-stu-id="2937b-158">For spatial that comes from a SQL Server database, to change this behavior, you must change the query that returns the spatial data.</span></span>  
  
### <a name="my-map-exceeds-the-maximum-number-of-spatial-elements"></a><span data-ttu-id="2937b-159">地图超过了最大空间元素数</span><span class="sxs-lookup"><span data-stu-id="2937b-159">My map exceeds the maximum number of spatial elements</span></span>  
 <span data-ttu-id="2937b-160">默认情况下，地图可以具有 20,000 个地图元素或 1,000,000 个点。</span><span class="sxs-lookup"><span data-stu-id="2937b-160">By default, a map can have 20,000 map elements or 1,000,000 points.</span></span> <span data-ttu-id="2937b-161">如果地图超出了这些限制，则可以使用以下方法之一：</span><span class="sxs-lookup"><span data-stu-id="2937b-161">If your map exceeds these limits, you can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="2937b-162">删除层。</span><span class="sxs-lookup"><span data-stu-id="2937b-162">Remove a layer.</span></span>  
  
-   <span data-ttu-id="2937b-163">降低地图分辨率。</span><span class="sxs-lookup"><span data-stu-id="2937b-163">Decrease the map resolution.</span></span>  
  
-   <span data-ttu-id="2937b-164">减小地图视区坐标以查看较小的区域。</span><span class="sxs-lookup"><span data-stu-id="2937b-164">Decrease the map viewport coordinates to view a smaller area.</span></span>  
  
-   <span data-ttu-id="2937b-165">如果空间数据来自报表数据集，则设置筛选器以限制数据集中的数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-165">If the spatial data comes from a report dataset, set a filter to limit the data from the dataset.</span></span> <span data-ttu-id="2937b-166">必须在不属于空间数据类型的字段上设置此筛选器。</span><span class="sxs-lookup"><span data-stu-id="2937b-166">The filter must be set on a field that is not a spatial data type.</span></span>  
  
-   <span data-ttu-id="2937b-167">如果空间数据来自 SQL Server 数据库，则更改此查询以使用空间函数将数据限制到较小的区域。</span><span class="sxs-lookup"><span data-stu-id="2937b-167">If the spatial data comes from a SQL Server database, change the query to use spatial functions to limit the data to a smaller area.</span></span>  
  
  
  
##  <a name="viewport-center-and-view-issues"></a><a name="Viewport"></a><span data-ttu-id="2937b-168">视区中心和视图问题</span><span class="sxs-lookup"><span data-stu-id="2937b-168">Viewport Center and View Issues</span></span>  
 <span data-ttu-id="2937b-169">使用这一部分可以帮助解决与视区选项相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-169">Use this section to help solve issues that relate to viewport options.</span></span>  
  
### <a name="i-cannot-set-the-center-and-view-on-an-embedded-map-element"></a><span data-ttu-id="2937b-170">无法对嵌入的地图元素设置居中和视图。</span><span class="sxs-lookup"><span data-stu-id="2937b-170">I cannot set the center and view on an embedded map element.</span></span>  
 <span data-ttu-id="2937b-171">若要使视区在特定地图元素上居中，必须已将层上的空间数据与分析数据关联。</span><span class="sxs-lookup"><span data-stu-id="2937b-171">To center a viewport on a specific map element, you must have associated the spatial data on a layer with analytical data.</span></span>  
  
### <a name="i-set-the-map-center-and-view-in-my-report-when-i-reopen-the-report-why-isnt-the-map-view-the-same"></a><span data-ttu-id="2937b-172">我在报表中对地图设置了居中和视图。</span><span class="sxs-lookup"><span data-stu-id="2937b-172">I set the map center and view in my report.</span></span> <span data-ttu-id="2937b-173">当我重新打开报表时，为何地图视图并不相同？</span><span class="sxs-lookup"><span data-stu-id="2937b-173">When I reopen the report, why isn't the map view the same?</span></span>  
 <span data-ttu-id="2937b-174">如果当您打开报表时，读取空间数据所需的用户凭据对于此报表不可用，将使用占位符空间数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-174">If the user credentials that are needed to read spatial data are not available to the report when you open it, placeholder spatial data is used.</span></span> <span data-ttu-id="2937b-175">根据您为地图视区设置的居中和缩放选项，地图视图可能在不同的层上居中。</span><span class="sxs-lookup"><span data-stu-id="2937b-175">Depending on the center and zoom options set for the map viewport, the map view might center on a different layer.</span></span>  
  
 <span data-ttu-id="2937b-176">若要重新加载空间数据并使用保存在报表中的地图视图中心，请右键单击地图视区，然后单击 **“重新加载”**。</span><span class="sxs-lookup"><span data-stu-id="2937b-176">To reload the spatial data and use the map view center saved in the report, right-click the map viewport, and then click **Reload**.</span></span> <span data-ttu-id="2937b-177">在为空间数据源输入凭据之后，该层将加载空间数据，并将还原地图视图。</span><span class="sxs-lookup"><span data-stu-id="2937b-177">After you enter the credentials for the spatial data source, the layer loads the spatial data and the map view is restored.</span></span>  
  
### <a name="the-center-and-view-for-a-map-layer-option-does-not-work"></a><span data-ttu-id="2937b-178">用于地图层的居中和视图选项不起作用。</span><span class="sxs-lookup"><span data-stu-id="2937b-178">The center and view for a map layer option does not work.</span></span>  
 <span data-ttu-id="2937b-179">如果视区设置为对于特定层的空间数据居中，并且视图中心并不显示为该层的中心，则可能是空间数据中包含的小岛或区域过小，而导致在视区中无法看到。</span><span class="sxs-lookup"><span data-stu-id="2937b-179">When the viewport is set to center on the spatial data for a specific layer, and the center of the view does not appear to be the center for the layer, there are probably small islands or areas that are included in the spatial data that are too small to be seen in the viewport.</span></span> <span data-ttu-id="2937b-180">例如，某个国家/地区的空间数据可能包含小岛或其他小地域作为其领土的一部分。</span><span class="sxs-lookup"><span data-stu-id="2937b-180">For example, spatial data for a country might include small islands or other small territories as part of the territory.</span></span> <span data-ttu-id="2937b-181">视区使用所有空间数据来计算层的中心。</span><span class="sxs-lookup"><span data-stu-id="2937b-181">The viewport uses all spatial data to calculate the center for the layer.</span></span>  
  
 <span data-ttu-id="2937b-182">若要覆盖层的计算，可以执行以下操作之一：</span><span class="sxs-lookup"><span data-stu-id="2937b-182">To override calculations for the layer, you can do one of the following:</span></span>  
  
-   <span data-ttu-id="2937b-183">为视区指定自定义中心。</span><span class="sxs-lookup"><span data-stu-id="2937b-183">Specify a custom center for the viewport.</span></span>  
  
-   <span data-ttu-id="2937b-184">更改视区的缩放级别，以消除您不想包含的位置。</span><span class="sxs-lookup"><span data-stu-id="2937b-184">Change the zoom level for the viewport to eliminate the locations that you do not want to include.</span></span>  
  
-   <span data-ttu-id="2937b-185">在报表中嵌入空间数据，并删除您不想包含的位置。</span><span class="sxs-lookup"><span data-stu-id="2937b-185">Embed the spatial data in the report and delete the locations that you do not want to include.</span></span>  
  
  
  
##  <a name="layer-issues"></a><a name="Layers"></a><span data-ttu-id="2937b-186">层问题</span><span class="sxs-lookup"><span data-stu-id="2937b-186">Layer Issues</span></span>  
 <span data-ttu-id="2937b-187">使用这一部分可以帮助解决与层选项相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-187">Use this section to help solve issues that relate to layer options.</span></span>  
  
### <a name="i-do-not-see-one-or-more-layers-in-my-map"></a><span data-ttu-id="2937b-188">我看不到地图中的一层或多层。</span><span class="sxs-lookup"><span data-stu-id="2937b-188">I do not see one or more layers in my map.</span></span>  
 <span data-ttu-id="2937b-189">您是否能看到报表中的某个地图层取决于以下因素：空间数据的可用性、空间数据与分析数据之间的关系、空间数据的类型和对应的层类型、层上的可见性和透明度选项以及层绘制顺序。</span><span class="sxs-lookup"><span data-stu-id="2937b-189">Whether you see a map layer in a report depends on the availability of the spatial data, the relationship between the spatial data and the analytical data, the type of spatial data and the corresponding layer type, the visibility and transparency options on the layer, and the layer drawing order.</span></span> <span data-ttu-id="2937b-190">如果您看不到某层的数据，则检查以下选项：</span><span class="sxs-lookup"><span data-stu-id="2937b-190">If you do not see data from a layer, check the following options:</span></span>  
  
-   <span data-ttu-id="2937b-191">**层类型和空间数据类型。**</span><span class="sxs-lookup"><span data-stu-id="2937b-191">**Layer type and spatial data type.**</span></span> <span data-ttu-id="2937b-192">层类型只显示与该层类型匹配的空间数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-192">The layer type displays only spatial data that matches the layer type.</span></span> <span data-ttu-id="2937b-193">例如，如果层类型为“点”，但空间数据为“线条”，则不显示任何数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-193">For example, if the layer type is Point but the spatial data is Line, no data will appear.</span></span>  
  
-   <span data-ttu-id="2937b-194">**匹配字段值。**</span><span class="sxs-lookup"><span data-stu-id="2937b-194">**Match field values.**</span></span> <span data-ttu-id="2937b-195">您指定要将分析数据与空间数据相关的字段中的值必须唯一标识每个地图元素。</span><span class="sxs-lookup"><span data-stu-id="2937b-195">The values in the fields that you specify to relate analytical data and spatial data must uniquely identify each map element.</span></span> <span data-ttu-id="2937b-196">这些字段必须具有相同的数据类型。</span><span class="sxs-lookup"><span data-stu-id="2937b-196">The fields must have the same data type.</span></span> <span data-ttu-id="2937b-197">字段中的值必须完全相同。</span><span class="sxs-lookup"><span data-stu-id="2937b-197">The values in the fields must be identical.</span></span> <span data-ttu-id="2937b-198">有关详细信息，请参阅 [图例、色阶和距离刻度问题](#Legend)。</span><span class="sxs-lookup"><span data-stu-id="2937b-198">For more information, see [Legend, Color Scale, and Distance Scale Issues](#Legend).</span></span>  
  
-   <span data-ttu-id="2937b-199">**层顺序。**</span><span class="sxs-lookup"><span data-stu-id="2937b-199">**Layer order.**</span></span> <span data-ttu-id="2937b-200">“地图”窗格中各层的顺序是在报表呈现器中绘制层时所采用的顺序。</span><span class="sxs-lookup"><span data-stu-id="2937b-200">The order of layers in the Map pane is the order in which layers are drawn in the report renderer.</span></span> <span data-ttu-id="2937b-201">首先绘制的层的空间数据可能会被后面绘制的层的空间数据覆盖。</span><span class="sxs-lookup"><span data-stu-id="2937b-201">Spatial data on layers which are drawn first might be overwritten by spatial data for layers that are drawn later.</span></span> <span data-ttu-id="2937b-202">将首先绘制出现在列表顶部的层。</span><span class="sxs-lookup"><span data-stu-id="2937b-202">Layers that appear at the top of the list are drawn first.</span></span> <span data-ttu-id="2937b-203">当您更改层在列表中的顺序时，您是在更改层的绘制顺序。</span><span class="sxs-lookup"><span data-stu-id="2937b-203">When you change the order layers in the list, you are changing the drawing order of the layers.</span></span>  
  
-   <span data-ttu-id="2937b-204">**透明化.**</span><span class="sxs-lookup"><span data-stu-id="2937b-204">**Transparency.**</span></span> <span data-ttu-id="2937b-205">可以单独为每个地图层指定透明度。</span><span class="sxs-lookup"><span data-stu-id="2937b-205">You can specify the transparency for each map layer independently.</span></span> <span data-ttu-id="2937b-206">默认的透明度值根据您添加层的方式不同而异。</span><span class="sxs-lookup"><span data-stu-id="2937b-206">Default values for transparency differ depending on how you add a layer.</span></span> <span data-ttu-id="2937b-207">透明度为 0% 表明该层是不透明的，而没有其他层数据将透过这种方式显示。</span><span class="sxs-lookup"><span data-stu-id="2937b-207">A transparency of 0% means the layer is opaque and no other layer data will show through this one.</span></span> <span data-ttu-id="2937b-208">若要允许其他数据透过现有层进行显示，请将该值调整为更高的百分比，以提供您所需的效果。</span><span class="sxs-lookup"><span data-stu-id="2937b-208">To allow other data to show through an existing layer, adjust the value to a higher percentage that gives you the effect that you want.</span></span>  
  
-   <span data-ttu-id="2937b-209">**可见.**</span><span class="sxs-lookup"><span data-stu-id="2937b-209">**Visibility.**</span></span> <span data-ttu-id="2937b-210">层的可见性为“可见”、“隐藏”或“ZoomBased”，具体根据地图视区的缩放级别而定。\*\*\*\*\*\*\*\*\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="2937b-210">Visibility for a layer is either **Visible**, **Hidden**, or **ZoomBased**, based on the zoom level of the map viewport.</span></span> <span data-ttu-id="2937b-211">还可以指定最大和最小缩放级别范围。</span><span class="sxs-lookup"><span data-stu-id="2937b-211">The maximum and minimum range for zoom level can also be specified.</span></span> <span data-ttu-id="2937b-212">可见性可以基于一个表达式，该表达式计算为上述三个值之一。</span><span class="sxs-lookup"><span data-stu-id="2937b-212">Visibility can be based on an expression that evaluates to one of these values.</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="2937b-213">可以针对“地图”窗格中的每层切换可见性。</span><span class="sxs-lookup"><span data-stu-id="2937b-213">You can toggle visibility for each layer in the Map pane.</span></span> <span data-ttu-id="2937b-214">当您设计每层时，请关闭所有其他层，以确定问题是针对某个单独层，还是针对层间的透明度问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-214">When you are designing each layer, toggle all other layers off to determine whether the issue is for an individual layer or is for transparency issues among layers.</span></span>  
  
### <a name="i-set-a-filter-on-the-map-layer-and-it-has-no-effect"></a><span data-ttu-id="2937b-215">我对地图层设置了一个筛选器，但它不起作用。</span><span class="sxs-lookup"><span data-stu-id="2937b-215">I set a filter on the map layer and it has no effect.</span></span>  
 <span data-ttu-id="2937b-216">若要对某层筛选数据，必须在筛选器表达式中指定数据类型。</span><span class="sxs-lookup"><span data-stu-id="2937b-216">To filter data for a layer, the data type in the filter expression must be specified.</span></span> <span data-ttu-id="2937b-217">请验证您已指定正确的基础数据类型，以便筛选器公式正确地计算指定的条件。</span><span class="sxs-lookup"><span data-stu-id="2937b-217">Verify that you have specified the correct underlying data type so that the filter equation correctly evaluates the specified condition.</span></span> <span data-ttu-id="2937b-218">有关详细信息，请参阅[筛选器公式示例（报表生成器和 SSRS）](filter-equation-examples-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="2937b-218">For more information, see [Filter Equation Examples &#40;Report Builder and SSRS&#41;](filter-equation-examples-report-builder-and-ssrs.md).</span></span>  
  
##  <a name="legend-color-scale-and-rule-issues"></a><a name="Legend"></a><span data-ttu-id="2937b-219">图例、色阶和规则问题</span><span class="sxs-lookup"><span data-stu-id="2937b-219">Legend, Color Scale, and Rule Issues</span></span>  
 <span data-ttu-id="2937b-220">使用这一部分可以帮助解决与规则、图例和色阶选项相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-220">Use this section to help solve issues that relate to rules, legend, and color scale options.</span></span>  
  
### <a name="how-do-i-control-the-values-in-the-map-legend"></a><span data-ttu-id="2937b-221">如何控制地图图例中的值？</span><span class="sxs-lookup"><span data-stu-id="2937b-221">How do I control the values in the map legend?</span></span>  
 <span data-ttu-id="2937b-222">将根据您为每个地图层指定的地图元素类型规则以及您为图例指定的分布规则，自动确定图例值。</span><span class="sxs-lookup"><span data-stu-id="2937b-222">Legend values are determined automatically from map element type rules that you specify for each map layer and by distribution rules that you specify for the legend.</span></span>  
  
 <span data-ttu-id="2937b-223">默认情况下，由所有规则生成的所有项显示在第一个图例中。</span><span class="sxs-lookup"><span data-stu-id="2937b-223">By default, all items generated by all rules display in the first legend.</span></span> <span data-ttu-id="2937b-224">每层的所有多边形、线条和点规则的值均影响合并的图例范围。</span><span class="sxs-lookup"><span data-stu-id="2937b-224">Values for all polygon, line, and point rules for each layer contribute to the combined legend range.</span></span> <span data-ttu-id="2937b-225">若要在不同的图例中显示项，首先必须创建多个图例，然后对于每个规则，指定在哪个图例中显示相关的项。</span><span class="sxs-lookup"><span data-stu-id="2937b-225">To display items in different legends, you must first create multiple legends and then, for each rule, specify in which legend to display the related items.</span></span>  
  
 <span data-ttu-id="2937b-226">若要将规则与特定图例关联，请打开规则属性，并在“图例”页上选择要使用的图例的名称。</span><span class="sxs-lookup"><span data-stu-id="2937b-226">To associate a rule with a specific legend, open the rule properties, and on the Legend page, select the name of the legend to use.</span></span> <span data-ttu-id="2937b-227">若要从图例中删除项，在图例选项中，为图例的名称选择空行。</span><span class="sxs-lookup"><span data-stu-id="2937b-227">To remove items from a legend, in legend options, select the blank line for the name of the legend.</span></span> <span data-ttu-id="2937b-228">如果您对报表中的图例元素进行重命名，则必须手动将每层与适当的图例项关联。</span><span class="sxs-lookup"><span data-stu-id="2937b-228">If you rename legend elements in the report, you must manually associate each layer with the appropriate legend item.</span></span>  
  
 <span data-ttu-id="2937b-229">若要控制每个图例的标题和内容，请将图例属性用于规则。</span><span class="sxs-lookup"><span data-stu-id="2937b-229">To control the title and content for each legend, use the Legend properties for the rule.</span></span> <span data-ttu-id="2937b-230">您可以指定要创建的划分数、更改向每个划分赋值的计算、设置最小和最大范围值以及更改图例文本的格式。</span><span class="sxs-lookup"><span data-stu-id="2937b-230">You can specify how many divisions to create, change the calculations that assign values to each division, set minimum and maximum range values, and change the format of the legend text.</span></span>  
  
 <span data-ttu-id="2937b-231">有关详细信息，请参阅 [更改地图图例、色阶和关联的规则（报表生成器和 SSRS）](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="2937b-231">For more information, see [Change Map Legends, Color Scale, and Associated Rules &#40;Report Builder and SSRS&#41;](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md).</span></span>  
  
### <a name="the-rules-that-i-set-do-not-give-the-results-that-i-expect"></a><span data-ttu-id="2937b-232">我设置的规则没有带来我预期的结果。</span><span class="sxs-lookup"><span data-stu-id="2937b-232">The rules that I set do not give the results that I expect.</span></span>  
 <span data-ttu-id="2937b-233">规则应用于与层上的地图元素关联的分析数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-233">Rules apply to the analytical data that is associated with map elements on a layer.</span></span> <span data-ttu-id="2937b-234">使用以下列表帮助确定与所有颜色规则、大小规则、宽度规则以及标记类型规则相关的问题：</span><span class="sxs-lookup"><span data-stu-id="2937b-234">Use the following list to help identify issues with all color rules, size rules, width rules, and marker type rules:</span></span>  
  
-   <span data-ttu-id="2937b-235">对每个地图元素（多边形、线条、点）应用样式的从低到高的顺序为：层属性、层上所有地图元素的地图元素属性、您指定的规则、然后是您为其选择覆盖选项的嵌入地图元素、您指定的值。</span><span class="sxs-lookup"><span data-stu-id="2937b-235">The precedence for applying style to each map element (polygon, line, point) is, from lowest to highest precedence: layer properties; map element properties for all map elements on the layer; rules that you specify; and then, for embedded map elements that you select the override option for, the values that you specify.</span></span> <span data-ttu-id="2937b-236">在为嵌入元素选择覆盖选项之后，规则不再适用，即使您后来将值改回为其原始设置。</span><span class="sxs-lookup"><span data-stu-id="2937b-236">Once you select the override option for an embedded element, rules no longer apply, even if you later change values back to their original setting.</span></span>  
  
-   <span data-ttu-id="2937b-237">匹配字段问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-237">Match field issues.</span></span> <span data-ttu-id="2937b-238">通过匹配字段，可以在地图元素与分析数据之间实现数据绑定。</span><span class="sxs-lookup"><span data-stu-id="2937b-238">Match fields enable data binding between map elements and analytical data.</span></span> <span data-ttu-id="2937b-239">与匹配字段对应的空间数据字段和分析数据字段必须具有相同的数据类型和相同的格式。</span><span class="sxs-lookup"><span data-stu-id="2937b-239">The spatial data and analytical data fields that correspond to match fields must have the same data type and the same format.</span></span> <span data-ttu-id="2937b-240">如果匹配字段与空间数据以及分析数据并不完全匹配，则规则不起任何作用。</span><span class="sxs-lookup"><span data-stu-id="2937b-240">If the match field does not exactly match the spatial data and analytical data, the rule has no effect.</span></span> <span data-ttu-id="2937b-241">例如，如果空间数据的匹配字段与分析数据的匹配字段相比，前者具有多余空格或多余标点符号，则不会发生匹配。</span><span class="sxs-lookup"><span data-stu-id="2937b-241">For example, if the match field for spatial data has extra blanks or extra punctuation compared to the match field for the analytical data, no match occurs.</span></span>  
  
-   <span data-ttu-id="2937b-242">有关详细信息，请参阅 [按规则和分析数据更改多边形、线条和点的显示方式（报表生成器和 SSRS）](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md)。</span><span class="sxs-lookup"><span data-stu-id="2937b-242">For more information, see [Vary Polygon, Line, and Point Display by Rules and Analytical Data &#40;Report Builder and SSRS&#41;](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md).</span></span>  
  
### <a name="what-is-the-value-nan-on-the-color-scale"></a><span data-ttu-id="2937b-243">对于色阶，值 NaN 是什么含义？</span><span class="sxs-lookup"><span data-stu-id="2937b-243">What is the value NaN on the Color Scale?</span></span>  
 <span data-ttu-id="2937b-244">`NaN` 表示“非数字”。</span><span class="sxs-lookup"><span data-stu-id="2937b-244">`NaN` stands for Not a Number.</span></span> <span data-ttu-id="2937b-245">色阶值应为数字值。</span><span class="sxs-lookup"><span data-stu-id="2937b-245">Color scales values are expected to be numeric.</span></span> <span data-ttu-id="2937b-246">对于与色阶关联的规则，检查分布设置和图例文本值。</span><span class="sxs-lookup"><span data-stu-id="2937b-246">Check the distribution settings and the legend text value for the rules that are associated with the color scale.</span></span> <span data-ttu-id="2937b-247">如果您创建了自定义分布范围，请验证您对第一个范围指定了下限，而对最后范围指定了上限。</span><span class="sxs-lookup"><span data-stu-id="2937b-247">If you created custom distribution ranges, verify that you specified the lower bound on the first range and the upper bound on the last range.</span></span>  
  
### <a name="my-color-scale-does-not-appear-when-i-run-the-report"></a><span data-ttu-id="2937b-248">当我运行报表时，不显示色阶。</span><span class="sxs-lookup"><span data-stu-id="2937b-248">My color scale does not appear when I run the report.</span></span>  
 <span data-ttu-id="2937b-249">当地图层为整个层的多边形、线条或点或嵌入地图元素指定颜色规则时，色阶向用户显示信息。</span><span class="sxs-lookup"><span data-stu-id="2937b-249">The color scale displays information to the user when a map layer specifies color rules for polygons, lines, or points for the whole layer or for embedded map elements.</span></span> <span data-ttu-id="2937b-250">如果没有地图元素指定颜色规则，或者如果地图规则是使用图例而非颜色地图指定的，则呈现的报表中不显示颜色地图。</span><span class="sxs-lookup"><span data-stu-id="2937b-250">If no map element specifies a color rule, or if the color rules specify by using a legend instead of the color map, then the color map does not appear in the rendered report.</span></span>  
  
 <span data-ttu-id="2937b-251">若要显示色阶，请为层或嵌入地图元素指定颜色规则。</span><span class="sxs-lookup"><span data-stu-id="2937b-251">To display the color scale, specify color rules for a layer or an embedded map element.</span></span> <span data-ttu-id="2937b-252">有关详细信息，请参阅 [更改地图图例、色阶和关联的规则（报表生成器和 SSRS）](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="2937b-252">For more information, see [Change Map Legends, Color Scale, and Associated Rules &#40;Report Builder and SSRS&#41;](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md).</span></span>  
  
  
  
##  <a name="tile-issues"></a><a name="Tile"></a><span data-ttu-id="2937b-253">磁贴问题</span><span class="sxs-lookup"><span data-stu-id="2937b-253">Tile Issues</span></span>  
 <span data-ttu-id="2937b-254">使用这一部分可以帮助解决与图块背景选项相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-254">Use this section to help solve issues that relate to tile background options.</span></span>  
  
### <a name="i-cannot-see-the-bing-maps-tile-background"></a><span data-ttu-id="2937b-255">我看不到 Bing 地图图块背景。</span><span class="sxs-lookup"><span data-stu-id="2937b-255">I cannot see the Bing maps tile background.</span></span>  
 <span data-ttu-id="2937b-256">下面的设置影响 Bing 地图图块背景是显示本地预览中，还是显示在从报表服务器运行的报表上。</span><span class="sxs-lookup"><span data-stu-id="2937b-256">The following settings affect whether a Bing maps tile background displays in local preview or on a report that runs from the report server:</span></span>  
  
-   <span data-ttu-id="2937b-257">地图图块层必须存在。</span><span class="sxs-lookup"><span data-stu-id="2937b-257">The map tile layer must exist.</span></span> <span data-ttu-id="2937b-258">在“地图”向导或“层”向导中，选择 **“为该地图视图添加 Bing 地图背景”**。</span><span class="sxs-lookup"><span data-stu-id="2937b-258">In the Map wizard or Layer wizard, select **Add a Bing Maps background for this map view**.</span></span> <span data-ttu-id="2937b-259">这将为当前地图视区视图中心和缩放级别添加一个图块层。</span><span class="sxs-lookup"><span data-stu-id="2937b-259">This adds a tile layer for the current map viewport view center and zoom level.</span></span> <span data-ttu-id="2937b-260">还可以从“地图”窗格工具栏中添加图块层。</span><span class="sxs-lookup"><span data-stu-id="2937b-260">You can also add a tile layer from the Map pane toolbar.</span></span>  
  
-   <span data-ttu-id="2937b-261">视区的地图坐标系必须为 **“地理”**，而非 **“平面数据”**。</span><span class="sxs-lookup"><span data-stu-id="2937b-261">The map coordinate system for the viewport must be **Geographic**, not **Planar**.</span></span>  
  
-   <span data-ttu-id="2937b-262">地图投影必须为 **Mercator**。</span><span class="sxs-lookup"><span data-stu-id="2937b-262">The map projection must be **Mercator**.</span></span>  
  
-   <span data-ttu-id="2937b-263">对于本地预览，您必须能够访问 Internet。</span><span class="sxs-lookup"><span data-stu-id="2937b-263">For local preview, you must have internet access.</span></span> <span data-ttu-id="2937b-264">对于从报表服务器运行的报表，必须将报表服务器配置为支持图块背景。</span><span class="sxs-lookup"><span data-stu-id="2937b-264">For a report that runs from the report server, the report server must be configure to support tile background.</span></span> <span data-ttu-id="2937b-265">有关详细信息，请参阅 SQL Server 联机丛书中 [Reporting Services 文档](https://go.microsoft.com/fwlink/?linkid=121312) 中的“规划地图支持”。</span><span class="sxs-lookup"><span data-stu-id="2937b-265">For more information, see "Planning for Map Support" in the [Reporting Services documentation](https://go.microsoft.com/fwlink/?linkid=121312) in SQL Server Books Online.</span></span>  
  
 <span data-ttu-id="2937b-266">有关添加图块层的详细信息，请参阅[添加、更改或删除地图或地图层（报表生成器和 SSRS）](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="2937b-266">For more information about adding a tile layer, see [Add, Change, or Delete a Map or Map Layer &#40;Report Builder and SSRS&#41;](add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md).</span></span>  
  
### <a name="how-do-i-control-the-text-on-a-tile-layer"></a><span data-ttu-id="2937b-267">如何控制图块层上的文本？</span><span class="sxs-lookup"><span data-stu-id="2937b-267">How do I control the text on a tile layer?</span></span>  
 <span data-ttu-id="2937b-268">**“道路”** 和 **“混合”** 视图均包含文本。</span><span class="sxs-lookup"><span data-stu-id="2937b-268">Both **Road** and **Hybrid** views include text.</span></span> <span data-ttu-id="2937b-269">文本是来自 Bing 地图 Web 服务的图块的组成部分。</span><span class="sxs-lookup"><span data-stu-id="2937b-269">The text is part of the tiles that come from Bing Maps Web Services.</span></span>  
  
 <span data-ttu-id="2937b-270">若要包含没有文本的图块层，请选择 **“空中”** 视图。</span><span class="sxs-lookup"><span data-stu-id="2937b-270">To include a tile layer without text, select **Aerial** view.</span></span>  
  
  
  
##  <a name="tooltip-and-label-issues"></a><a name="Tooltip"></a><span data-ttu-id="2937b-271">工具提示和标签问题</span><span class="sxs-lookup"><span data-stu-id="2937b-271">ToolTip and Label Issues</span></span>  
 <span data-ttu-id="2937b-272">使用这一部分可以帮助解决与标签或工具提示选项相关的问题。</span><span class="sxs-lookup"><span data-stu-id="2937b-272">Use this section to help solve issues that relate to label or ToolTip options.</span></span>  
  
### <a name="i-get-an-expression-error-about-dataset-scope-when-i-set-a-label-or-tooltip-to-an-expression"></a><span data-ttu-id="2937b-273">当我将标签或工具提示设置为表达式时，获得一个有关数据集作用域的表达式错误。</span><span class="sxs-lookup"><span data-stu-id="2937b-273">I get an expression error about dataset scope when I set a label or ToolTip to an expression.</span></span>  
 <span data-ttu-id="2937b-274">当您的空间数据来自地图库或 ESRI 形状文件时，关联的数据不是报表数据集的组成部分。</span><span class="sxs-lookup"><span data-stu-id="2937b-274">When your spatial data comes from a map gallery or an ESRI Shapefile, the associated data is not part of a report dataset.</span></span> <span data-ttu-id="2937b-275">您不能将表达式语法用于数据集字段引用来为标签或工具提示指定此数据。</span><span class="sxs-lookup"><span data-stu-id="2937b-275">You cannot use expression syntax for a dataset field reference to specify this data for a label or tooltip.</span></span>  
  
 <span data-ttu-id="2937b-276">若要指定与并非报表数据集组成部分的空间数据相关的数据，必须使用符号 # 且后跟一个指定数据名称的标签。</span><span class="sxs-lookup"><span data-stu-id="2937b-276">To specify data that is related to spatial data that is not part of a report dataset, you must use the symbol # followed by a label that specifies the name of the data.</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="2937b-277">另请参阅</span><span class="sxs-lookup"><span data-stu-id="2937b-277">See Also</span></span>  
 <span data-ttu-id="2937b-278">[地图（报表生成器和 SSRS）](maps-report-builder-and-ssrs.md) </span><span class="sxs-lookup"><span data-stu-id="2937b-278">[Maps &#40;Report Builder and SSRS&#41;](maps-report-builder-and-ssrs.md) </span></span>  
 [<span data-ttu-id="2937b-279">报表生成器故障排除</span><span class="sxs-lookup"><span data-stu-id="2937b-279">Troubleshoot Report Builder</span></span>](../troubleshoot-report-builder.md)  
  
  
