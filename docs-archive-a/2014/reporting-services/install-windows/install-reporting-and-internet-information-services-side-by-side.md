---
title: 并行安装 Reporting Services 和 Internet Information Services (SSRS 本机模式) |Microsoft Docs
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- deploying [Reporting Services], IIS
ms.assetid: 9b651fa5-f582-4f18-a77d-0dde95d9d211
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: c16bb8e5cd8fd040e0048c17183d69bae68268ec
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87682746"
---
# <a name="install-reporting-services-and-internet-information-services-side-by-side-ssrs-native-mode"></a><span data-ttu-id="3985e-102">并行安装 Reporting Services 和 Internet Information Services（SSRS 本机模式）</span><span class="sxs-lookup"><span data-stu-id="3985e-102">Install Reporting Services and Internet Information Services Side-by-Side (SSRS Native Mode)</span></span>
  <span data-ttu-id="3985e-103">您可以 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 在同一台计算机上安装和运行 (SSRS) 并 INTERNET INFORMATION SERVICES (IIS) 。</span><span class="sxs-lookup"><span data-stu-id="3985e-103">You can install and run [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] (SSRS) and Internet Information Services (IIS) on the same computer.</span></span> <span data-ttu-id="3985e-104">所用 IIS 的版本确定了必须解决的互操作性问题。</span><span class="sxs-lookup"><span data-stu-id="3985e-104">The version of IIS that you are using determines the interoperability issues you must address.</span></span>  
  
||  
|-|  
|[!INCLUDE[applies](../../includes/applies-md.md)]<span data-ttu-id="3985e-105">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]本机模式</span><span class="sxs-lookup"><span data-stu-id="3985e-105">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native mode</span></span>|  
  
|<span data-ttu-id="3985e-106">IIS 版本</span><span class="sxs-lookup"><span data-stu-id="3985e-106">IIS version</span></span>|<span data-ttu-id="3985e-107">问题</span><span class="sxs-lookup"><span data-stu-id="3985e-107">Issues</span></span>|<span data-ttu-id="3985e-108">说明</span><span class="sxs-lookup"><span data-stu-id="3985e-108">Description</span></span>|  
|-----------------|------------|-----------------|  
|<span data-ttu-id="3985e-109">IIS 6.0、7.0、8.0、8.5</span><span class="sxs-lookup"><span data-stu-id="3985e-109">IIS 6.0, 7.0, 8.0, 8.5</span></span>|<span data-ttu-id="3985e-110">一个应用程序收到发往另一个应用程序的请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-110">Requests intended for one application are accepted by a different application.</span></span><br /><br /> <span data-ttu-id="3985e-111">HTTP.SYS 强制实施了 URL 预留的优先规则。</span><span class="sxs-lookup"><span data-stu-id="3985e-111">HTTP.SYS enforces precedence rules for URL reservations.</span></span> <span data-ttu-id="3985e-112">在向多个具有相同虚拟目录名称且共同监视端口 80 的应用程序发出请求时，如果目标应用程序的 URL 预留相对于另一个应用程序的 URL 预留较弱，则这些请求可能无法到达预期的目标。</span><span class="sxs-lookup"><span data-stu-id="3985e-112">Requests that are sent to applications that have the same virtual directory name and that jointly monitor port 80 might not reach the intended target if the URL reservation is weak relative to the URL reservation of another application.</span></span>|<span data-ttu-id="3985e-113">在某些情况下，取代 URL 预留方案中另一个 URL 端点的已注册端点可能会收到发往其他应用程序的 HTTP 请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-113">Under certain conditions, a registered endpoint that supersedes another URL endpoint in the URL reservation scheme might receive HTTP requests intended for the other application.</span></span><br /><br /> <span data-ttu-id="3985e-114">报表服务器 Web 服务和报表管理器使用唯一的虚拟目录名有助于避免发生这种冲突。</span><span class="sxs-lookup"><span data-stu-id="3985e-114">Using unique virtual directory names for the Report Server Web service and Report Manager helps you avoid this conflict.</span></span><br /><br /> <span data-ttu-id="3985e-115">本主题中提供了有关此方案的详细信息。</span><span class="sxs-lookup"><span data-stu-id="3985e-115">Detailed information about this scenario is provided in this topic.</span></span>|  
  
## <a name="precedence-rules-for-url-reservations"></a><span data-ttu-id="3985e-116">URL 预留的优先规则</span><span class="sxs-lookup"><span data-stu-id="3985e-116">Precedence Rules for URL Reservations</span></span>  
 <span data-ttu-id="3985e-117">必须了解 URL 预留优先规则，才能解决 IIS 和 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 之间的互操作性问题。</span><span class="sxs-lookup"><span data-stu-id="3985e-117">Before you can address interoperability issues between IIS and [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], you must understand URL reservation precedence rules.</span></span> <span data-ttu-id="3985e-118">优先规则可以归纳为如下表述：具有更明确定义值的 URL 预留将首先收到与该 URL 相匹配的请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-118">Precedence rules can be generalized into the following statement: a URL reservation that has more explicitly defined values is first in line to receive requests that match the URL.</span></span>  
  
-   <span data-ttu-id="3985e-119">指定了虚拟目录的 URL 预留将比忽略了虚拟目录的 URL 预留更为明确。</span><span class="sxs-lookup"><span data-stu-id="3985e-119">A URL reservation that specifies a virtual directory is more explicit than one that omits a virtual directory.</span></span>  
  
-   <span data-ttu-id="3985e-120">指定了单个地址（IP 地址、完全限定的域名、网络计算机名称或主机名）的 URL 预留比使用通配符的 URL 预留更为明确。</span><span class="sxs-lookup"><span data-stu-id="3985e-120">A URL reservation that specifies a single address (by way of an IP address, a fully qualified domain name, a network computer name, or a host name) is more explicit than a wildcard.</span></span>  
  
-   <span data-ttu-id="3985e-121">指定了强通配符的 URL 预留比指定了弱通配符的 URL 预留更为明确。</span><span class="sxs-lookup"><span data-stu-id="3985e-121">A URL reservation that specifies a strong wildcard is more explicit than a weak wildcard.</span></span>  
  
 <span data-ttu-id="3985e-122">下面的几个示例演示了一系列 URL 预留，按照从最明确到最不明确的顺序排列：</span><span class="sxs-lookup"><span data-stu-id="3985e-122">The following examples show a range of URL reservations, ordered from most explicit to least explicit:</span></span>  
  
|<span data-ttu-id="3985e-123">示例</span><span class="sxs-lookup"><span data-stu-id="3985e-123">Example</span></span>|<span data-ttu-id="3985e-124">请求</span><span class="sxs-lookup"><span data-stu-id="3985e-124">Request</span></span>|  
|-------------|-------------|  
|<span data-ttu-id="3985e-125">http： \/ /123.234.345.456： 80/reports</span><span class="sxs-lookup"><span data-stu-id="3985e-125">http:\//123.234.345.456:80/reports</span></span>|<span data-ttu-id="3985e-126">\/ \<computername> 如果域名服务可以将 IP 地址解析为该主机名，则将接收发送到 http：/123.234.345.456/reports 或 http:///reports 的所有请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-126">Receives all requests that are sent to http:\//123.234.345.456/reports or http://\<computername>/reports if a domain name service can resolve the IP address to that host name.</span></span>|  
|http://+:80/reports|<span data-ttu-id="3985e-127">只要 URL 包含“reports”虚拟目录名，就将接收发送到对于该计算机有效的任何 IP 地址或主机名的任何请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-127">Receives any requests that are sent to any IP address or host name that is valid for that computer as long as the URL contains the "reports" virtual directory name.</span></span>|  
|<span data-ttu-id="3985e-128">http： \/ /123.234.345.456：80</span><span class="sxs-lookup"><span data-stu-id="3985e-128">http:\//123.234.345.456:80</span></span>|<span data-ttu-id="3985e-129">\/ \<computername> 如果域名服务可以将 IP 地址解析为该主机名，则接收任何指定 http：/123.234.345.456 或 http://的请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-129">Receives any request that specifies http:\//123.234.345.456 or http://\<computername> if a domain name service can resolve the IP address to that host name.</span></span>|  
|http://+:80|<span data-ttu-id="3985e-130">对于映射到 **“所有已分配的”** 的任何应用程序端点，接收尚未由其他应用程序接收的请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-130">Receives requests that are not already received by other applications, for any application endpoints that are mapped to **All Assigned**.</span></span>|  
|<span data-ttu-id="3985e-131">http://\*:80</span><span class="sxs-lookup"><span data-stu-id="3985e-131">http://\*:80</span></span>|<span data-ttu-id="3985e-132">对于映射到 **“所有未分配的”** 的应用程序端点，接收尚未由其他应用程序接收的请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-132">Receives requests that are not already received by other applications, for application endpoints that are mapped to **All Unassigned**.</span></span>|  
  
 <span data-ttu-id="3985e-133">端口冲突的一个迹象是看到以下错误消息：“System.IO.FileLoadException: 进程无法访问该文件，因为它正在被其他进程使用。</span><span class="sxs-lookup"><span data-stu-id="3985e-133">One indication of a port conflict is that you will see the following error message: 'System.IO.FileLoadException: The process cannot access the file because it is being used by another process.</span></span> <span data-ttu-id="3985e-134">(HRESULT 异常: 0x80070020)”。</span><span class="sxs-lookup"><span data-stu-id="3985e-134">(Exception from HRESULT: 0x80070020).'</span></span>  
  
## <a name="url-reservations-for-iis-60-70-80-85-with-sssql14-reporting-services"></a><span data-ttu-id="3985e-135">用于带 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] Reporting Services 的 IIS 6.0、7.0、8.0、8.5 的 URL 预留</span><span class="sxs-lookup"><span data-stu-id="3985e-135">URL Reservations for IIS 6.0, 7.0, 8.0, 8.5 with [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] Reporting Services</span></span>  
 <span data-ttu-id="3985e-136">使用上一节中概述的优先规则，即可以开始了解为 Reporting Services 和 IIS 定义的 URL 预留是如何提高互操作性的。</span><span class="sxs-lookup"><span data-stu-id="3985e-136">Given the precedence rules outlined in the previous section, you can begin to understand how URL reservations defined for Reporting Services and IIS promote interoperability.</span></span> <span data-ttu-id="3985e-137">Reporting Services 接收为其应用程序明确指定了虚拟目录名的请求；IIS 接收所有的剩余请求，这些请求随后可定向到运行于 IIS 进程模型中的应用程序。</span><span class="sxs-lookup"><span data-stu-id="3985e-137">Reporting Services receives requests that explicitly specify the virtual directory names for its applications; IIS receives all remaining requests, which can then be directed to applications that run within the IIS process model.</span></span>  
  
|<span data-ttu-id="3985e-138">应用程序</span><span class="sxs-lookup"><span data-stu-id="3985e-138">Application</span></span>|<span data-ttu-id="3985e-139">URL 预留</span><span class="sxs-lookup"><span data-stu-id="3985e-139">URL reservation</span></span>|<span data-ttu-id="3985e-140">说明</span><span class="sxs-lookup"><span data-stu-id="3985e-140">Description</span></span>|<span data-ttu-id="3985e-141">请求接收情况</span><span class="sxs-lookup"><span data-stu-id="3985e-141">Request receipt</span></span>|  
|-----------------|---------------------|-----------------|---------------------|  
|<span data-ttu-id="3985e-142">报表服务器</span><span class="sxs-lookup"><span data-stu-id="3985e-142">Report Server</span></span>|http://+:80/ReportServer|<span data-ttu-id="3985e-143">针对端口 80 使用强通配符，带有报表服务器虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="3985e-143">Strong wildcard on port 80, with report server virtual directory.</span></span>|<span data-ttu-id="3985e-144">接收端口 80 上指定了报表服务器虚拟目录的所有请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-144">Receives all requests on port 80 that specify the report server virtual directory.</span></span> <span data-ttu-id="3985e-145">报表服务器 Web 服务接收对 http:///reportserver。的所有请求 \<computername></span><span class="sxs-lookup"><span data-stu-id="3985e-145">The Report Server Web service receives all requests to http://\<computername>/reportserver.</span></span>|  
|<span data-ttu-id="3985e-146">报表管理器</span><span class="sxs-lookup"><span data-stu-id="3985e-146">Report Manager</span></span>|http://+:80/Reports|<span data-ttu-id="3985e-147">针对端口 80 使用强通配符，带有 Reports 虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="3985e-147">Strong wildcard on port 80, with Reports virtual directory.</span></span>|<span data-ttu-id="3985e-148">接收端口 80 上指定了 reports 虚拟目录的所有请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-148">Receives all requests on port 80 that specify the reports virtual directory.</span></span> <span data-ttu-id="3985e-149">报表管理器接收到 http:///reports。的所有请求 \<computername></span><span class="sxs-lookup"><span data-stu-id="3985e-149">Report Manager receives all requests to http://\<computername>/reports.</span></span>|  
|<span data-ttu-id="3985e-150">IIS</span><span class="sxs-lookup"><span data-stu-id="3985e-150">IIS</span></span>|<span data-ttu-id="3985e-151">http://\*:80/</span><span class="sxs-lookup"><span data-stu-id="3985e-151">http://\*:80/</span></span>|<span data-ttu-id="3985e-152">针对端口 80 使用弱通配符。</span><span class="sxs-lookup"><span data-stu-id="3985e-152">Weak wildcard on port 80.</span></span>|<span data-ttu-id="3985e-153">接收端口 80 上尚未由其他应用程序接收的所有剩余请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-153">Receives any remaining requests on port 80 that are not received by another application.</span></span>|  
  
## <a name="side-by-side-deployments-of-sscurrent-and-sql-server-2005-reporting-services-on-iis-60-70-80-85"></a><span data-ttu-id="3985e-154">在 IIS 6.0、7.0、8.0、8.5 上并行部署 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 和 SQL Server 2005 Reporting Services</span><span class="sxs-lookup"><span data-stu-id="3985e-154">Side-by-Side Deployments of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] and SQL Server 2005 Reporting Services on IIS 6.0, 7.0, 8.0, 8.5</span></span>  
 <span data-ttu-id="3985e-155">当 IIS 网站的虚拟目录名与 Reporting Services 所使用的虚拟目录名相同时，IIS 和 Reporting Services 之间会出现互操作性问题。</span><span class="sxs-lookup"><span data-stu-id="3985e-155">Interoperability issues between IIS and Reporting Services occur when IIS Web sites have virtual directory names that are identical to those used by Reporting Services.</span></span> <span data-ttu-id="3985e-156">例如，假设您具有以下配置：</span><span class="sxs-lookup"><span data-stu-id="3985e-156">For example, suppose you have the following configuration:</span></span>  
  
-   <span data-ttu-id="3985e-157">IIS 中一个分配到端口 80 的网站，以及名为“Reports”的虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="3985e-157">A Web site in IIS that is assigned to port 80 and a virtual directory named "Reports".</span></span>  
  
-   <span data-ttu-id="3985e-158">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]在默认配置中安装的 Report Server 实例，其中 URL 保留还指定端口80，报表管理器应用程序还使用 "Reports" 作为虚拟目录名。</span><span class="sxs-lookup"><span data-stu-id="3985e-158">A [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] report server instance installed in the default configuration, where the URL reservation also specifies port 80 and the Report Manager application also uses "Reports" for the virtual directory name.</span></span>  
  
 <span data-ttu-id="3985e-159">对于此配置，发送到 http:// \<computername> ： 80/reports 的请求将由报表管理器接收。</span><span class="sxs-lookup"><span data-stu-id="3985e-159">Given this configuration, a request that is sent to http://\<computername>:80/reports will be received by Report Manager.</span></span> <span data-ttu-id="3985e-160">在安装了 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 报表服务器实例之后，通过 IIS 中的 Reports 虚拟目录访问的应用程序将不再接收请求。</span><span class="sxs-lookup"><span data-stu-id="3985e-160">The application that is accessed through the Reports virtual directory in IIS will no longer receive requests after [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] report server instance is installed.</span></span>  
  
 <span data-ttu-id="3985e-161">如果您并行运行所部署的 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]的新旧版本，则有可能会遇到上面描述的路由问题。</span><span class="sxs-lookup"><span data-stu-id="3985e-161">If you are running side-by-side deployments of older and newer versions of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], you are likely to encounter the routing problem just described.</span></span> <span data-ttu-id="3985e-162">这是由于所有版本的 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 都使用“ReportServer”作为报表服务器的虚拟目录名，并使用“Reports”作为报表管理器应用程序的虚拟目录名，从而增加了在 IIS 中拥有“reports”和“reportserver”虚拟目录的可能性。</span><span class="sxs-lookup"><span data-stu-id="3985e-162">This is because all versions of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] use "ReportServer" and "Reports" as virtual directory names for the report server and Report Manager applications, increasing the likelihood that you will have a "reports" and "reportserver" virtual directories in IIS.</span></span>  
  
 <span data-ttu-id="3985e-163">为了确保所有的应用程序都能收到请求，请遵循下面的准则：</span><span class="sxs-lookup"><span data-stu-id="3985e-163">To ensure that all applications receive requests, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="3985e-164">对于 Reporting Services 安装，请使用 Reporting Services 所在端口上的 IIS 网站尚未使用的虚拟目录名。</span><span class="sxs-lookup"><span data-stu-id="3985e-164">For Reporting Services installations, use virtual directory names that are not already used by an IIS Web site on the same port as Reporting Services.</span></span> <span data-ttu-id="3985e-165">如果存在冲突，请在“仅文件”模式（使用“安装”，但是不在安装向导中配置服务器选项）下安装 Reporting Services，以便可以在安装完成后配置虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="3985e-165">If there is a conflict, install Reporting Services in "files-only" mode (using the Install but do not configure the server option in the Installation Wizard) so that you can configure the virtual directories after Setup is finished.</span></span> <span data-ttu-id="3985e-166">您的配置存在冲突的一个迹象是看到以下错误消息：“System.IO.FileLoadException: 进程无法访问该文件，因为它正在被其他进程使用。</span><span class="sxs-lookup"><span data-stu-id="3985e-166">One indication that your configuration has a conflict is you will see the error message: System.IO.FileLoadException: The process cannot access the file because it is being used by another process.</span></span> <span data-ttu-id="3985e-167">(HRESULT 异常: 0x80070020)”。</span><span class="sxs-lookup"><span data-stu-id="3985e-167">(Exception from HRESULT: 0x80070020).</span></span>  
  
-   <span data-ttu-id="3985e-168">对于手动配置的安装，请在所配置的 URL 中使用默认的命名约定。</span><span class="sxs-lookup"><span data-stu-id="3985e-168">For installations that you configure manually, adopt the default naming conventions in the URLs that configure.</span></span> <span data-ttu-id="3985e-169">如果以命名实例形式安装 [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] ，请在创建虚拟目录时包括实例名称。</span><span class="sxs-lookup"><span data-stu-id="3985e-169">If you install [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] as a named instance, include the instance name when creating a virtual directory.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3985e-170">另请参阅</span><span class="sxs-lookup"><span data-stu-id="3985e-170">See Also</span></span>  
 <span data-ttu-id="3985e-171">[配置报表服务器 URL（SSRS 配置管理器）](configure-report-server-urls-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="3985e-171">[Configure Report Server URLs  &#40;SSRS Configuration Manager&#41;](configure-report-server-urls-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="3985e-172">[&#40;SSRS Configuration Manager 配置 URL&#41;](configure-a-url-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="3985e-172">[Configure a URL  &#40;SSRS Configuration Manager&#41;](configure-a-url-ssrs-configuration-manager.md) </span></span>  
 [<span data-ttu-id="3985e-173">安装 Reporting Services 本机模式报表服务器</span><span class="sxs-lookup"><span data-stu-id="3985e-173">Install Reporting Services Native Mode Report Server</span></span>](install-reporting-services-native-mode-report-server.md)  
  
  
