---
title: 初始化报表服务器（SSRS 配置管理器）| Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], initializing
- initialization process [Reporting Services]
- checking report server initializations
- scale-out deployments [Reporting Services]
- initializing report servers [Reporting Services]
- verifying report server initializations
ms.assetid: 861d4ec4-1085-412c-9a82-68869a77bd55
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 66fa70c29d718e040b6423afcfdff28721753690
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87694306"
---
# <a name="initialize-a-report-server-ssrs-configuration-manager"></a><span data-ttu-id="efea2-102">初始化报表服务器（SSRS 配置管理器）</span><span class="sxs-lookup"><span data-stu-id="efea2-102">Initialize a Report Server (SSRS Configuration Manager)</span></span>
  <span data-ttu-id="efea2-103">在 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]中，已初始化的服务器是指可以在报表服务器数据库中加密和解密数据的服务器。</span><span class="sxs-lookup"><span data-stu-id="efea2-103">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], an initialized server is one that can encrypt and decrypt data in a report server database.</span></span> <span data-ttu-id="efea2-104">初始化是一项必需的报表服务器操作。</span><span class="sxs-lookup"><span data-stu-id="efea2-104">Initialization is a requirement for report server operation.</span></span> <span data-ttu-id="efea2-105">初始化在报表服务器服务第一次启动时发生。</span><span class="sxs-lookup"><span data-stu-id="efea2-105">Initialization occurs when the Report Server service is started for the first time.</span></span> <span data-ttu-id="efea2-106">在将报表服务器联接到现有部署，或在恢复进程中手动重新创建密钥时也需要进行初始化。</span><span class="sxs-lookup"><span data-stu-id="efea2-106">It also occurs when you join the report server to the existing deployment, or when you manually recreate the keys as part of the recovery process.</span></span> <span data-ttu-id="efea2-107">有关使用加密密钥的方法和原因的详细信息，请参阅[配置和管理加密密钥（SSRS 配置管理器）](ssrs-encryption-keys-manage-encryption-keys.md)和[存储加密的报表服务器数据（SSRS 配置管理器）](ssrs-encryption-keys-store-encrypted-report-server-data.md)。</span><span class="sxs-lookup"><span data-stu-id="efea2-107">For more information about how and why encryption keys are used, see [Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md) and [Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-store-encrypted-report-server-data.md).</span></span>  
  
 <span data-ttu-id="efea2-108">加密密钥部分基于报表服务器服务的配置文件信息。</span><span class="sxs-lookup"><span data-stu-id="efea2-108">Encryption keys are based partly on the profile information of the Report Server service.</span></span> <span data-ttu-id="efea2-109">如果更改用于运行报表服务器服务的用户标识，则必须相应地更新密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-109">If you change the user identity used to run the Report Server service, you must update the keys accordingly.</span></span> <span data-ttu-id="efea2-110">如果使用 Reporting Services 配置工具更改标识，将自动处理此步骤。</span><span class="sxs-lookup"><span data-stu-id="efea2-110">If you are using the Reporting Services Configuration tool to change the identity, this step is handled for you automatically.</span></span>  
  
 <span data-ttu-id="efea2-111">如果由于某些原因导致初始化失败，则报表服务器在响应用户和服务请求时将返回 `RSReportServerNotActivated` 错误。</span><span class="sxs-lookup"><span data-stu-id="efea2-111">If initialization fails for some reason, the report server returns an `RSReportServerNotActivated` error in response to user and service requests.</span></span> <span data-ttu-id="efea2-112">这种情况下，可能需要排除系统或服务器配置故障。</span><span class="sxs-lookup"><span data-stu-id="efea2-112">In this case, you may need to troubleshoot the system or server configuration.</span></span> <span data-ttu-id="efea2-113">有关详细信息，请参阅 Technet Wiki 中的 [SSRS：解决 Reporting Services 的问题和错误](https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) (https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) 。</span><span class="sxs-lookup"><span data-stu-id="efea2-113">For more information, see [SSRS: Troubleshoot Issues and Errors with Reporting Services](https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) (https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) in Technet Wiki.</span></span>  
  
## <a name="overview-of-the-initialization-process"></a><span data-ttu-id="efea2-114">初始化过程概述</span><span class="sxs-lookup"><span data-stu-id="efea2-114">Overview of the Initialization Process</span></span>  
 <span data-ttu-id="efea2-115">初始化过程将创建并存储一个用于加密的对称密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-115">The initialization process creates and stores a symmetric key used for encryption.</span></span> <span data-ttu-id="efea2-116">对称密钥由 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 加密服务创建，随后由报表服务器服务用来加密和解密数据。</span><span class="sxs-lookup"><span data-stu-id="efea2-116">The symmetric key is created by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows Cryptographic Services and subsequently used by the Report Server service to encrypt and decrypt data.</span></span> <span data-ttu-id="efea2-117">对称密钥本身通过非对称密钥进行加密。</span><span class="sxs-lookup"><span data-stu-id="efea2-117">The symmetric key is itself encrypted with an asymmetric key.</span></span>  
  
 <span data-ttu-id="efea2-118">以下步骤描述了初始化过程：</span><span class="sxs-lookup"><span data-stu-id="efea2-118">The following steps describe the initialization process:</span></span>  
  
1.  <span data-ttu-id="efea2-119">在初始启动时，报表服务器服务读取 RSReportServer.config 文件以获取安装标识符和数据库连接信息。</span><span class="sxs-lookup"><span data-stu-id="efea2-119">At initial start up, the Report Server service reads the RSReportServer.config file to get the installation identifier and database connection information.</span></span>  
  
2.  <span data-ttu-id="efea2-120">报表服务器服务从加密服务请求公钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-120">The Report Server service requests a public key from Cryptographic Services.</span></span> <span data-ttu-id="efea2-121">Windows 创建私钥和公钥并将公钥发送到报表服务器服务。</span><span class="sxs-lookup"><span data-stu-id="efea2-121">Windows creates a private and public key and sends the public key to the Report Server service.</span></span>  
  
3.  <span data-ttu-id="efea2-122">报表服务器服务连接到报表服务器数据库并存储安装标识符和公钥值。</span><span class="sxs-lookup"><span data-stu-id="efea2-122">The Report Server service connects to the report server database and stores the installation identifier and public key values.</span></span>  
  
4.  <span data-ttu-id="efea2-123">报表服务器服务再次调入加密服务，这次是请求对称密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-123">The Report Server service calls into Cryptographic Services again, this time to request a symmetric key.</span></span> <span data-ttu-id="efea2-124">Windows 创建对称密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-124">Windows creates the symmetric key.</span></span>  
  
5.  <span data-ttu-id="efea2-125">报表服务器服务再次连接到报表服务器数据库，并将对称密钥添加到步骤 3 中存储的公钥和安装标识符值中。</span><span class="sxs-lookup"><span data-stu-id="efea2-125">The Report Server service connects to the report server database again, and adds the symmetric key to the public key and installation identifier values that were stored in step 3.</span></span> <span data-ttu-id="efea2-126">在存储对称密钥之前，报表服务器服务使用其公钥对对称密钥进行加密。</span><span class="sxs-lookup"><span data-stu-id="efea2-126">Before storing it, the Report Server service uses its public key to encrypt the symmetric key.</span></span> <span data-ttu-id="efea2-127">存储对称密钥后，即可将报表服务器视为已初始化，并且可供使用。</span><span class="sxs-lookup"><span data-stu-id="efea2-127">Once the symmetric key is stored, the report server is considered initialized and available to use.</span></span>  
  
## <a name="initializing-a-report-server-for-scale-out-deployment"></a><span data-ttu-id="efea2-128">针对扩展部署初始化报表服务器</span><span class="sxs-lookup"><span data-stu-id="efea2-128">Initializing a Report Server for Scale-out Deployment</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="efea2-129">支持在多个报表服务器实例中共享单个报表服务器数据库的扩展部署模型。</span><span class="sxs-lookup"><span data-stu-id="efea2-129">supports a scale-out deployment model that shares a single report server database among multiple report server instances.</span></span> <span data-ttu-id="efea2-130">若要联接扩展部署，报表服务器必须在共享数据库中创建并存储其对称密钥副本。</span><span class="sxs-lookup"><span data-stu-id="efea2-130">To join a scale-out deployment, a report server must create and store its copy of the symmetric key in the shared database.</span></span> <span data-ttu-id="efea2-131">尽管使用该数据库的服务器都使用同一个对称密钥，但是每个报表服务器都有自己的密钥副本。</span><span class="sxs-lookup"><span data-stu-id="efea2-131">Although a single symmetric key is used by servers that use the database, each report server has its copy of the key.</span></span> <span data-ttu-id="efea2-132">每个副本各不相同，因为这些副本都使用其各自拥有的公钥进行了唯一加密。</span><span class="sxs-lookup"><span data-stu-id="efea2-132">Each copy varies in that it is uniquely encrypted using the public key its owner.</span></span>  
  
 <span data-ttu-id="efea2-133">针对扩展部署初始化报表服务器的开始步骤与描述初始化单个服务器和数据库组合的前三个步骤相同。</span><span class="sxs-lookup"><span data-stu-id="efea2-133">The first set of steps for initializing a report server for scale-out deployment are identical to the first three steps that describe initialization for a single server and database combination.</span></span>  
  
 <span data-ttu-id="efea2-134">扩展部署初始化过程的不同之处在于报表服务器获取对称密钥的方式。</span><span class="sxs-lookup"><span data-stu-id="efea2-134">The initialization process for a scale out deployment differs in how the report server gets the symmetric key.</span></span> <span data-ttu-id="efea2-135">在初始化第一个服务器时，它从 Windows 获取对称密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-135">When the first server is initialized, it gets the symmetric key from Windows.</span></span> <span data-ttu-id="efea2-136">在配置扩展部署的过程中，在初始化第二个服务器时，它将从已初始化的报表服务器服务中获取对称密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-136">When the second server is initialized during configuration for scale-out deployment, it gets the symmetric key from the Report Server service that is already initialized.</span></span> <span data-ttu-id="efea2-137">第一个报表服务器实例使用第二个实例的公钥来为第二个报表服务器实例创建对称密钥的加密副本。</span><span class="sxs-lookup"><span data-stu-id="efea2-137">The first report server instance uses the public key of the second instance to create an encrypted copy of the symmetric key for the second report server instance.</span></span> <span data-ttu-id="efea2-138">在此过程中的任何一点，对称密钥永远不会作为纯文本公开。</span><span class="sxs-lookup"><span data-stu-id="efea2-138">The symmetric key is never exposed as plain text at any point in this process.</span></span>  
  
## <a name="how-to-initialize-a-report-server"></a><span data-ttu-id="efea2-139">如何初始化报表服务器</span><span class="sxs-lookup"><span data-stu-id="efea2-139">How to Initialize a Report Server</span></span>  
  
-   <span data-ttu-id="efea2-140">若要初始化报表服务器，请使用 Reporting Services 配置工具。</span><span class="sxs-lookup"><span data-stu-id="efea2-140">To initialize a report server, use the Reporting Services Configuration tool.</span></span> <span data-ttu-id="efea2-141">在创建和配置报表服务器数据库时，将自动进行初始化。</span><span class="sxs-lookup"><span data-stu-id="efea2-141">Initialization occurs automatically when you create and configure the report server database.</span></span> <span data-ttu-id="efea2-142">有关详细信息，请参阅 [配置报表服务器数据库连接（SSRS 配置管理器）](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md)中支持的版本。</span><span class="sxs-lookup"><span data-stu-id="efea2-142">For more information, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="efea2-143">若要针对扩展部署初始化报表服务器，可以使用 Reporting Services 配置工具中的“初始化”页或使用 **RSKeymgmt** 实用工具。</span><span class="sxs-lookup"><span data-stu-id="efea2-143">To initialize a report server for scale-out deployment, you can use the Initialization page in the Reporting Services Configuration tool or the **RSKeymgmt** utility.</span></span> <span data-ttu-id="efea2-144">要按照分步说明操作，请参阅[配置本机模式报表服务器扩展部署（SSRS 配置管理器）](configure-a-native-mode-report-server-scale-out-deployment.md)。</span><span class="sxs-lookup"><span data-stu-id="efea2-144">To follow step-by-step instructions, see [Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](configure-a-native-mode-report-server-scale-out-deployment.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="efea2-145">RSKeymgmt 是一种控制台应用程序，需要在托管扩展部署中已包含的报表服务器实例的计算机上从命令行运行  。</span><span class="sxs-lookup"><span data-stu-id="efea2-145">**RSKeymgmt** is a console application that you run from a command line on a computer that hosts a report server instance that is already part of a scale-out deployment.</span></span> <span data-ttu-id="efea2-146">运行该实用工具时，需要指定相关参数，以选择要初始化的远程报表服务器实例。</span><span class="sxs-lookup"><span data-stu-id="efea2-146">When you run the utility, you specify arguments to select a remote report server instance that you want to initialize.</span></span>  
  
 <span data-ttu-id="efea2-147">只有当安装标识符与公钥相匹配时，才会初始化报表服务器。</span><span class="sxs-lookup"><span data-stu-id="efea2-147">A report server will be initialized only if there is a match between the installation identifier and the public key.</span></span> <span data-ttu-id="efea2-148">如果匹配成功，则创建允许可逆加密的对称密钥。</span><span class="sxs-lookup"><span data-stu-id="efea2-148">If the match succeeds, a symmetric key is created that permits reversible encryption.</span></span> <span data-ttu-id="efea2-149">如果匹配失败，则将禁用报表服务器，在这种情况下，可能需要应用备份密钥；如果备份密钥不可用或无效，则可能需要删除加密数据。</span><span class="sxs-lookup"><span data-stu-id="efea2-149">If the match fails, the report server is disabled, in which case you may be required to apply a backup key or delete the encrypted data if a backup key is unavailable or not valid.</span></span> <span data-ttu-id="efea2-150">有关报表服务器使用的加密密钥的详细信息，请参阅[配置和管理加密密钥（SSRS 配置管理器）](ssrs-encryption-keys-manage-encryption-keys.md)。</span><span class="sxs-lookup"><span data-stu-id="efea2-150">For more information about encryption keys used by a report server, see [Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="efea2-151">还可以使用 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Windows Management Instrumentation (WMI) 提供程序以编程的方式初始化报表服务器。</span><span class="sxs-lookup"><span data-stu-id="efea2-151">You can also use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Windows Management Instrumentation (WMI) provider to initialize a report server programmatically.</span></span> <span data-ttu-id="efea2-152">有关详细信息，请参阅 [联机丛书中的](../tools/access-the-reporting-services-wmi-provider.md) 访问 Reporting Services WMI 提供程序 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="efea2-152">For more information, see [Access the Reporting Services WMI Provider](../tools/access-the-reporting-services-wmi-provider.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="how-to-confirm-a-report-server-initialization"></a><span data-ttu-id="efea2-153">如何确认报表服务器初始化</span><span class="sxs-lookup"><span data-stu-id="efea2-153">How to Confirm a Report Server Initialization</span></span>  
 <span data-ttu-id="efea2-154">若要确认 Report Server 初始化，请通过在命令窗口中键入 " **http:// \<servername> /reportserver** " 来 Ping 报表服务器 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="efea2-154">To confirm report server initialization, ping the Report Server Web service by typing **http://\<servername>/reportserver** in the command window.</span></span> <span data-ttu-id="efea2-155">如果发生 `RSReportServerNotActivated` 错误，则表示初始化失败。</span><span class="sxs-lookup"><span data-stu-id="efea2-155">If the `RSReportServerNotActivated` error occurs, the initialization failed.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="efea2-156">另请参阅</span><span class="sxs-lookup"><span data-stu-id="efea2-156">See Also</span></span>  
 [<span data-ttu-id="efea2-157">存储加密的 Report Server 数据（SSRS 配置管理器）</span><span class="sxs-lookup"><span data-stu-id="efea2-157">Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-store-encrypted-report-server-data.md)  
  
  
