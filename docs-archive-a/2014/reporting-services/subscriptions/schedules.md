---
title: 计划 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- schedules [Reporting Services]
- schedules [Reporting Services], about schedules
- published reports [Reporting Services], schedules
- reports [Reporting Services], scheduling
- subscriptions [Reporting Services], scheduling
- automatic report processing
ms.assetid: ecccd16b-eba9-4e95-b55d-f15c621e003f
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 99bcfbf6559c0f3b59bede54eae6224b4973797b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692656"
---
# <a name="schedules"></a><span data-ttu-id="ba11f-102">计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-102">Schedules</span></span>
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="ba11f-103">提供了共享计划和报表特定计划，可帮助您控制报表的处理和分发。</span><span class="sxs-lookup"><span data-stu-id="ba11f-103">provides shared schedules and report-specific schedules to help you control processing and distribution of reports.</span></span> <span data-ttu-id="ba11f-104">这两种计划类型之间的区别在于对它们进行定义、存储和管理的方式。</span><span class="sxs-lookup"><span data-stu-id="ba11f-104">The difference between the two types of schedules is how they are defined, stored, and managed.</span></span> <span data-ttu-id="ba11f-105">这两种类型的计划的内部构造是相同的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-105">The internal construction of the two types of schedules is the same.</span></span> <span data-ttu-id="ba11f-106">所有计划都指定一种重复执行类型：每月、每周或每日。</span><span class="sxs-lookup"><span data-stu-id="ba11f-106">All schedules specify a type of recurrence: monthly, weekly, or daily.</span></span> <span data-ttu-id="ba11f-107">在重复执行类型中，您将为事件发生的频率设置间隔和范围。</span><span class="sxs-lookup"><span data-stu-id="ba11f-107">Within the recurrence type, you set the intervals and range for how often an event is to occur.</span></span> <span data-ttu-id="ba11f-108">无论您创建的是共享计划还是报表特定计划，重复执行模式的类型以及指定那些模式的方式是相同的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-108">The type of recurrence pattern and how those patterns are specified is the same whether you create a shared schedule or a report-specific schedule.</span></span>  
  
 <span data-ttu-id="ba11f-109">本主题内容：</span><span class="sxs-lookup"><span data-stu-id="ba11f-109">In this topic:</span></span>  
  
-   [<span data-ttu-id="ba11f-110">可对计划执行的操作</span><span class="sxs-lookup"><span data-stu-id="ba11f-110">What you can do with Schedules</span></span>](#bkmk_whatyoucando)  
  
-   [<span data-ttu-id="ba11f-111">比较共享计划和报表特定计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-111">Comparing Shared and Report-Specific Schedules</span></span>](#bkmk_compare)  
  
-   [<span data-ttu-id="ba11f-112">配置数据源</span><span class="sxs-lookup"><span data-stu-id="ba11f-112">Configure the Data Sources</span></span>](#bkmk_configuredatasources)  
  
-   [<span data-ttu-id="ba11f-113">存储凭据和处理帐户</span><span class="sxs-lookup"><span data-stu-id="ba11f-113">Store Credentials and Processing accounts</span></span>](#bkmk_credentials)  
  
-   [<span data-ttu-id="ba11f-114">计划和传递处理的工作原理</span><span class="sxs-lookup"><span data-stu-id="ba11f-114">How Scheduling and Delivery Processing Works</span></span>](#bkmk_how_scheduling_works)  
  
-   [<span data-ttu-id="ba11f-115">服务器依赖项</span><span class="sxs-lookup"><span data-stu-id="ba11f-115">Server Dependencies</span></span>](#bkmk_serverdependencies)  
  
-   [<span data-ttu-id="ba11f-116">停止 SQL Server 代理的效果</span><span class="sxs-lookup"><span data-stu-id="ba11f-116">Effects of Stopping the SQL Server Agent</span></span>](#bkmk_stoppingagent)  
  
-   [<span data-ttu-id="ba11f-117">停止报表服务器服务的影响</span><span class="sxs-lookup"><span data-stu-id="ba11f-117">Effects of Stopping the Report Server Service</span></span>](#bkmk_stoppingservice)  
  
  
##  <a name="what-you-can-do-with-schedules"></a><a name="bkmk_whatyoucando"></a> <span data-ttu-id="ba11f-118">可对计划执行的操作</span><span class="sxs-lookup"><span data-stu-id="ba11f-118">What you can do with Schedules</span></span>  
 <span data-ttu-id="ba11f-119">可以使用本机模式下的报表管理器或 SharePoint 模式下的 SharePoint 站点管理页来创建和管理计划。</span><span class="sxs-lookup"><span data-stu-id="ba11f-119">You can use Report Manager in Native mode and SharePoint site administration pages in SharePoint mode to create and manage your schedules.</span></span> <span data-ttu-id="ba11f-120">可以：</span><span class="sxs-lookup"><span data-stu-id="ba11f-120">You can:</span></span>  
  
-   <span data-ttu-id="ba11f-121">计划标准订阅或数据驱动订阅中的报表传递时间。</span><span class="sxs-lookup"><span data-stu-id="ba11f-121">Schedule report delivery in a standard or data-driven subscription.</span></span>  
  
-   <span data-ttu-id="ba11f-122">计划报表历史记录，以便按固定的时间间隔向报表历史记录中添加新的快照。</span><span class="sxs-lookup"><span data-stu-id="ba11f-122">Schedule report history so that new snapshots are added to report history at regular intervals.</span></span>  
  
-   <span data-ttu-id="ba11f-123">计划刷新报表快照数据的时间。</span><span class="sxs-lookup"><span data-stu-id="ba11f-123">Schedule when to refresh the data of a report snapshot.</span></span>  
  
-   <span data-ttu-id="ba11f-124">计划刷新共享数据集的数据的时间。</span><span class="sxs-lookup"><span data-stu-id="ba11f-124">Schedule when to refresh the data of a shared dataset</span></span>  
  
-   <span data-ttu-id="ba11f-125">将缓存报表或共享数据集的过期时间计划在预定义时间，之后就可以刷新该报表。</span><span class="sxs-lookup"><span data-stu-id="ba11f-125">Schedule the expiration of a cached report or shared dataset to occur at a predefined time so that it can be subsequently refreshed.</span></span>  
  
 <span data-ttu-id="ba11f-126">如果希望将计划信息用于多个报表或订阅，则可以创建共享计划。</span><span class="sxs-lookup"><span data-stu-id="ba11f-126">You can create a shared schedule if you want to use the same schedule information for many reports or subscriptions.</span></span> <span data-ttu-id="ba11f-127">共享计划是单独定义的，然后就可以在需要计划信息的报表、共享数据集和订阅中引用。</span><span class="sxs-lookup"><span data-stu-id="ba11f-127">Shared schedules are defined separately, and then referenced in reports, shared datasets, and subscriptions that need schedule information.</span></span>  
  
 <span data-ttu-id="ba11f-128">创建计划时，报表会将计划信息保存在报表服务器的数据库中，或者对于 SharePoint 模式，保存在服务应用程序数据库中。</span><span class="sxs-lookup"><span data-stu-id="ba11f-128">When you create a schedule, the report saves the schedule information in the report server database or for SharePoint mode, the service application database.</span></span> <span data-ttu-id="ba11f-129">报表服务器还会创建用于触发计划的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理作业。</span><span class="sxs-lookup"><span data-stu-id="ba11f-129">The report server also creates a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job that is used to trigger the schedule.</span></span> <span data-ttu-id="ba11f-130">计划是基于其所在报表服务器的本地时间进行处理的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-130">Schedule processing is based on the local time of the report server that contains the schedule.</span></span> <span data-ttu-id="ba11f-131">其时间格式遵从 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 操作系统标准。</span><span class="sxs-lookup"><span data-stu-id="ba11f-131">The time format follows the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows operating system standard.</span></span>  
  
 <span data-ttu-id="ba11f-132">有关如何创建和管理计划的详细信息，请参阅 [Create, Modify, and Delete Schedules](create-modify-and-delete-schedules.md)。</span><span class="sxs-lookup"><span data-stu-id="ba11f-132">For details on how to create and manage schedules, see [Create, Modify, and Delete Schedules](create-modify-and-delete-schedules.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ba11f-133">并非在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的每个版本中均提供计划操作。</span><span class="sxs-lookup"><span data-stu-id="ba11f-133">Schedule operations are not available in every edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ba11f-134">有关各个版本支持的功能列表 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，请参阅[SQL Server 2012 (版本支持的功能](https://go.microsoft.com/fwlink/?linkid=232473) https://go.microsoft.com/fwlink/?linkid=232473) 。</span><span class="sxs-lookup"><span data-stu-id="ba11f-134">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2012](https://go.microsoft.com/fwlink/?linkid=232473) (https://go.microsoft.com/fwlink/?linkid=232473).</span></span>  
  
##  <a name="comparing-shared-and-report-specific-schedules"></a><a name="bkmk_compare"></a> <span data-ttu-id="ba11f-135">共享计划和报表特定计划的区别</span><span class="sxs-lookup"><span data-stu-id="ba11f-135">Comparing Shared and Report-Specific Schedules</span></span>  
 <span data-ttu-id="ba11f-136">两种类型的计划将产生相同的输出：</span><span class="sxs-lookup"><span data-stu-id="ba11f-136">Both types of schedules yield the same output:.</span></span>  
  
-   <span data-ttu-id="ba11f-137">**共享计划** 是可移植的多用途项，包含有现成的计划信息。</span><span class="sxs-lookup"><span data-stu-id="ba11f-137">**Shared schedules** are portable, multipurpose items that contain ready-to-use schedule information.</span></span> <span data-ttu-id="ba11f-138">由于共享计划是系统级的项，因此创建共享计划需要具有系统级权限。</span><span class="sxs-lookup"><span data-stu-id="ba11f-138">Because shared schedules are system-level items, creating a shared schedule requires system-level permissions.</span></span> <span data-ttu-id="ba11f-139">由于这个原因，您的报表服务器上的可用共享计划通常都是由报表服务器管理员或内容管理员创建的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-139">For this reason, a report server administrator or content manager typically creates the shared schedules that are available on your report server.</span></span> <span data-ttu-id="ba11f-140">共享计划是使用报表管理器或 SharePoint 站点设置在报表服务器上存储和管理的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-140">Shared schedules are stored and managed on the report server by using Report Manager or SharePoint site settings.</span></span>  
  
     <span data-ttu-id="ba11f-141">与通过报表属性、共享数据集属性或订阅属性定义的特定计划相比，共享计划更易于管理和维护，具体原因如下：</span><span class="sxs-lookup"><span data-stu-id="ba11f-141">In contrast with specific schedules that you define through report, shared dataset, or subscription properties, shared schedules are easier to manage and maintain for the following reasons:</span></span>  
  
    -   <span data-ttu-id="ba11f-142">可以从一个中央位置管理共享计划，如果各个计划操作的运行间隔很短或者与服务器上的其他进程相冲突，这便于比较计划属性以及调整频率和重复执行模式。</span><span class="sxs-lookup"><span data-stu-id="ba11f-142">Shared schedules can be managed from a central location, making it easier to compare schedule properties and adjust frequency and recurrence patterns if scheduled operations are running too close together or conflicting with other processes on your server.</span></span>  
  
    -   <span data-ttu-id="ba11f-143">使您可以快速适应计算环境的更改。</span><span class="sxs-lookup"><span data-stu-id="ba11f-143">Allows you to quickly adapt to changes in the computing environment.</span></span> <span data-ttu-id="ba11f-144">例如，假定在刷新数据仓库之后有一组在早晨 4:00 运行的</span><span class="sxs-lookup"><span data-stu-id="ba11f-144">For example, suppose you have a set of reports that run at 4:00 A.M.</span></span> <span data-ttu-id="ba11f-145">报表。</span><span class="sxs-lookup"><span data-stu-id="ba11f-145">after a data warehouse is refreshed.</span></span> <span data-ttu-id="ba11f-146">如果重新计划或延迟了数据刷新操作，则通过更新单个共享计划中的计划信息可以轻易地适应该更改。</span><span class="sxs-lookup"><span data-stu-id="ba11f-146">If the data refresh operation is rescheduled or is delayed, you can easily accommodate that change by updating the schedule information in a single shared schedule.</span></span>  
  
    -   <span data-ttu-id="ba11f-147">如果仅使用共享计划，则可以清楚地知道执行计划操作的时间。</span><span class="sxs-lookup"><span data-stu-id="ba11f-147">If you use only shared schedules, you know precisely when scheduled operations occur.</span></span> <span data-ttu-id="ba11f-148">这便于在发生性能问题之前预计和调整服务器负载。</span><span class="sxs-lookup"><span data-stu-id="ba11f-148">This makes it easier to anticipate and accommodate server loads before performance issues occur.</span></span> <span data-ttu-id="ba11f-149">例如，如果决定在特定时间进行计算机备份，则可以调整共享计划在不同的时间运行。</span><span class="sxs-lookup"><span data-stu-id="ba11f-149">For example, if you decide to schedule computer backups at a specific hour, you can adjust shared schedules to run at different times.</span></span>  
  
-   <span data-ttu-id="ba11f-150">**报表特定计划** 在特定的报表、订阅或报表执行操作的上下文中定义，用于确定缓存过期或快照更新的时间。</span><span class="sxs-lookup"><span data-stu-id="ba11f-150">**Report-specific schedules** are defined in the context of an individual report, subscription, or report execution operation to determine cache expiration or snapshot updates.</span></span> <span data-ttu-id="ba11f-151">当您定义订阅或设置报表执行属性时，同时也会创建这些计划。</span><span class="sxs-lookup"><span data-stu-id="ba11f-151">These schedules are created inline when you define a subscription or set report execution properties.</span></span> <span data-ttu-id="ba11f-152">如果共享计划不能提供所需的频率或重复执行模式，则可以创建报表特定计划。</span><span class="sxs-lookup"><span data-stu-id="ba11f-152">You can create a report-specific schedule if a shared schedule does not provide the frequency or recurrence pattern that you need.</span></span> <span data-ttu-id="ba11f-153">若要禁止报表运行，必须手动编辑报表特定计划。</span><span class="sxs-lookup"><span data-stu-id="ba11f-153">To prevent a report from running, you must edit a report-specific schedule manually.</span></span> <span data-ttu-id="ba11f-154">报表特定计划可以由各个用户创建。</span><span class="sxs-lookup"><span data-stu-id="ba11f-154">Report-specific schedules can be created by individual users.</span></span>  
  
##  <a name="configure-the-data-sources"></a><a name="bkmk_configuredatasources"></a> <span data-ttu-id="ba11f-155">配置数据源</span><span class="sxs-lookup"><span data-stu-id="ba11f-155">Configure the Data Sources</span></span>  
 <span data-ttu-id="ba11f-156">必须先将报表数据源配置为使用存储的凭据或无人参与的报表处理帐户，才能计划报表的数据或订阅处理。</span><span class="sxs-lookup"><span data-stu-id="ba11f-156">Before you can schedule data or subscription processing for a report, you must configure the report data source to use stored credentials or the unattended report processing account.</span></span> <span data-ttu-id="ba11f-157">如果使用存储的凭据，则只能存储一组凭据，运行该报表的所有用户都将使用这组凭据。</span><span class="sxs-lookup"><span data-stu-id="ba11f-157">If you use stored credentials, you can only store one set of credentials, and they will be used by all users who run the report.</span></span> <span data-ttu-id="ba11f-158">凭据可以是 Windows 用户帐户，也可以是数据库用户帐户。</span><span class="sxs-lookup"><span data-stu-id="ba11f-158">The credentials can be a Windows user account or a database user account.</span></span>  
  
 <span data-ttu-id="ba11f-159">无人参与的报表处理帐户是在报表服务器上配置的特殊用途的帐户。</span><span class="sxs-lookup"><span data-stu-id="ba11f-159">The unattended report processing account is a special-purpose account that is configured on the report server.</span></span> <span data-ttu-id="ba11f-160">当计划操作需要检索外部文件或处理时，报表服务器可以使用该帐户连接到远程计算机。</span><span class="sxs-lookup"><span data-stu-id="ba11f-160">It is used by the report server to connect to remote computers when a scheduled operation requires the retrieval of an external file or processing.</span></span> <span data-ttu-id="ba11f-161">如果配置该帐户，则可以使用它连接到向报表提供数据的外部数据源。</span><span class="sxs-lookup"><span data-stu-id="ba11f-161">If you configure the account, you can use it to connect to external data sources that provide data to a report.</span></span>  
  
 <span data-ttu-id="ba11f-162">若要指定存储的凭据或无人参与的报表处理帐户，请编辑该报表的数据源属性。</span><span class="sxs-lookup"><span data-stu-id="ba11f-162">To specify stored credentials or the unattended report processing account, edit the data source properties of the report.</span></span> <span data-ttu-id="ba11f-163">如果报表使用共享数据源，则改为编辑共享数据源。</span><span class="sxs-lookup"><span data-stu-id="ba11f-163">If the report uses a shared data source, edit the shared data source instead.</span></span>  
  
##  <a name="store-credentials-and-processing-accounts"></a><a name="bkmk_credentials"></a> <span data-ttu-id="ba11f-164">存储凭据和处理帐户</span><span class="sxs-lookup"><span data-stu-id="ba11f-164">Store Credentials and Processing accounts</span></span>  
 <span data-ttu-id="ba11f-165">您对计划的处理权限取决于您的角色分配中的任务。</span><span class="sxs-lookup"><span data-stu-id="ba11f-165">How you work with a schedule depends on tasks that are part of your role assignment.</span></span> <span data-ttu-id="ba11f-166">如果使用预定义角色，则作为“内容管理员”和“系统管理员”的用户可以创建和管理任何计划。</span><span class="sxs-lookup"><span data-stu-id="ba11f-166">If you are using predefined roles, users who are Content Managers and System Administrators can create and manage any schedule.</span></span> <span data-ttu-id="ba11f-167">如果您使用自定义角色分配，角色分配必须包括支持计划操作的任务。</span><span class="sxs-lookup"><span data-stu-id="ba11f-167">If you use custom role assignments, the role assignment must include tasks that support scheduled operations.</span></span>  
  
|<span data-ttu-id="ba11f-168">要执行此操作</span><span class="sxs-lookup"><span data-stu-id="ba11f-168">To do this</span></span>|<span data-ttu-id="ba11f-169">包括此任务</span><span class="sxs-lookup"><span data-stu-id="ba11f-169">Include this task</span></span>|<span data-ttu-id="ba11f-170">本机模式预定义角色</span><span class="sxs-lookup"><span data-stu-id="ba11f-170">Native Mode Predefined roles</span></span>|<span data-ttu-id="ba11f-171">SharePoint 模式组</span><span class="sxs-lookup"><span data-stu-id="ba11f-171">SharePoint mode Groups</span></span>|  
|----------------|-----------------------|----------------------------------|----------------------------|  
|<span data-ttu-id="ba11f-172">创建、修改或删除共享计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-172">Create, modify, or delete shared schedules</span></span>|<span data-ttu-id="ba11f-173">管理共享计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-173">Manage shared schedules</span></span>|<span data-ttu-id="ba11f-174">系统管理员</span><span class="sxs-lookup"><span data-stu-id="ba11f-174">System Administrator</span></span>|<span data-ttu-id="ba11f-175">所有者</span><span class="sxs-lookup"><span data-stu-id="ba11f-175">Owners</span></span>|  
|<span data-ttu-id="ba11f-176">选择共享计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-176">Select shared schedules</span></span>|<span data-ttu-id="ba11f-177">查看共享计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-177">View shared schedules</span></span>|<span data-ttu-id="ba11f-178">系统用户</span><span class="sxs-lookup"><span data-stu-id="ba11f-178">System User</span></span>|<span data-ttu-id="ba11f-179">成员</span><span class="sxs-lookup"><span data-stu-id="ba11f-179">Members</span></span>|  
|<span data-ttu-id="ba11f-180">在用户定义的订阅中创建、修改或删除报表特定计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-180">Create, modify, or delete report-specific schedules in a user-defined subscription</span></span>|<span data-ttu-id="ba11f-181">管理单独的订阅</span><span class="sxs-lookup"><span data-stu-id="ba11f-181">Manage individual subscriptions</span></span>|<span data-ttu-id="ba11f-182">浏览者、报表生成器、我的报表、内容管理员</span><span class="sxs-lookup"><span data-stu-id="ba11f-182">Browser, Report Builder, My Reports, Content Manager</span></span>|<span data-ttu-id="ba11f-183">访问者，成员</span><span class="sxs-lookup"><span data-stu-id="ba11f-183">Visitors, Members</span></span>|  
|<span data-ttu-id="ba11f-184">创建、修改或删除所有其他计划操作的报表特定计划</span><span class="sxs-lookup"><span data-stu-id="ba11f-184">Create, modify, or delete report-specific schedules for all other scheduled operations</span></span>|<span data-ttu-id="ba11f-185">管理报表历史记录，管理所有订阅，管理报表</span><span class="sxs-lookup"><span data-stu-id="ba11f-185">Manage report history, manage all subscriptions, manage reports</span></span>|<span data-ttu-id="ba11f-186">内容管理员</span><span class="sxs-lookup"><span data-stu-id="ba11f-186">Content Manager</span></span>|<span data-ttu-id="ba11f-187">所有者</span><span class="sxs-lookup"><span data-stu-id="ba11f-187">Owners</span></span>|  
  
 <span data-ttu-id="ba11f-188">有关本地模式 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]中安全性的详细信息，请参阅 [预定义角色](../security/role-definitions-predefined-roles.md)、 [授予对本机模式报表服务器的权限](../security/granting-permissions-on-a-native-mode-report-server.md) 和 [任务和权限](../security/tasks-and-permissions.md)。</span><span class="sxs-lookup"><span data-stu-id="ba11f-188">For more information about security in Native mode [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], see [Predefined Roles](../security/role-definitions-predefined-roles.md), [Granting Permissions on a Native Mode Report Server](../security/granting-permissions-on-a-native-mode-report-server.md) and [Tasks and Permissions](../security/tasks-and-permissions.md).</span></span> <span data-ttu-id="ba11f-189">对于 SharePoint 模式，请参阅 [Reporting Services 中的角色和任务与 SharePoint 组和权限的比较](../reporting-services-roles-tasks-vs-sharepoint-groups-permissions.md)</span><span class="sxs-lookup"><span data-stu-id="ba11f-189">For SharePoint mode, see [Compare Roles and Tasks in Reporting Services to SharePoint Groups and Permissions](../reporting-services-roles-tasks-vs-sharepoint-groups-permissions.md)</span></span>  
  
##  <a name="how-scheduling-and-delivery-processing-works"></a><a name="bkmk_how_scheduling_works"></a> <span data-ttu-id="ba11f-190">计划和传递处理的工作方式</span><span class="sxs-lookup"><span data-stu-id="ba11f-190">How Scheduling and Delivery Processing Works</span></span>  
 <span data-ttu-id="ba11f-191">计划和传递处理器提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="ba11f-191">The Scheduling and Delivery Processor provides the following functionality:</span></span>  
  
-   <span data-ttu-id="ba11f-192">维护报表服务器数据库中的事件和通知队列。</span><span class="sxs-lookup"><span data-stu-id="ba11f-192">Maintains a queue of events and notifications in the report server database.</span></span> <span data-ttu-id="ba11f-193">对于扩展部署，将在部署中的所有报表服务器之间共享该队列。</span><span class="sxs-lookup"><span data-stu-id="ba11f-193">In a scale-out deployment, the queue is shared across all of the report servers in the deployment.</span></span>  
  
-   <span data-ttu-id="ba11f-194">调用报表处理器以执行报表、处理订阅或清除缓存的报表。</span><span class="sxs-lookup"><span data-stu-id="ba11f-194">Calls the Report Processor to execute reports, process subscriptions, or clear a cached report.</span></span> <span data-ttu-id="ba11f-195">所有作为计划事件的结果发生的报表处理都将作为后台进程执行。</span><span class="sxs-lookup"><span data-stu-id="ba11f-195">All report processing that occurs as a result of a schedule event is performed as a background process.</span></span> <span data-ttu-id="ba11f-196">SharePoint 模式利用计时器作业来：</span><span class="sxs-lookup"><span data-stu-id="ba11f-196">SharePoint mode utilizes timer jobs to .</span></span>  
  
-   <span data-ttu-id="ba11f-197">调用在订阅中指定的传递扩展插件，以便可以传递报表。</span><span class="sxs-lookup"><span data-stu-id="ba11f-197">Calls the delivery extension that is specified in a subscription so that the report can be delivered.</span></span>  
  
 <span data-ttu-id="ba11f-198">计划和传递操作的其他方面由与计划和传递处理器配合工作的其他组件和服务进行处理。</span><span class="sxs-lookup"><span data-stu-id="ba11f-198">Other aspects of a scheduling and delivery operation are handled by other components and services that work with the Scheduling and Delivery Processor.</span></span> <span data-ttu-id="ba11f-199">具体而言，计划和传递处理器在报表服务器服务中运行，并使用 SQL Server 代理作为计时器来生成预定的事件。</span><span class="sxs-lookup"><span data-stu-id="ba11f-199">Specifically, the Scheduling and Delivery Processor runs in the Report Server service and uses SQL Server Agent as a timer to generate scheduled events.</span></span> <span data-ttu-id="ba11f-200">下面分步说明了计划操作如何在 Reporting Services 部署中工作：</span><span class="sxs-lookup"><span data-stu-id="ba11f-200">The following step-by-step description explains how the scheduled operations work in a Reporting Services deployment:</span></span>  
  
1.  <span data-ttu-id="ba11f-201">计划操作在用户创建计划时定义。</span><span class="sxs-lookup"><span data-stu-id="ba11f-201">A scheduled operation is defined when a user creates a schedule.</span></span> <span data-ttu-id="ba11f-202">计划定义的日期和时间用来触发报表传递的订阅，刷新快照或使缓存过期。</span><span class="sxs-lookup"><span data-stu-id="ba11f-202">The schedule defines a date and time that will be used to trigger a subscription for report delivery, refresh a snapshot, or expire a cache.</span></span>  
  
2.  <span data-ttu-id="ba11f-203">报表服务器将计划信息保存在报表服务器数据库中。</span><span class="sxs-lookup"><span data-stu-id="ba11f-203">The report server saves the schedule information in the report server database.</span></span>  
  
3.  <span data-ttu-id="ba11f-204">报表服务器在包含所提供计划信息的 SQL Server 代理中创建相应的作业。</span><span class="sxs-lookup"><span data-stu-id="ba11f-204">The report server creates a corresponding job in SQL Server Agent that includes the schedule information provided.</span></span> <span data-ttu-id="ba11f-205">这些作业是使用打开的现有报表服务器数据库连接并通过存储过程创建的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-205">The jobs are created through a stored procedure, using the existing open connection to the report server database.</span></span>  
  
4.  <span data-ttu-id="ba11f-206">SQL Server 代理按照计划中指定的日期和时间运行作业。</span><span class="sxs-lookup"><span data-stu-id="ba11f-206">SQL Server Agent runs the job on the date and time specified in the schedule.</span></span> <span data-ttu-id="ba11f-207">作业创建的事件将添加到由 Reporting Services 维护的队列中。</span><span class="sxs-lookup"><span data-stu-id="ba11f-207">The job creates an event that is added to a queue maintained by Reporting Services.</span></span>  
  
5.  <span data-ttu-id="ba11f-208">该事件会导致报表或订阅进程发生。</span><span class="sxs-lookup"><span data-stu-id="ba11f-208">The event causes a report or subscription process to occur.</span></span> <span data-ttu-id="ba11f-209">当在队列中检测到事件时对事件进行处理，并相应地处理或传递报表。</span><span class="sxs-lookup"><span data-stu-id="ba11f-209">Events are processed when they are detected in the queue, and the report is processed or delivered accordingly.</span></span>  
  
     <span data-ttu-id="ba11f-210">在处理事件之前，计划和传递处理器会执行身份验证步骤以验证订阅的所有者有权查看该报表。</span><span class="sxs-lookup"><span data-stu-id="ba11f-210">Before the events are processed, the Scheduling and Delivery Processor performs an authentication step to verify that the subscription owner has permission to view the report.</span></span>  
  
 <span data-ttu-id="ba11f-211">Reporting Services 维护一个针对所有计划操作的事件队列。</span><span class="sxs-lookup"><span data-stu-id="ba11f-211">Reporting Services maintains an event queue for all scheduled operations.</span></span> <span data-ttu-id="ba11f-212">它定期轮询队列，检查是否有新事件。</span><span class="sxs-lookup"><span data-stu-id="ba11f-212">It polls the queue at regular intervals to check for new events.</span></span> <span data-ttu-id="ba11f-213">默认情况下，每隔 10 秒扫描一次队列。</span><span class="sxs-lookup"><span data-stu-id="ba11f-213">By default, the queue is scanned at 10 second intervals.</span></span> <span data-ttu-id="ba11f-214">通过修改 RSReportServer.config 文件中的 `PollingInterval`、`IsNotificationService` 和 `IsEventService` 配置设置可以更改此间隔。</span><span class="sxs-lookup"><span data-stu-id="ba11f-214">You can change the interval by modifying the `PollingInterval`, `IsNotificationService`, and `IsEventService` configuration settings in the RSReportServer.config file.</span></span> <span data-ttu-id="ba11f-215">SharePoint 模式还将 RSreporserver.config 用于这些设置，并且值应用于所有 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 服务应用程序。</span><span class="sxs-lookup"><span data-stu-id="ba11f-215">SharePoint mode also uses the RSreporserver.config for these settings and the values apply to all [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service applications.</span></span> <span data-ttu-id="ba11f-216">有关详细信息，请参阅 [RSReportServer Configuration File](../report-server/rsreportserver-config-configuration-file.md)。</span><span class="sxs-lookup"><span data-stu-id="ba11f-216">For more information, see [RSReportServer Configuration File](../report-server/rsreportserver-config-configuration-file.md).</span></span>  
  
##  <a name="server-dependencies"></a><a name="bkmk_serverdependencies"></a> <span data-ttu-id="ba11f-217">服务器依赖关系</span><span class="sxs-lookup"><span data-stu-id="ba11f-217">Server Dependencies</span></span>  
 <span data-ttu-id="ba11f-218">计划和传递处理器需要启动报表服务器服务和 SQL Server 代理。</span><span class="sxs-lookup"><span data-stu-id="ba11f-218">The Scheduling and Delivery Processor requires that the Report Server service and SQL Server Agent are started.</span></span> <span data-ttu-id="ba11f-219">必须通过 `ScheduleEventsAndReportDeliveryEnabled` 基于策略的管理中 "Reporting Services" 方面的 "**外围应用配置**器" 的属性启用 "计划和传递处理" 功能。</span><span class="sxs-lookup"><span data-stu-id="ba11f-219">The Schedule and Delivery Processing feature must be enabled through the `ScheduleEventsAndReportDeliveryEnabled` property of the **Surface Area Configuration for Reporting Services** facet in Policy-Based Management.</span></span> <span data-ttu-id="ba11f-220">SQL Server 代理和报表服务器服务必须都在运行，才能执行计划的操作。</span><span class="sxs-lookup"><span data-stu-id="ba11f-220">Both SQL Server Agent and the Report Server service must running in order for scheduled operations to occur.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ba11f-221">可以使用 **Reporting Services 的外围应用配置器** 方面临时或永久停止计划操作。</span><span class="sxs-lookup"><span data-stu-id="ba11f-221">You can use the **Surface Area Configuration for Reporting Services** facet to stop scheduled operations on a temporary or permanent basis.</span></span> <span data-ttu-id="ba11f-222">虽然可以创建并部署自定义传递扩展插件，但是计划和传递处理器本身不是可扩展的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-222">Although you can create and deploy custom delivery extensions, by itself the Scheduling and Delivery Processor is not extensible.</span></span> <span data-ttu-id="ba11f-223">该工具管理事件和通知的方式是不可更改的。</span><span class="sxs-lookup"><span data-stu-id="ba11f-223">You cannot change how it manages events and notifications.</span></span> <span data-ttu-id="ba11f-224">关于关闭功能的详细信息，请参阅 **Turn Reporting Services Features On or Off** 中的 [“预定的事件和传递”](../report-server/turn-reporting-services-features-on-or-off.md)一节。</span><span class="sxs-lookup"><span data-stu-id="ba11f-224">For more information about turn off features, see the **Scheduled Events and Delivery** section of [Turn Reporting Services Features On or Off](../report-server/turn-reporting-services-features-on-or-off.md).</span></span>  
  
###  <a name="effects-of-stopping-the-sql-server-agent"></a><a name="bkmk_stoppingagent"></a> <span data-ttu-id="ba11f-225">停止 SQL Server 代理的影响</span><span class="sxs-lookup"><span data-stu-id="ba11f-225">Effects of Stopping the SQL Server Agent</span></span>  
 <span data-ttu-id="ba11f-226">默认情况下，计划的报表处理将使用 SQL Server 代理。</span><span class="sxs-lookup"><span data-stu-id="ba11f-226">Scheduled report processing uses SQL Server Agent by default.</span></span> <span data-ttu-id="ba11f-227">如果停止该服务，除非通过 <xref:ReportService2010.ReportingService2010.FireEvent%2A> 方法以编程的方式添加请求，否则将不会向队列中添加新的处理请求。</span><span class="sxs-lookup"><span data-stu-id="ba11f-227">If you stop the service, no new processing requests are added to the queue unless you add them programmatically through the <xref:ReportService2010.ReportingService2010.FireEvent%2A> method.</span></span> <span data-ttu-id="ba11f-228">重新启动该服务时，将继续进行创建报表处理请求的作业。</span><span class="sxs-lookup"><span data-stu-id="ba11f-228">When you restart the service, the jobs that create report processing requests are resumed.</span></span> <span data-ttu-id="ba11f-229">对于过去在 SQL Server 代理脱机期间可能已经发生的报表处理作业，报表服务器不会尝试重新创建这些作业。</span><span class="sxs-lookup"><span data-stu-id="ba11f-229">The report server does not try to recreate report processing jobs that might have occurred in the past, while SQL Server Agent was offline.</span></span> <span data-ttu-id="ba11f-230">如果 SQL Server 代理停止一个星期的时间，则该星期的所有计划操作都将丢失。</span><span class="sxs-lookup"><span data-stu-id="ba11f-230">If you stop SQL Server Agent for a week, all scheduled operations are lost for that week.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ba11f-231">对于 SQL Server 代理提供给 Reporting Services 的功能，可以使用通过 <xref:ReportService2010.ReportingService2010.FireEvent%2A> 方法向队列中添加计划事件的自定义代码来替代。</span><span class="sxs-lookup"><span data-stu-id="ba11f-231">The functionality that SQL Server Agent provides to Reporting Services can be replaced with custom code that uses the <xref:ReportService2010.ReportingService2010.FireEvent%2A> method to add schedule events to the queue.</span></span>  
  
###  <a name="effects-of-stopping-the-report-server-service"></a><a name="bkmk_stoppingservice"></a> <span data-ttu-id="ba11f-232">停止报表服务器服务的影响</span><span class="sxs-lookup"><span data-stu-id="ba11f-232">Effects of Stopping the Report Server Service</span></span>  
 <span data-ttu-id="ba11f-233">如果停止报表服务器服务，SQL Server 代理会继续向队列中添加报表处理请求。</span><span class="sxs-lookup"><span data-stu-id="ba11f-233">If you stop the Report Server service, SQL Server Agent continues to add report processing requests to the queue.</span></span> <span data-ttu-id="ba11f-234">来自 SQL Server 代理的状态信息将指示作业成功。</span><span class="sxs-lookup"><span data-stu-id="ba11f-234">Status information from SQL Server Agent indicates that the job succeeded.</span></span> <span data-ttu-id="ba11f-235">但是，由于报表服务器服务已停止，因此实际上不会发生报表处理。</span><span class="sxs-lookup"><span data-stu-id="ba11f-235">However, because the Report Server service is stopped, no report processing actually occurs.</span></span> <span data-ttu-id="ba11f-236">在您重新启动报表服务器服务之前，请求将在队列中一直累积。</span><span class="sxs-lookup"><span data-stu-id="ba11f-236">The requests will continue to accumulate in the queue until you restart the Report Server service.</span></span> <span data-ttu-id="ba11f-237">重新启动报表服务器服务后，将按顺序处理队列中的所有报表处理请求。</span><span class="sxs-lookup"><span data-stu-id="ba11f-237">Once you restart the Report Server service, all report processing requests that are in the queue are processed in order.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ba11f-238">另请参阅</span><span class="sxs-lookup"><span data-stu-id="ba11f-238">See Also</span></span>  
 <span data-ttu-id="ba11f-239">[创建、修改和删除报表历史记录中的快照](../report-server/create-modify-and-delete-snapshots-in-report-history.md) </span><span class="sxs-lookup"><span data-stu-id="ba11f-239">[Create, Modify, and Delete Snapshots in Report History](../report-server/create-modify-and-delete-snapshots-in-report-history.md) </span></span>  
 <span data-ttu-id="ba11f-240">[订阅和传递 (Reporting Services)](subscriptions-and-delivery-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="ba11f-240">[Subscriptions and Delivery &#40;Reporting Services&#41;](subscriptions-and-delivery-reporting-services.md) </span></span>  
 <span data-ttu-id="ba11f-241">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="ba11f-241">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span></span>  
 <span data-ttu-id="ba11f-242">[缓存报表 (SSRS)](../report-server/caching-reports-ssrs.md) </span><span class="sxs-lookup"><span data-stu-id="ba11f-242">[Caching Reports &#40;SSRS&#41;](../report-server/caching-reports-ssrs.md) </span></span>  
 <span data-ttu-id="ba11f-243">[报表服务器内容管理（SSRS 本机模式）](../report-server/report-server-content-management-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="ba11f-243">[Report Server Content Management &#40;SSRS Native Mode&#41;](../report-server/report-server-content-management-ssrs-native-mode.md) </span></span>  
 [<span data-ttu-id="ba11f-244">缓存共享数据集 (SSRS)</span><span class="sxs-lookup"><span data-stu-id="ba11f-244">Cache Shared Datasets &#40;SSRS&#41;</span></span>](../report-server/cache-shared-datasets-ssrs.md)  
  
  
