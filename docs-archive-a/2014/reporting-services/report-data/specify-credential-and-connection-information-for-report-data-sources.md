---
title: 为报表数据源指定凭据和连接信息 | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- no credentials option [Reporting Services]
- impersonation [Reporting Services]
- user impersonation [Reporting Services]
- Windows authentication [Reporting Services]
- data sources [Reporting Services], security
- connection strings [Reporting Services]
- unattended report processing [Reporting Services]
- reports [Reporting Services], security
- remote data sources [Reporting Services]
- credentials [Reporting Services]
- authentication [Reporting Services]
- external data sources [Reporting Services]
- prompted credentials [Reporting Services]
- multiple connections
- stored credentials [Reporting Services]
- security [Reporting Services], data sources
- Windows integrated security [Reporting Services]
ms.assetid: fee1a663-a313-424a-aed2-5082bfd114b3
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 2d1e804282459972b21303cf795a9c3a88ea93d5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87588932"
---
# <a name="specify-credential-and-connection-information-for-report-data-sources"></a><span data-ttu-id="525e6-102">为报表数据源指定凭据和连接信息</span><span class="sxs-lookup"><span data-stu-id="525e6-102">Specify Credential and Connection Information for Report Data Sources</span></span>
  <span data-ttu-id="525e6-103">报表服务器可以使用凭据连接到向报表提供内容或者向数据驱动订阅提供收件人信息的外部数据源。</span><span class="sxs-lookup"><span data-stu-id="525e6-103">A report server uses credentials to connect to external data sources that provide content to reports or recipient information to a data-driven subscription.</span></span> <span data-ttu-id="525e6-104">您可以指定凭据使用 Windows 身份验证、数据库身份验证、自定义身份验证或不使用任何身份验证。</span><span class="sxs-lookup"><span data-stu-id="525e6-104">You can specify credentials that use Windows Authentication, database authentication, no authentication, or custom authentication.</span></span> <span data-ttu-id="525e6-105">当通过网络发送连接请求时，报表服务器便会模拟用户帐户或无人参与的执行帐户。</span><span class="sxs-lookup"><span data-stu-id="525e6-105">When sending a connection request over the network, the report server will either impersonate a user account or the unattended execution account.</span></span> <span data-ttu-id="525e6-106">有关建立连接请求时所处安全上下文的详细信息，请进一步参阅本主题中的 [数据源配置和网络连接](#DataSourceConfigurationConnections) 。</span><span class="sxs-lookup"><span data-stu-id="525e6-106">For more information about the security context under which a connection request is made, see [Data Source Configuration and Network Connections](#DataSourceConfigurationConnections) further on in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="525e6-107">凭据也可以用于对访问报表服务器的用户进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="525e6-107">Credentials are also used to authenticate users who access a report server.</span></span> <span data-ttu-id="525e6-108">有关向报表服务器验证用户身份的信息将在其他主题中介绍。</span><span class="sxs-lookup"><span data-stu-id="525e6-108">Information about authenticating users to a report server is provided in another topic.</span></span>  
  
 <span data-ttu-id="525e6-109">与外部数据源的连接是在创建报表时定义的。</span><span class="sxs-lookup"><span data-stu-id="525e6-109">The connection to an external data source is defined when you create the report.</span></span> <span data-ttu-id="525e6-110">发布报表后可以单独管理该连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-110">It can be managed separately after the report is published.</span></span> <span data-ttu-id="525e6-111">可以指定静态连接字符串或表达式，这允许用户从动态列表中选择数据源。</span><span class="sxs-lookup"><span data-stu-id="525e6-111">You can specify a static connection string or an expression that allows users to select a data source from a dynamic list.</span></span> <span data-ttu-id="525e6-112">有关如何指定数据源类型和连接字符串的详细信息，请参阅[Reporting Services 中的数据连接、数据源和连接字符串](../data-connections-data-sources-and-connection-strings-in-reporting-services.md)。</span><span class="sxs-lookup"><span data-stu-id="525e6-112">For more information about how to specify a data source type and connection string, see [Data Connections, Data Sources, and Connection Strings in Reporting Services](../data-connections-data-sources-and-connection-strings-in-reporting-services.md).</span></span>  
  
## <a name="using-remote-data-sources"></a><span data-ttu-id="525e6-113">使用远程数据源</span><span class="sxs-lookup"><span data-stu-id="525e6-113">Using Remote Data Sources</span></span>  
 <span data-ttu-id="525e6-114">如果报表从远程数据库服务器检索数据，请验证以下内容：</span><span class="sxs-lookup"><span data-stu-id="525e6-114">If the report retrieves data from a remote database server, verify the following:</span></span>  
  
-   <span data-ttu-id="525e6-115">提供给数据库服务器的凭据有效。</span><span class="sxs-lookup"><span data-stu-id="525e6-115">The credentials provided to the database server are valid.</span></span> <span data-ttu-id="525e6-116">如果使用的是 Windows 用户凭据，请确保用户拥有访问服务器和数据库的权限。</span><span class="sxs-lookup"><span data-stu-id="525e6-116">If you are using Windows user credentials, make sure that the user has permission to the server and database.</span></span>  
  
-   <span data-ttu-id="525e6-117">数据库服务器使用的端口处于打开状态。</span><span class="sxs-lookup"><span data-stu-id="525e6-117">Ports used by the database server are open.</span></span> <span data-ttu-id="525e6-118">如果要访问外部计算机上的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 关系数据库，或者如果报表服务器数据库在外部 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例上，则必须在外部计算机上打开端口 1433 和 1434。</span><span class="sxs-lookup"><span data-stu-id="525e6-118">If you are accessing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] relational databases on external computers, or if the report server database is on an external [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance, you must open port 1433 and 1434 on the external computer.</span></span> <span data-ttu-id="525e6-119">打开端口后务必重新启动服务器。</span><span class="sxs-lookup"><span data-stu-id="525e6-119">Be sure to restart the server after you open ports.</span></span> <span data-ttu-id="525e6-120">有关详细信息，请参阅 [为数据库引擎访问配置 Windows 防火墙](../../database-engine/configure-windows/configure-a-windows-firewall-for-database-engine-access.md)。</span><span class="sxs-lookup"><span data-stu-id="525e6-120">For more information, see [Configure a Windows Firewall for Database Engine Access](../../database-engine/configure-windows/configure-a-windows-firewall-for-database-engine-access.md).</span></span>  
  
-   <span data-ttu-id="525e6-121">必须启用远程连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-121">Remote connections must be enabled.</span></span> <span data-ttu-id="525e6-122">如果要访问外部计算机上的 SQL Server 关系数据库，则可以使用 SQL Server 配置管理器工具来验证是否启用了通过 TCP 的远程连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-122">If you are accessing SQL Server relational databases on external computers, you can use SQL Server Configuration Manager tool to verify that remote connections over TCP are enabled.</span></span>  
  
## <a name="ways-to-specify-credentials-for-connecting-to-remote-data-sources"></a><span data-ttu-id="525e6-123">指定用于连接到远程数据源的凭据的方法</span><span class="sxs-lookup"><span data-stu-id="525e6-123">Ways to Specify Credentials for Connecting to Remote Data Sources</span></span>  
 <span data-ttu-id="525e6-124">向报表提供内容的数据源通常驻留在远程服务器上。</span><span class="sxs-lookup"><span data-stu-id="525e6-124">The data sources that provide content to reports are usually hosted on remote servers.</span></span> <span data-ttu-id="525e6-125">若要检索报表数据，报表服务器必须使用一组事先提供或在运行时获取的凭据连接到服务器。</span><span class="sxs-lookup"><span data-stu-id="525e6-125">To retrieve data for a report, a report server must connect to the server using a set of credentials that you provide in advance or that are obtained at run time.</span></span> <span data-ttu-id="525e6-126">配置数据源时，您可以按下列方式指定凭据：</span><span class="sxs-lookup"><span data-stu-id="525e6-126">When configuring a data source, you can specify credentials in the following ways:</span></span>  
  
-   <span data-ttu-id="525e6-127">提示用户输入凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-127">Prompt the user for credentials.</span></span>  
  
-   <span data-ttu-id="525e6-128">存储凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-128">Store credentials.</span></span>  
  
-   <span data-ttu-id="525e6-129">使用 Windows 集成安全性。</span><span class="sxs-lookup"><span data-stu-id="525e6-129">Use Windows integrated security.</span></span>  
  
-   <span data-ttu-id="525e6-130">不使用凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-130">Use no credentials.</span></span>  
  
 <span data-ttu-id="525e6-131">网络环境决定了您可以支持的连接种类。</span><span class="sxs-lookup"><span data-stu-id="525e6-131">The network environment determines the kinds of connections you can support.</span></span> <span data-ttu-id="525e6-132">例如，如果启用了 Kerberos 版本 5 协议，则可以使用 Windows 身份验证中的委托功能和模拟功能来支持跨多个服务器的连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-132">For example, if the Kerberos version 5 protocol is enabled, you might be able to use the delegation and impersonation features available in Windows Authentication to support connections across multiple servers.</span></span> <span data-ttu-id="525e6-133">如果您的网络不支持这些安全功能，则需要针对连接约束采取相应的措施。</span><span class="sxs-lookup"><span data-stu-id="525e6-133">If your network does not support these security features, you will need to work around connection constraints.</span></span> <span data-ttu-id="525e6-134">如果未启用委托和模拟，则在 Windows 凭据过期之前，可以跨一个计算机连接传递该凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-134">If delegation and impersonation are not enabled, Windows credentials can be passed across one computer connection before they expire.</span></span> <span data-ttu-id="525e6-135">从客户端计算机到报表服务器计算机的用户连接可算作第一个连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-135">A user connection from a client computer to a report server computer counts as the first connection.</span></span> <span data-ttu-id="525e6-136">如果该用户打开一个从远程服务器检索数据的报表，则该登录将计为第二个连接。如果此时指定了使用集成安全性的连接而未启用委托，则该登录将失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-136">If the user opens a report that retrieves data from a remote server, that login counts as a second connection and will fail if you specified the connection to use integrated security when delegation is not enabled.</span></span>  
  
 <span data-ttu-id="525e6-137">如果需要用多个连接来完成从客户端计算机到外部报表数据源的往返，请在以下策略中进行选择来建立多个连接：</span><span class="sxs-lookup"><span data-stu-id="525e6-137">If multiple connections are required to complete a round trip from the client computer to an external report data source, choose from the following strategies to make the connections succeed.</span></span>  
  
-   <span data-ttu-id="525e6-138">在域中启用模拟功能和委托功能，以便凭据可以不受限制地委托给其他计算机。</span><span class="sxs-lookup"><span data-stu-id="525e6-138">Enable impersonation and delegation features in your domain so that credentials can be delegated to other computers without limit.</span></span>  
  
-   <span data-ttu-id="525e6-139">使用已存储凭据或提示的凭据来查询报表数据的外部数据源。</span><span class="sxs-lookup"><span data-stu-id="525e6-139">Use stored credentials or prompted credentials to query external data sources for report data.</span></span> <span data-ttu-id="525e6-140">凭据可以是 Windows 域帐户，也可以是数据库登录名。</span><span class="sxs-lookup"><span data-stu-id="525e6-140">The credentials can be either a Windows domain account or a database login.</span></span>  
  
### <a name="prompted-credentials"></a><span data-ttu-id="525e6-141">提示的凭据</span><span class="sxs-lookup"><span data-stu-id="525e6-141">Prompted Credentials</span></span>  
 <span data-ttu-id="525e6-142">将报表数据源连接配置为使用提示的凭据时，访问该报表的每个用户都必须输入用户名和密码才能检索数据。</span><span class="sxs-lookup"><span data-stu-id="525e6-142">When you configure a report data source connection to use prompted credentials, each user who access the report must enter a user name and password to retrieve the data.</span></span> <span data-ttu-id="525e6-143">建议将此方法用于包含机密数据的报表。</span><span class="sxs-lookup"><span data-stu-id="525e6-143">This approach is recommended for reports that contain confidential data.</span></span> <span data-ttu-id="525e6-144">只能对按需运行的报表使用提示的凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-144">Prompted credentials can be used only on reports that run on demand.</span></span> <span data-ttu-id="525e6-145">提示的凭据可以是 Windows 域帐户，也可以是数据库登录名。</span><span class="sxs-lookup"><span data-stu-id="525e6-145">Prompted credentials can be a Windows account or a database login.</span></span> <span data-ttu-id="525e6-146">若要使用 Windows 身份验证，则必须选择 **“在与数据源建立连接时用作 Windows 凭据”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-146">To use Windows Authentication, you must select **Use as Windows credentials when connecting to the data source**.</span></span> <span data-ttu-id="525e6-147">否则，报表服务器会将凭据传递给数据库服务器进行用户身份验证。</span><span class="sxs-lookup"><span data-stu-id="525e6-147">Otherwise, the report server passes credentials to the database server for user authentication.</span></span> <span data-ttu-id="525e6-148">如果数据库服务器无法对您所提供的凭据进行身份验证，则该连接将失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-148">If the database server cannot authenticate the credentials that you provide, the connection will fail.</span></span>  
  
### <a name="windows-integrated-security"></a><span data-ttu-id="525e6-149">Windows 集成安全性</span><span class="sxs-lookup"><span data-stu-id="525e6-149">Windows Integrated Security</span></span>  
 <span data-ttu-id="525e6-150">使用 **“Windows 集成安全性”** 选项时，报表服务器会将访问报表的用户的安全令牌传递给外部数据源所在的服务器。</span><span class="sxs-lookup"><span data-stu-id="525e6-150">When you use the **Windows Integrated Security** option, the report server passes the security token of the user accessing the report to the server hosting the external data source.</span></span> <span data-ttu-id="525e6-151">在这种情况下，系统不会提示用户键入用户名或密码。</span><span class="sxs-lookup"><span data-stu-id="525e6-151">In this case, the user is not prompted to type a user name or password.</span></span> <span data-ttu-id="525e6-152">如果启用了模拟功能和代理功能，建议使用此方法。</span><span class="sxs-lookup"><span data-stu-id="525e6-152">This approach is recommended if impersonation and delegation features are enabled.</span></span> <span data-ttu-id="525e6-153">如果未启用这些功能，则只能在所有要访问的服务器都位于同一个计算机上时才能使用此方法。</span><span class="sxs-lookup"><span data-stu-id="525e6-153">If these features are not enabled, you should only use this approach if all the servers that you want to access are located on the same computer.</span></span>  
  
### <a name="stored-credentials"></a><span data-ttu-id="525e6-154">存储的凭据</span><span class="sxs-lookup"><span data-stu-id="525e6-154">Stored Credentials</span></span>  
 <span data-ttu-id="525e6-155">您可以存储用于访问外部数据源的凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-155">You can store the credentials used to access an external data source.</span></span> <span data-ttu-id="525e6-156">凭据以逆加密的形式存储在报表服务器数据库中。</span><span class="sxs-lookup"><span data-stu-id="525e6-156">Credentials are stored in reversible encryption in the report server database.</span></span> <span data-ttu-id="525e6-157">您可以为报表中使用的每个数据源都指定同一套已存储凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-157">You can specify one set of stored credentials for each data source used in a report.</span></span> <span data-ttu-id="525e6-158">所提供的凭据会为每位运行该报表的用户检索相同的数据。</span><span class="sxs-lookup"><span data-stu-id="525e6-158">The credentials you provide retrieve the same data for every user who runs the report.</span></span>  
  
 <span data-ttu-id="525e6-159">建议将已存储凭据作为远程数据库服务器访问策略的一部分。</span><span class="sxs-lookup"><span data-stu-id="525e6-159">Stored credentials are recommended as part of a strategy for accessing remote database servers.</span></span> <span data-ttu-id="525e6-160">如果要支持订阅，或计划生成报表历史记录或刷新报表快照的时间，则要求使用已存储凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-160">Stored credentials are required if you want to support subscriptions, or schedule report history generation or report snapshot refreshes.</span></span> <span data-ttu-id="525e6-161">当报表作为后台进程运行时，报表服务器便会充当执行报表的代理。</span><span class="sxs-lookup"><span data-stu-id="525e6-161">When a report runs as a background process, the report server is the agent that executes the report.</span></span> <span data-ttu-id="525e6-162">此时，由于不存在用户上下文，报表服务器必须从报表服务器数据库获取凭据信息才能连接到数据源。</span><span class="sxs-lookup"><span data-stu-id="525e6-162">Because there is no user context in place, the report server must get credential information from the report server database in order to connect to a data source.</span></span>  
  
 <span data-ttu-id="525e6-163">您指定的用户名和密码可以是 Windows 凭据，也可以是数据库登录名。</span><span class="sxs-lookup"><span data-stu-id="525e6-163">The user name and password that you specify can be Windows credentials or a database login.</span></span> <span data-ttu-id="525e6-164">如果指定 Windows 凭据，报表服务器会将凭据传递给 Windows，用于随后的身份验证。</span><span class="sxs-lookup"><span data-stu-id="525e6-164">If you specify Windows credentials, the report server passes the credentials to Windows for subsequent authentication.</span></span> <span data-ttu-id="525e6-165">否则，凭据将传递给数据库服务器进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="525e6-165">Otherwise, the credentials are passed to the database server for authentication.</span></span>  
  
#### <a name="how-to-grant-allow-log-on-locally-permissions-to-domain-user-accounts"></a><span data-ttu-id="525e6-166">如何对域用户帐户授予“允许在本地登录”权限</span><span class="sxs-lookup"><span data-stu-id="525e6-166">How to Grant "Allow log on locally" Permissions to Domain User Accounts</span></span>  
 <span data-ttu-id="525e6-167">如果使用已存储凭据连接到外部数据源，则 Windows 域用户帐户必须拥有在本地登录的权限。</span><span class="sxs-lookup"><span data-stu-id="525e6-167">If you use stored credentials to connect to an external data source, the Windows domain user account must have permission to log on locally.</span></span> <span data-ttu-id="525e6-168">此权限允许报表服务器模拟报表服务器上的用户，然后以该模拟用户的身份向外部数据源发送请求。</span><span class="sxs-lookup"><span data-stu-id="525e6-168">This permission allows the report server to impersonate the user on the report server and send the request to the external data source as that impersonated user.</span></span>  
  
 <span data-ttu-id="525e6-169">若要授予此权限，请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="525e6-169">To grant this permission, do the following:</span></span>  
  
1.  <span data-ttu-id="525e6-170">在报表服务器计算机上的 **“管理工具”** 中，打开 **“本地安全策略”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-170">On the report server computer, in **Administrative Tools**, open **Local Security Policy**.</span></span>  
  
2.  <span data-ttu-id="525e6-171">在 **“安全设置”** 下，展开 **“本地策略”**，然后单击 **“用户权限分配”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-171">Under **Security Settings**, expand **Local Policies**, and then click **User Rights Assignment**.</span></span>  
  
3.  <span data-ttu-id="525e6-172">在详细信息窗格中，右键单击“允许在本地登录”\*\*\*\*，再右键单击“属性”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="525e6-172">In the details pane, right-click **Allow log on locally** and then right-click **Properties**.</span></span>  
  
4.  <span data-ttu-id="525e6-173">单击\*\*\*\*“添加用户或组”。</span><span class="sxs-lookup"><span data-stu-id="525e6-173">Click **Add User or Group**.</span></span>  
  
5.  <span data-ttu-id="525e6-174">单击 **“位置”**，指定要搜索的域或其他位置，然后单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-174">Click **Locations**, specify a domain or other location that you want to search, and then click **OK**.</span></span>  
  
6.  <span data-ttu-id="525e6-175">输入要允许其进行交互式登录的 Windows 帐户，然后单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-175">Enter the Windows account for which you want to allow interactive login, and then click **OK**.</span></span>  
  
7.  <span data-ttu-id="525e6-176">在 **“允许在本地登录属性”** 对话框中，单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-176">In the **Allow log on locally Properties** dialog box, click **OK**.</span></span>  
  
8.  <span data-ttu-id="525e6-177">确保您选择的帐户也没有拒绝权限：</span><span class="sxs-lookup"><span data-stu-id="525e6-177">Verify that the account you selected does not also have deny permissions:</span></span>  
  
    1.  <span data-ttu-id="525e6-178">右键单击“拒绝本地登录”\*\*\*\*，再右键单击“属性”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="525e6-178">Right-click **Deny log on locally** and then right-click **Properties**.</span></span>  
  
    2.  <span data-ttu-id="525e6-179">如果列出了该帐户，则将其选中，然后单击 **“删除”**。</span><span class="sxs-lookup"><span data-stu-id="525e6-179">If the account is listed, select it and then click **Remove**.</span></span>  
  
#### <a name="using-impersonation-with-stored-credentials"></a><span data-ttu-id="525e6-180">对已存储凭据使用模拟功能</span><span class="sxs-lookup"><span data-stu-id="525e6-180">Using Impersonation with Stored Credentials</span></span>  
 <span data-ttu-id="525e6-181">您还可以使用凭据来模拟其他用户的身份。</span><span class="sxs-lookup"><span data-stu-id="525e6-181">You can also use credentials to impersonate the identity of another user.</span></span> <span data-ttu-id="525e6-182">对于 SQL Server 数据库，使用模拟选项可以设置 [SETUSER](/sql/t-sql/statements/setuser-transact-sql) 函数。</span><span class="sxs-lookup"><span data-stu-id="525e6-182">For SQL Server databases, using the impersonation options sets the [SETUSER](/sql/t-sql/statements/setuser-transact-sql) function.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="525e6-183">对于支持订阅的报表，或按计划生成报表历史记录或刷新报表执行快照的报表，请勿使用模拟功能。</span><span class="sxs-lookup"><span data-stu-id="525e6-183">Do not use impersonation for reports that support subscriptions or that use schedules to generate report history or refresh a report execution snapshot.</span></span>  
  
### <a name="no-credentials"></a><span data-ttu-id="525e6-184">无凭据</span><span class="sxs-lookup"><span data-stu-id="525e6-184">No Credentials</span></span>  
 <span data-ttu-id="525e6-185">您可以将数据源连接配置为不使用凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-185">You can configure a data source connection to use no credentials.</span></span> <span data-ttu-id="525e6-186">Microsoft 建议您始终使用凭据访问数据源；并不建议不使用任何凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-186">Microsoft recommends that you always use credentials to access a data sources; using no credentials is not advised.</span></span> <span data-ttu-id="525e6-187">不过，在以下情况下，可以选择不使用凭据运行报表：</span><span class="sxs-lookup"><span data-stu-id="525e6-187">However, you may choose to run a report with no credentials in the following cases:</span></span>  
  
-   <span data-ttu-id="525e6-188">远程数据源不要求使用凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-188">The remote data source does not require credentials.</span></span>  
  
-   <span data-ttu-id="525e6-189">凭据是在连接字符串中传递的（建议只用于安全连接）。</span><span class="sxs-lookup"><span data-stu-id="525e6-189">The credentials are passed in the connection string (recommended only for secure connections).</span></span>  
  
-   <span data-ttu-id="525e6-190">报表是一个使用了父报表的凭据的子报表。</span><span class="sxs-lookup"><span data-stu-id="525e6-190">The report is a subreport that uses the credentials of the parent report.</span></span>  
  
 <span data-ttu-id="525e6-191">上述情况下，报表服务器使用一个您必须事先定义的无人参与的执行帐户连接到远程数据源。</span><span class="sxs-lookup"><span data-stu-id="525e6-191">Under these conditions, the report server connects to a remote data source using the unattended execution account that you must define in advance.</span></span> <span data-ttu-id="525e6-192">由于报表服务器不能使用它的服务凭据连接到远程服务器，因此必须指定一个可由报表服务器用于建立连接的帐户。</span><span class="sxs-lookup"><span data-stu-id="525e6-192">Because the report server does not connect to a remote server using its service credentials, you must specify an account that the report server can use to make the connection.</span></span> <span data-ttu-id="525e6-193">有关创建此帐户的详细信息，请参阅[配置无人参与的执行帐户（SSRS 配置管理器）](../install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="525e6-193">For more information about creating this account, see [Configure the Unattended Execution Account &#40;SSRS Configuration Manager&#41;](../install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md).</span></span>  
  
##  <a name="data-source-configuration-and-network-connections"></a><a name="DataSourceConfigurationConnections"></a><span data-ttu-id="525e6-194">数据源配置和网络连接</span><span class="sxs-lookup"><span data-stu-id="525e6-194">Data Source Configuration and Network Connections</span></span>  
 <span data-ttu-id="525e6-195">下表显示了如何针对特定的凭据类型和数据处理扩展插件组合建立连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-195">The following table shows how connections are made for specific combinations of credential types and data processing extensions.</span></span> <span data-ttu-id="525e6-196">如果要使用自定义数据处理扩展插件，请参阅 [指定用于自定义数据处理扩展插件的连接](specify-connections-for-custom-data-processing-extensions.md)。</span><span class="sxs-lookup"><span data-stu-id="525e6-196">If you are using a custom data processing extension, see [Specify Connections for Custom Data Processing Extensions](specify-connections-for-custom-data-processing-extensions.md).</span></span>  
  
|<span data-ttu-id="525e6-197">类型</span><span class="sxs-lookup"><span data-stu-id="525e6-197">**Type**</span></span>|<span data-ttu-id="525e6-198">**网络连接上下文**</span><span class="sxs-lookup"><span data-stu-id="525e6-198">**Context for network connection**</span></span>|<span data-ttu-id="525e6-199">**数据源类型**</span><span class="sxs-lookup"><span data-stu-id="525e6-199">**Data Source Types**</span></span><br /><br /> <span data-ttu-id="525e6-200">**（SQL Server、Oracle、ODBC、OLE DB、Analysis Services、XML、SAP NetWeaver BI、Hyperion Essbase）**</span><span class="sxs-lookup"><span data-stu-id="525e6-200">**(SQL Server, Oracle, ODBC, OLE DB, Analysis Services, XML, SAP NetWeaver BI, Hyperion Essbase)**</span></span>|  
|--------------|----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------|  
|<span data-ttu-id="525e6-201">集成安全性</span><span class="sxs-lookup"><span data-stu-id="525e6-201">Integrated security</span></span>|<span data-ttu-id="525e6-202">模拟当前用户</span><span class="sxs-lookup"><span data-stu-id="525e6-202">Impersonate the current user</span></span>|<span data-ttu-id="525e6-203">对于所有数据源类型，均使用当前的用户帐户进行连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-203">For all data source types, connect using the current user account.</span></span>|  
|<span data-ttu-id="525e6-204">Windows 凭据</span><span class="sxs-lookup"><span data-stu-id="525e6-204">Windows credentials</span></span>|<span data-ttu-id="525e6-205">模拟指定的用户</span><span class="sxs-lookup"><span data-stu-id="525e6-205">Impersonate the specified user</span></span>|<span data-ttu-id="525e6-206">对于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、Oracle、ODBC 和 OLE DB：使用模拟用户帐户进行连接。</span><span class="sxs-lookup"><span data-stu-id="525e6-206">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Oracle, ODBC, and OLE DB: connect using the impersonated user account.</span></span>|  
|<span data-ttu-id="525e6-207">数据库凭据</span><span class="sxs-lookup"><span data-stu-id="525e6-207">Database credentials</span></span>|<span data-ttu-id="525e6-208">模拟无人参与的执行帐户或服务帐户。</span><span class="sxs-lookup"><span data-stu-id="525e6-208">Impersonate the unattended execution account or the service account.</span></span><br /><br /> <span data-ttu-id="525e6-209">（Reporting Services 会在使用服务标识发送连接请求时删除管理员权限）。</span><span class="sxs-lookup"><span data-stu-id="525e6-209">(Reporting Services removes administrator permissions when sending the connection request using the service identity).</span></span>|<span data-ttu-id="525e6-210">对于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、Oracle、ODBC 和 OLE DB：</span><span class="sxs-lookup"><span data-stu-id="525e6-210">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Oracle, ODBC, and OLE DB:</span></span><br /><br /> <span data-ttu-id="525e6-211">将用户名和密码追加到连接字符串中。</span><span class="sxs-lookup"><span data-stu-id="525e6-211">Append the user name and password on the connection string.</span></span><br /><br /> <span data-ttu-id="525e6-212">对于 [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]：</span><span class="sxs-lookup"><span data-stu-id="525e6-212">For [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]:</span></span><br /><br /> <span data-ttu-id="525e6-213">如果使用的是 TCP/IP 协议，则连接会成功；否则，连接将失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-213">The connection succeeds if you are using the TCP/IP protocol, otherwise it fails.</span></span><br /><br /> <span data-ttu-id="525e6-214">对于 XML：</span><span class="sxs-lookup"><span data-stu-id="525e6-214">For XML:</span></span><br /><br /> <span data-ttu-id="525e6-215">如果使用数据库凭据，则报表服务器上的连接将失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-215">Fail the connection on the report server if database credentials are used.</span></span>|  
|<span data-ttu-id="525e6-216">无</span><span class="sxs-lookup"><span data-stu-id="525e6-216">None</span></span>|<span data-ttu-id="525e6-217">模拟无人参与的执行帐户。</span><span class="sxs-lookup"><span data-stu-id="525e6-217">Impersonate the unattended execution account.</span></span>|<span data-ttu-id="525e6-218">对于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、Oracle、ODBC 和 OLE DB：</span><span class="sxs-lookup"><span data-stu-id="525e6-218">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Oracle, ODBC, and OLE DB:</span></span><br /><br /> <span data-ttu-id="525e6-219">使用连接字符串中定义的凭据。</span><span class="sxs-lookup"><span data-stu-id="525e6-219">Use the credentials defined in the connection string.</span></span> <span data-ttu-id="525e6-220">如果未定义无人参与的执行帐户，则报表服务器上的连接将失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-220">The connection fails on the report server if the unattended execution account is undefined.</span></span><br /><br /> <span data-ttu-id="525e6-221">对于 [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]：</span><span class="sxs-lookup"><span data-stu-id="525e6-221">For [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]:</span></span><br /><br /> <span data-ttu-id="525e6-222">如果未指定任何凭据，则即使定义了无人参与的执行帐户，连接也总会失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-222">Always fail the connection if no credentials are specified, even if the unattended execution account is defined.</span></span><br /><br /> <span data-ttu-id="525e6-223">对于 XML：</span><span class="sxs-lookup"><span data-stu-id="525e6-223">For XML:</span></span><br /><br /> <span data-ttu-id="525e6-224">如果定义了无人参与的执行帐户，则以匿名用户的身份连接；否则，连接将失败。</span><span class="sxs-lookup"><span data-stu-id="525e6-224">Connect as Anonymous User if the unattended execution account is defined; otherwise, fail the connection.</span></span>|  
  
## <a name="setting-credentials-programmatically"></a><span data-ttu-id="525e6-225">通过编程方式设置凭据</span><span class="sxs-lookup"><span data-stu-id="525e6-225">Setting Credentials Programmatically</span></span>  
 <span data-ttu-id="525e6-226">您可以通过编写代码来设置凭据，以控制对报表和报表服务器的访问。</span><span class="sxs-lookup"><span data-stu-id="525e6-226">You can set credentials in your code to control access to reports and to the report server.</span></span> <span data-ttu-id="525e6-227">有关详细信息，请参阅 [Data Sources and Connection Methods](../report-server-web-service/methods/data-sources-and-connection-methods.md)。</span><span class="sxs-lookup"><span data-stu-id="525e6-227">For more information, see [Data Sources and Connection Methods](../report-server-web-service/methods/data-sources-and-connection-methods.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="525e6-228">另请参阅</span><span class="sxs-lookup"><span data-stu-id="525e6-228">See Also</span></span>  
 <span data-ttu-id="525e6-229">[Reporting Services &#40;SSRS 支持的数据源&#41;](../create-deploy-and-manage-mobile-and-paginated-reports.md) </span><span class="sxs-lookup"><span data-stu-id="525e6-229">[Data Sources Supported by Reporting Services &#40;SSRS&#41;](../create-deploy-and-manage-mobile-and-paginated-reports.md) </span></span>  
 <span data-ttu-id="525e6-230">[Reporting Services 中的数据连接、数据源和连接字符串](../data-connections-data-sources-and-connection-strings-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="525e6-230">[Data Connections, Data Sources, and Connection Strings in Reporting Services](../data-connections-data-sources-and-connection-strings-in-reporting-services.md) </span></span>  
 <span data-ttu-id="525e6-231">[管理报表数据源](../../integration-services/connection-manager/data-sources.md) </span><span class="sxs-lookup"><span data-stu-id="525e6-231">[Manage Report Data Sources](../../integration-services/connection-manager/data-sources.md) </span></span>  
 <span data-ttu-id="525e6-232">[报表管理器（SSRS 本机模式）](../report-manager-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="525e6-232">[Report Manager  &#40;SSRS Native Mode&#41;](../report-manager-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="525e6-233">[创建、删除或修改共享数据源 &#40;报表管理器&#41;](../create-delete-or-modify-a-shared-data-source-report-manager.md) </span><span class="sxs-lookup"><span data-stu-id="525e6-233">[Create, Delete, or Modify a Shared Data Source &#40;Report Manager&#41;](../create-delete-or-modify-a-shared-data-source-report-manager.md) </span></span>  
 [<span data-ttu-id="525e6-234">配置报表的数据源属性（报表管理器）</span><span class="sxs-lookup"><span data-stu-id="525e6-234">Configure Data Source Properties for a Report  &#40;Report Manager&#41;</span></span>](configure-data-source-properties-for-a-report-report-manager.md)  
  
  
