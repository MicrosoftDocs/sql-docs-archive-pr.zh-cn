---
title: 指定用于自定义数据处理扩展插件的连接 | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- custom data processing extensions [Reporting Services]
- IDbConnection interface, connection strings
- impersonation [Reporting Services]
- IDbConnectionExtension interface, connection strings
- data sources [Reporting Services], security
- connection strings [Reporting Services]
- credentials [Reporting Services]
- authentication [Reporting Services]
- external data sources [Reporting Services]
- data processing extensions [Reporting Services], connections
ms.assetid: 2cddc9ea-0e28-4350-80ae-332412908e47
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 4f870baf84f3412fea0a217f034b6d74e7b6cb93
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692282"
---
# <a name="specify-connections-for-custom-data-processing-extensions"></a><span data-ttu-id="3c305-102">指定用于自定义数据处理扩展插件的连接</span><span class="sxs-lookup"><span data-stu-id="3c305-102">Specify Connections for Custom Data Processing Extensions</span></span>
  <span data-ttu-id="3c305-103">您可以在报表服务器上创建或使用第三方自定义数据处理扩展插件来增强支持的数据源的数据处理能力，或者支持默认 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 安装中不可用的其他类型的数据源。</span><span class="sxs-lookup"><span data-stu-id="3c305-103">You can create or use third-party custom data processing extensions on a report server to enhance the data processing capability of supported data sources, or to support additional types of data sources that are not available in a default [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] installation.</span></span> <span data-ttu-id="3c305-104">对连接的处理会因实现方式的不同而有所不同。</span><span class="sxs-lookup"><span data-stu-id="3c305-104">Connections are handled differently depending on the implementation.</span></span> <span data-ttu-id="3c305-105">数据处理扩展插件可能具有下列实现方式：</span><span class="sxs-lookup"><span data-stu-id="3c305-105">The following implementations are available for data processing extensions:</span></span>  
  
-   <span data-ttu-id="3c305-106">自定义 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 数据提供程序（如果要访问 DB2.NET、Oracle、ODP.NET 或 Teradata 数据源中的数据，则可以使用自定义 .NET 数据提供程序）</span><span class="sxs-lookup"><span data-stu-id="3c305-106">Custom [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] data providers (if you are accessing data from DB2.NET, Oracle, ODP.NET, or Teradata data sources, you might be using a custom .NET data provider)</span></span>  
  
-   <span data-ttu-id="3c305-107">支持 <xref:Microsoft.ReportingServices.DataProcessing.IDbConnection></span><span class="sxs-lookup"><span data-stu-id="3c305-107">Custom data processing extensions that support <xref:Microsoft.ReportingServices.DataProcessing.IDbConnection></span></span>  
  
-   <span data-ttu-id="3c305-108">支持 <xref:Microsoft.ReportingServices.DataProcessing.IDbConnectionExtension></span><span class="sxs-lookup"><span data-stu-id="3c305-108">Custom data processing extensions that support <xref:Microsoft.ReportingServices.DataProcessing.IDbConnectionExtension></span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3c305-109">请联系第三方提供商以了解如何实现自定义数据处理扩展插件。</span><span class="sxs-lookup"><span data-stu-id="3c305-109">Check with your third-party provider to find out how your custom data processing extension is implemented.</span></span>  
  
## <a name="impersonation-and-custom-data-processing-extensions"></a><span data-ttu-id="3c305-110">模拟和自定义数据处理扩展插件</span><span class="sxs-lookup"><span data-stu-id="3c305-110">Impersonation and Custom Data Processing Extensions</span></span>  
 <span data-ttu-id="3c305-111">如果你的自定义数据处理扩展插件使用模拟功能连接到数据源，则必须在 <xref:Microsoft.ReportingServices.DataProcessing.IDbConnection> 或 <xref:Microsoft.ReportingServices.DataProcessing.IDbConnectionExtension> 接口上使用 Open 方法来发出请求。</span><span class="sxs-lookup"><span data-stu-id="3c305-111">If your custom data processing extension connects to data sources using impersonation, you must use the Open method on either the <xref:Microsoft.ReportingServices.DataProcessing.IDbConnection> or <xref:Microsoft.ReportingServices.DataProcessing.IDbConnectionExtension> interfaces to make the request.</span></span> <span data-ttu-id="3c305-112">或者，可以存储用户标识对象 (System.Security.Principal.WindowsIdentity)，然后在其他数据处理扩展插件 API 中重用该对象。</span><span class="sxs-lookup"><span data-stu-id="3c305-112">Alternately, you can store the user identity object (System.Security.Principal.WindowsIdentity) and then reuse it in the other data processing extension APIs.</span></span>  
  
 <span data-ttu-id="3c305-113">在 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]的早期版本中，所有自定义数据处理扩展插件都通过用户模拟进行调用。</span><span class="sxs-lookup"><span data-stu-id="3c305-113">In previous releases of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], all custom data processing extensions were called under user impersonation.</span></span> <span data-ttu-id="3c305-114">在此版本中，只有 Open 方法将在模拟用户时进行调用。</span><span class="sxs-lookup"><span data-stu-id="3c305-114">In this release, only the Open method will be called while impersonating the user.</span></span> <span data-ttu-id="3c305-115">如果你的现有数据处理扩展插件要求具有集成安全性，则必须修改代码以使用 Open 方法或存储用户标识对象。</span><span class="sxs-lookup"><span data-stu-id="3c305-115">If you have an existing data processing extension that requires integrated security, you must modify your code to use the Open method or store the user identity object.</span></span>  
  
## <a name="connections-for-custom-net-framework-data-providers"></a><span data-ttu-id="3c305-116">用于自定义 .NET Framework 数据访问接口的连接</span><span class="sxs-lookup"><span data-stu-id="3c305-116">Connections for Custom .NET Framework Data Providers</span></span>  
 <span data-ttu-id="3c305-117">将报表配置为使用特定的数据源时，您可以设置确定数据源类型、连接字符串以及用于访问数据源的凭据的属性。</span><span class="sxs-lookup"><span data-stu-id="3c305-117">When configuring a report to use a specific data source, you set properties that determine the data source type, connection string, and credentials that are used to access the data source.</span></span> <span data-ttu-id="3c305-118">下表介绍 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 数据访问接口支持的凭据类型。</span><span class="sxs-lookup"><span data-stu-id="3c305-118">The following table describes the credential types that are supported for [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] data providers.</span></span> <span data-ttu-id="3c305-119">有关设置报表数据源属性的详细信息，请参阅 [为报表数据源指定凭据和连接信息](specify-credential-and-connection-information-for-report-data-sources.md)。</span><span class="sxs-lookup"><span data-stu-id="3c305-119">For more information about setting report data source properties, see [Specify Credential and Connection Information for Report Data Sources](specify-credential-and-connection-information-for-report-data-sources.md).</span></span>  
  
|<span data-ttu-id="3c305-120">凭据</span><span class="sxs-lookup"><span data-stu-id="3c305-120">Credentials</span></span>|<span data-ttu-id="3c305-121">连接</span><span class="sxs-lookup"><span data-stu-id="3c305-121">Connections</span></span>|  
|-----------------|-----------------|  
|<span data-ttu-id="3c305-122">集成安全性</span><span class="sxs-lookup"><span data-stu-id="3c305-122">Integrated security</span></span>|<span data-ttu-id="3c305-123">如果您的数据访问接口支持 Windows 集成安全性，则可以使用该安全性。</span><span class="sxs-lookup"><span data-stu-id="3c305-123">If your data provider supports it, you can use Windows integrated security.</span></span> <span data-ttu-id="3c305-124">这种情况下将使用当前用户的凭据来发送请求。</span><span class="sxs-lookup"><span data-stu-id="3c305-124">The request is sent using the credentials of the current user.</span></span><br /><br /> <span data-ttu-id="3c305-125">定义连接字符串时，请确保包括指定集成安全性的参数（例如，对于到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据源的连接，其连接字符串中可能包括 `Integrated Security=SSPI`）。</span><span class="sxs-lookup"><span data-stu-id="3c305-125">When defining the connection string, be sure to include arguments that specify integrated security (for example, a connection to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data source might include `Integrated Security=SSPI` on the connection string).</span></span>|  
|<span data-ttu-id="3c305-126">Windows 身份验证</span><span class="sxs-lookup"><span data-stu-id="3c305-126">Windows Authentication</span></span>|<span data-ttu-id="3c305-127">如果您的数据访问接口支持 Windows 域用户帐户，则可以使用该帐户。</span><span class="sxs-lookup"><span data-stu-id="3c305-127">If your data provider supports it, you can use a Windows domain user account.</span></span> <span data-ttu-id="3c305-128">在调用数据处理扩展插件之前，报表服务器将模拟该用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3c305-128">The report server impersonates the user account before the data processing extension is called.</span></span><br /><br /> <span data-ttu-id="3c305-129">定义连接字符串时，请确保包括指定集成安全性的参数（例如，对于到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据源的连接，其连接字符串中可能包括 `Integrated Security=SSPI`）。</span><span class="sxs-lookup"><span data-stu-id="3c305-129">When defining the connection string, be sure to include arguments that specify integrated security (for example, a connection to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data source might include `Integrated Security=SSPI` on the connection string).</span></span>|  
|<span data-ttu-id="3c305-130">数据库凭据</span><span class="sxs-lookup"><span data-stu-id="3c305-130">Database credentials</span></span>|<span data-ttu-id="3c305-131">通过自定义 .NET 数据访问接口建立的连接不支持数据库身份验证。</span><span class="sxs-lookup"><span data-stu-id="3c305-131">Database authentication is not supported for connections made through a custom .NET data provider.</span></span> <span data-ttu-id="3c305-132">在任何情况下，报表服务器都将无法进行连接。</span><span class="sxs-lookup"><span data-stu-id="3c305-132">The report server will fail the connection in all cases.</span></span>|  
|<span data-ttu-id="3c305-133">无凭据</span><span class="sxs-lookup"><span data-stu-id="3c305-133">No credentials</span></span>|<span data-ttu-id="3c305-134">您可以将无凭据选项用于自定义 .NET 数据访问接口。</span><span class="sxs-lookup"><span data-stu-id="3c305-134">You can use the no credentials option with custom .NET data providers.</span></span> <span data-ttu-id="3c305-135">如果指定了无人参与的执行帐户，则连接字符串将确定使用的凭据。</span><span class="sxs-lookup"><span data-stu-id="3c305-135">If the unattended execution account is specified, the connection string determines the credentials that are used.</span></span> <span data-ttu-id="3c305-136">报表服务器将模拟无人参与的执行帐户来建立连接。</span><span class="sxs-lookup"><span data-stu-id="3c305-136">The report server impersonates the unattended execution account to make the connection.</span></span><br /><br /> <span data-ttu-id="3c305-137">如果未定义无人参与的执行帐户，则报表服务器将无法进行连接。</span><span class="sxs-lookup"><span data-stu-id="3c305-137">If the unattended execution account is not defined, the report server will fail the connection.</span></span> <span data-ttu-id="3c305-138">有关定义此帐户的详细信息，请参阅 [配置无人参与的执行帐户（SSRS 配置管理器）](../install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="3c305-138">For more information about defining the account, see [Configure the Unattended Execution Account &#40;SSRS Configuration Manager&#41;](../install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md).</span></span>|  
  
## <a name="connections-for-idbconnection"></a><span data-ttu-id="3c305-139">IDbConnection 连接</span><span class="sxs-lookup"><span data-stu-id="3c305-139">Connections for IDbConnection</span></span>  
 <span data-ttu-id="3c305-140">如果要使用仅支持 <xref:Microsoft.ReportingServices.DataProcessing.IDbConnection>的自定义数据处理扩展插件，则必须按以下方式指定连接：</span><span class="sxs-lookup"><span data-stu-id="3c305-140">If you are using a custom data processing extension that only supports <xref:Microsoft.ReportingServices.DataProcessing.IDbConnection>, you must specify the connection in the following way:</span></span>  
  
1.  <span data-ttu-id="3c305-141">配置无人参与的执行帐户。</span><span class="sxs-lookup"><span data-stu-id="3c305-141">Configure the unattended execution account.</span></span> <span data-ttu-id="3c305-142">使用 `IDbConnection` 建立连接时，需要配置此帐户。</span><span class="sxs-lookup"><span data-stu-id="3c305-142">Configuring this account is required for connections made using `IDbConnection`.</span></span> <span data-ttu-id="3c305-143">建立连接时，报表服务器将模拟此帐户。</span><span class="sxs-lookup"><span data-stu-id="3c305-143">The report server impersonates the account when making the connection.</span></span>  
  
2.  <span data-ttu-id="3c305-144">将报表上的数据源属性配置为使用 **“无凭据”** 。</span><span class="sxs-lookup"><span data-stu-id="3c305-144">Configure the data source properties on the report to use **No credentials**.</span></span>  
  
3.  <span data-ttu-id="3c305-145">将用于连接到数据源的凭据放置在连接字符串中。</span><span class="sxs-lookup"><span data-stu-id="3c305-145">Put the credentials used to connect to the data source in the connection string.</span></span>  
  
 <span data-ttu-id="3c305-146">使用 `IDbConnection` 时，不支持下列凭据类型：集成安全性、Windows 用户帐户以及数据库凭据。</span><span class="sxs-lookup"><span data-stu-id="3c305-146">When using `IDbConnection`, the following credential types are not supported: integrated security, Windows user accounts, and database credentials.</span></span> <span data-ttu-id="3c305-147">如果数据源连接使用这些选项，则无法在报表服务器中进行连接。</span><span class="sxs-lookup"><span data-stu-id="3c305-147">If a data source connection uses these options, the connection will fail on the report server.</span></span>  
  
## <a name="connections-for-idbconnectionextension"></a><span data-ttu-id="3c305-148">IDbConnectionExtension 连接</span><span class="sxs-lookup"><span data-stu-id="3c305-148">Connections for IDbConnectionExtension</span></span>  
 <span data-ttu-id="3c305-149">如果要使用支持 <xref:Microsoft.ReportingServices.DataProcessing.IDbConnectionExtension>的自定义数据处理扩展插件，则必须按以下方式指定连接：</span><span class="sxs-lookup"><span data-stu-id="3c305-149">If you are using a custom data processing extension and supports, <xref:Microsoft.ReportingServices.DataProcessing.IDbConnectionExtension>, you can specify the connection in the following ways:</span></span>  
  
|<span data-ttu-id="3c305-150">凭据</span><span class="sxs-lookup"><span data-stu-id="3c305-150">Credentials</span></span>|<span data-ttu-id="3c305-151">连接</span><span class="sxs-lookup"><span data-stu-id="3c305-151">Connections</span></span>|  
|-----------------|-----------------|  
|<span data-ttu-id="3c305-152">集成安全性</span><span class="sxs-lookup"><span data-stu-id="3c305-152">Integrated security</span></span>|<span data-ttu-id="3c305-153">如果您的数据访问接口支持 Windows 集成安全性，则可以将该安全性用于使用 `IDbConnectionExtension` 的自定义数据处理扩展插件。</span><span class="sxs-lookup"><span data-stu-id="3c305-153">If your data provider supports it, you can use Windows integrated security with custom data processing extensions that use `IDbConnectionExtension`.</span></span><br /><br /> <span data-ttu-id="3c305-154">定义连接字符串时，请确保包括指定集成安全性的参数（例如，对于到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据源的连接，其连接字符串中可能包括 `Integrated Security=SSPI`）。</span><span class="sxs-lookup"><span data-stu-id="3c305-154">When defining the connection string, be sure to include arguments that specify integrated security (for example, a connection to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data source might include `Integrated Security=SSPI` on the connection string).</span></span>|  
|<span data-ttu-id="3c305-155">Windows 身份验证</span><span class="sxs-lookup"><span data-stu-id="3c305-155">Windows Authentication</span></span>|<span data-ttu-id="3c305-156">如果您的数据访问接口支持 Windows 域用户帐户，则可以将该帐户用于使用 `IDbConnectionExtension` 的自定义数据处理扩展插件。</span><span class="sxs-lookup"><span data-stu-id="3c305-156">If your data provider supports it, you can use a Windows domain user account for custom data processing extensions that use `IDbConnectionExtension`.</span></span><br /><br /> <span data-ttu-id="3c305-157">在调用数据处理扩展插件之前，报表服务器将模拟该用户帐户。</span><span class="sxs-lookup"><span data-stu-id="3c305-157">The report server impersonates the user account before the data processing extension is called.</span></span> <span data-ttu-id="3c305-158">定义连接字符串时，请确保包括指定集成安全性的参数（例如，对于到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据源的连接，其连接字符串中可能包括 `Integrated Security=SSPI`）。</span><span class="sxs-lookup"><span data-stu-id="3c305-158">When defining the connection string, be sure to include arguments that specify integrated security (for example, a connection to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data source might include `Integrated Security=SSPI` on the connection string).</span></span>|  
|<span data-ttu-id="3c305-159">数据库凭据</span><span class="sxs-lookup"><span data-stu-id="3c305-159">Database credentials</span></span>|<span data-ttu-id="3c305-160">您可以使用数据库身份验证针对使用 `IDbConnectionExtension` 的自定义数据处理扩展插件配置连接。</span><span class="sxs-lookup"><span data-stu-id="3c305-160">You can use database authentication to configure connections for custom data processing extensions that use `IDbConnectionExtension`.</span></span>|  
|<span data-ttu-id="3c305-161">无凭据</span><span class="sxs-lookup"><span data-stu-id="3c305-161">No credentials</span></span>|<span data-ttu-id="3c305-162">如果指定了无人参与的执行帐户，则连接字符串将确定使用的凭据。</span><span class="sxs-lookup"><span data-stu-id="3c305-162">If the unattended execution account is specified, the connection string determines the credentials that are used.</span></span><br /><br /> <span data-ttu-id="3c305-163">如果未定义无人参与的执行帐户，则报表服务器将无法进行连接。</span><span class="sxs-lookup"><span data-stu-id="3c305-163">If the unattended execution account is not defined, the report server will fail the connection.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="3c305-164">另请参阅</span><span class="sxs-lookup"><span data-stu-id="3c305-164">See Also</span></span>  
 <span data-ttu-id="3c305-165">[配置无人参与的执行帐户（SSRS 配置管理器）](../install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="3c305-165">[Configure the Unattended Execution Account &#40;SSRS Configuration Manager&#41;](../install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="3c305-166">[为报表数据源指定凭据和连接信息](specify-credential-and-connection-information-for-report-data-sources.md) </span><span class="sxs-lookup"><span data-stu-id="3c305-166">[Specify Credential and Connection Information for Report Data Sources](specify-credential-and-connection-information-for-report-data-sources.md) </span></span>  
 <span data-ttu-id="3c305-167">[Reporting Services 中的数据连接、数据源和连接字符串](../data-connections-data-sources-and-connection-strings-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="3c305-167">[Data Connections, Data Sources, and Connection Strings in Reporting Services](../data-connections-data-sources-and-connection-strings-in-reporting-services.md) </span></span>  
 <span data-ttu-id="3c305-168">[实现数据处理扩展插件](../extensions/data-processing/implementing-a-data-processing-extension.md) </span><span class="sxs-lookup"><span data-stu-id="3c305-168">[Implementing a Data Processing Extension](../extensions/data-processing/implementing-a-data-processing-extension.md) </span></span>  
 <span data-ttu-id="3c305-169">[报表管理器（SSRS 本机模式）](../report-manager-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="3c305-169">[Report Manager  &#40;SSRS Native Mode&#41;](../report-manager-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="3c305-170">[创建、删除或修改共享数据源 &#40;报表管理器&#41;](../create-delete-or-modify-a-shared-data-source-report-manager.md) </span><span class="sxs-lookup"><span data-stu-id="3c305-170">[Create, Delete, or Modify a Shared Data Source &#40;Report Manager&#41;](../create-delete-or-modify-a-shared-data-source-report-manager.md) </span></span>  
 [<span data-ttu-id="3c305-171">配置报表的数据源属性（报表管理器）</span><span class="sxs-lookup"><span data-stu-id="3c305-171">Configure Data Source Properties for a Report  &#40;Report Manager&#41;</span></span>](configure-data-source-properties-for-a-report-report-manager.md)  
  
  
