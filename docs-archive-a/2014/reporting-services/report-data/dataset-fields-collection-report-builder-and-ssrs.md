---
title: 数据集字段集合（报表生成器和 SSRS）| Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
ms.assetid: b3884576-1f7e-4d40-bb7d-168312333bb3
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 7850cb575ff50848c97fd4591835517853a0e2cc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687503"
---
# <a name="dataset-fields-collection-report-builder-and-ssrs"></a><span data-ttu-id="b3935-102">数据集字段集合（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="b3935-102">Dataset Fields Collection (Report Builder and SSRS)</span></span>
  <span data-ttu-id="b3935-103">数据集字段表示来自数据连接的数据。</span><span class="sxs-lookup"><span data-stu-id="b3935-103">Dataset fields represent the data from a data connection.</span></span> <span data-ttu-id="b3935-104">字段可以表示数值数据，也可以表示非数值数据。</span><span class="sxs-lookup"><span data-stu-id="b3935-104">A field can represent either numeric or non-numeric data.</span></span> <span data-ttu-id="b3935-105">示例包括销售额、总销售额、客户名称、数据库标识符、URL、图像、空间数据和电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="b3935-105">Examples include sales amounts, total sales, customer names, database identifiers, URLs, images, spatial data, and e-mail addresses.</span></span> <span data-ttu-id="b3935-106">在设计图面上，字段显示为报表项（如文本框、表和图表）中的表达式。</span><span class="sxs-lookup"><span data-stu-id="b3935-106">On the design surface, fields appear as expressions in report items such as text boxes, tables, and charts.</span></span>  
  
 <span data-ttu-id="b3935-107">报表有三种类型的字段，它们显示在“报表数据”窗格中：数据集字段、数据集计算字段和内置字段。</span><span class="sxs-lookup"><span data-stu-id="b3935-107">A report has three types of fields and displays them in the Report Data pane: dataset fields, dataset calculated fields, and built-in fields.</span></span>  
  
-   <span data-ttu-id="b3935-108">**数据集字段。**</span><span class="sxs-lookup"><span data-stu-id="b3935-108">**Dataset fields.**</span></span> <span data-ttu-id="b3935-109">对数据源运行数据集查询时，表示要返回的字段集合的元数据。</span><span class="sxs-lookup"><span data-stu-id="b3935-109">The metadata that represents the collection of fields that will be returned when the dataset query runs on the data source.</span></span>  
  
-   <span data-ttu-id="b3935-110">**数据集计算字段。**</span><span class="sxs-lookup"><span data-stu-id="b3935-110">**Dataset calculated fields.**</span></span> <span data-ttu-id="b3935-111">为数据集创建的其他字段。</span><span class="sxs-lookup"><span data-stu-id="b3935-111">Additional fields that you create for the dataset.</span></span> <span data-ttu-id="b3935-112">通过计算定义的表达式来创建各个计算字段。</span><span class="sxs-lookup"><span data-stu-id="b3935-112">Each calculated field is created by evaluating an expression that you define.</span></span>  
  
-   <span data-ttu-id="b3935-113">**内置字段。**</span><span class="sxs-lookup"><span data-stu-id="b3935-113">**Built-in fields.**</span></span> <span data-ttu-id="b3935-114">表示由报表生成器提供的字段集合的元数据，字段集合提供报表信息，如报表名称或处理报表的时间。</span><span class="sxs-lookup"><span data-stu-id="b3935-114">The metadata that represents a collection of fields provided by Report Builder that provide report information such as the report name or the time when the report was processed.</span></span> <span data-ttu-id="b3935-115">有关详细信息，请参阅[内置的全局和用户引用（报表生成器和 SSRS）](../report-design/built-in-collections-built-in-globals-and-users-references-report-builder.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-115">For more information, see [Built-in Globals and Users References &#40;Report Builder and SSRS&#41;](../report-design/built-in-collections-built-in-globals-and-users-references-report-builder.md).</span></span>  
  
 <span data-ttu-id="b3935-116">数据集字段名称保存为报表数据集定义的一部分。</span><span class="sxs-lookup"><span data-stu-id="b3935-116">Dataset field names are saved as part of the report dataset definition.</span></span> <span data-ttu-id="b3935-117">有关详细信息，请参阅 [报表的嵌入数据集和共享数据集（报表生成器和 SSRS）](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-117">For more information, see [Report Embedded Datasets and Shared Datasets &#40;Report Builder and SSRS&#41;](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssRBRDDup](../../includes/ssrbrddup-md.md)]  
  
##  <a name="dataset-fields-and-queries"></a><a name="Fields"></a> <span data-ttu-id="b3935-118">数据集字段和查询</span><span class="sxs-lookup"><span data-stu-id="b3935-118">Dataset Fields and Queries</span></span>  
 <span data-ttu-id="b3935-119">数据集字段由数据集查询命令和您定义的所有计算字段指定。</span><span class="sxs-lookup"><span data-stu-id="b3935-119">Dataset fields are specified by the dataset query command and by any calculated fields that you define.</span></span> <span data-ttu-id="b3935-120">在报表中所看到的字段集合取决于您所使用的数据集类型：</span><span class="sxs-lookup"><span data-stu-id="b3935-120">The collection of fields that you see in your report depends on the type of dataset you have:</span></span>  
  
-   <span data-ttu-id="b3935-121">**共享数据集。**</span><span class="sxs-lookup"><span data-stu-id="b3935-121">**Shared dataset.**</span></span> <span data-ttu-id="b3935-122">在将共享数据集直接添加到报表后，或者当添加包含共享数据集的报表部件后，字段集合为用于共享数据集定义中的查询的字段列表。</span><span class="sxs-lookup"><span data-stu-id="b3935-122">The field collection is the list of fields for the query in the shared dataset definition at the time that you directly added the shared dataset to your report, or when you added a report part that included the shared dataset.</span></span> <span data-ttu-id="b3935-123">当在报表服务器上更改共享数据集定义时，本地字段集合不会发生更改。</span><span class="sxs-lookup"><span data-stu-id="b3935-123">The local field collection does not change when the shared dataset definition changes on the report server.</span></span> <span data-ttu-id="b3935-124">若要更新本地字段集合，必须刷新本地共享数据集的列表。</span><span class="sxs-lookup"><span data-stu-id="b3935-124">To update the local field collection, you must refresh the list for the local shared dataset.</span></span>  
  
-   <span data-ttu-id="b3935-125">**嵌入的数据集。**</span><span class="sxs-lookup"><span data-stu-id="b3935-125">**Embedded dataset.**</span></span> <span data-ttu-id="b3935-126">字段集合是针对数据源运行当前查询所返回的字段列表。</span><span class="sxs-lookup"><span data-stu-id="b3935-126">The field collection is the list of fields that is returned from running the current query against the data source.</span></span>  
  
 <span data-ttu-id="b3935-127">有关详细信息，请参阅[在“报表数据”窗格中添加、编辑和刷新字段（报表生成器和 SSRS）](add-edit-refresh-fields-in-the-report-data-pane-report-builder-and-ssrs.md)</span><span class="sxs-lookup"><span data-stu-id="b3935-127">For more information see, [Add, Edit, Refresh Fields in the Report Data Pane &#40;Report Builder and SSRS&#41;](add-edit-refresh-fields-in-the-report-data-pane-report-builder-and-ssrs.md)</span></span>  
  

  
### <a name="calculated-fields"></a><span data-ttu-id="b3935-128">计算字段</span><span class="sxs-lookup"><span data-stu-id="b3935-128">Calculated Fields</span></span>  
 <span data-ttu-id="b3935-129">通过创建表达式可以手动指定计算字段。</span><span class="sxs-lookup"><span data-stu-id="b3935-129">You specify a calculated field manually by creating an expression.</span></span> <span data-ttu-id="b3935-130">计算字段可用于创建数据源中不存在的新值。</span><span class="sxs-lookup"><span data-stu-id="b3935-130">Calculated fields can be used to create new values that do not exist on the data source.</span></span> <span data-ttu-id="b3935-131">例如，计算字段可以表示新值、一组字段值的自定义排序顺序，也可以表示转换为另一数据类型的现有字段。</span><span class="sxs-lookup"><span data-stu-id="b3935-131">For example, a calculated field can represent a new value, a custom sort order for a set of field values, or an existing field that is converted to a different data type.</span></span>  
  
 <span data-ttu-id="b3935-132">计算字段对于报表为本地字段，不能保存为共享数据集的一部分。</span><span class="sxs-lookup"><span data-stu-id="b3935-132">Calculated fields are local to a report and cannot be saved as part of a shared dataset.</span></span>  
  
 <span data-ttu-id="b3935-133">有关详细信息，请参阅[在“报表数据”窗格中添加、编辑和刷新字段（报表生成器和 SSRS）](add-edit-refresh-fields-in-the-report-data-pane-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-133">For more information, see [Add, Edit, Refresh Fields in the Report Data Pane &#40;Report Builder and SSRS&#41;](add-edit-refresh-fields-in-the-report-data-pane-report-builder-and-ssrs.md).</span></span>  
  

  
### <a name="entities-and-entity-fields"></a><span data-ttu-id="b3935-134">实体和实体字段</span><span class="sxs-lookup"><span data-stu-id="b3935-134">Entities and Entity Fields</span></span>  
 <span data-ttu-id="b3935-135">如果您使用报表模型数据源，则指定实体和实体字段作为报表数据。</span><span class="sxs-lookup"><span data-stu-id="b3935-135">If you are working with a report model data source, you specify the entities and entity fields as your report data.</span></span> <span data-ttu-id="b3935-136">在报表模型的查询设计器中，可以通过交互方式浏览和选择相关实体，并选择要包含在报表数据集中的字段。</span><span class="sxs-lookup"><span data-stu-id="b3935-136">In the query designer for a report model, you can interactively explore and select related entities and choose the fields that you want to include in your report dataset.</span></span> <span data-ttu-id="b3935-137">完成查询设计后，可以在“报表数据”窗格中查看实体标识符和实体字段的集合。</span><span class="sxs-lookup"><span data-stu-id="b3935-137">After you finish designing the query, you can see the collection of entity identifiers and entity fields in the Report Data pane.</span></span> <span data-ttu-id="b3935-138">实体标识符由报表模型自动生成，通常不显示给最终用户。</span><span class="sxs-lookup"><span data-stu-id="b3935-138">Entity identifiers are generated automatically by the report model and are typically not displayed for the end user.</span></span>  
  
### <a name="using-extended-field-properties"></a><span data-ttu-id="b3935-139">使用扩展字段属性</span><span class="sxs-lookup"><span data-stu-id="b3935-139">Using Extended Field Properties</span></span>  
 <span data-ttu-id="b3935-140">支持多维查询的数据源（例如，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]）支持字段的字段属性。</span><span class="sxs-lookup"><span data-stu-id="b3935-140">Data sources that support multidimensional queries, such as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], support field properties on fields.</span></span> <span data-ttu-id="b3935-141">字段属性显示在查询的结果集中，但是在 **“报表数据”** 窗格中不可见。</span><span class="sxs-lookup"><span data-stu-id="b3935-141">Field properties appear in the result set for a query, but are not visible in the **Report Data** pane.</span></span> <span data-ttu-id="b3935-142">它们仍可在报表中使用。</span><span class="sxs-lookup"><span data-stu-id="b3935-142">They are still available to use in your report.</span></span> <span data-ttu-id="b3935-143">若要引用字段的属性，请将该字段拖到报表中，然后将默认属性 `Value` 更改为所需属性的字段名。</span><span class="sxs-lookup"><span data-stu-id="b3935-143">To refer to a property for a field, drag the field onto the report, and change the default property `Value` to the field name of the property you want.</span></span> <span data-ttu-id="b3935-144">例如，在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 多维数据集中，可以定义多维数据集单元格中的值格式。</span><span class="sxs-lookup"><span data-stu-id="b3935-144">For example, in an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] cube, you can define formats for values in the cube cells.</span></span> <span data-ttu-id="b3935-145">通过使用字段属性 `FormattedValue` 可使用已格式化值。</span><span class="sxs-lookup"><span data-stu-id="b3935-145">The formatted value is available by using the field property `FormattedValue`.</span></span> <span data-ttu-id="b3935-146">若要直接使用该格式化值，而不是使用一个值，然后再设置文本框的格式属性，请将该字段拖到该文本框中，然后将默认表达式 `=Fields!FieldName.Value` 更改为 `=Fields!FieldName.FormattedValue`。</span><span class="sxs-lookup"><span data-stu-id="b3935-146">To use the value directly instead of using a value and setting the format property of the text box, drag the field to the text box and change the default expression `=Fields!FieldName.Value` to `=Fields!FieldName.FormattedValue`.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b3935-147">并非所有的 `Field` 属性均可用于所有数据源。</span><span class="sxs-lookup"><span data-stu-id="b3935-147">Not all `Field` properties can be used for all data sources.</span></span> <span data-ttu-id="b3935-148">针对所有的数据源定义 `Value` 和 `IsMissing` 属性。</span><span class="sxs-lookup"><span data-stu-id="b3935-148">The `Value` and `IsMissing` properties are defined for all data sources.</span></span> <span data-ttu-id="b3935-149">仅当数据源提供了其他预定义的属性（例如，多维数据源的 `Key`、`UniqueName` 和 `ParentUniqueName`）时，才支持这些属性。</span><span class="sxs-lookup"><span data-stu-id="b3935-149">Other predefined properties (such as `Key`, `UniqueName`, and `ParentUniqueName` for multidimensional data sources) are supported only if the data source provides those properties.</span></span> <span data-ttu-id="b3935-150">某些数据访问接口支持自定义属性。</span><span class="sxs-lookup"><span data-stu-id="b3935-150">Custom properties are supported by some data providers.</span></span> <span data-ttu-id="b3935-151">有关详细信息，请参阅 [报表的嵌入数据集和共享数据集（报表生成器和 SSRS）](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-151">For more information, see specific topics about extended field properties for your data source type in [Report Embedded Datasets and Shared Datasets &#40;Report Builder and SSRS&#41;](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).</span></span> <span data-ttu-id="b3935-152">例如 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据源，请参阅 [Analysis Services 数据库的扩展字段属性 (SSRS)](extended-field-properties-for-an-analysis-services-database-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-152">For example, for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source, see [Extended Field Properties for an Analysis Services Database &#40;SSRS&#41;](extended-field-properties-for-an-analysis-services-database-ssrs.md).</span></span>  
  

  
##  <a name="understanding-default-expressions-for-fields"></a><a name="Defaults"></a> <span data-ttu-id="b3935-153">了解字段的默认表达式</span><span class="sxs-lookup"><span data-stu-id="b3935-153">Understanding Default Expressions for Fields</span></span>  
 <span data-ttu-id="b3935-154">文本框可以是报表正文中的文本框报表项，也可以是 Tablix 数据区域的单元中的一个文本框。</span><span class="sxs-lookup"><span data-stu-id="b3935-154">A text box can be a text box report item in the report body, or a text box in a cell in a tablix data region.</span></span> <span data-ttu-id="b3935-155">将字段与文本框进行链接时，文本框的位置决定了字段引用的默认表达式。</span><span class="sxs-lookup"><span data-stu-id="b3935-155">When you link a field with a text box, the location of the text box determines the default expression for the field reference.</span></span> <span data-ttu-id="b3935-156">在报表正文中，文本框值表达式必须指定聚合和数据集。</span><span class="sxs-lookup"><span data-stu-id="b3935-156">In the report body, a text box value expression must specify an aggregate and a dataset.</span></span> <span data-ttu-id="b3935-157">如果报表中只有一个数据集，系统将为您创建此默认表达式。</span><span class="sxs-lookup"><span data-stu-id="b3935-157">If only one dataset exists in the report, this default expression is created for you.</span></span> <span data-ttu-id="b3935-158">对于表示数值的字段，默认聚合函数为 SUM。</span><span class="sxs-lookup"><span data-stu-id="b3935-158">For a field that represents a numeric value, the default aggregate function is Sum.</span></span> <span data-ttu-id="b3935-159">对于表示非数值的字段，默认聚合为 First。</span><span class="sxs-lookup"><span data-stu-id="b3935-159">For a field that represents a non-numeric value, the default aggregate is First.</span></span>  
  
 <span data-ttu-id="b3935-160">在 Tablix 数据区域中，默认字段表达式取决于字段所添加到的文本框的行成员身份和组成员身份。</span><span class="sxs-lookup"><span data-stu-id="b3935-160">In a tablix data region, the default field expression depends on the row and group memberships of the text box that you add the field to.</span></span> <span data-ttu-id="b3935-161">将“销售量”字段添加到表详细信息行的文本框中时，字段表达式为 `[Sales]`。</span><span class="sxs-lookup"><span data-stu-id="b3935-161">The field expression for the field Sales, when added to a text box in the detail row of a table, is `[Sales]`.</span></span> <span data-ttu-id="b3935-162">如果将同一字段添加到组头中的文本框，则默认表达式为 `(Sum[Sales])`，这是因为组头显示组的汇总值，而不是详细值。</span><span class="sxs-lookup"><span data-stu-id="b3935-162">If you add the same field to a text box in a group header, the default expression is `(Sum[Sales])`, because the group header displays summary values for the group, not detail values.</span></span> <span data-ttu-id="b3935-163">报表运行时，报表处理器对每个表达式进行计算，然后替换报表中的结果。</span><span class="sxs-lookup"><span data-stu-id="b3935-163">When the report runs, the report processor evaluates each expression and substitutes the result in the report.</span></span>  
  
 <span data-ttu-id="b3935-164">有关表达式的详细信息，请参阅[表达式（报表生成器和 SSRS）](../report-design/expressions-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-164">For more information about expressions, see [Expressions &#40;Report Builder and SSRS&#41;](../report-design/expressions-report-builder-and-ssrs.md).</span></span>  
  

  
##  <a name="field-data-types"></a><a name="DataTypes"></a> <span data-ttu-id="b3935-165">字段数据类型</span><span class="sxs-lookup"><span data-stu-id="b3935-165">Field Data Types</span></span>  
 <span data-ttu-id="b3935-166">创建数据集后，数据源中字段的数据类型可能不与报表中使用的数据类型完全相同。</span><span class="sxs-lookup"><span data-stu-id="b3935-166">When you create a dataset, the data types of the fields on the data source may not be exactly the data types used in a report.</span></span> <span data-ttu-id="b3935-167">数据类型可能经过一到两层映射。</span><span class="sxs-lookup"><span data-stu-id="b3935-167">Data types may go through one or two mapping layers.</span></span> <span data-ttu-id="b3935-168">数据处理扩展插件或数据访问接口可能将数据源中的数据类型映射到公共语言运行时 (CLR) 数据类型。</span><span class="sxs-lookup"><span data-stu-id="b3935-168">The data processing extension or data provider may map data types from the data source to common language runtime (CLR) data types.</span></span> <span data-ttu-id="b3935-169">数据处理扩展插件返回的数据类型将映射到 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)]中的公共语言运行时 (CLR) 数据类型的子集。</span><span class="sxs-lookup"><span data-stu-id="b3935-169">The data types returned by data processing extensions are mapped to a subset of common language runtime (CLR) data types from the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span></span>  
  
 <span data-ttu-id="b3935-170">在数据源中，数据以该数据源所支持的数据类型存储。</span><span class="sxs-lookup"><span data-stu-id="b3935-170">On the data source, the data is stored in data types supported by the data source.</span></span> <span data-ttu-id="b3935-171">例如，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库中的数据必须是受支持的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据类型之一，例如 `nvarchar` 或 `datetime`。</span><span class="sxs-lookup"><span data-stu-id="b3935-171">For example, data in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database must be one of the supported [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data types such as `nvarchar` or `datetime`.</span></span> <span data-ttu-id="b3935-172">从数据源检索数据时，数据通过与数据源类型相关联的数据处理扩展插件或数据访问接口进行传递。</span><span class="sxs-lookup"><span data-stu-id="b3935-172">When you retrieve data from the data source, the data passes through a data processing extension or data provider that is associated with the data source type.</span></span> <span data-ttu-id="b3935-173">数据可能从数据源所使用的数据类型转换为数据处理扩展插件所支持的数据类型，具体情况取决于数据处理扩展插件。</span><span class="sxs-lookup"><span data-stu-id="b3935-173">Depending on the data processing extension, data may be converted from the data types used by data source into data types supported by the data processing extension.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="b3935-174">使用随 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]一起安装的公共语言运行时 (CLR) 所支持的数据类型。</span><span class="sxs-lookup"><span data-stu-id="b3935-174">uses data types supported by the common language runtime (CLR) that is installed with [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="b3935-175">数据访问接口将结果集中的每一列从本机数据类型映射到 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 公共语言运行时 (CLR) 数据类型。</span><span class="sxs-lookup"><span data-stu-id="b3935-175">The data provider maps each column in the result set from the native data type to a [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] common language runtime (CLR) data type.</span></span>  
  
 <span data-ttu-id="b3935-176">在每个阶段，数据分别由不同的数据类型表示，如以下列表所描述：</span><span class="sxs-lookup"><span data-stu-id="b3935-176">At each stage, the data is represented by the data types as described in the following list:</span></span>  
  
-   <span data-ttu-id="b3935-177">**数据源** ：所连接的数据源类型版本支持的数据类型。</span><span class="sxs-lookup"><span data-stu-id="b3935-177">**Data source** The data types supported by the version of the type of data source to which you are connecting.</span></span>  
  
     <span data-ttu-id="b3935-178">例如，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据源的典型数据类型包括 `int`、`datetime` 和 `varchar`。</span><span class="sxs-lookup"><span data-stu-id="b3935-178">For example, typical data types for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data source include `int`, `datetime`, and `varchar`.</span></span> <span data-ttu-id="b3935-179"> 所引入的数据类型添加了对 、、 和  的支持。</span><span class="sxs-lookup"><span data-stu-id="b3935-179">Data types introduced by [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] added support for `date`, `time`, `datetimetz`, and `datetime2`.</span></span> <span data-ttu-id="b3935-180">有关详细信息，请参阅 [数据类型 (Transact-SQL)](https://go.microsoft.com/fwlink/?linkid=98362)。</span><span class="sxs-lookup"><span data-stu-id="b3935-180">For more information, see [Data Types (Transact-SQL)](https://go.microsoft.com/fwlink/?linkid=98362).</span></span>  
  
-   <span data-ttu-id="b3935-181">**数据访问接口或数据处理扩展插件** ：连接到数据源时选择的数据处理扩展插件的数据访问接口版本所支持的数据类型。</span><span class="sxs-lookup"><span data-stu-id="b3935-181">**Data provider or data processing extension** The data types supported by the version of the data provider of the data processing extension you select when you connect to the data source.</span></span> <span data-ttu-id="b3935-182">基于 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 的数据访问接口使用 CLR 支持的数据类型。</span><span class="sxs-lookup"><span data-stu-id="b3935-182">Data providers based on the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] use data types supported by the CLR.</span></span> <span data-ttu-id="b3935-183">有关 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 数据提供程序数据类型的详细信息，请参阅 MSDN 上的 [数据类型映射 (ADO.NET)](https://go.microsoft.com/fwlink/?LinkId=112178) 和 [使用基本类型](https://go.microsoft.com/fwlink/?LinkId=112177) 。</span><span class="sxs-lookup"><span data-stu-id="b3935-183">For more information about [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] data provider data types, see [Data Type Mappings (ADO.NET)](https://go.microsoft.com/fwlink/?LinkId=112178) and [Working with Base Types](https://go.microsoft.com/fwlink/?LinkId=112177) on MSDN.</span></span>  
  
     <span data-ttu-id="b3935-184">例如，[!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 支持的典型数据类型包括 `Int32` 和 `String`。</span><span class="sxs-lookup"><span data-stu-id="b3935-184">For example, typical data types supported by the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] include `Int32` and `String`.</span></span> <span data-ttu-id="b3935-185"> 结构支持日历日期和时间。</span><span class="sxs-lookup"><span data-stu-id="b3935-185">Calendar dates and times are supported by the `DateTime` structure.</span></span> <span data-ttu-id="b3935-186">[!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 2.0 Service Pack 1 引入了对 `DateTimeOffset` 结构的支持，用于表示带时区偏移量的日期。</span><span class="sxs-lookup"><span data-stu-id="b3935-186">The [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 2.0 Service Pack 1 introduced support for the `DateTimeOffset` structure for dates with a time zone offset.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b3935-187">报表服务器使用在报表服务器上安装和配置的数据访问接口。</span><span class="sxs-lookup"><span data-stu-id="b3935-187">The report server uses the data providers that are installed and configured on the report server.</span></span> <span data-ttu-id="b3935-188">处于预览模式的报表创作客户端使用客户端计算机上安装并配置的数据处理扩展插件。</span><span class="sxs-lookup"><span data-stu-id="b3935-188">Report authoring clients in Preview mode use the installed and configured data processing extensions on the client machine.</span></span> <span data-ttu-id="b3935-189">您必须在报表客户端环境和报表服务器环境中测试报表。</span><span class="sxs-lookup"><span data-stu-id="b3935-189">You must test your report in both the report client and the report server environment.</span></span>  
  
-   <span data-ttu-id="b3935-190">**报表处理器** 数据类型基于在安装 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]时所安装的 CLR 版本。</span><span class="sxs-lookup"><span data-stu-id="b3935-190">**Report processor** The data types are based on the version of the CLR installed when you installed [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span>  
  
     <span data-ttu-id="b3935-191">例如，下表显示了报表处理器用于 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 中引入的新日期和时间类型的数据类型：</span><span class="sxs-lookup"><span data-stu-id="b3935-191">For example, the data types the report processor uses for the new date and time types introduced in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] are shown in the following table:</span></span>  
  
    |<span data-ttu-id="b3935-192">SQL 数据类型</span><span class="sxs-lookup"><span data-stu-id="b3935-192">SQL Data Type</span></span>|<span data-ttu-id="b3935-193">CLR 数据类型</span><span class="sxs-lookup"><span data-stu-id="b3935-193">CLR Data Type</span></span>|<span data-ttu-id="b3935-194">说明</span><span class="sxs-lookup"><span data-stu-id="b3935-194">Description</span></span>|  
    |-------------------|-------------------|-----------------|  
    |`Date`|`DateTime`|<span data-ttu-id="b3935-195">仅日期</span><span class="sxs-lookup"><span data-stu-id="b3935-195">Date only</span></span>|  
    |`Time`|`TimeSpan`|<span data-ttu-id="b3935-196">仅时间</span><span class="sxs-lookup"><span data-stu-id="b3935-196">Time only</span></span>|  
    |`DateTimeTZ`|`DateTimeOffset`|<span data-ttu-id="b3935-197">带有时区偏移量的日期和时间</span><span class="sxs-lookup"><span data-stu-id="b3935-197">Date and time with time zone offset</span></span>|  
    |`DateTime2`|`DateTime`|<span data-ttu-id="b3935-198">带有毫秒小数部分的日期和时间</span><span class="sxs-lookup"><span data-stu-id="b3935-198">Date and time with fractional milliseconds</span></span>|  
  
 <span data-ttu-id="b3935-199">有关 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库类型的详细信息，请参阅 [数据类型（数据库引擎）](https://go.microsoft.com/fwlink/?linkid=98362) 和 [日期和时间数据类型及函数 (Transact-SQL)](https://go.microsoft.com/fwlink/?linkid=98360)。</span><span class="sxs-lookup"><span data-stu-id="b3935-199">For more information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database types, see [Data Types (Database Engine)](https://go.microsoft.com/fwlink/?linkid=98362) and [Date and Time Data Types and Functions (Transact-SQL)](https://go.microsoft.com/fwlink/?linkid=98360).</span></span>  
  
 <span data-ttu-id="b3935-200">有关在表达式中包括对数据集字段的引用的详细信息，请参阅[表达式中的数据类型（报表生成器和 SSRS）](../report-design/data-types-in-expressions-report-builder-and-ssrs.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-200">For more information about including references to a dataset field from an expression, see [Data Types in Expressions &#40;Report Builder and SSRS&#41;](../report-design/data-types-in-expressions-report-builder-and-ssrs.md).</span></span>  
  

  
##  <a name="detecting-missing-fields-at-run-time"></a><a name="MissingFields"></a> <span data-ttu-id="b3935-201">检测运行时缺失的字段</span><span class="sxs-lookup"><span data-stu-id="b3935-201">Detecting Missing Fields at Run Time</span></span>  
 <span data-ttu-id="b3935-202">处理报表时，数据集的结果集可能会由于数据源中不再存在指定的所有列而不包含这些列的值。</span><span class="sxs-lookup"><span data-stu-id="b3935-202">When the report is processed, the result set for a dataset may not contain values for all of the columns specified because the columns no longer exist on the data source.</span></span> <span data-ttu-id="b3935-203">可以使用字段属性 IsMissing 检测在运行时是否返回了某个字段的值。</span><span class="sxs-lookup"><span data-stu-id="b3935-203">You can use the field property IsMissing to detect whether values for a field were returned at run-time.</span></span> <span data-ttu-id="b3935-204">有关详细信息，请参阅[数据集字段集合引用（报表生成器和 SSRS）](../report-design/built-in-collections-dataset-fields-collection-references-report-builder.md)。</span><span class="sxs-lookup"><span data-stu-id="b3935-204">For more information, see [Dataset Fields Collection References &#40;Report Builder and SSRS&#41;](../report-design/built-in-collections-dataset-fields-collection-references-report-builder.md).</span></span>  
  

  
## <a name="see-also"></a><span data-ttu-id="b3935-205">另请参阅</span><span class="sxs-lookup"><span data-stu-id="b3935-205">See Also</span></span>  
 <span data-ttu-id="b3935-206">["数据集属性" 对话框-"字段 &#40;报表生成器&#41;](../dataset-properties-dialog-box-fields-report-builder.md) </span><span class="sxs-lookup"><span data-stu-id="b3935-206">[Dataset Properties Dialog Box, Fields &#40;Report Builder&#41;](../dataset-properties-dialog-box-fields-report-builder.md) </span></span>  
 <span data-ttu-id="b3935-207">[报表生成器中的报表部件和数据集](report-parts-and-datasets-in-report-builder.md) </span><span class="sxs-lookup"><span data-stu-id="b3935-207">[Report Parts and Datasets in Report Builder](report-parts-and-datasets-in-report-builder.md) </span></span>  
 [<span data-ttu-id="b3935-208">报表的嵌入数据集和共享数据集（报表生成器和 SSRS）</span><span class="sxs-lookup"><span data-stu-id="b3935-208">Report Embedded Datasets and Shared Datasets &#40;Report Builder and SSRS&#41;</span></span>](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md)  
  
  
