---
title: 为报表服务器应用程序配置可用内存 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- memory [Reporting Services]
- memory thresholds [Reporting Services]
ms.assetid: ac7ab037-300c-499d-89d4-756f8d8e99f6
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e61e44634bbc892c7d4082c5bfcde797c236265a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87588290"
---
# <a name="configure-available-memory-for-report-server-applications"></a><span data-ttu-id="78b27-102">为报表服务器应用程序配置可用内存</span><span class="sxs-lookup"><span data-stu-id="78b27-102">Configure Available Memory for Report Server Applications</span></span>
  <span data-ttu-id="78b27-103">尽管 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 可使用所有可用内存，但您可以通过为分配给 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 服务器应用程序的内存资源总量配置上限来覆盖默认行为。</span><span class="sxs-lookup"><span data-stu-id="78b27-103">Although [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] can use all available memory, you can override default behavior by configuring an upper limit on the total amount of memory resources that are allocated to [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] server applications.</span></span> <span data-ttu-id="78b27-104">此外，您还可以设置阈值，以便报表服务器根据内存压力（低、中或高）来更改其排列请求优先级和处理请求的方式。</span><span class="sxs-lookup"><span data-stu-id="78b27-104">You can also set thresholds that cause the report server to change how it prioritizes and processes requests depending on whether it is under low, medium, or heavy memory pressure.</span></span> <span data-ttu-id="78b27-105">在内存压力较低时，报表服务器通过为交互式或按需报表处理提供一个略高的优先级进行响应。</span><span class="sxs-lookup"><span data-stu-id="78b27-105">At low levels of memory pressure, the report server responds by giving a slightly higher priority to interactive or on-demand report processing.</span></span> <span data-ttu-id="78b27-106">在内存压力较高时，报表服务器使用多种方法在可用资源有限的情况下保持运行状态。</span><span class="sxs-lookup"><span data-stu-id="78b27-106">At high levels of memory pressure, the report server uses multiple techniques to remain operational using the limited resources available to it.</span></span>

 <span data-ttu-id="78b27-107">本主题介绍用户可以指定的配置设置，还说明了服务器在内存压力成为处理请求的决定因素时的响应方式。</span><span class="sxs-lookup"><span data-stu-id="78b27-107">This topic describes the configuration settings that you can specify and how the server responds when memory pressure becomes a factor in processing requests.</span></span>

## <a name="memory-management-policies"></a><span data-ttu-id="78b27-108">内存管理策略</span><span class="sxs-lookup"><span data-stu-id="78b27-108">Memory Management Policies</span></span>
 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="78b27-109">通过调整分配给特定的应用程序和特定类型的处理请求的内存量来响应系统资源约束。</span><span class="sxs-lookup"><span data-stu-id="78b27-109">responds to system resource constraints by adjusting the amount of memory that is allocated to specific applications and types of processing requests.</span></span> <span data-ttu-id="78b27-110">在报表服务器服务中运行和受内存管理限制的应用程序包括：</span><span class="sxs-lookup"><span data-stu-id="78b27-110">Applications that run in the Report Server service and that are subject to memory management include:</span></span>

-   <span data-ttu-id="78b27-111">报表管理器，一个用于报表服务器的 Web 前端应用程序。</span><span class="sxs-lookup"><span data-stu-id="78b27-111">Report Manager, a Web front-end application for the report server.</span></span>

-   <span data-ttu-id="78b27-112">报表服务器 Web 服务，用于交互式报表处理和按需请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-112">Report Server Web service, used for interactive report processing and on-demand requests.</span></span>

-   <span data-ttu-id="78b27-113">后台处理应用程序，用于计划的报表处理、订阅传递和数据库维护。</span><span class="sxs-lookup"><span data-stu-id="78b27-113">A background processing application, used for scheduled report processing, subscription delivery, and database maintenance.</span></span>

 <span data-ttu-id="78b27-114">内存管理策略适用于整个报表服务器服务，而不适用于进程中运行的单个应用程序。</span><span class="sxs-lookup"><span data-stu-id="78b27-114">Memory management policies apply to the Report Server service as a whole, and not to individual applications that run within the process.</span></span>

 <span data-ttu-id="78b27-115">如果系统没有内存压力，则每个服务器应用程序在启动时（收到请求前）都会请求一些内存，以便在最终收到请求时提供最优性能。</span><span class="sxs-lookup"><span data-stu-id="78b27-115">If there is no memory pressure on the system, each server application requests some memory at startup, in advance of receiving requests, to deliver optimum performance when requests are eventually received.</span></span> <span data-ttu-id="78b27-116">当产生内存压力时，报表服务器就会调整其进程模型，如下表中所述。</span><span class="sxs-lookup"><span data-stu-id="78b27-116">As memory pressure builds, the report server adjusts its process model as described in the following table.</span></span>

|<span data-ttu-id="78b27-117">内存压力</span><span class="sxs-lookup"><span data-stu-id="78b27-117">Memory pressure</span></span>|<span data-ttu-id="78b27-118">服务器响应</span><span class="sxs-lookup"><span data-stu-id="78b27-118">Server response</span></span>|
|---------------------|---------------------|
|<span data-ttu-id="78b27-119">低</span><span class="sxs-lookup"><span data-stu-id="78b27-119">Low</span></span>|<span data-ttu-id="78b27-120">继续处理当前请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-120">Current requests continue to process.</span></span> <span data-ttu-id="78b27-121">几乎总是接受新请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-121">New requests are almost always accepted.</span></span> <span data-ttu-id="78b27-122">定向到后台处理应用程序的请求优先级低于定向到报表服务器 Web 服务的请求优先级。</span><span class="sxs-lookup"><span data-stu-id="78b27-122">Requests that are directed to the background processing application are given a lower priority than requests directed to the Report Server Web service.</span></span>|
|<span data-ttu-id="78b27-123">中型</span><span class="sxs-lookup"><span data-stu-id="78b27-123">Medium</span></span>|<span data-ttu-id="78b27-124">继续处理当前请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-124">Current requests continue to process.</span></span> <span data-ttu-id="78b27-125">可能会接受新请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-125">New requests might be accepted.</span></span> <span data-ttu-id="78b27-126">定向到后台处理应用程序的请求优先级低于定向到报表服务器 Web 服务的请求优先级。</span><span class="sxs-lookup"><span data-stu-id="78b27-126">Requests that are directed to the background processing application are given a lower priority than requests directed to the Report Server Web service.</span></span> <span data-ttu-id="78b27-127">所有三种服务器应用程序的内存分配都将减少，但后台处理应用程序的内存减少相对更多，以便为 Web 服务器请求提供更多可用内存。</span><span class="sxs-lookup"><span data-stu-id="78b27-127">Memory allocations for all three server applications are reduced, with relatively larger reductions to background processing to make more memory available for Web service requests.</span></span>|
|<span data-ttu-id="78b27-128">高</span><span class="sxs-lookup"><span data-stu-id="78b27-128">High</span></span>|<span data-ttu-id="78b27-129">进一步减少内存分配。</span><span class="sxs-lookup"><span data-stu-id="78b27-129">Memory allocation is further reduced.</span></span> <span data-ttu-id="78b27-130">拒绝要请求更多内存的服务器应用程序。</span><span class="sxs-lookup"><span data-stu-id="78b27-130">Server applications that request more memory are denied.</span></span> <span data-ttu-id="78b27-131">当前请求的速度将会降低，完成所需的时间会更长。</span><span class="sxs-lookup"><span data-stu-id="78b27-131">Current requests are slowed down and take longer to complete.</span></span> <span data-ttu-id="78b27-132">不接受新请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-132">New requests are not accepted.</span></span> <span data-ttu-id="78b27-133">报表服务器将内存中的数据文件交换到磁盘。</span><span class="sxs-lookup"><span data-stu-id="78b27-133">The report server swaps in-memory data files to disk.</span></span><br /><br /> <span data-ttu-id="78b27-134">如果内存约束很严格，因此没有可用于处理新请求的内存，则报表服务器将在完成当前请求时返回 HTTP 503 服务器不可用的错误。</span><span class="sxs-lookup"><span data-stu-id="78b27-134">If memory constraints become severe and there is no memory available to handle new requests, the report server will return an HTTP 503 server unavailable error while current requests are completing.</span></span> <span data-ttu-id="78b27-135">在某些情况下，可以回收应用程序域以立即减少内存压力。</span><span class="sxs-lookup"><span data-stu-id="78b27-135">In some cases, the application domains might be recycled to immediately reduce memory pressure.</span></span>|

 <span data-ttu-id="78b27-136">尽管无法对不同内存压力情况自定义报表服务器响应，但您可以指定配置设置，以定义区分高、中和低内存压力响应的边界。</span><span class="sxs-lookup"><span data-stu-id="78b27-136">Although you cannot customize the report server responses to different memory pressure scenarios, you can specify configuration settings that define the boundaries that separate high, medium, and low memory pressure responses.</span></span>

## <a name="when-to-customize-memory-management-settings"></a><span data-ttu-id="78b27-137">何时自定义内存管理设置</span><span class="sxs-lookup"><span data-stu-id="78b27-137">When to Customize Memory Management Settings</span></span>
 <span data-ttu-id="78b27-138">默认设置为低、中和高内存压力指定了不同的范围。</span><span class="sxs-lookup"><span data-stu-id="78b27-138">The default settings specify unequal ranges for low, medium, and high memory pressure.</span></span> <span data-ttu-id="78b27-139">默认情况下，低内存压力区域大于中内存压力和高内存压力区域。</span><span class="sxs-lookup"><span data-stu-id="78b27-139">By default, the low memory pressure zone is larger than the zones for medium and high memory pressure.</span></span> <span data-ttu-id="78b27-140">此配置最适于处理平均分发或增量增加或减少的负载。</span><span class="sxs-lookup"><span data-stu-id="78b27-140">This configuration is optimum for processing loads that are evenly distributed or that grow or decline incrementally.</span></span> <span data-ttu-id="78b27-141">在这种情况下，各区域之间的切换是渐进的，因此报表服务器有时间调整其响应。</span><span class="sxs-lookup"><span data-stu-id="78b27-141">In this scenario, the transition between zones is gradual and the report server has time to adjust its response.</span></span>

 <span data-ttu-id="78b27-142">如果负载模式包含峰值，修改默认设置将非常有用。</span><span class="sxs-lookup"><span data-stu-id="78b27-142">Modifying the default settings is useful if the load pattern includes spikes.</span></span> <span data-ttu-id="78b27-143">当处理负荷中突然出现峰值时，报表服务器可能会迅速从无内存压力状态转为内存分配失败状态。</span><span class="sxs-lookup"><span data-stu-id="78b27-143">When there are sudden spikes in the processing load, the report server might go from no memory pressure to memory allocation failures very quickly.</span></span> <span data-ttu-id="78b27-144">如果您同时启动了某个占用大量内存的报表的多个并发实例，则可能会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="78b27-144">This might occur if you have multiple concurrent instances of a memory-intensive report that start at the same time.</span></span> <span data-ttu-id="78b27-145">若要处理此类型的处理负荷，需要将报表服务器尽可能移动到中或高内存压力响应中，以便降低处理速度。</span><span class="sxs-lookup"><span data-stu-id="78b27-145">To handle this type of processing load, you want the report server to move into a medium or high memory pressure response as soon as possible so that it can slow down processing.</span></span> <span data-ttu-id="78b27-146">这样可以完成更多的请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-146">This allows more requests to complete.</span></span> <span data-ttu-id="78b27-147">为此，您应该降低 `MemorySafetyMargin` 的值，使低内存压力区域相对于其他区域更小。</span><span class="sxs-lookup"><span data-stu-id="78b27-147">To do this, you should lower the value for `MemorySafetyMargin` to make the low memory pressure zone smaller relative to the other zones.</span></span> <span data-ttu-id="78b27-148">此操作将导致对中内存压力和高内存压力的响应更早发生。</span><span class="sxs-lookup"><span data-stu-id="78b27-148">Doing so will cause responses for medium and high memory pressure to occur earlier.</span></span>

## <a name="configuration-settings-for-memory-management"></a><span data-ttu-id="78b27-149">内存管理的配置设置</span><span class="sxs-lookup"><span data-stu-id="78b27-149">Configuration Settings for Memory Management</span></span>
 <span data-ttu-id="78b27-150">控制报表服务器的内存分配的配置设置包括 `WorkingSetMaximum`、`WorkingSetMinimum`、`MemorySafetyMargin` 和 `MemoryThreshold`。</span><span class="sxs-lookup"><span data-stu-id="78b27-150">Configuration settings that control memory allocation for the report server include `WorkingSetMaximum`, `WorkingSetMinimum`, `MemorySafetyMargin`, and `MemoryThreshold`.</span></span>

-   <span data-ttu-id="78b27-151">`WorkingSetMaximum` 和 `WorkingSetMinimum` 用于定义可用内存的范围。</span><span class="sxs-lookup"><span data-stu-id="78b27-151">`WorkingSetMaximum` and `WorkingSetMinimum` define the range of available memory.</span></span> <span data-ttu-id="78b27-152">您可以配置这些设置，以便为报表服务器应用程序设置可用内存范围。</span><span class="sxs-lookup"><span data-stu-id="78b27-152">You can configure these settings to set a range of available memory for the report server applications.</span></span> <span data-ttu-id="78b27-153">如果要在同一台计算机上承载多个应用程序，并且确定报表服务器相对于同一台计算机上的其他应用程序消耗的系统资源过多，则此设置可能很有用。</span><span class="sxs-lookup"><span data-stu-id="78b27-153">This can be useful if you are hosting multiple applications on the same computer and you determine that the report server is using a disproportionate amount of system resources relative to other applications on the same computer.</span></span>

-   <span data-ttu-id="78b27-154">`MemorySafetyMargin` 和 `MemoryThreshold` 用于设置低、中和高级别的内存压力的边界。</span><span class="sxs-lookup"><span data-stu-id="78b27-154">`MemorySafetyMargin` and `MemoryThreshold` set the boundaries for low, medium, and high levels of memory pressure.</span></span> <span data-ttu-id="78b27-155">对于每种状态， [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 都会采取纠正操作，以确保相对于计算机上的可用内存量对报表处理和其他请求进行相应处理。</span><span class="sxs-lookup"><span data-stu-id="78b27-155">For each state, [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] takes corrective action to ensure report processing and other requests are handled appropriately relative to the amount of memory that is available on the computer.</span></span> <span data-ttu-id="78b27-156">您可以指定配置设置以确定低、中和高压力级别之间的说明。</span><span class="sxs-lookup"><span data-stu-id="78b27-156">You can specify configuration settings that determine the delineation between low, high, and medium pressure levels.</span></span>

     <span data-ttu-id="78b27-157">尽管您可以更改配置设置，但这样不会提高报表处理性能。</span><span class="sxs-lookup"><span data-stu-id="78b27-157">Although you can change the configuration settings, doing so will not improve report processing performance.</span></span> <span data-ttu-id="78b27-158">仅当请求在完成之前被删除时，更改配置设置才有用。</span><span class="sxs-lookup"><span data-stu-id="78b27-158">Changing the configuration settings is useful only if requests are getting dropped before they complete.</span></span> <span data-ttu-id="78b27-159">提高服务器性能的最佳方法是在专用计算机上部署报表服务器或单个报表服务器应用程序。</span><span class="sxs-lookup"><span data-stu-id="78b27-159">The best way to improve server performance is to deploy the report server or individual report server applications on dedicated computers.</span></span>

 <span data-ttu-id="78b27-160">下图显示了如何综合使用这些设置来区分低、中和高级别的内存压力：</span><span class="sxs-lookup"><span data-stu-id="78b27-160">The following illustration shows how the settings are used together to distinguish between low, medium, and high levels of memory pressure:</span></span>

 <span data-ttu-id="78b27-161">![内存状态的配置设置](../media/rs-memoryconfigurationzones.gif "内存状态的配置设置")</span><span class="sxs-lookup"><span data-stu-id="78b27-161">![Configuration settings for memory state](../media/rs-memoryconfigurationzones.gif "Configuration settings for memory state")</span></span>

 <span data-ttu-id="78b27-162">下表介绍了 `WorkingSetMaximum`、`WorkingSetMinimum`、`MemorySafetyMargin` 和 `MemoryThreshold` 设置。</span><span class="sxs-lookup"><span data-stu-id="78b27-162">The following table describes `WorkingSetMaximum`, `WorkingSetMinimum`, `MemorySafetyMargin`, and `MemoryThreshold` settings.</span></span> <span data-ttu-id="78b27-163">配置设置是在 [RSReportServer.config 文件](rsreportserver-config-configuration-file.md)中指定的。</span><span class="sxs-lookup"><span data-stu-id="78b27-163">Configuration settings are specified in the [RSReportServer.config file](rsreportserver-config-configuration-file.md).</span></span>

|<span data-ttu-id="78b27-164">元素</span><span class="sxs-lookup"><span data-stu-id="78b27-164">Element</span></span>|<span data-ttu-id="78b27-165">说明</span><span class="sxs-lookup"><span data-stu-id="78b27-165">Description</span></span>|
|-------------|-----------------|
|`WorkingSetMaximum`|<span data-ttu-id="78b27-166">指定内存阈值，在超出此值后将不会向报表服务器应用程序授予任何新的内存分配请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-166">Specifies a memory threshold after which no new memory allocations requests are granted to report server applications.</span></span><br /><br /> <span data-ttu-id="78b27-167">默认情况下，报表服务器将 `WorkingSetMaximum` 设置为计算机上的可用内存量。</span><span class="sxs-lookup"><span data-stu-id="78b27-167">By default, the report server sets `WorkingSetMaximum` to the amount of available memory on the computer.</span></span> <span data-ttu-id="78b27-168">启动服务时，将会检测此值。</span><span class="sxs-lookup"><span data-stu-id="78b27-168">This value is detected when the service starts.</span></span><br /><br /> <span data-ttu-id="78b27-169">除非您手动添加，否则此设置不会显示在 RSReportServer.config 文件中。</span><span class="sxs-lookup"><span data-stu-id="78b27-169">This setting does not appear in the RSReportServer.config file unless you add it manually.</span></span> <span data-ttu-id="78b27-170">如果希望报表服务器使用较少的内存，则可修改 RSReportServer.config 文件并添加该元素和值。</span><span class="sxs-lookup"><span data-stu-id="78b27-170">If you want the report server to use less memory, you can modify the RSReportServer.config file and add the element and value.</span></span> <span data-ttu-id="78b27-171">有效值的范围为 0 到最大整数之间。</span><span class="sxs-lookup"><span data-stu-id="78b27-171">Valid values range from 0 to maximum integer.</span></span> <span data-ttu-id="78b27-172">此值以 KB 为单位表示。</span><span class="sxs-lookup"><span data-stu-id="78b27-172">This value is expressed in kilobytes.</span></span><br /><br /> <span data-ttu-id="78b27-173">达到 `WorkingSetMaximum` 的值时，报表服务器将不接受新请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-173">When the value for `WorkingSetMaximum` is reached, the report server does not accept new requests.</span></span> <span data-ttu-id="78b27-174">允许完成当前正在执行的请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-174">Requests that are currently in progress are allowed to complete.</span></span> <span data-ttu-id="78b27-175">只有当所用内存低于通过 `WorkingSetMaximum` 指定的值时，才会接受新的请求。</span><span class="sxs-lookup"><span data-stu-id="78b27-175">New requests are accepted only when memory use falls below the value specified through `WorkingSetMaximum`.</span></span><br /><br /> <span data-ttu-id="78b27-176">如果现有请求在达到 `WorkingSetMaximum` 值后继续占用额外内存，则将回收所有报表服务器应用程序域。</span><span class="sxs-lookup"><span data-stu-id="78b27-176">If existing requests continue to consume additional memory after the `WorkingSetMaximum` value has been reached, all report server application domains will be recycled.</span></span> <span data-ttu-id="78b27-177">有关详细信息，请参阅 [Application Domains for Report Server Applications](application-domains-for-report-server-applications.md)。</span><span class="sxs-lookup"><span data-stu-id="78b27-177">For more information, see [Application Domains for Report Server Applications](application-domains-for-report-server-applications.md).</span></span>|
|`WorkingSetMinimum`|<span data-ttu-id="78b27-178">指定资源占用的下限；如果内存使用总量低于此限制值，报表服务器将不会释放内存。</span><span class="sxs-lookup"><span data-stu-id="78b27-178">Specifies a lower limit for resource consumption; the report server will not release memory if overall memory use is below this limit.</span></span><br /><br /> <span data-ttu-id="78b27-179">默认情况下，将在服务启动时计算该值。</span><span class="sxs-lookup"><span data-stu-id="78b27-179">By default, the value is calculated at service startup.</span></span> <span data-ttu-id="78b27-180">计算结果为初始内存分配请求占 `WorkingSetMaximum` 的 60%。</span><span class="sxs-lookup"><span data-stu-id="78b27-180">The calculation is that the initial memory allocation request is for 60 percent of `WorkingSetMaximum`.</span></span><br /><br /> <span data-ttu-id="78b27-181">除非您手动添加，否则此设置不会显示在 RSReportServer.config 文件中。</span><span class="sxs-lookup"><span data-stu-id="78b27-181">This setting does not appear in the RSReportServer.config file unless you add it manually.</span></span> <span data-ttu-id="78b27-182">如果要自定义此值，必须将 `WorkingSetMinimum` 元素添加到 RSReportServer.config 文件中。</span><span class="sxs-lookup"><span data-stu-id="78b27-182">If you want to customize this value, you must add the `WorkingSetMinimum` element to the RSReportServer.config file.</span></span> <span data-ttu-id="78b27-183">有效值的范围为 0 到最大整数之间。</span><span class="sxs-lookup"><span data-stu-id="78b27-183">Valid values range from 0 to maximum integer.</span></span> <span data-ttu-id="78b27-184">此值以 KB 为单位表示。</span><span class="sxs-lookup"><span data-stu-id="78b27-184">This value is expressed in kilobytes..</span></span>|
|`MemoryThreshold`|<span data-ttu-id="78b27-185">指定 `WorkingSetMaximum` 的百分比，该百分比用于定义高压情况和中压情况之间的边界。</span><span class="sxs-lookup"><span data-stu-id="78b27-185">Specifies a percentage of `WorkingSetMaximum` that defines the boundary between high and medium pressure scenarios.</span></span> <span data-ttu-id="78b27-186">如果报表服务器内存使用情况达到此值，报表服务器将降低请求处理速度，并更改分配给其他服务器应用程序的内存量。</span><span class="sxs-lookup"><span data-stu-id="78b27-186">If report server memory use reaches this value, the report server slows down request processing and changes the amount of memory allocated to different server applications.</span></span> <span data-ttu-id="78b27-187">默认值为 90。</span><span class="sxs-lookup"><span data-stu-id="78b27-187">The default value is 90.</span></span> <span data-ttu-id="78b27-188">此值应大于为 `MemorySafetyMargin` 设置的值。</span><span class="sxs-lookup"><span data-stu-id="78b27-188">This value should be greater than the value set for `MemorySafetyMargin`.</span></span>|
|`MemorySafetyMargin`|<span data-ttu-id="78b27-189">指定 `WorkingSetMaximum` 的百分比，该百分比用于定义中压情况和低压情况之间的边界。</span><span class="sxs-lookup"><span data-stu-id="78b27-189">Specifies a percentage of `WorkingSetMaximum` that defines the boundary between medium and low pressure scenarios.</span></span> <span data-ttu-id="78b27-190">此值是为系统保留的可用内存百分比，无法用于报表服务器操作。</span><span class="sxs-lookup"><span data-stu-id="78b27-190">This value is the percentage of available memory that is reserved for the system and cannot be used for report server operations.</span></span> <span data-ttu-id="78b27-191">默认值为 80。</span><span class="sxs-lookup"><span data-stu-id="78b27-191">The default value is 80.</span></span>|

> [!NOTE]
>  <span data-ttu-id="78b27-192">`MemoryLimit` 和 `MaximumMemoryLimit` 设置在 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 和更高版本中已过时。</span><span class="sxs-lookup"><span data-stu-id="78b27-192">`MemoryLimit` and `MaximumMemoryLimit` settings are obsolete in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions.</span></span> <span data-ttu-id="78b27-193">如果升级现有安装或使用包含这些设置的 RSReportServer.config 文件，报表服务器将不再读取这些值。</span><span class="sxs-lookup"><span data-stu-id="78b27-193">If you upgraded an existing installation or using an RSReportServer.config file that includes those settings, the report server no longer reads those values.</span></span>

#### <a name="example-of-memory-configuration-settings"></a><span data-ttu-id="78b27-194">内存配置设置示例</span><span class="sxs-lookup"><span data-stu-id="78b27-194">Example of Memory Configuration Settings</span></span>
 <span data-ttu-id="78b27-195">下面的示例显示了使用自定义内存配置值的报表服务器计算机的配置设置。</span><span class="sxs-lookup"><span data-stu-id="78b27-195">The following example shows the configuration settings for a report server computer that uses custom memory configuration values.</span></span> <span data-ttu-id="78b27-196">如果要添加 `WorkingSetMaximum` 或 `WorkingSetMinimum`，必须在 RSReportServer.config 文件中键入这些元素和值。</span><span class="sxs-lookup"><span data-stu-id="78b27-196">If you want to add `WorkingSetMaximum` or `WorkingSetMinimum`, you must type the elements and values in the RSReportServer.config file.</span></span> <span data-ttu-id="78b27-197">两个值都是整数，表示要分配给服务器应用程序的 RAM（以 KB 为单位）。</span><span class="sxs-lookup"><span data-stu-id="78b27-197">Both values are integers that express kilobytes of RAM you are allocating to the server applications.</span></span> <span data-ttu-id="78b27-198">下面的示例指定报表服务器应用程序的总内存分配不能超过 4 GB。</span><span class="sxs-lookup"><span data-stu-id="78b27-198">The following example specifies that total memory allocation for the report server applications cannot exceed 4 gigabytes.</span></span> <span data-ttu-id="78b27-199">如果 `WorkingSetMinimum` 的默认值（`WorkingSetMaximum` 的 60%）是可以接受的，则可忽略该值并在 RSReportServer.config 文件中仅指定 `WorkingSetMaximum`。</span><span class="sxs-lookup"><span data-stu-id="78b27-199">If the default value for `WorkingSetMinimum` (60% of `WorkingSetMaximum`) is acceptable, you can omit it and specify just `WorkingSetMaximum` in the RSReportServer.config file.</span></span> <span data-ttu-id="78b27-200">此示例包括 `WorkingSetMinimum` 以说明在要添加该元素时的显示方式：</span><span class="sxs-lookup"><span data-stu-id="78b27-200">This example includes `WorkingSetMinimum` to show how it would appear if you wanted to add it:</span></span>

```
      <MemorySafetyMargin>80</MemorySafetyMargin>
      <MemoryThreshold>90</MemoryThreshold>
      <WorkingSetMaximum>4000000</WorkingSetMaximum>
      <WorkingSetMinimum>2400000</WorkingSetMinimum>
```

#### <a name="about-aspnet-memory-configuration-settings"></a><span data-ttu-id="78b27-201">关于 ASP.NET 内存配置设置</span><span class="sxs-lookup"><span data-stu-id="78b27-201">About ASP.NET Memory Configuration Settings</span></span>
 <span data-ttu-id="78b27-202">尽管报表服务器 Web 服务和报表管理器是 [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] 应用程序，但这两个应用程序都不会响应在 machine.config 的 `processModel` 部分中为在 IIS 5.0 兼容模式下运行的 [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] 应用程序指定的内存配置设置。</span><span class="sxs-lookup"><span data-stu-id="78b27-202">Although the Report Server Web service and Report Manager are [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications, neither application responds to memory configuration settings that you specify in the `processModel` section of machine.config for [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications that run in IIS 5.0 compatibility mode.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="78b27-203">仅从 RSReportServer.config 文件中读取内存配置设置。</span><span class="sxs-lookup"><span data-stu-id="78b27-203">reads memory configuration settings from the RSReportServer.config file only.</span></span>

## <a name="see-also"></a><span data-ttu-id="78b27-204">另请参阅</span><span class="sxs-lookup"><span data-stu-id="78b27-204">See Also</span></span>
 <span data-ttu-id="78b27-205">[Rsreportserver.config 配置](rsreportserver-config-configuration-file.md)文件[Rsreportserver.config 配置文件](rsreportserver-config-configuration-file.md)[修改 Reporting Services 配置文件 &#40;RSreportserver.config](modify-a-reporting-services-configuration-file-rsreportserver-config.md) [报表服务器应用程序&#41;应用程序域](application-domains-for-report-server-applications.md)</span><span class="sxs-lookup"><span data-stu-id="78b27-205">[RSReportServer Configuration File](rsreportserver-config-configuration-file.md) [RSReportServer Configuration File](rsreportserver-config-configuration-file.md) [Modify a Reporting Services Configuration File &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) [Application Domains for Report Server Applications](application-domains-for-report-server-applications.md)</span></span>


