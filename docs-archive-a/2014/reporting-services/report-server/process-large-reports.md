---
title: 处理大型报表 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report processing [Reporting Services], large reports
- page breaks [Reporting Services]
- large reports
- size [SQL Server], reports
- distributing reports [Reporting Services], large reports
ms.assetid: c5275a9f-c95b-46d7-bc62-633879a8a291
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 6b1602d191ea63e77989c0978fa762c7d25a92a6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87591132"
---
# <a name="process-large-reports"></a><span data-ttu-id="92996-102">处理大型报表</span><span class="sxs-lookup"><span data-stu-id="92996-102">Process Large Reports</span></span>
  <span data-ttu-id="92996-103">大型报表将给系统的处理能力带来一定的挑战。若要正确运行大型报表，需要进行特定配置。</span><span class="sxs-lookup"><span data-stu-id="92996-103">Large reports present certain processing challenges and require certain configurations if they are to run properly.</span></span> <span data-ttu-id="92996-104">除非将大型报表配置为支持分页，否则不应按需运行这些报表。</span><span class="sxs-lookup"><span data-stu-id="92996-104">Large reports should not be run on demand unless they are configured to support pagination.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="92996-105">默认情况下，将启用分页功能。</span><span class="sxs-lookup"><span data-stu-id="92996-105">Page breaks are enabled by default.</span></span> <span data-ttu-id="92996-106">如果您认为报表将包含大量数据，请不要禁用分页功能。</span><span class="sxs-lookup"><span data-stu-id="92996-106">Do not disable page breaks if you think the report will contain a large amount of data.</span></span> <span data-ttu-id="92996-107">用于最初呈现报表的 HTML 呈现格式将在浏览器中打开报表。</span><span class="sxs-lookup"><span data-stu-id="92996-107">The HTML rendering format that is used to initially render a report opens a report in a browser.</span></span> <span data-ttu-id="92996-108">如果报表未分页，所有数据都将包含在一页中，而大多数浏览器均无法容纳这样的页面。</span><span class="sxs-lookup"><span data-stu-id="92996-108">If the report is not paginated, all of the data is included in a single page, which cannot be accommodated by most browsers.</span></span> <span data-ttu-id="92996-109">例如，几乎可以肯定，在浏览器的一页中不能显示包含 5,000 行数据的报表。</span><span class="sxs-lookup"><span data-stu-id="92996-109">For example, a report that contains 5,000 rows of data almost certainly cannot be viewed in a browser in a single page.</span></span>  
  
 <span data-ttu-id="92996-110">在使用大型报表时，应选择适合大型文档的报表执行、呈现和传递选项。</span><span class="sxs-lookup"><span data-stu-id="92996-110">If you are working with a large report, you should choose report execution, rendering, and delivery options that can accommodate large documents.</span></span> <span data-ttu-id="92996-111">报表大小在很大程度上取决于从查询返回的行集，以及用于显示报表的呈现扩展插件。</span><span class="sxs-lookup"><span data-stu-id="92996-111">Report size is largely determined by the row set that comes back from the query and the rendering extension that is used to present the report.</span></span>  
  
 <span data-ttu-id="92996-112">对于包含可变数据的不同报表，从一个报表运行到下一个报表时，报表大小会有很大变化。</span><span class="sxs-lookup"><span data-stu-id="92996-112">For reports that contain volatile data, report size can change dramatically from one report run to the next.</span></span> <span data-ttu-id="92996-113">在这种情况下，应监视数据源，以确定数据可变性对报表的影响，决定是否需要按照本主题中规定的步骤进行操作。</span><span class="sxs-lookup"><span data-stu-id="92996-113">In this case, you should monitor the data source to determine how data volatility affects your report and whether you need to follow the steps prescribed in this topic.</span></span>  
  
 <span data-ttu-id="92996-114">有关如何诊断超时错误和内存不足错误的详细信息与提示，请参阅 blogs.msdn.com 上的文章 [如何在报表服务器中运行报表时诊断问题](https://go.microsoft.com/fwlink/?LinkId=85634)。</span><span class="sxs-lookup"><span data-stu-id="92996-114">For more information and tips on how to diagnose time-out errors and out-of-memory errors, see the article [How to diagnose issues when running reports in the report server](https://go.microsoft.com/fwlink/?LinkId=85634) on blogs.msdn.com.</span></span>  
  
## <a name="configuration-recommendations"></a><span data-ttu-id="92996-115">配置建议</span><span class="sxs-lookup"><span data-stu-id="92996-115">Configuration Recommendations</span></span>  
 <span data-ttu-id="92996-116">关于报表执行、报表呈现和报表访问方面的建议包括以下几点：</span><span class="sxs-lookup"><span data-stu-id="92996-116">Recommendations for report execution, report rendering, and report access include the following items:</span></span>  
  
-   <span data-ttu-id="92996-117">将报表设计为支持分页。</span><span class="sxs-lookup"><span data-stu-id="92996-117">Design the report to support pagination.</span></span> <span data-ttu-id="92996-118">设置报表服务器每次发送一页报表。</span><span class="sxs-lookup"><span data-stu-id="92996-118">The report server sends a report one page at a time.</span></span> <span data-ttu-id="92996-119">这样，如果报表支持分页，您就可以控制流向浏览器的数据量。</span><span class="sxs-lookup"><span data-stu-id="92996-119">If the report includes pagination, you can control how much data is streamed to the browser.</span></span> <span data-ttu-id="92996-120">有关详细信息，请参阅 [预加载缓存（报表管理器）](preload-the-cache-report-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="92996-120">For more information, see [Preload the Cache &#40;Report Manager&#41;](preload-the-cache-report-manager.md).</span></span>  
  
-   <span data-ttu-id="92996-121">将报表配置为以计划报表快照的形式运行，以避免按需运行。</span><span class="sxs-lookup"><span data-stu-id="92996-121">Configure the report to run as a scheduled report snapshot to prevent it from being run on demand.</span></span> <span data-ttu-id="92996-122">不要为报表执行设置超时值。</span><span class="sxs-lookup"><span data-stu-id="92996-122">Do not set a time-out value for report execution.</span></span> <span data-ttu-id="92996-123">在非高峰期运行报表。</span><span class="sxs-lookup"><span data-stu-id="92996-123">Run the report during off-peak hours.</span></span>  
  
-   <span data-ttu-id="92996-124">如果希望控制是否处理报表，则将报表配置为使用共享数据源。</span><span class="sxs-lookup"><span data-stu-id="92996-124">Configure the report to use a shared data source if you want to control whether the report is processed.</span></span> <span data-ttu-id="92996-125">使用共享数据源的优点之一就是可以禁用数据源。</span><span class="sxs-lookup"><span data-stu-id="92996-125">One advantage to using a shared data source is that you can disable it.</span></span> <span data-ttu-id="92996-126">禁用数据源可防止处理报表。</span><span class="sxs-lookup"><span data-stu-id="92996-126">Disabling the data source prevents report processing.</span></span>  
  
-   <span data-ttu-id="92996-127">如果希望节省磁盘空间，则禁用报表历史记录功能。</span><span class="sxs-lookup"><span data-stu-id="92996-127">Disable report history if you want to conserve disk space.</span></span> <span data-ttu-id="92996-128">若要禁用报表历史记录功能，请清除“历史记录”属性页上的所有复选框。</span><span class="sxs-lookup"><span data-stu-id="92996-128">To disable report history, clear all the check boxes on the History properties page.</span></span>  
  
-   <span data-ttu-id="92996-129">限制访问报表。</span><span class="sxs-lookup"><span data-stu-id="92996-129">Limit access to the report.</span></span> <span data-ttu-id="92996-130">将报表配置为使用项级安全性，并且将默认角色分配替换为新角色分配，以便只有需要访问报表的用户才具有访问权。</span><span class="sxs-lookup"><span data-stu-id="92996-130">Configure the report to use item-level security and replace the default role assignments with new ones that allow access to only those users that need it.</span></span>  
  
     <span data-ttu-id="92996-131">默认情况下，用户可以打开在文件夹层次结构中看到的任意报表。</span><span class="sxs-lookup"><span data-stu-id="92996-131">By default, users can open any report that they can view in the folder hierarchy.</span></span> <span data-ttu-id="92996-132">即便将报表配置为以快照形式运行，能够查看文件夹中报表项用户也可以打开报表。</span><span class="sxs-lookup"><span data-stu-id="92996-132">Even if you configure a report to run as a snapshot, users who can view the report item in a folder can open the report.</span></span> <span data-ttu-id="92996-133">如果报表非常大，那么当用户在报表管理器中打开该报表时，将可能导致浏览器停止响应。</span><span class="sxs-lookup"><span data-stu-id="92996-133">If the report is very large, it might cause the browser to stop responding when a user opens the report in Report Manager.</span></span>  
  
## <a name="rendering-recommendations"></a><span data-ttu-id="92996-134">呈现建议</span><span class="sxs-lookup"><span data-stu-id="92996-134">Rendering Recommendations</span></span>  
 <span data-ttu-id="92996-135">配置报表分发之前，关键是要了解哪些呈现客户端适合大型文档。</span><span class="sxs-lookup"><span data-stu-id="92996-135">Before you configure report distribution, it is important to know which rendering clients can accommodate large documents.</span></span> <span data-ttu-id="92996-136">建议的格式为具有软分页功能的默认 HTML 呈现扩展插件，不过，您也可以选用支持分页的任何其他格式。</span><span class="sxs-lookup"><span data-stu-id="92996-136">The recommended format is the default HTML rendering extension with soft page breaks, but you can choose from any format that supports pagination.</span></span>  
  
 <span data-ttu-id="92996-137">对于每一种呈现格式，其性能和内存占用各不相同。</span><span class="sxs-lookup"><span data-stu-id="92996-137">Performance and memory consumption varies for each rendering format.</span></span> <span data-ttu-id="92996-138">根据所选择的格式，同一报表会按不同的速率呈现并需要不同的内存量。</span><span class="sxs-lookup"><span data-stu-id="92996-138">The same report will render at different rates and require different amounts of memory depending on the format you select.</span></span> <span data-ttu-id="92996-139">速度最快且占用内存最少的格式包括 CSV、XML 和 HTML。</span><span class="sxs-lookup"><span data-stu-id="92996-139">The fastest and least memory intensive formats include CSV, XML, and HTML.</span></span> <span data-ttu-id="92996-140">PDF 和 Excel 的性能最低，但其原因并不相同。</span><span class="sxs-lookup"><span data-stu-id="92996-140">PDF and Excel have the slowest performance, but for different reasons.</span></span> <span data-ttu-id="92996-141">PDF 会占用大量 CPU 资源，而 Excel 会占用大量内存。</span><span class="sxs-lookup"><span data-stu-id="92996-141">PDF is CPU-intensive, while Excel is RAM-intensive.</span></span> <span data-ttu-id="92996-142">图像呈现介于这两者之间。</span><span class="sxs-lookup"><span data-stu-id="92996-142">Image rendering falls in-between the two groups.</span></span> <span data-ttu-id="92996-143">您可以在定义报表分发方式时指定格式。</span><span class="sxs-lookup"><span data-stu-id="92996-143">You can specify the format when you define how the report is distributed.</span></span>  
  
## <a name="deployment-and-distribution-recommendations"></a><span data-ttu-id="92996-144">部署与分发建议</span><span class="sxs-lookup"><span data-stu-id="92996-144">Deployment and Distribution Recommendations</span></span>  
 <span data-ttu-id="92996-145">如果使用分页功能控制报表呈现，则可以与部署任何其他报表一样来部署大型报表。</span><span class="sxs-lookup"><span data-stu-id="92996-145">If you are using page breaks to control report rendering, you can deploy a large report the same way you would deploy any report.</span></span> <span data-ttu-id="92996-146">您可以通过报表管理器、SharePoint Web 部件，或通过添加到门户网站或其他网站的 URL，来访问报表。</span><span class="sxs-lookup"><span data-stu-id="92996-146">You can provide access to the report through Report Manager, a SharePoint Web part, or a URL that you add to a portal or Web site.</span></span> <span data-ttu-id="92996-147">所有这些部署选项均支持按需访问，以及以前运行的报表快照。</span><span class="sxs-lookup"><span data-stu-id="92996-147">All of these deployment options support on demand access, aw well as a previously run report snapshot.</span></span>  
  
 <span data-ttu-id="92996-148">另一种部署策略是将报表分发给各个用户。</span><span class="sxs-lookup"><span data-stu-id="92996-148">An alternative deployment strategy is to distribute reports to individual users.</span></span> <span data-ttu-id="92996-149">如果在意配置传递选项的方式，则可以通过订阅分发大型报表。</span><span class="sxs-lookup"><span data-stu-id="92996-149">You can distribute large reports through subscriptions if you are careful about how you configure delivery options.</span></span> <span data-ttu-id="92996-150">您可以使用标准订阅或数据驱动订阅来传递报表。</span><span class="sxs-lookup"><span data-stu-id="92996-150">You can use either a standard subscription or a data-driven subscription to deliver the report.</span></span> <span data-ttu-id="92996-151">关于订阅和传递方面的建议包括以下几点：</span><span class="sxs-lookup"><span data-stu-id="92996-151">Recommendations for subscription and delivery include the following:</span></span>  
  
-   <span data-ttu-id="92996-152">将订阅配置为使用 Web 存档 (MHTML)、PDF 或 Excel。</span><span class="sxs-lookup"><span data-stu-id="92996-152">Configure a subscription to use Web archive (MHTML), PDF, or Excel.</span></span>  
  
-   <span data-ttu-id="92996-153">如果使用的是 PDF 或 Excel，则将订阅配置为使用文件共享传递。</span><span class="sxs-lookup"><span data-stu-id="92996-153">Configure a subscription to use file share delivery if you are using PDF or Excel.</span></span> <span data-ttu-id="92996-154">这样，一旦传递完报表，就可以使用桌面应用程序来处理报表。</span><span class="sxs-lookup"><span data-stu-id="92996-154">Once the report is delivered, you can use a desktop application to work with the report.</span></span> <span data-ttu-id="92996-155">您必须设置对文件共享位置的权限，以确定哪些用户可以查看报表。</span><span class="sxs-lookup"><span data-stu-id="92996-155">You must set permissions on the file share to determine who can view the report.</span></span>  
  
     <span data-ttu-id="92996-156">请注意，一旦将报表放入文件共享位置，它就不再受 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]的控制和保护。</span><span class="sxs-lookup"><span data-stu-id="92996-156">Note that once the report is on the file share, it is no longer controlled or secured by [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="92996-157">如果希望在报表更新时得到通知，请创建第二个订阅，通过电子邮件传递方式专门发送通知。</span><span class="sxs-lookup"><span data-stu-id="92996-157">If you want to be notified when the report is updated, create a second subscription that uses e-mail delivery to send a notification only.</span></span>  
  
 <span data-ttu-id="92996-158">如果希望使用电子邮件形式传递报表，请配置订阅以包含相应的链接。</span><span class="sxs-lookup"><span data-stu-id="92996-158">If you want to use e-mail report delivery, configure the subscription to include a link.</span></span> <span data-ttu-id="92996-159">避免以附件形式发送报表。</span><span class="sxs-lookup"><span data-stu-id="92996-159">Avoid sending the report as an attachment.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="92996-160">另请参阅</span><span class="sxs-lookup"><span data-stu-id="92996-160">See Also</span></span>  
 <span data-ttu-id="92996-161">[订阅和传递 (Reporting Services)](../subscriptions/subscriptions-and-delivery-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="92996-161">[Subscriptions and Delivery &#40;Reporting Services&#41;](../subscriptions/subscriptions-and-delivery-reporting-services.md) </span></span>  
 <span data-ttu-id="92996-162">[设置报表处理属性](set-report-processing-properties.md) </span><span class="sxs-lookup"><span data-stu-id="92996-162">[Set Report Processing Properties](set-report-processing-properties.md) </span></span>  
 <span data-ttu-id="92996-163">[为报表数据源指定凭据和连接信息](../report-data/specify-credential-and-connection-information-for-report-data-sources.md) </span><span class="sxs-lookup"><span data-stu-id="92996-163">[Specify Credential and Connection Information for Report Data Sources](../report-data/specify-credential-and-connection-information-for-report-data-sources.md) </span></span>  
 <span data-ttu-id="92996-164">[报表服务器内容管理（SSRS 本机模式）](report-server-content-management-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="92996-164">[Report Server Content Management &#40;SSRS Native Mode&#41;](report-server-content-management-ssrs-native-mode.md) </span></span>  
 [<span data-ttu-id="92996-165">预加载缓存（报表管理器）</span><span class="sxs-lookup"><span data-stu-id="92996-165">Preload the Cache &#40;Report Manager&#41;</span></span>](preload-the-cache-report-manager.md)  
  
  
