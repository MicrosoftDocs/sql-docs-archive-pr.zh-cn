---
title: 日志传送表和存储过程 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- secondary servers [SQL Server]
- monitor servers [SQL Server]
- log shipping [SQL Server], system tables
- log shipping [SQL Server], stored procedures
- primary servers [SQL Server]
ms.assetid: 03420810-4c38-4c0c-adf0-913eb044c50a
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f10a6555ed3a0c27a72c3d097cc200f21d901274
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87688147"
---
# <a name="log-shipping-tables-and-stored-procedures"></a><span data-ttu-id="a71cd-102">Log Shipping Tables and Stored Procedures</span><span class="sxs-lookup"><span data-stu-id="a71cd-102">Log Shipping Tables and Stored Procedures</span></span>
  <span data-ttu-id="a71cd-103">本主题介绍与日志传送配置关联的所有表和存储过程。</span><span class="sxs-lookup"><span data-stu-id="a71cd-103">This topic describes all of the tables and stored procedures associated with a log shipping configuration.</span></span> <span data-ttu-id="a71cd-104">所有日志传送表都存储在每个服务器的 **msdb** 中。</span><span class="sxs-lookup"><span data-stu-id="a71cd-104">All log shipping tables are stored in **msdb** on each server.</span></span> <span data-ttu-id="a71cd-105">下表介绍在日志传送配置中，哪些服务器上使用的是哪些表和存储过程。</span><span class="sxs-lookup"><span data-stu-id="a71cd-105">The tables below describe which tables and stored procedures are used on which servers in a log shipping configuration.</span></span>  
  
## <a name="primary-server-tables"></a><span data-ttu-id="a71cd-106">主服务器表</span><span class="sxs-lookup"><span data-stu-id="a71cd-106">Primary Server Tables</span></span>  
  
|<span data-ttu-id="a71cd-107">表</span><span class="sxs-lookup"><span data-stu-id="a71cd-107">Table</span></span>|<span data-ttu-id="a71cd-108">说明</span><span class="sxs-lookup"><span data-stu-id="a71cd-108">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="a71cd-109">log_shipping_monitor_alert</span><span class="sxs-lookup"><span data-stu-id="a71cd-109">log_shipping_monitor_alert</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-alert-transact-sql)|<span data-ttu-id="a71cd-110">存储警报作业 ID。</span><span class="sxs-lookup"><span data-stu-id="a71cd-110">Stores alert job ID.</span></span> <span data-ttu-id="a71cd-111">仅当尚未配置远程监视服务器时，主服务器上才会使用此表。</span><span class="sxs-lookup"><span data-stu-id="a71cd-111">This table is only used on the primary server if a remote monitor server has not been configured.</span></span>|  
|[<span data-ttu-id="a71cd-112">log_shipping_monitor_error_detail</span><span class="sxs-lookup"><span data-stu-id="a71cd-112">log_shipping_monitor_error_detail</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-error-detail-transact-sql)|<span data-ttu-id="a71cd-113">存储与此主服务器关联的日志传送作业的错误详细信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-113">Stores error detail for log shipping jobs associated with this primary server.</span></span>|  
|[<span data-ttu-id="a71cd-114">log_shipping_monitor_history_detail</span><span class="sxs-lookup"><span data-stu-id="a71cd-114">log_shipping_monitor_history_detail</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-history-detail-transact-sql)|<span data-ttu-id="a71cd-115">存储与此主服务器关联的日志传送作业的历史记录详细信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-115">Stores history detail for log shipping jobs associated with this primary server.</span></span>|  
|[<span data-ttu-id="a71cd-116">log_shipping_monitor_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-116">log_shipping_monitor_primary</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-primary-transact-sql)|<span data-ttu-id="a71cd-117">存储一条此主数据库的监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-117">Stores one monitor record for this primary database.</span></span>|  
|[<span data-ttu-id="a71cd-118">log_shipping_primary_databases</span><span class="sxs-lookup"><span data-stu-id="a71cd-118">log_shipping_primary_databases</span></span>](/sql/relational-databases/system-tables/log-shipping-primary-databases-transact-sql)|<span data-ttu-id="a71cd-119">包含指定服务器上主数据库的配置信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-119">Contains configuration information for primary databases on a given server.</span></span> <span data-ttu-id="a71cd-120">每个主数据库存储一行。</span><span class="sxs-lookup"><span data-stu-id="a71cd-120">Stores one row per primary database.</span></span>|  
|[<span data-ttu-id="a71cd-121">log_shipping_primary_secondaries</span><span class="sxs-lookup"><span data-stu-id="a71cd-121">log_shipping_primary_secondaries</span></span>](/sql/relational-databases/system-tables/log-shipping-primary-secondaries-transact-sql)|<span data-ttu-id="a71cd-122">将主数据库映射到辅助数据库。</span><span class="sxs-lookup"><span data-stu-id="a71cd-122">Maps primary databases to secondary databases.</span></span>|  
  
## <a name="primary-server-stored-procedures"></a><span data-ttu-id="a71cd-123">主服务器存储过程</span><span class="sxs-lookup"><span data-stu-id="a71cd-123">Primary Server Stored Procedures</span></span>  
  
|<span data-ttu-id="a71cd-124">存储过程</span><span class="sxs-lookup"><span data-stu-id="a71cd-124">Stored Procedure</span></span>|<span data-ttu-id="a71cd-125">说明</span><span class="sxs-lookup"><span data-stu-id="a71cd-125">Description</span></span>|  
|----------------------|-----------------|  
|[<span data-ttu-id="a71cd-126">sp_add_log_shipping_primary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-126">sp_add_log_shipping_primary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-log-shipping-primary-database-transact-sql)|<span data-ttu-id="a71cd-127">设置日志传送配置（包括备份作业、本地监视记录及远程监视记录）的主数据库。</span><span class="sxs-lookup"><span data-stu-id="a71cd-127">Sets up the primary database for a log shipping configuration, including the backup job, local monitor record, and remote monitor record.</span></span>|  
|[<span data-ttu-id="a71cd-128">sp_add_log_shipping_primary_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-128">sp_add_log_shipping_primary_secondary</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-log-shipping-primary-secondary-transact-sql)|<span data-ttu-id="a71cd-129">向现有的主数据库添加辅助数据库名称。</span><span class="sxs-lookup"><span data-stu-id="a71cd-129">Adds a secondary database name to an existing primary database.</span></span>|  
|[<span data-ttu-id="a71cd-130">sp_change_log_shipping_primary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-130">sp_change_log_shipping_primary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-change-log-shipping-primary-database-transact-sql)|<span data-ttu-id="a71cd-131">更改主数据库设置，包括本地和远程监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-131">Changes primary database settings including local and remote monitor record.</span></span>|  
|[<span data-ttu-id="a71cd-132">sp_cleanup_log_shipping_history</span><span class="sxs-lookup"><span data-stu-id="a71cd-132">sp_cleanup_log_shipping_history</span></span>](/sql/relational-databases/system-stored-procedures/sp-cleanup-log-shipping-history-transact-sql)|<span data-ttu-id="a71cd-133">根据保持期清除本地历史记录及监视器上的历史记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-133">Cleans up history locally and on the monitor based on retention period.</span></span>|  
|[<span data-ttu-id="a71cd-134">sp_delete_log_shipping_primary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-134">sp_delete_log_shipping_primary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-log-shipping-primary-database-transact-sql)|<span data-ttu-id="a71cd-135">删除主数据库的日志传送，包括备份作业以及本地和远程历史记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-135">Removes log shipping of primary database including backup job as well as local and remote history.</span></span>|  
|[<span data-ttu-id="a71cd-136">sp_delete_log_shipping_primary_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-136">sp_delete_log_shipping_primary_secondary</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-log-shipping-primary-secondary-transact-sql)|<span data-ttu-id="a71cd-137">从主数据库中删除辅助数据库名称。</span><span class="sxs-lookup"><span data-stu-id="a71cd-137">Removes a secondary database name from a primary database.</span></span>|  
|[<span data-ttu-id="a71cd-138">sp_help_log_shipping_primary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-138">sp_help_log_shipping_primary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-primary-database-transact-sql)|<span data-ttu-id="a71cd-139">检索主数据库设置并显示 **log_shipping_primary_databases** 和 **log_shipping_monitor_primary** 表中的值。</span><span class="sxs-lookup"><span data-stu-id="a71cd-139">Retrieves primary database settings and displays the values from the **log_shipping_primary_databases** and **log_shipping_monitor_primary** tables.</span></span>|  
|[<span data-ttu-id="a71cd-140">sp_help_log_shipping_primary_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-140">sp_help_log_shipping_primary_secondary</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-primary-secondary-transact-sql)|<span data-ttu-id="a71cd-141">检索主数据库的辅助数据库名称。</span><span class="sxs-lookup"><span data-stu-id="a71cd-141">Retrieves secondary database names for a primary database.</span></span>|  
|[<span data-ttu-id="a71cd-142">sp_refresh_log_shipping_monitor</span><span class="sxs-lookup"><span data-stu-id="a71cd-142">sp_refresh_log_shipping_monitor</span></span>](/sql/relational-databases/system-stored-procedures/sp-refresh-log-shipping-monitor-transact-sql)|<span data-ttu-id="a71cd-143">利用指定的日志传送代理的最新信息刷新监视器。</span><span class="sxs-lookup"><span data-stu-id="a71cd-143">Refreshes the monitor with the latest information for the specified log shipping agent.</span></span>|  
  
## <a name="secondary-server-tables"></a><span data-ttu-id="a71cd-144">辅助服务器表</span><span class="sxs-lookup"><span data-stu-id="a71cd-144">Secondary Server Tables</span></span>  
  
|<span data-ttu-id="a71cd-145">表</span><span class="sxs-lookup"><span data-stu-id="a71cd-145">Table</span></span>|<span data-ttu-id="a71cd-146">说明</span><span class="sxs-lookup"><span data-stu-id="a71cd-146">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="a71cd-147">log_shipping_monitor_alert</span><span class="sxs-lookup"><span data-stu-id="a71cd-147">log_shipping_monitor_alert</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-alert-transact-sql)|<span data-ttu-id="a71cd-148">存储警报作业 ID。</span><span class="sxs-lookup"><span data-stu-id="a71cd-148">Stores alert job ID.</span></span> <span data-ttu-id="a71cd-149">仅当尚未配置远程监视服务器时，辅助服务器上才会使用此表。</span><span class="sxs-lookup"><span data-stu-id="a71cd-149">This table is only used on the secondary server if a remote monitor server has not been configured.</span></span>|  
|[<span data-ttu-id="a71cd-150">log_shipping_monitor_error_detail</span><span class="sxs-lookup"><span data-stu-id="a71cd-150">log_shipping_monitor_error_detail</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-error-detail-transact-sql)|<span data-ttu-id="a71cd-151">存储与此辅助服务器关联的日志传送作业的错误详细信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-151">Stores error detail for log shipping jobs associated with this secondary server.</span></span>|  
|[<span data-ttu-id="a71cd-152">log_shipping_monitor_history_detail</span><span class="sxs-lookup"><span data-stu-id="a71cd-152">log_shipping_monitor_history_detail</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-history-detail-transact-sql)|<span data-ttu-id="a71cd-153">存储与此辅助服务器关联的日志传送作业的历史记录详细信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-153">Stores history detail for log shipping jobs associated with this secondary server.</span></span>|  
|[<span data-ttu-id="a71cd-154">log_shipping_monitor_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-154">log_shipping_monitor_secondary</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-secondary-transact-sql)|<span data-ttu-id="a71cd-155">存储与此辅助服务器关联的辅助数据库监视记录。每个辅助数据库存储一条监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-155">Stores one monitor record per secondary database associated with this secondary server.</span></span>|  
|[<span data-ttu-id="a71cd-156">log_shipping_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-156">log_shipping_secondary</span></span>](/sql/relational-databases/system-tables/log-shipping-secondary-transact-sql)|<span data-ttu-id="a71cd-157">包含指定服务器上辅助数据库的配置信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-157">Contains configuration information for the secondary databases on a given server.</span></span> <span data-ttu-id="a71cd-158">每个辅助 ID 存储一行。</span><span class="sxs-lookup"><span data-stu-id="a71cd-158">Stores one row per secondary ID.</span></span>|  
|[<span data-ttu-id="a71cd-159">log_shipping_secondary_databases</span><span class="sxs-lookup"><span data-stu-id="a71cd-159">log_shipping_secondary_databases</span></span>](/sql/relational-databases/system-tables/log-shipping-secondary-databases-transact-sql)|<span data-ttu-id="a71cd-160">存储指定辅助数据库的配置信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-160">Stores configuration information for a given secondary database.</span></span> <span data-ttu-id="a71cd-161">每个辅助数据库存储一行。</span><span class="sxs-lookup"><span data-stu-id="a71cd-161">Stores one row per secondary database.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="a71cd-162">与指定主数据库位于同一个辅助服务器上的辅助数据库共享 **log_shipping_secondary** 表中的设置。</span><span class="sxs-lookup"><span data-stu-id="a71cd-162">Secondary databases on the same secondary server for a given primary database share the settings in the **log_shipping_secondary** table.</span></span> <span data-ttu-id="a71cd-163">如果一个辅助数据库更改了共享设置，所有辅助数据库的设置都将更改。</span><span class="sxs-lookup"><span data-stu-id="a71cd-163">If a shared setting is altered for one secondary database, the setting is altered for all of them.</span></span>  
  
## <a name="secondary-server-stored-procedures"></a><span data-ttu-id="a71cd-164">辅助服务器存储过程</span><span class="sxs-lookup"><span data-stu-id="a71cd-164">Secondary Server Stored Procedures</span></span>  
  
|<span data-ttu-id="a71cd-165">存储过程</span><span class="sxs-lookup"><span data-stu-id="a71cd-165">Stored Procedure</span></span>|<span data-ttu-id="a71cd-166">说明</span><span class="sxs-lookup"><span data-stu-id="a71cd-166">Description</span></span>|  
|----------------------|-----------------|  
|[<span data-ttu-id="a71cd-167">sp_add_log_shipping_secondary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-167">sp_add_log_shipping_secondary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-log-shipping-secondary-database-transact-sql)|<span data-ttu-id="a71cd-168">设置用于日志传送的辅助数据库。</span><span class="sxs-lookup"><span data-stu-id="a71cd-168">Sets up a secondary database for log shipping.</span></span>|  
|[<span data-ttu-id="a71cd-169">sp_add_log_shipping_secondary_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-169">sp_add_log_shipping_secondary_primary</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-log-shipping-secondary-primary-transact-sql)|<span data-ttu-id="a71cd-170">为指定的主数据库设置主服务器信息，添加本地和远程监视器链接，并在辅助服务器上创建复制作业和还原作业。</span><span class="sxs-lookup"><span data-stu-id="a71cd-170">Sets up the primary information, adds local and remote monitor links, and creates copy and restore jobs on the secondary server for the specified primary database.</span></span>|  
|[<span data-ttu-id="a71cd-171">sp_change_log_shipping_secondary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-171">sp_change_log_shipping_secondary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-change-log-shipping-secondary-database-transact-sql)|<span data-ttu-id="a71cd-172">更改辅助数据库设置，包括本地和远程监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-172">Changes secondary database settings including local and remote monitor records.</span></span>|  
|[<span data-ttu-id="a71cd-173">sp_change_log_shipping_secondary_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-173">sp_change_log_shipping_secondary_primary</span></span>](/sql/relational-databases/system-stored-procedures/sp-change-log-shipping-secondary-primary-transact-sql)|<span data-ttu-id="a71cd-174">更改辅助数据库设置，例如源目录、目标目录和文件保持期。</span><span class="sxs-lookup"><span data-stu-id="a71cd-174">Changes secondary database settings such as source and destination directory, and file retention period.</span></span>|  
|[<span data-ttu-id="a71cd-175">sp_cleanup_log_shipping_history</span><span class="sxs-lookup"><span data-stu-id="a71cd-175">sp_cleanup_log_shipping_history</span></span>](/sql/relational-databases/system-stored-procedures/sp-cleanup-log-shipping-history-transact-sql)|<span data-ttu-id="a71cd-176">根据保持期清除本地历史记录及监视器上的历史记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-176">Cleans up history locally and on the monitor based on retention period.</span></span>|  
|[<span data-ttu-id="a71cd-177">sp_delete_log_shipping_secondary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-177">sp_delete_log_shipping_secondary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-log-shipping-secondary-database-transact-sql)|<span data-ttu-id="a71cd-178">删除辅助数据库、本地历史记录和远程历史记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-178">Removes a secondary database and the local history and remote history.</span></span>|  
|[<span data-ttu-id="a71cd-179">sp_delete_log_shipping_secondary_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-179">sp_delete_log_shipping_secondary_primary</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-log-shipping-secondary-primary-transact-sql)|<span data-ttu-id="a71cd-180">从辅助服务器上删除有关指定的主服务器的信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-180">Removes the information about the specified primary server from the secondary server.</span></span>|  
|[<span data-ttu-id="a71cd-181">sp_help_log_shipping_secondary_database</span><span class="sxs-lookup"><span data-stu-id="a71cd-181">sp_help_log_shipping_secondary_database</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-secondary-database-transact-sql)|<span data-ttu-id="a71cd-182">从 **log_shipping_secondary**、 **log_shipping_secondary_databases**和 **log_shipping_monitor_secondary** 表中检索辅助数据库设置。</span><span class="sxs-lookup"><span data-stu-id="a71cd-182">Retrieves secondary database settings from the **log_shipping_secondary**, **log_shipping_secondary_databases**, and **log_shipping_monitor_secondary** tables.</span></span>|  
|[<span data-ttu-id="a71cd-183">sp_help_log_shipping_secondary_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-183">sp_help_log_shipping_secondary_primary</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-secondary-primary-transact-sql)|<span data-ttu-id="a71cd-184">此存储过程将在辅助服务器上检索给定的主数据库的设置。</span><span class="sxs-lookup"><span data-stu-id="a71cd-184">This stored procedure retrieves the settings for a given primary database on the secondary server.</span></span>|  
|[<span data-ttu-id="a71cd-185">sp_refresh_log_shipping_monitor</span><span class="sxs-lookup"><span data-stu-id="a71cd-185">sp_refresh_log_shipping_monitor</span></span>](/sql/relational-databases/system-stored-procedures/sp-refresh-log-shipping-monitor-transact-sql)|<span data-ttu-id="a71cd-186">利用指定的日志传送代理的最新信息刷新监视器。</span><span class="sxs-lookup"><span data-stu-id="a71cd-186">Refreshes the monitor with the latest information for the specified log shipping agent.</span></span>|  
  
## <a name="monitor-server-tables"></a><span data-ttu-id="a71cd-187">监视服务器表</span><span class="sxs-lookup"><span data-stu-id="a71cd-187">Monitor Server Tables</span></span>  
  
|<span data-ttu-id="a71cd-188">表</span><span class="sxs-lookup"><span data-stu-id="a71cd-188">Table</span></span>|<span data-ttu-id="a71cd-189">说明</span><span class="sxs-lookup"><span data-stu-id="a71cd-189">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="a71cd-190">log_shipping_monitor_alert</span><span class="sxs-lookup"><span data-stu-id="a71cd-190">log_shipping_monitor_alert</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-alert-transact-sql)|<span data-ttu-id="a71cd-191">存储警报作业 ID。</span><span class="sxs-lookup"><span data-stu-id="a71cd-191">Stores alert job ID.</span></span>|  
|[<span data-ttu-id="a71cd-192">log_shipping_monitor_error_detail</span><span class="sxs-lookup"><span data-stu-id="a71cd-192">log_shipping_monitor_error_detail</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-error-detail-transact-sql)|<span data-ttu-id="a71cd-193">存储日志传送作业的错误详细信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-193">Stores error detail for log shipping jobs.</span></span>|  
|[<span data-ttu-id="a71cd-194">log_shipping_monitor_history_detail</span><span class="sxs-lookup"><span data-stu-id="a71cd-194">log_shipping_monitor_history_detail</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-history-detail-transact-sql)|<span data-ttu-id="a71cd-195">存储日志传送作业的历史记录详细信息。</span><span class="sxs-lookup"><span data-stu-id="a71cd-195">Stores history detail for log shipping jobs.</span></span>|  
|[<span data-ttu-id="a71cd-196">log_shipping_monitor_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-196">log_shipping_monitor_primary</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-primary-transact-sql)|<span data-ttu-id="a71cd-197">存储与此监视服务器关联的主数据库的监视记录。每个主数据库存储一条监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-197">Stores one monitor record per primary database associated with this monitor server.</span></span>|  
|[<span data-ttu-id="a71cd-198">log_shipping_monitor_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-198">log_shipping_monitor_secondary</span></span>](/sql/relational-databases/system-tables/log-shipping-monitor-secondary-transact-sql)|<span data-ttu-id="a71cd-199">存储与此监视服务器关联的辅助数据库的监视记录。每个辅助数据库存储一条监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-199">Stores one monitor record per secondary database associated with this monitor server.</span></span>|  
  
## <a name="monitor-server-stored-procedures"></a><span data-ttu-id="a71cd-200">监视服务器存储过程</span><span class="sxs-lookup"><span data-stu-id="a71cd-200">Monitor Server Stored Procedures</span></span>  
  
|<span data-ttu-id="a71cd-201">存储过程</span><span class="sxs-lookup"><span data-stu-id="a71cd-201">Stored Procedure</span></span>|<span data-ttu-id="a71cd-202">说明</span><span class="sxs-lookup"><span data-stu-id="a71cd-202">Description</span></span>|  
|----------------------|-----------------|  
|[<span data-ttu-id="a71cd-203">sp_add_log_shipping_alert_job</span><span class="sxs-lookup"><span data-stu-id="a71cd-203">sp_add_log_shipping_alert_job</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-log-shipping-alert-job-transact-sql)|<span data-ttu-id="a71cd-204">如果尚未创建日志传送警报作业，则创建它。</span><span class="sxs-lookup"><span data-stu-id="a71cd-204">Creates a log shipping alert job if one has not already been created.</span></span>|  
|[<span data-ttu-id="a71cd-205">sp_delete_log_shipping_alert_job</span><span class="sxs-lookup"><span data-stu-id="a71cd-205">sp_delete_log_shipping_alert_job</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-log-shipping-alert-job-transact-sql)|<span data-ttu-id="a71cd-206">如果没有关联的主数据库，则删除日志传送警报作业。</span><span class="sxs-lookup"><span data-stu-id="a71cd-206">Removes a log shipping alert job if there are no associated primary databases.</span></span>|  
|[<span data-ttu-id="a71cd-207">sp_help_log_shipping_alert_job</span><span class="sxs-lookup"><span data-stu-id="a71cd-207">sp_help_log_shipping_alert_job</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-alert-job-transact-sql)|<span data-ttu-id="a71cd-208">返回警报作业的作业 ID。</span><span class="sxs-lookup"><span data-stu-id="a71cd-208">Returns the job ID of the alert job.</span></span>|  
|[<span data-ttu-id="a71cd-209">sp_help_log_shipping_monitor_primary</span><span class="sxs-lookup"><span data-stu-id="a71cd-209">sp_help_log_shipping_monitor_primary</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-monitor-primary-transact-sql)|<span data-ttu-id="a71cd-210">从 **log_shipping_monitor_primary** 表中返回指定的主数据库的监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-210">Returns monitor records for the specified primary database from the **log_shipping_monitor_primary** table.</span></span>|  
|[<span data-ttu-id="a71cd-211">sp_help_log_shipping_monitor_secondary</span><span class="sxs-lookup"><span data-stu-id="a71cd-211">sp_help_log_shipping_monitor_secondary</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-log-shipping-monitor-secondary-transact-sql)|<span data-ttu-id="a71cd-212">从 **log_shipping_monitor_secondary** 表中返回指定的辅助数据库的监视记录。</span><span class="sxs-lookup"><span data-stu-id="a71cd-212">Returns monitor records for the specified secondary database from the **log_shipping_monitor_secondary** table.</span></span>|  
  
  
