---
title: 更改 SQL Server (SQL Server 配置管理器的服务启动帐户) |Microsoft Docs
ms.custom: ''
ms.date: 01/07/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- SQL Server services, startup account changes
- startup accounts [SQL Server]
- changing startup accounts for services
ms.assetid: d721c796-0397-46a7-901b-1a9a3c3fb385
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c14c1756ac66c4a377271a13e61a307e53ac1ee2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87688195"
---
# <a name="change-the-service-startup-account-for-sql-server-sql-server-configuration-manager"></a><span data-ttu-id="b588e-102">为 SQL Server 更改服务启动帐户（SQL Server 配置管理器）</span><span class="sxs-lookup"><span data-stu-id="b588e-102">Change the Service Startup Account for SQL Server (SQL Server Configuration Manager)</span></span>
  <span data-ttu-id="b588e-103">本主题介绍如何使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器更改 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 服务的启动选项，以及更改由 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 和 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 使用的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="b588e-103">This topic describes how to Use the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager to change the start up options of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] services and to change the service accounts that are used by the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span> <span data-ttu-id="b588e-104">在 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 中通过使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]、 [!INCLUDE[tsql](../../includes/tsql-md.md)]或 PowerShell。</span><span class="sxs-lookup"><span data-stu-id="b588e-104">in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or PowerShell.</span></span> <span data-ttu-id="b588e-105">有关如何选择适合的服务帐户的详细信息，请参阅 [配置 Windows 服务帐户和权限](configure-windows-service-accounts-and-permissions.md)。</span><span class="sxs-lookup"><span data-stu-id="b588e-105">For more information about how to select an appropriate service account, see [Configure Windows Service Accounts and Permissions](configure-windows-service-accounts-and-permissions.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="b588e-106">更改 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 和 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 的服务启动帐户后，必须重新启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 服务（ [!INCLUDE[ssDE](../../includes/ssde-md.md)]）才能使更改生效。</span><span class="sxs-lookup"><span data-stu-id="b588e-106">When you change the service startup account for the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service (the [!INCLUDE[ssDE](../../includes/ssde-md.md)]) must be restarted for the change to take effect.</span></span> <span data-ttu-id="b588e-107">重新启动此服务时，所有与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例关联的数据库在此服务成功重新启动后才能使用。</span><span class="sxs-lookup"><span data-stu-id="b588e-107">When the service is restarted, all databases associated with that instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will be unavailable until the service successfully restarts.</span></span> <span data-ttu-id="b588e-108">如果必须更改 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 的服务启动帐户，请确保在定期计划维护期间或者数据库可以脱机（不中断日常操作）时执行此操作。</span><span class="sxs-lookup"><span data-stu-id="b588e-108">If you have to change the service startup account of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, make sure that you do so during regularly scheduled maintenance or when the databases can be taken offline without interrupting daily operations.</span></span>  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="b588e-109">开始之前</span><span class="sxs-lookup"><span data-stu-id="b588e-109">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="b588e-110">限制和局限</span><span class="sxs-lookup"><span data-stu-id="b588e-110">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="b588e-111">群集服务器</span><span class="sxs-lookup"><span data-stu-id="b588e-111">Clustered servers</span></span>  
  
     <span data-ttu-id="b588e-112">必须从 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 群集的活动节点更改由 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 使用的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="b588e-112">Changing the service account that is used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent must be performed from the active node of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cluster.</span></span>  
  
     <span data-ttu-id="b588e-113">如果运行在 Windows Server 2008 上（在一个使用域组的非默认配置中），则更改由 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理使用的服务帐户时，需要使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器，通过使资源组脱机来停止 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="b588e-113">When running on Windows Server 2008 (in a non-default configuration using Domain groups), changing the service account that is used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent requires [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager to stop [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by taking the resource groups offline.</span></span>  
  
-   <span data-ttu-id="b588e-114">SKU 升级（从[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 到 Express 以外的 SKU）</span><span class="sxs-lookup"><span data-stu-id="b588e-114">SKU Upgrade ([!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] to non-Express SKU)</span></span>  
  
     <span data-ttu-id="b588e-115">在 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 安装期间， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 服务被配置为使用 Network Service 帐户（但已禁用）。</span><span class="sxs-lookup"><span data-stu-id="b588e-115">During [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] installation, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service is configured to use the Network Service account but disabled.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="b588e-116">配置管理器可以更改为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理服务分配的帐户，但不能启用或启动该服务。</span><span class="sxs-lookup"><span data-stu-id="b588e-116">Configuration Manager can change the account assigned for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service but the service cannot be enabled or started.</span></span> <span data-ttu-id="b588e-117">将 SKU 从 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 升级到 Express 以外的版本后，不能自动启用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 服务，但可以在需要时通过使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器以及将服务启动模式更改为“手动”或“自动”来启用该服务。</span><span class="sxs-lookup"><span data-stu-id="b588e-117">After SKU upgrade from [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] to non-Express, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service is not automatically enabled, but can be enabled when needed by using the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager and changing the service start mode to Manual or Automatic.</span></span>  
  
##  <a name="using-sql-server-configuration-manager"></a><a name="SSMSProcedure"></a> <span data-ttu-id="b588e-118">使用 SQL Server 配置管理器</span><span class="sxs-lookup"><span data-stu-id="b588e-118">Using SQL Server Configuration Manager</span></span>  
  
#### <a name="to-change-the-sql-server-service-startup-account"></a><span data-ttu-id="b588e-119">更改 SQL Server 服务启动帐户</span><span class="sxs-lookup"><span data-stu-id="b588e-119">To change the SQL Server service startup account</span></span>  
  
1.  <span data-ttu-id="b588e-120">在 **“开始”** 菜单中，依次指向 **“所有程序”** 、 [!INCLUDE[ssCurrentUI](../../includes/sscurrentui-md.md)]、 **“配置工具”** ，然后单击 **“SQL Server 配置管理器”** 。</span><span class="sxs-lookup"><span data-stu-id="b588e-120">On the **Start** menu, point to **All Programs**, point to [!INCLUDE[ssCurrentUI](../../includes/sscurrentui-md.md)], point to **Configuration Tools**, and then click **SQL Server Configuration Manager**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b588e-121">因为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器是 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 管理控制台程序的一个管理单元而不是单独的程序，所以 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器在新版本的 Windows 中不显示为一个应用程序。</span><span class="sxs-lookup"><span data-stu-id="b588e-121">Because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager is a snap-in for the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Management Console program and not a stand-alone program, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager does not appear as an application in newer versions of Windows.</span></span>  
    >   
    >  -   <span data-ttu-id="b588e-122">**Windows 10**：</span><span class="sxs-lookup"><span data-stu-id="b588e-122">**Windows 10**:</span></span>  
    >          <span data-ttu-id="b588e-123">若要打开 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager，请在 "**开始" 页**上，键入) 的 sqlservermanager12.msc ([!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="b588e-123">To open [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager, on the **Start Page**, type SQLServerManager12.msc (for [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]).</span></span> <span data-ttu-id="b588e-124">对于早期版本的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，请将 12 替换为较小的数字。</span><span class="sxs-lookup"><span data-stu-id="b588e-124">For previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] replace 12 with a smaller number.</span></span> <span data-ttu-id="b588e-125">单击 SQLServerManager12.msc 可打开“配置管理器”。</span><span class="sxs-lookup"><span data-stu-id="b588e-125">Clicking SQLServerManager12.msc opens the Configuration Manager.</span></span> <span data-ttu-id="b588e-126">若要将 Configuration Manager 固定到 "起始页" 或 "任务栏"，请右键单击 "Sqlservermanager12.msc"，然后单击 "**打开文件位置**"。</span><span class="sxs-lookup"><span data-stu-id="b588e-126">To pin the Configuration Manager to the Start Page or Task Bar, right-click SQLServerManager12.msc, and then click **Open file location**.</span></span> <span data-ttu-id="b588e-127">在 Windows 文件资源管理器中，右键单击 "Sqlservermanager12.msc"，然后单击 "**固定到\*\*\*\*任务栏**"。</span><span class="sxs-lookup"><span data-stu-id="b588e-127">In the Windows File Explorer, right-click SQLServerManager12.msc, and then click **Pin to Start** or **Pin to taskbar**.</span></span>  
    > -   <span data-ttu-id="b588e-128">**Windows 8**：</span><span class="sxs-lookup"><span data-stu-id="b588e-128">**Windows 8**:</span></span>  
    >          <span data-ttu-id="b588e-129">若要打开 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager，请在 "**搜索**" 超级按钮中的 "**应用**" 下，键入**sqlservermanager version>.msc （ \<version> **如 `SQLServerManager12.msc` ），然后按**enter**。</span><span class="sxs-lookup"><span data-stu-id="b588e-129">To open [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager, in the **Search** charm, under **Apps**, type **SQLServerManager\<version>.msc** such as `SQLServerManager12.msc`, and then press **Enter**.</span></span>  
  
2.  <span data-ttu-id="b588e-130">在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器中，单击 **“SQL Server 服务”** 。</span><span class="sxs-lookup"><span data-stu-id="b588e-130">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager, click **SQL Server Services**.</span></span>  
  
3.  <span data-ttu-id="b588e-131">在详细信息窗格中，右键单击要为其更改服务启动帐户的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的名称，再单击“属性” 。</span><span class="sxs-lookup"><span data-stu-id="b588e-131">In the details pane, right-click the name of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance for which you want to change the service startup account, and then click **Properties**.</span></span>  
  
4.  <span data-ttu-id="b588e-132">在“SQL Server \<***instancename***> 属性”对话框中，单击“登录”选项卡，并选择“登录身份”帐户类型  。</span><span class="sxs-lookup"><span data-stu-id="b588e-132">In the **SQL Server \<***instancename***> Properties** dialog box, click the **Log On** tab, and select a **Log on as** account type.</span></span>  
  
5.  <span data-ttu-id="b588e-133">选择了新服务启动帐户后，单击 **“确定”** 。</span><span class="sxs-lookup"><span data-stu-id="b588e-133">After selecting the new service startup account, click **OK**.</span></span>  
  
     <span data-ttu-id="b588e-134">将出现一个消息框，询问是否要重新启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 服务。</span><span class="sxs-lookup"><span data-stu-id="b588e-134">A message box asks whether you want to restart the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service.</span></span>  
  
6.  <span data-ttu-id="b588e-135">单击 **“是”** ，然后关闭 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器。</span><span class="sxs-lookup"><span data-stu-id="b588e-135">Click **Yes**, and then close [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b588e-136">另请参阅</span><span class="sxs-lookup"><span data-stu-id="b588e-136">See Also</span></span>  
 <span data-ttu-id="b588e-137">[启动、停止、暂停、继续、重新启动数据库引擎、SQL Server 代理或 SQL Server Browser 服务](start-stop-pause-resume-restart-sql-server-services.md) </span><span class="sxs-lookup"><span data-stu-id="b588e-137">[Start, Stop, Pause, Resume, Restart the Database Engine, SQL Server Agent, or SQL Server Browser Service](start-stop-pause-resume-restart-sql-server-services.md) </span></span>  
 [<span data-ttu-id="b588e-138">在 SQL Server 工具中将 WMI 配置为显示服务器状态</span><span class="sxs-lookup"><span data-stu-id="b588e-138">Configure WMI to Show Server Status in SQL Server Tools</span></span>](../../ssms/configure-wmi-to-show-server-status-in-sql-server-tools.md)  
  
  
