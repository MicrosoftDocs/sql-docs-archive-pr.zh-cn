---
title: 缓冲池扩展 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
ms.assetid: 909ab7d2-2b29-46f5-aea1-280a5f8fedb4
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 42a8873f4046a307e3b8ec1ce703a34bf8cb0df2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87693094"
---
# <a name="buffer-pool-extension"></a><span data-ttu-id="02870-102">缓冲池扩展</span><span class="sxs-lookup"><span data-stu-id="02870-102">Buffer Pool Extension</span></span>
  <span data-ttu-id="02870-103">[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]中引入的缓冲池扩展提供 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 缓冲池的非易失性随机存取内存（即固态硬盘）扩展的无缝集成，从而显著提高 I/O 吞吐量。</span><span class="sxs-lookup"><span data-stu-id="02870-103">Introduced in [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)], the buffer pool extension provides the seamless integration of a nonvolatile random access memory (that is, solid-state drive) extension to the [!INCLUDE[ssDE](../../includes/ssde-md.md)] buffer pool to significantly improve I/O throughput.</span></span> <span data-ttu-id="02870-104">并非每个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本均提供了缓冲池扩展。</span><span class="sxs-lookup"><span data-stu-id="02870-104">The buffer pool extension is not available in every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] edition.</span></span> <span data-ttu-id="02870-105">有关详细信息，请参阅 [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="02870-105">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

## <a name="benefits-of-the-buffer-pool-extension"></a><span data-ttu-id="02870-106">缓冲池扩展的优点</span><span class="sxs-lookup"><span data-stu-id="02870-106">Benefits of the Buffer Pool Extension</span></span>
 <span data-ttu-id="02870-107">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库的主要用途是存储和检索数据，因此，大量磁盘 I/O 是该数据库引擎的一个核心特点。</span><span class="sxs-lookup"><span data-stu-id="02870-107">The primary purpose of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database is to store and retrieve data, so intensive disk I/O is a core characteristic of the Database Engine.</span></span> <span data-ttu-id="02870-108">由于磁盘 I/O 操作可能会占用消耗很多资源并且耗时较长，所以 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 侧重于使 I/O 极为高效。</span><span class="sxs-lookup"><span data-stu-id="02870-108">Because disk I/O operations can consume many resources and take a relatively long time to finish, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] focuses on making I/O highly efficient.</span></span> <span data-ttu-id="02870-109">缓冲池用作 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的主内存分配源。</span><span class="sxs-lookup"><span data-stu-id="02870-109">The buffer pool serves as a primary memory allocation source of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="02870-110">缓冲区管理是实现高效 I/O 操作的关键环节。</span><span class="sxs-lookup"><span data-stu-id="02870-110">Buffer management is a key component in achieving this efficiency.</span></span> <span data-ttu-id="02870-111">缓冲区管理组件由下列两种机制组成：用于访问及更新数据库页的缓冲区管理器和用于减少数据库文件 I/O 的缓冲池。</span><span class="sxs-lookup"><span data-stu-id="02870-111">The buffer management component consists of two mechanisms: the buffer manager to access and update database pages, and the buffer pool), to reduce database file I/O.</span></span>

 <span data-ttu-id="02870-112">数据和索引页从磁盘读入缓冲池，修改后的页（也称为脏页）写回磁盘。</span><span class="sxs-lookup"><span data-stu-id="02870-112">Data and index pages are read from disk into the buffer pool and modified pages (also known as dirty pages) are written back to disk.</span></span> <span data-ttu-id="02870-113">服务器和数据库检查点上的内存压力会造成缓冲区缓存中的热（活动）脏页被逐出缓存并写入机械磁盘，然后又读回到缓存中。</span><span class="sxs-lookup"><span data-stu-id="02870-113">Memory pressure on the server and database checkpoints cause hot (active) dirty pages in the buffer cache to be evicted from the cache and written to mechanical disks and then read back into the cache.</span></span> <span data-ttu-id="02870-114">这些 I/O 操作通常是 4 到 16 KB 数据的小型随机读和写操作。</span><span class="sxs-lookup"><span data-stu-id="02870-114">These I/O operations are typically small random reads and writes on the order of 4 to 16 KB of data.</span></span> <span data-ttu-id="02870-115">小型随机 I/O 模式会导致频繁搜索、机械磁盘臂争用、I/O 滞后时间延长以及系统的总 I/O 吞吐量减少。</span><span class="sxs-lookup"><span data-stu-id="02870-115">Small random I/O patterns incur frequent seeks, competing for the mechanical disk arm, increasing I/O latency, and reducing aggregate I/O throughput of the system.</span></span>

 <span data-ttu-id="02870-116">解决这些 I/O 瓶颈的典型方法是添加更多 DRAM，或者添加高性能 SAS 主轴。</span><span class="sxs-lookup"><span data-stu-id="02870-116">The typical approach to resolving these I/O bottlenecks is to add more DRAM, or alternatively, added high-performance SAS spindles.</span></span> <span data-ttu-id="02870-117">虽然这些方法很有用，但它们具有明显缺点：DRAM 比数据存储驱动器成本更高，增加主轴数会增加硬件购置的资本支出，并且功耗和部件故障概率都会提高，从而增加运行成本。</span><span class="sxs-lookup"><span data-stu-id="02870-117">While these options are helpful, they have significant drawbacks: DRAM is more expensive than data storage drives and adding spindles increases capital expenditure in hardware acquisition and increases operational costs by increased power consumption and increased probability of component failure.</span></span>

 <span data-ttu-id="02870-118">缓冲池扩展功能通过非易失性存储器（通常为 SSD）来扩展缓冲池缓存。</span><span class="sxs-lookup"><span data-stu-id="02870-118">The buffer pool extension feature extends the buffer pool cache with nonvolatile storage (usually SSD).</span></span> <span data-ttu-id="02870-119">由于这种扩展，缓冲池可以容纳更大的数据库工作集，可强制在 RAM 和 SSD 之间对 I/O 分页。</span><span class="sxs-lookup"><span data-stu-id="02870-119">Because of this extension, the buffer pool can accommodate a larger database working set, which forces the paging of I/Os between RAM and the SSDs.</span></span> <span data-ttu-id="02870-120">这会有效地将小型随机 I/O 从机械磁盘卸载到固态硬盘。</span><span class="sxs-lookup"><span data-stu-id="02870-120">This effectively offloads small random I/Os from mechanical disks to SSDs.</span></span> <span data-ttu-id="02870-121">由于固态硬盘滞后时间短且具有更佳随机 I/O 性能，缓冲池扩展可显著提高 I/O 吞吐量。</span><span class="sxs-lookup"><span data-stu-id="02870-121">Because of the lower latency and better random I/O performance of SSDs, the buffer pool extension significantly improves I/O throughput.</span></span>

 <span data-ttu-id="02870-122">下面的列表说明了缓冲池扩展功能的优点。</span><span class="sxs-lookup"><span data-stu-id="02870-122">The following list describes the benefits of the buffer pool extension feature.</span></span>

-   <span data-ttu-id="02870-123">随机 I/O 吞吐量提高</span><span class="sxs-lookup"><span data-stu-id="02870-123">Increased random I/O throughput</span></span>

-   <span data-ttu-id="02870-124">I/O 滞后时间缩短</span><span class="sxs-lookup"><span data-stu-id="02870-124">Reduced I/O latency</span></span>

-   <span data-ttu-id="02870-125">事务吞吐量提高</span><span class="sxs-lookup"><span data-stu-id="02870-125">Increased transaction throughput</span></span>

-   <span data-ttu-id="02870-126">由于采用更大的混合缓冲池，读取性能提高</span><span class="sxs-lookup"><span data-stu-id="02870-126">Improved read performance with a larger hybrid buffer pool</span></span>

-   <span data-ttu-id="02870-127">具有一种可利用现有和将来的低成本内存驱动器的缓存体系结构</span><span class="sxs-lookup"><span data-stu-id="02870-127">A caching architecture that can take advantage of present and future low-cost memory drives</span></span>

### <a name="concepts"></a><span data-ttu-id="02870-128">概念</span><span class="sxs-lookup"><span data-stu-id="02870-128">Concepts</span></span>
 <span data-ttu-id="02870-129">以下术语适用于缓冲池扩展功能。</span><span class="sxs-lookup"><span data-stu-id="02870-129">The following terms are applicable to the buffer pool extension feature.</span></span>

 <span data-ttu-id="02870-130">固态驱动器 (SSD) 固态驱动器以持久方式将数据存储在内存 () RAM 中。</span><span class="sxs-lookup"><span data-stu-id="02870-130">Solid-state drive (SSD) Solid-state drives store data in memory (RAM) in a persistent manner.</span></span> <span data-ttu-id="02870-131">有关详细信息，请参阅 [此定义](http://en.wikipedia.org/wiki/Solid-state_drive)。</span><span class="sxs-lookup"><span data-stu-id="02870-131">For more information, see [this definition](http://en.wikipedia.org/wiki/Solid-state_drive).</span></span>

 <span data-ttu-id="02870-132">缓冲区在中 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，缓冲区是内存中的 8 KB 页，其大小与数据页或索引页相同。</span><span class="sxs-lookup"><span data-stu-id="02870-132">Buffer In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], A buffer is an 8-KB page in memory, the same size as a data or index page.</span></span> <span data-ttu-id="02870-133">因此，缓冲区缓存被划分为多个 8-KB 页。</span><span class="sxs-lookup"><span data-stu-id="02870-133">Thus, the buffer cache is divided into 8-KB pages.</span></span> <span data-ttu-id="02870-134">缓冲区缓存中会保留一页，直到缓冲区管理器需要该缓冲区读入更多数据。</span><span class="sxs-lookup"><span data-stu-id="02870-134">A page remains in the buffer cache until the buffer manager needs the buffer area to read in more data.</span></span> <span data-ttu-id="02870-135">数据只有在被修改后才重新写入磁盘。</span><span class="sxs-lookup"><span data-stu-id="02870-135">Data is written back to disk only if it is modified.</span></span> <span data-ttu-id="02870-136">这些内存中已修改的页称为脏页。</span><span class="sxs-lookup"><span data-stu-id="02870-136">These in-memory modified pages are known as dirty pages.</span></span> <span data-ttu-id="02870-137">当一页等同于它在磁盘上的数据库映像时，该页就是干净页。</span><span class="sxs-lookup"><span data-stu-id="02870-137">A page is clean when it is equivalent to its database image on disk.</span></span> <span data-ttu-id="02870-138">在将缓冲区缓存中的数据写回磁盘之前，可对其进行多次修改。</span><span class="sxs-lookup"><span data-stu-id="02870-138">Data in the buffer cache can be modified multiple times before being written back to disk.</span></span>

 <span data-ttu-id="02870-139">缓冲池也称为缓冲区缓存。</span><span class="sxs-lookup"><span data-stu-id="02870-139">Buffer pool Also called buffer cache.</span></span> <span data-ttu-id="02870-140">缓冲池是一个由所有数据库共享的全局资源，用于存放其缓存数据页。</span><span class="sxs-lookup"><span data-stu-id="02870-140">The buffer pool is a global resource shared by all databases for their cached data pages.</span></span> <span data-ttu-id="02870-141">缓冲池缓存的最大和最小大小是在启动期间或使用 sp_configure 动态重新配置 SQL Server 实例时确定的。</span><span class="sxs-lookup"><span data-stu-id="02870-141">The maximum and minimum size of the buffer pool cache is determined during startup or when the instance of SQL server is dynamically reconfigured by using sp_configure.</span></span> <span data-ttu-id="02870-142">此大小确定了运行的实例中在任何时候都可以缓存在缓冲池中的最大页数。</span><span class="sxs-lookup"><span data-stu-id="02870-142">This size determines the maximum number of pages that can be cached in the buffer pool at any time in the running instance.</span></span>

 <span data-ttu-id="02870-143">检查点：检查点创建一个已知的正常点，在 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 意外关闭或崩溃后，可以在恢复期间开始应用事务日志中包含的更改。</span><span class="sxs-lookup"><span data-stu-id="02870-143">Checkpoint A checkpoint creates a known good point from which the [!INCLUDE[ssDE](../../includes/ssde-md.md)] can start applying changes contained in the transaction log during recovery after an unexpected shutdown or crash.</span></span> <span data-ttu-id="02870-144">检查点将脏页和事务日志信息从内存写入磁盘，并记录有关事务日志的信息。</span><span class="sxs-lookup"><span data-stu-id="02870-144">A checkpoint writes the dirty pages and transaction log information from memory to disk and, also, records information about the transaction log.</span></span> <span data-ttu-id="02870-145">有关详细信息，请参阅[数据库检查点 (SQL Server)](../../relational-databases/logs/database-checkpoints-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="02870-145">For more information, see [Database Checkpoints &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>

## <a name="buffer-pool-extension-details"></a><span data-ttu-id="02870-146">缓冲池扩展详细信息</span><span class="sxs-lookup"><span data-stu-id="02870-146">Buffer Pool Extension Details</span></span>
 <span data-ttu-id="02870-147">SSD 存储用作内存子系统的扩展而不是磁盘存储子系统的扩展。</span><span class="sxs-lookup"><span data-stu-id="02870-147">SSD storage is used as an extension to the memory subsystem rather than the disk storage subsystem.</span></span> <span data-ttu-id="02870-148">也就是说，通过缓冲池扩展文件，缓冲池管理器可以使用 DRAM 和 NAND 闪存，在由固态硬盘支持的非易失性随机存取内存中保持一个大得多的温热页缓冲池。</span><span class="sxs-lookup"><span data-stu-id="02870-148">That is, the buffer pool extension file allows the buffer pool manager to use both DRAM and NAND-Flash memory to maintain a much larger buffer pool of lukewarm pages in nonvolatile random access memory backed by SSDs.</span></span> <span data-ttu-id="02870-149">这会在固态硬盘上创建一个多级缓存层次结构，级别 1 (L1) 作为 DRAM，级别 2 (L2) 作为缓冲池扩展文件。</span><span class="sxs-lookup"><span data-stu-id="02870-149">This creates a multilevel caching hierarchy with level 1 (L1) as the DRAM and level 2 (L2) as the buffer pool extension file on the SSD.</span></span> <span data-ttu-id="02870-150">仅将干净页写入 L2 缓存，以帮助确保数据安全。</span><span class="sxs-lookup"><span data-stu-id="02870-150">Only clean pages are written to the L2 cache, which helps maintain data safety.</span></span> <span data-ttu-id="02870-151">缓冲区管理器会处理 L1 和 L2 缓存之间的干净页移动。</span><span class="sxs-lookup"><span data-stu-id="02870-151">The buffer manager handles the movement of clean pages between the L1 and L2 caches.</span></span>

 <span data-ttu-id="02870-152">下图所示为缓冲池相对于其他 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 组件的高级体系结构概览。</span><span class="sxs-lookup"><span data-stu-id="02870-152">The following illustration provides a high-level architectural overview of the buffer pool relative to other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components.</span></span>

 <span data-ttu-id="02870-153">![SSD 缓冲池扩展体系结构](../media/ssdbufferpoolextensionarchitecture.gif "SSD 缓冲池扩展体系结构")</span><span class="sxs-lookup"><span data-stu-id="02870-153">![SSD Buffer Pool Extension Architecture](../media/ssdbufferpoolextensionarchitecture.gif "SSD Buffer Pool Extension Architecture")</span></span>

 <span data-ttu-id="02870-154">启用缓冲池扩展后，该功能会指定固态硬盘上缓冲池缓存文件的大小和文件路径。</span><span class="sxs-lookup"><span data-stu-id="02870-154">When enabled, the buffer pool extension specifies the size and file path of the buffer pool caching file on the SSD.</span></span> <span data-ttu-id="02870-155">此文件是固态硬盘上的一个连续存储范围，是在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例启动期间静态配置的。</span><span class="sxs-lookup"><span data-stu-id="02870-155">This file is a contiguous extent of storage on the SSD and is statically configured during startup of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="02870-156">只有在禁用了缓冲池扩展功能的情况下，才能修改此文件的配置参数。</span><span class="sxs-lookup"><span data-stu-id="02870-156">Alterations to the file configuration parameters can only be done when the buffer pool extension feature is disabled.</span></span> <span data-ttu-id="02870-157">禁用缓冲池扩展后，将从注册表中删除所有相关的配置设置。</span><span class="sxs-lookup"><span data-stu-id="02870-157">When the buffer pool extension is disabled, all related configuration settings are removed from the registry.</span></span> <span data-ttu-id="02870-158">SQL Server 实例关闭时，将会删除缓冲池扩展文件。</span><span class="sxs-lookup"><span data-stu-id="02870-158">The buffer pool extension file is deleted upon shutdown of the instance of SQL Server.</span></span>

## <a name="best-practices"></a><span data-ttu-id="02870-159">最佳实践</span><span class="sxs-lookup"><span data-stu-id="02870-159">Best Practices</span></span>
 <span data-ttu-id="02870-160">我们建议您遵循以下最佳做法。</span><span class="sxs-lookup"><span data-stu-id="02870-160">We recommend that you follow these best practices.</span></span>

-   <span data-ttu-id="02870-161">首次启用缓冲池扩展后，建议重新启动 SQL Server 实例，以获得最大的性能优势。</span><span class="sxs-lookup"><span data-stu-id="02870-161">After enabling Buffer Pool Extension for the first time it is recommended to restart the SQL Server instance to get the maximum performance benefits.</span></span>

-   <span data-ttu-id="02870-162">对于企业版，缓冲池扩展大小最大可为 max_server_memory 值的 32 倍，而对于标准版，最大可为其 4 倍。</span><span class="sxs-lookup"><span data-stu-id="02870-162">The buffer pool extension size can be up to 32 times the value of max_server_memory for Enterprise editions, and up to 4 times for Standard edition.</span></span>  <span data-ttu-id="02870-163">我们建议物理内存 (max_server_memory) 的大小与缓冲池扩展的大小之比不应超过 1:16。</span><span class="sxs-lookup"><span data-stu-id="02870-163">We recommend a ratio between the size of the physical memory (max_server_memory) and the size of the buffer pool extension of 1:16 or less.</span></span> <span data-ttu-id="02870-164">介于 1:4 至 1:8 之间的比率是最佳的。</span><span class="sxs-lookup"><span data-stu-id="02870-164">A lower ratio in the range of 1:4 to 1:8 may be optimal.</span></span> <span data-ttu-id="02870-165">有关设置 max_server_memory 选项的信息，请参阅 [服务器内存服务器配置选项](server-memory-server-configuration-options.md)。</span><span class="sxs-lookup"><span data-stu-id="02870-165">For information about setting the max_server_memory option, see [Server Memory Server Configuration Options](server-memory-server-configuration-options.md).</span></span>

-   <span data-ttu-id="02870-166">在生产环境中实现之前，应彻底测试缓冲池扩展。</span><span class="sxs-lookup"><span data-stu-id="02870-166">Test the buffer pool extension thoroughly before implementing in a production environment.</span></span> <span data-ttu-id="02870-167">处于生产过程中时，请避免对该文件进行配置更改或关闭该功能。</span><span class="sxs-lookup"><span data-stu-id="02870-167">Once in production, avoid making configuration changes to the file or turning the feature off.</span></span> <span data-ttu-id="02870-168">因为禁用该功能时会大大减小缓冲池大小，所以这些活动可能会对服务器性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="02870-168">These activities may have a negative impact on server performance because the buffer pool is significantly reduced in size when the feature is disabled.</span></span> <span data-ttu-id="02870-169">禁用时，不回收用于支持该功能的内存，直到重新启动 SQL Server 的实例。</span><span class="sxs-lookup"><span data-stu-id="02870-169">When disabled, the memory used to support the feature is not reclaimed until the instance of SQL Server is restarted.</span></span> <span data-ttu-id="02870-170">但是，如果重新启用该功能，将重用内存而不必重新启动实例。</span><span class="sxs-lookup"><span data-stu-id="02870-170">However, if the feature is re-enabled, the memory will be reused without restarting the instance.</span></span>

## <a name="return-information-about-the-buffer-pool-extension"></a><span data-ttu-id="02870-171">返回有关缓冲池扩展的信息</span><span class="sxs-lookup"><span data-stu-id="02870-171">Return Information about the Buffer Pool Extension</span></span>
 <span data-ttu-id="02870-172">您可以使用以下动态管理视图来显示缓冲池扩展的配置并返回有关扩展中的数据页的信息。</span><span class="sxs-lookup"><span data-stu-id="02870-172">You can use the following dynamic management views to display the configuration of the buffer pool extension and return information about the data pages in the extension.</span></span>

-   [<span data-ttu-id="02870-173">sys.dm_os_buffer_pool_extension_configuration (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="02870-173">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-pool-extension-configuration-transact-sql)

-   [<span data-ttu-id="02870-174">sys.dm_os_buffer_descriptors (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="02870-174">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-descriptors-transact-sql)

 <span data-ttu-id="02870-175">SQL Server 缓冲区管理器对象中提供了用于跟踪缓冲池扩展文件中的数据页的性能计数器。</span><span class="sxs-lookup"><span data-stu-id="02870-175">Performance counters are available in the SQL Server, Buffer Manager Object to track the data pages in the buffer pool extension file.</span></span> <span data-ttu-id="02870-176">有关详细信息，请参阅 [缓冲池扩展性能计数器](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md)。</span><span class="sxs-lookup"><span data-stu-id="02870-176">For more information, see [buffer pool extension performance counters](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md).</span></span>

 <span data-ttu-id="02870-177">提供了以下 Xevent：</span><span class="sxs-lookup"><span data-stu-id="02870-177">The following Xevents are available.</span></span>

|<span data-ttu-id="02870-178">XEvent</span><span class="sxs-lookup"><span data-stu-id="02870-178">XEvent</span></span>|<span data-ttu-id="02870-179">说明</span><span class="sxs-lookup"><span data-stu-id="02870-179">Description</span></span>|<span data-ttu-id="02870-180">参数</span><span class="sxs-lookup"><span data-stu-id="02870-180">Parameters</span></span>|
|------------|-----------------|----------------|
|<span data-ttu-id="02870-181">sqlserver.buffer_pool_extension_pages_written</span><span class="sxs-lookup"><span data-stu-id="02870-181">sqlserver.buffer_pool_extension_pages_written</span></span>|<span data-ttu-id="02870-182">在将页或页组从缓冲池逐出并写入缓冲池扩展文件时激发。</span><span class="sxs-lookup"><span data-stu-id="02870-182">Fires when a page or group of pages are evicted from the buffer pool and written to the buffer pool extension file.</span></span>|<span data-ttu-id="02870-183">number_page</span><span class="sxs-lookup"><span data-stu-id="02870-183">number_page</span></span><br /><br /> <span data-ttu-id="02870-184">first_page_id</span><span class="sxs-lookup"><span data-stu-id="02870-184">first_page_id</span></span><br /><br /> <span data-ttu-id="02870-185">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="02870-185">first_page_offset</span></span><br /><br /> <span data-ttu-id="02870-186">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="02870-186">initiator_numa_node_id</span></span>|
|<span data-ttu-id="02870-187">sqlserver.buffer_pool_extension_pages_read</span><span class="sxs-lookup"><span data-stu-id="02870-187">sqlserver.buffer_pool_extension_pages_read</span></span>|<span data-ttu-id="02870-188">在将页从缓冲池扩展文件读取到缓冲池时激发。</span><span class="sxs-lookup"><span data-stu-id="02870-188">Fires when a page is read from the buffer pool extension file to the buffer pool.</span></span>|<span data-ttu-id="02870-189">number_page</span><span class="sxs-lookup"><span data-stu-id="02870-189">number_page</span></span><br /><br /> <span data-ttu-id="02870-190">first_page_id</span><span class="sxs-lookup"><span data-stu-id="02870-190">first_page_id</span></span><br /><br /> <span data-ttu-id="02870-191">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="02870-191">first_page_offset</span></span><br /><br /> <span data-ttu-id="02870-192">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="02870-192">initiator_numa_node_id</span></span>|
|<span data-ttu-id="02870-193">sqlserver.buffer_pool_extension_pages_evicted</span><span class="sxs-lookup"><span data-stu-id="02870-193">sqlserver.buffer_pool_extension_pages_evicted</span></span>|<span data-ttu-id="02870-194">在将页从缓冲池扩展文件中逐出时激发。</span><span class="sxs-lookup"><span data-stu-id="02870-194">Fires when a page is evicted from the buffer pool extension file.</span></span>|<span data-ttu-id="02870-195">number_page</span><span class="sxs-lookup"><span data-stu-id="02870-195">number_page</span></span><br /><br /> <span data-ttu-id="02870-196">first_page_id</span><span class="sxs-lookup"><span data-stu-id="02870-196">first_page_id</span></span><br /><br /> <span data-ttu-id="02870-197">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="02870-197">first_page_offset</span></span><br /><br /> <span data-ttu-id="02870-198">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="02870-198">initiator_numa_node_id</span></span>|
|<span data-ttu-id="02870-199">sqlserver.buffer_pool_eviction_thresholds_recalculated</span><span class="sxs-lookup"><span data-stu-id="02870-199">sqlserver.buffer_pool_eviction_thresholds_recalculated</span></span>|<span data-ttu-id="02870-200">在计算逐出阈值时激发。</span><span class="sxs-lookup"><span data-stu-id="02870-200">Fires when the eviction threshold is calculated.</span></span>|<span data-ttu-id="02870-201">warm_threshold</span><span class="sxs-lookup"><span data-stu-id="02870-201">warm_threshold</span></span><br /><br /> <span data-ttu-id="02870-202">cold_threshold</span><span class="sxs-lookup"><span data-stu-id="02870-202">cold_threshold</span></span><br /><br /> <span data-ttu-id="02870-203">pages_bypassed_eviction</span><span class="sxs-lookup"><span data-stu-id="02870-203">pages_bypassed_eviction</span></span><br /><br /> <span data-ttu-id="02870-204">eviction_bypass_reason</span><span class="sxs-lookup"><span data-stu-id="02870-204">eviction_bypass_reason</span></span><br /><br /> <span data-ttu-id="02870-205">eviction_bypass_reason_description</span><span class="sxs-lookup"><span data-stu-id="02870-205">eviction_bypass_reason_description</span></span>|

## <a name="related-tasks"></a><span data-ttu-id="02870-206">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="02870-206">Related Tasks</span></span>

|||
|-|-|
|<span data-ttu-id="02870-207">**任务说明**</span><span class="sxs-lookup"><span data-stu-id="02870-207">**Task Description**</span></span>|<span data-ttu-id="02870-208">**主题**</span><span class="sxs-lookup"><span data-stu-id="02870-208">**Topic**</span></span>|
|<span data-ttu-id="02870-209">启用和配置缓冲池扩展。</span><span class="sxs-lookup"><span data-stu-id="02870-209">Enable and configure the buffer pool extension.</span></span>|[<span data-ttu-id="02870-210">ALTER SERVER CONFIGURATION (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="02870-210">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)|
|<span data-ttu-id="02870-211">修改缓冲池扩展配置</span><span class="sxs-lookup"><span data-stu-id="02870-211">Modify the buffer pool extension configuration</span></span>|[<span data-ttu-id="02870-212">ALTER SERVER CONFIGURATION (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="02870-212">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)|
|<span data-ttu-id="02870-213">查看缓冲池扩展配置</span><span class="sxs-lookup"><span data-stu-id="02870-213">View the buffer pool extension configuration</span></span>|[<span data-ttu-id="02870-214">sys.dm_os_buffer_pool_extension_configuration (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="02870-214">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-pool-extension-configuration-transact-sql)|
|<span data-ttu-id="02870-215">监视缓冲池扩展</span><span class="sxs-lookup"><span data-stu-id="02870-215">Monitor the buffer pool extension</span></span>|[<span data-ttu-id="02870-216">sys.dm_os_buffer_descriptors (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="02870-216">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-descriptors-transact-sql)<br /><br /> [<span data-ttu-id="02870-217">性能计数器</span><span class="sxs-lookup"><span data-stu-id="02870-217">Performance counters</span></span>](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md)|


