---
title: 服务器网络配置 | Microsoft Docs
ms.custom: ''
ms.date: 06/22/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- Named Pipes [SQL Server], configuring
- connections [SQL Server], server network configuration
- Database Engine [SQL Server], network configurations
- server network configuration [SQL Server]
- protocols [SQL Server], choosing
- ports [SQL Server], changing
- server configuration [SQL Server]
ms.assetid: 890c09a1-6dad-4931-aceb-901c02ae34c5
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 97acd6deaa251d4eea9ef1e00c0554c13011c469
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692523"
---
# <a name="server-network-configuration"></a><span data-ttu-id="f114d-102">服务器网络配置</span><span class="sxs-lookup"><span data-stu-id="f114d-102">Server Network Configuration</span></span>
  <span data-ttu-id="f114d-103">服务器网络配置任务包括启用协议、修改协议使用的端口或管道、配置加密、配置 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务、在网络上显示或隐藏 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 以及注册服务器主体名称。</span><span class="sxs-lookup"><span data-stu-id="f114d-103">Server network configuration tasks include enabling protocols, modifying the port or pipe used by a protocol, configuring encryption, configuring the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service, exposing or hiding the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] on the network, and registering the Server Principal Name.</span></span> <span data-ttu-id="f114d-104">大多数情况下，无须更改服务器网络配置。</span><span class="sxs-lookup"><span data-stu-id="f114d-104">Most of the time, you do not have to change the server network configuration.</span></span> <span data-ttu-id="f114d-105">只在有特殊的网络要求时才需要重新配置服务器网络协议。</span><span class="sxs-lookup"><span data-stu-id="f114d-105">Only reconfigure the server network protocols if special network requirements.</span></span>  
  
 <span data-ttu-id="f114d-106">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的网络配置是使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器完成的。</span><span class="sxs-lookup"><span data-stu-id="f114d-106">Network configuration for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is done using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span> <span data-ttu-id="f114d-107">对于早期版本的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]，请使用这些产品附带的服务器网络实用工具。</span><span class="sxs-lookup"><span data-stu-id="f114d-107">For earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], use the Server Network Utility that ships with those products.</span></span>  
  
## <a name="protocols"></a><span data-ttu-id="f114d-108">协议</span><span class="sxs-lookup"><span data-stu-id="f114d-108">Protocols</span></span>  
 <span data-ttu-id="f114d-109">使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器可以启用或禁用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]使用的协议，并为这些协议配置可用选项。</span><span class="sxs-lookup"><span data-stu-id="f114d-109">Use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager to enable or disable the protocols used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and to configure the options available for the protocols.</span></span> <span data-ttu-id="f114d-110">可以启用多个协议。</span><span class="sxs-lookup"><span data-stu-id="f114d-110">More than one protocol can be enabled.</span></span> <span data-ttu-id="f114d-111">必须启用客户端要使用的所有协议。</span><span class="sxs-lookup"><span data-stu-id="f114d-111">You must enable all protocols that you want clients to use.</span></span> <span data-ttu-id="f114d-112">所有协议都具有同等的服务器访问权限。</span><span class="sxs-lookup"><span data-stu-id="f114d-112">All protocols have equal access to the server.</span></span> <span data-ttu-id="f114d-113">有关应使用何种协议的信息，请参阅[启用或禁用服务器网络协议](enable-or-disable-a-server-network-protocol.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-113">For information about which protocols you should use, see [Enable or Disable a Server Network Protocol](enable-or-disable-a-server-network-protocol.md).</span></span>  
  
### <a name="changing-a-port"></a><span data-ttu-id="f114d-114">更改端口</span><span class="sxs-lookup"><span data-stu-id="f114d-114">Changing a Port</span></span>  
 <span data-ttu-id="f114d-115">可以配置 TCP/IP 协议以侦听指定的端口。</span><span class="sxs-lookup"><span data-stu-id="f114d-115">You can configure the TCP/IP protocol to listen on a designated port.</span></span> <span data-ttu-id="f114d-116">默认情况下， [!INCLUDE[ssDE](../../includes/ssde-md.md)] 的默认实例侦听 TCP 端口 1433。</span><span class="sxs-lookup"><span data-stu-id="f114d-116">By default, the default instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] listens on TCP port 1433.</span></span> <span data-ttu-id="f114d-117">[!INCLUDE[ssDE](../../includes/ssde-md.md)] 和 [!INCLUDE[ssEW](../../includes/ssew-md.md)] 的命名实例配置为使用动态端口。</span><span class="sxs-lookup"><span data-stu-id="f114d-117">Named instances of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssEW](../../includes/ssew-md.md)] are configured for dynamic ports.</span></span> <span data-ttu-id="f114d-118">这意味着启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 服务时，它们将选择可用的端口。</span><span class="sxs-lookup"><span data-stu-id="f114d-118">This means they select an available port when the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service is started.</span></span> <span data-ttu-id="f114d-119">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务可帮助客户端在连接时识别端口。</span><span class="sxs-lookup"><span data-stu-id="f114d-119">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service helps clients identify the port when they connect.</span></span>  
  
 <span data-ttu-id="f114d-120">配置为使用动态端口后，在每次启动时 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 使用的端口可能都会发生变化。</span><span class="sxs-lookup"><span data-stu-id="f114d-120">When configured for dynamic ports, the port used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] may change each time it is started.</span></span> <span data-ttu-id="f114d-121">如果通过防火墙连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，则必须打开 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]使用的端口。</span><span class="sxs-lookup"><span data-stu-id="f114d-121">When connecting to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] through a firewall, you must open the port used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f114d-122">将 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置为使用特定端口，这样就可以将防火墙配置为允许与服务器通信。</span><span class="sxs-lookup"><span data-stu-id="f114d-122">Configure [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use a specific port, so you can configure the firewall to allow communication to the server.</span></span> <span data-ttu-id="f114d-123">有关详细信息，请参阅[将服务器配置为侦听特定 TCP 端口（SQL Sever 配置管理器）](configure-a-server-to-listen-on-a-specific-tcp-port.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-123">For more information, see [Configure a Server to Listen on a Specific TCP Port &#40;SQL Server Configuration Manager&#41;](configure-a-server-to-listen-on-a-specific-tcp-port.md).</span></span>  
  
### <a name="changing-a-named-pipe"></a><span data-ttu-id="f114d-124">更改命名管道</span><span class="sxs-lookup"><span data-stu-id="f114d-124">Changing a Named Pipe</span></span>  
 <span data-ttu-id="f114d-125">您可以配置命名管道协议以侦听指定的命名管道。</span><span class="sxs-lookup"><span data-stu-id="f114d-125">You can configure the named pipe protocol to listen on a designated named pipe.</span></span> <span data-ttu-id="f114d-126">默认情况下，[!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 的默认实例将侦听该默认实例的管道 \\\\.\pipe\sql\query，以及命名实例的管道 \\\\.\pipe\MSSQL$\<instancename>\sql\query。</span><span class="sxs-lookup"><span data-stu-id="f114d-126">By default, the default instance of [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] listens on pipe \\\\.\pipe\sql\query for the default instance and \\\\.\pipe\MSSQL$*\<instancename>* \sql\query for a named instance.</span></span> <span data-ttu-id="f114d-127">[!INCLUDE[ssDE](../../includes/ssde-md.md)] 只能侦听一个命名管道，但您可以根据需要将该管道更改为其他名称。</span><span class="sxs-lookup"><span data-stu-id="f114d-127">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] can only listen on one named pipe, but you can change the pipe to another name if you wish.</span></span> <span data-ttu-id="f114d-128">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务可帮助客户端在连接时识别管道。</span><span class="sxs-lookup"><span data-stu-id="f114d-128">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service helps clients identify the pipe when they connect.</span></span> <span data-ttu-id="f114d-129">有关详细信息，请参阅[将服务器配置为侦听更改管道（SQL Sever 配置管理器）](configure-a-server-to-listen-on-an-alternate-pipe.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-129">For more information, see [Configure a Server to Listen on an Alternate Pipe &#40;SQL Server Configuration Manager&#41;](configure-a-server-to-listen-on-an-alternate-pipe.md).</span></span>  
  
## <a name="force-encryption"></a><span data-ttu-id="f114d-130">强行加密</span><span class="sxs-lookup"><span data-stu-id="f114d-130">Force Encryption</span></span>  
 <span data-ttu-id="f114d-131">可以将[!INCLUDE[ssDE](../../includes/ssde-md.md)]配置为在与客户端应用程序通信时要求加密。</span><span class="sxs-lookup"><span data-stu-id="f114d-131">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] can be configured to require encryption when communicating with client applications.</span></span> <span data-ttu-id="f114d-132">有关详细信息，请参阅[启用数据库引擎的加密连接（SQL Server 配置管理器）](enable-encrypted-connections-to-the-database-engine.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-132">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
## <a name="extended-protection-for-authentication"></a><span data-ttu-id="f114d-133">身份验证的扩展保护</span><span class="sxs-lookup"><span data-stu-id="f114d-133">Extended Protection for Authentication</span></span>  
 <span data-ttu-id="f114d-134">对于支持扩展保护的操作系统，提供通过使用渠道绑定和服务绑定对针对验证的扩展保护的支持。</span><span class="sxs-lookup"><span data-stu-id="f114d-134">Support for Extended Protection for Authentication by using channel binding and service binding is available for operating systems that support Extended Protection.</span></span> <span data-ttu-id="f114d-135">有关详细信息，请参阅 [使用扩展保护连接到数据库引擎](connect-to-the-database-engine-using-extended-protection.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-135">For more information, see [Connect to the Database Engine Using Extended Protection](connect-to-the-database-engine-using-extended-protection.md).</span></span>  
  
## <a name="authenticating-by-using-kerberos"></a><span data-ttu-id="f114d-136">使用 Kerberos 进行身份验证</span><span class="sxs-lookup"><span data-stu-id="f114d-136">Authenticating by Using Kerberos</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f114d-137">支持 Kerberos 身份验证。</span><span class="sxs-lookup"><span data-stu-id="f114d-137">supports Kerberos authentication.</span></span> <span data-ttu-id="f114d-138">有关详细信息，请参阅 [为 Kerberos 连接注册服务主体名称](register-a-service-principal-name-for-kerberos-connections.md) 和 [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046)</span><span class="sxs-lookup"><span data-stu-id="f114d-138">For more information, see [Register a Service Principal Name for Kerberos Connections](register-a-service-principal-name-for-kerberos-connections.md) and [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
### <a name="registering-a-server-principal-name-spn"></a><span data-ttu-id="f114d-139">注册服务器主体名称 (SPN)</span><span class="sxs-lookup"><span data-stu-id="f114d-139">Registering a Server Principal Name (SPN)</span></span>  
 <span data-ttu-id="f114d-140">Kerberos 身份验证服务使用 SPN 对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="f114d-140">The Kerberos authentication service uses an SPN to authenticate a service.</span></span> <span data-ttu-id="f114d-141">有关详细信息，请参阅 [为 Kerberos 连接注册服务主体名称](register-a-service-principal-name-for-kerberos-connections.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-141">For more information, see [Register a Service Principal Name for Kerberos Connections](register-a-service-principal-name-for-kerberos-connections.md).</span></span>  
  
 <span data-ttu-id="f114d-142">在通过 NTLM 进行连接时，还可以使用 SPN 来使客户端身份验证更安全。</span><span class="sxs-lookup"><span data-stu-id="f114d-142">SPNs may also be used to make client authentication more secure when connecting with NTLM.</span></span> <span data-ttu-id="f114d-143">有关详细信息，请参阅 [使用扩展保护连接到数据库引擎](connect-to-the-database-engine-using-extended-protection.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-143">For more information, see [Connect to the Database Engine Using Extended Protection](connect-to-the-database-engine-using-extended-protection.md).</span></span>  
  
## <a name="sql-server-browser-service"></a><span data-ttu-id="f114d-144">SQL Server Browser 服务</span><span class="sxs-lookup"><span data-stu-id="f114d-144">SQL Server Browser Service</span></span>  
 <span data-ttu-id="f114d-145">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务在服务器上运行，可帮助客户端计算机查找 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的实例。</span><span class="sxs-lookup"><span data-stu-id="f114d-145">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service runs on the server, and helps client computers to find instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f114d-146">无需对 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务进行配置，但是必须采用某些连接方案运行此服务。</span><span class="sxs-lookup"><span data-stu-id="f114d-146">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service does not need to be configured, but must be running under some connection scenarios.</span></span> <span data-ttu-id="f114d-147">有关 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 的详细信息，请参阅 [SQL Server Browser 服务（数据库引擎和 SSAS）](sql-server-browser-service-database-engine-and-ssas.md)</span><span class="sxs-lookup"><span data-stu-id="f114d-147">For more information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser, see [SQL Server Browser Service &#40;Database Engine and SSAS&#41;](sql-server-browser-service-database-engine-and-ssas.md)</span></span>  
  
## <a name="hiding-sql-server"></a><span data-ttu-id="f114d-148">隐藏 SQL Server</span><span class="sxs-lookup"><span data-stu-id="f114d-148">Hiding SQL Server</span></span>  
 <span data-ttu-id="f114d-149">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 在运行时会用每个已安装实例的名称、版本和连接信息来响应查询。</span><span class="sxs-lookup"><span data-stu-id="f114d-149">When running, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser responds to queries, with the name, version, and connection information for each installed instance.</span></span> <span data-ttu-id="f114d-150">对于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]， **HideInstance** 标志指示 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 不应对此服务器实例的相关信息做出响应。</span><span class="sxs-lookup"><span data-stu-id="f114d-150">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the **HideInstance** flag, indicates that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser should not respond with information about this server instance.</span></span> <span data-ttu-id="f114d-151">客户端应用程序仍然可以连接，但是必须提供所需的连接信息。</span><span class="sxs-lookup"><span data-stu-id="f114d-151">Client applications can still connect, but they must know the required connection information.</span></span> <span data-ttu-id="f114d-152">有关详细信息，请参阅 [隐藏 SQL Server 数据引擎实例](../sql-server-database-engine-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="f114d-152">For more information, see [Hide an Instance of SQL Server Database Engine](../sql-server-database-engine-overview.md).</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="f114d-153">相关内容</span><span class="sxs-lookup"><span data-stu-id="f114d-153">Related Content</span></span>  
 [<span data-ttu-id="f114d-154">客户端网络配置</span><span class="sxs-lookup"><span data-stu-id="f114d-154">Client Network Configuration</span></span>](client-network-configuration.md)  
  
 [<span data-ttu-id="f114d-155">管理数据库引擎服务</span><span class="sxs-lookup"><span data-stu-id="f114d-155">Manage the Database Engine Services</span></span>](manage-the-database-engine-services.md)  
  
  
