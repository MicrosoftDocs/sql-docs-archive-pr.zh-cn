---
title: SQL Server 2014 Express LocalDB |Microsoft Docs
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- user instances
- LocalDB, described
- local database runtime
- file database
- LocalDB
ms.assetid: 5a641a46-7cfb-4d7b-a90d-6e4625719d74
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: af60935af0d183ab7ed6d1c10f84229b7ead3730
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87591577"
---
# <a name="sql-server-2014-express-localdb"></a><span data-ttu-id="ab52d-102">SQL Server 2014 Express LocalDB</span><span class="sxs-lookup"><span data-stu-id="ab52d-102">SQL Server 2014 Express LocalDB</span></span>
  [!INCLUDE[msCoName](../../includes/msconame-md.md)]<span data-ttu-id="ab52d-103">[!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` 是 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 面向程序开发人员的执行模式。</span><span class="sxs-lookup"><span data-stu-id="ab52d-103">[!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` is an execution mode of [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] targeted to program developers.</span></span> <span data-ttu-id="ab52d-104">`LocalDB`安装将复制启动所需的最小文件集 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-104">`LocalDB` installation copies a minimal set of files necessary to start the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span></span> <span data-ttu-id="ab52d-105">`LocalDB`安装后，开发人员通过使用特殊的连接字符串来启动连接。</span><span class="sxs-lookup"><span data-stu-id="ab52d-105">Once `LocalDB` is installed, developers initiate a connection by using a special connection string.</span></span> <span data-ttu-id="ab52d-106">连接时，将自动创建并启动所需的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 基础结构，从而使应用程序无需执行复杂或耗时的配置任务即可使用数据库。</span><span class="sxs-lookup"><span data-stu-id="ab52d-106">When connecting, the necessary [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] infrastructure is automatically created and started, enabling the application to use the database without complex or time consuming configuration tasks.</span></span> <span data-ttu-id="ab52d-107">开发人员工具可以向开发人员提供 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] ，使其不必管理 [!INCLUDE[tsql](../../includes/tsql-md.md)] 的完整服务器实例即可撰写和测试 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]代码。</span><span class="sxs-lookup"><span data-stu-id="ab52d-107">Developer Tools can provide developers with a [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] that lets them write and test [!INCLUDE[tsql](../../includes/tsql-md.md)] code without having to manage a full server instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ab52d-108">[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] `LocalDB` 使用实用工具管理的实例 `SqlLocalDB.exe` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-108">An instance of [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]`LocalDB` is managed by using the `SqlLocalDB.exe` utility.</span></span> [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]<span data-ttu-id="ab52d-109">`LocalDB`应该用于代替 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 已弃用的用户实例功能。</span><span class="sxs-lookup"><span data-stu-id="ab52d-109">`LocalDB` should be used in place of the [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] user instance feature which is deprecated.</span></span>  
  
## <a name="installing-localdb"></a><span data-ttu-id="ab52d-110">安装 LocalDB</span><span class="sxs-lookup"><span data-stu-id="ab52d-110">Installing LocalDB</span></span>  
 <span data-ttu-id="ab52d-111">安装的主要方法 `LocalDB` 是使用 SqlLocalDB.msi 程序。</span><span class="sxs-lookup"><span data-stu-id="ab52d-111">The primary method of installing `LocalDB` is by using the SqlLocalDB.msi program.</span></span> <span data-ttu-id="ab52d-112">`LocalDB`是安装的任何 SKU 时的一个选项 [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-112">`LocalDB` is an option when installing any SKU of [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)].</span></span> <span data-ttu-id="ab52d-113">在 `LocalDB` 的安装过程中，在 "**功能选择**" 页上选择 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-113">Select `LocalDB` on the **Feature Selection** page during installation of [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)].</span></span> <span data-ttu-id="ab52d-114">`LocalDB`对于每个主版本，只能有一个二进制文件安装 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-114">There can be only one installation of the `LocalDB` binary files for each major [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] version.</span></span> <span data-ttu-id="ab52d-115">可以启动多个 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 进程，并且这些进程都将使用相同的二进制文件。</span><span class="sxs-lookup"><span data-stu-id="ab52d-115">Multiple [!INCLUDE[ssDE](../../includes/ssde-md.md)] processes can be started and will all use the same binaries.</span></span> <span data-ttu-id="ab52d-116">作为启动的实例与 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] `LocalDB` 具有相同的限制[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]</span><span class="sxs-lookup"><span data-stu-id="ab52d-116">An instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] started as the `LocalDB` has the same limitations as [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]</span></span>  
  
## <a name="description"></a><span data-ttu-id="ab52d-117">说明</span><span class="sxs-lookup"><span data-stu-id="ab52d-117">Description</span></span>  
 <span data-ttu-id="ab52d-118">`LocalDB`安装程序使用 SqlLocalDB.msi 程序在计算机上安装所需的文件。</span><span class="sxs-lookup"><span data-stu-id="ab52d-118">The `LocalDB` setup program uses the SqlLocalDB.msi program to install the necessary files on the computer.</span></span> <span data-ttu-id="ab52d-119">安装之后， `LocalDB` 是 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 可以创建和打开数据库的实例 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-119">Once installed, `LocalDB` is an instance of [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] that can create and open [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases.</span></span> <span data-ttu-id="ab52d-120">数据库的系统数据库文件存储于用户本地 AppData 路径中，这个路径通常是隐藏的。</span><span class="sxs-lookup"><span data-stu-id="ab52d-120">The system database files for the database are stored in the users' local AppData path which is normally hidden.</span></span> <span data-ttu-id="ab52d-121">例如 **C:\Users\\<user\>\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\LocalDBApp1\\**。</span><span class="sxs-lookup"><span data-stu-id="ab52d-121">For example **C:\Users\\<user\>\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\LocalDBApp1\\**.</span></span> <span data-ttu-id="ab52d-122">用户数据库文件存储在用户指定的位置，通常为 **C:\Users\\<user\>\Documents\\** 文件夹中的某个位置。</span><span class="sxs-lookup"><span data-stu-id="ab52d-122">User database files are stored where the user designates, typically somewhere in the **C:\Users\\<user\>\Documents\\** folder.</span></span>  
  
 <span data-ttu-id="ab52d-123">有关 `LocalDB` 在应用程序中包括的详细信息，请 [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] 参阅[文档本地数据概述](https://msdn.microsoft.com/library/ms233817\(VS.110\).aspx)、[演练：创建 SQL Server LocalDB 数据库](https://msdn.microsoft.com/library/ms233763\(VS.110\).aspx)和[演练：连接到 SQL Server LocalDB 数据库中的数据 (Windows 窗体) ](https://msdn.microsoft.com/library/ms171890\(VS.110\).aspx)。</span><span class="sxs-lookup"><span data-stu-id="ab52d-123">For more information about including `LocalDB` in an application, see the [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] documentation [Local Data Overview](https://msdn.microsoft.com/library/ms233817\(VS.110\).aspx), [Walkthrough: Creating a SQL Server LocalDB Database](https://msdn.microsoft.com/library/ms233763\(VS.110\).aspx), and [Walkthrough: Connecting to Data in a SQL Server LocalDB Database (Windows Forms)](https://msdn.microsoft.com/library/ms171890\(VS.110\).aspx).</span></span>  
  
 <span data-ttu-id="ab52d-124">有关 API 的详细信息 `LocalDB` ，请参阅[SQL Server Express LOCALDB 实例 API 参考](https://msdn.microsoft.com/library/hh234692\(SQL.110\).aspx)和[LocalDBStartInstance 函数](https://msdn.microsoft.com/library/hh217143\(SQL.110\).aspx)。</span><span class="sxs-lookup"><span data-stu-id="ab52d-124">For more information about the `LocalDB` API, see [SQL Server Express LocalDB Instance API Reference](https://msdn.microsoft.com/library/hh234692\(SQL.110\).aspx) and [LocalDBStartInstance Function](https://msdn.microsoft.com/library/hh217143\(SQL.110\).aspx).</span></span>  
  
 <span data-ttu-id="ab52d-125">SqlLocalDb 实用工具可以创建的新实例 `LocalDB` ，启动和停止实例 `LocalDB` ，并包含可帮助您管理的选项 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-125">The SqlLocalDb utility can create new instances of `LocalDB`, start and stop an instance of `LocalDB`, and includes options to help you manage `LocalDB`.</span></span>  <span data-ttu-id="ab52d-126">有关 SqlLocalDb 实用工具的详细信息，请参阅 [SqlLocalDB 实用工具](../../tools/sqllocaldb-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="ab52d-126">For more information about the SqlLocalDb utility, see [SqlLocalDB Utility](../../tools/sqllocaldb-utility.md).</span></span>  
  
 <span data-ttu-id="ab52d-127">的实例排序规则 `LocalDB` 设置为 SQL_Latin1_General_CP1_CI_AS 并且无法更改。</span><span class="sxs-lookup"><span data-stu-id="ab52d-127">The instance collation for `LocalDB` is set to SQL_Latin1_General_CP1_CI_AS and cannot be changed.</span></span> <span data-ttu-id="ab52d-128">一般支持数据库级、列级和表达式级排序规则。</span><span class="sxs-lookup"><span data-stu-id="ab52d-128">Database-level, column-level, and expression-level collations are supported normally.</span></span> <span data-ttu-id="ab52d-129">包含的数据库遵循 [Contained Database Collations](../../relational-databases/databases/contained-database-collations.md) 所定义的元数据和 tempdb 排序规则。</span><span class="sxs-lookup"><span data-stu-id="ab52d-129">Contained databases follow the metadata and tempdb collations rules defined by [Contained Database Collations](../../relational-databases/databases/contained-database-collations.md).</span></span>  
  
### <a name="restrictions"></a><span data-ttu-id="ab52d-130">限制</span><span class="sxs-lookup"><span data-stu-id="ab52d-130">Restrictions</span></span>  
 <span data-ttu-id="ab52d-131">`LocalDB`不能是合并复制订阅服务器。</span><span class="sxs-lookup"><span data-stu-id="ab52d-131">`LocalDB` cannot be a merge replication subscriber.</span></span>  
  
 <span data-ttu-id="ab52d-132">`LocalDB`不支持 FILESTREAM。</span><span class="sxs-lookup"><span data-stu-id="ab52d-132">`LocalDB` does not support FILESTREAM.</span></span>  
  
 <span data-ttu-id="ab52d-133">`LocalDB`仅允许 Service Broker 的本地队列。</span><span class="sxs-lookup"><span data-stu-id="ab52d-133">`LocalDB` only allows local queues for Service Broker.</span></span>  
  
 <span data-ttu-id="ab52d-134">`LocalDB`由于 windows 文件系统重定向，NT AUTHORITY\SYSTEM 等内置帐户拥有的一个实例可能具有管理性问题;改为使用普通的 windows 帐户作为所有者。</span><span class="sxs-lookup"><span data-stu-id="ab52d-134">An instance of `LocalDB` owned by the built-in accounts such as NT AUTHORITY\SYSTEM can have manageability issues due to windows file system redirection; Instead use a normal windows account as the owner.</span></span>  
  
### <a name="automatic-and-named-instances"></a><span data-ttu-id="ab52d-135">自动实例和命名实例</span><span class="sxs-lookup"><span data-stu-id="ab52d-135">Automatic and Named Instances</span></span>  
 <span data-ttu-id="ab52d-136">`LocalDB`支持两种类型的实例：自动实例和命名实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-136">`LocalDB` supports two kinds of instances: Automatic instances and named instances.</span></span>  
  
-   <span data-ttu-id="ab52d-137">的自动实例 `LocalDB` 是公共的。</span><span class="sxs-lookup"><span data-stu-id="ab52d-137">Automatic instances of `LocalDB` are public.</span></span> <span data-ttu-id="ab52d-138">系统自动为用户创建和管理此类实例，并可由任何应用程序使用。</span><span class="sxs-lookup"><span data-stu-id="ab52d-138">They are created and managed automatically for the user and can be used by any application.</span></span> <span data-ttu-id="ab52d-139">`LocalDB`对于 `LocalDB` 安装在用户计算机上的每个版本，都存在一个自动实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-139">One automatic instance of `LocalDB` exists for every version of `LocalDB` installed on the user's computer.</span></span> <span data-ttu-id="ab52d-140">自动实例 `LocalDB` 提供无缝的实例管理。</span><span class="sxs-lookup"><span data-stu-id="ab52d-140">Automatic instances of `LocalDB` provide seamless instance management.</span></span> <span data-ttu-id="ab52d-141">无需创建实例；它可以自动执行工作。</span><span class="sxs-lookup"><span data-stu-id="ab52d-141">There is no need to create the instance; it just works.</span></span> <span data-ttu-id="ab52d-142">这使得应用程序可以轻松地安装和迁移到另一台计算机。</span><span class="sxs-lookup"><span data-stu-id="ab52d-142">This allows for easy application installation and migration to a different computer.</span></span> <span data-ttu-id="ab52d-143">如果目标计算机已安装指定版本的 `LocalDB`，则目标计算机也提供此版本的自动 `LocalDB` 实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-143">If the target machine has the specified version of `LocalDB` installed, the automatic instance of `LocalDB` for that version is available on the target machine as well.</span></span> <span data-ttu-id="ab52d-144">的自动实例 `LocalDB` 对于属于保留命名空间的实例名称有特殊的模式。</span><span class="sxs-lookup"><span data-stu-id="ab52d-144">Automatic instances of `LocalDB` have a special pattern for the instance name that belongs to a reserved namespace.</span></span> <span data-ttu-id="ab52d-145">这可以防止名称与的命名实例发生冲突 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-145">This prevents name conflicts with named instances of `LocalDB`.</span></span> <span data-ttu-id="ab52d-146">自动实例的名称为 **MSSQLLocalDB**。</span><span class="sxs-lookup"><span data-stu-id="ab52d-146">The name for the automatic instance is **MSSQLLocalDB**.</span></span>  
  
-   <span data-ttu-id="ab52d-147">的命名实例 `LocalDB` 是专用的。</span><span class="sxs-lookup"><span data-stu-id="ab52d-147">Named instances of `LocalDB` are private.</span></span> <span data-ttu-id="ab52d-148">这些命名实例由负责创建和管理该实例的单个应用程序所拥有。</span><span class="sxs-lookup"><span data-stu-id="ab52d-148">They are owned by a single application that is responsible for creating and managing the instance.</span></span> <span data-ttu-id="ab52d-149">命名实例提供与其他实例的隔离，并可以通过减少与其他数据库用户的资源争用来提高性能。</span><span class="sxs-lookup"><span data-stu-id="ab52d-149">Named instances provide isolation from other instances and can improve performance by reducing resource contention with other database users.</span></span> <span data-ttu-id="ab52d-150">命名实例必须由用户通过管理 API 显式创建， `LocalDB` 或者通过托管应用程序的 app.config 文件隐式创建 (尽管托管应用程序也可以使用 API （如果) 需要）。</span><span class="sxs-lookup"><span data-stu-id="ab52d-150">Named instances must be created explicitly by the user through the `LocalDB` management API or implicitly via the app.config file for a managed application (although managed application may also use the API, if desired).</span></span> <span data-ttu-id="ab52d-151">的每个命名实例 `LocalDB` 都具有 `LocalDB` 指向各自的二进制文件集的关联版本 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-151">Each named instance of `LocalDB` has an associated `LocalDB` version that points to the respective set of `LocalDB` binaries.</span></span> <span data-ttu-id="ab52d-152">的实例名称的 `LocalDB` `sysname` 数据类型为，最多可包含128个字符。</span><span class="sxs-lookup"><span data-stu-id="ab52d-152">The instance name of a `LocalDB` is `sysname` data type and can have up to 128 characters.</span></span> <span data-ttu-id="ab52d-153"> (这不同于常规的命名实例，这种实例 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 将名称限制为16个 ASCII 字符的常规 NetBIOS 名称。 ) 实例的名称 `LocalDB` 可包含在文件名内合法的任何 Unicode 字符。</span><span class="sxs-lookup"><span data-stu-id="ab52d-153">(This differs from regular named instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], which limits names to regular NetBIOS names of 16 ASCII chars.) The name of an instance of `LocalDB` can contain any Unicode characters that are legal within a filename.</span></span>  <span data-ttu-id="ab52d-154">使用自动实例名称的命名实例将成为自动实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-154">A named instance that uses an automatic instance name becomes an automatic instance.</span></span>  
  
 <span data-ttu-id="ab52d-155">不同的计算机用户可具有同名的实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-155">Different users of a computer can have instances with the same name.</span></span> <span data-ttu-id="ab52d-156">每个实例都是以不同的用户身份运行的不同的进程。</span><span class="sxs-lookup"><span data-stu-id="ab52d-156">Each instance is a different processes running as a different user.</span></span>  
  
## <a name="shared-instances-of-localdb"></a><span data-ttu-id="ab52d-157">LocalDB 的共享实例</span><span class="sxs-lookup"><span data-stu-id="ab52d-157">Shared Instances of LocalDB</span></span>  
 <span data-ttu-id="ab52d-158">为了支持多个计算机用户需要连接到单个实例的方案 `LocalDB` ， `LocalDB` 支持实例共享。</span><span class="sxs-lookup"><span data-stu-id="ab52d-158">To support scenarios where multiple users of the computer need to connect to a single instance of `LocalDB`, `LocalDB` supports instance sharing.</span></span> <span data-ttu-id="ab52d-159">实例所有者可以选择允许计算机上的其他用户连接到其实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-159">An instance owner can choose to allow the other users on the computer to connect to his instance.</span></span> <span data-ttu-id="ab52d-160">的自动实例和命名实例都 `LocalDB` 可以共享。</span><span class="sxs-lookup"><span data-stu-id="ab52d-160">Both automatic and named instances of `LocalDB` can be shared.</span></span> <span data-ttu-id="ab52d-161">若要共享 `LocalDB` 的某个实例，用户需要为其选择一个共享名称（别名）。</span><span class="sxs-lookup"><span data-stu-id="ab52d-161">To share an instance of `LocalDB` a user selects a shared name (alias) for it.</span></span> <span data-ttu-id="ab52d-162">因为该共享名称对于该计算机的所有用户都是可见的，则此共享名称在计算机上必须唯一。</span><span class="sxs-lookup"><span data-stu-id="ab52d-162">Because the shared name is visible to all users of the computer, this shared name must be unique on the computer.</span></span> <span data-ttu-id="ab52d-163">实例的共享名称具有与的 `LocalDB` 命名实例相同的格式 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-163">The shared name for an instance of `LocalDB` has the same format as the named instance of `LocalDB`.</span></span>  
  
 <span data-ttu-id="ab52d-164">只有计算机上的管理员才能创建的共享实例 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-164">Only an administrator on the computer can create a shared instance of `LocalDB`.</span></span> <span data-ttu-id="ab52d-165">的共享实例 `LocalDB` 可由管理员或共享实例的所有者取消共享 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-165">A shared instance of `LocalDB` can be unshared by an administrator or by the owner of the shared instance of `LocalDB`.</span></span> <span data-ttu-id="ab52d-166">若要共享和取消共享实例 `LocalDB` ，请使用 `LocalDBShareInstance` API 的和 `LocalDBUnShareInstance` 方法 `LocalDB` ，或者使用 SqlLocalDb 实用工具的共享和非共享选项。</span><span class="sxs-lookup"><span data-stu-id="ab52d-166">To share and unshared an instance of `LocalDB`, use the `LocalDBShareInstance` and `LocalDBUnShareInstance` methods of the `LocalDB` API, or the share and unshared options of the SqlLocalDb utility.</span></span>  
  
## <a name="starting-localdb-and-connecting-to-localdb"></a><span data-ttu-id="ab52d-167">启动 LocalDB 和连接到 LocalDB</span><span class="sxs-lookup"><span data-stu-id="ab52d-167">Starting LocalDB and Connecting to LocalDB</span></span>  
  
### <a name="connecting-to-the-automatic-instance"></a><span data-ttu-id="ab52d-168">连接到自动实例</span><span class="sxs-lookup"><span data-stu-id="ab52d-168">Connecting to the Automatic Instance</span></span>  
 <span data-ttu-id="ab52d-169">使用的最简单方法 `LocalDB` 是使用连接字符串 **"Server = (localdb) \Mssqllocaldb; 集成安全性 = true"** 连接到当前用户拥有的自动实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-169">The easiest way to use `LocalDB` is to connect to the automatic instance owned by the current user by using the connection string **"Server=(localdb)\MSSQLLocalDB;Integrated Security=true"**.</span></span> <span data-ttu-id="ab52d-170">若要使用文件名连接到特定数据库，则使用类似于 **"Server=(LocalDB)\MSSQLLocalDB; Integrated Security=true ;AttachDbFileName=D:\Data\MyDB1.mdf"** 的连接字符串进行连接。</span><span class="sxs-lookup"><span data-stu-id="ab52d-170">To connect to a specific database by using the file name, connect using a connection string similar to **"Server=(LocalDB)\MSSQLLocalDB; Integrated Security=true ;AttachDbFileName=D:\Data\MyDB1.mdf"**.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ab52d-171">计算机上的用户首次尝试连接到时 `LocalDB` ，必须创建并启动自动实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-171">The first time a user on a computer tries to connect to `LocalDB`, the automatic instance must be both created and started.</span></span> <span data-ttu-id="ab52d-172">创建实例所用的额外时间可能会导致连接尝试失败并且具有超时消息。</span><span class="sxs-lookup"><span data-stu-id="ab52d-172">The extra time for the instance to be created can cause the connection attempt to fail with a timeout message.</span></span> <span data-ttu-id="ab52d-173">在发生此情况时，等待几秒钟以便让创建过程完成，然后再次连接。</span><span class="sxs-lookup"><span data-stu-id="ab52d-173">When this happens, wait a few seconds to let the creation process complete, and then connect again.</span></span>  
  
### <a name="creating-and-connecting-to-a-named-instances"></a><span data-ttu-id="ab52d-174">创建和连接到命名实例</span><span class="sxs-lookup"><span data-stu-id="ab52d-174">Creating and Connecting to a Named Instances</span></span>  
 <span data-ttu-id="ab52d-175">除了自动实例， `LocalDB` 还支持命名实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-175">In addition to the automatic instance, `LocalDB` also supports named instances.</span></span> <span data-ttu-id="ab52d-176">使用 SqlLocalDB.exe 程序可以创建、启动和停止的命名实例 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-176">Use the SqlLocalDB.exe program to create, start, and stop an named instance of `LocalDB`.</span></span> <span data-ttu-id="ab52d-177">有关 SqlLocalDB.exe 的详细信息，请参阅 [SqlLocalDB 实用工具](../../tools/sqllocaldb-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="ab52d-177">For more information about SqlLocalDB.exe, see [SqlLocalDB Utility](../../tools/sqllocaldb-utility.md).</span></span>  
  
```ms-dos  
REM Create an instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" create LocalDBApp1  
REM Start the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" start LocalDBApp1  
REM Gather information about the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" info LocalDBApp1  
```  
  
 <span data-ttu-id="ab52d-178">上面的最后一行将返回如下信息。</span><span class="sxs-lookup"><span data-stu-id="ab52d-178">The last line above, returns information similar to the following.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="ab52d-179">名称</span><span class="sxs-lookup"><span data-stu-id="ab52d-179">Name</span></span>|<span data-ttu-id="ab52d-180">"LocalDBApp1"</span><span class="sxs-lookup"><span data-stu-id="ab52d-180">"LocalDBApp1"</span></span>|  
|<span data-ttu-id="ab52d-181">版本</span><span class="sxs-lookup"><span data-stu-id="ab52d-181">Version</span></span>|\<Current Version>|  
|<span data-ttu-id="ab52d-182">共享名称</span><span class="sxs-lookup"><span data-stu-id="ab52d-182">Shared name</span></span>|<span data-ttu-id="ab52d-183">""</span><span class="sxs-lookup"><span data-stu-id="ab52d-183">""</span></span>|  
|<span data-ttu-id="ab52d-184">所有者</span><span class="sxs-lookup"><span data-stu-id="ab52d-184">Owner</span></span>|<span data-ttu-id="ab52d-185">"\<Your Windows User>"</span><span class="sxs-lookup"><span data-stu-id="ab52d-185">"\<Your Windows User>"</span></span>|  
|<span data-ttu-id="ab52d-186">自动创建</span><span class="sxs-lookup"><span data-stu-id="ab52d-186">Auto create</span></span>|<span data-ttu-id="ab52d-187">否</span><span class="sxs-lookup"><span data-stu-id="ab52d-187">No</span></span>|  
|<span data-ttu-id="ab52d-188">状态</span><span class="sxs-lookup"><span data-stu-id="ab52d-188">State</span></span>|<span data-ttu-id="ab52d-189">“正在运行”</span><span class="sxs-lookup"><span data-stu-id="ab52d-189">running</span></span>|  
|<span data-ttu-id="ab52d-190">上次启动时间</span><span class="sxs-lookup"><span data-stu-id="ab52d-190">Last start time</span></span>|\<Date and Time>|  
|<span data-ttu-id="ab52d-191">实例管道名称</span><span class="sxs-lookup"><span data-stu-id="ab52d-191">Instance pipe name</span></span>|<span data-ttu-id="ab52d-192">np:\\\\.\pipe\LOCALDB#F365A78E\tsql\query</span><span class="sxs-lookup"><span data-stu-id="ab52d-192">np:\\\\.\pipe\LOCALDB#F365A78E\tsql\query</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="ab52d-193">如果应用程序使用4.0.2 之前的 .NET 版本，则必须直接连接到的命名管道 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-193">If your application uses a version of .NET before 4.0.2 you must connect directly to the named pipe of the `LocalDB`.</span></span> <span data-ttu-id="ab52d-194">实例管道名称值是实例正在侦听的命名管道 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-194">The Instance pipe name value is the named pipe that the instance of `LocalDB` is listening on.</span></span> <span data-ttu-id="ab52d-195">LOCALDB # 之后的实例管道名称部分将在每次启动实例时更改 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-195">The portion of the Instance pipe name after LOCALDB# will change each time the instance of `LocalDB` is started.</span></span> <span data-ttu-id="ab52d-196">若要使用连接到实例 `LocalDB` [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ，请在 "**连接到 [!INCLUDE[ssDE](../../includes/ssde-md.md)] \*\* " 对话框的 "**服务器名称\*\*" 框中键入实例管道名称。</span><span class="sxs-lookup"><span data-stu-id="ab52d-196">To connect to the instance of `LocalDB` by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], type the Instance pipe name in the **Server name** box of the **Connect to [!INCLUDE[ssDE](../../includes/ssde-md.md)]** dialog box.</span></span> <span data-ttu-id="ab52d-197">通过自定义程序，可以 `LocalDB` 使用类似于的连接字符串建立与实例的连接。`SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`</span><span class="sxs-lookup"><span data-stu-id="ab52d-197">From your custom program you can establish connection to the instance of `LocalDB` using a connection string similar to `SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`</span></span>  
  
### <a name="connecting-to-a-shared-instance-of-localdb"></a><span data-ttu-id="ab52d-198">连接到 LocalDB 的共享实例</span><span class="sxs-lookup"><span data-stu-id="ab52d-198">Connecting to a Shared Instance of LocalDB</span></span>  
 <span data-ttu-id="ab52d-199">若要连接到 `LocalDB` \*\* \\ \*\* add 的共享实例，请将 (点 + 反斜杠) 到连接字符串，以便引用为共享实例保留的命名空间。</span><span class="sxs-lookup"><span data-stu-id="ab52d-199">To connect to a shared instance of `LocalDB` add **.\\** (dot + backslash) to the connection string to reference the namespace reserved for shared instances.</span></span> <span data-ttu-id="ab52d-200">例如，若要连接到名为的共享实例，请 `LocalDB` `AppData` 使用连接字符串（例如） `(localdb)\.\AppData` 作为连接字符串的一部分。</span><span class="sxs-lookup"><span data-stu-id="ab52d-200">For example, to connect to a shared instance of `LocalDB` named `AppData` use a connection string such as `(localdb)\.\AppData` as part of the connection string.</span></span> <span data-ttu-id="ab52d-201">连接到其不拥有的共享实例的用户 `LocalDB` 必须具有 Windows 身份验证或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 身份验证登录名。</span><span class="sxs-lookup"><span data-stu-id="ab52d-201">A user connecting to a shared instance of `LocalDB` that they do not own must have a Windows Authentication or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication login.</span></span>  
  
## <a name="troubleshooting"></a><span data-ttu-id="ab52d-202">疑难解答</span><span class="sxs-lookup"><span data-stu-id="ab52d-202">Troubleshooting</span></span>  
 <span data-ttu-id="ab52d-203">有关故障排除的详细信息 `LocalDB` ，请参阅[SQL Server 2012 Express LocalDB 疑难解答](https://social.technet.microsoft.com/wiki/contents/articles/4609.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ab52d-203">For information about troubleshooting `LocalDB`, see [Troubleshooting SQL Server 2012 Express LocalDB](https://social.technet.microsoft.com/wiki/contents/articles/4609.aspx).</span></span>  
  
## <a name="permissions"></a><span data-ttu-id="ab52d-204">权限</span><span class="sxs-lookup"><span data-stu-id="ab52d-204">Permissions</span></span>  
 <span data-ttu-id="ab52d-205">的实例 [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` 是用户创建的一个实例，供用户使用。</span><span class="sxs-lookup"><span data-stu-id="ab52d-205">An instance of [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)]`LocalDB` is an instance created by a user for their use.</span></span> <span data-ttu-id="ab52d-206">计算机上的任何用户都可以使用实例创建数据库 `LocalDB` ，在用户配置文件下存储文件并在其凭据下运行该进程。</span><span class="sxs-lookup"><span data-stu-id="ab52d-206">Any user on the computer can create a database using an instance of `LocalDB`, storing files under their user profile and running the process under their credentials.</span></span> <span data-ttu-id="ab52d-207">默认情况下，对实例的访问 `LocalDB` 仅限于其所有者。</span><span class="sxs-lookup"><span data-stu-id="ab52d-207">By default, access to the instance of `LocalDB` is limited to its owner.</span></span> <span data-ttu-id="ab52d-208">中包含的数据受到对 `LocalDB` 数据库文件的文件系统访问的保护。</span><span class="sxs-lookup"><span data-stu-id="ab52d-208">The data contained in the `LocalDB` is protected by file system access to the database files.</span></span> <span data-ttu-id="ab52d-209">如果用户数据库文件存储在共享位置，则对该位置具有文件系统访问权限的任何人都可以打开该数据库，方法是使用 `LocalDB` 它们所拥有的实例。</span><span class="sxs-lookup"><span data-stu-id="ab52d-209">If user database files are stored in a shared location, the database can be opened by anyone with file system access to that location by using an instance of `LocalDB` that they own.</span></span> <span data-ttu-id="ab52d-210">如果数据库文件处于某一受保护的位置，例如用户数据文件夹，则只有该用户以及有权访问该文件夹的任何管理员才能打开该数据库。</span><span class="sxs-lookup"><span data-stu-id="ab52d-210">If the database files are in a protected location, such as the users data folder, only that user, and any administrators with access to that folder, can open the database.</span></span> <span data-ttu-id="ab52d-211">`LocalDB`文件一次只能由一个实例打开 `LocalDB` 。</span><span class="sxs-lookup"><span data-stu-id="ab52d-211">The `LocalDB` files can only be opened by one instance of `LocalDB` at a time.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ab52d-212">`LocalDB`始终在用户安全上下文中运行;也就是说， `LocalDB` 绝不会用本地管理员组中的凭据运行。</span><span class="sxs-lookup"><span data-stu-id="ab52d-212">`LocalDB` always runs under the users security context; that is, `LocalDB` never runs with credentials from the local Administrator's group.</span></span> <span data-ttu-id="ab52d-213">这意味着，实例使用的所有数据库文件 `LocalDB` 必须可以使用拥有用户的 Windows 帐户进行访问，而无需考虑本地 Administrators 组的成员身份。</span><span class="sxs-lookup"><span data-stu-id="ab52d-213">This means that all database files used by a `LocalDB` instance must be accessible using the owning user's Windows account, without considering membership in the local Administrators group.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ab52d-214">另请参阅</span><span class="sxs-lookup"><span data-stu-id="ab52d-214">See Also</span></span>  
 [<span data-ttu-id="ab52d-215">SqlLocalDB 实用工具</span><span class="sxs-lookup"><span data-stu-id="ab52d-215">SqlLocalDB Utility</span></span>](../../tools/sqllocaldb-utility.md)  
  
  
