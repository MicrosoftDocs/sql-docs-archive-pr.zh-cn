---
title: 数据库镜像 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- partners [SQL Server]
- standby servers [SQL Server]
- principal database [SQL Server]
- principal server [SQL Server]
- mirroring partners [SQL Server]
- mirrored databases [SQL Server] See database mirroring
- database mirroring [SQL Server], partners
- availability [SQL Server]
- hot standby servers (see database monitoring [SQL Server])
- database mirroring [SQL Server], about database mirroring
- mirror database [SQL Server]
- mirror server [SQL Server] See database mirroring
ms.assetid: a7f95ddc-5154-4ed5-8117-c9fcf2221f13
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9e6fcce7d861fd5757f822080fb05d05e32d799a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578413"
---
# <a name="database-mirroring-sql-server"></a><span data-ttu-id="4ccb8-102">数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-102">Database Mirroring (SQL Server)</span></span>
    
> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../includes/ssnotedepfutureavoid-md.md)] <span data-ttu-id="4ccb8-103">改为使用 [!INCLUDE[ssHADR](../../includes/sshadr-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-103">Use [!INCLUDE[ssHADR](../../includes/sshadr-md.md)] instead.</span></span>  
  
 <span data-ttu-id="4ccb8-104">“数据库镜像” 是一种提高 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库的可用性的解决方案。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-104">*Database mirroring* is a solution for increasing the availability of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="4ccb8-105">镜像基于每个数据库实现，并且只适用于使用完整恢复模式的数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-105">Mirroring is implemented on a per-database basis and works only with databases that use the full recovery model.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4ccb8-106">有关数据库镜像的支持、限制、先决条件、配置伙伴服务器的建议和部署数据库镜像的建议的信息，请参阅 [数据库镜像的前提条件、限制和建议](prerequisites-restrictions-and-recommendations-for-database-mirroring.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-106">For information about support for database mirroring, restrictions, prerequisites, recommendations for configuring partner servers, and recommendations for deploying database mirroring, see [Prerequisites, Restrictions, and Recommendations for Database Mirroring](prerequisites-restrictions-and-recommendations-for-database-mirroring.md).</span></span>  
  

  
##  <a name="benefits-of-database-mirroring"></a><a name="Benefits"></a> <span data-ttu-id="4ccb8-107">数据库镜像的优点</span><span class="sxs-lookup"><span data-stu-id="4ccb8-107">Benefits of Database Mirroring</span></span>  
 <span data-ttu-id="4ccb8-108">数据库镜像是一种简单的策略，具有下列优点：</span><span class="sxs-lookup"><span data-stu-id="4ccb8-108">Database mirroring is a simple strategy that offers the following benefits:</span></span>  
  
-   <span data-ttu-id="4ccb8-109">提高数据库的可用性。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-109">Increases availability of a database.</span></span>  
  
     <span data-ttu-id="4ccb8-110">发生灾难时，在具有自动故障转移功能的高安全性模式下，自动故障转移可快速使数据库的备用副本联机（而不会丢失数据）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-110">In the event of a disaster, in high-safety mode with automatic failover, failover quickly brings the standby copy of the database online (without data loss).</span></span> <span data-ttu-id="4ccb8-111">在其他运行模式下，数据库管理员可以选择强制服务（可能丢失数据），以替代数据库的备用副本。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-111">In the other operating modes, the database administrator has the alternative of forcing service (with possible data loss) to the standby copy of the database.</span></span> <span data-ttu-id="4ccb8-112">有关详细信息，请参阅本主题后面的 [角色切换](#RoleSwitching)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-112">For more information, see [Role Switching](#RoleSwitching), later in this topic.</span></span>  
  
-   <span data-ttu-id="4ccb8-113">增强数据保护功能。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-113">Increases data protection.</span></span>  
  
     <span data-ttu-id="4ccb8-114">数据库镜像提供完整或接近完整的数据冗余，具体取决于运行模式是高安全性还是高性能。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-114">Database mirroring provides complete or almost complete redundancy of the data, depending on whether the operating mode is high-safety or high-performance.</span></span> <span data-ttu-id="4ccb8-115">有关详细信息，请参阅本主题后面的 [运行模式](#OperatingModes)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-115">For more information, see [Operating Modes](#OperatingModes), later in this topic.</span></span>  
  
     <span data-ttu-id="4ccb8-116">在 [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] 或更高版本上运行的数据库镜像伙伴会自动尝试解决某些阻止读取数据页的错误。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-116">A database mirroring partner running on [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] or later versions automatically tries to resolve certain types of errors that prevent reading a data page.</span></span> <span data-ttu-id="4ccb8-117">无法读取页的伙伴会向其他伙伴请求新副本。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-117">The partner that is unable to read a page requests a fresh copy from the other partner.</span></span> <span data-ttu-id="4ccb8-118">如果此请求成功，则将以新副本替换不可读的页，这通常会解决该错误。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-118">If this request succeeds, the unreadable page is replaced by the copy, which usually resolves the error.</span></span> <span data-ttu-id="4ccb8-119">有关详细信息，请参阅[自动页修复（适用于可用性组和数据库镜像）](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-119">For more information, see [Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="4ccb8-120">提高生产数据库在升级期间的可用性。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-120">Improves the availability of the production database during upgrades.</span></span>  
  
     <span data-ttu-id="4ccb8-121">为了尽量减少镜像服务器的停机时间，您可以按顺序升级承载故障转移伙伴的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-121">To minimize downtime for a mirrored database, you can sequentially upgrade the instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that are hosting the failover partners.</span></span> <span data-ttu-id="4ccb8-122">这样只会导致一个故障转移的停机时间。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-122">This will incur the downtime of only a single failover.</span></span> <span data-ttu-id="4ccb8-123">这种形式的升级称为“滚动升级 ”。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-123">This form of upgrade is known as a *rolling upgrade*.</span></span> <span data-ttu-id="4ccb8-124">有关详细信息，请参阅[在镜像数据库的停机时间最短的情况下在系统上安装 Service Pack](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-124">For more information, see [Install a Service Pack on a System with Minimal Downtime for Mirrored Databases](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md).</span></span>  
  
##  <a name="database-mirroring-terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="4ccb8-125">数据库镜像术语和定义</span><span class="sxs-lookup"><span data-stu-id="4ccb8-125">Database Mirroring Terms and Definitions</span></span>  
 <span data-ttu-id="4ccb8-126">自动故障转移 (automatic failover)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-126">automatic failover</span></span>  
 <span data-ttu-id="4ccb8-127">一种过程，当主体服务器不可用时，该过程将导致镜像服务器接管主体服务器的角色，并使其数据库的副本联机以作为主体数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-127">The process by which, when the principal server becomes unavailable, the mirror server to take over the role of principal server and brings its copy of the database online as the principal database.</span></span>  
  
 <span data-ttu-id="4ccb8-128">故障转移伙伴 (failover partners)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-128">failover partners</span></span>  
 <span data-ttu-id="4ccb8-129">充当镜像数据库的角色切换伙伴的两个服务器实例（主体服务器或镜像服务器）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-129">The two server instances (the principal server or the mirror server) that act as role-switching partners for a mirrored database.</span></span>  
  
 <span data-ttu-id="4ccb8-130">强制服务 (forced service)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-130">forced service</span></span>  
 <span data-ttu-id="4ccb8-131">是指在负责将服务传输到镜像数据库（但它处于未知状态）的主体服务器出现故障时数据库所有者启动的故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-131">A failover initiated by the database owner upon the failure of the principal server that transfers service to the mirror database while it is in an unknown state.</span></span>  
  
 <span data-ttu-id="4ccb8-132">高性能模式</span><span class="sxs-lookup"><span data-stu-id="4ccb8-132">High-performance mode</span></span>  
 <span data-ttu-id="4ccb8-133">数据库镜像会话异步运行并仅使用主体服务器和镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-133">The database mirroring session operates asynchronously and uses only the principal server and mirror server.</span></span> <span data-ttu-id="4ccb8-134">唯一的角色切换形式是强制服务（可能造成数据丢失）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-134">The only form of role switching is forced service (with possible data loss).</span></span>  
  
 <span data-ttu-id="4ccb8-135">高安全性模式 (High-safety mode)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-135">High-safety mode</span></span>  
 <span data-ttu-id="4ccb8-136">数据库镜像会话同步运行并可以选择使用见证服务器、主体服务器和镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-136">The database mirroring session operates synchronously and, optionally, uses a witness, as well as the principal server and mirror server.</span></span>  
  
 <span data-ttu-id="4ccb8-137">手动故障转移 (manual failover)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-137">manual failover</span></span>  
 <span data-ttu-id="4ccb8-138">是指在负责将服务从主体数据库传输到镜像数据库（处于同步状态）的主体服务器仍在运行时数据库所有者启动的故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-138">A failover initiated by the database owner, while the principal server is still running, that transfers service from the principal database to the mirror database while they are in a synchronized state.</span></span>  
  
 <span data-ttu-id="4ccb8-139">镜像数据库 (mirror database)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-139">mirror database</span></span>  
 <span data-ttu-id="4ccb8-140">通常与主体数据库完全同步的数据库副本。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-140">The copy of the database that is typically fully synchronized with the principal database.</span></span>  
  
 <span data-ttu-id="4ccb8-141">镜像服务器 (mirror server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-141">mirror server</span></span>  
 <span data-ttu-id="4ccb8-142">在数据库镜像配置中，镜像数据库所在的服务器实例。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-142">In a database mirroring configuration, the server instance on which the mirror database resides.</span></span>  
  
 <span data-ttu-id="4ccb8-143">镜像服务器 (mirror server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-143">mirror server</span></span>  
 <span data-ttu-id="4ccb8-144">在数据库镜像配置中，镜像数据库所在的服务器实例。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-144">In a database mirroring configuration, the server instance on which the mirror database resides.</span></span>  
  
 <span data-ttu-id="4ccb8-145">主体数据库 (principal database)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-145">principal database</span></span>  
 <span data-ttu-id="4ccb8-146">数据库镜像中的一种读写数据库，其事务日志记录将应用到数据库的只读副本（镜像数据库）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-146">In database mirroring, a read-write database whose transaction log records are applied to a read-only copy of the database (a mirror database).</span></span>  
  
 <span data-ttu-id="4ccb8-147">主体服务器 (principal server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-147">principal server</span></span>  
 <span data-ttu-id="4ccb8-148">在数据库镜像中，是指当前作为主体数据库的数据库所属于的伙伴。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-148">In database mirroring, the partner whose database is currently the principal database.</span></span>  
  
 <span data-ttu-id="4ccb8-149">重做队列 (redo queue)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-149">redo queue</span></span>  
 <span data-ttu-id="4ccb8-150">收到的等待镜像服务器磁盘的事务日志记录。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-150">Received transaction log records that are waiting on the disk of a mirror server.</span></span>  
  
 <span data-ttu-id="4ccb8-151">角色 (role)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-151">role</span></span>  
 <span data-ttu-id="4ccb8-152">主体服务器和镜像服务器担任互补的主体角色和镜像角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-152">The principal server and mirror server perform complementary principal and mirror roles.</span></span> <span data-ttu-id="4ccb8-153">也可以由第三个服务器实例来担任见证服务器角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-153">Optionally, the role of witness is performed by a third server instance.</span></span>  
  
 <span data-ttu-id="4ccb8-154">角色切换</span><span class="sxs-lookup"><span data-stu-id="4ccb8-154">role switching</span></span>  
 <span data-ttu-id="4ccb8-155">镜像接管主体角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-155">The taking over of the principal role by the mirror.</span></span>  
  
 <span data-ttu-id="4ccb8-156">发送队列 (send queue)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-156">send queue</span></span>  
 <span data-ttu-id="4ccb8-157">在主体服务器的日志磁盘累积的未发送的事务日志记录。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-157">Unsent transaction log records that have accumulated on the log disk of the principal server.</span></span>  
  
 <span data-ttu-id="4ccb8-158">会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-158">session</span></span>  
 <span data-ttu-id="4ccb8-159">是指主体服务器、镜像服务器和见证服务器（如果存在）之间进行数据库镜像期间形成的关系。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-159">The relationship that occurs during database mirroring among the principal server, mirror server, and witness server (if present).</span></span>  
  
 <span data-ttu-id="4ccb8-160">镜像会话启动或继续后，将累积在主体服务器上的主体数据库日志记录发送给镜像服务器的过程，此过程将这些日志记录尽快写入磁盘，以便与主体服务器保持同步。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-160">After a mirroring session starts or resumes, the process by which log records of the principal database that have accumulated on the principal server are sent to the mirror server, which writes these log records to disk as quickly as possible to catch up with the principal server.</span></span>  
  
 <span data-ttu-id="4ccb8-161">事务安全</span><span class="sxs-lookup"><span data-stu-id="4ccb8-161">Transaction safety</span></span>  
 <span data-ttu-id="4ccb8-162">一种镜像特定的数据库属性，用于确定数据库镜像会话是同步运行还是异步运行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-162">A mirroring-specific database property that determines whether a database mirroring session operates synchronously or asynchronously.</span></span> <span data-ttu-id="4ccb8-163">有两种安全级别：FULL 和 OFF。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-163">There are two safety levels: FULL and OFF.</span></span>  
  
 <span data-ttu-id="4ccb8-164">见证</span><span class="sxs-lookup"><span data-stu-id="4ccb8-164">Witness</span></span>  
 <span data-ttu-id="4ccb8-165">仅用于高安全性模式，SQL Server 的一个可选实例，它能使镜像服务器识别何时要启动自动故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-165">For use only with high-safety mode, an optional instance of SQL Server that enables the mirror server to recognize when to initiate an automatic failover.</span></span> <span data-ttu-id="4ccb8-166">与这两个故障转移伙伴不同的是，见证服务器并不能用于数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-166">Unlike the two failover partners, the witness does not serve the database.</span></span> <span data-ttu-id="4ccb8-167">见证服务器的唯一角色是支持自动故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-167">Supporting automatic failover is the only role of the witness.</span></span>  
  
##  <a name="overview-of-database-mirroring"></a><a name="HowWorks"></a> <span data-ttu-id="4ccb8-168">数据库镜像概述</span><span class="sxs-lookup"><span data-stu-id="4ccb8-168">Overview of Database Mirroring</span></span>  
 <span data-ttu-id="4ccb8-169">数据库镜像维护一个数据库的两个副本，这两个副本必须驻留在不同的 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]服务器实例上。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-169">Database mirroring maintains two copies of a single database that must reside on different server instances of [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span></span> <span data-ttu-id="4ccb8-170">通常，这些服务器实例驻留在不同位置的计算机上。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-170">Typically, these server instances reside on computers in different locations.</span></span> <span data-ttu-id="4ccb8-171">启动数据库上的数据库镜像操作时，在这些服务器实例之间形成一种关系，称为“数据库镜像会话” 。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-171">Starting database mirroring on a database, initiates a relationship, known as a *database mirroring session*, between these server instances.</span></span>  
  
 <span data-ttu-id="4ccb8-172">其中一个服务器实例使数据库服务于客户端（主体服务器）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-172">One server instance serves the database to clients (the *principal server*).</span></span> <span data-ttu-id="4ccb8-173">另一个服务器实例则根据镜像会话的配置和状态，充当热备用或温备用服务器（镜像服务器）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-173">The other instance acts as a hot or warm standby server (the *mirror server*), depending on the configuration and state of the mirroring session.</span></span> <span data-ttu-id="4ccb8-174">同步数据库镜像会话时，数据库镜像提供热备用服务器，可支持在已提交事务不丢失数据的情况下进行快速故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-174">When a database mirroring session is synchronized, database mirroring provides a hot standby server that supports rapid failover without a loss of data from committed transactions.</span></span> <span data-ttu-id="4ccb8-175">未同步会话时，镜像服务器通常用作热备用服务器（可能造成数据丢失）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-175">When the session is not synchronized, the mirror server is typically available as a warm standby server (with possible data loss).</span></span>  
  
 <span data-ttu-id="4ccb8-176">在“数据库镜像会话  ”中，主体服务器和镜像服务器作为“伙伴 ”进行通信和协作。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-176">The principal and mirror servers communicate and cooperate as *partners* in a *database mirroring session*.</span></span> <span data-ttu-id="4ccb8-177">两个伙伴在会话中扮演互补的角色：“主体角色”  和“镜像角色” 。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-177">The two partners perform complementary roles in the session: the *principal role* and the *mirror role*.</span></span> <span data-ttu-id="4ccb8-178">在任何给定的时间，都是一个伙伴扮演主体角色，另一个伙伴扮演镜像角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-178">At any given time, one partner performs the principal role, and the other partner performs the mirror role.</span></span> <span data-ttu-id="4ccb8-179">每个伙伴拥有  其当前角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-179">Each partner is described as *owning* its current role.</span></span> <span data-ttu-id="4ccb8-180">拥有主体角色的伙伴称为“主体服务器” ，其数据库副本为当前的主体数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-180">The partner that owns the principal role is known as the *principal server*, and its copy of the database is the current principal database.</span></span> <span data-ttu-id="4ccb8-181">拥有镜像角色的伙伴称为“镜像服务器” ，其数据库副本为当前的镜像数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-181">The partner that owns the mirror role is known as the *mirror server*, and its copy of the database is the current mirror database.</span></span> <span data-ttu-id="4ccb8-182">如果数据库镜像部署在生产环境中，则主体数据库即为“生产数据库 ”。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-182">When database mirroring is deployed in a production environment, the principal database is the *production database*.</span></span>  
  
 <span data-ttu-id="4ccb8-183">数据库镜像涉及尽快将对主体数据库执行的每项插入、更新和删除操作“重做  ”到镜像数据库中。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-183">Database mirroring involves *redoing* every insert, update, and delete operation that occurs on the principal database onto the mirror database as quickly as possible.</span></span> <span data-ttu-id="4ccb8-184">重做通过将活动事务日志记录的流发送到镜像服务器来完成，这会尽快将日志记录按顺序应用到镜像数据库中。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-184">Redoing is accomplished by sending a stream of active transaction log records to the mirror server, which applies log records to the mirror database, in sequence, as quickly as possible.</span></span> <span data-ttu-id="4ccb8-185">与逻辑级别执行的复制不同，数据库镜像在物理日志记录级别执行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-185">Unlike replication, which works at the logical level, database mirroring works at the level of the physical log record.</span></span> <span data-ttu-id="4ccb8-186">从 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]开始，在事务日志记录的流发送到镜像服务器之前，主体服务器会先将其压缩。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-186">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the principal server compresses the stream of transaction log records before sending it to the mirror server.</span></span> <span data-ttu-id="4ccb8-187">在所有镜像会话中都会进行这种日志压缩。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-187">This log compression occurs in all mirroring sessions.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4ccb8-188">给定的服务器实例可以参与到多个具有相同或不同伙伴的并发数据库镜像会话中。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-188">A given server instance can participate in multiple concurrent database mirroring sessions with the same or different partners.</span></span> <span data-ttu-id="4ccb8-189">某个服务器实例可能在某些会话中是伙伴，而在其他会话中则是见证服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-189">A server instance can be a partner in some sessions and a witness in other sessions.</span></span> <span data-ttu-id="4ccb8-190">镜像服务器实例必须正在运行 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的相同版本。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-190">The mirror server instance must be running the same edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 
  
###  <a name="operating-modes"></a><a name="OperatingModes"></a> <span data-ttu-id="4ccb8-191">运行模式</span><span class="sxs-lookup"><span data-stu-id="4ccb8-191">Operating Modes</span></span>  
 <span data-ttu-id="4ccb8-192">数据库镜像会话以同步操作或异步操作运行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-192">A database mirroring session runs with either synchronous or asynchronous operation.</span></span> <span data-ttu-id="4ccb8-193">在异步操作下，事务不需要等待镜像服务器将日志写入磁盘便可提交，这样可最大程度地提高性能。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-193">Under asynchronous operation, the transactions commit without waiting for the mirror server to write the log to disk, which maximizes performance.</span></span> <span data-ttu-id="4ccb8-194">在同步操作下，事务将在伙伴双方处提交，但会延长事务滞后时间。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-194">Under synchronous operation, a transaction is committed on both partners, but at the cost of increased transaction latency.</span></span>  
  
 <span data-ttu-id="4ccb8-195">有两种镜像运行模式。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-195">There are two mirroring operating modes.</span></span> <span data-ttu-id="4ccb8-196">一种是高安全性模式，它支持同步操作。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-196">One of them, *high-safety mode* supports synchronous operation.</span></span> <span data-ttu-id="4ccb8-197">在高安全性模式下，当会话开始时，镜像服务器将使镜像数据库尽快与主体数据库同步。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-197">Under high-safety mode, when a session starts, the mirror server synchronizes the mirror database together with the principal database as quickly as possible.</span></span> <span data-ttu-id="4ccb8-198">一旦同步了数据库，事务将在伙伴双方处提交，这会延长事务滞后时间。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-198">As soon as the databases are synchronized, a transaction is committed on both partners, at the cost of increased transaction latency.</span></span>  
  
 <span data-ttu-id="4ccb8-199">第二种运行模式，即高性能模式，以异步方式运行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-199">The second operating mode, *high-performance mode*, runs asynchronously.</span></span> <span data-ttu-id="4ccb8-200">镜像服务器尝试与主体服务器发送的日志记录保持同步。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-200">The mirror server tries to keep up with the log records sent by the principal server.</span></span> <span data-ttu-id="4ccb8-201">镜像数据库可能稍微滞后于主体数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-201">The mirror database might lag somewhat behind the principal database.</span></span> <span data-ttu-id="4ccb8-202">但是，数据库之间的时间间隔通常很小。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-202">However, typically, the gap between the databases is small.</span></span> <span data-ttu-id="4ccb8-203">但是，如果主体服务器的工作负荷过高或镜像服务器系统的负荷过高，则时间间隔会增大。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-203">However, the gap can become significant if the principal server is under a heavy work load or the system of the mirror server is overloaded.</span></span>  
  
 <span data-ttu-id="4ccb8-204">在高性能模式中，主体服务器向镜像服务器发送日志记录之后，会立即再向客户端发送一条确认消息。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-204">In high-performance mode, as soon as the principal server sends a log record to the mirror server, the principal server sends a confirmation to the client.</span></span> <span data-ttu-id="4ccb8-205">它不会等待镜像服务器的确认。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-205">It does not wait for an acknowledgement from the mirror server.</span></span> <span data-ttu-id="4ccb8-206">这意味着事务不需要等待镜像服务器将日志写入磁盘便可提交。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-206">This means that transactions commit without waiting for the mirror server to write the log to disk.</span></span> <span data-ttu-id="4ccb8-207">此异步操作允许主体服务器在事务滞后时间最小的条件下运行，但可能会丢失某些数据。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-207">Such asynchronous operation enables the principal server to run with minimum transaction latency, at the potential risk of some data loss.</span></span>  
  
 <span data-ttu-id="4ccb8-208">所有数据库镜像会话都只支持一台主体服务器和一台镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-208">All database mirroring sessions support only one principal server and one mirror server.</span></span> <span data-ttu-id="4ccb8-209">下图显示了该配置。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-209">This configuration is shown in the following illustration.</span></span>  
  
 <span data-ttu-id="4ccb8-210">![数据库镜像会话中的伙伴](../media/dbm-2-way-session-intro.gif "数据库镜像会话中的伙伴")</span><span class="sxs-lookup"><span data-stu-id="4ccb8-210">![Partners in a database mirroring session](../media/dbm-2-way-session-intro.gif "Partners in a database mirroring session")</span></span>  
  
 <span data-ttu-id="4ccb8-211">具有自动故障转移功能的高安全性模式要求使用第三个服务器实例，称为见证服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-211">High-safety mode with automatic failover requires a third server instance, known as a *witness*.</span></span> <span data-ttu-id="4ccb8-212">与这两个伙伴不同的是，见证服务器并不能用于数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-212">Unlike the two partners, the witness does not serve the database.</span></span> <span data-ttu-id="4ccb8-213">见证服务器通过验证主体服务器是否已启用并运行来支持自动故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-213">The witness supports automatic failover by verifying whether the principal server is up and functioning.</span></span> <span data-ttu-id="4ccb8-214">只有在镜像服务器和见证服务器与主体服务器断开连接之后而保持相互连接时，镜像服务器才启动自动故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-214">The mirror server initiates automatic failover only if the mirror and the witness remain connected to each other after both have been disconnected from the principal server.</span></span>  
  
 <span data-ttu-id="4ccb8-215">下图显示了包含见证服务器的配置。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-215">The following illustration shows a configuration that includes a witness.</span></span>  
  
 <span data-ttu-id="4ccb8-216">![包含见证服务器的镜像会话](../media/dbm-3-way-session-intro-ov.gif "包含见证服务器的镜像会话")</span><span class="sxs-lookup"><span data-stu-id="4ccb8-216">![A mirroring session that includes a witness](../media/dbm-3-way-session-intro-ov.gif "A mirroring session that includes a witness")</span></span>  
  
 <span data-ttu-id="4ccb8-217">有关详细信息，请参阅本主题后面的 [角色切换](#RoleSwitching)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-217">For more information, see [Role Switching](#RoleSwitching), later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4ccb8-218">建立新的镜像会话或将见证服务器添加到现有镜像配置要求涉及的所有服务器实例运行相同版本的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-218">Establishing a new mirroring session or adding a witness to an existing mirroring configuration requires that all involved server instances run the same version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="4ccb8-219">但是，当升级到 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 或更高版本时，所涉及的实例的版本可以不同。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-219">However, when you are upgrading to [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] or a later version, the versions of the involved instances can vary.</span></span> <span data-ttu-id="4ccb8-220">有关详细信息，请参阅 [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-220">For more information, see [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md).</span></span>  
  
####  <a name="transaction-safety-and-operating-modes"></a><a name="TxnSafety"></a> <span data-ttu-id="4ccb8-221">事务安全与运行模式</span><span class="sxs-lookup"><span data-stu-id="4ccb8-221">Transaction Safety and Operating Modes</span></span>  
 <span data-ttu-id="4ccb8-222">运行模式是异步还是同步取决于事务安全设置。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-222">Whether an operating mode is asynchronous or synchronous depends on the transaction safety setting.</span></span> <span data-ttu-id="4ccb8-223">如果专门使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 来配置数据库镜像，则在您选择运行模式时，将自动配置事务安全设置。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-223">If you exclusively use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to configure database mirroring, transaction safety settings are configured automatically when you select the operation mode.</span></span>  
  
 <span data-ttu-id="4ccb8-224">如果使用 [!INCLUDE[tsql](../../includes/tsql-md.md)] 配置数据库镜像，则必须了解如何设置事务安全。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-224">If you use [!INCLUDE[tsql](../../includes/tsql-md.md)] to configure database mirroring, you must understand how to set transaction safety.</span></span> <span data-ttu-id="4ccb8-225">事务安全由 ALTER DATABASE 语句的 SAFETY 属性控制。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-225">Transaction safety is controlled by the SAFETY property of the ALTER DATABASE statement.</span></span> <span data-ttu-id="4ccb8-226">在正在镜像的数据库中，SAFETY 为 FULL 或 OFF。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-226">On a database that is being mirrored, SAFETY is either FULL or OFF.</span></span>  
  
-   <span data-ttu-id="4ccb8-227">如果将 SAFETY 选项设置为 FULL，则在初始同步阶段后，数据库镜像操作将同步执行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-227">If the SAFETY option is set to FULL, database mirroring operation is synchronous, after the initial synchronizing phase.</span></span> <span data-ttu-id="4ccb8-228">如果在高安全性模式下设置见证服务器，则会话支持自动故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-228">If a witness is set in high-safety mode, the session supports automatic failover.</span></span>  
  
-   <span data-ttu-id="4ccb8-229">如果将 SAFETY 选项设置为 OFF，则数据库镜像操作将异步执行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-229">If the SAFETY option is set to OFF, database mirroring operation is asynchronous.</span></span> <span data-ttu-id="4ccb8-230">会话在高性能模式下运行，并且 WITNESS 选项也应设置为 OFF。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-230">The session runs in high-performance mode, and the WITNESS option should also be OFF.</span></span>  
  
 <span data-ttu-id="4ccb8-231">有关详细信息，请参阅 [Database Mirroring Operating Modes](database-mirroring-operating-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-231">For more information, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
###  <a name="role-switching"></a><a name="RoleSwitching"></a> <span data-ttu-id="4ccb8-232">角色切换</span><span class="sxs-lookup"><span data-stu-id="4ccb8-232">Role Switching</span></span>  
 <span data-ttu-id="4ccb8-233">在数据库镜像会话上下文中，通常可以使用一个称为“角色切换” 的过程来互换主体角色和镜像角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-233">Within the context of a database mirroring session, the principal and mirror roles are typically interchangeable in a process known as *role switching*.</span></span> <span data-ttu-id="4ccb8-234">角色切换涉及将主体角色转换给镜像服务器的操作。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-234">Role switching involves transferring the principal role to the mirror server.</span></span> <span data-ttu-id="4ccb8-235">在角色切换中，镜像服务器充当主体服务器的“故障转移伙伴  ”。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-235">In role switching, the mirror server acts as the *failover partner* for the principal server.</span></span> <span data-ttu-id="4ccb8-236">进行角色切换时，镜像服务器将接管主体角色，并使其数据库的副本联机以作为新的主体数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-236">When a role switch occurs, the mirror server takes over the principal role and brings its copy of the database online as the new principal database.</span></span> <span data-ttu-id="4ccb8-237">以前的主体服务器（如果有）将充当镜像角色，并且其数据库将变为新的镜像数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-237">The former principal server, if available, assumes the mirror role, and its database becomes the new mirror database.</span></span> <span data-ttu-id="4ccb8-238">这些角色可以反复地来回切换。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-238">Potentially, the roles can switch back and forth repeatedly.</span></span>  
  
 <span data-ttu-id="4ccb8-239">存在以下三种角色切换形式。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-239">The following three forms of role switching exist.</span></span>  
  
-   <span data-ttu-id="4ccb8-240">*自动故障转移*</span><span class="sxs-lookup"><span data-stu-id="4ccb8-240">*Automatic failover*</span></span>  
  
     <span data-ttu-id="4ccb8-241">这要求使用高安全性模式并具有镜像服务器和见证服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-241">This requires high-safety mode and the presence of the mirror server and a witness.</span></span> <span data-ttu-id="4ccb8-242">数据库必须已同步，并且见证服务器必须连接到镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-242">The database must already be synchronized, and the witness must be connected to the mirror server.</span></span>  
  
     <span data-ttu-id="4ccb8-243">见证服务器的作用是验证给定的伙伴服务器是否已启动并运行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-243">The role of the witness is to verify whether a given partner server is up and functioning.</span></span> <span data-ttu-id="4ccb8-244">如果镜像服务器与主体服务器断开连接，但见证服务器仍与主体服务器保持连接，则镜像服务器无法启动故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-244">If the mirror server loses its connection to the principal server but the witness is still connected to the principal server, the mirror server does not initiate a failover.</span></span> <span data-ttu-id="4ccb8-245">有关详细信息，请参阅 [数据库镜像见证服务器](database-mirroring-witness.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-245">For more information, see [Database Mirroring Witness](database-mirroring-witness.md).</span></span>  
  
-   <span data-ttu-id="4ccb8-246">*手动故障转移*</span><span class="sxs-lookup"><span data-stu-id="4ccb8-246">*Manual failover*</span></span>  
  
     <span data-ttu-id="4ccb8-247">这要求使用高安全性模式。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-247">This requires high-safety mode.</span></span> <span data-ttu-id="4ccb8-248">伙伴双方必须互相连接，并且数据库必须已同步。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-248">The partners must be connected to each other, and the database must already be synchronized.</span></span>  
  
-   <span data-ttu-id="4ccb8-249">强制服务（可能造成数据丢失）</span><span class="sxs-lookup"><span data-stu-id="4ccb8-249">*Forced service* (with possible data loss)</span></span>  
  
     <span data-ttu-id="4ccb8-250">在高性能模式和不带自动故障转移功能的高安全性模式下，如果主体服务器出现故障而镜像服务器可用，则可以强制服务运行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-250">Under high-performance mode and high-safety mode without automatic failover, forcing service is possible if the principal server has failed and the mirror server is available.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="4ccb8-251">高性能模式用于在没有见证服务器的情况下运行。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-251">High-performance mode is intended to run without a witness.</span></span> <span data-ttu-id="4ccb8-252">但如果存在见证服务器，则强制服务将要求见证服务器连接到镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-252">But if a witness exists, forcing service requires that the witness is connected to the mirror server.</span></span>  
  
 <span data-ttu-id="4ccb8-253">在任何一种角色切换情况下，一旦新的主体数据库联机，客户端应用程序便会通过重新连接到数据库来快速恢复。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-253">In any role-switching scenario, as soon as the new principal database comes online, the client applications can recover quickly by reconnecting to the database.</span></span>  
  
###  <a name="concurrent-sessions"></a><a name="ConcurrentSessions"></a> <span data-ttu-id="4ccb8-254">并发会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-254">Concurrent Sessions</span></span>  
 <span data-ttu-id="4ccb8-255">给定的服务器实例可以参与到多个具有相同或不同服务器实例的并发数据库镜像会话（每个镜像数据库发生一次）中。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-255">A given server instance can participate in multiple, concurrent database mirroring sessions (once per mirrored database) with the same or different server instances.</span></span> <span data-ttu-id="4ccb8-256">通常，服务器实例专门用作其所有数据库镜像会话中的伙伴或见证服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-256">Often, a server instance serves exclusively as a partner or a witness in all of its database mirroring sessions.</span></span> <span data-ttu-id="4ccb8-257">但是，由于每个会话都独立于其他会话，因此服务器实例可以在某些会话中充当伙伴，而在其他会话中充当见证服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-257">However, because each session is independent of the other sessions, a server instance can act as a partner in some sessions and as a witness in other sessions.</span></span> <span data-ttu-id="4ccb8-258">例如，请看三个服务器实例（`SSInstance_1`、 `SSInstance_2`和 `SSInstance_3`）中的下列四个会话。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-258">For example, consider the following four sessions among three server instances (`SSInstance_1`, `SSInstance_2`, and `SSInstance_3`).</span></span> <span data-ttu-id="4ccb8-259">每个服务器实例都可在某些会话中作为伙伴，而在其他会话中作为见证服务器：</span><span class="sxs-lookup"><span data-stu-id="4ccb8-259">Each server instance serves as a partner in some sessions and as a witness in others:</span></span>  
  
|<span data-ttu-id="4ccb8-260">服务器实例</span><span class="sxs-lookup"><span data-stu-id="4ccb8-260">Server instance</span></span>|<span data-ttu-id="4ccb8-261">数据库 A 的会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-261">Session for database A</span></span>|<span data-ttu-id="4ccb8-262">数据库 B 的会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-262">Session for database B</span></span>|<span data-ttu-id="4ccb8-263">数据库 C 的会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-263">Session for database C</span></span>|<span data-ttu-id="4ccb8-264">数据库 D 的会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-264">Session for database D</span></span>|  
|---------------------|----------------------------|----------------------------|----------------------------|----------------------------|  
|`SSInstance_1`|<span data-ttu-id="4ccb8-265">见证</span><span class="sxs-lookup"><span data-stu-id="4ccb8-265">Witness</span></span>|<span data-ttu-id="4ccb8-266">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-266">Partner</span></span>|<span data-ttu-id="4ccb8-267">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-267">Partner</span></span>|<span data-ttu-id="4ccb8-268">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-268">Partner</span></span>|  
|`SSInstance_2`|<span data-ttu-id="4ccb8-269">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-269">Partner</span></span>|<span data-ttu-id="4ccb8-270">见证</span><span class="sxs-lookup"><span data-stu-id="4ccb8-270">Witness</span></span>|<span data-ttu-id="4ccb8-271">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-271">Partner</span></span>|<span data-ttu-id="4ccb8-272">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-272">Partner</span></span>|  
|`SSInstance_3`|<span data-ttu-id="4ccb8-273">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-273">Partner</span></span>|<span data-ttu-id="4ccb8-274">Partner</span><span class="sxs-lookup"><span data-stu-id="4ccb8-274">Partner</span></span>|<span data-ttu-id="4ccb8-275">见证</span><span class="sxs-lookup"><span data-stu-id="4ccb8-275">Witness</span></span>|<span data-ttu-id="4ccb8-276">见证</span><span class="sxs-lookup"><span data-stu-id="4ccb8-276">Witness</span></span>|  
  
 <span data-ttu-id="4ccb8-277">下图说明了都作为伙伴参与两个镜像会话的两个服务器实例。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-277">The following figure illustrates two server instances that are participating as partners together in two mirroring sessions.</span></span> <span data-ttu-id="4ccb8-278">一个会话用于名为 **Db_1**的数据库，另一个会话用于名为 **Db_2**的数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-278">One session is for a database named **Db_1**, and the other session is for a database named **Db_2**.</span></span>  
  
 <span data-ttu-id="4ccb8-279">![两个并发会话中的两个服务器实例](../media/dbm-concurrent-sessions.gif "两个并发会话中的两个服务器实例")</span><span class="sxs-lookup"><span data-stu-id="4ccb8-279">![Two server instances in two concurrent sessions](../media/dbm-concurrent-sessions.gif "Two server instances in two concurrent sessions")</span></span>  
  
 <span data-ttu-id="4ccb8-280">每个数据库独立于其他数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-280">Each of the databases is independent of the others.</span></span> <span data-ttu-id="4ccb8-281">例如，服务器实例最初可能是两个数据库的镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-281">For example, a server instance might initially be the mirror server for two databases.</span></span> <span data-ttu-id="4ccb8-282">如果其中一个数据库发生故障转移，则服务器实例将变为已发生故障转移的数据库的主体服务器，同时为其他数据库保留镜像服务器。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-282">If one of those databases fails over, the server instance becomes the principal server for the failed-over database while remaining the mirror server for the other database.</span></span>  
  
 <span data-ttu-id="4ccb8-283">再举一个例子，假设有一个服务器实例，它是两个或多个以具有自动故障转移功能的高安全性模式运行的数据库的主体服务器，如果此服务器实例失败，则所有数据库将自动故障转移到其相应的镜像数据库。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-283">As another example, consider a server instance that is the principal server for two or more databases running in high-safety mode with automatic failover, If the server instance fails, all of the databases automatically failover to their respective mirror databases.</span></span>  
  
 <span data-ttu-id="4ccb8-284">如果将一个服务器实例设置成既作为伙伴又作为见证服务器参与会话，请确保数据库镜像终结点能够支持两种角色（有关详细信息，请参阅 [数据库镜像终结点 (SQL Server)](the-database-mirroring-endpoint-sql-server.md)）中的下列四个会话。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-284">When setting up a server instance to operate both as a partner and a witness, be sure that the database mirroring endpoint supports both roles (for more information, see [The Database Mirroring Endpoint &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md)).</span></span> <span data-ttu-id="4ccb8-285">同时，还要确保系统具有足够资源以减少资源争用。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-285">Also, ensure that the system has sufficient resources to reduce resource contention.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4ccb8-286">由于镜像数据库相互独立，因此这些数据库不能作为一个组来进行故障转移。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-286">Because mirrored databases are independent of each other, databases cannot fail over as a group.</span></span>  
  
###  <a name="client-connections"></a><a name="ClientConnections"></a> <span data-ttu-id="4ccb8-287">客户端连接</span><span class="sxs-lookup"><span data-stu-id="4ccb8-287">Client Connections</span></span>  
 <span data-ttu-id="4ccb8-288">[!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Data Provider for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]提供了对数据库镜像会话的客户端连接支持。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-288">Client-connection support for database mirroring sessions is provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Data Provider for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="4ccb8-289">有关详细信息，请参阅 [将客户端连接到数据库镜像会话 (SQL Server)](connect-clients-to-a-database-mirroring-session-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-289">For more information, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
###  <a name="impact-of-pausing-a-session-on-the-principal-transaction-log"></a><a name="ImpactOfPausing"></a> <span data-ttu-id="4ccb8-290">暂停会话对主体事务日志的影响</span><span class="sxs-lookup"><span data-stu-id="4ccb8-290">Impact of Pausing a Session on the Principal Transaction Log</span></span>  
 <span data-ttu-id="4ccb8-291">数据库所有者可以随时暂停会话。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-291">At any time, the database owner can pause a session.</span></span> <span data-ttu-id="4ccb8-292">执行暂停操作将保留在删除镜像时的会话状态。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-292">Pausing preserves the session state while removing mirroring.</span></span> <span data-ttu-id="4ccb8-293">暂停会话时，主体服务器不会向镜像服务器发送任何新的日志记录。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-293">When a session is paused, the principal server does not send any new log records to the mirror server.</span></span> <span data-ttu-id="4ccb8-294">所有这些记录将保持活动状态，并堆积在主体数据库的事务日志中。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-294">All of these records remain active and accumulate in the transaction log of the principal database.</span></span> <span data-ttu-id="4ccb8-295">只要数据库镜像会话保持暂停状态，事务日志就不会被截断。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-295">As long as a database mirroring session remains paused, the transaction log cannot be truncated.</span></span> <span data-ttu-id="4ccb8-296">因此，如果数据库镜像会话暂停时间过长，则可能会使该日志填满。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-296">Therefore, if the database mirroring session is paused for too long, the log can fill up.</span></span>  
  
 <span data-ttu-id="4ccb8-297">有关详细信息，请参阅本主题后面的 [暂停和恢复数据库镜像 (SQL Server)](database-mirroring-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-297">For more information, see [Pausing and Resuming Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
##  <a name="setting-up-database-mirroring-session"></a><a name="SettingUpDbmSession"></a> <span data-ttu-id="4ccb8-298">设置数据库镜像会话</span><span class="sxs-lookup"><span data-stu-id="4ccb8-298">Setting Up Database Mirroring Session</span></span>  
 <span data-ttu-id="4ccb8-299">开始镜像会话之前，数据库所有者或系统管理员必须创建镜像数据库，设置端点和登录名。在某些情况下，还要创建并设置证书。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-299">Before a mirroring session can begin, the database owner or system administrator must create the mirror database, set up endpoints and logins, and, in some cases, create and set up certificates.</span></span> <span data-ttu-id="4ccb8-300">有关详细信息，请参阅本主题后面的 [设置数据库镜像 (SQL Server)](setting-up-database-mirroring-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-300">For more information, see [Setting Up Database Mirroring &#40;SQL Server&#41;](setting-up-database-mirroring-sql-server.md).</span></span>  
  
##  <a name="interoperability-and-coexistence-with-other-database-engine-features"></a><a name="InterOp"></a> <span data-ttu-id="4ccb8-301">与其他数据库引擎功能的互操作性和共存</span><span class="sxs-lookup"><span data-stu-id="4ccb8-301">Interoperability and Coexistence with Other Database Engine Features</span></span>  
 <span data-ttu-id="4ccb8-302">数据库镜像可以与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的下列功能或组件一起使用。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-302">Database mirroring can be used with the following features or components of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   [<span data-ttu-id="4ccb8-303">日志传送</span><span class="sxs-lookup"><span data-stu-id="4ccb8-303">Log shipping</span></span>](database-mirroring-and-log-shipping-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-304">全文目录</span><span class="sxs-lookup"><span data-stu-id="4ccb8-304">Full-text catalogs</span></span>](database-mirroring-and-full-text-catalogs-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-305">数据库快照</span><span class="sxs-lookup"><span data-stu-id="4ccb8-305">Database snapshots</span></span>](../../relational-databases/databases/database-snapshots-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-306">复制</span><span class="sxs-lookup"><span data-stu-id="4ccb8-306">Replication</span></span>](database-mirroring-and-replication-sql-server.md)  
  
##  <a name="in-this-section"></a><a name="InThisSection"></a> <span data-ttu-id="4ccb8-307">本节内容</span><span class="sxs-lookup"><span data-stu-id="4ccb8-307">In This Section</span></span>  
 [<span data-ttu-id="4ccb8-308">数据库镜像的前提条件、限制和建议</span><span class="sxs-lookup"><span data-stu-id="4ccb8-308">Prerequisites, Restrictions, and Recommendations for Database Mirroring</span></span>](prerequisites-restrictions-and-recommendations-for-database-mirroring.md)  
 <span data-ttu-id="4ccb8-309">说明了设置数据库镜像的前提条件和建议。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-309">Describes the prerequisites and recommendations for setting up database mirroring.</span></span>  
  
 [<span data-ttu-id="4ccb8-310">数据库镜像运行模式</span><span class="sxs-lookup"><span data-stu-id="4ccb8-310">Database Mirroring Operating Modes</span></span>](database-mirroring-operating-modes.md)  
 <span data-ttu-id="4ccb8-311">包含有关数据库镜像会话的同步和异步运行模式的信息，以及有关在数据库镜像会话期间切换伙伴角色的信息。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-311">Contains information about the synchronous and asynchronous operating modes for database mirroring sessions, and about switching partner roles during a database mirroring session.</span></span>  
  
 [<span data-ttu-id="4ccb8-312">数据库镜像见证服务器</span><span class="sxs-lookup"><span data-stu-id="4ccb8-312">Database Mirroring Witness</span></span>](database-mirroring-witness.md)  
 <span data-ttu-id="4ccb8-313">说明数据库镜像中见证服务器的角色、如何在多个镜像会话中使用单个见证服务器、见证服务器的软件和硬件建议以及自动故障转移中见证服务器的角色。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-313">Describes the role of a witness in database mirroring, how to use a single witness in multiple mirroring sessions, software and hardware recommendations for witnesses, and the role of the witness in automatic failover.</span></span> <span data-ttu-id="4ccb8-314">它还包含有关添加或删除见证服务器的信息。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-314">It also contains information about adding or removing a witness.</span></span>  
  
 [<span data-ttu-id="4ccb8-315">数据库镜像会话期间的角色切换 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-315">Role Switching During a Database Mirroring Session &#40;SQL Server&#41;</span></span>](role-switching-during-a-database-mirroring-session-sql-server.md)  
 <span data-ttu-id="4ccb8-316">包含有关在数据库镜像会话期间切换伙伴角色的信息，其中包括自动故障转移、手动故障转移和强制服务（可能发生数据丢失）。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-316">Contains information about switching partner roles during a database mirroring session, including automatic failover, manual failover, and forced service (with possible data loss).</span></span> <span data-ttu-id="4ccb8-317">此外，还包含有关估计在角色切换过程中服务中断的信息。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-317">Also, contains information about estimating the interruption of service during role switching.</span></span>  
  
 [<span data-ttu-id="4ccb8-318">数据库镜像期间可能出现的故障</span><span class="sxs-lookup"><span data-stu-id="4ccb8-318">Possible Failures During Database Mirroring</span></span>](possible-failures-during-database-mirroring.md)  
 <span data-ttu-id="4ccb8-319">介绍了可能导致数据库镜像会话失败的物理故障、操作系统故障和 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 故障，包括硬错误和软错误。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-319">Discusses physical, operating system, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] problems, including hard errors and soft errors, that can cause a failure in a database mirroring session.</span></span> <span data-ttu-id="4ccb8-320">介绍了镜像超时机制如何响应软错误。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-320">Discusses how the mirroring time-out mechanism responds to soft errors.</span></span>  
  
 [<span data-ttu-id="4ccb8-321">数据库镜像终结点 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-321">The Database Mirroring Endpoint &#40;SQL Server&#41;</span></span>](the-database-mirroring-endpoint-sql-server.md)  
 <span data-ttu-id="4ccb8-322">介绍了数据库镜像端点的工作方式。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-322">Discusses how the database mirroring endpoint functions.</span></span>  
  
 [<span data-ttu-id="4ccb8-323">设置数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-323">Setting Up Database Mirroring &#40;SQL Server&#41;</span></span>](setting-up-database-mirroring-sql-server.md)  
 <span data-ttu-id="4ccb8-324">包含有关设置数据库镜像的前提条件、建议和步骤的主题。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-324">Contains topics about the prerequisites, recommendations, and steps for setting up database mirroring.</span></span>  
  
 [<span data-ttu-id="4ccb8-325">将客户端连接到数据库镜像会话 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-325">Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;</span></span>](connect-clients-to-a-database-mirroring-session-sql-server.md)  
 <span data-ttu-id="4ccb8-326">包含涉及到将客户端连接和重新连接到镜像数据库所用的客户端连接字符串属性和算法的主题。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-326">Contains topics covering client connection-string attributes and the algorithms for connecting and reconnecting a client to a mirrored database.</span></span>  
  
 [<span data-ttu-id="4ccb8-327">暂停和恢复数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-327">Pausing and Resuming Database Mirroring &#40;SQL Server&#41;</span></span>](database-mirroring-sql-server.md)  
 <span data-ttu-id="4ccb8-328">介绍了在数据库镜像暂停时发生什么事件（包括对事务日志截断的影响），并说明如何暂停和继续数据库镜像。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-328">Discusses what happens while database mirroring is paused, including the impact on transaction log truncation, and contains descriptions about how to pause and resume database mirroring.</span></span>  
  
 [<span data-ttu-id="4ccb8-329">删除数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-329">Removing Database Mirroring &#40;SQL Server&#41;</span></span>](removing-database-mirroring-sql-server.md)  
 <span data-ttu-id="4ccb8-330">介绍了删除镜像的影响，并包含有关如何结束会话的说明</span><span class="sxs-lookup"><span data-stu-id="4ccb8-330">Discusses the impact of removing mirroring and contains descriptions about how to end a session</span></span>  
  
 [<span data-ttu-id="4ccb8-331">监视数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-331">Monitoring Database Mirroring &#40;SQL Server&#41;</span></span>](monitoring-database-mirroring-sql-server.md)  
 <span data-ttu-id="4ccb8-332">包含有关使用数据库镜像监视器或 **dbmmonitor** 存储过程来监视数据库镜像或会话的信息。</span><span class="sxs-lookup"><span data-stu-id="4ccb8-332">Contains information about using Database Mirroring Monitor or the **dbmmonitor** stored procedures to monitor database mirroring or sessions.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="4ccb8-333">相关任务</span><span class="sxs-lookup"><span data-stu-id="4ccb8-333">Related Tasks</span></span>  
  
### <a name="configuration-tasks"></a><span data-ttu-id="4ccb8-334">配置任务</span><span class="sxs-lookup"><span data-stu-id="4ccb8-334">Configuration Tasks</span></span>  
 <span data-ttu-id="4ccb8-335">**使用 SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="4ccb8-335">**Using SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="4ccb8-336">启动配置数据库镜像安全向导 (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-336">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
-   [<span data-ttu-id="4ccb8-337">使用 Windows 身份验证建立数据库镜像会话 (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-337">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
 <span data-ttu-id="4ccb8-338">**使用 Transact-SQL**</span><span class="sxs-lookup"><span data-stu-id="4ccb8-338">**Using Transact-SQL**</span></span>  
  
-   [<span data-ttu-id="4ccb8-339">允许使用 Windows 身份验证对数据库镜像终结点进行网络访问 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-339">Allow Network Access to a Database Mirroring Endpoint Using Windows Authentication &#40;SQL Server&#41;</span></span>](../database-mirroring-allow-network-access-windows-authentication.md)  
  
-   [<span data-ttu-id="4ccb8-340">允许数据库镜像终结点使用证书进行出站连接 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-340">Allow a Database Mirroring Endpoint to Use Certificates for Outbound Connections &#40;Transact-SQL&#41;</span></span>](database-mirroring-use-certificates-for-outbound-connections.md)  
  
-   [<span data-ttu-id="4ccb8-341">允许数据库镜像终结点将证书用于入站连接 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-341">Allow a Database Mirroring Endpoint to Use Certificates for Inbound Connections &#40;Transact-SQL&#41;</span></span>](database-mirroring-use-certificates-for-inbound-connections.md)  
  
-   [<span data-ttu-id="4ccb8-342">为 Windows 身份验证创建数据库镜像终结点 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-342">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)  
  
-   [<span data-ttu-id="4ccb8-343">使用 Windows 身份验证建立数据库镜像会话 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-343">Establish a Database Mirroring Session Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](database-mirroring-establish-session-windows-authentication.md)  
  
-   [<span data-ttu-id="4ccb8-344">使用 Windows 身份验证添加数据库镜像见证服务器 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-344">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
-   [<span data-ttu-id="4ccb8-345">将镜像数据库设置为使用 Trustworthy 属性 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-345">Set Up a Mirror Database to Use the Trustworthy Property &#40;Transact-SQL&#41;</span></span>](set-up-a-mirror-database-to-use-the-trustworthy-property-transact-sql.md)  
  
 <span data-ttu-id="4ccb8-346">**使用 Transact-SQL 或 SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="4ccb8-346">**Using Transact-SQL or SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="4ccb8-347">在升级服务器实例时最大限度地减少镜像数据库的停机时间</span><span class="sxs-lookup"><span data-stu-id="4ccb8-347">Minimize Downtime for Mirrored Databases When Upgrading Server Instances</span></span>](upgrading-mirrored-instances.md)  
  
-   [<span data-ttu-id="4ccb8-348">为镜像准备镜像数据库 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-348">Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;</span></span>](prepare-a-mirror-database-for-mirroring-sql-server.md)  
  
### <a name="administrative-tasks"></a><span data-ttu-id="4ccb8-349">管理任务</span><span class="sxs-lookup"><span data-stu-id="4ccb8-349">Administrative Tasks</span></span>  
 <span data-ttu-id="4ccb8-350">**Transact-SQL**</span><span class="sxs-lookup"><span data-stu-id="4ccb8-350">**Transact-SQL**</span></span>  
  
-   [<span data-ttu-id="4ccb8-351">更改数据库镜像会话中的事务安全 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-351">Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md)  
  
-   [<span data-ttu-id="4ccb8-352">手动故障转移数据库镜像会话 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-352">Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](manually-fail-over-a-database-mirroring-session-transact-sql.md)  
  
-   [<span data-ttu-id="4ccb8-353">在数据库镜像会话中强制服务 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-353">Force Service in a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](force-service-in-a-database-mirroring-session-transact-sql.md)  
  
-   [<span data-ttu-id="4ccb8-354">暂停或恢复数据库镜像会话 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-354">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-355">从数据库镜像会话删除见证服务器 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-355">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-356">删除数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-356">Remove Database Mirroring &#40;SQL Server&#41;</span></span>](remove-database-mirroring-sql-server.md)  
  
 <span data-ttu-id="4ccb8-357">**SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="4ccb8-357">**SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="4ccb8-358">添加或替换数据库镜像见证服务器 (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-358">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="4ccb8-359">手动故障转移数据库镜像会话 (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-359">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="4ccb8-360">暂停或恢复数据库镜像会话 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-360">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-361">从数据库镜像会话删除见证服务器 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-361">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="4ccb8-362">删除数据库镜像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-362">Remove Database Mirroring &#40;SQL Server&#41;</span></span>](remove-database-mirroring-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="4ccb8-363">另请参阅</span><span class="sxs-lookup"><span data-stu-id="4ccb8-363">See Also</span></span>  
 <span data-ttu-id="4ccb8-364">[数据库镜像终结点 (SQL Server)](the-database-mirroring-endpoint-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4ccb8-364">[The Database Mirroring Endpoint &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span></span>  
 <span data-ttu-id="4ccb8-365">[可用性组和数据库镜像的自动页修复 &#40;&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="4ccb8-365">[Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md) </span></span>  
 <span data-ttu-id="4ccb8-366">[数据库镜像配置故障排除 (SQL Server)](troubleshoot-database-mirroring-configuration-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4ccb8-366">[Troubleshoot Database Mirroring Configuration &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span></span>  
 <span data-ttu-id="4ccb8-367">[数据库镜像：互操作性和共存 &#40;SQL Server&#41;](database-mirroring-interoperability-and-coexistence-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4ccb8-367">[Database Mirroring: Interoperability and Coexistence &#40;SQL Server&#41;](database-mirroring-interoperability-and-coexistence-sql-server.md) </span></span>  
 <span data-ttu-id="4ccb8-368">[数据库镜像的先决条件、限制和建议](prerequisites-restrictions-and-recommendations-for-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="4ccb8-368">[Prerequisites, Restrictions, and Recommendations for Database Mirroring](prerequisites-restrictions-and-recommendations-for-database-mirroring.md) </span></span>  
 <span data-ttu-id="4ccb8-369">[AlwaysOn 可用性组 &#40;SQL Server 概述&#41;](../availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4ccb8-369">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="4ccb8-370">关于日志传送 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4ccb8-370">About Log Shipping &#40;SQL Server&#41;</span></span>](../log-shipping/about-log-shipping-sql-server.md)  
  
  
