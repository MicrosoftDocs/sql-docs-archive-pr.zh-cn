---
title: 使用 "新建会话" 对话框创建扩展事件会话 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
f1_keywords:
- SQL12.SSMS.XEDISPLAY.GROUPING.F1
- SQL12.SSMS.XEDISPLAY.AGGREGATION.F1
- SQL12.SSMS.XEDISPLAY.NEWMERGEDCOLUMN.F1
- SQL12.SSMS.XENEWEVENTSESSION.GENERAL.F1
- SQL12.SSMS.XEDISPLAY.EDITCOLUMNS.F1
- SQL12.SSMS.XEDISPLAY.FILTERS.F1
helpviewer_keywords:
- Extended Events Dialog Box
ms.assetid: 6b2244bc-df6a-4b0a-990e-ddd8d42f7907
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: d42eb23afdf7e8e284a44b10564f5e6c3568a307
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87586954"
---
# <a name="create-an-extended-events-session-using-the-new-session-dialog"></a><span data-ttu-id="2d22c-102">使用“新建会话”对话框创建扩展事件会话</span><span class="sxs-lookup"><span data-stu-id="2d22c-102">Create an Extended Events Session Using the New Session Dialog</span></span>
  <span data-ttu-id="2d22c-103">通过“新建会话”对话框，您可以定义捕获、显示和分析数据的扩展事件会话。</span><span class="sxs-lookup"><span data-stu-id="2d22c-103">The New Session dialog lets you define an Extended Events session that captures, displays, and analyzes your data.</span></span> <span data-ttu-id="2d22c-104">“新建会话”对话框公开所有扩展事件功能。</span><span class="sxs-lookup"><span data-stu-id="2d22c-104">The New Session dialog exposes all Extended Events functionality.</span></span>  
  
 <span data-ttu-id="2d22c-105">通过 [新建会话向导](../ssms/object/object-explorer.md) ，您也可以定义扩展事件会话，并且支持大多数扩展事件功能。</span><span class="sxs-lookup"><span data-stu-id="2d22c-105">The [New Session Wizard](../ssms/object/object-explorer.md) also lets you define an Extended Events session, supporting most Extended Events functionality.</span></span>  
  
## <a name="before-you-begin"></a><span data-ttu-id="2d22c-106">开始之前</span><span class="sxs-lookup"><span data-stu-id="2d22c-106">Before you Begin</span></span>  
 <span data-ttu-id="2d22c-107">若要打开“新建会话”对话框，请在对象资源管理器中，展开 **“管理”** 节点，然后展开 **“扩展事件”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-107">To open the New Session dialog, in Object Explorer, expand the **Management** node, and then expand **Extended Events**.</span></span> <span data-ttu-id="2d22c-108">右键单击 **“会话”**，然后单击 **“新建会话”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-108">Right-click **Sessions**, and then click **New Session**.</span></span>  
  
##  <a name="permissions"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="2d22c-109">权限</span><span class="sxs-lookup"><span data-stu-id="2d22c-109">Permissions</span></span>  
 <span data-ttu-id="2d22c-110">若要创建扩展事件会话，您必须具有 ALTER ANY EVENT SESSION 权限。</span><span class="sxs-lookup"><span data-stu-id="2d22c-110">To create an Extended Events session, you must have the ALTER ANY EVENT SESSION permission.</span></span>  
  
## <a name="to-create-an-extended-events-session-using-the-new-session-dialog"></a><span data-ttu-id="2d22c-111">使用“新建会话”对话框创建扩展事件会话</span><span class="sxs-lookup"><span data-stu-id="2d22c-111">To Create an Extended Events Session using the New Session Dialog</span></span>  
 <span data-ttu-id="2d22c-112">使用 **“常规”** 页可以选择模板和计划事件会话的时间。</span><span class="sxs-lookup"><span data-stu-id="2d22c-112">You use the **General** page to select a template and schedule an event session.</span></span>  
  
#### <a name="to-select-a-template-and-schedule-an-event-session"></a><span data-ttu-id="2d22c-113">选择模板和计划事件会话的时间</span><span class="sxs-lookup"><span data-stu-id="2d22c-113">To select a template and schedule an event session</span></span>  
  
1.  <span data-ttu-id="2d22c-114">在对象资源管理器中，依次展开 **“管理”** 节点和 **“扩展事件”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-114">In Object Explorer, expand the **Management** node, and then expand **Extended Events**.</span></span> <span data-ttu-id="2d22c-115">右键单击 **“会话”**，然后单击 **“新建会话”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-115">Right-click **Sessions**, and then click **New Session**.</span></span>  
  
2.  <span data-ttu-id="2d22c-116">在 **“常规”** 页上的 **“会话名称”** 框中，键入事件会话的有意义的名称。</span><span class="sxs-lookup"><span data-stu-id="2d22c-116">On the **General** page, in the **Session name** box, type a meaningful name for the event session.</span></span>  
  
3.  <span data-ttu-id="2d22c-117">在“模板”\*\*\*\* 框中，从下拉列表中选择要使用的模板。</span><span class="sxs-lookup"><span data-stu-id="2d22c-117">In the **Template** box, select the template you want to use from the drop-down list.</span></span>  
  
     <span data-ttu-id="2d22c-118">你可以从为常见问题设计的一组预先配置的模板中进行选择，也可以选择“从文件”\*\*\*\* 以便使用从以前的会话定义导出的模板文件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-118">You can select from a set of pre-configured templates designed for common problems or you can select **From File** to use a template file exported from a previous session definition.</span></span> <span data-ttu-id="2d22c-119">请注意，您还可以在应用模板后更改会话的配置。</span><span class="sxs-lookup"><span data-stu-id="2d22c-119">Note that you can also change the configuration of the session after you apply the template.</span></span>  
  
4.  <span data-ttu-id="2d22c-120">在 **“计划”** 部分中，如果您想要在启动服务器时启动会话，则选中 **“在服务器启动时启动事件会话”** 复选框。</span><span class="sxs-lookup"><span data-stu-id="2d22c-120">In the **Schedule** section, if you want to start the session when you start the server, select the **Start the event session at server startup** check box.</span></span>  
  
     <span data-ttu-id="2d22c-121">如果您想要在创建会话后启动会话，则选中 **“在会话创建后立即启动事件会话”** 复选框。</span><span class="sxs-lookup"><span data-stu-id="2d22c-121">If you want to start the session after you create the session, select the **Start the event session immediately after session creation** check box.</span></span>  
  
5.  <span data-ttu-id="2d22c-122">若要查看您的事件会话的实时数据，请单击 **“在捕获时查看屏幕上的实时数据”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-122">To view live data for your event session, click **Watch live data on screen as it is captured**.</span></span> <span data-ttu-id="2d22c-123">实时数据将在创建会话后立即开始显示跟踪。</span><span class="sxs-lookup"><span data-stu-id="2d22c-123">The live data will start displaying tracing immediately after the session is created.</span></span>  
  
6.  <span data-ttu-id="2d22c-124">在 **“因果关系跟踪”** 部分，选中 **“跟踪事件彼此相关的方式”** 复选框，以便跟踪跨多个任务的工作。</span><span class="sxs-lookup"><span data-stu-id="2d22c-124">In the **Causality tracking** section, select the **Track how events are related to one another** check box to track work across multiple tasks.</span></span>  
  
     <span data-ttu-id="2d22c-125">有关因果关系跟踪的详细信息，请参阅 " [SQL Server 扩展事件会话](../relational-databases/extended-events/sql-server-extended-events-sessions.md)" 主题中的 "会话内容和特征"。</span><span class="sxs-lookup"><span data-stu-id="2d22c-125">For more information about causality tracking, see "Session Content and Characteristics" in the [SQL Server Extended Events Sessions](../relational-databases/extended-events/sql-server-extended-events-sessions.md) topic.</span></span>  
  
     <span data-ttu-id="2d22c-126">若要向您的会话添加事件，请在 **“选择页”** 部分中单击 **“事件”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-126">To add events to your session, in the **Select a page** section, click **Events**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-127">在完成事件会话的创建前，不要单击“确定”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="2d22c-127">Do not click **OK** until you have finished creating the event session.</span></span>  
  
 <span data-ttu-id="2d22c-128">使用 **“事件”** 页可以查找和添加要为会话捕获的事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-128">You use the **Events** page to find and add the events you want to capture for the session.</span></span>  
  
#### <a name="to-add-events-to-a-session"></a><span data-ttu-id="2d22c-129">向会话添加事件</span><span class="sxs-lookup"><span data-stu-id="2d22c-129">To add events to a session</span></span>  
  
1.  <span data-ttu-id="2d22c-130">在“新建会话”对话框的 **“选择页”** 部分中，选择 **“事件”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-130">In the New Session dialog, in the **Select a page** section, select **Events**.</span></span>  
  
2.  <span data-ttu-id="2d22c-131">在“事件”\*\*\*\* 页上，单击“选择”\*\*\*\*（如果已处于“选择要捕获的事件”\*\*\*\* 屏幕中，则“选择”\*\*\*\* 按钮将灰显）。</span><span class="sxs-lookup"><span data-stu-id="2d22c-131">On the **Events** page, click **Select** (the **Select** button is dimmed if you are already on the **Select the events you want to capture** screen).</span></span>  
  
     <span data-ttu-id="2d22c-132">您可以通过在 **“事件库”** 框中输入要搜索的文本，搜索表中的任何词语。</span><span class="sxs-lookup"><span data-stu-id="2d22c-132">You can search for any word in the table by entering the text you want to search for in the **Event library** box.</span></span> <span data-ttu-id="2d22c-133">例如，如果要查找**lock_acquired**事件，可以输入**锁定**或**锁定获取**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-133">For example, if you want to find the **lock_acquired** event, you can enter **lock** or **lock acquire**.</span></span>  
  
3.  <span data-ttu-id="2d22c-134">在“事件库”\*\*\*\* 部分中，从下拉列表选择你搜索要捕获的事件的方式。</span><span class="sxs-lookup"><span data-stu-id="2d22c-134">In the **Event library** section, select how you want to search for the events you want to capture from the drop-down list.</span></span> <span data-ttu-id="2d22c-135">例如，您可以搜索事件名称或者事件名称及其说明。</span><span class="sxs-lookup"><span data-stu-id="2d22c-135">For example, you can search for event names or event names and their descriptions.</span></span> <span data-ttu-id="2d22c-136">在 **“搜索”** 框中输入您的搜索条件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-136">Enter your search criteria in the **Search** box.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-137">默认情况下将隐藏来自 **“调试”** 渠道的事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-137">Events from the **Debug** channel are hidden by default.</span></span> <span data-ttu-id="2d22c-138">若要显示调试事件，请从“渠道”\*\*\*\* 下拉列表中选择“调试”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="2d22c-138">To display debug events, select **Debug** from the **Channel** drop-down list.</span></span>  
  
     <span data-ttu-id="2d22c-139">所选事件的详细信息将出现在 **“事件库”** 下的“详细信息”窗格中。</span><span class="sxs-lookup"><span data-stu-id="2d22c-139">Details for the selected events appear in the Details pane under the **Event library**.</span></span>  
  
     <span data-ttu-id="2d22c-140">这些事件按名称的字母顺序排序。</span><span class="sxs-lookup"><span data-stu-id="2d22c-140">The events are sorted by name in alphabetical order.</span></span> <span data-ttu-id="2d22c-141">您可以通过单击相应的列标题，按其他事件详细信息进行排序。</span><span class="sxs-lookup"><span data-stu-id="2d22c-141">You can sort by other event details by clicking the appropriate column heading.</span></span> <span data-ttu-id="2d22c-142">例如，您可以按 **“类别”** 或 **“渠道”** 列排序。</span><span class="sxs-lookup"><span data-stu-id="2d22c-142">For example, you can sort by the **Category** or **Channel** column.</span></span>  
  
4.  <span data-ttu-id="2d22c-143">选择你要捕获的事件，然后单击右箭头以便将这些事件移到“所选事件”\*\*\*\* 部分中。</span><span class="sxs-lookup"><span data-stu-id="2d22c-143">Select the event(s) you want to capture, and then click the right arrow to move the event(s) to the **Selected Events** section.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-144">你可以通过使用 CTRL 或 SHIFT 键，从“事件库”\*\*\*\* 中同时选择多个事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-144">You can select multiple events at the same time from the **Event library** by using the CTRL or SHIFT keys.</span></span>  
  
     <span data-ttu-id="2d22c-145">若要配置所选事件，请单击 **“配置”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-145">To configure the selected events, click **Configure**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-146">在完成事件会话的创建前，不要单击“确定”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="2d22c-146">Do not click **OK** until you have finished creating the event session.</span></span>  
  
 <span data-ttu-id="2d22c-147">使用 **“数据存储”** 页可以向事件会话添加目标。</span><span class="sxs-lookup"><span data-stu-id="2d22c-147">You use the **Data Storage** page to add targets to an event session.</span></span> <span data-ttu-id="2d22c-148">目标存储事件数据，并且可以执行各种操作，例如将事件保存到文件以便以后查看和聚合会话的事件数据。</span><span class="sxs-lookup"><span data-stu-id="2d22c-148">Targets store event data, and can perform actions such as saving events to a file for later viewing and aggregating event data for the session.</span></span> <span data-ttu-id="2d22c-149">有关扩展事件目标的详细信息，请参阅 [SQL Server Extended Events Targets](../../2014/database-engine/sql-server-extended-events-targets.md)。</span><span class="sxs-lookup"><span data-stu-id="2d22c-149">For more information about Extended Events targets, see [SQL Server Extended Events Targets](../../2014/database-engine/sql-server-extended-events-targets.md).</span></span>  
  
 <span data-ttu-id="2d22c-150">下面是可用于扩展事件会话的目标：</span><span class="sxs-lookup"><span data-stu-id="2d22c-150">Following are the targets that you can use for an Extended Events session:</span></span>  
  
-   <span data-ttu-id="2d22c-151">**etw_classic_sync_target**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-151">**etw_classic_sync_target**.</span></span> <span data-ttu-id="2d22c-152">用于将 SQL Server 事件与 Windows 操作系统或应用程序事件数据相关联。</span><span class="sxs-lookup"><span data-stu-id="2d22c-152">Use to correlate SQL Server events with Windows operating system or application event data.</span></span>  
  
-   <span data-ttu-id="2d22c-153">**event_counter**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-153">**event_counter**.</span></span> <span data-ttu-id="2d22c-154">计算在启动扩展事件会话后发生的所有指定事件的数目。</span><span class="sxs-lookup"><span data-stu-id="2d22c-154">Counts all specified events that occur after an Extended Event session is started.</span></span> <span data-ttu-id="2d22c-155">用于获取有关工作负荷特征的信息，不必因进行完整的事件收集而增加系统开销。</span><span class="sxs-lookup"><span data-stu-id="2d22c-155">Use to obtain information about workload characteristics without adding the overhead of full event collection.</span></span>  
  
-   <span data-ttu-id="2d22c-156">**event_file**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-156">**event_file**.</span></span> <span data-ttu-id="2d22c-157">用于将事件会话输出从完整内存缓冲区写入磁盘。</span><span class="sxs-lookup"><span data-stu-id="2d22c-157">Use to write event session output from complete memory buffers to disk.</span></span>  
  
-   <span data-ttu-id="2d22c-158">**直方图**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-158">**histogram**.</span></span> <span data-ttu-id="2d22c-159">用于基于指定的事件列或操作，对指定事件发生的次数进行计数。</span><span class="sxs-lookup"><span data-stu-id="2d22c-159">Use to count the number of times that a specified event occurs, based on a specified event column or action.</span></span>  
  
-   <span data-ttu-id="2d22c-160">**pair_matching**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-160">**pair_matching**.</span></span> <span data-ttu-id="2d22c-161">用于确定指定的成对的事件何时未成对发生。</span><span class="sxs-lookup"><span data-stu-id="2d22c-161">Use to determine when a specified paired event does not occur in a matched set.</span></span>  
  
-   <span data-ttu-id="2d22c-162">**ring_buffer**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-162">**ring_buffer**.</span></span> <span data-ttu-id="2d22c-163">用于在先进先出 (FIFO) 的基础上或按事件 FIFO 的基础上将事件数据保存在内存中。</span><span class="sxs-lookup"><span data-stu-id="2d22c-163">Use to hold the event data in memory on a first-in first-out (FIFO) basis, or on a per-event FIFO basis.</span></span>  
  
#### <a name="to-configure-global-fields-for-a-session"></a><span data-ttu-id="2d22c-164">为会话配置全局字段</span><span class="sxs-lookup"><span data-stu-id="2d22c-164">To configure global fields for a session</span></span>  
  
1.  <span data-ttu-id="2d22c-165">在 **“事件”** 页上，在选择要添加到事件会话的事件后，单击 **“配置”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-165">On the **Events** page, after you select the event or events you want to add to the event session, click **Configure**.</span></span>  
  
     <span data-ttu-id="2d22c-166">在您单击 **“配置”** 后， **“事件库”** 部分将折叠，并且 **“所选事件”** 部分将滑动到页面的左侧。</span><span class="sxs-lookup"><span data-stu-id="2d22c-166">After you click **Configure**, the **Event library** section collapses, and the **Selected events** section slides to the left of the page.</span></span> <span data-ttu-id="2d22c-167">您用于配置事件的 **“事件配置选项”** 部分将出现在页面的右侧。</span><span class="sxs-lookup"><span data-stu-id="2d22c-167">The **Event configuration options** section that you use to configure the events appears on the right side of the page.</span></span> <span data-ttu-id="2d22c-168">使用此页上的选项卡可为您的事件会话配置操作。</span><span class="sxs-lookup"><span data-stu-id="2d22c-168">You use the tabs on this page to configure actions for your event session.</span></span>  
  
2.  <span data-ttu-id="2d22c-169">在 **“全局字段”** 选项卡上，选择您要应用于所选事件的字段。</span><span class="sxs-lookup"><span data-stu-id="2d22c-169">On the **Global Fields** tab, select the fields you want to apply to the selected events.</span></span>  
  
     <span data-ttu-id="2d22c-170">可为每个事件选择多个字段。</span><span class="sxs-lookup"><span data-stu-id="2d22c-170">You can select multiple fields for each event.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-171">如果已选择的两个事件配置有不同的操作，则扩展事件将显示部分检查的操作。</span><span class="sxs-lookup"><span data-stu-id="2d22c-171">If two events that are already selected have different configured actions, Extended Events will display the partially checked actions.</span></span> <span data-ttu-id="2d22c-172">若要迅速找到已启用的操作，您可以通过单击复选框上方的列标题，按启用/禁用状态进行排序。</span><span class="sxs-lookup"><span data-stu-id="2d22c-172">To quickly find which actions you have enabled, you can sort by the enabled/disabled status by clicking the column heading above the check boxes.</span></span>  
  
3.  <span data-ttu-id="2d22c-173">在“筛选器”\*\*\*\* 选项卡上，应用筛选器（也称作谓词）可限制要捕获的事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-173">On the  **Filters** tab, apply the filters (also called predicates) to limit the events that you want to capture.</span></span>  
  
     <span data-ttu-id="2d22c-174">如果某个筛选器应用于所选事件，则复选标记将出现在列中。</span><span class="sxs-lookup"><span data-stu-id="2d22c-174">If a filter is applied to the selected event, a check appears in the column.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-175">您可以通过使用 CTRL 或 SHIFT 键，选择要将筛选器应用于的多个事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-175">You can select multiple events that you want to apply a filter to by using the CTRL or SHIFT keys.</span></span> <span data-ttu-id="2d22c-176">但是，只有公共事件字段才会出现以便进行配置。</span><span class="sxs-lookup"><span data-stu-id="2d22c-176">However, only common event fields will appear for configuration.</span></span> <span data-ttu-id="2d22c-177">如果两个所选事件已具有为其配置的不同筛选器，则筛选器将不出现。</span><span class="sxs-lookup"><span data-stu-id="2d22c-177">If two selected events already have different filters configured for them, the filter will not appear.</span></span> <span data-ttu-id="2d22c-178">重新配置筛选器将覆盖现有的筛选器值。</span><span class="sxs-lookup"><span data-stu-id="2d22c-178">Reconfiguring filters will overwrite existing filter values.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-179">在您为筛选器配置组子句时，在保存结果后多余的括号将从筛选器中删除。</span><span class="sxs-lookup"><span data-stu-id="2d22c-179">When you configure a group clause for your filter, redundant parentheses are removed from the filter after the result is saved.</span></span> <span data-ttu-id="2d22c-180">例如，如果您创建一个筛选器分组 **Clause 1** 和 **Clause 2**，则括号会将这两个子句括起来。</span><span class="sxs-lookup"><span data-stu-id="2d22c-180">For example, if you create a filter grouping **Clause 1** and **Clause 2**, parentheses will appear around the clauses.</span></span> <span data-ttu-id="2d22c-181">在您保存筛选器后，多余的括号将被删除。</span><span class="sxs-lookup"><span data-stu-id="2d22c-181">After you save the filter, the redundant parentheses are removed.</span></span> <span data-ttu-id="2d22c-182">删除这些括号不会影响筛选器逻辑。</span><span class="sxs-lookup"><span data-stu-id="2d22c-182">The removal of the parentheses does not affect the filter logic.</span></span>  
  
4.  <span data-ttu-id="2d22c-183">在 **“事件字段”** 选项卡上，选择您要应用于所选事件的事件字段。</span><span class="sxs-lookup"><span data-stu-id="2d22c-183">On the **Event Fields** tab, you select the event fields you want to apply to a selected event.</span></span>  
  
     <span data-ttu-id="2d22c-184">事件包含始终收集的许多字段，这些字段显示在 **“事件字段”** 选项卡中并且没有复选框。</span><span class="sxs-lookup"><span data-stu-id="2d22c-184">Events contain a number of fields that are always collected, which are displayed on the **Event Fields** tab without check boxes.</span></span> <span data-ttu-id="2d22c-185">一个事件还可以具有默认不收集的可选字段（例如，不选择占用大量资源的可选字段）。</span><span class="sxs-lookup"><span data-stu-id="2d22c-185">An event can also have optional fields that are not collected by default (for example, expensive optional fields are not selected).</span></span> <span data-ttu-id="2d22c-186">可选字段也在 **“事件字段”** 选项卡中列出并且具有复选框。</span><span class="sxs-lookup"><span data-stu-id="2d22c-186">Optional fields are also listed on the **Event Fields** tab with check boxes.</span></span> <span data-ttu-id="2d22c-187">若要收集某一可选字段，请选中该可选字段前面的复选框。</span><span class="sxs-lookup"><span data-stu-id="2d22c-187">To collect an optional field, select the check box in front of the optional field.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-188">事件字段选项将显示在跟踪结果中捕获和查看的字段。</span><span class="sxs-lookup"><span data-stu-id="2d22c-188">The event field options will display fields that will be captured and viewed in the trace results.</span></span> <span data-ttu-id="2d22c-189">（扩展事件仅显示事件字段的数据类型。</span><span class="sxs-lookup"><span data-stu-id="2d22c-189">(Extended Events only displays data types of the event fields.</span></span> <span data-ttu-id="2d22c-190">例如，不显示只读事件字段。）如果您选择两个或更多事件，则“新建会话”对话框将在 **“事件字段”** 选项卡上显示空白。</span><span class="sxs-lookup"><span data-stu-id="2d22c-190">For example, read-only event fields are not displayed.) If you select two or more events, the New Session dialog will display a blank on the **Event Fields** tab.</span></span>  
  
5.  <span data-ttu-id="2d22c-191">若要向某一事件会话添加目标，请在 **“选择页”** 部分中选择 **“数据存储”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-191">To add targets to an event session, in the **Select a page** section, select **Data Storage**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-192">在完成事件会话的创建前，不要单击“确定”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="2d22c-192">Do not click **OK** until you have finished creating the event session.</span></span>  
  
#### <a name="to-add-targets-to-an-event-session"></a><span data-ttu-id="2d22c-193">向事件会话添加目标</span><span class="sxs-lookup"><span data-stu-id="2d22c-193">To add targets to an event session</span></span>  
  
1.  <span data-ttu-id="2d22c-194">在“新建会话”对话框的 **“选择页”** 部分中，选择 **“数据存储”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-194">In the New Session dialog, in the **Select a page** section, select **Data Storage**.</span></span>  
  
2.  <span data-ttu-id="2d22c-195">在“数据存储”\*\*\*\* 页中，从下拉列表选择目标类型。</span><span class="sxs-lookup"><span data-stu-id="2d22c-195">On the **Data Storage** page, select the target type from the drop-down list.</span></span>  
  
     <span data-ttu-id="2d22c-196">在选择目标类型后，将显示目标说明。</span><span class="sxs-lookup"><span data-stu-id="2d22c-196">After you select the target type, the target description is displayed.</span></span> <span data-ttu-id="2d22c-197">一次只能添加一个目标。</span><span class="sxs-lookup"><span data-stu-id="2d22c-197">You can add a target only once.</span></span> <span data-ttu-id="2d22c-198">如果您已将该目标添加到会话，则该目标将不出现在下拉列表中。</span><span class="sxs-lookup"><span data-stu-id="2d22c-198">If you have already added the target to the session, it will not appear in the drop-down list.</span></span>  
  
3.  <span data-ttu-id="2d22c-199">单击 **“添加”** 可为事件会话添加目标。</span><span class="sxs-lookup"><span data-stu-id="2d22c-199">Click **Add** to add a target for the event session.</span></span> <span data-ttu-id="2d22c-200">如果您想要删除某一目标，则单击 **“删除”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-200">If you want to remove a target, click **Remove**.</span></span>  
  
     <span data-ttu-id="2d22c-201">目标属性出现在 **“目标”** 部分的下方，具体位置取决于您选择的目标。</span><span class="sxs-lookup"><span data-stu-id="2d22c-201">Target properties appear below the **Targets** section, depending on the target you select.</span></span>  
  
4.  <span data-ttu-id="2d22c-202">下面是根据您选择的目标可指定的属性：</span><span class="sxs-lookup"><span data-stu-id="2d22c-202">Following are the properties you can specify, subject to the targets you select:</span></span>  
  
    |<span data-ttu-id="2d22c-203">目标</span><span class="sxs-lookup"><span data-stu-id="2d22c-203">Target</span></span>|<span data-ttu-id="2d22c-204">目标属性</span><span class="sxs-lookup"><span data-stu-id="2d22c-204">Target Properties</span></span>|  
    |------------|-----------------------|  
    |<span data-ttu-id="2d22c-205">**etw_classic_sync_target**</span><span class="sxs-lookup"><span data-stu-id="2d22c-205">**etw_classic_sync_target**</span></span>|<span data-ttu-id="2d22c-206">**服务器上的会话日志文件名称**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-206">**Session log file name on server**.</span></span> <span data-ttu-id="2d22c-207">输入服务器上的日志文件名称和目录，或者单击 **“浏览”** 以便查找和选择日志文件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-207">Enter the log file name and directory on the server, or click **Browse** to find and select the log file.</span></span><br /><br /> <span data-ttu-id="2d22c-208">**最大日志文件大小**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-208">**Maximum log file size**.</span></span> <span data-ttu-id="2d22c-209">为 Windows 事件跟踪 (ETW) 事件输入最大日志文件大小。</span><span class="sxs-lookup"><span data-stu-id="2d22c-209">Enter the maximum log file size for the Event Tracing for Windows (ETW) event.</span></span> <span data-ttu-id="2d22c-210">默认值为 20 MB。</span><span class="sxs-lookup"><span data-stu-id="2d22c-210">The default is 20 megabytes (MB).</span></span> <span data-ttu-id="2d22c-211">您可以从下拉列表中选择不同的存储单位。</span><span class="sxs-lookup"><span data-stu-id="2d22c-211">You can select a different unit of storage from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-212">**缓冲区大小**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-212">**Buffer size**.</span></span> <span data-ttu-id="2d22c-213">为事件会话输入内存中缓冲区大小。</span><span class="sxs-lookup"><span data-stu-id="2d22c-213">Enter the in-memory buffer size for the event session.</span></span> <span data-ttu-id="2d22c-214">默认值为 128 KB。</span><span class="sxs-lookup"><span data-stu-id="2d22c-214">The default is 128 kilobytes (KB).</span></span> <span data-ttu-id="2d22c-215">您可以从下拉列表中选择不同的存储单位。</span><span class="sxs-lookup"><span data-stu-id="2d22c-215">You can select a different unit of storage from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-216">**会话名称**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-216">**Session name**.</span></span> <span data-ttu-id="2d22c-217">输入有意义的 ETW 会话名称。</span><span class="sxs-lookup"><span data-stu-id="2d22c-217">Enter a meaningful ETW session name.</span></span><br /><br /> <span data-ttu-id="2d22c-218">**出错时重新尝试写入 ETW**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-218">**Retry on error writing to ETW**.</span></span> <span data-ttu-id="2d22c-219">选中此复选框可以重新尝试将事件发布到 ETW 子系统。</span><span class="sxs-lookup"><span data-stu-id="2d22c-219">Select this check box to retry publishing the event to the ETW subsystem.</span></span><br /><br /> <span data-ttu-id="2d22c-220">**最大重试次数**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-220">**Maximum number of retries**.</span></span> <span data-ttu-id="2d22c-221">输入您要将事件发布给 ETW 子系统的最大重试次数，在此次数之后将删除该事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-221">Enter the maximum number of times you want to retry publishing the event to the ETW subsystem before dropping the event.</span></span> <span data-ttu-id="2d22c-222">默认的重试次数是零 (0)。</span><span class="sxs-lookup"><span data-stu-id="2d22c-222">The default number of retries is zero (0).</span></span> <span data-ttu-id="2d22c-223">对于此目标属性，零 (0) 意味着不重试。</span><span class="sxs-lookup"><span data-stu-id="2d22c-223">For this target property, zero (0) means no retries.</span></span>|  
    |<span data-ttu-id="2d22c-224">**event_counter**</span><span class="sxs-lookup"><span data-stu-id="2d22c-224">**event_counter**</span></span>|<span data-ttu-id="2d22c-225">没有用于事件计数器的目标属性。</span><span class="sxs-lookup"><span data-stu-id="2d22c-225">There are no target properties for the event counter.</span></span>|  
    |<span data-ttu-id="2d22c-226">**event_file**</span><span class="sxs-lookup"><span data-stu-id="2d22c-226">**event_file**</span></span>|<span data-ttu-id="2d22c-227">**服务器上的文件名**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-227">**File name on server**.</span></span> <span data-ttu-id="2d22c-228">输入服务器上的目录和目标文件名，或者单击 **“浏览”** 以便查找和选择目标文件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-228">Enter the directory and target file name on the server, or click **Browse** to find and select the target file.</span></span><br /><br /> <span data-ttu-id="2d22c-229">**最大文件大小**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-229">**Maximum file size**.</span></span> <span data-ttu-id="2d22c-230">为文件目标指定最大文件大小。</span><span class="sxs-lookup"><span data-stu-id="2d22c-230">Specify the maximum file size for the file target.</span></span> <span data-ttu-id="2d22c-231">如果未指定最大文件大小，则文件将一直增长到磁盘变满为止。</span><span class="sxs-lookup"><span data-stu-id="2d22c-231">If you do not specify the maximum file size, the file will grow until the disk is full.</span></span> <span data-ttu-id="2d22c-232">默认文件大小为 1 GB。</span><span class="sxs-lookup"><span data-stu-id="2d22c-232">The default file size is 1 gigabyte (GB).</span></span> <span data-ttu-id="2d22c-233">您可以从下拉列表中选择不同的存储单位。</span><span class="sxs-lookup"><span data-stu-id="2d22c-233">You can select a different unit of storage from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-234">**启用文件滚动更新**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-234">**Enable file rollover**.</span></span> <span data-ttu-id="2d22c-235">选中此复选框可为文件目标启用文件滚动更新。</span><span class="sxs-lookup"><span data-stu-id="2d22c-235">Select this check box to enable file rollover for the file target.</span></span><br /><br /> <span data-ttu-id="2d22c-236">**最大文件数**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-236">**Maximum number of files**.</span></span> <span data-ttu-id="2d22c-237">输入要保留在文件系统中的最大文件数。</span><span class="sxs-lookup"><span data-stu-id="2d22c-237">Enter the maximum number of files you want to retain in the file system.</span></span>|  
    |<span data-ttu-id="2d22c-238">**而言**</span><span class="sxs-lookup"><span data-stu-id="2d22c-238">**histogram**</span></span>|<span data-ttu-id="2d22c-239">**要筛选的事件**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-239">**Event to filter on**.</span></span> <span data-ttu-id="2d22c-240">从下拉列表中选择要筛选的事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-240">Select the event you want to filter on from the drop-down list.</span></span> <span data-ttu-id="2d22c-241">您可以筛选在事件会话中存在的任何事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-241">You can filter on any event that exists in the event session.</span></span> <span data-ttu-id="2d22c-242">你还可以 **\<None>** 从下拉列表中进行选择，以包括操作的所有事件和基础存储桶。</span><span class="sxs-lookup"><span data-stu-id="2d22c-242">You can also select **\<None>** from the drop-down list to include all events and the base buckets on the action.</span></span><br /><br /> <span data-ttu-id="2d22c-243">**存储桶基于: 操作**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-243">**Base buckets on: Action**.</span></span> <span data-ttu-id="2d22c-244">选择此选项可以将存储桶基于用作数据源的操作名称，然后从下拉列表中选择该操作。</span><span class="sxs-lookup"><span data-stu-id="2d22c-244">Select this option to base the buckets on the action name that is used as the data source, and then select the action from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-245">**存储桶基于: 字段**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-245">**Base buckets on: Field**.</span></span> <span data-ttu-id="2d22c-246">选择此选项可以将存储桶基于用作数据源的事件字段，然后从下拉列表中选择该字段。</span><span class="sxs-lookup"><span data-stu-id="2d22c-246">Select this option to base the buckets on the event field that is used as the data source, and then select the field from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-247">**最大存储桶数**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-247">**Maximum number of buckets**.</span></span> <span data-ttu-id="2d22c-248">输入要保留的存储桶的最大数目。</span><span class="sxs-lookup"><span data-stu-id="2d22c-248">Enter the maximum number of buckets you want to retain.</span></span> <span data-ttu-id="2d22c-249">达到此值后，事件会话将忽略不属于现有存储桶的任何新事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-249">When this value is reached, the event session will ignore any new events that do not belong to the existing buckets.</span></span>|  
    |<span data-ttu-id="2d22c-250">**pair_matching**</span><span class="sxs-lookup"><span data-stu-id="2d22c-250">**pair_matching**</span></span>|<span data-ttu-id="2d22c-251">**事件: 开头为**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-251">**Events: Begin with**.</span></span> <span data-ttu-id="2d22c-252">从下拉列表中选择在成对序列中指定开始事件的事件名称。</span><span class="sxs-lookup"><span data-stu-id="2d22c-252">Select the event name from the drop-down list that specifies the beginning event in a paired sequence.</span></span><br /><br /> <span data-ttu-id="2d22c-253">**事件: 结尾为**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-253">**Events: End with**.</span></span> <span data-ttu-id="2d22c-254">从下拉列表中选择在成对序列中指定结束事件的事件名称。</span><span class="sxs-lookup"><span data-stu-id="2d22c-254">Select the event name from the drop-down list that specifies the ending event in a paired sequence.</span></span><br /><br /> <span data-ttu-id="2d22c-255">**字段和操作: 开头为**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-255">**Fields and actions: Begin with**.</span></span> <span data-ttu-id="2d22c-256">从下拉列表中选择成对序列中的开始字段和/或操作。</span><span class="sxs-lookup"><span data-stu-id="2d22c-256">Select the beginning field and/or action in a paired sequence from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-257">**字段和操作: 结尾为**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-257">**Fields and actions: End with**.</span></span> <span data-ttu-id="2d22c-258">从下拉列表中选择成对序列中的结束字段和/或操作。</span><span class="sxs-lookup"><span data-stu-id="2d22c-258">Select the ending field and/or action in a paired sequence from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-259">**如果内存压力发生，放弃不成对的新事件**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-259">**Discard new unpaired events if memory pressure occurs**.</span></span> <span data-ttu-id="2d22c-260">如果选中此复选框，则在计算机处于内存压力下时，将停止收集针对 pair_matching 目标的事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-260">Select this check box to stop collecting events to the pair_matching target when the computer is under memory pressure.</span></span> <span data-ttu-id="2d22c-261">在不再存在内存压力后，事件的收集将恢复。</span><span class="sxs-lookup"><span data-stu-id="2d22c-261">When there is no longer memory pressure, the collection of events will resume.</span></span><br /><br /> <span data-ttu-id="2d22c-262">**孤立事件最大数目**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-262">**Maximum orphan events**.</span></span> <span data-ttu-id="2d22c-263">指定您要保留在内存中的孤立事件的最大数目。</span><span class="sxs-lookup"><span data-stu-id="2d22c-263">Specify the maximum number of orphan events you want to keep in memory.</span></span>|  
    |<span data-ttu-id="2d22c-264">**ring_buffer**</span><span class="sxs-lookup"><span data-stu-id="2d22c-264">**ring_buffer**</span></span>|<span data-ttu-id="2d22c-265">**要保留的事件的数目**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-265">**Number of events to keep**.</span></span> <span data-ttu-id="2d22c-266">使用向上和向下箭头可以指定要保留的事件的数目。</span><span class="sxs-lookup"><span data-stu-id="2d22c-266">Use the up and down arrows to specify the number of events you want to keep.</span></span> <span data-ttu-id="2d22c-267">默认值为 1000。</span><span class="sxs-lookup"><span data-stu-id="2d22c-267">The default is 1000.</span></span><br /><br /> <span data-ttu-id="2d22c-268">**最大缓冲区内存大小**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-268">**Maximum buffer memory size**.</span></span> <span data-ttu-id="2d22c-269">输入要使用的最大内存量。</span><span class="sxs-lookup"><span data-stu-id="2d22c-269">Enter the maximum amount of memory to use.</span></span> <span data-ttu-id="2d22c-270">达到此值时将删除现有事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-270">Existing events are dropped when this value is reached.</span></span> <span data-ttu-id="2d22c-271">默认内存大小为 0 MB，这意味着无限制。</span><span class="sxs-lookup"><span data-stu-id="2d22c-271">The default memory size is 0 megabytes (MB), which means unlimited.</span></span> <span data-ttu-id="2d22c-272">您可以从下拉列表中选择不同的存储单位。</span><span class="sxs-lookup"><span data-stu-id="2d22c-272">You can select a different unit of storage from the drop-down list.</span></span><br /><br /> <span data-ttu-id="2d22c-273">**在缓冲区已满时保留指定数目的事件(按类型)**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-273">**Keep a specified number of events (per type) when the buffer is full**.</span></span> <span data-ttu-id="2d22c-274">选择此选项可以在缓冲区中保留每种类型的指定数目的事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-274">Select this option to keep a specified number of events of each type in the buffer.</span></span><br /><br /> <span data-ttu-id="2d22c-275">**要保留的事件的数目(按类型)**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-275">**Number of events to keep (per type)**.</span></span> <span data-ttu-id="2d22c-276">输入缓冲区中要保留的每种类型的首选事件数。</span><span class="sxs-lookup"><span data-stu-id="2d22c-276">Enter the preferred number of events of each type to keep in the buffer.</span></span>|  
  
5.  <span data-ttu-id="2d22c-277">如果您想要设置高级配置属性，则在 **“选择页”** 部分中选择 **“高级”** 。</span><span class="sxs-lookup"><span data-stu-id="2d22c-277">If you want to set advanced configuration properties, select **Advanced** in the **Select a page** section.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d22c-278">在完成事件会话的创建前，不要单击“确定”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="2d22c-278">Do not click **OK** until you have finished creating the event session.</span></span>  
  
#### <a name="to-set-advanced-configurations"></a><span data-ttu-id="2d22c-279">设置高级配置</span><span class="sxs-lookup"><span data-stu-id="2d22c-279">To set advanced configurations</span></span>  
  
1.  <span data-ttu-id="2d22c-280">在“新建会话”对话框的 **“选择页”** 部分，选择 **“高级”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-280">In the New Session dialog, in the **Select a page** section, select **Advanced**.</span></span>  
  
2.  <span data-ttu-id="2d22c-281">在 **“高级”** 页上，若要为事件会话指定 **“事件保留模式”** 选项，请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2d22c-281">On the **Advanced** page, to specify the **Event retention mode** options for the event session, do the following:</span></span>  
  
    1.  <span data-ttu-id="2d22c-282">**单个事件丢失**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-282">**Single event loss**.</span></span> <span data-ttu-id="2d22c-283">选择此选项可允许丢失单个事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-283">Select this option to allow loss of a single event.</span></span>  
  
    2.  <span data-ttu-id="2d22c-284">**多个事件丢失**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-284">**Multiple event loss**.</span></span> <span data-ttu-id="2d22c-285">选择此选项可允许丢失多个事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-285">Select this option to allow loss of multiple events.</span></span>  
  
    3.  <span data-ttu-id="2d22c-286">**无事件丢失**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-286">**No event loss**.</span></span> <span data-ttu-id="2d22c-287">如果您想要禁止事件丢失，则选择此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-287">Select this option if you want to prevent event loss.</span></span> <span data-ttu-id="2d22c-288">不建议选择此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-288">We do not recommend selecting this option.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="2d22c-289">某些事件（例如 **sqlos.wait_info** 事件）与 **无事件丢失** 事件保留模式不兼容。</span><span class="sxs-lookup"><span data-stu-id="2d22c-289">Some events such as the **sqlos.wait_info** event are not compatible with the **No event loss** event retention mode.</span></span>  
  
3.  <span data-ttu-id="2d22c-290">若要为事件会话指定 **“最大调度滞后时间”** 选项，请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2d22c-290">To specify the **Maximum dispatch latency** options for the event session, do the following:</span></span>  
  
    1.  <span data-ttu-id="2d22c-291">**以秒为单位**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-291">**In seconds**.</span></span> <span data-ttu-id="2d22c-292">选择此选项可延长或缩短最大调度滞后时间。</span><span class="sxs-lookup"><span data-stu-id="2d22c-292">Select this option to prolong or shorten the maximum dispatch latency.</span></span> <span data-ttu-id="2d22c-293">使用向上和向下箭头可以秒为单位指定最大调度滞后时间。</span><span class="sxs-lookup"><span data-stu-id="2d22c-293">Use the up and down arrows to specify the maximum dispatch latency in seconds.</span></span>  
  
    2.  <span data-ttu-id="2d22c-294">**无限制**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-294">**Unlimited**.</span></span> <span data-ttu-id="2d22c-295">如果您希望仅在缓冲区已满时调度事件，则选择此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-295">Select this option if you want the events dispatched only when the buffer is full.</span></span>  
  
4.  <span data-ttu-id="2d22c-296">在 **“最大内存大小”** 框中，输入最大内存大小。</span><span class="sxs-lookup"><span data-stu-id="2d22c-296">In the **Maximum memory size** box, enter the maximum memory size.</span></span> <span data-ttu-id="2d22c-297">达到此值时将删除现有事件。</span><span class="sxs-lookup"><span data-stu-id="2d22c-297">Existing events are dropped when this value is reached.</span></span> <span data-ttu-id="2d22c-298">您可以从下拉列表中选择不同的存储单位。</span><span class="sxs-lookup"><span data-stu-id="2d22c-298">You can select a different unit of storage from the drop-down list.</span></span>  
  
5.  <span data-ttu-id="2d22c-299">在 **“最大事件大小”** 框中，为大到无法在 **“最大内存大小”** 中包含的事件，输入最大事件大小。</span><span class="sxs-lookup"><span data-stu-id="2d22c-299">In the **Max event size** box, enter the maximum event size for events that are too large to be contained in the **Maximum memory size**.</span></span> <span data-ttu-id="2d22c-300">如果您未在收集非常大的事件，则无需配置此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-300">If you are not collecting very large events you do not need to configure this option.</span></span> <span data-ttu-id="2d22c-301">您可以从下拉列表中选择不同的存储单位。</span><span class="sxs-lookup"><span data-stu-id="2d22c-301">You can select a different unit of storage from the drop-down list.</span></span>  
  
6.  <span data-ttu-id="2d22c-302">若要为事件会话指定 **“内存分区模式”** 选项，请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2d22c-302">To specify the **Memory partition mode** options for the event session, do the following:</span></span>  
  
    1.  <span data-ttu-id="2d22c-303">**无**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-303">**None**.</span></span> <span data-ttu-id="2d22c-304">如果您不需要内存分区模式，则选择此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-304">Select this option if you do not want a memory partition mode.</span></span>  
  
    2.  <span data-ttu-id="2d22c-305">**按节点**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-305">**Per node**.</span></span> <span data-ttu-id="2d22c-306">如果您要按节点对内存进行分区，则选择此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-306">Select this option if you want to partition memory per node.</span></span>  
  
    3.  <span data-ttu-id="2d22c-307">**按 CPU**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-307">**Per CPU**.</span></span> <span data-ttu-id="2d22c-308">如果您按 CPU 对内存进行分区，则选择此选项。</span><span class="sxs-lookup"><span data-stu-id="2d22c-308">Select this option if you want to partition memory per CPU.</span></span>  
  
 <span data-ttu-id="2d22c-309">若要恢复之前的会话属性的配置默认值，请单击 **“恢复默认设置”**。</span><span class="sxs-lookup"><span data-stu-id="2d22c-309">To restore the configuration default values for the preceding session properties, click **Restore Defaults**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2d22c-310">另请参阅</span><span class="sxs-lookup"><span data-stu-id="2d22c-310">See Also</span></span>  
 <span data-ttu-id="2d22c-311">[使用查询编辑器创建扩展事件会话](../../2014/database-engine/create-an-extended-events-session-using-query-editor.md) </span><span class="sxs-lookup"><span data-stu-id="2d22c-311">[Create an Extended Events Session Using Query Editor](../../2014/database-engine/create-an-extended-events-session-using-query-editor.md) </span></span>  
 <span data-ttu-id="2d22c-312">[使用向导 &#40;对象资源管理器创建扩展事件会话&#41;](../ssms/object/object-explorer.md) </span><span class="sxs-lookup"><span data-stu-id="2d22c-312">[Create an Extended Events Session Using the Wizard &#40;Object Explorer&#41;](../ssms/object/object-explorer.md) </span></span>  
 [<span data-ttu-id="2d22c-313">编写扩展事件会话的脚本</span><span class="sxs-lookup"><span data-stu-id="2d22c-313">Script an Extended Event Session</span></span>](../../2014/database-engine/script-an-extended-event-session.md)  
  
  
