---
title: AlwaysOn 可用性组 (SQL Server) 的 PowerShell Cmdlet 概述 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], PowerShell cmdlets
- Availability Groups [SQL Server], about
- PowerShell [SQL Server], cmdlets
ms.assetid: b3fef0d5-b6d7-4386-a0f0-d06c165ad4de
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b6861abb3358df5e8c223d387b82e22de0f2a9d5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87579031"
---
# <a name="overview-of-powershell-cmdlets-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="2dd96-102">AlwaysOn 可用性组的 PowerShell Cmdlet 概述 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="2dd96-102">Overview of PowerShell Cmdlets for AlwaysOn Availability Groups (SQL Server)</span></span>
  [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="2dd96-103">PowerShell 是专门设计用于系统管理的基于任务的命令行 Shell 和脚本语言。</span><span class="sxs-lookup"><span data-stu-id="2dd96-103">PowerShell is a task-based command-line shell and scripting language designed especially for system administration.</span></span> [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="2dd96-104">在 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 中提供一组 PowerShell cmdlet，支持您部署、管理和监视可用性组、可用性副本和可用性数据库。</span><span class="sxs-lookup"><span data-stu-id="2dd96-104">provides a set of PowerShell cmdlets in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] that enable you to deploy, manage, and monitor availability groups, availability replicas, and availability databases.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2dd96-105">一旦成功启动某操作，PowerShell cmdlet 即告完成。</span><span class="sxs-lookup"><span data-stu-id="2dd96-105">A PowerShell cmdlet can complete by successfully initiating an action.</span></span> <span data-ttu-id="2dd96-106">这并不表示要执行的工作（例如可用性组的故障转移）已经完成。</span><span class="sxs-lookup"><span data-stu-id="2dd96-106">This does not indicate that the intended work, such as the fail over of an availability group, has completed.</span></span> <span data-ttu-id="2dd96-107">对一系列操作编写脚本时，您可能必须检查这些操作的状态，并等待这些操作完成。</span><span class="sxs-lookup"><span data-stu-id="2dd96-107">When scripting a sequence of actions, you might have to check the status of actions, and wait for them to complete.</span></span>  
  
 <span data-ttu-id="2dd96-108">本主题介绍了用于执行下列各组任务的 cmdlet：</span><span class="sxs-lookup"><span data-stu-id="2dd96-108">This topic introduces the cmdlets for the following sets of tasks:</span></span>  
  
-   [<span data-ttu-id="2dd96-109">为 AlwaysOn 可用性组配置服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-109">Configuring a server instance for AlwaysOn Availability Groups</span></span>](#ConfiguringServerInstance)  
  
-   [<span data-ttu-id="2dd96-110">备份和还原数据库和事务日志</span><span class="sxs-lookup"><span data-stu-id="2dd96-110">Backing up and restoring databases and transaction logs</span></span>](#BnRcmdlets)  
  
-   [<span data-ttu-id="2dd96-111">创建和管理可用性组</span><span class="sxs-lookup"><span data-stu-id="2dd96-111">Creating and managing an availability group</span></span>](#DeployManageAGs)  
  
-   [<span data-ttu-id="2dd96-112">创建和管理可用性组侦听器</span><span class="sxs-lookup"><span data-stu-id="2dd96-112">Creating and managing an availability group listener</span></span>](#AGlisteners)  
  
-   [<span data-ttu-id="2dd96-113">创建和管理可用性副本</span><span class="sxs-lookup"><span data-stu-id="2dd96-113">Creating and managing an availability replica</span></span>](#DeployManageARs)  
  
-   [<span data-ttu-id="2dd96-114">添加和管理可用性数据库</span><span class="sxs-lookup"><span data-stu-id="2dd96-114">Adding and managing an availability database</span></span>](#DeployManageDbs)  
  
-   [<span data-ttu-id="2dd96-115">监视可用性组的运行状况</span><span class="sxs-lookup"><span data-stu-id="2dd96-115">Monitoring availability group health</span></span>](#MonitorTblshtAGs)  
  
> [!NOTE]  
>  <span data-ttu-id="2dd96-116">有关 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 描述如何使用 cmdlet 来执行任务的联机丛书中的主题的列表 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] ，请参阅[AlwaysOn 可用性组 &#40;&#41;SQL Server 概述的](overview-of-always-on-availability-groups-sql-server.md)"相关任务" 一节。</span><span class="sxs-lookup"><span data-stu-id="2dd96-116">For a list of topics in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] Books Online that describe how to use cmdlets to perform [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] tasks, see the "Related Tasks" section of [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>  
  
##  <a name="configuring-a-server-instance-for-alwayson-availability-groups"></a><a name="ConfiguringServerInstance"></a><span data-ttu-id="2dd96-117">为 AlwaysOn 可用性组配置服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-117">Configuring a Server Instance for AlwaysOn Availability Groups</span></span>  
  
|<span data-ttu-id="2dd96-118">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-118">Cmdlets</span></span>|<span data-ttu-id="2dd96-119">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-119">Description</span></span>|<span data-ttu-id="2dd96-120">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-120">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`Disable-SqlAlwaysOn`|<span data-ttu-id="2dd96-121">禁用服务器实例上的 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 功能。</span><span class="sxs-lookup"><span data-stu-id="2dd96-121">Disables the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on a server instance.</span></span>|<span data-ttu-id="2dd96-122">由 `Path`、`InputObject` 或 `Name` 参数指定的服务器实例。</span><span class="sxs-lookup"><span data-stu-id="2dd96-122">The server instance that is specified by the `Path`, `InputObject`, or `Name` parameter.</span></span> <span data-ttu-id="2dd96-123">（必须为支持 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]版本。)</span><span class="sxs-lookup"><span data-stu-id="2dd96-123">(Must be an edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].)</span></span>|  
|`Enable-SqlAlwaysOn`|<span data-ttu-id="2dd96-124">在支持 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 功能的 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 实例上启用 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="2dd96-124">Enables [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on an instance of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] that supports the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature.</span></span> <span data-ttu-id="2dd96-125">有关支持的信息 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] ，请参阅[AlwaysOn 可用性组 &#40;SQL Server&#41;的先决条件、限制和建议](prereqs-restrictions-recommendations-always-on-availability.md)。</span><span class="sxs-lookup"><span data-stu-id="2dd96-125">For information about support for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>|<span data-ttu-id="2dd96-126">任何支持 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]版本。</span><span class="sxs-lookup"><span data-stu-id="2dd96-126">Any edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>|  
|`New-SqlHadrEndPoint`|<span data-ttu-id="2dd96-127">在服务器实例上创建新的数据库镜像端点。</span><span class="sxs-lookup"><span data-stu-id="2dd96-127">Creates a new database mirroring endpoint on a server instance.</span></span> <span data-ttu-id="2dd96-128">在主数据库和辅数据库之间移动数据时需要此端点。</span><span class="sxs-lookup"><span data-stu-id="2dd96-128">This endpoint is required for data movement between primary and secondary databases.</span></span>|<span data-ttu-id="2dd96-129">任何 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="2dd96-129">Any instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span></span>|  
|`Set-SqlHadrEndpoint`|<span data-ttu-id="2dd96-130">更改现有数据库镜像端点的属性，如名称、状态或身份验证属性。</span><span class="sxs-lookup"><span data-stu-id="2dd96-130">Changes the properties of an existing database mirroring endpoint, such as the name, state, or authentication properties.</span></span>|<span data-ttu-id="2dd96-131">支持 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 并缺少数据库镜像端点的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-131">A server instance that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and lacks a database mirroring endpoint</span></span>|  
  
##  <a name="backing-up-and-restoring-databases-and-transaction-logs"></a><a name="BnRcmdlets"></a><span data-ttu-id="2dd96-132">备份和还原数据库和事务日志</span><span class="sxs-lookup"><span data-stu-id="2dd96-132">Backing Up and Restoring Databases and Transaction Logs</span></span>  
  
|<span data-ttu-id="2dd96-133">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-133">Cmdlets</span></span>|<span data-ttu-id="2dd96-134">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-134">Description</span></span>|<span data-ttu-id="2dd96-135">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-135">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`Backup-SqlDatabase`|<span data-ttu-id="2dd96-136">创建数据或日志备份。</span><span class="sxs-lookup"><span data-stu-id="2dd96-136">Creates a data or log backup.</span></span>|<span data-ttu-id="2dd96-137">任何联机数据库（对于 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]，则为承载主副本的服务器实例上的数据库）</span><span class="sxs-lookup"><span data-stu-id="2dd96-137">Any online database (for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], a database on the server instance that hosts the primary replica)</span></span>|  
|`Restore-SqlDatabase`|<span data-ttu-id="2dd96-138">还原备份。</span><span class="sxs-lookup"><span data-stu-id="2dd96-138">Restores a backup.</span></span>|<span data-ttu-id="2dd96-139">任何 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 实例（对于 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]，则为承载辅助副本的服务器实例）</span><span class="sxs-lookup"><span data-stu-id="2dd96-139">Any instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], a server instance that hosts a secondary replica)</span></span><br /><br /> <span data-ttu-id="2dd96-140">**&#42;&#42; 重要 &#42;&#42;** 准备辅助数据库时，必须 `-NoRecovery` 在每个命令中都使用参数 `Restore-SqlDatabase` 。</span><span class="sxs-lookup"><span data-stu-id="2dd96-140">**&#42;&#42; Important &#42;&#42;** When preparing a secondary database, you must use the `-NoRecovery` parameter in every `Restore-SqlDatabase` command.</span></span>|  
  
 <span data-ttu-id="2dd96-141">有关使用这些 cmdlet 来准备辅助数据库的信息，请参阅[为可用性组手动准备辅助数据库 (SQL Server)](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="2dd96-141">For information about using these cmdlets to prepare a secondary database, see [Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md).</span></span>  
  
##  <a name="creating-and-managing-an-availability-group"></a><a name="DeployManageAGs"></a><span data-ttu-id="2dd96-142">创建和管理可用性组</span><span class="sxs-lookup"><span data-stu-id="2dd96-142">Creating and Managing an Availability Group</span></span>  
  
|<span data-ttu-id="2dd96-143">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-143">Cmdlets</span></span>|<span data-ttu-id="2dd96-144">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-144">Description</span></span>|<span data-ttu-id="2dd96-145">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-145">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`New-SqlAvailabilityGroup`|<span data-ttu-id="2dd96-146">创建新的可用性组。</span><span class="sxs-lookup"><span data-stu-id="2dd96-146">Creates a new availability group.</span></span>|<span data-ttu-id="2dd96-147">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-147">Server instance to host primary replica</span></span>|  
|`Remove-SqlAvailabilityGroup`|<span data-ttu-id="2dd96-148">删除可用性组。</span><span class="sxs-lookup"><span data-stu-id="2dd96-148">Deletes availability group.</span></span>|<span data-ttu-id="2dd96-149">启用 HADR 的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-149">HADR-enabled server instance</span></span>|  
|`Set-SqlAvailabilityGroup`|<span data-ttu-id="2dd96-150">设置可用性组的属性；使可用性组联机/脱机</span><span class="sxs-lookup"><span data-stu-id="2dd96-150">Sets the properties of an availability group; take an availability group online/offline</span></span>|<span data-ttu-id="2dd96-151">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-151">Server instance that hosts primary replica</span></span>|  
|`Switch-SqlAvailabilityGroup`|<span data-ttu-id="2dd96-152">启动下列形式之一的故障转移：</span><span class="sxs-lookup"><span data-stu-id="2dd96-152">Initiates one of the following forms of failover:</span></span><br /><br /> <span data-ttu-id="2dd96-153">可用性组的强制故障转移（可能会丢失数据）。</span><span class="sxs-lookup"><span data-stu-id="2dd96-153">A forced failover of an availability group (with possible data loss).</span></span><br /><br /> <span data-ttu-id="2dd96-154">可用性组的手动故障转移。</span><span class="sxs-lookup"><span data-stu-id="2dd96-154">A manual failover of an availability group.</span></span>|<span data-ttu-id="2dd96-155">承载目标辅助副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-155">Server instance that hosts target secondary replica</span></span>|  
  
##  <a name="creating-and-managing-an-availability-group-listener"></a><a name="AGlisteners"></a><span data-ttu-id="2dd96-156">创建和管理可用性组侦听器</span><span class="sxs-lookup"><span data-stu-id="2dd96-156">Creating and Managing an Availability Group Listener</span></span>  
  
|<span data-ttu-id="2dd96-157">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-157">Cmdlet</span></span>|<span data-ttu-id="2dd96-158">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-158">Description</span></span>|<span data-ttu-id="2dd96-159">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-159">Supported on</span></span>|  
|------------|-----------------|------------------|  
|`New-SqlAvailabilityGroupListener`|<span data-ttu-id="2dd96-160">创建一个新的可用性组侦听器，并将其附加到一个现有可用性组。</span><span class="sxs-lookup"><span data-stu-id="2dd96-160">Creates a new availability group listener and attaches it to an existing availability group.</span></span>|<span data-ttu-id="2dd96-161">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-161">Server instance that hosts primary replica</span></span>|  
|`Set-SqlAvailabilityGroupListener`|<span data-ttu-id="2dd96-162">修改现有可用性组侦听器的端口设置。</span><span class="sxs-lookup"><span data-stu-id="2dd96-162">Modifies the port setting on an existing availability group listener.</span></span>|<span data-ttu-id="2dd96-163">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-163">Server instance that hosts primary replica</span></span>|  
|`Add-SqlAvailabilityGroupListenerStaticIp`|<span data-ttu-id="2dd96-164">将一个静态 IP 地址添加到现有的可用性组侦听器配置。</span><span class="sxs-lookup"><span data-stu-id="2dd96-164">Adds a static IP address to an existing availability group listener configuration.</span></span> <span data-ttu-id="2dd96-165">此 IP 地址可以是带子网的 IPv4 地址或 IPv6 地址。</span><span class="sxs-lookup"><span data-stu-id="2dd96-165">The IP address can be an IPv4 address with subnet, or an IPv6 address.</span></span>|<span data-ttu-id="2dd96-166">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-166">Server instance that hosts primary replica</span></span>|  
  
##  <a name="creating-and-managing-an-availability-replica"></a><a name="DeployManageARs"></a><span data-ttu-id="2dd96-167">创建和管理可用性副本</span><span class="sxs-lookup"><span data-stu-id="2dd96-167">Creating and Managing an Availability Replica</span></span>  
  
|<span data-ttu-id="2dd96-168">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-168">Cmdlets</span></span>|<span data-ttu-id="2dd96-169">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-169">Description</span></span>|<span data-ttu-id="2dd96-170">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-170">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|<span data-ttu-id="2dd96-171">**New-SqlAvailabilityReplica**</span><span class="sxs-lookup"><span data-stu-id="2dd96-171">**New-SqlAvailabilityReplica**</span></span>|<span data-ttu-id="2dd96-172">创建新的可用性副本。</span><span class="sxs-lookup"><span data-stu-id="2dd96-172">Creates a new availability replica.</span></span> <span data-ttu-id="2dd96-173">您可以使用 `-AsTemplate` 参数为每个新的可用性副本创建内存中的可用性副本对象。</span><span class="sxs-lookup"><span data-stu-id="2dd96-173">You can Use the `-AsTemplate` parameter to create an in-memory availability-replica object for each new availability replica.</span></span>|<span data-ttu-id="2dd96-174">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-174">Server instance that hosts primary replica</span></span>|  
|`Join-SqlAvailabilityGroup`|<span data-ttu-id="2dd96-175">将辅助副本联接到该可用性组。</span><span class="sxs-lookup"><span data-stu-id="2dd96-175">Joins a secondary replica to the availability group.</span></span>|<span data-ttu-id="2dd96-176">承载辅助副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-176">Server instance that hosts secondary replica</span></span>|  
|<span data-ttu-id="2dd96-177">**Remove-SqlAvailabilityReplica**</span><span class="sxs-lookup"><span data-stu-id="2dd96-177">**Remove-SqlAvailabilityReplica**</span></span>|<span data-ttu-id="2dd96-178">删除可用性副本。</span><span class="sxs-lookup"><span data-stu-id="2dd96-178">Deletes an availability replica.</span></span>|<span data-ttu-id="2dd96-179">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-179">Server instance that hosts primary replica</span></span>|  
|`Set-SqlAvailabilityReplica`|<span data-ttu-id="2dd96-180">设置可用性副本的属性。</span><span class="sxs-lookup"><span data-stu-id="2dd96-180">Sets the properties of an availability replica.</span></span>|<span data-ttu-id="2dd96-181">承载主副本的服务器实例</span><span class="sxs-lookup"><span data-stu-id="2dd96-181">Server instance that hosts primary replica</span></span>|  
  
##  <a name="adding-and-managing-an-availability-database"></a><a name="DeployManageDbs"></a><span data-ttu-id="2dd96-182">添加和管理可用性数据库</span><span class="sxs-lookup"><span data-stu-id="2dd96-182">Adding and Managing an Availability Database</span></span>  
  
|<span data-ttu-id="2dd96-183">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-183">Cmdlets</span></span>|<span data-ttu-id="2dd96-184">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-184">Description</span></span>|<span data-ttu-id="2dd96-185">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-185">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|<span data-ttu-id="2dd96-186">**Add-SqlAvailabilityDatabase**</span><span class="sxs-lookup"><span data-stu-id="2dd96-186">**Add-SqlAvailabilityDatabase**</span></span>|<span data-ttu-id="2dd96-187">在主副本上，将数据库添加到可用性组。</span><span class="sxs-lookup"><span data-stu-id="2dd96-187">On the primary replica, adds a database to an availability group.</span></span><br /><br /> <span data-ttu-id="2dd96-188">在辅助副本上，将辅助数据库联接到可用性组。</span><span class="sxs-lookup"><span data-stu-id="2dd96-188">On a secondary replica, joins a secondary database to an availability group.</span></span>|<span data-ttu-id="2dd96-189">承载可用性副本的任何服务器实例（主副本与辅助副本的行为不同）</span><span class="sxs-lookup"><span data-stu-id="2dd96-189">Any server instance that hosts an availability replica (behavior differs for primary and secondary replicas)</span></span>|  
|<span data-ttu-id="2dd96-190">**Remove-SqlAvailabilityDatabase**</span><span class="sxs-lookup"><span data-stu-id="2dd96-190">**Remove-SqlAvailabilityDatabase**</span></span>|<span data-ttu-id="2dd96-191">在主副本上，从可用性组中删除数据库。</span><span class="sxs-lookup"><span data-stu-id="2dd96-191">On the primary replica, removes the database from the availability group.</span></span><br /><br /> <span data-ttu-id="2dd96-192">在辅助副本上，从本地辅助副本中删除本地辅助数据库。</span><span class="sxs-lookup"><span data-stu-id="2dd96-192">On a secondary replica, removes the local secondary database from the local secondary replica.</span></span>|<span data-ttu-id="2dd96-193">承载可用性副本的任何服务器实例（主副本与辅助副本的行为不同）</span><span class="sxs-lookup"><span data-stu-id="2dd96-193">Any server instance that hosts an availability replica (behavior differs for primary and secondary replicas)</span></span>|  
|`Resume-SqlAvailabilityDatabase`|<span data-ttu-id="2dd96-194">恢复已挂起的可用性数据库的数据移动。</span><span class="sxs-lookup"><span data-stu-id="2dd96-194">Resumes the data movement for a suspended availability database.</span></span>|<span data-ttu-id="2dd96-195">已挂起数据库所在的服务器实例。</span><span class="sxs-lookup"><span data-stu-id="2dd96-195">The server instance on which the database was suspended.</span></span>|  
|`Suspend-SqlAvailabilityDatabase`|<span data-ttu-id="2dd96-196">挂起可用性数据库的数据移动。</span><span class="sxs-lookup"><span data-stu-id="2dd96-196">Suspends the data movement for an availability database.</span></span>|<span data-ttu-id="2dd96-197">承载可用性副本的任何服务器实例。</span><span class="sxs-lookup"><span data-stu-id="2dd96-197">Any server instance that hosts an availability replica.</span></span>|  
  
##  <a name="monitoring-availability-group-health"></a><a name="MonitorTblshtAGs"></a><span data-ttu-id="2dd96-198">监视可用性组运行状况</span><span class="sxs-lookup"><span data-stu-id="2dd96-198">Monitoring Availability Group Health</span></span>  
 <span data-ttu-id="2dd96-199">以下 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cmdlet 支持您监视可用性组及其副本和数据库的运行状况。</span><span class="sxs-lookup"><span data-stu-id="2dd96-199">The following [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cmdlets enable you to monitor the health of an availability group and its replicas and databases.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2dd96-200">您必须具有 CONNECT、VIEW SERVER STATE 和 VIEW ANY DEFINITION 权限才能执行这些 cmdlet。</span><span class="sxs-lookup"><span data-stu-id="2dd96-200">You must have CONNECT, VIEW SERVER STATE, and VIEW ANY DEFINITION permissions to execute these cmdlets.</span></span>  
  
|<span data-ttu-id="2dd96-201">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2dd96-201">Cmdlet</span></span>|<span data-ttu-id="2dd96-202">说明</span><span class="sxs-lookup"><span data-stu-id="2dd96-202">Description</span></span>|<span data-ttu-id="2dd96-203">支持平台</span><span class="sxs-lookup"><span data-stu-id="2dd96-203">Supported on</span></span>|  
|------------|-----------------|------------------|  
|`Test-SqlAvailabilityGroup`|<span data-ttu-id="2dd96-204">通过评估 SQL Server 基于策略的管理 (PBM) 策略来评估可用性组的运行状况。</span><span class="sxs-lookup"><span data-stu-id="2dd96-204">Assesses the health of an availability group by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="2dd96-205">承载可用性副本的任何服务器实例。\*</span><span class="sxs-lookup"><span data-stu-id="2dd96-205">Any server instance that hosts an availability replica.\*</span></span>|  
|`Test-SqlAvailabilityReplica`|<span data-ttu-id="2dd96-206">通过评估 SQL Server 基于策略的管理 (PBM) 策略来评估可用性副本的运行状况。</span><span class="sxs-lookup"><span data-stu-id="2dd96-206">Assesses the health of availability replicas by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="2dd96-207">承载可用性副本的任何服务器实例。\*</span><span class="sxs-lookup"><span data-stu-id="2dd96-207">Any server instance that hosts an availability replica.\*</span></span>|  
|`Test-SqlDatabaseReplicaState`|<span data-ttu-id="2dd96-208">通过评估 SQL Server 基于策略的管理 (PBM) 策略来评估所有联接的可用性副本的可用性数据库的运行状况。</span><span class="sxs-lookup"><span data-stu-id="2dd96-208">Assesses the health of an availability database on all joined availability replicas by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="2dd96-209">承载可用性副本的任何服务器实例。\*</span><span class="sxs-lookup"><span data-stu-id="2dd96-209">Any server instance that hosts an availability replica.\*</span></span>|  
  
 <span data-ttu-id="2dd96-210">\*若要查看有关可用性组中所有可用性副本的信息，请使用承载主副本的服务器实例。</span><span class="sxs-lookup"><span data-stu-id="2dd96-210">\*To view information about all of the availability replicas in an availability group, use to the server instance that hosts the primary replica.</span></span>  
  
 <span data-ttu-id="2dd96-211">有关详细信息，请参阅[使用 AlwaysOn 策略查看可用性组的运行状况 &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="2dd96-211">For more information, see [Use AlwaysOn Policies to View the Health of an Availability Group &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2dd96-212">另请参阅</span><span class="sxs-lookup"><span data-stu-id="2dd96-212">See Also</span></span>  
 <span data-ttu-id="2dd96-213">[AlwaysOn 可用性组 &#40;SQL Server 概述&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="2dd96-213">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="2dd96-214">Get Help SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="2dd96-214">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
  
