---
title: 修改跟踪结果视图 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
ms.assetid: 860a80dc-bac0-4ef0-bf7f-7a9b430d7aa3
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 050c8f179742cf3cef6473b03f062390caf195f6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578382"
---
# <a name="modify-the-trace-results-view"></a>修改跟踪结果视图
  本主题介绍如何通过执行以下任务修改 [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] 中扩展事件会话的跟踪结果视图。  
  
1.  [添加或删除列](#AddRemoveColumns)  
  
2.  [创建、编辑或删除合并列](#ChangeColumns)  
  
3.  [对结果进行排序](#SortResults)  
  
4.  [对结果进行分组](#GroupResults)  
  
5.  [聚合结果](#AggregateResults)  
  
6.  [筛选结果](#Filter)  
  
7.  [在列中搜索文本](#Search)  
  
8.  [更改显示设置](#ChangeDisplay)  
  
##  <a name="add-or-remove-columns"></a><a name="AddRemoveColumns"></a>添加或删除列  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在跟踪结果窗口中，右键单击列标题，然后选择 **“选择列”**。  
  
3.  在 **“选择列”** 对话框的 **“可用列”** 部分，选择要添加的列名，然后单击向右箭头。  
  
    > [!NOTE]  
    >  默认情况下，列按名称排列。 若要按事件显示列，请单击 **“按事件排列”**。  
  
     若要删除列，请在 **“所选列”** 部分选择要删除的列，然后单击向左箭头。  
  
4.  在 **“所选列”** 部分，若要更改列排序显示，请分别单击 **“上移”** 或 **“下移”** 。 不能移动多个行。  
  
5.  单击“确定”  。  
  
##  <a name="create-edit-or-delete-merged-columns"></a><a name="ChangeColumns"></a>创建、编辑或删除合并列  
  
#### <a name="to-create-merged-columns"></a>创建合并列  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在跟踪结果窗口中，右键单击列标题，然后单击 **“选择列”**。  
  
3.  在 **“选择列”** 对话框中，单击 **“新建”**。  
  
4.  在 **“新建合并列”** 对话框的 **“合并列名称”** 框中，输入合并列的名称。  
  
5.  在 **“要合并的原始列”** 框中，从下拉列表中选择两个或两个以上的要合并的列。  
  
    > [!NOTE]  
    >  扩展事件仅只支持合并最多 5 个列。  
  
6.  单击“确定”  。  
  
#### <a name="to-edit-merged-columns"></a>编辑合并列  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在跟踪结果窗口中，右键单击列标题，然后单击 **“选择列”**。  
  
3.  在 **“选择列”** 对话框中，单击 **“编辑”**。  
  
4.  若要更改合并列的名称，请在 **“新建合并列”** 对话框的 **“合并列名称”** 框中，输入新名称。  
  
     若要更改要合并的列，请在 **“要合并的原始列”** 框中，从下拉列表中选择要合并的列，然后单击 **“确定”**。  
  
#### <a name="to-delete-merged-columns"></a>删除合并列  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在跟踪结果窗口中，右键单击列标题，然后单击 **“选择列”**。  
  
3.  在 **“选择列”** 对话框中，选择要删除的合并列的名称，然后单击 **“删除”**。  
  
##  <a name="sort-the-results"></a><a name="SortResults"></a>对结果进行排序  
  
#### <a name="to-sort-the-results-in-ascending-or-descending-order"></a>按升序或降序对结果进行排序  
  
-   打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   还可以右键单击会话名称，选择 **“查看实时数据”**，然后单击工具栏上的 **“停止数据反馈”** 按钮。  
  
-   在跟踪结果窗口中，右键单击要排序的列标题。 单击 **“升序排序”** 或 **“降序排序”** 可以分别按升序或降序对列进行排序。  
  
     如果已对列进行分组，则对某个列进行排序将只对组中的数据进行排序。  
  
##  <a name="group-results"></a><a name="GroupResults"></a>组结果  
  
#### <a name="to-group-the-results-by-a-single-column"></a>按单个列对结果进行分组  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   还可以右键单击会话名称，选择 **“查看实时数据”**，然后单击扩展事件工具栏上的 **“停止数据反馈”** 按钮。  
  
2.  在跟踪结果窗口中，右键单击要分组的列标题，然后单击 **“按此列分组”**。  
  
#### <a name="to-group-the-results-by-multiple-columns"></a>按多个列对结果进行分组  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   还可以右键单击会话名称，选择 **“查看实时数据”**，然后单击工具栏上的 **“停止数据反馈”** 按钮。  
  
2.  单击扩展事件工具栏上的 **“分组”** 按钮。  
  
3.  在 **“分组”** 对话框的 **“可用列”** 框中，选择要分组的列，然后单击向右箭头。  
  
     若要更改分组顺序，请在 **“列分组依据”** 部分，单击向上箭头或向下箭头。  
  
     若要从分组中删除列，请在 **“列分组依据”** 框中，选择要删除的列，然后单击向左箭头。  
  
4.  单击“确定”  。  
  
##  <a name="aggregate-results"></a><a name="AggregateResults"></a>聚合结果  
 扩展事件支持五个聚合函数：  
  
-   Sum  
  
-   Min  
  
-   Max  
  
-   平均值  
  
-   计数  
  
 Sum、Min、Max 和 Average 只能用于可用数值列。 count 是组中所选列存在的非 null 值的数量。  
  
#### <a name="to-aggregate-results"></a>聚合结果  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   还可以右键单击会话名称，选择 **“查看实时数据”**，然后单击工具栏上的 **“停止数据反馈”** 按钮。  
  
    > [!NOTE]  
    >  由于聚合是对组运行的，因此，您必须先对结果进行分组，然后才能执行聚合。  
  
2.  在扩展事件工具栏上，单击 **“聚合”** 按钮。  
  
     **聚合** 对话框随即出现，其中显示可用于聚合的列。  
  
3.  在 **“聚合类型”** 下，从下拉列表中选择聚合对应的列的方式。  
  
4.  在 **“聚合排序依据”** 框中，从下拉列表中选择要作为排序依据的列。  
  
5.  选择 **“升序”** 选项以按升序对聚合结果进行排序。  
  
6.  选择 **“降序”** 选项以按降序对聚合结果进行排序。  
  
7.  单击“确定”  。  
  
##  <a name="filter-results"></a><a name="Filter"></a>筛选结果  
 您可以应用筛选器以缩小跟踪窗口中显示的跟踪结果的范围。 显示筛选器包括时间筛选器和高级筛选器。 您可以使用时间筛选器按事件时间戳筛选跟踪结果，也可以使用高级筛选器通过事件字段和操作构造筛选条件。 时间筛选器和高级筛选器之间存在逻辑与关系。  
  
#### <a name="to-create-a-filter"></a>创建筛选器  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在跟踪结果窗口中选择要筛选的结果，然后在扩展事件工具栏上单击 **“筛选器”** 按钮。  
  
3.  在 **“筛选器”** 对话框中，选择 **“设置时间筛选器”** 以通过拖动滑动条设置时间线来设置时间筛选器。 请注意，在移动滑动条时，时间框会显示相应的时间值。 您还可以在时间框中输入时间或从下拉列表中选择时间。 请注意，在输入时间时，左侧时间滑块将相应地移动。  
  
4.  在 **“其他筛选器”** 部分中，应用筛选条件，然后单击 **“应用”**。 创建完筛选器后，请单击 **“确定”**。  
  
 特殊情况是当事件字段与操作具有相同名称时。 这样的示例为 session_id。 有几个包含 session_id 字段的事件，您还可以添加 session_id 操作。 收集这些信息，但是扩展事件探查器显示网格使用以下逻辑。  
  
-   只有列（此情况下为 session_id）的一个副本显示在显示网格中。  
  
-   如果数据中同时存在字段和操作，则显示字段值。  
  
-   如果数据中只存在字段或操作，则显示字段或操作。  
  
-   如果操作和字段都不存在，则显示 NULL。  
  
##  <a name="search-for-text-in-columns"></a><a name="Search"></a>在列中搜索文本  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在扩展事件工具栏上，单击 **“查找”** 按钮。  
  
3.  在 **“在扩展事件中查找”** 对话框的 **“查找内容”** 框中，输入要搜索的文本。  
  
     可以从下拉列表中选择最近搜索过的 20 个字符串之一。  
  
4.  在 **“查找范围”** 框中，从下拉列表中选择要搜索指定文本的位置。 使用以下选项进行搜索：  
  
    -   **表列**。 使用此选项可在跟踪窗口中搜索所有可见列。  
  
    -   **详细信息**。 使用此选项可搜索在打开 "**在扩展事件中查找**" 对话框之前已选择的跟踪窗口中 (升级和未升级) 的所有列。  
  
    -   **\<Event column name>**. 使用此选项可在下拉列表的特定事件列中进行搜索。  
  
5.  使用以下选项可指定所需的定义搜索的方式：  
  
    1.  **区分大小写**。 使用此选项可显示与 **“查找内容”** 框中输入文本的内容和大小写均匹配的搜索结果。  
  
    2.  **全字匹配**。 使用此选项可仅显示与输入文本完全匹配的搜索结果。  
  
    3.  **向上搜索**。 使用此选项可从光标位置向结果开头搜索。  
  
    4.  **使用**。 使用此选项可解释 "**查找内容**" 框中输入的特殊字符和正则表达式。 特殊字符包括通配符 (*) 和 (?)，用于表示一个或多个字符。 正则表达式是用于定义搜索文本的模式的特殊表示法。  
  
6.  单击 **“查找下一个”** 可搜索在 **“查找内容”** 框中输入的下一个文本。  
  
##  <a name="change-the-display-settings"></a><a name="ChangeDisplay"></a>更改显示设置  
 您可以将跟踪结果的列信息（列顺序、合并列和列宽）和筛选器信息保存到扩展事件显示设置文件（.viewsetting 文件）中。 在保存该文件后，您可以将其应用于跟踪结果中以便更改视图。  
  
#### <a name="to-change-the-display-settings"></a>更改显示设置  
  
1.  打开一个 .XEL 文件以便查看跟踪结果。  
  
    > [!NOTE]  
    >   您还可以右键单击会话名称，然后选择 **“查看实时数据”**。  
  
2.  在跟踪结果窗口中的扩展事件工具栏或菜单上，选择 **“显示设置”**。  
  
3.  从下拉列表中选择以下选项之一：  
  
    -   **另存为**。 将跟踪结果的列和筛选器信息保存到 .viewsetting 文件中。  
  
    -   **打开**。 打开现有的 .viewsetting 文件。  
  
    -   **打开最近的**。 打开最近保存的 .viewsetting 文件。  
  
  
