---
title: Analysis Services 数据挖掘)  (缺少值 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- attributes [data mining]
- MISSING_VALUE_SUBSTITUTION
- MissingValueSubstitution property
- MISSING_VALUE_SUBSTITUTION parameter
- null values [Analysis Services]
- coding [Data Mining]
ms.assetid: 2b34abdc-7ed4-4ec1-8780-052a704d6dbe
author: minewiskan
ms.author: owend
ms.openlocfilehash: 91bc709d61c786c165711cfdb31ff696456997ff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87587642"
---
# <a name="missing-values-analysis-services---data-mining"></a><span data-ttu-id="32edc-102">Missing 值（Analysis Services - 数据挖掘）</span><span class="sxs-lookup"><span data-stu-id="32edc-102">Missing Values (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="32edc-103">正确处理“Missing 值”  \*\* 是有效建模的重要组成部分。</span><span class="sxs-lookup"><span data-stu-id="32edc-103">Handling  *missing values* correctly is an important part of effective modeling.</span></span> <span data-ttu-id="32edc-104">本节说明什么是 Missing 值，并介绍在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 中提供的、用于处理在生成数据挖掘结构和挖掘模型时的 Missing 值的功能。</span><span class="sxs-lookup"><span data-stu-id="32edc-104">This section explains what missing values are, and describes the features provided in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to work with missing values when building data mining structures and mining models.</span></span>  
  
## <a name="definition-of-missing-values-in-data-mining"></a><span data-ttu-id="32edc-105">数据挖掘中 Missing 值的定义</span><span class="sxs-lookup"><span data-stu-id="32edc-105">Definition of Missing Values in Data Mining</span></span>  
 <span data-ttu-id="32edc-106">Missing 值可表示很多不同情况：</span><span class="sxs-lookup"><span data-stu-id="32edc-106">A missing value can signify a number of different things.</span></span> <span data-ttu-id="32edc-107">可能表示字段不适用，事件未发生或者数据不可用。</span><span class="sxs-lookup"><span data-stu-id="32edc-107">Perhaps the field was not applicable, the event did not happen, or the data was not available.</span></span> <span data-ttu-id="32edc-108">可能输入数据的人不知道正确的值，或不介意字段未填充。</span><span class="sxs-lookup"><span data-stu-id="32edc-108">It could be that the person who entered the data did not know the right value, or did not care if a field was not filled in.</span></span>  
  
 <span data-ttu-id="32edc-109">但是，在很多数据挖掘方案中 Missing 值提供了重要的信息。</span><span class="sxs-lookup"><span data-stu-id="32edc-109">However, there are many data mining scenarios in which missing values provide important information.</span></span> <span data-ttu-id="32edc-110">Missing 值的含义主要取决于上下文。</span><span class="sxs-lookup"><span data-stu-id="32edc-110">The meaning of the missing values depends largely on context.</span></span> <span data-ttu-id="32edc-111">例如，发票列表中日期的 Missing 值的含义与指示雇员雇用日期的列中缺少日期有很大区别。</span><span class="sxs-lookup"><span data-stu-id="32edc-111">For example, a missing value for the date in a list of invoices has a meaning substantially different from the lack of a date in column that indicates an employee hire date.</span></span> <span data-ttu-id="32edc-112">通常， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 会将 Missing 值处理为信息性内容，并调整概率以将 Missing 值包括到其计算之中。</span><span class="sxs-lookup"><span data-stu-id="32edc-112">Generally, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] treats missing values as informative and adjusts the probabilities to incorporate the missing values into its calculations.</span></span> <span data-ttu-id="32edc-113">这样做即可确保模型平衡，又避免过多地偏重于现有的事例。</span><span class="sxs-lookup"><span data-stu-id="32edc-113">By doing so, you can ensure that models are balanced and do not weight existing cases too heavily.</span></span>  
  
 <span data-ttu-id="32edc-114">因此， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 提供了两种截然不同的机制用于管理和计算 Missing 值。</span><span class="sxs-lookup"><span data-stu-id="32edc-114">Therefore, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] provides two distinctly different mechanisms for managing and calculating missing values.</span></span> <span data-ttu-id="32edc-115">第一种方法在挖掘结构级别控制 Null 值的处理。</span><span class="sxs-lookup"><span data-stu-id="32edc-115">The first method controls the handling of nulls at the level of the mining structure.</span></span> <span data-ttu-id="32edc-116">第二种方法的每个算法的实现均与第一种方法不同，但是通常定义在允许 Null 值的模型中如何处理和计入 Missing 值。</span><span class="sxs-lookup"><span data-stu-id="32edc-116">The second method differs in implementation for each algorithm, but generally defines how missing values are processed and counted in models that permit null values.</span></span>  
  
## <a name="specifying-handling-of-nulls"></a><span data-ttu-id="32edc-117">指定 Null 值的处理</span><span class="sxs-lookup"><span data-stu-id="32edc-117">Specifying Handling of Nulls</span></span>  
 <span data-ttu-id="32edc-118">在您的数据源中，可能以很多方式表示 Missing 值：为 Null、为电子表格中的空单元、为 N/A 值或其他代码，或为像 9999 这样的自定义值。</span><span class="sxs-lookup"><span data-stu-id="32edc-118">In your data source, missing values might be represented in many ways: as nulls, as empty cells in a spreadsheet, as the value N/A or some other code, or as an artificial value such as 9999.</span></span> <span data-ttu-id="32edc-119">但是，为了进行数据挖掘，只有 Null 值被视为 Missing 值。</span><span class="sxs-lookup"><span data-stu-id="32edc-119">However, for purposes of data mining, only nulls are considered missing values.</span></span> <span data-ttu-id="32edc-120">如果您的数据包含不是 Null 的占位符值，它们可能影响模型的结果，因此，您应用 Null 替换它们或在可能的情况下推断正确的值。</span><span class="sxs-lookup"><span data-stu-id="32edc-120">If your data contains placeholder values instead of nulls, they can affect the results of the model, so you should replace them with nulls or infer correct values if possible.</span></span> <span data-ttu-id="32edc-121">有许多工具可以用来推断并填充适当的值，例如，SQL Server Integration Services 中的查找转换或数据事件探查任务，或者 Excel 数据挖掘外接程序提供的“从示例填充”工具。</span><span class="sxs-lookup"><span data-stu-id="32edc-121">There are a variety of tools that you can use to infer and fill in appropriate values, such as the Lookup transformation or the Data Profiler task in SQL Server Integration Services, or the Fill By Example tool provided in the Data Mining Add-Ins for Excel.</span></span>  
  
 <span data-ttu-id="32edc-122">如果正在建模的任务指定某列一定不能有 Missing 值，则应当在定义挖掘结构时将 `NOT_NULL` 建模标志应用到该列。</span><span class="sxs-lookup"><span data-stu-id="32edc-122">If the task that you are modeling specifies that a column must never have missing values, you should apply the `NOT_NULL` modeling flag to the column when you define the mining structure.</span></span> <span data-ttu-id="32edc-123">此标志指示如果某个事例不具有适当值，处理将失败。</span><span class="sxs-lookup"><span data-stu-id="32edc-123">This flag indicates that processing should fail if a case does not have an appropriate value.</span></span> <span data-ttu-id="32edc-124">如果处理模型时出现此错误，您可以记录该错误并采取措施来更正为该模型提供的数据。</span><span class="sxs-lookup"><span data-stu-id="32edc-124">If this error occurs when processing a model, you can log the error and take steps to correct the data that is supplied to the model.</span></span>  
  
## <a name="calculation-of-the-missing-state"></a><span data-ttu-id="32edc-125">Missing 状态的计算</span><span class="sxs-lookup"><span data-stu-id="32edc-125">Calculation of the Missing State</span></span>  
 <span data-ttu-id="32edc-126">对于数据挖掘算法，Missing 值为信息性内容。</span><span class="sxs-lookup"><span data-stu-id="32edc-126">To the data mining algorithm, missing values are informative.</span></span> <span data-ttu-id="32edc-127">在事例表中，`Missing` 与其他任何值一样为有效状态。</span><span class="sxs-lookup"><span data-stu-id="32edc-127">In case tables, `Missing` is a valid state like any other.</span></span> <span data-ttu-id="32edc-128">此外，数据挖掘模型还可以使用其他值来预测某个值是否为 Missing 值。</span><span class="sxs-lookup"><span data-stu-id="32edc-128">Moreover, a data mining model can use other values to predict whether a value is missing.</span></span> <span data-ttu-id="32edc-129">也就是说，值缺失这种情况不会被视为错误。</span><span class="sxs-lookup"><span data-stu-id="32edc-129">In other words, the fact that a value is missing is not an error.</span></span>  
  
 <span data-ttu-id="32edc-130">创建挖掘模型时，对于所有离散列，`Missing` 状态会自动添加到模型中。</span><span class="sxs-lookup"><span data-stu-id="32edc-130">When you create a mining model, a `Missing` state is automatically added to the model for all discrete columns.</span></span> <span data-ttu-id="32edc-131">例如，如果输入列 [性别] 包含两个可能的值（男和女），将自动添加第三个值来表示 `Missing` 值，而且显示该列所有值分布的直方图将始终包含一个具有 `Missing` 值的事例的计数。</span><span class="sxs-lookup"><span data-stu-id="32edc-131">For example, if the input column [Gender] contains two possible values, Male and Female, a third value is automatically added to represent the `Missing` value, and the histogram that shows the distribution of all values for the column always includes a count of the cases with `Missing` values.</span></span> <span data-ttu-id="32edc-132">如果性别列不缺少任何值，则直方图显示发现 0 个事例的状态为 Missing。</span><span class="sxs-lookup"><span data-stu-id="32edc-132">If the Gender column is not missing any values, the histogram shows that the Missing state is found in 0 cases.</span></span>  
  
 <span data-ttu-id="32edc-133">当您认为数据可能不具有所有可能值的示例，并且不希望仅仅因为数据中没有任何示例而使模型排除该可能性时，则默认包含 `Missing` 状态很有必要。</span><span class="sxs-lookup"><span data-stu-id="32edc-133">The rationale for including the `Missing` state by default becomes clear when you consider that your data might not have examples of all possible values, and you would not want the model to exclude the possibility just because there was no example in the data.</span></span> <span data-ttu-id="32edc-134">例如，即使某商店的销售数据显示所有购买某种产品的客户恰巧都为女性，您也不希望创建一个预测只有女性才可能购买此产品的模型。</span><span class="sxs-lookup"><span data-stu-id="32edc-134">For example, if sales data for a store showed that all customers who purchased a certain product happened to be women, you would not want to create a model that predicts that only women could purchase the product.</span></span> <span data-ttu-id="32edc-135">相反，会为 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 额外的未知值（称为）添加占位符， `Missing` 以适应可能的其他状态。</span><span class="sxs-lookup"><span data-stu-id="32edc-135">Instead, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] adds a placeholder for the extra unknown value, called `Missing`, as a way of accommodating possible other states.</span></span>  
  
 <span data-ttu-id="32edc-136">例如，下表显示了为自行车购买者教程创建的决策树模型中的（所有）节点的值的分布。</span><span class="sxs-lookup"><span data-stu-id="32edc-136">For example, the following table shows the distribution of values for the (All) node in the decision tree model created for the Bike Buyer tutorial.</span></span> <span data-ttu-id="32edc-137">在示例方案中，[Bike Buyer] 列为可预测属性，其中，1 表示“是”，0 表示“否”。</span><span class="sxs-lookup"><span data-stu-id="32edc-137">In the example scenario, the [Bike Buyer] column is the predictable attribute, where 1 indicates "Yes" and 0 indicates "No".</span></span>  
  
|<span data-ttu-id="32edc-138">值</span><span class="sxs-lookup"><span data-stu-id="32edc-138">Value</span></span>|<span data-ttu-id="32edc-139">案例</span><span class="sxs-lookup"><span data-stu-id="32edc-139">Cases</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="32edc-140">0</span><span class="sxs-lookup"><span data-stu-id="32edc-140">0</span></span>|<span data-ttu-id="32edc-141">9296</span><span class="sxs-lookup"><span data-stu-id="32edc-141">9296</span></span>|  
|<span data-ttu-id="32edc-142">1</span><span class="sxs-lookup"><span data-stu-id="32edc-142">1</span></span>|<span data-ttu-id="32edc-143">9098</span><span class="sxs-lookup"><span data-stu-id="32edc-143">9098</span></span>|  
|<span data-ttu-id="32edc-144">Missing</span><span class="sxs-lookup"><span data-stu-id="32edc-144">Missing</span></span>|<span data-ttu-id="32edc-145">0</span><span class="sxs-lookup"><span data-stu-id="32edc-145">0</span></span>|  
  
 <span data-ttu-id="32edc-146">此分布显示大约一半的客户已经购买了自行车，而一半的客户还没有购买自行车。</span><span class="sxs-lookup"><span data-stu-id="32edc-146">This distribution shows that about half of the customers have purchased a bike, and half have not.</span></span> <span data-ttu-id="32edc-147">此特定数据集十分清晰；因此，每个事例的 [Bike Buyer] 列中都有一个值，并且 `Missing` 值的计数为 0。</span><span class="sxs-lookup"><span data-stu-id="32edc-147">This particular data set is very clean; therefore, every case has a value in the [Bike Buyer] column, and the count of `Missing` values is 0.</span></span> <span data-ttu-id="32edc-148">但是，如果任何事例在 [自行车购买者] 字段中都为 null，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 会将该行计为具有值的事例 `Missing` 。</span><span class="sxs-lookup"><span data-stu-id="32edc-148">However, if any case had a null in the [Bike Buyer] field, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would count that row as a case with a `Missing` value.</span></span>  
  
 <span data-ttu-id="32edc-149">如果输入为连续的列，则模型将属性的两个可能的状态 `Existing` 和 `Missing` 排列成表格报表的形式。</span><span class="sxs-lookup"><span data-stu-id="32edc-149">If the input is a continuous column, the model tabulates two possible states for the attribute: `Existing` and `Missing`.</span></span> <span data-ttu-id="32edc-150">也就是说，该列或者包含某种数值数据类型的值，或者不包含任何值。</span><span class="sxs-lookup"><span data-stu-id="32edc-150">In other words, either the column contains a value of some numeric data type, or it contains no value.</span></span> <span data-ttu-id="32edc-151">对于有值的事例，模型会计算平均值、标准偏差以及其他有意义的统计。</span><span class="sxs-lookup"><span data-stu-id="32edc-151">For cases that have a value, the model calculates mean, standard deviation, and other meaningful statistics.</span></span> <span data-ttu-id="32edc-152">对于没有值的事例，模型将提供 `Missing` 值的计数并相应调整预测。</span><span class="sxs-lookup"><span data-stu-id="32edc-152">For cases that have no value, the model provides a count of the `Missing` vales and adjusts predictions accordingly.</span></span> <span data-ttu-id="32edc-153">调整预测的方法因算法而异，下面一节将对其进行介绍。</span><span class="sxs-lookup"><span data-stu-id="32edc-153">The method for adjusting the prediction differs depending on the algorithm and is described in the following section.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="32edc-154">对于嵌套表中的属性，Missing 值为非信息性内容。</span><span class="sxs-lookup"><span data-stu-id="32edc-154">For attributes in a nested table, missing values are not informative.</span></span> <span data-ttu-id="32edc-155">例如，如果某个客户未购买某种产品，则嵌套 **Products** 表中将不会有对应该产品的行，挖掘模型也不会为该缺少的产品创建属性。</span><span class="sxs-lookup"><span data-stu-id="32edc-155">For example, if a customer has not purchased a product, the nested **Products** table would not have a row corresponding to that product, and the mining model would not create an attribute for the missing product.</span></span> <span data-ttu-id="32edc-156">但是，如果您对未购买某种产品的客户感兴趣，则可以创建一个模型，在该模型中对嵌套表中的不存在的产品进行筛选，其方法是在模型筛选器中使用 NOT EXISTS 语句。</span><span class="sxs-lookup"><span data-stu-id="32edc-156">However, if you are interested in customers who have not purchased certain products, you can create a model that is filtered on the non-existence of the products in the nested table, by using a NOT EXISTS statement in the model filter.</span></span> <span data-ttu-id="32edc-157">有关详细信息，请参阅 [对挖掘模型应用筛选器](apply-a-filter-to-a-mining-model.md)。</span><span class="sxs-lookup"><span data-stu-id="32edc-157">For more information, see [Apply a Filter to a Mining Model](apply-a-filter-to-a-mining-model.md).</span></span>  
  
## <a name="adjusting-probability-for-missing-states"></a><span data-ttu-id="32edc-158">调整 Missing 状态的概率</span><span class="sxs-lookup"><span data-stu-id="32edc-158">Adjusting Probability for Missing States</span></span>  
 <span data-ttu-id="32edc-159">除了对值进行计数外， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 还计算整个数据集中的任何值的概率。</span><span class="sxs-lookup"><span data-stu-id="32edc-159">In addition to counting values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] calculates the probability of any value across the data set.</span></span> <span data-ttu-id="32edc-160">这对于 `Missing` 值同样适用。</span><span class="sxs-lookup"><span data-stu-id="32edc-160">The same is true for the `Missing` value.</span></span> <span data-ttu-id="32edc-161">例如，下表显示了前面示例中事例的概率：</span><span class="sxs-lookup"><span data-stu-id="32edc-161">For example, the following table shows the probabilities for the cases in the previous example:</span></span>  
  
|<span data-ttu-id="32edc-162">值</span><span class="sxs-lookup"><span data-stu-id="32edc-162">Value</span></span>|<span data-ttu-id="32edc-163">案例</span><span class="sxs-lookup"><span data-stu-id="32edc-163">Cases</span></span>|<span data-ttu-id="32edc-164">概率</span><span class="sxs-lookup"><span data-stu-id="32edc-164">Probability</span></span>|  
|-----------|-----------|-----------------|  
|<span data-ttu-id="32edc-165">0</span><span class="sxs-lookup"><span data-stu-id="32edc-165">0</span></span>|<span data-ttu-id="32edc-166">9296</span><span class="sxs-lookup"><span data-stu-id="32edc-166">9296</span></span>|<span data-ttu-id="32edc-167">50.55%</span><span class="sxs-lookup"><span data-stu-id="32edc-167">50.55%</span></span>|  
|<span data-ttu-id="32edc-168">1</span><span class="sxs-lookup"><span data-stu-id="32edc-168">1</span></span>|<span data-ttu-id="32edc-169">9098</span><span class="sxs-lookup"><span data-stu-id="32edc-169">9098</span></span>|<span data-ttu-id="32edc-170">49.42%</span><span class="sxs-lookup"><span data-stu-id="32edc-170">49.42%</span></span>|  
|<span data-ttu-id="32edc-171">Missing</span><span class="sxs-lookup"><span data-stu-id="32edc-171">Missing</span></span>|<span data-ttu-id="32edc-172">0</span><span class="sxs-lookup"><span data-stu-id="32edc-172">0</span></span>|<span data-ttu-id="32edc-173">0.03%</span><span class="sxs-lookup"><span data-stu-id="32edc-173">0.03%</span></span>|  
  
 <span data-ttu-id="32edc-174">当事例个数为 0 时，计算得出的 `Missing` 值的概率为 0.03%，这好像有些奇怪。</span><span class="sxs-lookup"><span data-stu-id="32edc-174">It may seem odd that the probability of the `Missing` value is calculated as 0.03%, when the number of cases is 0.</span></span> <span data-ttu-id="32edc-175">实际上，此行为是设计造成的，目的是通过这种调整使模型可以适当地处理未知值。</span><span class="sxs-lookup"><span data-stu-id="32edc-175">In fact, this behavior is by design, and represents an adjustment that lets the model handle unknown values gracefully.</span></span>  
  
 <span data-ttu-id="32edc-176">通常，概率计算如下：良好的事例除以所有可能的事例。</span><span class="sxs-lookup"><span data-stu-id="32edc-176">In general, probability is calculated as the favorable cases divided by all possible cases.</span></span> <span data-ttu-id="32edc-177">在此示例中，算法计算符合某个特定条件（[Bike Buyer] = 1 或 [Bike Buyer] = 0）的事例的总和，并用该数除以总行数。</span><span class="sxs-lookup"><span data-stu-id="32edc-177">In this example, the algorithm computes the sum of the cases that meet a particular condition ([Bike Buyer] = 1, or [Bike Buyer] = 0), and divides that number by the total count of rows.</span></span> <span data-ttu-id="32edc-178">但是，为了将 `Missing` 事例考虑在内，将 1 添加到所有可能的事例数中。</span><span class="sxs-lookup"><span data-stu-id="32edc-178">However, to account for the `Missing` cases, 1 is added to the number of all possible cases.</span></span> <span data-ttu-id="32edc-179">因此，未知事例的概率不再为零，而是一个非常小的数，表示此状态仅仅是不大可能的状态，但不是不可能的状态。</span><span class="sxs-lookup"><span data-stu-id="32edc-179">As a result, the probability for the unknown case is no longer zero, but a very small number, indicating that the state is merely improbable, not impossible.</span></span>  
  
 <span data-ttu-id="32edc-180">较小的 `Missing` 值的添加不会更改预测因子的输出；但是，对于历史数据不包含所有可能结果的情况，使用该值可以改善建模。</span><span class="sxs-lookup"><span data-stu-id="32edc-180">The addition of the small `Missing` value does not change the outcome of the predictor; however, it enables better modeling in scenarios where the historical data does not include all possible outcomes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="32edc-181">各个数据挖掘访问接口处理 Missing 值的方式不同。</span><span class="sxs-lookup"><span data-stu-id="32edc-181">Data mining providers differ in the way they handle missing values.</span></span> <span data-ttu-id="32edc-182">例如，某些访问接口假定嵌套列中缺少的数据为稀疏表示方式，但却假定非嵌套列中缺少的数据为随机缺少。</span><span class="sxs-lookup"><span data-stu-id="32edc-182">For example, some providers assume that missing data in a nested column is sparse representation, but that missing data in a non-nested column is missing at random.</span></span>  
  
 <span data-ttu-id="32edc-183">如果确定所有的结果均在数据中指定，并需要防止概率调整，则应对挖掘结构中的列设置 NOT_NULL 建模标志。</span><span class="sxs-lookup"><span data-stu-id="32edc-183">If you are certain that all outcomes are specified in your data and want to prevent probabilities from being adjusted, you should set the NOT_NULL modeling flag on the column in the mining structure.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="32edc-184">每个算法（包括可能从第三方插件中获取的自定义算法）都可以用不同的方式处理 Missing 值。</span><span class="sxs-lookup"><span data-stu-id="32edc-184">Each algorithm, including custom algorithms that you may have obtained from a third-party plug-in, can handle missing values differently.</span></span>  
  
### <a name="special-handling-of-missing-values-in-decision-tree-models"></a><span data-ttu-id="32edc-185">决策树模型中 Missing 值的特殊处理</span><span class="sxs-lookup"><span data-stu-id="32edc-185">Special Handling of Missing Values in Decision Tree Models</span></span>  
 <span data-ttu-id="32edc-186">Microsoft 决策树算法计算 Missing 值的概率的方法不同于其他算法。</span><span class="sxs-lookup"><span data-stu-id="32edc-186">The Microsoft Decision Trees algorithm calculates probabilities for missing values differently than in other algorithms.</span></span> <span data-ttu-id="32edc-187">不仅仅向事例总数加 1，该决策树算法还使用稍有差别的公式来针对 `Missing` 状态进行调整。</span><span class="sxs-lookup"><span data-stu-id="32edc-187">Instead of just adding 1 to the total number of cases, the decision trees algorithm adjusts for the `Missing` state by using a slightly different formula.</span></span>  
  
 <span data-ttu-id="32edc-188">在决策树模型中，`Missing` 状态的概率按如下公式进行计算：</span><span class="sxs-lookup"><span data-stu-id="32edc-188">In a decision tree model, the probability of the `Missing` state is calculated as follows:</span></span>  
  
 <span data-ttu-id="32edc-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span><span class="sxs-lookup"><span data-stu-id="32edc-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span></span>  
  
 <span data-ttu-id="32edc-190">此外，在 [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)]中，决策树算法提供了额外的调整，可以帮助该算法补偿模型上存在的筛选器，这可能导致在定型期间排除许多状态。</span><span class="sxs-lookup"><span data-stu-id="32edc-190">Moreover, in [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)], the Decision Trees algorithm provides an additional adjustment that helps the algorithm compensate for the presence of filters on the model, which may result in many states to be excluded during training.</span></span>  
  
 <span data-ttu-id="32edc-191">在 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]中，如果在定型期间存在某种状态，但是恰巧在某个节点中有零支持，则将进行标准调整。</span><span class="sxs-lookup"><span data-stu-id="32edc-191">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], if a state is present during training but just happens to have zero support in a certain node, the standard adjustment is made.</span></span> <span data-ttu-id="32edc-192">但是，如果在定型期间从未遇到某种状态，该算法会将其概率精确设置为零。</span><span class="sxs-lookup"><span data-stu-id="32edc-192">However, if a state is never encountered during training, the algorithm sets the probability to exactly zero.</span></span> <span data-ttu-id="32edc-193">此项调整不仅适用于 `Missing` 状态，还适用于在定型数据中存在、但模型筛选结果具有零支持的其他状态。</span><span class="sxs-lookup"><span data-stu-id="32edc-193">This adjustment applies not only to the `Missing` state, but also to other states that exist in the training data but have zero support as result of model filtering.</span></span>  
  
 <span data-ttu-id="32edc-194">此额外调整产生以下公式：</span><span class="sxs-lookup"><span data-stu-id="32edc-194">This additional adjustment results in the following formula:</span></span>  
  
 <span data-ttu-id="32edc-195">StateProbability = 0.0（如果在定型集中该状态具有 0 支持）</span><span class="sxs-lookup"><span data-stu-id="32edc-195">StateProbability = 0.0 if that state has 0 support in the training set</span></span>  
  
 <span data-ttu-id="32edc-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span><span class="sxs-lookup"><span data-stu-id="32edc-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span></span>  
  
 <span data-ttu-id="32edc-197">此调整的净效果是保持树的稳定性。</span><span class="sxs-lookup"><span data-stu-id="32edc-197">The net effect of this adjustment is to maintain the stability of the tree.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="32edc-198">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="32edc-198">Related Tasks</span></span>  
 <span data-ttu-id="32edc-199">下列主题提供有关如何处理 Missing 值的详细信息。</span><span class="sxs-lookup"><span data-stu-id="32edc-199">The following topics provide more information about how to handle missing values.</span></span>  
  
|<span data-ttu-id="32edc-200">任务</span><span class="sxs-lookup"><span data-stu-id="32edc-200">Tasks</span></span>|<span data-ttu-id="32edc-201">链接</span><span class="sxs-lookup"><span data-stu-id="32edc-201">Links</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="32edc-202">将标志添加到各个模型列来控制对 Missing 值的处理</span><span class="sxs-lookup"><span data-stu-id="32edc-202">Add flags to individual model columns to control handling of missing values</span></span>|[<span data-ttu-id="32edc-203">查看或更改建模标志（数据挖掘）</span><span class="sxs-lookup"><span data-stu-id="32edc-203">View or Change Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)|  
|<span data-ttu-id="32edc-204">设置挖掘模型的属性来控制对 Missing 值的处理</span><span class="sxs-lookup"><span data-stu-id="32edc-204">Set properties on a mining model to control handling of missing values</span></span>|[<span data-ttu-id="32edc-205">更改挖掘模型的属性</span><span class="sxs-lookup"><span data-stu-id="32edc-205">Change the Properties of a Mining Model</span></span>](change-the-properties-of-a-mining-model.md)|  
|<span data-ttu-id="32edc-206">了解如何在 DMX 中指定建模标志</span><span class="sxs-lookup"><span data-stu-id="32edc-206">Learn how to specify modeling flags in DMX</span></span>|[<span data-ttu-id="32edc-207">建模标志 (DMX)</span><span class="sxs-lookup"><span data-stu-id="32edc-207">Modeling Flags &#40;DMX&#41;</span></span>](/sql/dmx/modeling-flags-dmx)|  
|<span data-ttu-id="32edc-208">更改挖掘结构处理 Missing 值的方式</span><span class="sxs-lookup"><span data-stu-id="32edc-208">Alter the way that the mining structure handles missing values</span></span>|[<span data-ttu-id="32edc-209">更改挖掘结构的属性</span><span class="sxs-lookup"><span data-stu-id="32edc-209">Change the Properties of a Mining Structure</span></span>](change-the-properties-of-a-mining-structure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="32edc-210">另请参阅</span><span class="sxs-lookup"><span data-stu-id="32edc-210">See Also</span></span>  
 <span data-ttu-id="32edc-211">[挖掘模型内容 &#40;Analysis Services 数据挖掘&#41;](mining-model-content-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="32edc-211">[Mining Model Content &#40;Analysis Services - Data Mining&#41;](mining-model-content-analysis-services-data-mining.md) </span></span>  
 [<span data-ttu-id="32edc-212">建模标志（数据挖掘）</span><span class="sxs-lookup"><span data-stu-id="32edc-212">Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)  
  
  
