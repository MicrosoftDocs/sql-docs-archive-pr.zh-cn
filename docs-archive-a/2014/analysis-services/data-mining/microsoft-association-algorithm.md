---
title: Microsoft 关联算法 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- MinimumProbability property
- itemsets [Analysis Services]
- MaximumItemsetCount property
- MinimumSupport property
- OPTIMIZED_PREDICTION_COUNT
- OptimizedPredictionCount property
- MaximumSupport property
- MINIMUM_PROBABILITY
- algorithms [data mining]
- association algorithms [Analysis Services]
- rules [Data Mining]
- association rules
- MinimumItemsetSize property
- market basket analysis [Analysis Services]
- associations [Analysis Services]
- MINIMUM_SUPPORT
- MAXIMUM_SUPPORT
- MINIMUM_ITEMSET_SIZE
- MaximumItemsetSize property
ms.assetid: 8b6b8247-62f9-4f6f-b1af-d01dab290e4c
author: minewiskan
ms.author: owend
ms.openlocfilehash: cba1ded76def941da520b546445b8634dd06f349
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87586012"
---
# <a name="microsoft-association-algorithm"></a><span data-ttu-id="427e3-102">Microsoft 关联算法</span><span class="sxs-lookup"><span data-stu-id="427e3-102">Microsoft Association Algorithm</span></span>
  <span data-ttu-id="427e3-103">[!INCLUDE[msCoName](../../includes/msconame-md.md)] 关联算法是指 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 提供的关联算法，对建议引擎非常有用。</span><span class="sxs-lookup"><span data-stu-id="427e3-103">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Association algorithm is an association algorithm provided by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] that is useful for recommendation engines.</span></span> <span data-ttu-id="427e3-104">建议引擎根据客户已购买的项或者客户已对其表现出兴趣的项向他们推荐产品。</span><span class="sxs-lookup"><span data-stu-id="427e3-104">A recommendation engine recommends products to customers based on items they have already bought, or in which they have indicated an interest.</span></span> <span data-ttu-id="427e3-105">[!INCLUDE[msCoName](../../includes/msconame-md.md)] 关联算法对市场篮分析也非常有用。</span><span class="sxs-lookup"><span data-stu-id="427e3-105">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Association algorithm is also useful for market basket analysis.</span></span> <span data-ttu-id="427e3-106">有关市场篮分析的示例，请参阅数据挖掘教程中的[第3课：生成市场篮方案 &#40;中级数据挖掘教程&#41;](../../tutorials/lesson-3-building-a-market-basket-scenario-intermediate-data-mining-tutorial.md) 。</span><span class="sxs-lookup"><span data-stu-id="427e3-106">For an example of a market basket analysis, see [Lesson 3: Building a Market Basket Scenario &#40;Intermediate Data Mining Tutorial&#41;](../../tutorials/lesson-3-building-a-market-basket-scenario-intermediate-data-mining-tutorial.md) in the Data Mining Tutorial.</span></span>

 <span data-ttu-id="427e3-107">关联模型基于包含各事例的标识符及各事例所包含项的标识符的数据集生成。</span><span class="sxs-lookup"><span data-stu-id="427e3-107">Association models are built on datasets that contain identifiers both for individual cases and for the items that the cases contain.</span></span> <span data-ttu-id="427e3-108">事例中的一组项称为“项集 \*\*”。</span><span class="sxs-lookup"><span data-stu-id="427e3-108">A group of items in a case is called an *itemset*.</span></span> <span data-ttu-id="427e3-109">关联模型由一系列项集和说明这些项在事例中如何分组的规则组成。</span><span class="sxs-lookup"><span data-stu-id="427e3-109">An association model consists of a series of itemsets and the rules that describe how those items are grouped together within the cases.</span></span> <span data-ttu-id="427e3-110">算法标识的规则可用于根据客户购物车中已有的项来预测客户将来可能购买的产品。</span><span class="sxs-lookup"><span data-stu-id="427e3-110">The rules that the algorithm identifies can be used to predict a customer's likely future purchases, based on the items that already exist in the customer's shopping cart.</span></span> <span data-ttu-id="427e3-111">以下关系图显示了项集中的一系列规则。</span><span class="sxs-lookup"><span data-stu-id="427e3-111">The following diagram shows a series of rules in an itemset.</span></span>

 <span data-ttu-id="427e3-112">![关联模型的一组规则](../media/association.gif "关联模型的一组规则")</span><span class="sxs-lookup"><span data-stu-id="427e3-112">![A set of rules for an association model](../media/association.gif "A set of rules for an association model")</span></span>

 <span data-ttu-id="427e3-113">正如该关系图中所示， [!INCLUDE[msCoName](../../includes/msconame-md.md)] 关联算法可能会在数据集中找到许多规则。</span><span class="sxs-lookup"><span data-stu-id="427e3-113">As the diagram illustrates, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Association algorithm can potentially find many rules within a dataset.</span></span> <span data-ttu-id="427e3-114">该算法使用两个参数（support 和 probability）来说明项集以及该算法生成的规则。</span><span class="sxs-lookup"><span data-stu-id="427e3-114">The algorithm uses two parameters, support and probability, to describe the itemsets and rules that it generates.</span></span> <span data-ttu-id="427e3-115">例如，假定 X 和 Y 表示购物车中的两个项，则 support 参数是数据集中同时包含这两个项（X 和 Y）的事例的数目。通过将 support 参数与用户定义的 *MINIMUM_SUPPORT* 和 *MAXIMUM_SUPPORT,* 参数结合使用，该算法可控制生成的项集数。</span><span class="sxs-lookup"><span data-stu-id="427e3-115">For example, if X and Y represent two items that could be in a shopping cart, the support parameter is the number of cases in the dataset that contain the combination of items, X and Y. By using the support parameter in combination with the user-defined parameters, *MINIMUM_SUPPORT* and *MAXIMUM_SUPPORT,* the algorithm controls the number of itemsets that are generated.</span></span> <span data-ttu-id="427e3-116">probability 参数（也称为置信度\*\*）表示数据集中既包含 X 也包含 Y 的一部分事例。通过将 probability 参数与 *MINIMUM_PROBABILITY* 参数结合使用，该算法可控制生成的规则数。</span><span class="sxs-lookup"><span data-stu-id="427e3-116">The probability parameter, also named *confidence*, represents the fraction of cases in the dataset that contain X and that also contain Y. By using the probability parameter in combination with the *MINIMUM_PROBABILITY* parameter, the algorithm controls the number of rules that are generated.</span></span>

## <a name="example"></a><span data-ttu-id="427e3-117">示例</span><span class="sxs-lookup"><span data-stu-id="427e3-117">Example</span></span>
 <span data-ttu-id="427e3-118">[!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] Cycle 公司正在重新设计其网站的功能。</span><span class="sxs-lookup"><span data-stu-id="427e3-118">The [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] Cycle company is redesigning the functionality of its Web site.</span></span> <span data-ttu-id="427e3-119">重新设计的目的是提高产品的零售量。</span><span class="sxs-lookup"><span data-stu-id="427e3-119">The goal of the redesign is to increase sell-through of products.</span></span> <span data-ttu-id="427e3-120">由于该公司在事务数据库中记录了每个销售，因此它们可以使用 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 关联算法来标识倾向于集中购买的产品集。</span><span class="sxs-lookup"><span data-stu-id="427e3-120">Because the company records each sale in a transactional database, they can use the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Association algorithm to identify sets of products that tend to be purchased together.</span></span> <span data-ttu-id="427e3-121">然后，他们可以根据客户购物篮中已有的项来预测客户可能感兴趣的其他项。</span><span class="sxs-lookup"><span data-stu-id="427e3-121">They can then predict additional items that a customer might be interested in, based on items that are already in the customer's shopping basket.</span></span>

## <a name="how-the-algorithm-works"></a><span data-ttu-id="427e3-122">算法的原理</span><span class="sxs-lookup"><span data-stu-id="427e3-122">How the Algorithm Works</span></span>
 <span data-ttu-id="427e3-123">[!INCLUDE[msCoName](../../includes/msconame-md.md)] 关联算法遍历数据集以查找同时出现在某个事例中的项。</span><span class="sxs-lookup"><span data-stu-id="427e3-123">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Association algorithm traverses a dataset to find items that appear together in a case.</span></span> <span data-ttu-id="427e3-124">然后，该算法按照由 *MINIMUM_SUPPORT* 参数指定的事例数，将出现次数最少的关联项分组为项集。</span><span class="sxs-lookup"><span data-stu-id="427e3-124">The algorithm then groups into itemsets any associated items that appear, at a minimum, in the number of cases that are specified by the *MINIMUM_SUPPORT* parameter.</span></span> <span data-ttu-id="427e3-125">例如，项集可以为“Mountain 200=Existing, Sport 100=Existing”，并且支持的数目可以为 710。</span><span class="sxs-lookup"><span data-stu-id="427e3-125">For example, an itemset could be "Mountain 200=Existing, Sport 100=Existing", and could have a support of 710.</span></span> <span data-ttu-id="427e3-126">该算法将根据项集生成规则。</span><span class="sxs-lookup"><span data-stu-id="427e3-126">The algorithm then generates rules from the itemsets.</span></span> <span data-ttu-id="427e3-127">可以使用这些规则根据是否存在该算法标识为重要项的其他特定项，预测数据库中的某项是否存在。</span><span class="sxs-lookup"><span data-stu-id="427e3-127">These rules are used to predict the presence of an item in the database, based on the presence of other specific items that the algorithm identifies as important.</span></span> <span data-ttu-id="427e3-128">例如，某规则可以为“if Touring 1000=existing and Road bottle cage=existing, then Water bottle=existing”，并且其概率可能为 0.812。</span><span class="sxs-lookup"><span data-stu-id="427e3-128">For example, a rule could be "if Touring 1000=existing and Road bottle cage=existing, then Water bottle=existing", and could have a probability of 0.812.</span></span> <span data-ttu-id="427e3-129">在此例中，该算法发现由于购物篮中存在 Touring 1000 轮胎和水壶套，因此预测购物篮中也可能存在水壶。</span><span class="sxs-lookup"><span data-stu-id="427e3-129">In this example, the algorithm identifies that the presence in the basket of the Touring 1000 tire and the water bottle cage predicts that a water bottle would also likely be in the basket.</span></span>

 <span data-ttu-id="427e3-130">有关该算法以及在挖掘模型中自定义该算法行为并控制结果的参数列表的更多详细说明，请参阅 [Microsoft 关联算法技术参考](microsoft-association-algorithm-technical-reference.md)。</span><span class="sxs-lookup"><span data-stu-id="427e3-130">For a more detailed explanation of the algorithm, together with a list of parameters for customizing the behavior of the algorithm and controlling the results in the mining model, see [Microsoft Association Algorithm Technical Reference](microsoft-association-algorithm-technical-reference.md).</span></span>

## <a name="data-required-for-association-models"></a><span data-ttu-id="427e3-131">关联模型所必需的数据</span><span class="sxs-lookup"><span data-stu-id="427e3-131">Data Required for Association Models</span></span>
 <span data-ttu-id="427e3-132">在准备用于关联规则模型的数据时，应理解特定算法的要求，其中包括所需要的数据量以及使用数据的方式。</span><span class="sxs-lookup"><span data-stu-id="427e3-132">When you prepare data for use in an association rules model, you should understand the requirements for the particular algorithm, including how much data is needed, and how the data is used.</span></span>

 <span data-ttu-id="427e3-133">关联规则模型的要求如下：</span><span class="sxs-lookup"><span data-stu-id="427e3-133">The requirements for an association rules model are as follows:</span></span>

-   <span data-ttu-id="427e3-134">**单键列** 每个模型都必须包含一个用于唯一标识每条记录的数值列或文本列。</span><span class="sxs-lookup"><span data-stu-id="427e3-134">**A single key column** Each model must contain one numeric or text column that uniquely identifies each record.</span></span> <span data-ttu-id="427e3-135">不允许复合键。</span><span class="sxs-lookup"><span data-stu-id="427e3-135">compound keys not permitted.</span></span>

-   <span data-ttu-id="427e3-136">**单个可预测列** 一个关联模型只能有一个可预测列。</span><span class="sxs-lookup"><span data-stu-id="427e3-136">**A single predictable column** An association model can have only one predictable column.</span></span> <span data-ttu-id="427e3-137">通常它是嵌套表的键列，例如列出已购买的产品的字段。</span><span class="sxs-lookup"><span data-stu-id="427e3-137">Typically it is the key column of the nested table, such as the filed that lists the products that were purchased.</span></span> <span data-ttu-id="427e3-138">这些值必须是离散或离散化值。</span><span class="sxs-lookup"><span data-stu-id="427e3-138">The values must be discrete or discretized.</span></span>

-   <span data-ttu-id="427e3-139">**输入列**</span><span class="sxs-lookup"><span data-stu-id="427e3-139">**Input columns** .</span></span> <span data-ttu-id="427e3-140">输入列必须为离散列。</span><span class="sxs-lookup"><span data-stu-id="427e3-140">The input columns must be discrete.</span></span> <span data-ttu-id="427e3-141">关联模型的输入数据通常包含在两个表中。</span><span class="sxs-lookup"><span data-stu-id="427e3-141">The input data for an association model often is contained in two tables.</span></span> <span data-ttu-id="427e3-142">例如，一个表可能包含客户信息，而另一个表可能包含客户购物情况。</span><span class="sxs-lookup"><span data-stu-id="427e3-142">For example, one table might contain customer information while another table contains customer purchases.</span></span> <span data-ttu-id="427e3-143">您可以使用嵌套表将该数据输入到模型中。</span><span class="sxs-lookup"><span data-stu-id="427e3-143">You can input this data into the model by using a nested table.</span></span> <span data-ttu-id="427e3-144">有关嵌套表的详细信息，请参阅[嵌套表（Analysis Services - 数据挖掘）](nested-tables-analysis-services-data-mining.md)。</span><span class="sxs-lookup"><span data-stu-id="427e3-144">For more information about nested tables, see [Nested Tables &#40;Analysis Services - Data Mining&#41;](nested-tables-analysis-services-data-mining.md).</span></span>

 <span data-ttu-id="427e3-145">有关关联模型支持的内容类型和数据类型的详细信息，请参阅 [Microsoft 关联算法技术参考](microsoft-association-algorithm-technical-reference.md)的“要求”部分。</span><span class="sxs-lookup"><span data-stu-id="427e3-145">For more detailed information about the content types and data types supported for association models, see the Requirements section of [Microsoft Association Algorithm Technical Reference](microsoft-association-algorithm-technical-reference.md).</span></span>

## <a name="viewing-an-association-model"></a><span data-ttu-id="427e3-146">查看关联模型</span><span class="sxs-lookup"><span data-stu-id="427e3-146">Viewing an Association Model</span></span>
 <span data-ttu-id="427e3-147">若要浏览该模型，可以使用 **Microsoft 关联查看器**。</span><span class="sxs-lookup"><span data-stu-id="427e3-147">To explore the model, you can use the **Microsoft Association Viewer**.</span></span> <span data-ttu-id="427e3-148">查看关联模型时， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 会从各个角度展示相关性，从而您可以更好地理解数据中所找到的关系和规则。</span><span class="sxs-lookup"><span data-stu-id="427e3-148">When you view an association model, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] presents the correlations from different angles so that you can better understand the relationships and rules that were found in the data.</span></span> <span data-ttu-id="427e3-149">查看器中的 **“项集”** 窗格提供最常见组合或项集的详细明细。</span><span class="sxs-lookup"><span data-stu-id="427e3-149">The **Itemset** pane in the viewer provides a detailed breakdown of the most common combinations, or itemsets.</span></span> <span data-ttu-id="427e3-150">**“规则”** 窗格显示从数据中生成的规则列表，添加概率的计算，并根据关联重要性对规则进行排名。</span><span class="sxs-lookup"><span data-stu-id="427e3-150">The **Rules** pane presents a list of rules that have been generalized from the data, adds calculations of probability, and ranks the rules by relative importance.</span></span> <span data-ttu-id="427e3-151">通过依赖关系网络查看器，您可以用可视方式浏览连接各个不同项的方式。</span><span class="sxs-lookup"><span data-stu-id="427e3-151">the dependency network viewer lets you visually explore how individual different items are connected.</span></span> <span data-ttu-id="427e3-152">有关详细信息，请参阅 [使用 Microsoft 分类查看器浏览模型](browse-a-model-using-the-microsoft-cluster-viewer.md)。</span><span class="sxs-lookup"><span data-stu-id="427e3-152">For more information, see [Browse a Model Using the Microsoft Cluster Viewer](browse-a-model-using-the-microsoft-cluster-viewer.md).</span></span>

 <span data-ttu-id="427e3-153">如果需要查找有关任一项集和规则的更多详细信息，可以在 [Microsoft 一般内容树查看器](browse-a-model-using-the-microsoft-generic-content-tree-viewer.md)中浏览模型。</span><span class="sxs-lookup"><span data-stu-id="427e3-153">If you want to find out more detail about any of the itemsets and rules, you can browse the model in the [Microsoft Generic Content Tree Viewer](browse-a-model-using-the-microsoft-generic-content-tree-viewer.md).</span></span> <span data-ttu-id="427e3-154">为模型存储的内容包括对每个项集的支持，每个规则的分数以及其他统计信息。</span><span class="sxs-lookup"><span data-stu-id="427e3-154">The content stored for the model includes the support for each itemset, a score for each rule, and other statistics.</span></span> <span data-ttu-id="427e3-155">有关详细信息，请参阅 [关联模型的挖掘模型内容（Analysis Services - 数据挖掘）](mining-model-content-for-association-models-analysis-services-data-mining.md)。</span><span class="sxs-lookup"><span data-stu-id="427e3-155">For more information, see [Mining Model Content for Association Models &#40;Analysis Services - Data Mining&#41;](mining-model-content-for-association-models-analysis-services-data-mining.md).</span></span>

## <a name="creating-predictions"></a><span data-ttu-id="427e3-156">创建预测</span><span class="sxs-lookup"><span data-stu-id="427e3-156">Creating Predictions</span></span>
 <span data-ttu-id="427e3-157">处理完模型后，可以使用规则和项集来做出预测。</span><span class="sxs-lookup"><span data-stu-id="427e3-157">After the model has been processed, you can use the rules and itemsets to make predictions.</span></span> <span data-ttu-id="427e3-158">在关联模型中，如果有指定项存在，预测将告诉您有可能发生的项，而且预测可以包含诸如概率、支持或重要性等信息。</span><span class="sxs-lookup"><span data-stu-id="427e3-158">In an association model, a prediction tells you what item is likely to occur given the presence of the specified item, and the prediction can include such information as the probability, the support, or the importance.</span></span> <span data-ttu-id="427e3-159">有关如何创建针对关联模型的查询的示例，请参阅 [关联模型查询示例](association-model-query-examples.md)。</span><span class="sxs-lookup"><span data-stu-id="427e3-159">For examples of how to create queries against an association model, see [Association Model Query Examples](association-model-query-examples.md).</span></span>

 <span data-ttu-id="427e3-160">有关如何创建针对数据挖掘模型的查询的信息，请参阅 [数据挖掘查询](data-mining-queries.md)。</span><span class="sxs-lookup"><span data-stu-id="427e3-160">For general information about how to create a query against a data mining model, see [Data Mining Queries](data-mining-queries.md).</span></span>

## <a name="performance"></a><span data-ttu-id="427e3-161">性能</span><span class="sxs-lookup"><span data-stu-id="427e3-161">Performance</span></span>
 <span data-ttu-id="427e3-162">创建项集和对关联进行计数的过程可能会非常耗时。</span><span class="sxs-lookup"><span data-stu-id="427e3-162">The process of creating itemsets and counting correlations can be time-consuming.</span></span> <span data-ttu-id="427e3-163">尽管 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 关联规则算法使用优化技术来节省空间并使处理速度更快，但您应知道在下列情况下可能会发生性能问题：</span><span class="sxs-lookup"><span data-stu-id="427e3-163">Although the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Association Rules algorithm uses optimization techniques to save space and make processing faster, you should know that performance issues might occur under conditions such as the following:</span></span>

-   <span data-ttu-id="427e3-164">数据集很大，包含许多单个项。</span><span class="sxs-lookup"><span data-stu-id="427e3-164">Data set is large with many individual items.</span></span>

-   <span data-ttu-id="427e3-165">设置的最小项集大小过小。</span><span class="sxs-lookup"><span data-stu-id="427e3-165">Minimum itemset size is set too low.</span></span>

 <span data-ttu-id="427e3-166">若要尽量缩短处理时间，并降低项集的复杂度，可以在分析数据之前尝试按照类别对关联项进行分组。</span><span class="sxs-lookup"><span data-stu-id="427e3-166">To minimize processing time and reduce the complexity of the itemsets, you might try grouping related items by categories before you analyze the data.</span></span>

## <a name="remarks"></a><span data-ttu-id="427e3-167">备注</span><span class="sxs-lookup"><span data-stu-id="427e3-167">Remarks</span></span>

-   <span data-ttu-id="427e3-168">不支持使用预测模型标记语言 (PMML) 创建挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="427e3-168">Does not support the use of Predictive Model Markup Language (PMML) to create mining models.</span></span>

-   <span data-ttu-id="427e3-169">支持钻取。</span><span class="sxs-lookup"><span data-stu-id="427e3-169">Supports drillthrough.</span></span>

-   <span data-ttu-id="427e3-170">支持使用 OLAP 挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="427e3-170">Supports the use of OLAP mining models.</span></span>

-   <span data-ttu-id="427e3-171">支持创建数据挖掘维度。</span><span class="sxs-lookup"><span data-stu-id="427e3-171">Supports the creation of data mining dimensions.</span></span>

## <a name="see-also"></a><span data-ttu-id="427e3-172">另请参阅</span><span class="sxs-lookup"><span data-stu-id="427e3-172">See Also</span></span>
 <span data-ttu-id="427e3-173">[数据挖掘算法 &#40;Analysis Services 数据挖掘&#41;](data-mining-algorithms-analysis-services-data-mining.md) [使用 Microsoft 关联规则查看器浏览模型](browse-a-model-using-the-microsoft-association-rules-viewer.md) [&#40;的关联模型的挖掘模型内容 Analysis Services 数据挖掘&#41;](mining-model-content-for-association-models-analysis-services-data-mining.md) [Microsoft 关联算法技术参考](microsoft-association-algorithm-technical-reference.md)[关联模型查询示例](association-model-query-examples.md)</span><span class="sxs-lookup"><span data-stu-id="427e3-173">[Data Mining Algorithms &#40;Analysis Services - Data Mining&#41;](data-mining-algorithms-analysis-services-data-mining.md) [Browse a Model Using the Microsoft Association Rules Viewer](browse-a-model-using-the-microsoft-association-rules-viewer.md) [Mining Model Content for Association Models &#40;Analysis Services - Data Mining&#41;](mining-model-content-for-association-models-analysis-services-data-mining.md) [Microsoft Association Algorithm Technical Reference](microsoft-association-algorithm-technical-reference.md) [Association Model Query Examples](association-model-query-examples.md)</span></span>


