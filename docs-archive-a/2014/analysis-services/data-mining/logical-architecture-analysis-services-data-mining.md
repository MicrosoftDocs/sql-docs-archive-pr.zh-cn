---
title: 逻辑体系结构 (Analysis Services 数据挖掘) |Microsoft Docs
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- mining structures [Analysis Services], about mining structures
- logical architecture [Data Mining]
- architecture [Analysis Services], mining models
- mining models [Analysis Services], about data mining models
- architecture [Analysis Services]
ms.assetid: 4e0cbf46-cc60-4e91-a292-9a69f29746f0
author: minewiskan
ms.author: owend
ms.openlocfilehash: e1af06d7ffe12301f6b8b678f41665e5c3146a13
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87689144"
---
# <a name="logical-architecture-analysis-services---data-mining"></a><span data-ttu-id="940ff-102">逻辑体系结构（Analysis Services - 数据挖掘）</span><span class="sxs-lookup"><span data-stu-id="940ff-102">Logical Architecture (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="940ff-103">数据挖掘过程涉及多个组件的交互。</span><span class="sxs-lookup"><span data-stu-id="940ff-103">Data mining is a process that involves the interaction of multiple components.</span></span>  
  
-   <span data-ttu-id="940ff-104">您可以访问 SQL Server 数据库中的数据源或任何其他数据源，以便用于定型、测试或预测。</span><span class="sxs-lookup"><span data-stu-id="940ff-104">You access sources of data in a SQL Server database or any other data source to use for training, testing, or prediction.</span></span>  
  
-   <span data-ttu-id="940ff-105">使用 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 或 Visual Studio 可以定义数据挖掘结构和模型。</span><span class="sxs-lookup"><span data-stu-id="940ff-105">You define data mining structures and models by using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or Visual Studio.</span></span>  
  
-   <span data-ttu-id="940ff-106">您通过使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]来管理数据挖掘对象，并创建预测和查询。</span><span class="sxs-lookup"><span data-stu-id="940ff-106">You manage data mining objects and create predictions and queries by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
-   <span data-ttu-id="940ff-107">完成解决方案之后，您可以将其部署到 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]实例。</span><span class="sxs-lookup"><span data-stu-id="940ff-107">When the solution is complete, you deploy it to an instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="940ff-108">已在其他地方介绍创建这些解决方案对象的过程。</span><span class="sxs-lookup"><span data-stu-id="940ff-108">The process of creating these solution objects has already been described elsewhere.</span></span> <span data-ttu-id="940ff-109">有关详细信息，请参阅 [数据挖掘解决方案](data-mining-solutions.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-109">For more information, see [Data Mining Solutions](data-mining-solutions.md).</span></span>  
  

  
##  <a name="data-mining-source-data"></a><a name="bkmk_SourceData"></a><span data-ttu-id="940ff-110">数据挖掘源数据</span><span class="sxs-lookup"><span data-stu-id="940ff-110">Data Mining Source Data</span></span>  
 <span data-ttu-id="940ff-111">在数据挖掘中使用的数据并不会存储在数据挖掘解决方案中，而仅存储绑定。</span><span class="sxs-lookup"><span data-stu-id="940ff-111">The data that you use in data mining is not stored in the data mining solution; only the bindings are stored.</span></span> <span data-ttu-id="940ff-112">该数据可能驻留在 SQL Server 早期版本创建的数据库、CRM 系统，或者甚至平面文件中。</span><span class="sxs-lookup"><span data-stu-id="940ff-112">The data might reside in a database created in a previous version of SQL Server, a CRM system, or even a flat file.</span></span> <span data-ttu-id="940ff-113">通过处理定型结构或模型时，将创建数据的统计汇总并在缓存中存储它，这样可以将其持久化以供以后的操作使用它；或者在处理后删除数据的统计汇总。</span><span class="sxs-lookup"><span data-stu-id="940ff-113">When you train the structure or model by processing, a statistical summary of the data is created and stored in a cache that can be persisted for use in later operations, or deleted after processing.</span></span> <span data-ttu-id="940ff-114">有关详细信息，请参阅[挖掘结构（Analysis Services - 数据挖掘）](mining-structures-analysis-services-data-mining.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-114">For more information, see [Mining Structures &#40;Analysis Services - Data Mining&#41;](mining-structures-analysis-services-data-mining.md).</span></span>  
  
 <span data-ttu-id="940ff-115">在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据源视图 (DSV) 对象中组合不同数据，将在你的数据源上提供一个抽象层。</span><span class="sxs-lookup"><span data-stu-id="940ff-115">You combine disparate data within the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source view (DSV) object, which provides an abstraction layer on top of your data source.</span></span> <span data-ttu-id="940ff-116">您可以指定表之间的联接，或添加具有多对一关系的表以便创建嵌套表列。</span><span class="sxs-lookup"><span data-stu-id="940ff-116">You can specify joins between tables, or add tables that have a many-to-one relationship to create nested table columns.</span></span> <span data-ttu-id="940ff-117">这些对象的定义、数据源和数据源视图存储在解决方案内，文件扩展名为 \*.ds 和 \*.dsv。</span><span class="sxs-lookup"><span data-stu-id="940ff-117">The definition of these objects, the data source and the data source view, are stored within the solution with the file name extensions, \*.ds and \*.dsv.</span></span> <span data-ttu-id="940ff-118">有关创建和使用 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据源和数据源视图的详细信息，请参阅[&#40;SSAS 多维&#41;支持的数据源](../multidimensional-models/supported-data-sources-ssas-multidimensional.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-118">For more information about creating and using [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data sources and data source views, see [Data Sources Supported &#40;SSAS Multidimensional&#41;](../multidimensional-models/supported-data-sources-ssas-multidimensional.md).</span></span>  
  
 <span data-ttu-id="940ff-119">还可以使用 AMO 或 XMLA 定义和更改数据源以及数据源视图。</span><span class="sxs-lookup"><span data-stu-id="940ff-119">You can also define and alter data sources and data source views by using AMO or XMLA.</span></span> <span data-ttu-id="940ff-120">有关以编程方式使用这些对象的详细信息，请参阅[逻辑体系结构概述（Analysis Services - 多维数据）](../multidimensional-models/olap-logical/logical-architecture-overview-analysis-services-multidimensional-data.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-120">For more information about working with these objects programmatically, see [Logical Architecture Overview &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models/olap-logical/logical-architecture-overview-analysis-services-multidimensional-data.md).</span></span>  
  

  
##  <a name="mining-structures"></a><a name="bkmk_Structures"></a><span data-ttu-id="940ff-121">挖掘结构</span><span class="sxs-lookup"><span data-stu-id="940ff-121">Mining Structures</span></span>  
 <span data-ttu-id="940ff-122">数据挖掘结构是一种逻辑数据容器，它定义从中生成挖掘模型的数据域。</span><span class="sxs-lookup"><span data-stu-id="940ff-122">A data mining structure is a logical data container that defines the data domain from which mining models are built.</span></span> <span data-ttu-id="940ff-123">单个挖掘结构可以支持多个挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="940ff-123">A single mining structure can support multiple mining models.</span></span>  
  
 <span data-ttu-id="940ff-124">需要使用数据挖掘解决方案中的数据时，Analysis Services 读取源的数据并生成聚合以及其他信息的缓存。</span><span class="sxs-lookup"><span data-stu-id="940ff-124">When you need to use the data in the data mining solution, Analysis Services reads the data from the source and generates a cache of aggregates and other information.</span></span> <span data-ttu-id="940ff-125">默认情况下，将此缓存持久化以便可以重用定型数据来支持其他模型。</span><span class="sxs-lookup"><span data-stu-id="940ff-125">By default this cache is persisted so that training data can be reused to support additional models.</span></span> <span data-ttu-id="940ff-126">如果您需要删除此缓存，请将挖掘结构对象的 `CacheMode` 属性更改为值 `ClearAfterProcessing`。</span><span class="sxs-lookup"><span data-stu-id="940ff-126">If you need to delete the cache, change the `CacheMode` property on the mining structure object to the value, `ClearAfterProcessing`.</span></span> <span data-ttu-id="940ff-127">有关详细信息，请参阅 [AMO 数据挖掘类](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes)。</span><span class="sxs-lookup"><span data-stu-id="940ff-127">For more information, see [AMO Data Mining Classes](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span></span>  
  
 [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)] <span data-ttu-id="940ff-128">还提供将数据分为定型数据集和测试数据集的功能，这样，您可以针对具有代表性的随机选择的数据集测试您的挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="940ff-128">also provides the ability to separate your data into training and testing data sets, so that you can test your mining models on a representative, randomly selected set of data.</span></span> <span data-ttu-id="940ff-129">数据实际未单独存储；使用一个属性标记结构缓存中的事例数据，该属性指示特定事例是用于定型还是测试。</span><span class="sxs-lookup"><span data-stu-id="940ff-129">The data is not actually stored separately; rather, case data in the structure cache is marked with a property that indicates whether that particular case is used for training or for testing.</span></span> <span data-ttu-id="940ff-130">如果删除缓存，则无法检索该信息。</span><span class="sxs-lookup"><span data-stu-id="940ff-130">If the cache is deleted, that information cannot be retrieved.</span></span>  
  
 <span data-ttu-id="940ff-131">有关详细信息，请参阅[挖掘结构（Analysis Services - 数据挖掘）](mining-structures-analysis-services-data-mining.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-131">For more information, see [Mining Structures &#40;Analysis Services - Data Mining&#41;](mining-structures-analysis-services-data-mining.md).</span></span>  
  
 <span data-ttu-id="940ff-132">数据挖掘结构可包含嵌套表。</span><span class="sxs-lookup"><span data-stu-id="940ff-132">A data mining structure can contain nested tables.</span></span> <span data-ttu-id="940ff-133">嵌套表提供有关在主要数据表中建模的事例的其他详细信息。</span><span class="sxs-lookup"><span data-stu-id="940ff-133">A nested table provides additional detail about the case that is modeled in the primary data table.</span></span> <span data-ttu-id="940ff-134">有关详细信息，请参阅[嵌套表（Analysis Services - 数据挖掘）](nested-tables-analysis-services-data-mining.md)</span><span class="sxs-lookup"><span data-stu-id="940ff-134">For more information, see [Nested Tables &#40;Analysis Services - Data Mining&#41;](nested-tables-analysis-services-data-mining.md)</span></span>  
  
 
  
##  <a name="mining-models"></a><a name="bkmk_Models"></a><span data-ttu-id="940ff-135">挖掘模型</span><span class="sxs-lookup"><span data-stu-id="940ff-135">Mining Models</span></span>  
 <span data-ttu-id="940ff-136">处理前，数据挖掘模型只是元数据属性的组合。</span><span class="sxs-lookup"><span data-stu-id="940ff-136">Before processing, a data mining model is only a combination of metadata properties.</span></span> <span data-ttu-id="940ff-137">这些属性指定挖掘结构，指定数据挖掘算法，并定义影响如何处理数据的参数和筛选器设置的集合。</span><span class="sxs-lookup"><span data-stu-id="940ff-137">These properties specify a mining structure, specify a data mining algorithm, and a define collection of parameter and filter settings that affect how the data is processed.</span></span> <span data-ttu-id="940ff-138">有关详细信息，请参阅[挖掘模型（Analysis Services - 数据挖掘）](mining-models-analysis-services-data-mining.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-138">For more information, see [Mining Models &#40;Analysis Services - Data Mining&#41;](mining-models-analysis-services-data-mining.md).</span></span>  
  
 <span data-ttu-id="940ff-139">处理模型时，存储在挖掘结构缓存中的定型数据用于基于数据的统计属性和算法及其参数定义的试探方法生成模式。</span><span class="sxs-lookup"><span data-stu-id="940ff-139">When you process the model, the training data that was stored in the mining structure cache is used to generate patterns, based both on statistical properties of the data and on heuristics defined by the algorithm and its parameters.</span></span> <span data-ttu-id="940ff-140">这称为 "*定型*模型"。</span><span class="sxs-lookup"><span data-stu-id="940ff-140">This is known as *training* the model.</span></span>  
  
 <span data-ttu-id="940ff-141">定型的结果是一组汇总数据，包含在“模型内容” \*\* 中，它描述找到的模式并提供生成预测的规则。</span><span class="sxs-lookup"><span data-stu-id="940ff-141">The result of training is a set of summary data, contained within the *model content*, which describes the patterns that were found and provides rules by which to generate predictions.</span></span> <span data-ttu-id="940ff-142">有关详细信息，请参阅[挖掘模型内容（Analysis Services - 数据挖掘）](mining-model-content-analysis-services-data-mining.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-142">For more information, see [Mining Model Content &#40;Analysis Services - Data Mining&#41;](mining-model-content-analysis-services-data-mining.md).</span></span>  
  
 <span data-ttu-id="940ff-143">在有限事例中，还可以将模型的逻辑结构导出到一个文件，该文件根据标准格式（预测建模标记语言 PMML）表示模型公式和数据绑定。</span><span class="sxs-lookup"><span data-stu-id="940ff-143">In limited cases, the logical structure of the model can also be exported into a file that represents model formulas and data bindings according to a standard format, the Predictive Modeling Markup Language (PMML).</span></span> <span data-ttu-id="940ff-144">可以将此逻辑结构导入其他使用 PMML 的系统，然后所述的模型就可以用于预测了。</span><span class="sxs-lookup"><span data-stu-id="940ff-144">This logical structure can be imported into other systems that utilize PMML and the model so described can then be used for prediction.</span></span> <span data-ttu-id="940ff-145">有关详细信息，请参阅 [了解 DMX Select 语句](/sql/dmx/understanding-the-dmx-select-statement)。</span><span class="sxs-lookup"><span data-stu-id="940ff-145">For more information, see [Understanding the DMX Select Statement](/sql/dmx/understanding-the-dmx-select-statement).</span></span>  
  

  
##  <a name="custom-data-mining-objects"></a><a name="bkmk_CustomObjects"></a><span data-ttu-id="940ff-146">自定义数据挖掘对象</span><span class="sxs-lookup"><span data-stu-id="940ff-146">Custom Data Mining Objects</span></span>  
 <span data-ttu-id="940ff-147">可以在数据挖掘项目的上下文中使用的其他对象（如准确性图表或预测查询）不在解决方案内持久化，但是可以使用 ASSL 编写脚本或使用 AMO 生成。</span><span class="sxs-lookup"><span data-stu-id="940ff-147">Other objects that you use in the context of a data mining project, such as accuracy charts or prediction queries, are not persisted within the solution, but can be scripted using ASSL or built using AMO.</span></span>  
  
 <span data-ttu-id="940ff-148">此外，您可以通过添加这些自定义对象扩展 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例上可用的服务和功能：</span><span class="sxs-lookup"><span data-stu-id="940ff-148">Additionally, you can extend the services and features available on an instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] by adding these custom objects:</span></span>  
  
 <span data-ttu-id="940ff-149">**自定义程序集**</span><span class="sxs-lookup"><span data-stu-id="940ff-149">**Custom assemblies**</span></span>  
 <span data-ttu-id="940ff-150">可以使用符合 CLR 或 COM 标准的语言定义 .NET 程序集，然后注册到 SQL Server 实例。</span><span class="sxs-lookup"><span data-stu-id="940ff-150">.NET assemblies can be defined by using any CLR-or COM-complaint language, and then registered with an instance of SQL Server.</span></span> <span data-ttu-id="940ff-151">程序集文件可从应用程序定义的位置加载，并且其副本将和数据一起保存到服务器中。</span><span class="sxs-lookup"><span data-stu-id="940ff-151">Assembly files are loaded from the location defined by the application, and a copy is saved in the server along with the data.</span></span> <span data-ttu-id="940ff-152">程序集文件的副本可用于在每次启动服务时加载程序集。</span><span class="sxs-lookup"><span data-stu-id="940ff-152">The copy of the assembly file is used to load the assembly every time the service is started.</span></span>  
  
 <span data-ttu-id="940ff-153">有关详细信息，请参阅 [多维模型程序集管理](../multidimensional-models/multidimensional-model-assemblies-management.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-153">For more information, see [Multidimensional Model Assemblies Management](../multidimensional-models/multidimensional-model-assemblies-management.md).</span></span>  
  
 <span data-ttu-id="940ff-154">**自定义存储过程**</span><span class="sxs-lookup"><span data-stu-id="940ff-154">**Custom stored procedures**</span></span>  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="940ff-155">数据挖掘支持使用存储过程来处理数据挖掘对象。</span><span class="sxs-lookup"><span data-stu-id="940ff-155">data mining supports the use of stored procedures to work with data mining objects.</span></span> <span data-ttu-id="940ff-156">您可以创建自己的存储过程来扩展功能，以便更方便地使用预测查询和内容查询返回的数据。</span><span class="sxs-lookup"><span data-stu-id="940ff-156">You can create your own stored procedures to extend functionality and more easily work with data returned by prediction queries and content queries.</span></span>  
  
 [<span data-ttu-id="940ff-157">定义存储过程</span><span class="sxs-lookup"><span data-stu-id="940ff-157">Defining Stored Procedures</span></span>](../multidimensional-models-extending-olap-stored-procedures/defining-stored-procedures.md)  
  
 <span data-ttu-id="940ff-158">支持将下面的存储过程用于交叉验证中。</span><span class="sxs-lookup"><span data-stu-id="940ff-158">The following stored procedures are supported for use in performing cross-validation.</span></span>  
  
 [<span data-ttu-id="940ff-159">数据挖掘存储过程（Analysis Services - 数据挖掘）</span><span class="sxs-lookup"><span data-stu-id="940ff-159">Data Mining Stored Procedures &#40;Analysis Services - Data Mining&#41;</span></span>](/sql/analysis-services/data-mining/data-mining-stored-procedures-analysis-services-data-mining)  
  
 <span data-ttu-id="940ff-160">此外， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 包含很多供数据挖掘内部使用的系统存储过程。</span><span class="sxs-lookup"><span data-stu-id="940ff-160">Additionally, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] contains many system stored procedures that are used internally for data mining.</span></span> <span data-ttu-id="940ff-161">尽管系统存储过程供内部使用，但是您可能发现它们是有用的快捷方式。</span><span class="sxs-lookup"><span data-stu-id="940ff-161">Although the system stored procedures are for internal use, you might find them useful shortcuts.</span></span> <span data-ttu-id="940ff-162">Microsoft 保留根据需要更改这些存储过程的权利；因此，对于生产而言，我们建议您使用 DMX、AMO 或 XMLA 创建查询。</span><span class="sxs-lookup"><span data-stu-id="940ff-162">Microsoft reserves the right to change these stored procedures as needed; therefore, for production use, we recommend that you create queries by using DMX, AMO, or XMLA.</span></span>  
  
 <span data-ttu-id="940ff-163">**自定义插件算法**</span><span class="sxs-lookup"><span data-stu-id="940ff-163">**Custom plug-in algorithms**</span></span>  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="940ff-164">提供一种机制，你可以使用它创建自己的算法，然后将这些算法作为新的数据挖掘服务添加到服务器实例。</span><span class="sxs-lookup"><span data-stu-id="940ff-164">provides a mechanism for creating your own algorithms, and then adding the algorithms as a new data mining service to the server instance.</span></span>  
  
 <span data-ttu-id="940ff-165">Analysis Services 使用 COM 接口与插件算法进行通信。</span><span class="sxs-lookup"><span data-stu-id="940ff-165">Analysis Services uses COM interfaces to communicate with plugin algorithms.</span></span> <span data-ttu-id="940ff-166">若要了解有关如何实现新算法的详细信息，请参阅 [Plugin Algorithms](plugin-algorithms.md)。</span><span class="sxs-lookup"><span data-stu-id="940ff-166">To learn more about how to implement new algorithms, see [Plugin Algorithms](plugin-algorithms.md).</span></span>  
  
 <span data-ttu-id="940ff-167">必须注册每个新算法，之后才能使用它。</span><span class="sxs-lookup"><span data-stu-id="940ff-167">You must register each new algorithm before you can use it.</span></span> <span data-ttu-id="940ff-168">为了注册某个算法，您将算法所需的元数据添加到 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]实例的 .ini 文件中。</span><span class="sxs-lookup"><span data-stu-id="940ff-168">To register an algorithm, you add the required metadata for the algorithms in the .ini file of the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="940ff-169">必须将该信息添加到要计划使用新算法的每个实例。</span><span class="sxs-lookup"><span data-stu-id="940ff-169">You must add the information to each instance where you plan to use the new algorithm.</span></span> <span data-ttu-id="940ff-170">添加算法后，可以重新启动实例，使用 MINING_SERVICES 架构行集来查看新算法，包括算法支持的选项和提供程序。</span><span class="sxs-lookup"><span data-stu-id="940ff-170">After you have added the algorithm, you can restart the instance, and use the MINING_SERVICES schema rowset to view the new algorithm, including the options and providers that the algorithm supports.</span></span>  
  

  
## <a name="see-also"></a><span data-ttu-id="940ff-171">另请参阅</span><span class="sxs-lookup"><span data-stu-id="940ff-171">See Also</span></span>  
 <span data-ttu-id="940ff-172">[多维模型对象处理](../multidimensional-models/processing-a-multidimensional-model-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="940ff-172">[Multidimensional Model Object Processing](../multidimensional-models/processing-a-multidimensional-model-analysis-services.md) </span></span>  
 [<span data-ttu-id="940ff-173">数据挖掘扩展插件 (DMX) 参考</span><span class="sxs-lookup"><span data-stu-id="940ff-173">Data Mining Extensions &#40;DMX&#41; Reference</span></span>](/sql/dmx/data-mining-extensions-dmx-reference)  
  
  
