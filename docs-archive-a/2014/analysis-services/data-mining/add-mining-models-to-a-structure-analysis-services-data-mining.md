---
title: 向结构中添加挖掘模型 (Analysis Services 数据挖掘) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- mining structures [Analysis Services], creating
- mining models [Analysis Services], creating
- mining models [Analysis Services], modifying
ms.assetid: a175daa5-58ea-474c-a82f-9648c5155dc8
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2cc504016ac378a66795e7522365bd570cfca84d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578534"
---
# <a name="add-mining-models-to-a-structure-analysis-services---data-mining"></a><span data-ttu-id="9e8f3-102">向结构中添加挖掘模型（Analysis Services - 数据挖掘）</span><span class="sxs-lookup"><span data-stu-id="9e8f3-102">Add Mining Models to a Structure (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="9e8f3-103">挖掘结构旨在支持多个挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-103">A mining structure is intended to support multiple mining models.</span></span> <span data-ttu-id="9e8f3-104">因此，在完成向导后，您可以打开结构并添加新的挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-104">Therefore, after you finish the wizard, you can open the structure and add new mining models.</span></span> <span data-ttu-id="9e8f3-105">每当您创建模型时，可以使用一个不同的算法、更改参数或应用筛选器，以使用不同的数据子集。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-105">Each time that you create a model, you can use a different algorithm, change the parameters, or apply filters to use a different subset of the data.</span></span>  
  
## <a name="adding-new-mining-models"></a><span data-ttu-id="9e8f3-106">添加新的挖掘模型</span><span class="sxs-lookup"><span data-stu-id="9e8f3-106">Adding New Mining Models</span></span>  
 <span data-ttu-id="9e8f3-107">使用数据挖掘向导创建新的挖掘模型时，默认情况下，您必须总是先创建一个挖掘结构。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-107">When you use the Data Mining Wizard to create a new mining model, by default you must always create a mining structure first.</span></span> <span data-ttu-id="9e8f3-108">然后，该向导会为您提供用于向结构中添加初始挖掘模型的选项。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-108">The wizard then gives you the option to add an initial mining model to the structure.</span></span> <span data-ttu-id="9e8f3-109">但是，不需要立即创建模型。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-109">However, you don't need to create a model right away.</span></span> <span data-ttu-id="9e8f3-110">如果仅仅创建结构，则不需要决定将哪一列用作可预测的属性，或者如何在特定模型中使用这些数据。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-110">If you create the structure only, you do not need to make a decision about which column to use as the predictable attribute, or how to use the data in a particular model.</span></span> <span data-ttu-id="9e8f3-111">您只需设置要在将来使用的通用数据结构，之后即可使用 [Data Mining Designer](data-mining-designer.md) 来添加基于此结构的新挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-111">Instead, you just set up the general data structure that you want to use in future, and later you can use [Data Mining Designer](data-mining-designer.md) to add new mining models that are based on the structure.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9e8f3-112">在 DMX 中，CREATE MINING MODEL 语句以挖掘模型开头。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-112">In DMX, the CREATE MINING MODEL statement  begins with the mining model.</span></span> <span data-ttu-id="9e8f3-113">也就是说，您只需定义想要的挖掘模型， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 会自动生成基础结构。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-113">That is, you define your choice of mining model, and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] automatically generates the underlying structure.</span></span> <span data-ttu-id="9e8f3-114">稍后，您可以使用 ALTER STRUCTURE ...，继续向该结构中添加新的挖掘模型。添加模型语句。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-114">Later you can continue to add new mining models to that structure, by using the ALTER STRUCTURE... ADD MODEL statement.</span></span>  
  
## <a name="choosing-an-algorithm"></a><span data-ttu-id="9e8f3-115">选择算法</span><span class="sxs-lookup"><span data-stu-id="9e8f3-115">Choosing an Algorithm</span></span>  
 <span data-ttu-id="9e8f3-116">当您向现有结构中添加新模型时，您首先应选择要在该模型中使用的数据挖掘算法。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-116">When you add a new model to an existing structure, the first thing you should do is select a data mining algorithm to use in that model.</span></span> <span data-ttu-id="9e8f3-117">选择算法很重要，因为每种算法都执行一种不同类型的分析并具有不同的要求。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-117">Choosing the algorithm is important because each algorithm performs a different type of analysis and has different requirements.</span></span>  
  
 <span data-ttu-id="9e8f3-118">当您选择了与您的数据不兼容的算法时，您将收到一个警告。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-118">When you select an algorithm that is incompatible with your data, you will get a warning.</span></span> <span data-ttu-id="9e8f3-119">在某些情况下，您可能需要忽略该算法无法处理的列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-119">In some cases, you might need to ignore columns that cannot be processed by the algorithm.</span></span> <span data-ttu-id="9e8f3-120">在其他情况下，该算法将自动进行调整以满足您需求。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-120">In other cases, the algorithm will automatically make the adjustments for you.</span></span> <span data-ttu-id="9e8f3-121">例如，如果结构包含数值数据，并且算法仅适用于离散值，则算法会为您将数值组合到离散范围中。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-121">For example, if your structure contains numeric data, and the algorithm can only work with discrete values, it will group the numeric values into discrete ranges for you.</span></span> <span data-ttu-id="9e8f3-122">在某些情况下，您可能需要先通过选择键或选择可预测属性来手动修复数据。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-122">In some cases, you might need to manually fix the data first, by choosing a key or choosing a predictable attribute.</span></span>  
  
 <span data-ttu-id="9e8f3-123">在创建新模型时无需更改算法。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-123">You do not need to change the algorithm when you create a new model.</span></span> <span data-ttu-id="9e8f3-124">通常，通过使用同一算法，但筛选数据或更改参数（例如，聚类分析方法或最小项集大小），可获得完全不同的结果。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-124">Often you can get very different results by using the same algorithm, but filtering the data, or changing a parameter such as the clustering method or the minimum itemset size.</span></span> <span data-ttu-id="9e8f3-125">建议您试用多个模型以查看可产生最佳结果的参数。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-125">We recommend that you experiment with multiple models to see which parameters produce the best results.</span></span>  
  
 <span data-ttu-id="9e8f3-126">请注意，必须先处理所有新模型，然后才能使用这些模型。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-126">Note that all new models need to be processed before you can use them.</span></span>  
  
## <a name="specifying-the-usage-of-columns-in-a-new-mining-model"></a><span data-ttu-id="9e8f3-127">指定新挖掘模型中的列用法</span><span class="sxs-lookup"><span data-stu-id="9e8f3-127">Specifying the Usage of Columns in a New Mining Model</span></span>  
 <span data-ttu-id="9e8f3-128">在向现有挖掘结构中添加新的挖掘模型时，必须指定该模型使用每个数据列的方式。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-128">When you add new mining models to an existing mining structure, you must specify how each column of data should be used by the model.</span></span> <span data-ttu-id="9e8f3-129">根据您为模型选择的算法类型，默认情况下，可能会做出其中一些选择。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-129">Depending on the type of algorithm you choose for the model, some of these choices may be made by default.</span></span> <span data-ttu-id="9e8f3-130">如果没有指定列的使用类型，则挖掘结构中将不会包含该列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-130">If you do not specify a usage type for a column, the column will not be included in the mining structure.</span></span> <span data-ttu-id="9e8f3-131">但是，如果模型支持钻取功能，则该列中的数据仍可用于钻取。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-131">However, the data in the column can still be available for drillthrough, if the model supports it.</span></span>  
  
 <span data-ttu-id="9e8f3-132">模型所使用的挖掘结构中的列（如果未设置为“忽略”）必须是键、输入列、预测列或其值也用作模型的输入的预测列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-132">Columns from the mining structure that are used by the model (if not set to Ignore) must be a key, an input column, a predictable column, or a predictable column the values of which are also used as inputs to the model.</span></span>  
  
-   <span data-ttu-id="9e8f3-133">键列包含表中每个行的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-133">Key columns contain a unique identifier for each row in a table.</span></span> <span data-ttu-id="9e8f3-134">某些挖掘模型（如基于顺序分析和聚类分析或者时序算法的挖掘模型）可能包含多个键列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-134">Some mining models, such as those based on the sequence clustering or time series algorithms, can contain multiple key columns.</span></span> <span data-ttu-id="9e8f3-135">但是，这些键并非相关意义上的复合键，必须选择这些键才能为时序分析以及顺序分析和聚类分析提供支持。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-135">However, these multiple keys are not compound keys in the relational sense, but instead must be selected so as to provide support for time series and sequence clustering analysis.</span></span>  
  
-   <span data-ttu-id="9e8f3-136">输入列提供据以进行预测的信息。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-136">Input columns provide the information from which predictions are made.</span></span> <span data-ttu-id="9e8f3-137">数据挖掘向导提供了 **“建议”** 功能，在选择预测列时将启用该功能。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-137">The Data Mining Wizard provides the **Suggest** feature, which is enabled when you select a predictable column.</span></span> <span data-ttu-id="9e8f3-138">如果您单击此按钮，则该向导将对可预测值进行采样并确定结构中生成变量的其他列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-138">If you click this button, the wizard will sample the predictable values and determine which of the other columns in the structure make good variables.</span></span> <span data-ttu-id="9e8f3-139">它将拒绝键列或具有多个唯一值的其他列，并建议使用似乎与结果相关的列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-139">It will reject key columns or other columns with many unique values, and suggest columns that appear to be correlated with the outcome.</span></span>  
  
     <span data-ttu-id="9e8f3-140">当数据集包含的列数多于生成挖掘模型所需的实际列数时，此功能特别有用。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-140">This feature is particularly handy when datasets contain more columns than you really need to build a mining model.</span></span> <span data-ttu-id="9e8f3-141">**“建议”** 功能可以计算出一个数值分数（介于 0 到 1 之间），用于说明数据集中的每一列与预测列之间的关系。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-141">The **Suggest** feature calculates a numeric score, from 0 to 1, that describes the relationship between each column in the dataset and the predictable column.</span></span> <span data-ttu-id="9e8f3-142">根据此分数，该功能可以建议可用作挖掘模型的输入的列。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-142">Based on this score, the feature suggests columns to use as input for the mining model.</span></span> <span data-ttu-id="9e8f3-143">如果使用了 **“建议”** 功能，您就可以使用建议的列，修改选择的列以满足需要，也可以忽略建议。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-143">If you use the **Suggest** feature, you can use the suggested columns, modify the selections to fit your needs, or ignore the suggestions.</span></span>  
  
-   <span data-ttu-id="9e8f3-144">预测列包含要在挖掘模型中预测的信息。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-144">Predictable columns contain the information that you try to predict in the mining model.</span></span> <span data-ttu-id="9e8f3-145">可选择多个列作为可预测属性。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-145">You can select multiple columns as the predictable attributes.</span></span> <span data-ttu-id="9e8f3-146">聚类分析模型属于例外情况，可预测属性在该模型中是可选的。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-146">Clustering models are the exception in that a predictable attribute is optional.</span></span>  
  
     <span data-ttu-id="9e8f3-147">根据模型类型，可预测列可能必须为特定的数据类型：例如，线性回归模型需要数字列作为预测值；Naïve Bayes 算法需要离散值（并且所有输入也必须是离散的）。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-147">Depending on the model type, the predictable column might need to be a specific data type: for example, a linear regression model requires a numeric column as the predicted value; Naïve Bayes algorithm requires a discrete value (and all the inputs must be discrete as well).</span></span>  
  
## <a name="specifying-column-content"></a><span data-ttu-id="9e8f3-148">指定列内容</span><span class="sxs-lookup"><span data-stu-id="9e8f3-148">Specifying Column Content</span></span>  
 <span data-ttu-id="9e8f3-149">对于某些列，可能还需要指定“列内容” \*\*。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-149">For some columns, you might also need to specify the *column content*.</span></span> <span data-ttu-id="9e8f3-150">在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据挖掘中，每个数据列的“内容类型”属性都通知算法应如何处理该列中的数据。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-150">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data mining, the Content Type property of each data columns tells the algorithm how it should process the data in that column.</span></span> <span data-ttu-id="9e8f3-151">例如，如果数据包括一个“收入”列，则您必须通过将内容类型设置为“连续”来指定该列包含连续数。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-151">For example, if your data has an Income column, you must specify that the column contains continuous numbers by setting the content type to Continuous.</span></span> <span data-ttu-id="9e8f3-152">但是，您还可以通过将内容类型设置为“离散化”并选择指定存储桶的准确数目，来指定“收入”列中的数分成存储桶。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-152">However, you could also specify that the numbers in the Income column be grouped into buckets by setting the content type to Discretized and optionally specifying the exact number of buckets.</span></span> <span data-ttu-id="9e8f3-153">您可以创建以不同方式处理列的不同模型：例如，您可能尝试使用一种模型将客户分成三个年龄组，而另一个模型则将客户分成 10 个年龄组。</span><span class="sxs-lookup"><span data-stu-id="9e8f3-153">You can create different models that handle columns differently: for example, you might try one model that buckets customers into three age groups, and another model that buckets customers into 10 age groups.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9e8f3-154">另请参阅</span><span class="sxs-lookup"><span data-stu-id="9e8f3-154">See Also</span></span>  
 <span data-ttu-id="9e8f3-155">[挖掘结构 &#40;Analysis Services 数据挖掘&#41;](mining-structures-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="9e8f3-155">[Mining Structures &#40;Analysis Services - Data Mining&#41;](mining-structures-analysis-services-data-mining.md) </span></span>  
 <span data-ttu-id="9e8f3-156">[创建关系挖掘结构](create-a-relational-mining-structure.md) </span><span class="sxs-lookup"><span data-stu-id="9e8f3-156">[Create a Relational Mining Structure](create-a-relational-mining-structure.md) </span></span>  
 <span data-ttu-id="9e8f3-157">[挖掘模型属性](mining-model-properties.md) </span><span class="sxs-lookup"><span data-stu-id="9e8f3-157">[Mining Model Properties](mining-model-properties.md) </span></span>  
 [<span data-ttu-id="9e8f3-158">挖掘模型列</span><span class="sxs-lookup"><span data-stu-id="9e8f3-158">Mining Model Columns</span></span>](mining-model-columns.md)  
  
  
