---
title: Microsoft 顺序分析和聚类分析算法 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- clusters [Analysis Services]
- algorithms [data mining]
- sequence clustering algorithms [Analysis Services]
- sequence [Analysis Services]
ms.assetid: ae779a1f-0adb-4857-afbd-a15543dff299
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4999c8237f1f3c98de8479343d73ada90d680d00
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87577088"
---
# <a name="microsoft-sequence-clustering-algorithm"></a><span data-ttu-id="d8552-102">Microsoft 顺序分析和聚类分析算法</span><span class="sxs-lookup"><span data-stu-id="d8552-102">Microsoft Sequence Clustering Algorithm</span></span>
  <span data-ttu-id="d8552-103">[!INCLUDE[msCoName](../../includes/msconame-md.md)]顺序分析和聚类分析算法是提供的一种序列分析算法 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="d8552-103">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Sequence Clustering algorithm is a sequence analysis algorithm provided by [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="d8552-104">您可以使用此算法浏览包含可通过以下路径或*序列*链接的事件的数据。</span><span class="sxs-lookup"><span data-stu-id="d8552-104">You can use this algorithm to explore data that contains events that can be linked by following paths, or *sequences*.</span></span> <span data-ttu-id="d8552-105">该算法通过对相同的顺序进行分组或分类来查找最常见的顺序。</span><span class="sxs-lookup"><span data-stu-id="d8552-105">The algorithm finds the most common sequences by grouping, or clustering, sequences that are identical.</span></span> <span data-ttu-id="d8552-106">下面是一些数据示例，其中包含可用于数据挖掘的序列，旨在帮助您深入了解常见问题或业务方案：</span><span class="sxs-lookup"><span data-stu-id="d8552-106">The following are some examples of data that contain sequences which might be used for data mining, to provide insight about common problems or business scenarios:</span></span>  
  
-   <span data-ttu-id="d8552-107">用户在导航或浏览网站时创建的单击路径。</span><span class="sxs-lookup"><span data-stu-id="d8552-107">Click paths that are created when users navigate or browse a Web site.</span></span>  
  
-   <span data-ttu-id="d8552-108">列出发生事故（如硬盘故障或服务器死锁）之前的事件的日志。</span><span class="sxs-lookup"><span data-stu-id="d8552-108">Logs that list events preceding an incident, such as hard disk failure or server deadlocks.</span></span>  
  
-   <span data-ttu-id="d8552-109">说明客户将商品添加到在线零售商的购物车中的顺序的事务记录。</span><span class="sxs-lookup"><span data-stu-id="d8552-109">Transaction records that describe the order in which a customer adds items to a shopping cart at an online retailer.</span></span>  
  
-   <span data-ttu-id="d8552-110">根据一段时间内的客户（或患者）交互来预测服务取消或其他不良结果的记录。</span><span class="sxs-lookup"><span data-stu-id="d8552-110">Records that follow customer (or patient) interactions over time, to predict service cancellations or other poor outcomes.</span></span>  
  
 <span data-ttu-id="d8552-111">该算法在许多方面都类似于 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 聚类分析算法。</span><span class="sxs-lookup"><span data-stu-id="d8552-111">This algorithm is similar in many ways to the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm.</span></span> <span data-ttu-id="d8552-112">不过， [!INCLUDE[msCoName](../../includes/msconame-md.md)] 顺序分析和聚类分析算法不是查找包含类似属性的事例的分类，而是查找顺序中包含类似路径的事例的分类。</span><span class="sxs-lookup"><span data-stu-id="d8552-112">However, instead of finding clusters of cases that contain similar attributes, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Sequence Clustering algorithm finds clusters of cases that contain similar paths in a sequence.</span></span>  
  
## <a name="example"></a><span data-ttu-id="d8552-113">示例</span><span class="sxs-lookup"><span data-stu-id="d8552-113">Example</span></span>  
 <span data-ttu-id="d8552-114">网站将 [!INCLUDE[ssSampleDBCoFull](../../includes/sssampledbcofull-md.md)] 收集有关站点用户所访问的页面以及页面访问顺序的信息。</span><span class="sxs-lookup"><span data-stu-id="d8552-114">The [!INCLUDE[ssSampleDBCoFull](../../includes/sssampledbcofull-md.md)] Web site collects information about what pages site users visit, and about the order in which the pages are visited.</span></span> <span data-ttu-id="d8552-115">因为该公司提供在线订购，所以用户必须登录到此站点。</span><span class="sxs-lookup"><span data-stu-id="d8552-115">Because the company provides online ordering, customers must log in to the site.</span></span> <span data-ttu-id="d8552-116">这可以为该公司的各个客户配置文件提供点击信息。</span><span class="sxs-lookup"><span data-stu-id="d8552-116">This provides the company with click information for each customer profile.</span></span> <span data-ttu-id="d8552-117">通过对此数据使用 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 顺序分析和聚类分析算法，该公司可以查找具有相同的点击模式或点击顺序的客户组或分类。</span><span class="sxs-lookup"><span data-stu-id="d8552-117">By using the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Sequence Clustering algorithm on this data, the company can find groups, or clusters, of customers who have similar patterns or sequences of clicks.</span></span> <span data-ttu-id="d8552-118">然后，该公司可以使用这些分类来分析用户如何在网站中移动，来识别哪些页面与特定商品的销售关系最密切及预测接下来哪些页面最有可能被访问。</span><span class="sxs-lookup"><span data-stu-id="d8552-118">The company can then use these clusters to analyze how users move through the Web site, to identify which pages are most closely related to the sale of a particular product, and to predict which pages are most likely to be visited next.</span></span>  
  
## <a name="how-the-algorithm-works"></a><span data-ttu-id="d8552-119">算法的原理</span><span class="sxs-lookup"><span data-stu-id="d8552-119">How the Algorithm Works</span></span>  
 <span data-ttu-id="d8552-120">[!INCLUDE[msCoName](../../includes/msconame-md.md)] 顺序分析和聚类分析算法是一种混合算法，它综合了聚类分析方法和 Markov 链分析，以识别分类及其顺序。</span><span class="sxs-lookup"><span data-stu-id="d8552-120">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Sequence Clustering algorithm is a hybrid algorithm that combines clustering techniques with Markov chain analysis to identify clusters and their sequences.</span></span> <span data-ttu-id="d8552-121">[!INCLUDE[msCoName](../../includes/msconame-md.md)] 顺序分析和聚类分析算法的特点之一是使用顺序数据。</span><span class="sxs-lookup"><span data-stu-id="d8552-121">One of the hallmarks of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Sequence Clustering algorithm is that it uses sequence data.</span></span> <span data-ttu-id="d8552-122">此数据通常表示数据集中状态之间的一系列事件或转换，例如，特定用户的一系列产品购买或 Web 点击操作。</span><span class="sxs-lookup"><span data-stu-id="d8552-122">This data typically represents a series of events or transitions between states in a dataset, such as a series of product purchases or Web clicks for a particular user.</span></span> <span data-ttu-id="d8552-123">该算法会检查所有转换概率，并测量数据集中所有可能顺序之间的差异或距离，以确定最好使用哪些顺序作为聚类分析的输入。</span><span class="sxs-lookup"><span data-stu-id="d8552-123">The algorithm examines all transition probabilities and measures the differences, or distances, between all the possible sequences in the dataset to determine which sequences are the best to use as inputs for clustering.</span></span> <span data-ttu-id="d8552-124">在创建候选顺序列表后，该算法将该顺序信息用作聚类分析的 EM 方法的输入。</span><span class="sxs-lookup"><span data-stu-id="d8552-124">After the algorithm has created the list of candidate sequences, it uses the sequence information as an input for the EM method of clustering.</span></span>  
  
 <span data-ttu-id="d8552-125">有关实现的详细说明，请参阅 [Microsoft Sequence Clustering Algorithm Technical Reference](microsoft-sequence-clustering-algorithm-technical-reference.md)。</span><span class="sxs-lookup"><span data-stu-id="d8552-125">For a detailed description of the implementation, see [Microsoft Sequence Clustering Algorithm Technical Reference](microsoft-sequence-clustering-algorithm-technical-reference.md).</span></span>  
  
## <a name="data-required-for-sequence-clustering-models"></a><span data-ttu-id="d8552-126">顺序分析和聚类分析模型所必需的数据</span><span class="sxs-lookup"><span data-stu-id="d8552-126">Data Required for Sequence Clustering Models</span></span>  
 <span data-ttu-id="d8552-127">准备用于定型顺序分析和聚类分析模型的数据时，应理解特定算法的要求，其中包括所需要的数据量以及使用数据的方式。</span><span class="sxs-lookup"><span data-stu-id="d8552-127">When you prepare data for use in training a sequence clustering model, you should understand the requirements for the particular algorithm, including how much data is needed, and how the data is used.</span></span>  
  
 <span data-ttu-id="d8552-128">顺序分析和聚类分析模型的要求如下：</span><span class="sxs-lookup"><span data-stu-id="d8552-128">The requirements for a sequence clustering model are as follows:</span></span>  
  
-   <span data-ttu-id="d8552-129">**单个键列** 顺序分析和聚类分析模型需要一个用于标识记录的键。</span><span class="sxs-lookup"><span data-stu-id="d8552-129">**A single key column** A sequence clustering model requires a key that identifies records.</span></span>  
  
-   <span data-ttu-id="d8552-130">**顺序列** 对于顺序数据，模型必须具有包含顺序 ID 列的嵌套表。</span><span class="sxs-lookup"><span data-stu-id="d8552-130">**A sequence column** For sequence data, the model must have a nested table that contains a sequence ID column.</span></span> <span data-ttu-id="d8552-131">顺序 ID 可以为任何可排序的数据类型。</span><span class="sxs-lookup"><span data-stu-id="d8552-131">The sequence ID can be any sortable data types.</span></span> <span data-ttu-id="d8552-132">例如，可以使用数据类型为网页标识符、整数或文本字符串的列，只要该列可以标识顺序中的事件。</span><span class="sxs-lookup"><span data-stu-id="d8552-132">For example, you can use a Web page identifier, an integer, or a text string, as long as the column identifies the events in a sequence.</span></span> <span data-ttu-id="d8552-133">每个顺序只允许有一个顺序标识符，且每个模型中只允许有一种类型的顺序。</span><span class="sxs-lookup"><span data-stu-id="d8552-133">Only one sequence identifier is allowed for each sequence, and only one type of sequence is allowed in each model.</span></span>  
  
-   <span data-ttu-id="d8552-134">**可选的非顺序属性** 该算法支持添加与顺序无关的其他属性。</span><span class="sxs-lookup"><span data-stu-id="d8552-134">**Optional non sequence attributes** The algorithm supports the addition of other attributes that are not related to sequencing.</span></span> <span data-ttu-id="d8552-135">这些属性可以包含嵌套列。</span><span class="sxs-lookup"><span data-stu-id="d8552-135">These attributes can include nested columns.</span></span>  
  
 <span data-ttu-id="d8552-136">例如，在前面引用的 [!INCLUDE[ssSampleDBCoFull](../../includes/sssampledbcofull-md.md)] 网站的示例中，顺序分析和聚类分析模型可以包含订单信息（作为事例表）、每个订单的具体客户的人口统计数据（作为非顺序属性）以及包含客户浏览网站和将商品放入购物车的顺序的嵌套表（作为顺序信息）。</span><span class="sxs-lookup"><span data-stu-id="d8552-136">For example, in the example cited earlier of the [!INCLUDE[ssSampleDBCoFull](../../includes/sssampledbcofull-md.md)] Web site, a sequence clustering model might include order information as the case table, demographics about the specific customer for each order as non-sequence attributes, and a nested table containing the sequence in which the customer browsed the site or put items into a shopping cart as the sequence information.</span></span>  
  
 <span data-ttu-id="d8552-137">有关顺序分析和聚类分析模型支持的内容类型和数据类型的详细信息，请参阅 [Microsoft 顺序分析和聚类分析算法技术参考](microsoft-sequence-clustering-algorithm-technical-reference.md)的“要求”一节。</span><span class="sxs-lookup"><span data-stu-id="d8552-137">For more detailed information about the content types and data types supported for sequence clustering models, see the Requirements section of [Microsoft Sequence Clustering Algorithm Technical Reference](microsoft-sequence-clustering-algorithm-technical-reference.md).</span></span>  
  
## <a name="viewing-a-sequence-clustering-model"></a><span data-ttu-id="d8552-138">查看顺序分析和聚类分析模型</span><span class="sxs-lookup"><span data-stu-id="d8552-138">Viewing a Sequence Clustering Model</span></span>  
 <span data-ttu-id="d8552-139">该算法创建的挖掘模型在数据中包含了最常见顺序的说明。</span><span class="sxs-lookup"><span data-stu-id="d8552-139">The mining model that this algorithm creates contains descriptions of the most common sequences in the data.</span></span> <span data-ttu-id="d8552-140">若要浏览该模型，可以使用 **Microsoft 序列分类查看器**。</span><span class="sxs-lookup"><span data-stu-id="d8552-140">To explore the model, you can use the **Microsoft Sequence Cluster Viewer**.</span></span> <span data-ttu-id="d8552-141">查看顺序分析和聚类分析模型时， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 显示包含多个转换的分类。</span><span class="sxs-lookup"><span data-stu-id="d8552-141">When you view a sequence clustering model, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] shows you clusters that contain multiple transitions.</span></span> <span data-ttu-id="d8552-142">您还可以查看相关的统计信息。</span><span class="sxs-lookup"><span data-stu-id="d8552-142">You can also view pertinent statistics.</span></span> <span data-ttu-id="d8552-143">有关详细信息，请参阅 [使用 Microsoft 序列分类查看器浏览模型](browse-a-model-using-the-microsoft-sequence-cluster-viewer.md)。</span><span class="sxs-lookup"><span data-stu-id="d8552-143">For more information, see [Browse a Model Using the Microsoft Sequence Cluster Viewer](browse-a-model-using-the-microsoft-sequence-cluster-viewer.md).</span></span>  
  
 <span data-ttu-id="d8552-144">如果希望了解更多详细信息，可在 [Microsoft 一般内容树查看器](browse-a-model-using-the-microsoft-generic-content-tree-viewer.md)中浏览该模型。</span><span class="sxs-lookup"><span data-stu-id="d8552-144">If you want to know more detail, you can browse the model in the [Microsoft Generic Content Tree Viewer](browse-a-model-using-the-microsoft-generic-content-tree-viewer.md).</span></span> <span data-ttu-id="d8552-145">为该模型存储的内容包括每个节点中所有值的分布情况、每个分类的概率以及有关转换的详细信息。</span><span class="sxs-lookup"><span data-stu-id="d8552-145">The content stored for the model includes the distribution for all values in each node, the probability of each cluster, and details about the transitions.</span></span> <span data-ttu-id="d8552-146">有关详细信息，请参阅 [顺序分析和聚类分析模型的挖掘模型内容（Analysis Services - 数据挖掘）](mining-model-content-for-sequence-clustering-models.md)。</span><span class="sxs-lookup"><span data-stu-id="d8552-146">For more information, see [Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;](mining-model-content-for-sequence-clustering-models.md).</span></span>  
  
## <a name="creating-predictions"></a><span data-ttu-id="d8552-147">创建预测</span><span class="sxs-lookup"><span data-stu-id="d8552-147">Creating Predictions</span></span>  
 <span data-ttu-id="d8552-148">对模型进行定型后，结果将存储为一组模式。</span><span class="sxs-lookup"><span data-stu-id="d8552-148">After the model has been trained, the results are stored as a set of patterns.</span></span> <span data-ttu-id="d8552-149">您可以使用数据中最常见顺序的说明来预测新顺序的下一个可能步骤。</span><span class="sxs-lookup"><span data-stu-id="d8552-149">You can use the descriptions of the most common sequences in the data to predict the next likely step of a new sequence.</span></span> <span data-ttu-id="d8552-150">但是，因为该算法包括了其他列，所以您可以使用得到的模型来识别顺序数据和非顺序输入之间的关系。</span><span class="sxs-lookup"><span data-stu-id="d8552-150">However, because the algorithm includes other columns, you can use the resulting model to identify relationships between sequenced data and inputs that are not sequential.</span></span> <span data-ttu-id="d8552-151">例如，您可以向模型添加客户的人口统计数据，还可以进行针对特定客户群体的预测。</span><span class="sxs-lookup"><span data-stu-id="d8552-151">For example, if you add demographic data to the model, you can make predictions for specific groups of customers.</span></span> <span data-ttu-id="d8552-152">可以自定义预测查询，以便返回数目可变的预测或返回说明性的统计信息。</span><span class="sxs-lookup"><span data-stu-id="d8552-152">Prediction queries can be customized to return a variable number of predictions, or to return descriptive statistics.</span></span>  
  
 <span data-ttu-id="d8552-153">有关如何创建针对数据挖掘模型的查询的信息，请参阅 [数据挖掘查询](data-mining-queries.md)。</span><span class="sxs-lookup"><span data-stu-id="d8552-153">For information about how to create queries against a data mining model, see [Data Mining Queries](data-mining-queries.md).</span></span> <span data-ttu-id="d8552-154">有关如何针对顺序分析和聚类分析模型使用查询的示例，请参阅 [顺序分析和聚类分析模型查询示例](clustering-model-query-examples.md)。</span><span class="sxs-lookup"><span data-stu-id="d8552-154">For examples of how to use queries with a sequence clustering model, see [Sequence Clustering Model Query Examples](clustering-model-query-examples.md).</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="d8552-155">备注</span><span class="sxs-lookup"><span data-stu-id="d8552-155">Remarks</span></span>  
  
-   <span data-ttu-id="d8552-156">不支持使用预测模型标记语言 (PMML) 创建挖掘模型。</span><span class="sxs-lookup"><span data-stu-id="d8552-156">Does not support the use of Predictive Model Markup Language (PMML) to create mining models.</span></span>  
  
-   <span data-ttu-id="d8552-157">支持钻取。</span><span class="sxs-lookup"><span data-stu-id="d8552-157">Supports drillthrough.</span></span>  
  
-   <span data-ttu-id="d8552-158">支持使用 OLAP 挖掘模型和创建数据挖掘维度。</span><span class="sxs-lookup"><span data-stu-id="d8552-158">Supports the use of OLAP mining models and the creation of data mining dimensions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d8552-159">另请参阅</span><span class="sxs-lookup"><span data-stu-id="d8552-159">See Also</span></span>  
 <span data-ttu-id="d8552-160">[数据挖掘算法 &#40;Analysis Services 数据挖掘&#41;](data-mining-algorithms-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="d8552-160">[Data Mining Algorithms &#40;Analysis Services - Data Mining&#41;](data-mining-algorithms-analysis-services-data-mining.md) </span></span>  
 <span data-ttu-id="d8552-161">[Microsoft 顺序分析和聚类分析算法技术参考](microsoft-sequence-clustering-algorithm-technical-reference.md) </span><span class="sxs-lookup"><span data-stu-id="d8552-161">[Microsoft Sequence Clustering Algorithm Technical Reference](microsoft-sequence-clustering-algorithm-technical-reference.md) </span></span>  
 <span data-ttu-id="d8552-162">[顺序分析和聚类分析模型查询示例](clustering-model-query-examples.md) </span><span class="sxs-lookup"><span data-stu-id="d8552-162">[Sequence Clustering Model Query Examples](clustering-model-query-examples.md) </span></span>  
 [<span data-ttu-id="d8552-163">使用 Microsoft 序列分类查看器浏览模型</span><span class="sxs-lookup"><span data-stu-id="d8552-163">Browse a Model Using the Microsoft Sequence Cluster Viewer</span></span>](browse-a-model-using-the-microsoft-sequence-cluster-viewer.md)  
  
  
