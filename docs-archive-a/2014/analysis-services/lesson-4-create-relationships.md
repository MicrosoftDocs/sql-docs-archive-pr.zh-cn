---
title: 第5课：创建关系 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
ms.openlocfilehash: f622f88d4d400fedf24e99059eda94882b1bcc3f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87690849"
---
# <a name="lesson-5-create-relationships"></a><span data-ttu-id="ba3fd-102">第 5 课：创建关系</span><span class="sxs-lookup"><span data-stu-id="ba3fd-102">Lesson 5: Create Relationships</span></span>
  <span data-ttu-id="ba3fd-103">在本课中，将验证导入数据时自动创建的关系并在不同表之间添加新关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-103">In this lesson, you will verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="ba3fd-104">关系是在两个表之间建立的连接，用于确立这些表中的数据应该如何相关。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-104">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="ba3fd-105">例如，Product 表和 Product Subcategory 表基于每个产品属于某个子类别的事实具有某种关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-105">For example, the Product table and the Product Subcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="ba3fd-106">有关详细信息，请参阅[关系（SSAS 表格）](tabular-models/relationships-ssas-tabular.md)</span><span class="sxs-lookup"><span data-stu-id="ba3fd-106">To learn more, see [Relationships &#40;SSAS Tabular&#41;](tabular-models/relationships-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="ba3fd-107">本课预计完成时间：**10 分钟**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-107">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="ba3fd-108">必备条件</span><span class="sxs-lookup"><span data-stu-id="ba3fd-108">Prerequisites</span></span>  
 <span data-ttu-id="ba3fd-109">本主题是表格建模教程的一部分，应当按顺序完成。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-109">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="ba3fd-110">执行本课中的任务之前，应已完成上一课： [第 3 课：重命名列](rename-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-110">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Rename Columns](rename-columns.md).</span></span>  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="ba3fd-111">查看现有关系并添加新关系</span><span class="sxs-lookup"><span data-stu-id="ba3fd-111">Review Existing Relationships and Add New Relationships</span></span>  
 <span data-ttu-id="ba3fd-112">当您使用“表导入向导”导入数据时，从 AdventureWorksDW 数据库导入了七个表。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-112">When you imported data by using the Table Import Wizard, you imported seven tables from the AdventureWorksDW database.</span></span> <span data-ttu-id="ba3fd-113">通常，如果您从关系源中导入数据，则将自动导入现有关系以及数据。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-113">Generally, if you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="ba3fd-114">但是，在继续创作模型之前，应验证是否已正确创建表之间的这些关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-114">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="ba3fd-115">对于本教程，您还会添加三个新关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-115">For this tutorial, you will also add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="ba3fd-116">查看现有关系</span><span class="sxs-lookup"><span data-stu-id="ba3fd-116">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="ba3fd-117">在 [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] 中，单击“模型”\*\*\*\* 菜单，然后指向“模型视图”\*\*\*\*，再单击“关系图视图”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-117">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click on the **Model** menu, then point to **Model View**, and then click **Diagram View**.</span></span>  
  
     <span data-ttu-id="ba3fd-118">模型设计器现在以关系图视图显示，这是一种图形格式，显示已导入的所有表，并在这些表之间添加线条。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-118">The model designer now appears in Diagram View, a graphical format displaying all of the tables you imported with lines between them.</span></span> <span data-ttu-id="ba3fd-119">表之间的线条指示当您导入数据时自动创建的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-119">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>  
  
     <span data-ttu-id="ba3fd-120">使用模型设计器右上角的 minimap 控件可调整此视图，以包括尽可能多的表。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-120">Use the minimap controls in the upper-right corner of the model designer to adjust the view to include as many of the tables as possible.</span></span> <span data-ttu-id="ba3fd-121">还可以单击表并将其拖放到不同的位置，使表更加相互靠近，或者按特定的顺序排列它们。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-121">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="ba3fd-122">移动表不会影响表之间已存在的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-122">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="ba3fd-123">若要查看特定表中的所有列，请单击并拖动表边缘以展开或使其变小。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-123">To view all of the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="ba3fd-124">单击 **Customer** 表与 **Geography** 表之间的实线。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-124">Click on the solid line between the **Customer** table and the **Geography** table.</span></span> <span data-ttu-id="ba3fd-125">这两个表之间的实线表明此关系处于活动状态，也即，当计算 DAX 公式时，默认情况下将使用此关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-125">The solid line between these two tables show this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
     <span data-ttu-id="ba3fd-126">请注意， **Customer** 表中的 **Geography Id** 列和 **Geography** 表中的 **Geography Id** 列现在同时出现在一个框中。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-126">Notice the **Geography Id** column in the **Customer** table and the **Geography Id** column in the **Geography** table now both each appear within a box.</span></span> <span data-ttu-id="ba3fd-127">这表明这些列是在关系中使用的列。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-127">This shows these are the columns used in the relationship.</span></span> <span data-ttu-id="ba3fd-128">关系的属性现在也显示在 "**属性**" 窗口中。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-128">The relationship's properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="ba3fd-129">除了在关系图视图中使用模型设计器以外，还可以使用 "**管理关系**" 对话框以表格格式显示所有表之间的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-129">In addition to using the model designer in diagram view, you can also use the **Manage Relationships** dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="ba3fd-130">单击“表”\*\*\*\* 菜单，然后单击“管理关系”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-130">Click on the **Table** menu, and then click **Manage Relationships**.</span></span> <span data-ttu-id="ba3fd-131">“管理关系”\*\*\*\* 对话框显示导入数据时自动创建的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-131">The **Manage Relationships** dialog box shows the relationships that were automatically created when you imported data.</span></span>  
  
3.  <span data-ttu-id="ba3fd-132">使用 "关系图" 视图中的模型设计器或 "**管理关系**" 对话框，验证在从 AdventureWorksDW 数据库导入每个表时创建的以下关系：</span><span class="sxs-lookup"><span data-stu-id="ba3fd-132">Use the model designer in diagram view, or the **Manage Relationships** dialog box, to verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="ba3fd-133">活动</span><span class="sxs-lookup"><span data-stu-id="ba3fd-133">Active</span></span>|<span data-ttu-id="ba3fd-134">表</span><span class="sxs-lookup"><span data-stu-id="ba3fd-134">Table</span></span>|<span data-ttu-id="ba3fd-135">相关查找表</span><span class="sxs-lookup"><span data-stu-id="ba3fd-135">Related Lookup Table</span></span>|  
    |------------|-----------|--------------------------|  
    |<span data-ttu-id="ba3fd-136">是</span><span class="sxs-lookup"><span data-stu-id="ba3fd-136">Yes</span></span>|<span data-ttu-id="ba3fd-137">**Customer [Geography Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-137">**Customer [Geography Id]**</span></span>|<span data-ttu-id="ba3fd-138">**Geography [Geography Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-138">**Geography [Geography Id]**</span></span>|  
    |<span data-ttu-id="ba3fd-139">是</span><span class="sxs-lookup"><span data-stu-id="ba3fd-139">Yes</span></span>|<span data-ttu-id="ba3fd-140">**Product [Product Subcategory Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-140">**Product [Product Subcategory Id]**</span></span>|<span data-ttu-id="ba3fd-141">**Product Subcategory [Product Subcategory Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-141">**Product Subcategory [Product Subcategory Id]**</span></span>|  
    |<span data-ttu-id="ba3fd-142">是</span><span class="sxs-lookup"><span data-stu-id="ba3fd-142">Yes</span></span>|<span data-ttu-id="ba3fd-143">**Product Subcategory [Product Category Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-143">**Product Subcategory [Product Category Id]**</span></span>|<span data-ttu-id="ba3fd-144">**Product Category [Product Category Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-144">**Product Category [Product Category Id]**</span></span>|  
    |<span data-ttu-id="ba3fd-145">是</span><span class="sxs-lookup"><span data-stu-id="ba3fd-145">Yes</span></span>|<span data-ttu-id="ba3fd-146">**Internet Sales [Customer Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-146">**Internet Sales [Customer Id]**</span></span>|<span data-ttu-id="ba3fd-147">**Customer [Customer Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-147">**Customer [Customer Id]**</span></span>|  
    |<span data-ttu-id="ba3fd-148">是</span><span class="sxs-lookup"><span data-stu-id="ba3fd-148">Yes</span></span>|<span data-ttu-id="ba3fd-149">**Internet Sales [Product Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-149">**Internet Sales [Product Id]**</span></span>|<span data-ttu-id="ba3fd-150">**Product [Product Id]**</span><span class="sxs-lookup"><span data-stu-id="ba3fd-150">**Product [Product Id]**</span></span>|  
  
 <span data-ttu-id="ba3fd-151">如果上述表中的任何关系缺失，请验证您的模型包括以下各表：Customer、Date、Geography、Product、Product Category、Product Subcategory 和 Internet Sales。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-151">If any of the relationships in the table above are missing, verify that your model includes the following tables: Customer, Date, Geography, Product, Product Category, Product Subcategory, and Internet Sales.</span></span> <span data-ttu-id="ba3fd-152">如果将同一数据源连接中的表导入为独立的项，则不会创建这些表之间的任何关系，而必须手动创建。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-152">If tables from the same data source connection are imported at separate times, any relationships between those tables will not be created and must be created manually.</span></span>  
  
 <span data-ttu-id="ba3fd-153">在某些情况下，可能需要在模型中的表之间创建更多关系，以支持特定的业务逻辑。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-153">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="ba3fd-154">对于本教程，您需要在 Internet Sales 表与 Date 表之间创建三个其他关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-154">For this tutorial, you need to create three additional relationships between the Internet Sales table and the Date table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="ba3fd-155">在表之间添加新关系</span><span class="sxs-lookup"><span data-stu-id="ba3fd-155">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="ba3fd-156">在模型设计器中，在 **Internet Sales** 表中单击并按住 **Order Date** 列，将光标拖到 **Date** 表中的 **Date** 列，然后松开。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-156">In the model designer, in the **Internet Sales** table, click and hold on the **Order Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="ba3fd-157">将显示一条实线，说明已在 **Internet Sales** 表的 **Order Date** 列与 **Date** 表的 **Date** 列之间创建了活动的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-157">A solid line appears showing you have created an active relationship between the **Order Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ba3fd-158">当创建关系时，将自动正确地排列主表与相关查找表之间的顺序。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-158">When creating relationships, the order between the primary table and the related lookup table is automatically put in the correct order.</span></span>  
  
2.  <span data-ttu-id="ba3fd-159">在 **Internet Sales** 表中单击并按住 **Due Date** 列，将光标拖到 **Date** 表中的 **Date** 列，然后松开。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-159">In the **Internet Sales** table, click and hold on the **Due Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="ba3fd-160">将显示一条点划线，说明已在 **Internet Sales** 表的 **Due Date** 列与 **Date** 表的 **Date** 列之间创建了非活动的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-160">A dotted line appears showing you have created an inactive relationship between the **Due Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span> <span data-ttu-id="ba3fd-161">可以在表之间创建多个关系，但每次只能有一个关系处于活动状态。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-161">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span>  
  
3.  <span data-ttu-id="ba3fd-162">最后，再创建一个关系；在 **Internet Sales** 表中单击并按住 **Ship Date** 列，将光标拖到 **Date** 表中的 **Date** 列，然后松开。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-162">Finally, create one more relationship; in the **Internet Sales** table, click and hold on the **Ship Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="ba3fd-163">将显示一条点划线，说明已在 **Internet Sales** 表的 **Ship Date** 列与 **Date** 表的 **Date** 列之间创建了非活动的关系。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-163">A dotted line appears showing you have created an inactive relationship between the **Ship Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
## <a name="next-step"></a><span data-ttu-id="ba3fd-164">下一步</span><span class="sxs-lookup"><span data-stu-id="ba3fd-164">Next Step</span></span>  
 <span data-ttu-id="ba3fd-165">若要继续学习本课程，请转到下一课： [第 6 课：创建计算列](lesson-5-create-calculated-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="ba3fd-165">To continue this lesson, go to the next lesson: [Lesson 6: Create Calculated Columns](lesson-5-create-calculated-columns.md).</span></span>  
  
  
