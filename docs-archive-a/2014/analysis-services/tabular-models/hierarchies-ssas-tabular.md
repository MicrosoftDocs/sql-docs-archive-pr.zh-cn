---
title: " (SSAS 表格) 的层次结构 |Microsoft Docs"
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e3e50e89-f85d-485b-a271-1e0550520212
author: minewiskan
ms.author: owend
ms.openlocfilehash: a50b014dd6096b0bfa66ff34389789fcd34efdae
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687232"
---
# <a name="hierarchies-ssas-tabular"></a><span data-ttu-id="7d6e0-102">层次结构（SSAS 表格）</span><span class="sxs-lookup"><span data-stu-id="7d6e0-102">Hierarchies (SSAS Tabular)</span></span>
  <span data-ttu-id="7d6e0-103">在表格模型中，层次结构是定义表中两个或更多列之间的关系的元数据。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-103">Hierarchies, in tabular models, are metadata that define relationships between two or more columns in a table.</span></span> <span data-ttu-id="7d6e0-104">层次结构可与报表客户端字段列表中的其他列单独出现，使客户端用户可以更方便地在报表中导航和包含数据。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-104">Hierarchies can appear separate from other columns in a reporting client field list, making them easier for client users to navigate and include in a report.</span></span>  
  
 <span data-ttu-id="7d6e0-105">本主题的内容：</span><span class="sxs-lookup"><span data-stu-id="7d6e0-105">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="7d6e0-106">优点</span><span class="sxs-lookup"><span data-stu-id="7d6e0-106">Benefits</span></span>](#bkmk_benefits)  
  
-   [<span data-ttu-id="7d6e0-107">定义层次结构</span><span class="sxs-lookup"><span data-stu-id="7d6e0-107">Defining Hierarchies</span></span>](#bkmk_define)  
  
-   [<span data-ttu-id="7d6e0-108">相关任务</span><span class="sxs-lookup"><span data-stu-id="7d6e0-108">Related Tasks</span></span>](#bkmk_related_tasks)  
  
##  <a name="benefits"></a><a name="bkmk_benefits"></a> <span data-ttu-id="7d6e0-109">优势</span><span class="sxs-lookup"><span data-stu-id="7d6e0-109">Benefits</span></span>  
 <span data-ttu-id="7d6e0-110">表可以包括几十甚至数百个其名称不寻常并且没有明显顺序的列。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-110">Tables can include dozens or even hundreds of columns with unusual column names in no apparent order.</span></span> <span data-ttu-id="7d6e0-111">这可能导致报表客户端字段列表显得未排序，从而使用户很难找到报表中的数据和在报表中包含数据。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-111">This can lead to an unordered appearance in reporting client field lists, making it difficult for users to find and include data in a report.</span></span> <span data-ttu-id="7d6e0-112">层次结构可以提供复杂数据结构的简单、直观的视图。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-112">Hierarchies can provide a simple, intuitive view of an otherwise complex data structure.</span></span>  
  
 <span data-ttu-id="7d6e0-113">例如，在日期表中，您可以创建日历层次结构。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-113">For example, in a Date table, you can create a Calendar hierarchy.</span></span> <span data-ttu-id="7d6e0-114">日历年用作最顶层的父级，月、周和日作为子级包括（日历年->月->周->日）。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-114">Calendar Year is used as the top-most parent level, with Month, Week, and Day included as child levels (Calendar Year->Month->Week->Day).</span></span> <span data-ttu-id="7d6e0-115">此层次结构显示了从日历年到日的逻辑关系。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-115">This hierarchy shows a logical relationship from Calendar Year to Day.</span></span> <span data-ttu-id="7d6e0-116">然后，客户端用户可以从字段列表中选择“日历年”，以便包含某一数据透视表中的所有级别；或者展开层次结构，并且仅选择要在该数据透视表中包含的特定级别。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-116">A client user can then select Calendar Year from a Field List to include all levels in a PivotTable, or expand the hierarchy, and select only particular levels to be included in the PivotTable.</span></span>  
  
 <span data-ttu-id="7d6e0-117">因为层次结构中的每个级别都表示表中的一个列，所以可对其进行重命名。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-117">Because each level in a hierarchy is a representation of a column in a table, the level can be renamed.</span></span> <span data-ttu-id="7d6e0-118">尽管并非层次结构所独有（任何列都可以在表格模型中重命名），但重命名层次结构级别可使用户更轻松地找到报表中的级别和在报表中包含级别。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-118">While not exclusive to hierarchies (any column can be renamed in a tabular model), renaming hierarchy levels can make it easier for users to find and include levels in a report.</span></span> <span data-ttu-id="7d6e0-119">重命名一个级别并不重命名该级别引用的列；重命名只是使级别更容易识别。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-119">Renaming a level does not rename the column it references; it simply makes the level more identifiable.</span></span> <span data-ttu-id="7d6e0-120">以我们的“日历年”层次结构为例，在数据视图的日期表中，列 CalendarYear、CalendarMonth、CalendarWeek 和 CalendarDay 已重命名为“日历年”、“月”、“周”和“日”，以使它们更易于识别。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-120">In our Calendar Year hierarchy example, in the Date table in Data View, the columns: CalendarYear, CalendarMonth, CalendarWeek, and CalendarDay were renamed to Calendar Year, Month, Week, and Day to make them more easily identifiable.</span></span> <span data-ttu-id="7d6e0-121">重命名级别还带来另外一个好处，即在报表中提供一致性，因为用户不太可能需要更改列名以使它们在数据透视表、图表等中可读性更强。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-121">Renaming levels has the additional benefit of providing consistency in reports, since users will less likely need to change column names to make them more readable in PivotTables, charts, etc.</span></span>  
  
 <span data-ttu-id="7d6e0-122">层次结构可包括在透视中。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-122">Hierarchies can be included in perspectives.</span></span> <span data-ttu-id="7d6e0-123">透视定义某一模型的可查看子集，借此您可以将注意力集中在该模型中的特定业务或特定应用上。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-123">Perspectives define viewable subsets of a model that provide focused, business-specific, or application-specific viewpoints of the model.</span></span> <span data-ttu-id="7d6e0-124">例如，透视可以向用户提供仅由满足其特定报表要求所需的数据项构成的可查看列表（层次结构）。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-124">A perspective, for example, could provide users a viewable list (hierarchy) of only those data items necessary for their specific reporting requirements.</span></span> <span data-ttu-id="7d6e0-125">有关详细信息，请参阅 [透视表（SSAS 表格）](perspectives-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-125">For more information, see [Perspectives &#40;SSAS Tabular&#41;](perspectives-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="7d6e0-126">层次结构的用途不是为了作为一种安全机制，而是作为一个可为用户提供更好体验的工具。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-126">Hierarchies are not meant to be used as a security mechanism, but as a tool for providing a better user experience.</span></span> <span data-ttu-id="7d6e0-127">特定层次结构的所有安全性都从基础模型继承。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-127">All security for a particular hierarchy is inherited from the underlying model.</span></span> <span data-ttu-id="7d6e0-128">层次结构无法让用户访问该用户尚未拥有访问权的模型对象。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-128">Hierarchies cannot provide access to model objects to which a user does not already have access.</span></span> <span data-ttu-id="7d6e0-129">必须先解决模型数据库的安全性，然后才能通过层次结构访问模型中的对象。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-129">Security for the model database must be resolved before access to objects in the model can be provided through a hierarchy.</span></span> <span data-ttu-id="7d6e0-130">安全角色可用于保护模型元数据和数据。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-130">Security roles can be used to secure model metadata and data.</span></span> <span data-ttu-id="7d6e0-131">有关详细信息，请参阅 [角色（SSAS 表格）](roles-ssas-tabular.md)中创建的表格模型项目。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-131">For more information, see [Roles &#40;SSAS Tabular&#41;](roles-ssas-tabular.md).</span></span>  
  
##  <a name="defining-hierarchies"></a><a name="bkmk_define"></a><span data-ttu-id="7d6e0-132">定义层次结构</span><span class="sxs-lookup"><span data-stu-id="7d6e0-132">Defining Hierarchies</span></span>  
 <span data-ttu-id="7d6e0-133">可以通过在关系图视图中使用模型设计器来创建和管理层次结构。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-133">You create and manage hierarchies by using the model designer in Diagram View.</span></span> <span data-ttu-id="7d6e0-134">在数据视图的模型设计器中不支持创建和管理层次结构。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-134">Creating and managing hierarchies is not supported in the model designer in Data View.</span></span> <span data-ttu-id="7d6e0-135">若要在“关系图视图”中查看模型设计器，请单击 **“模型”** 菜单，然后指向 **“模型视图”**，再单击 **“关系图视图”**。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-135">To view the model designer in Diagram View, click the **Model** menu, then point to **Model View**, and then click **Diagram View**.</span></span>  
  
 <span data-ttu-id="7d6e0-136">若要创建某一层次结构，请在要指定为父级别的列上右键单击，然后单击“创建层次结构”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-136">To create a hierarchy, right-click a column you want to specify as the parent level, and then click **Create Hierarchy**.</span></span> <span data-ttu-id="7d6e0-137">您可以多选要包含的任何数目的列（在单个表内），或者可在以后通过单击列并将列拖到父级别，将列作为子级别添加。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-137">You can multi-select any number of columns (within a single table) to include, or you can later add columns as child levels by clicking and dragging columns to the parent level.</span></span> <span data-ttu-id="7d6e0-138">当选择多个列时，列会基于基数自动按某一顺序放置。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-138">When multiple columns are selected, columns are automatically placed in an order based on cardinality.</span></span> <span data-ttu-id="7d6e0-139">您可以通过单击并将某一列（级别）拖动到其他顺序，或者通过使用上下文菜单中的向上和向下导航控件，更改该顺序。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-139">You can change the order by clicking and dragging a column (level) to a different order or by using Up and Down navigation controls on the context menu.</span></span> <span data-ttu-id="7d6e0-140">在将列作为子级别添加时，您可以通过将该列拖放到父级别，使用自动检测。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-140">When adding a column as a child level, you can use auto-detect by dragging and dropping the column onto the parent level.</span></span>  
  
 <span data-ttu-id="7d6e0-141">一个列可以出现在多个层次结构中。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-141">A column can appear in more than one hierarchy.</span></span> <span data-ttu-id="7d6e0-142">层次结构中不能包含度量值或 KPI 之类的非列对象。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-142">Hierarchies cannot include non-column objects such as measures or KPIs.</span></span> <span data-ttu-id="7d6e0-143">层次结构可以仅基于来自单个表内的列。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-143">A hierarchy can be based on columns from within a single table only.</span></span> <span data-ttu-id="7d6e0-144">如果多选度量值以及一个或多个列，或者如果从多个表中选择列，则在上下文菜单中将禁用“创建层次结构”\*\*\*\* 命令。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-144">If you multi-select a measure along with one or more columns, or if you select columns from multiple tables, the **Create Hierarchy** command is disabled in the context menu.</span></span> <span data-ttu-id="7d6e0-145">若要从不同表中添加列，请使用 RELATED DAX 函数添加引用来自相关表的列的计算列。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-145">To add a column from a different table, use the RELATED DAX function to add a calculated column that references the column from the related table.</span></span> <span data-ttu-id="7d6e0-146">该函数使用以下语法： `=RELATED(TableName[ColumnName])`。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-146">The function uses the following syntax: `=RELATED(TableName[ColumnName])`.</span></span> <span data-ttu-id="7d6e0-147">有关详细信息，请参阅 RELATED 函数。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-147">For more information, see RELATED Function.</span></span>  
  
 <span data-ttu-id="7d6e0-148">默认情况下，新的层次结构将命名为 hierarchy1、hierarchy2，依此类推。您应更改层次结构名称以便反映父子关系的特性，使其更易于为用户识别。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-148">By default, new hierarchies are named hierarchy1, hierarchy 2, etc. You should change hierarchy names to reflect the nature of the parent-child relationship, making them more identifiable to users.</span></span>  
  
 <span data-ttu-id="7d6e0-149">创建层次结构后，可以使用“在 Excel 中分析”功能来测试其效能。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-149">After you have created hierarchies, you can test their efficacy by using the Analyze in Excel feature.</span></span> <span data-ttu-id="7d6e0-150">有关详细信息，请参阅本主题后面的 [在 Excel 中分析（SSAS 表格）](analyze-in-excel-ssas-tabular.md)中的“角色管理器”对话框定义角色的表格模型作者。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-150">For more information, see [Analyze in Excel &#40;SSAS Tabular&#41;](analyze-in-excel-ssas-tabular.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="bkmk_related_tasks"></a> <span data-ttu-id="7d6e0-151">相关任务</span><span class="sxs-lookup"><span data-stu-id="7d6e0-151">Related Tasks</span></span>  
  
|<span data-ttu-id="7d6e0-152">任务</span><span class="sxs-lookup"><span data-stu-id="7d6e0-152">Task</span></span>|<span data-ttu-id="7d6e0-153">说明</span><span class="sxs-lookup"><span data-stu-id="7d6e0-153">Description</span></span>|  
|----------|-----------------|  
|[<span data-ttu-id="7d6e0-154">创建和管理层次结构（SSAS 表格）</span><span class="sxs-lookup"><span data-stu-id="7d6e0-154">Create and Manage Hierarchies &#40;SSAS Tabular&#41;</span></span>](hierarchies-ssas-tabular.md)|<span data-ttu-id="7d6e0-155">介绍如何通过在关系图视图中使用模型设计器来创建和管理层次结构。</span><span class="sxs-lookup"><span data-stu-id="7d6e0-155">Describes how to create and manage hierarchies by using the model designer in Diagram View.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="7d6e0-156">另请参阅</span><span class="sxs-lookup"><span data-stu-id="7d6e0-156">See Also</span></span>  
 <span data-ttu-id="7d6e0-157">[&#40;SSAS 表格&#41;的表格模型设计器](../tabular-model-designer-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="7d6e0-157">[Tabular Model Designer &#40;SSAS Tabular&#41;](../tabular-model-designer-ssas-tabular.md) </span></span>  
 <span data-ttu-id="7d6e0-158">[SSAS 表格&#41;&#40;透视](perspectives-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="7d6e0-158">[Perspectives &#40;SSAS Tabular&#41;](perspectives-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="7d6e0-159">角色（SSAS 表格）</span><span class="sxs-lookup"><span data-stu-id="7d6e0-159">Roles &#40;SSAS Tabular&#41;</span></span>](roles-ssas-tabular.md)  
  
  
