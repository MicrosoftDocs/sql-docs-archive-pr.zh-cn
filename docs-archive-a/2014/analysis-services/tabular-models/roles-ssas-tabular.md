---
title: " (SSAS 表格) 的角色 |Microsoft Docs"
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e547382a-c064-4bc6-818c-5127890af334
author: minewiskan
ms.author: owend
ms.openlocfilehash: 0293bf6d9ac4ee71df34ece92672311ca9f90436
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87682394"
---
# <a name="roles-ssas-tabular"></a><span data-ttu-id="f3a98-102">角色（SSAS 表格）</span><span class="sxs-lookup"><span data-stu-id="f3a98-102">Roles (SSAS Tabular)</span></span>
  <span data-ttu-id="f3a98-103">在表格模型中，角色定义模型的成员权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-103">Roles, in tabular models, define member permissions for a model.</span></span> <span data-ttu-id="f3a98-104">每个角色都包含成员（按 Windows 用户名或按 Windows 组）和权限（读取、处理、管理员）。</span><span class="sxs-lookup"><span data-stu-id="f3a98-104">Each role contains members, by Windows username or by Windows group, and permissions (read, process, administrator).</span></span> <span data-ttu-id="f3a98-105">该角色的成员可按照角色权限的定义对模型执行操作。</span><span class="sxs-lookup"><span data-stu-id="f3a98-105">Members of the role can perform actions on the model as defined by the role permission.</span></span> <span data-ttu-id="f3a98-106">使用读取权限定义的角色也可以通过使用行级别筛选器在行级别提供附加的安全性。</span><span class="sxs-lookup"><span data-stu-id="f3a98-106">Roles defined with read permissions can also provide additional security at the row-level by using row-level filters.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f3a98-107">为使用户通过使用报表或数据分析客户端应用程序连接到已部署的模型，您必须创建这些用户是其成员的至少一个角色并且该角色至少具有读取权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-107">In-order for users to connect to a deployed model by using a reporting or data analysis client application, you must create at least one role with at least Read permission to which those users are members.</span></span>  
  
 <span data-ttu-id="f3a98-108">本主题中的信息面向通过使用 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]中的“角色管理器”对话框定义角色的表格模型作者。</span><span class="sxs-lookup"><span data-stu-id="f3a98-108">Information in this topic is meant for tabular model authors who define roles by using the Role Manager dialog box in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="f3a98-109">在模型创作期间定义的角色适用于模型工作区数据库。</span><span class="sxs-lookup"><span data-stu-id="f3a98-109">Roles defined during model authoring apply to the model workspace database.</span></span> <span data-ttu-id="f3a98-110">在已部署某一模型数据库后，模型数据库管理员可以使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]管理（添加、编辑、删除）角色成员。</span><span class="sxs-lookup"><span data-stu-id="f3a98-110">After a model database has been deployed, model database administrators can manage (add, edit, delete) role members using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="f3a98-111">若要了解如何在已部署的数据库中管理角色的成员，请参阅[表格模型角色（SSAS 表格）](tabular-model-roles-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="f3a98-111">To learn about managing members of roles in a deployed database, see [Tabular Model Roles &#40;SSAS Tabular&#41;](tabular-model-roles-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="f3a98-112">[表格建模（Adventure Works 教程）](../tabular-modeling-adventure-works-tutorial.md)包括有关如何使用此功能的其他信息和课程。</span><span class="sxs-lookup"><span data-stu-id="f3a98-112">The [Tabular Modeling &#40;Adventure Works Tutorial&#41;](../tabular-modeling-adventure-works-tutorial.md) includes additional information and lessons on how to use this feature.</span></span>  
  
 <span data-ttu-id="f3a98-113">本主题的内容：</span><span class="sxs-lookup"><span data-stu-id="f3a98-113">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="f3a98-114">了解角色</span><span class="sxs-lookup"><span data-stu-id="f3a98-114">Understanding Roles</span></span>](#bkmk_underst)  
  
-   [<span data-ttu-id="f3a98-115">权限</span><span class="sxs-lookup"><span data-stu-id="f3a98-115">Permissions</span></span>](#bkmk_permissions)  
  
-   [<span data-ttu-id="f3a98-116">行筛选器</span><span class="sxs-lookup"><span data-stu-id="f3a98-116">Row Filters</span></span>](#bkmk_rowfliters)  
  
-   [<span data-ttu-id="f3a98-117">测试角色</span><span class="sxs-lookup"><span data-stu-id="f3a98-117">Testing Roles</span></span>](#bkmk_testroles)  
  
-   [<span data-ttu-id="f3a98-118">相关任务</span><span class="sxs-lookup"><span data-stu-id="f3a98-118">Related Tasks</span></span>](#bkmk_rt)  
  
##  <a name="understanding-roles"></a><a name="bkmk_underst"></a><span data-ttu-id="f3a98-119">了解角色</span><span class="sxs-lookup"><span data-stu-id="f3a98-119">Understanding Roles</span></span>  
 <span data-ttu-id="f3a98-120">中使用角色 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 来管理 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 和数据的安全性。</span><span class="sxs-lookup"><span data-stu-id="f3a98-120">Roles are used in [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to manage security for [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] and data.</span></span> <span data-ttu-id="f3a98-121">在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]中有两种类型的角色：</span><span class="sxs-lookup"><span data-stu-id="f3a98-121">There are two types of roles in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="f3a98-122">服务器角色，它是一个固定角色，用于提供对 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]实例的管理员访问权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-122">The server role, a fixed role that provides administrator access to an instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="f3a98-123">数据库角色，这些角色由模型作者和管理员定义，用于控制非管理员用户对模型数据库和数据的访问权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-123">Database roles, roles defined by model authors and administrators to control access to a model database and data for non-administrator users.</span></span>  
  
 <span data-ttu-id="f3a98-124">为表格模型定义的角色就是数据库角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-124">Roles defined for a tabular model are database roles.</span></span> <span data-ttu-id="f3a98-125">也就是说，角色包含由 Windows 用户或组构成的成员，这些用户或组具有定义这些成员可对模型数据库执行的操作的特定权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-125">That is, the roles contain members consisting of Windows users or groups that have specific permissions that define the action those members can take on the model database.</span></span> <span data-ttu-id="f3a98-126">数据库角色作为数据库中的单独对象创建，并且仅适用于创建该角色的数据库。</span><span class="sxs-lookup"><span data-stu-id="f3a98-126">A database role is created as a separate object in the database, and applies only to the database in which that role is created.</span></span> <span data-ttu-id="f3a98-127">Windows 用户和/或 Windows 组包含在模型作者默认情况下按其对工作区数据库服务器具有管理员权限的角色中；对于已部署的模型，将按管理员。</span><span class="sxs-lookup"><span data-stu-id="f3a98-127">Windows users and/or Windows groups are included in the role by the model author, which, by default, has Administrator permissions on the workspace database server; for a deployed model, by an administrator.</span></span>  
  
 <span data-ttu-id="f3a98-128">可以进一步使用行筛选器定义表格模型中的角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-128">Roles in tabular models can be further defined with row filters.</span></span> <span data-ttu-id="f3a98-129">行筛选器使用 DAX 表达式定义表中的行，以及许多方向中用户可以查询的任何相关行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-129">Row filters use DAX expressions to define the rows in a table, and any related rows in the many direction, that a user can query.</span></span> <span data-ttu-id="f3a98-130">只能为“读取”和“读取和处理”权限定义使用 DAX 表达式的行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-130">Row filters using DAX expressions can only be defined for the Read and Read and Process permissions.</span></span> <span data-ttu-id="f3a98-131">有关详细信息，请参阅本主题后面的[行筛选器](#bkmk_rowfliters)。</span><span class="sxs-lookup"><span data-stu-id="f3a98-131">For more information, see [Row Filters](#bkmk_rowfliters) later in this topic.</span></span>  
  
 <span data-ttu-id="f3a98-132">默认情况下，创建新的表格模型项目时，该模型项目没有任何角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-132">By default, when you create a new tabular model project, the model project does not have any roles.</span></span> <span data-ttu-id="f3a98-133">可以使用 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]中的“角色管理器”对话框定义角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-133">Roles can be defined by using the Role Manager dialog box in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="f3a98-134">在创作模型期间定义角色后，这些角色将应用于模型工作区数据库。</span><span class="sxs-lookup"><span data-stu-id="f3a98-134">When roles are defined during model authoring, they are applied to the model workspace database.</span></span> <span data-ttu-id="f3a98-135">部署模型时，应对已部署模型使用相同的角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-135">When the model is deployed, the same roles are applied to the deployed model.</span></span> <span data-ttu-id="f3a98-136">在部署了某一模型后，服务器角色的成员（[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 管理员）和数据库管理员可以通过使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]管理与该模型相关联的角色以及与各个角色相关联的成员。</span><span class="sxs-lookup"><span data-stu-id="f3a98-136">After a model has been deployed, members of the server role ([!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] Administrator) and database administrators can manage the roles associated with the model and the members associated with each role by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f3a98-137">为 DirectQuery 模式配置的模型定义的角色无法使用行筛选器，但是，为每个角色定义的权限将适用。</span><span class="sxs-lookup"><span data-stu-id="f3a98-137">Roles defined for a model configured for DirectQuery mode cannot use row filters, however, permissions defined for each role will apply.</span></span>  
  
##  <a name="permissions"></a><a name="bkmk_permissions"></a> <span data-ttu-id="f3a98-138">权限</span><span class="sxs-lookup"><span data-stu-id="f3a98-138">Permissions</span></span>  
 <span data-ttu-id="f3a98-139">每个角色都具有单个定义的数据库权限（合并的“读取和处理”权限除外）。</span><span class="sxs-lookup"><span data-stu-id="f3a98-139">Each role has a single defined database permission (except for the combined Read and Process permission).</span></span> <span data-ttu-id="f3a98-140">默认情况下，新角色将具有“无”权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-140">By default, a new role will have the None permission.</span></span> <span data-ttu-id="f3a98-141">也就是说，一旦将成员添加到具有“无”权限的角色，除非授予其他权限，否则，这些成员将无法修改数据库、运行处理操作、查询数据或查看数据库。</span><span class="sxs-lookup"><span data-stu-id="f3a98-141">That is, once members are added to the role with the None permission, they cannot modify the database, run a process operation, query data, or see the database unless a different permission is granted.</span></span>  
  
 <span data-ttu-id="f3a98-142">Windows 组或用户可以是任何数目的角色的成员，每个角色具有不同的权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-142">A Windows group or user can be a member of any number of roles, each role with a different permission.</span></span> <span data-ttu-id="f3a98-143">在某一用户是多个角色的成员时，为每个角色定义的权限将累积。</span><span class="sxs-lookup"><span data-stu-id="f3a98-143">When a user is a member of multiple roles, the permissions defined for each role are cumulative.</span></span> <span data-ttu-id="f3a98-144">例如，如果某个用户是具有“读取”权限的角色的成员，并且还是具有“无”权限的角色的成员，则该用户将具有“读取”权限。</span><span class="sxs-lookup"><span data-stu-id="f3a98-144">For example, if a user is a member of a role with the Read permission, and also a member of a role with None permission, that user will have Read permissions.</span></span>  
  
 <span data-ttu-id="f3a98-145">每个角色都可以定义下列权限之一：</span><span class="sxs-lookup"><span data-stu-id="f3a98-145">Each role can have one the following permissions defined:</span></span>  
  
|<span data-ttu-id="f3a98-146">权限</span><span class="sxs-lookup"><span data-stu-id="f3a98-146">Permissions</span></span>|<span data-ttu-id="f3a98-147">说明</span><span class="sxs-lookup"><span data-stu-id="f3a98-147">Description</span></span>|<span data-ttu-id="f3a98-148">使用 DAX 进行行筛选</span><span class="sxs-lookup"><span data-stu-id="f3a98-148">Row  filters using DAX</span></span>|  
|-----------------|-----------------|----------------------------|  
|<span data-ttu-id="f3a98-149">无</span><span class="sxs-lookup"><span data-stu-id="f3a98-149">None</span></span>|<span data-ttu-id="f3a98-150">成员无法对模型数据库架构进行任何修改，也无法查询数据。</span><span class="sxs-lookup"><span data-stu-id="f3a98-150">Members cannot make any modifications to the model database schema and cannot query data.</span></span>|<span data-ttu-id="f3a98-151">不应用行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-151">Row filters do not apply.</span></span> <span data-ttu-id="f3a98-152">此角色中的用户无法看见数据</span><span class="sxs-lookup"><span data-stu-id="f3a98-152">No data is visible to users in this role</span></span>|  
|<span data-ttu-id="f3a98-153">读取</span><span class="sxs-lookup"><span data-stu-id="f3a98-153">Read</span></span>|<span data-ttu-id="f3a98-154">允许成员查询数据（基于行筛选器），但是无法看到 SSMS 中的模型数据库，无法更改模型数据库架构，并且用户无法处理模型。</span><span class="sxs-lookup"><span data-stu-id="f3a98-154">Members are allowed to query data (based on row filters) but cannot see the model database in SSMS, cannot make any changes to the model database schema, and the user cannot process the model.</span></span>|<span data-ttu-id="f3a98-155">应用行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-155">Row filters can be applied.</span></span> <span data-ttu-id="f3a98-156">用户仅能看见在行筛选器 DAX 公式中指定的数据。</span><span class="sxs-lookup"><span data-stu-id="f3a98-156">Only data specified in the row filter DAX formula is visible to users.</span></span>|  
|<span data-ttu-id="f3a98-157">读取和处理</span><span class="sxs-lookup"><span data-stu-id="f3a98-157">Read and Process</span></span>|<span data-ttu-id="f3a98-158">允许成员查询数据（基于行级别筛选器）并通过运行包含处理命令的脚本或包来运行处理操作，但无法对数据库进行任何更改。</span><span class="sxs-lookup"><span data-stu-id="f3a98-158">Members are allowed to query data (based on row-level filters) and run process operations by running a script or package that contains a process command, but cannot make any changes to the database.</span></span> <span data-ttu-id="f3a98-159">无法在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]中查看模型数据库。</span><span class="sxs-lookup"><span data-stu-id="f3a98-159">Cannot view the model database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>|<span data-ttu-id="f3a98-160">应用行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-160">Row filters can be applied.</span></span> <span data-ttu-id="f3a98-161">仅能查询在行筛选器 DAX 公式中指定的数据。</span><span class="sxs-lookup"><span data-stu-id="f3a98-161">Only data specified in the row filter DAX formula can be queried.</span></span>|  
|<span data-ttu-id="f3a98-162">进程</span><span class="sxs-lookup"><span data-stu-id="f3a98-162">Process</span></span>|<span data-ttu-id="f3a98-163">成员可以通过运行包含处理命令的脚本或包来运行处理操作。</span><span class="sxs-lookup"><span data-stu-id="f3a98-163">Members can run process operations by running a script or package that contains a process command.</span></span> <span data-ttu-id="f3a98-164">不能修改模型数据库架构。</span><span class="sxs-lookup"><span data-stu-id="f3a98-164">Cannot modify the model database schema.</span></span> <span data-ttu-id="f3a98-165">无法查询数据。</span><span class="sxs-lookup"><span data-stu-id="f3a98-165">Cannot query data.</span></span> <span data-ttu-id="f3a98-166">无法在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]中查询模型数据库。</span><span class="sxs-lookup"><span data-stu-id="f3a98-166">Cannot query the model database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>|<span data-ttu-id="f3a98-167">不应用行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-167">Row filters do not apply.</span></span> <span data-ttu-id="f3a98-168">此角色中没有可查询的数据</span><span class="sxs-lookup"><span data-stu-id="f3a98-168">No data can be queried in this role</span></span>|  
|<span data-ttu-id="f3a98-169">管理员</span><span class="sxs-lookup"><span data-stu-id="f3a98-169">Administrator</span></span>|<span data-ttu-id="f3a98-170">成员可以对模型架构进行任何修改并可以查询模型设计器、报表客户端和 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]中的所有数据。</span><span class="sxs-lookup"><span data-stu-id="f3a98-170">Members can make modifications to the model schema and can query all data in the model designer, reporting client, and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>|<span data-ttu-id="f3a98-171">不应用行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-171">Row filters do not apply.</span></span> <span data-ttu-id="f3a98-172">此角色中的所有数据均可查询。</span><span class="sxs-lookup"><span data-stu-id="f3a98-172">All data can be queried in this role.</span></span>|  
  
##  <a name="row-filters"></a><a name="bkmk_rowfliters"></a><span data-ttu-id="f3a98-173">行筛选器</span><span class="sxs-lookup"><span data-stu-id="f3a98-173">Row Filters</span></span>  
 <span data-ttu-id="f3a98-174">行筛选器定义特定角色的成员可以查询表中的哪些行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-174">Row filters define which rows in a table can be queried by members of a particular role.</span></span> <span data-ttu-id="f3a98-175">可使用 DAX 公式为模型中的每个表定义行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-175">Row filters are defined for each table in a model by using DAX formulas.</span></span>  
  
 <span data-ttu-id="f3a98-176">可仅为具有“读取”和“读取和处理”权限的角色定义行筛选器。</span><span class="sxs-lookup"><span data-stu-id="f3a98-176">Row filters can be defined only for roles with Read and Read and Process permissions.</span></span> <span data-ttu-id="f3a98-177">默认情况下，如果没有为某一特定表定义行筛选器，则具有“读取”和“读取和处理”权限的角色的成员将能够查询表中的所有行，除非交叉筛选应用于其他表。</span><span class="sxs-lookup"><span data-stu-id="f3a98-177">By default, if a row filter is not defined for a particular table, members of a role that has Read or Read and Process permission can query all rows in the table unless cross-filtering applies from another table.</span></span>  
  
 <span data-ttu-id="f3a98-178">一旦为特定表定义了行筛选器后，求值结果必须为 TRUE/FALSE 值的 DAX 公式将定义可供该特定角色的成员进行查询的行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-178">Once a row filter is defined for a particular table, a DAX formula, which must evaluate to a TRUE/FALSE value, defines the rows that can be queried by members of that particular role.</span></span> <span data-ttu-id="f3a98-179">未包含在 DAX 公式中的行将不可查询。</span><span class="sxs-lookup"><span data-stu-id="f3a98-179">Rows not included in the DAX formula will cannot be queried.</span></span> <span data-ttu-id="f3a98-180">例如，对于 "销售" 角色的成员，具有以下行筛选器表达式的 Customers 表 *= customers [Country] = "USA"*，Sales 角色的成员将只能看到 USA 中的客户。</span><span class="sxs-lookup"><span data-stu-id="f3a98-180">For example, for members of the Sales role, the Customers table with the following row filters expression, *=Customers [Country] = "USA"*, members of the Sales role, will only be able to see customers in the USA.</span></span>  
  
 <span data-ttu-id="f3a98-181">行筛选器应用于指定的行以及相关行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-181">Row filters apply to the specified rows as well as related rows.</span></span> <span data-ttu-id="f3a98-182">如果表具有多个关系，筛选器将对处于活动状态的关系应用安全性。</span><span class="sxs-lookup"><span data-stu-id="f3a98-182">When a table has multiple relationships, filters apply security for the relationship that is active.</span></span> <span data-ttu-id="f3a98-183">行筛选器将与为相关表定义的其他行筛选器相交，例如：</span><span class="sxs-lookup"><span data-stu-id="f3a98-183">Row filters will be intersected with other row filers defined for related tables, for example:</span></span>  
  
|<span data-ttu-id="f3a98-184">表</span><span class="sxs-lookup"><span data-stu-id="f3a98-184">Table</span></span>|<span data-ttu-id="f3a98-185">DAX 表达式</span><span class="sxs-lookup"><span data-stu-id="f3a98-185">DAX expression</span></span>|  
|-----------|--------------------|  
|<span data-ttu-id="f3a98-186">区域</span><span class="sxs-lookup"><span data-stu-id="f3a98-186">Region</span></span>|<span data-ttu-id="f3a98-187">=Region[Country]="USA"</span><span class="sxs-lookup"><span data-stu-id="f3a98-187">=Region[Country]="USA"</span></span>|  
|<span data-ttu-id="f3a98-188">ProductCategory</span><span class="sxs-lookup"><span data-stu-id="f3a98-188">ProductCategory</span></span>|<span data-ttu-id="f3a98-189">=ProductCategory[Name]="Bicycles"</span><span class="sxs-lookup"><span data-stu-id="f3a98-189">=ProductCategory[Name]="Bicycles"</span></span>|  
|<span data-ttu-id="f3a98-190">事务</span><span class="sxs-lookup"><span data-stu-id="f3a98-190">Transactions</span></span>|<span data-ttu-id="f3a98-191">=Transactions[Year]=2008</span><span class="sxs-lookup"><span data-stu-id="f3a98-191">=Transactions[Year]=2008</span></span>|  
  
 <span data-ttu-id="f3a98-192">这些权限对于 Transactions 表的净效果是，将允许成员查询客户位于 USA、产品类别是自行车并且年份是 2008 的数据行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-192">The net effect of these permissions on the Transactions table is that members will be allowed to query rows of data where the customer is in the USA, and the product category is bicycles, and the year is 2008.</span></span> <span data-ttu-id="f3a98-193">用户将无法查询 USA 之外的任何事务、不是自行车的任何事务或者不在 2008 年发生的任何事务，除非用户是授予了这些权限的其他角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-193">Users would not be able to query any transactions outside of the USA, or any transactions that are not bicycles, or any transactions not in 2008 unless they are a member of another role that grants these permissions.</span></span>  
  
 <span data-ttu-id="f3a98-194">可以使用筛选器 =FALSE() 拒绝访问整个表的所有行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-194">You can use the filter, *=FALSE()*, to deny access to all rows for an entire table.</span></span>  
  
### <a name="dynamic-security"></a><span data-ttu-id="f3a98-195">动态安全性</span><span class="sxs-lookup"><span data-stu-id="f3a98-195">Dynamic Security</span></span>  
 <span data-ttu-id="f3a98-196">动态安全性提供了一种基于当前登录用户的用户名或从连接字符串返回的 CustomData 属性定义行级别安全性的方式。</span><span class="sxs-lookup"><span data-stu-id="f3a98-196">Dynamic security provides a way to define row level security based on the user name of the user currently logged on or the CustomData property returned from a connection string.</span></span> <span data-ttu-id="f3a98-197">为了实现动态安全性，您必须在模型中包含一个具有用户登录名（Windows 用户名）值的表以及一个可用于定义特定权限的字段；例如，一个具有登录 ID (domain\username) 的 dimEmployees 表以及一个针对每个员工的部门值。</span><span class="sxs-lookup"><span data-stu-id="f3a98-197">In order to implement dynamic security, you must include in your model a table with login (Windows user name) values for users as well as a field that can be used to define a particular permission; for example, a dimEmployees table with a login ID (domain\username) as well as a department value for each employee.</span></span>  
  
 <span data-ttu-id="f3a98-198">为了实现动态安全性，您可以使用以下函数作为 DAX 公式的一部分来返回当前登录用户的用户名，或者返回连接字符串中的 CustomData 属性：</span><span class="sxs-lookup"><span data-stu-id="f3a98-198">To implement dynamic security, you can use the following functions as part of a DAX formula to return the user name of the user currently logged on, or the CustomData property in a connection string:</span></span>  
  
|<span data-ttu-id="f3a98-199">函数</span><span class="sxs-lookup"><span data-stu-id="f3a98-199">Function</span></span>|<span data-ttu-id="f3a98-200">说明</span><span class="sxs-lookup"><span data-stu-id="f3a98-200">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="f3a98-201">USERNAME 函数 &#40;DAX&#41;</span><span class="sxs-lookup"><span data-stu-id="f3a98-201">USERNAME Function &#40;DAX&#41;</span></span>](/dax/username-function-dax)|<span data-ttu-id="f3a98-202">返回当前登录用户的 domain\username。</span><span class="sxs-lookup"><span data-stu-id="f3a98-202">Returns the domain\ username of the user currently logged on.</span></span>|  
|[<span data-ttu-id="f3a98-203">&#40;DAX&#41;的 CUSTOMDATA 函数</span><span class="sxs-lookup"><span data-stu-id="f3a98-203">CUSTOMDATA Function &#40;DAX&#41;</span></span>](/dax/customdata-function-dax)|<span data-ttu-id="f3a98-204">返回连接字符串中的 CustomData 属性。</span><span class="sxs-lookup"><span data-stu-id="f3a98-204">Returns the CustomData property in a connection string.</span></span>|  
  
 <span data-ttu-id="f3a98-205">您可以使用 LOOKUPVALUE 函数返回某一列的值，在该列中，Windows 用户名与 USERNAME 函数返回的用户名或 CustomData 函数返回的字符串相同。</span><span class="sxs-lookup"><span data-stu-id="f3a98-205">You can use the LOOKUPVALUE function to return values for a column in which the Windows user name is the same as the user name returned by the USERNAME function or a string returned by the CustomData function.</span></span> <span data-ttu-id="f3a98-206">然后，可以限制查询，只显示 LOOKUPVALUE 返回的值与相同或相关表中的值匹配的行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-206">Queries can then be restricted where the values returned by LOOKUPVALUE match values in the same or related table.</span></span>  
  
 <span data-ttu-id="f3a98-207">例如，使用以下公式：</span><span class="sxs-lookup"><span data-stu-id="f3a98-207">For example, using this formula:</span></span>  
  
 `='dimDepartmentGroup'[DepartmentGroupId]=LOOKUPVALUE('dimEmployees'[DepartmentGroupId], 'dimEmployees'[LoginId], USERNAME(), 'dimEmployees'[LoginId], 'dimDepartmentGroup'[DepartmentGroupId])`  
  
 <span data-ttu-id="f3a98-208">LOOKUPVALUE 函数返回其 dimEmployees[LoginId] 与 USERNAME 返回的当前登录用户的 LoginID 相同的 dimEmployees[DepartmentId] 列的值，并且 dimEmployees[DepartmentId] 的值与 dimDepartmentGroup[DepartmentId] 的值相同。</span><span class="sxs-lookup"><span data-stu-id="f3a98-208">The LOOKUPVALUE function returns values for the dimEmployees[DepartmentId] column where the dimEmployees[LoginId] is the same as the LoginID of the user currently logged on, returned by USERNAME, and values for dimEmployees[DepartmentId] are the same as values for dimDepartmentGroup[DepartmentId].</span></span> <span data-ttu-id="f3a98-209">然后，使用 LOOKUPVALUE 所返回的 DepartmentId 中的值来限制在 dimDepartment 表中查询的行以及通过 DepartmentId 关联的任何表。</span><span class="sxs-lookup"><span data-stu-id="f3a98-209">The values in DepartmentId returned by LOOKUPVALUE are then used to restrict the rows queried in the dimDepartment table, and any tables related by DepartmentId.</span></span> <span data-ttu-id="f3a98-210">将只返回其 DepartmentId 也在 LOOKUPVALUE 函数返回的 DepartmentId 的值中的行。</span><span class="sxs-lookup"><span data-stu-id="f3a98-210">Only rows where DepartmentId are also in the values for the DepartmentId returned by LOOKUPVALUE function are returned.</span></span>  
  
 <span data-ttu-id="f3a98-211">**dimEmployees**</span><span class="sxs-lookup"><span data-stu-id="f3a98-211">**dimEmployees**</span></span>  
  
|<span data-ttu-id="f3a98-212">LastName</span><span class="sxs-lookup"><span data-stu-id="f3a98-212">LastName</span></span>|<span data-ttu-id="f3a98-213">FirstName</span><span class="sxs-lookup"><span data-stu-id="f3a98-213">FirstName</span></span>|<span data-ttu-id="f3a98-214">LoginID</span><span class="sxs-lookup"><span data-stu-id="f3a98-214">LoginID</span></span>|<span data-ttu-id="f3a98-215">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="f3a98-215">DepartmentName</span></span>|<span data-ttu-id="f3a98-216">DepartmentId</span><span class="sxs-lookup"><span data-stu-id="f3a98-216">DepartmentId</span></span>|  
|--------------|---------------|-------------|--------------------|------------------|  
|<span data-ttu-id="f3a98-217">Brown</span><span class="sxs-lookup"><span data-stu-id="f3a98-217">Brown</span></span>|<span data-ttu-id="f3a98-218">Kevin</span><span class="sxs-lookup"><span data-stu-id="f3a98-218">Kevin</span></span>|<span data-ttu-id="f3a98-219">Adventure-works\kevin0</span><span class="sxs-lookup"><span data-stu-id="f3a98-219">Adventure-works\kevin0</span></span>|<span data-ttu-id="f3a98-220">Marketing</span><span class="sxs-lookup"><span data-stu-id="f3a98-220">Marketing</span></span>|<span data-ttu-id="f3a98-221">7</span><span class="sxs-lookup"><span data-stu-id="f3a98-221">7</span></span>|  
|<span data-ttu-id="f3a98-222">Bradley</span><span class="sxs-lookup"><span data-stu-id="f3a98-222">Bradley</span></span>|<span data-ttu-id="f3a98-223">David</span><span class="sxs-lookup"><span data-stu-id="f3a98-223">David</span></span>|<span data-ttu-id="f3a98-224">Adventure-works\david0</span><span class="sxs-lookup"><span data-stu-id="f3a98-224">Adventure-works\david0</span></span>|<span data-ttu-id="f3a98-225">Marketing</span><span class="sxs-lookup"><span data-stu-id="f3a98-225">Marketing</span></span>|<span data-ttu-id="f3a98-226">7</span><span class="sxs-lookup"><span data-stu-id="f3a98-226">7</span></span>|  
|<span data-ttu-id="f3a98-227">Dobney</span><span class="sxs-lookup"><span data-stu-id="f3a98-227">Dobney</span></span>|<span data-ttu-id="f3a98-228">JoLynn</span><span class="sxs-lookup"><span data-stu-id="f3a98-228">JoLynn</span></span>|<span data-ttu-id="f3a98-229">Adventure-works\JoLynn0</span><span class="sxs-lookup"><span data-stu-id="f3a98-229">Adventure-works\JoLynn0</span></span>|<span data-ttu-id="f3a98-230">生产</span><span class="sxs-lookup"><span data-stu-id="f3a98-230">Production</span></span>|<span data-ttu-id="f3a98-231">4</span><span class="sxs-lookup"><span data-stu-id="f3a98-231">4</span></span>|  
|<span data-ttu-id="f3a98-232">Baretto DeMattos</span><span class="sxs-lookup"><span data-stu-id="f3a98-232">Baretto DeMattos</span></span>|<span data-ttu-id="f3a98-233">Paula</span><span class="sxs-lookup"><span data-stu-id="f3a98-233">Paula</span></span>|<span data-ttu-id="f3a98-234">Adventure-works\Paula0</span><span class="sxs-lookup"><span data-stu-id="f3a98-234">Adventure-works\Paula0</span></span>|<span data-ttu-id="f3a98-235">Human Resources</span><span class="sxs-lookup"><span data-stu-id="f3a98-235">Human Resources</span></span>|<span data-ttu-id="f3a98-236">2</span><span class="sxs-lookup"><span data-stu-id="f3a98-236">2</span></span>|  
  
 <span data-ttu-id="f3a98-237">**dimDepartment**</span><span class="sxs-lookup"><span data-stu-id="f3a98-237">**dimDepartment**</span></span>  
  
|<span data-ttu-id="f3a98-238">DepartmentId</span><span class="sxs-lookup"><span data-stu-id="f3a98-238">DepartmentId</span></span>|<span data-ttu-id="f3a98-239">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="f3a98-239">DepartmentName</span></span>|  
|------------------|--------------------|  
|<span data-ttu-id="f3a98-240">1</span><span class="sxs-lookup"><span data-stu-id="f3a98-240">1</span></span>|<span data-ttu-id="f3a98-241">企业</span><span class="sxs-lookup"><span data-stu-id="f3a98-241">Corporate</span></span>|  
|<span data-ttu-id="f3a98-242">2</span><span class="sxs-lookup"><span data-stu-id="f3a98-242">2</span></span>|<span data-ttu-id="f3a98-243">一般行政和管理</span><span class="sxs-lookup"><span data-stu-id="f3a98-243">Executive General and Administration</span></span>|  
|<span data-ttu-id="f3a98-244">3</span><span class="sxs-lookup"><span data-stu-id="f3a98-244">3</span></span>|<span data-ttu-id="f3a98-245">库存管理</span><span class="sxs-lookup"><span data-stu-id="f3a98-245">Inventory Management</span></span>|  
|<span data-ttu-id="f3a98-246">4</span><span class="sxs-lookup"><span data-stu-id="f3a98-246">4</span></span>|<span data-ttu-id="f3a98-247">制造</span><span class="sxs-lookup"><span data-stu-id="f3a98-247">Manufacturing</span></span>|  
|<span data-ttu-id="f3a98-248">5</span><span class="sxs-lookup"><span data-stu-id="f3a98-248">5</span></span>|<span data-ttu-id="f3a98-249">质量保证</span><span class="sxs-lookup"><span data-stu-id="f3a98-249">Quality Assurance</span></span>|  
|<span data-ttu-id="f3a98-250">6</span><span class="sxs-lookup"><span data-stu-id="f3a98-250">6</span></span>|<span data-ttu-id="f3a98-251">研究和开发</span><span class="sxs-lookup"><span data-stu-id="f3a98-251">Research and Development</span></span>|  
|<span data-ttu-id="f3a98-252">7</span><span class="sxs-lookup"><span data-stu-id="f3a98-252">7</span></span>|<span data-ttu-id="f3a98-253">销售和营销</span><span class="sxs-lookup"><span data-stu-id="f3a98-253">Sales and Marketing</span></span>|  
  
##  <a name="testing-roles"></a><a name="bkmk_testroles"></a><span data-ttu-id="f3a98-254">测试角色</span><span class="sxs-lookup"><span data-stu-id="f3a98-254">Testing Roles</span></span>  
 <span data-ttu-id="f3a98-255">在创作模型项目时，可以使用“在 Excel 中分析”功能来测试已定义的角色的效用。</span><span class="sxs-lookup"><span data-stu-id="f3a98-255">When authoring a model project, you can use the Analyze in Excel feature to test the efficacy of the roles you have defined.</span></span> <span data-ttu-id="f3a98-256">从模型设计器中的 **“模型”** 菜单中，当您单击 **“在 Excel 中分析”** 时，在打开 Excel 之前，将会出现 **“选择凭据和透视”** 对话框。</span><span class="sxs-lookup"><span data-stu-id="f3a98-256">From the **Model** menu in the model designer, when you click **Analyze in Excel**, before Excel opens, the **Choose Credentials and Perspective** dialog box appears.</span></span> <span data-ttu-id="f3a98-257">在此对话框中，您可以指定当前用户名、其他用户名、角色和一个用于连接作为数据源的工作区模型的透视。</span><span class="sxs-lookup"><span data-stu-id="f3a98-257">In this dialog, you can specify the current username, a different username, a role, and a perspective with which you will use to connect to the workspace model as a data source.</span></span> <span data-ttu-id="f3a98-258">有关详细信息，请参阅本主题后面的 [在 Excel 中分析（SSAS 表格）](analyze-in-excel-ssas-tabular.md)中的“角色管理器”对话框定义角色的表格模型作者。</span><span class="sxs-lookup"><span data-stu-id="f3a98-258">For more information, see [Analyze in Excel &#40;SSAS Tabular&#41;](analyze-in-excel-ssas-tabular.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="bkmk_rt"></a> <span data-ttu-id="f3a98-259">相关任务</span><span class="sxs-lookup"><span data-stu-id="f3a98-259">Related Tasks</span></span>  
  
|<span data-ttu-id="f3a98-260">主题</span><span class="sxs-lookup"><span data-stu-id="f3a98-260">Topic</span></span>|<span data-ttu-id="f3a98-261">说明</span><span class="sxs-lookup"><span data-stu-id="f3a98-261">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="f3a98-262">创建和管理角色（SSAS 表格）</span><span class="sxs-lookup"><span data-stu-id="f3a98-262">Create and Manage Roles &#40;SSAS Tabular&#41;</span></span>](create-and-manage-roles-ssas-tabular.md)|<span data-ttu-id="f3a98-263">本主题中的任务说明如何使用 **“角色管理器”** 对话框来创建和管理角色。</span><span class="sxs-lookup"><span data-stu-id="f3a98-263">Tasks in this topic describe how to create and manage roles by using the **Role Manager** dialog box.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="f3a98-264">另请参阅</span><span class="sxs-lookup"><span data-stu-id="f3a98-264">See Also</span></span>  
 <span data-ttu-id="f3a98-265">[SSAS 表格&#41;&#40;透视](perspectives-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="f3a98-265">[Perspectives &#40;SSAS Tabular&#41;](perspectives-ssas-tabular.md) </span></span>  
 <span data-ttu-id="f3a98-266">[在 Excel 中分析 &#40;SSAS 表格&#41;](analyze-in-excel-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="f3a98-266">[Analyze in Excel &#40;SSAS Tabular&#41;](analyze-in-excel-ssas-tabular.md) </span></span>  
 <span data-ttu-id="f3a98-267">[USERNAME 函数 &#40;DAX&#41;](/dax/username-function-dax) </span><span class="sxs-lookup"><span data-stu-id="f3a98-267">[USERNAME Function &#40;DAX&#41;](/dax/username-function-dax) </span></span>  
 <span data-ttu-id="f3a98-268">[&#40;DAX&#41;的 LOOKUPVALUE 函数](/dax/lookupvalue-function-dax) </span><span class="sxs-lookup"><span data-stu-id="f3a98-268">[LOOKUPVALUE Function &#40;DAX&#41;](/dax/lookupvalue-function-dax) </span></span>  
 [<span data-ttu-id="f3a98-269">&#40;DAX&#41;的 CUSTOMDATA 函数</span><span class="sxs-lookup"><span data-stu-id="f3a98-269">CUSTOMDATA Function &#40;DAX&#41;</span></span>](/dax/customdata-function-dax)  
  
  
