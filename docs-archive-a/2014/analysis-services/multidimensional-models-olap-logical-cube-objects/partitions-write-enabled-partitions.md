---
title: 启用了写功能的分区 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- storage [Analysis Services], partitions
- write-enabled partitions [Analysis Services]
- partitions [Analysis Services], write-enabled
- partitions [Analysis Services], storage
- writeback [Analysis Services], partitions
- storing data [Analysis Services], partitions
ms.assetid: 46e7683f-03ce-4af2-bd99-a5203733d723
author: minewiskan
ms.author: owend
ms.openlocfilehash: bd4bd012847c3aee231767e94bead86a507ecc53
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87690191"
---
# <a name="write-enabled-partitions"></a><span data-ttu-id="1f9b3-102">可写入的分区</span><span class="sxs-lookup"><span data-stu-id="1f9b3-102">Write-Enabled Partitions</span></span>
  <span data-ttu-id="1f9b3-103">多维数据集中的数据通常为只读数据。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-103">The data in a cube is generally read-only.</span></span> <span data-ttu-id="1f9b3-104">但在某些情况下，可能需要为分区启用写入。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-104">However, for certain scenarios, you may want to write-enable a partition.</span></span> <span data-ttu-id="1f9b3-105">使用可写入的分区，业务用户可以通过更改单元值并分析更改对多维数据集数据所产生的影响来研究方案。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-105">Write-enabled partitions are used to enable business users to explore scenarios by changing cell values and analyzing the effects of the changes on cube data.</span></span> <span data-ttu-id="1f9b3-106">向分区中写入时，客户端应用程序可以记录对分区中的数据所做的更改。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-106">When you write-enable a partition, client applications can record changes to the data in the partition.</span></span> <span data-ttu-id="1f9b3-107">这些更改（称为写回数据）存储在单独的表中，并且不会覆盖度量值组中的任何现有数据。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-107">These changes, known as writeback data, are stored in a separate table and do not overwrite any existing data in a measure group.</span></span> <span data-ttu-id="1f9b3-108">但是，它们被作为多维数据集数据的一部分合并到了查询结果中。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-108">However, they are incorporated into query results as if they are part of the cube data.</span></span>  
  
 <span data-ttu-id="1f9b3-109">可以对整个多维数据集或仅对多维数据集中的某些分区启用写操作。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-109">You can write-enable an entire cube or only certain partitions in the cube.</span></span> <span data-ttu-id="1f9b3-110">启用写操作的维度各不相同但可以互补。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-110">Write-enabled dimensions are different but complementary.</span></span> <span data-ttu-id="1f9b3-111">使用可写入的分区，用户可以更新分区单元，而启用写操作的维度则允许用户更新维度成员。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-111">A write-enabled partition lets users update partition cells, whereas a write-enabled dimension lets users update dimension members.</span></span> <span data-ttu-id="1f9b3-112">还可以组合使用这两个功能。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-112">You can also use these two features in combination.</span></span> <span data-ttu-id="1f9b3-113">例如，启用写操作的多维数据集或可写入的分区可以不必包括任何启用写操作的维度。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-113">For example, a write-enabled cube or a write-enabled partition does not have to include any write-enabled dimensions.</span></span> <span data-ttu-id="1f9b3-114">**相关主题：**[启用写操作的维度](../multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions.md)。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-114">**Related topic:**[Write-Enabled Dimensions](../multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1f9b3-115">如果要对数据源为 Microsoft Access 数据库的多维数据集启用写操作，则不要在多维数据集及其分区或维度的数据源定义中使用用于 ODBC 驱动程序的 Microsoft OLE DB 访问接口。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-115">If you want to write-enable a cube that has a Microsoft Access database as a data source, do not use Microsoft OLE DB Provider for ODBC Drivers in the data source definitions for the cube, its partitions, or its dimensions.</span></span> <span data-ttu-id="1f9b3-116">但可以使用 Microsoft Jet 4.0 OLE DB 访问接口或包括 Jet 4.0 OLE 的任何 Jet Service Pack 版本。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-116">Instead, you can use Microsoft Jet 4.0 OLE DB Provider, or any version of the Jet Service Pack that includes Jet 4.0 OLE.</span></span> <span data-ttu-id="1f9b3-117">有关详细信息，请参阅 Microsoft 知识库文章[如何获取 Microsoft Jet 4.0 数据库引擎的最新 Service Pack](https://support.microsoft.com/?kbid=239114)。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-117">For more information, see the Microsoft Knowledge Base article [How to obtain the latest service pack for the Microsoft Jet 4.0 Database Engine](https://support.microsoft.com/?kbid=239114).</span></span>  
  
 <span data-ttu-id="1f9b3-118">只有其所有度量值均使用 `Sum` 聚合函数时，才能对该多维数据集启用写操作。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-118">A cube can be write-enabled only if all its measures use the `Sum` aggregate function.</span></span> <span data-ttu-id="1f9b3-119">不能对链接度量值组和本地多维数据集启用写操作。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-119">Linked measure groups and local cubes cannot be write-enabled.</span></span>  
  
## <a name="writeback-storage"></a><span data-ttu-id="1f9b3-120">写回存储</span><span class="sxs-lookup"><span data-stu-id="1f9b3-120">Writeback Storage</span></span>  
 <span data-ttu-id="1f9b3-121">业务用户所做的任何更改都以与当前显示值的差值形式存储在写回表中。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-121">Any change made by the business user is stored in the writeback table as a difference from the currently displayed value.</span></span> <span data-ttu-id="1f9b3-122">例如，如果最终用户将某个单元值从 90 更改为 100，则写回表中将存储 `+10` 以及更改发生的时间和执行更改的业务用户的相关信息。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-122">For example, if an end user changes a cell value from 90 to 100, the value `+10` is stored in the writeback table, together with the time of the change and information about the business user who made it.</span></span> <span data-ttu-id="1f9b3-123">累积更改的净效果显示给客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-123">The net effect of accumulated changes is displayed to client applications.</span></span> <span data-ttu-id="1f9b3-124">将保留多维数据集中的原始值，并在写回表中记录更改的审核记录。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-124">The original value in the cube is preserved, and an audit trail of changes is recorded in the writeback table.</span></span>  
  
 <span data-ttu-id="1f9b3-125">对叶单元更改和非叶单元更改的处理方式不同。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-125">Changes to leaf and nonleaf cells are handled differently.</span></span> <span data-ttu-id="1f9b3-126">叶单元表示度量值和度量值组引用的每个维度中的叶成员的交集。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-126">A leaf cell represents an intersection of a measure and a leaf member from every dimension referenced by the measure group.</span></span> <span data-ttu-id="1f9b3-127">叶单元的值直接从事实数据表中获取，不能通过深化进一步细分。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-127">The value of a leaf cell is taken directly from the fact table, and cannot be divided further by drilling down.</span></span> <span data-ttu-id="1f9b3-128">如果对某个多维数据集或任意分区启用写操作，则可以对叶单元进行更改。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-128">If a cube or any partition is write-enabled, changes can be made to a leaf cell.</span></span> <span data-ttu-id="1f9b3-129">仅当客户端应用程序提供在组成非叶单元的叶单元当中分发更改的方法时，才能对非叶单元进行更改。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-129">Changes can be made to a nonleaf cell only if the client application provides a way of distributing the changes among the leaf cells that make up the nonleaf cell.</span></span> <span data-ttu-id="1f9b3-130">此进程（称为分配）通过多维表达式 (MDX) 中的 UPDATE CUBE 语句进行管理。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-130">This process, called allocation, is managed through the UPDATE CUBE statement in Multidimensional Expressions (MDX).</span></span> <span data-ttu-id="1f9b3-131">商业智能开发人员可以使用 UPDATE CUBE 语句包含分配功能。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-131">Business intelligence developers can use the UPDATE CUBE statement to include allocation functionality.</span></span> <span data-ttu-id="1f9b3-132">有关详细信息，请参阅[UPDATE CUBE 语句 &#40;MDX&#41;](/sql/mdx/mdx-data-manipulation-update-cube)。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-132">For more information, see [UPDATE CUBE Statement &#40;MDX&#41;](/sql/mdx/mdx-data-manipulation-update-cube).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="1f9b3-133">如果更新的单元不相互重叠，则 `Update Isolation Level` 连接字符串属性可用于提高 UPDATE CUBE 的性能。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-133">When updated cells do not overlap, the `Update Isolation Level` connection string property can be used to enhance performance for UPDATE CUBE.</span></span> <span data-ttu-id="1f9b3-134">有关详细信息，请参阅 <xref:Microsoft.AnalysisServices.AdomdClient.AdomdConnection.ConnectionString%2A>。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-134">For more information, see <xref:Microsoft.AnalysisServices.AdomdClient.AdomdConnection.ConnectionString%2A>.</span></span>  
  
 <span data-ttu-id="1f9b3-135">无论客户端应用程序是否分发对非叶单元的更改，一旦对查询进行评估，写回表中的更改就会应用于叶单元和非叶单元，这样业务用户就可以查看更改对整个多维数据集的影响。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-135">Regardless of whether a client application distributes changes that were made to nonleaf cells, whenever queries are evaluated, changes in the writeback table are applied to both leaf and nonleaf cells so that business users can view the effects of the changes throughout the cube.</span></span>  
  
 <span data-ttu-id="1f9b3-136">业务用户所做的更改将保留在单独的写回表中，可以按如下所示的方法来处理该表：</span><span class="sxs-lookup"><span data-stu-id="1f9b3-136">Changes that were made by the business user are kept in a separate writeback table that you can work with as follows:</span></span>  
  
-   <span data-ttu-id="1f9b3-137">转换为分区，以永久性地将更改合并到多维数据集中。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-137">Convert to a partition to permanently incorporate changes into the cube.</span></span> <span data-ttu-id="1f9b3-138">该操作可将度量值组设为只读。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-138">This action makes the measure group read-only.</span></span> <span data-ttu-id="1f9b3-139">您可以指定筛选表达式以选择要转换的更改。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-139">You can specify a filter expression to select the changes you want to convert.</span></span>  
  
-   <span data-ttu-id="1f9b3-140">放弃，以将分区恢复到其原来状态。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-140">Discard to return the partition to its original state.</span></span> <span data-ttu-id="1f9b3-141">该操作可使分区变为只读。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-141">This action makes the partition read-only.</span></span>  
  
## <a name="security"></a><span data-ttu-id="1f9b3-142">安全性</span><span class="sxs-lookup"><span data-stu-id="1f9b3-142">Security</span></span>  
 <span data-ttu-id="1f9b3-143">仅当业务用户属于对多维数据集的单元拥有读/写访问权限的角色时，才允许该业务用户在多维数据集的写回表中记录更改。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-143">A business user is permitted to record changes in a cube's writeback table only if the business user belongs to a role that has read/write permission to the cube's cells.</span></span> <span data-ttu-id="1f9b3-144">对于每个角色，您都可以控制可更新和不可更新的多维数据集单元。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-144">For each role, you can control which cube cells can and cannot be updated.</span></span> <span data-ttu-id="1f9b3-145">有关详细信息，请参阅[&#40;Analysis Services&#41;授予多维数据集或模型权限](../multidimensional-models/grant-cube-or-model-permissions-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="1f9b3-145">For more information, see [Grant cube or model permissions &#40;Analysis Services&#41;](../multidimensional-models/grant-cube-or-model-permissions-analysis-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1f9b3-146">另请参阅</span><span class="sxs-lookup"><span data-stu-id="1f9b3-146">See Also</span></span>  
 <span data-ttu-id="1f9b3-147">[启用写功能的维度](../multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions.md) </span><span class="sxs-lookup"><span data-stu-id="1f9b3-147">[Write-Enabled Dimensions](../multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions.md) </span></span>  
 <span data-ttu-id="1f9b3-148">[聚合和聚合设计](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md) </span><span class="sxs-lookup"><span data-stu-id="1f9b3-148">[Aggregations and Aggregation Designs](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md) </span></span>  
 <span data-ttu-id="1f9b3-149">[Analysis Services 多维数据 &#40;分区&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) </span><span class="sxs-lookup"><span data-stu-id="1f9b3-149">[Partitions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) </span></span>  
 [<span data-ttu-id="1f9b3-150">启用写操作的维度</span><span class="sxs-lookup"><span data-stu-id="1f9b3-150">Write-Enabled Dimensions</span></span>](../multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions.md)  
  
  
