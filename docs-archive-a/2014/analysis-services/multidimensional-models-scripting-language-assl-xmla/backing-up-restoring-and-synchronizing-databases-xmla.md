---
title: " (XMLA) 来备份、还原和同步数据库 |Microsoft Docs"
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- restoring databases [XML for Analysis]
- backing up databases [XML for Analysis]
- database backups [XML for Analysis]
- synchronization [XML for Analysis]
- database restores [XML for Analysis]
ms.assetid: 6c021b2e-6ad0-444e-b23f-4b5f72ce084b
author: minewiskan
ms.author: owend
ms.openlocfilehash: 500435a585ffed84a8f16e2b3bd1c4db14509103
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687312"
---
# <a name="backing-up-restoring-and-synchronizing-databases-xmla"></a><span data-ttu-id="4e1bc-102">备份、还原和同步数据库 (XMLA)</span><span class="sxs-lookup"><span data-stu-id="4e1bc-102">Backing Up, Restoring, and Synchronizing Databases (XMLA)</span></span>
  <span data-ttu-id="4e1bc-103">在 XML for Analysis 中，有三个命令分别用于备份、还原和同步数据库：</span><span class="sxs-lookup"><span data-stu-id="4e1bc-103">In XML for Analysis, there are three commands that back up, restore, and synchronize databases:</span></span>  
  
-   <span data-ttu-id="4e1bc-104">[Backup](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/backup-element-xmla)命令 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 使用 ( 的备份文件备份数据库 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ，如[备份数据库](#backing_up_databases)部分中所述。 .abf) 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-104">The [Backup](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/backup-element-xmla) command backs up a [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database using an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] backup file (.abf), as described in the section, [Backing Up Databases](#backing_up_databases).</span></span>  
  
-   <span data-ttu-id="4e1bc-105">[Restore](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/restore-element-xmla)命令 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 从 .abf 文件还原数据库，如[还原数据库](#restoring_databases)部分中所述。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-105">The [Restore](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/restore-element-xmla) command restores an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database from an .abf file, as described in the section, [Restoring Databases](#restoring_databases).</span></span>  
  
-   <span data-ttu-id="4e1bc-106">[Synchronize](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla)命令将一个 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库与另一个数据库的数据和元数据同步，如[同步数据库](#synchronizing_databases)部分中所述。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-106">The [Synchronize](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla) command synchronizes one [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database with the data and metadata of another database, as described in the section, [Synchronizing Databases](#synchronizing_databases).</span></span>  
  
##  <a name="backing-up-databases"></a><a name="backing_up_databases"></a><span data-ttu-id="4e1bc-107">备份数据库</span><span class="sxs-lookup"><span data-stu-id="4e1bc-107">Backing Up Databases</span></span>  
 <span data-ttu-id="4e1bc-108">如前所述，`Backup` 命令将特定的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库备份到备份文件。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-108">As mentioned earlier, the `Backup` command backs up a specified [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database to a backup file.</span></span> <span data-ttu-id="4e1bc-109">`Backup` 命令有多个属性，可用于指定要备份的数据库、要使用的备份文件、如何备份安全定义以及要备份的远程分区。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-109">The `Backup` command has various properties that let you specify the database to be backed up, the backup file to use, how to back up security definitions, and the remote partitions to be backed up.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4e1bc-110">Analysis Services 服务帐户必须对每个文件的指定备份位置拥有写入权限。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-110">The Analysis Services service account must have permission to write to the backup location specified for each file.</span></span> <span data-ttu-id="4e1bc-111">此外，用户必须具有以下角色之一：针对 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的管理员角色，或对要备份的数据库拥有完全控制（管理员）权限的数据库角色成员。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-111">Also, the user must have one of the following roles: administrator role on the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance, or a member of a database role with Full Control (Administrator) permissions on the database to be backed up.</span></span>  
  
### <a name="specifying-the-database-and-backup-file"></a><span data-ttu-id="4e1bc-112">指定数据库和备份文件</span><span class="sxs-lookup"><span data-stu-id="4e1bc-112">Specifying the Database and Backup File</span></span>  
 <span data-ttu-id="4e1bc-113">若要指定要备份的数据库，请设置命令的[对象](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla)属性 `Backup` 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-113">To specify the database to be backed up, you set the [Object](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) property of the `Backup` command.</span></span> <span data-ttu-id="4e1bc-114">`Object` 属性必须包含数据库的对象标识符，否则会发生错误。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-114">The `Object` property must contain an object identifier for a database, or an error occurs.</span></span>  
  
 <span data-ttu-id="4e1bc-115">若要指定备份过程要创建和使用的文件，请设置命令的 "[文件](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/file-element-xmla)" 属性 `Backup` 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-115">To specify the file that is to be created and used by the backup process, you set the [File](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/file-element-xmla) property of the `Backup` command.</span></span> <span data-ttu-id="4e1bc-116">`File` 属性应设置为要创建的备份文件的 UNC 路径和文件名。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-116">The `File` property should be set to a UNC path and file name for the backup file to be created.</span></span>  
  
 <span data-ttu-id="4e1bc-117">除了指定要用于备份的文件，还可以设置为备份文件指定以下选项：</span><span class="sxs-lookup"><span data-stu-id="4e1bc-117">Besides specifying which file to use for backup, you can set the following options for the specified backup file:</span></span>  
  
-   <span data-ttu-id="4e1bc-118">如果将[AllowOverwrite](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/allowoverwrite-element-xmla)属性设置为 true，则该 `Backup` 命令将覆盖备份文件（如果指定的文件已存在）。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-118">If you set the [AllowOverwrite](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/allowoverwrite-element-xmla) property to true, the `Backup` command overwrites the backup file if the specified file already exists.</span></span> <span data-ttu-id="4e1bc-119">如果将 `AllowOverwrite` 属性设置为 false，则指定的备份文件已存在时将发生错误。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-119">If you set the `AllowOverwrite` property to false, an error occurs if the specified backup file already exists.</span></span>  
  
-   <span data-ttu-id="4e1bc-120">如果将 " [ApplyCompression](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/applycompression-element-xmla) " 属性设置为 "true"，则在创建文件后将压缩备份文件。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-120">If you set the [ApplyCompression](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/applycompression-element-xmla) property to true, the backup file is compressed after the file is created.</span></span>  
  
-   <span data-ttu-id="4e1bc-121">如果将[Password](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/password-element-xmla)属性设置为任何非空值，则将使用指定的密码对备份文件进行加密。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-121">If you set the [Password](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/password-element-xmla) property to any non-blank value, the backup file is encrypted by using the specified password.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="4e1bc-122">如果未指定 `ApplyCompression` 和 `Password` 属性，备份文件将以明文形式存储连接字符串中包含的用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-122">If `ApplyCompression` and `Password` properties are not specified, the backup file stores user names and passwords that are contained in connection strings in clear text.</span></span> <span data-ttu-id="4e1bc-123">以明文形式存储的数据可以被检索出来。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-123">Data that is stored in clear text may be retrieved.</span></span> <span data-ttu-id="4e1bc-124">为了提高安全性，请使用 `ApplyCompression` 和 `Password` 设置来压缩和加密备份文件。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-124">For increased security, use the `ApplyCompression` and `Password` settings to both compress and encrypt the backup file.</span></span>  
  
### <a name="backing-up-security-settings"></a><span data-ttu-id="4e1bc-125">备份安全设置</span><span class="sxs-lookup"><span data-stu-id="4e1bc-125">Backing Up Security Settings</span></span>  
 <span data-ttu-id="4e1bc-126">[Security](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/security-element-xmla)属性确定 `Backup` 命令是否备份在数据库上定义的安全定义，如角色和权限 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-126">The [Security](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/security-element-xmla) property determines whether the `Backup` command backs up the security definitions, such as roles and permissions, defined on an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database.</span></span> <span data-ttu-id="4e1bc-127">`Security` 属性还确定备份文件是否包含定义为安全定义成员的 Windows 用户帐户和用户组。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-127">The `Security` property also determines whether the backup file includes the Windows user accounts and groups defined as members of the security definitions.</span></span>  
  
 <span data-ttu-id="4e1bc-128">`Security` 属性的值限制为下表中列出的字符串之一。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-128">The value of the `Security` property is limited to one of the strings listed in the following table.</span></span>  
  
|<span data-ttu-id="4e1bc-129">值</span><span class="sxs-lookup"><span data-stu-id="4e1bc-129">Value</span></span>|<span data-ttu-id="4e1bc-130">说明</span><span class="sxs-lookup"><span data-stu-id="4e1bc-130">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="4e1bc-131">*SkipMembership*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-131">*SkipMembership*</span></span>|<span data-ttu-id="4e1bc-132">在备份文件中包括安全定义，但不包括成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-132">Include security definitions, but exclude membership information, in the backup file.</span></span>|  
|<span data-ttu-id="4e1bc-133">*CopyAll*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-133">*CopyAll*</span></span>|<span data-ttu-id="4e1bc-134">在备份文件中包括安全定义和成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-134">Include security definitions and membership information in the backup file.</span></span>|  
|<span data-ttu-id="4e1bc-135">*IgnoreSecurity*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-135">*IgnoreSecurity*</span></span>|<span data-ttu-id="4e1bc-136">不在备份文件中包括安全定义。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-136">Exclude security definitions from the backup file.</span></span>|  
  
### <a name="backing-up-remote-partitions"></a><span data-ttu-id="4e1bc-137">备份远程分区</span><span class="sxs-lookup"><span data-stu-id="4e1bc-137">Backing Up Remote Partitions</span></span>  
 <span data-ttu-id="4e1bc-138">若要在数据库中备份远程分区 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ，请将命令的[BackupRemotePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/backupremotepartitions-element-xmla)属性设置 `Backup` 为 true。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-138">To back up remote partitions in the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, you set the [BackupRemotePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/backupremotepartitions-element-xmla) property of the `Backup` command to true.</span></span> <span data-ttu-id="4e1bc-139">此设置将使 `Backup` 命令为用于存储数据库的远程分区的每个远程数据源创建一个远程备份文件。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-139">This setting causes the `Backup` command to create a remote backup file for each remote data source that is used to store remote partitions for the database.</span></span>  
  
 <span data-ttu-id="4e1bc-140">对于要备份的每个远程数据源，可以通过在命令的 "[位置](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/locations-element-xmla)" 属性中包含[Location](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/location-element-xmla)元素来指定其对应的备份文件 `Backup` 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-140">For each remote data source to be backed up, you can specify its corresponding backup file by including a [Location](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/location-element-xmla) element in the [Locations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/locations-element-xmla) property of the `Backup` command.</span></span> <span data-ttu-id="4e1bc-141">`Location`元素应将其 `File` 属性设置为远程备份文件的 UNC 路径和文件名，并将其[DataSourceID](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/id-element-xmla)属性设置为在数据库中定义的远程数据源的标识符。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-141">The `Location` element should have its `File` property set to the UNC path and file name of the remote backup file, and its [DataSourceID](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/id-element-xmla) property set to the identifier of the remote data source defined in the database.</span></span>  
  
##  <a name="restoring-databases"></a><a name="restoring_databases"></a><span data-ttu-id="4e1bc-142">还原数据库</span><span class="sxs-lookup"><span data-stu-id="4e1bc-142">Restoring Databases</span></span>  
 <span data-ttu-id="4e1bc-143">`Restore` 命令从备份文件中还原指定的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-143">The `Restore` command restores a specified [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database from a backup file.</span></span> <span data-ttu-id="4e1bc-144">`Restore` 命令有多个属性，可用于指定要还原的数据库、要使用的备份文件、如何还原安全定义、要存储的远程分区以及关系 OLAP (ROLAP) 对象的重定位。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-144">The `Restore` command has various properties that let you specify the database to restore, the backup file to use, how to restore security definitions, the remote partitions to be stored, and the relocation relational OLAP (ROLAP) objects.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4e1bc-145">对于每个备份文件，运行还原命令的用户必须对每个文件的指定备份位置具有读取权限。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-145">For each backup file, the user who runs the restore command must have permission to read from the backup location specified for each file.</span></span> <span data-ttu-id="4e1bc-146">若要还原未在服务器上安装的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库，用户还必须是此 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的服务器角色成员。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-146">To restore an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database that is not installed on the server, the user must also be a member of the server role for that [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance.</span></span> <span data-ttu-id="4e1bc-147">若要覆盖 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库，用户必须具有以下角色之一：实例的服务器角色成员 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 或具有完全控制权限的数据库角色的成员 (管理员) 要还原的数据库的权限。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-147">To overwrite an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, the user must have one of the following roles: a member of the server role for the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance or a member of a database role with Full Control (Administrator) permissions on the database to be restored.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4e1bc-148">还原现有数据库之后，还原了此数据库的用户可能会失去对还原后的数据库的访问权限。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-148">After restoring an existing database, the user who restored the database might lose access to the restored database.</span></span> <span data-ttu-id="4e1bc-149">如果在执行备份时用户不是服务器角色成员或者不是拥有完全控制（管理员）权限的数据库角色成员，则会出现这种失去访问权限的情形。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-149">This loss of access can occur if, at the time that the backup was performed, the user was not a member of the server role or was not a member of the database role with Full Control (Administrator) permissions.</span></span>  
  
### <a name="specifying-the-database-and-backup-file"></a><span data-ttu-id="4e1bc-150">指定数据库和备份文件</span><span class="sxs-lookup"><span data-stu-id="4e1bc-150">Specifying the Database and Backup File</span></span>  
 <span data-ttu-id="4e1bc-151">`DatabaseName` 命令的 `Restore` 属性必须包含数据库的对象标识符，否则会发生错误。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-151">The `DatabaseName` property of the `Restore` command must contain an object identifier for a database, or an error occurs.</span></span> <span data-ttu-id="4e1bc-152">如果指定的数据库已经存在，`AllowOverwrite` 属性将确定是否覆盖现有数据库。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-152">If the specified database already exists, the `AllowOverwrite` property determines whether the existing database is overwritten.</span></span> <span data-ttu-id="4e1bc-153">如果 `AllowOverwrite` 属性设置为 false 并且指定的数据库已经存在，则将发生错误。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-153">If the `AllowOverwrite` property is set to false and the specified database already exists, an error occurs.</span></span>  
  
 <span data-ttu-id="4e1bc-154">应将 `File` 命令的 `Restore` 属性设置为要还原到指定数据库的备份文件的 UNC 路径和文件名。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-154">You should set the `File` property of the `Restore` command to a UNC path and file name for the backup file to be restored to the specified database.</span></span> <span data-ttu-id="4e1bc-155">还可以设置指定备份文件的 `Password` 属性。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-155">You can also set the `Password` property for the specified backup file.</span></span> <span data-ttu-id="4e1bc-156">如果 `Password` 属性设置为任何非空值，则将使用该指定密码对备份文件进行解密。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-156">If the `Password` property is set to any non-blank value, the backup file is decrypted by using the specified password.</span></span> <span data-ttu-id="4e1bc-157">如果备份文件未加密，或者指定的密码与用于加密备份文件的密码不相符，则会发生错误。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-157">If the backup file was not encrypted, or if the specified password does not match the password used to encrypt the backup file, an error occurs.</span></span>  
  
### <a name="restoring-security-settings"></a><span data-ttu-id="4e1bc-158">还原安全设置</span><span class="sxs-lookup"><span data-stu-id="4e1bc-158">Restoring Security Settings</span></span>  
 <span data-ttu-id="4e1bc-159">`Security` 属性确定 `Restore` 命令是否还原对 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库定义的安全定义，如角色和权限。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-159">The `Security` property determines whether the `Restore` command restores the security definitions, such as roles and permissions, defined on an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database.</span></span> <span data-ttu-id="4e1bc-160">`Security` 属性还确定 `Restore` 命令是否包含定义为安全定义成员的 Windows 用户帐户和用户组作为还原过程的一部分。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-160">The `Security` property also determines whether the `Restore` command includes the Windows user accounts and groups defined as members of the security definitions as part of the restore process.</span></span>  
  
 <span data-ttu-id="4e1bc-161">此元素的值限定为下表中列出的字符串之一。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-161">The value of this element is limited to one of the strings listed in the following table.</span></span>  
  
|<span data-ttu-id="4e1bc-162">值</span><span class="sxs-lookup"><span data-stu-id="4e1bc-162">Value</span></span>|<span data-ttu-id="4e1bc-163">说明</span><span class="sxs-lookup"><span data-stu-id="4e1bc-163">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="4e1bc-164">*SkipMembership*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-164">*SkipMembership*</span></span>|<span data-ttu-id="4e1bc-165">在数据库中包括安全定义，但不包括成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-165">Include security definitions, but exclude membership information, in the database.</span></span>|  
|<span data-ttu-id="4e1bc-166">*CopyAll*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-166">*CopyAll*</span></span>|<span data-ttu-id="4e1bc-167">在数据库中包括安全定义和成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-167">Include security definitions and membership information in the database.</span></span>|  
|<span data-ttu-id="4e1bc-168">*IgnoreSecurity*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-168">*IgnoreSecurity*</span></span>|<span data-ttu-id="4e1bc-169">不在数据库中包括安全定义。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-169">Exclude security definitions from the database.</span></span>|  
  
### <a name="restoring-remote-partitions"></a><span data-ttu-id="4e1bc-170">还原远程分区</span><span class="sxs-lookup"><span data-stu-id="4e1bc-170">Restoring Remote Partitions</span></span>  
 <span data-ttu-id="4e1bc-171">对于在前述 `Backup` 命令中创建的每个远程备份文件，可以通过在 `Location` 命令的 `Locations` 属性中包含一个 `Restore` 元素来还原该备份文件的相关远程分区。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-171">For each remote backup file created during a previous `Backup` command, you can restore its associated remote partition by including a `Location` element in the `Locations` property of the `Restore` command.</span></span> <span data-ttu-id="4e1bc-172">必须排除每个元素的[DataSourceType](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/type-element-xmla)属性或将其 `Location` 显式设置为 "*远程*"。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-172">The [DataSourceType](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/type-element-xmla) property for each `Location` element must be excluded or explicitly set to *Remote*.</span></span>  
  
 <span data-ttu-id="4e1bc-173">对于每个指定的 `Location` 元素，[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例将访问在 `DataSourceID` 属性中指定的远程数据源，以还原在 `File` 属性中指定的远程备份文件中定义的分区。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-173">For each specified `Location` element, the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance contacts the remote data source specified in the `DataSourceID` property to restore the partitions defined in the remote backup file specified in the `File` property.</span></span> <span data-ttu-id="4e1bc-174">除了 `DataSourceID` 和 `File` 属性外，下列属性也可供每个 `Location` 元素用于还原远程分区：</span><span class="sxs-lookup"><span data-stu-id="4e1bc-174">Besides the `DataSourceID` and `File` properties, the following properties are available for each `Location` element used to restore a remote partition:</span></span>  
  
-   <span data-ttu-id="4e1bc-175">若要覆盖在 `DataSourceID` 中指定的远程数据源的连接字符串，可将 `ConnectionString` 元素的 `Location` 属性设置为其他连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-175">To override the connection string for the remote data source specified in `DataSourceID`, you can set the `ConnectionString` property of the `Location` element to a different connection string.</span></span> <span data-ttu-id="4e1bc-176">此时，`Restore` 命令将使用 `ConnectionString` 属性中包含的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-176">The `Restore` command will then use the connection string that is contained in the `ConnectionString` property.</span></span> <span data-ttu-id="4e1bc-177">如果未指定 `ConnectionString`，`Restore` 命令将使用指定的远程数据源的备份文件中存储的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-177">If `ConnectionString` is not specified, the `Restore` command uses the connection string stored in the backup file for the specified remote data source.</span></span> <span data-ttu-id="4e1bc-178">可以使用 `ConnectionString` 设置将远程分区移到其他远程实例。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-178">You can use the `ConnectionString` setting to move a remote partition to a different remote instance.</span></span> <span data-ttu-id="4e1bc-179">但是不能使用 `ConnectionString` 设置将远程分区还原到包含已还原的数据库的同一实例。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-179">However, you cannot use the `ConnectionString` setting to restore a remote partition to the same instance that contains the restored database.</span></span> <span data-ttu-id="4e1bc-180">换言之，不能使用 `ConnectionString` 属性将远程分区放入本地分区。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-180">In other words, you cannot use the `ConnectionString` property to make a remote partition into a local partition.</span></span>  
  
-   <span data-ttu-id="4e1bc-181">对于用于在远程数据源上存储远程分区的每个原始文件夹，你可以指定一个[folder](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/folder-element-xmla)元素，以指示要在其中还原原始文件夹中存储的所有远程分区的新文件夹。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-181">For each original folder used to store the remote partitions on the remote data source, you can specify a [Folder](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/folder-element-xmla) element to indicate the new folder in which to restore all the remote partitions stored in the original folder.</span></span> <span data-ttu-id="4e1bc-182">如果未指定 `Folder` 元素，`Restore` 命令将使用远程备份文件中包含的为远程分区指定的原始文件夹。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-182">If a `Folder` element is not specified, the `Restore` command uses the original folders specified for the remote partitions that are contained in the remote backup file.</span></span>  
  
### <a name="relocating-rolap-objects"></a><span data-ttu-id="4e1bc-183">重定位 ROLAP 对象</span><span class="sxs-lookup"><span data-stu-id="4e1bc-183">Relocating ROLAP Objects</span></span>  
 <span data-ttu-id="4e1bc-184">`Restore` 命令无法还原使用 ROLAP 存储的对象的聚合或数据，因为此类信息存储在基础关系数据源的表中。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-184">The `Restore` command cannot restore aggregations or data for objects that use ROLAP storage because such information is stored in tables on an underlying relational data source.</span></span> <span data-ttu-id="4e1bc-185">但可以还原 ROLAP 对象的元数据。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-185">However, the metadata for ROLAP objects can be restored.</span></span> <span data-ttu-id="4e1bc-186">为了还原 ROLAP 对象的元数据，`Restore` 命令会对关系数据源重新创建表结构。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-186">To restore the metadata for ROLAP object, the `Restore` command re-creates the table structure on a relational data source.</span></span>  
  
 <span data-ttu-id="4e1bc-187">可以使用 `Location` 命令中的 `Restore` 元素重定位 ROLAP 对象。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-187">You can use the `Location` element in a `Restore` command to relocate ROLAP objects.</span></span> <span data-ttu-id="4e1bc-188">对于 `Location` 用于重定位数据源的每个元素， `DataSourceType` 属性必须显式设置为 "*本地*"。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-188">For each `Location` element used to relocate a data source, the `DataSourceType` property must be explicitly set to *Local*.</span></span> <span data-ttu-id="4e1bc-189">还必须将 `ConnectionString` 元素的 `Location` 属性设置为新位置的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-189">You also have to set the `ConnectionString` property of the `Location` element to the connection string of the new location.</span></span> <span data-ttu-id="4e1bc-190">在还原过程中，`Restore` 命令将使用 `DataSourceID` 元素的 `Location` 属性的值替换由 `ConnectionString` 元素的 `Location` 属性标识的数据源的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-190">During the restore, the `Restore` command will replace the connection string for the data source identified by the `DataSourceID` property of the `Location` element with the value of the `ConnectionString` property of the `Location` element.</span></span>  
  
##  <a name="synchronizing-databases"></a><a name="synchronizing_databases"></a><span data-ttu-id="4e1bc-191">同步数据库</span><span class="sxs-lookup"><span data-stu-id="4e1bc-191">Synchronizing Databases</span></span>  
 <span data-ttu-id="4e1bc-192">`Synchronize` 命令同步指定 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库和另一数据库的数据和元数据。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-192">The `Synchronize` command synchronizes the data and metadata of a specified [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database with another database.</span></span> <span data-ttu-id="4e1bc-193">`Synchronize` 命令有多个属性，可用于指定源数据库、如何同步安全定义、要同步的远程分区以及 ROLAP 对象的同步。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-193">The `Synchronize` command has various properties that let you specify the source database, how to synchronize security definitions, the remote partitions to be synchronized, and the synchronization of ROLAP objects.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4e1bc-194">只有服务器管理员和数据库管理员可以执行 `Synchronize` 命令。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-194">The `Synchronize` command can be executed only by server administrators and database administrators.</span></span> <span data-ttu-id="4e1bc-195">源数据库和目标数据库必须具有相同的数据库兼容级别。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-195">Both the source and destination database must have the same database compatibility level.</span></span>  
  
### <a name="specifying-the-source-database"></a><span data-ttu-id="4e1bc-196">指定源数据库</span><span class="sxs-lookup"><span data-stu-id="4e1bc-196">Specifying the Source Database</span></span>  
 <span data-ttu-id="4e1bc-197">命令的[Source](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/source-element-xmla)属性 `Synchronize` 包含两个属性： `ConnectionString` 和 `Object` 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-197">The [Source](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/source-element-xmla) property of the `Synchronize` command contains two properties, `ConnectionString` and `Object`.</span></span> <span data-ttu-id="4e1bc-198">`ConnectionString` 属性包含源数据库所属实例的连接字符串，`Object` 属性包含源数据库的对象标识符。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-198">The `ConnectionString` property contains the connection string of the instance that contains the source database, and the `Object` property contains the object identifier for the source database.</span></span>  
  
 <span data-ttu-id="4e1bc-199">目标数据库是 `Synchronize` 命令在其中运行的会话的当前数据库。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-199">The destination database is the current database for the session in which the `Synchronize` command runs.</span></span>  
  
 <span data-ttu-id="4e1bc-200">如果 `ApplyCompression` 命令的 `Synchronize` 属性设置为 true，从源数据库发送到目标数据库的信息将在发送前进行压缩。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-200">If the `ApplyCompression` property of the `Synchronize` command is set to true, the information sent from the source database to the destination database is compressed before being sent.</span></span>  
  
### <a name="synchronizing-security-settings"></a><span data-ttu-id="4e1bc-201">同步安全设置</span><span class="sxs-lookup"><span data-stu-id="4e1bc-201">Synchronizing Security Settings</span></span>  
 <span data-ttu-id="4e1bc-202">[SynchronizeSecurity](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/security-element-xmla)属性确定 `Synchronize` 命令是否同步在源数据库上定义的安全定义，如角色和权限。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-202">The [SynchronizeSecurity](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/security-element-xmla) property determines whether the `Synchronize` command synchronizes the security definitions, such as roles and permissions, defined on the source database.</span></span> <span data-ttu-id="4e1bc-203">`SynchronizeSecurity` 属性还确定 `Sychronize` 命令是否包含定义为安全定义成员的 Windows 用户帐户和用户组。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-203">The `SynchronizeSecurity` property also determines whether the `Sychronize` command includes the Windows user accounts and groups defined as members of the security definitions.</span></span>  
  
 <span data-ttu-id="4e1bc-204">此元素的值限定为下表中列出的字符串之一。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-204">The value of this element is limited to one of the strings listed in the following table.</span></span>  
  
|<span data-ttu-id="4e1bc-205">值</span><span class="sxs-lookup"><span data-stu-id="4e1bc-205">Value</span></span>|<span data-ttu-id="4e1bc-206">说明</span><span class="sxs-lookup"><span data-stu-id="4e1bc-206">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="4e1bc-207">*SkipMembership*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-207">*SkipMembership*</span></span>|<span data-ttu-id="4e1bc-208">在目标数据库中包括安全定义，但不包括成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-208">Include security definitions, but exclude membership information, in the destination database.</span></span>|  
|<span data-ttu-id="4e1bc-209">*CopyAll*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-209">*CopyAll*</span></span>|<span data-ttu-id="4e1bc-210">在目标数据库中包括安全定义和成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-210">Include security definitions and membership information in the destination database.</span></span>|  
|<span data-ttu-id="4e1bc-211">*IgnoreSecurity*</span><span class="sxs-lookup"><span data-stu-id="4e1bc-211">*IgnoreSecurity*</span></span>|<span data-ttu-id="4e1bc-212">不在目标数据库中包括安全定义。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-212">Exclude security definitions from the destination database.</span></span>|  
  
### <a name="synchronizing-remote-partitions"></a><span data-ttu-id="4e1bc-213">同步远程分区</span><span class="sxs-lookup"><span data-stu-id="4e1bc-213">Synchronizing Remote Partitions</span></span>  
 <span data-ttu-id="4e1bc-214">对于源数据库中存在的每个远程数据源，可以通过在 `Location` 命令的 `Locations` 属性中包含一个 `Synchronize` 元素来同步每个关联的远程分区。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-214">For each remote data source that exists on the source database, you can synchronize each associated remote partition by including a `Location` element in the `Locations` property of the `Synchronize` command.</span></span> <span data-ttu-id="4e1bc-215">对于每个 `Location` 元素， `DataSourceType` 属性必须被排除或显式设置为*Remote*。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-215">For each `Location` element, the `DataSourceType` property must be excluded or explicitly set to *Remote*.</span></span>  
  
 <span data-ttu-id="4e1bc-216">为了定义和连接到目标数据库中的远程数据源，`Synchronize` 命令使用在 `ConnectionString` 元素的 `Location` 属性中定义的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-216">To define and connect to a remote data source in the destination database, the `Synchronize` command uses the connection string defined in the `ConnectionString` property of the `Location` element.</span></span> <span data-ttu-id="4e1bc-217">然后，`Synchronize` 命令使用 `DataSourceID` 元素的 `Location` 属性标识要同步的远程分区。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-217">The `Synchronize` command then uses the `DataSourceID` property of the `Location` element to identify which remote partitions to synchronize.</span></span> <span data-ttu-id="4e1bc-218">此 `Synchronize` 命令将源数据库上的属性中指定的远程数据源的远程分区 `DataSourceID` 与目标数据库的属性中指定的远程数据源同步 `DataSourceID` 。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-218">The `Synchronize`command synchronizes the remote partitions on the remote data source specified in the `DataSourceID` property on the source database with the remote data source specified in the `DataSourceID` property on the destination database.</span></span>  
  
 <span data-ttu-id="4e1bc-219">对于用于在源数据库的远程数据源中存储远程分区的每个原始文件夹，还可以在 `Folder` 元素中指定 `Location` 元素。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-219">For each original folder used to store the remote partitions on the remote data source on the source database, you can also specify a `Folder` element in the `Location` element.</span></span> <span data-ttu-id="4e1bc-220">`Folder` 元素指示目标数据库的新文件夹，要将该文件夹中的分区与远程数据源中原始文件夹中存储的所有远程分区同步。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-220">The `Folder` element indicates the new folder for the destination database in which to synchronize all the remote partitions stored in the original folder on the remote data source.</span></span> <span data-ttu-id="4e1bc-221">如果未指定 `Folder` 元素，Synchronize 命令将使用源数据库中包含的为远程分区指定的原始文件夹。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-221">If a `Folder` element is not specified, the Synchronize command uses the original folders specified for remote partitions that are contained in the source database.</span></span>  
  
### <a name="synchronizing-rolap-objects"></a><span data-ttu-id="4e1bc-222">同步 ROLAP 对象</span><span class="sxs-lookup"><span data-stu-id="4e1bc-222">Synchronizing ROLAP Objects</span></span>  
 <span data-ttu-id="4e1bc-223">`Synchronize` 命令无法同步使用 ROLAP 存储的对象的聚合或数据，因为此类信息存储在基础关系数据源的表中。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-223">The `Synchronize` command cannot synchronize aggregations or data for objects that use ROLAP storage because such information is stored in tables on an underlying relational data source.</span></span> <span data-ttu-id="4e1bc-224">但可以同步 ROLAP 对象的元数据。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-224">However, the metadata for ROLAP objects can be synchronized.</span></span> <span data-ttu-id="4e1bc-225">为了同步元数据，`Synchronize` 命令会对关系数据源重新创建表结构。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-225">To synchronize the metadata, the `Synchronize` command recreates the table structure on a relational data source.</span></span>  
  
 <span data-ttu-id="4e1bc-226">可以使用 Synchronize 命令中的 `Location` 元素同步 ROLAP 对象。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-226">You can use the `Location` element in a Synchronize command to synchronize ROLAP objects.</span></span> <span data-ttu-id="4e1bc-227">对于 `Location` 用于重定位数据源的每个元素， `DataSourceType` 属性必须显式设置为 "*本地*"。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-227">For each `Location` element used to relocate a data source, the `DataSourceType` property must be explicitly set to *Local*.</span></span> <span data-ttu-id="4e1bc-228">.</span><span class="sxs-lookup"><span data-stu-id="4e1bc-228">.</span></span> <span data-ttu-id="4e1bc-229">还必须将 `ConnectionString` 元素的 `Location` 属性设置为新位置的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-229">You also have to set the `ConnectionString` property of the `Location` element to the connection string of the new location.</span></span> <span data-ttu-id="4e1bc-230">在同步过程中，`Synchronize` 命令将使用 `DataSourceID` 元素的 `Location` 属性的值替换由 `ConnectionString` 元素的 `Location` 属性标识的数据源的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="4e1bc-230">During synchronization, the `Synchronize` command will replace the connection string for the data source identified by the `DataSourceID` property of the `Location` element with the value of the `ConnectionString` property of the `Location` element.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4e1bc-231">另请参阅</span><span class="sxs-lookup"><span data-stu-id="4e1bc-231">See Also</span></span>  
 <span data-ttu-id="4e1bc-232">[&#40;XMLA&#41;备份元素](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/backup-element-xmla) </span><span class="sxs-lookup"><span data-stu-id="4e1bc-232">[Backup Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/backup-element-xmla) </span></span>  
 <span data-ttu-id="4e1bc-233">[&#40;XMLA&#41;Restore 元素](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/restore-element-xmla) </span><span class="sxs-lookup"><span data-stu-id="4e1bc-233">[Restore Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/restore-element-xmla) </span></span>  
 <span data-ttu-id="4e1bc-234">[&#40;XMLA&#41;同步元素](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla) </span><span class="sxs-lookup"><span data-stu-id="4e1bc-234">[Synchronize Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla) </span></span>  
 [<span data-ttu-id="4e1bc-235">备份和还原 Analysis Services 数据库</span><span class="sxs-lookup"><span data-stu-id="4e1bc-235">Backup and Restore of Analysis Services Databases</span></span>](../multidimensional-models/backup-and-restore-of-analysis-services-databases.md)  
  
  
