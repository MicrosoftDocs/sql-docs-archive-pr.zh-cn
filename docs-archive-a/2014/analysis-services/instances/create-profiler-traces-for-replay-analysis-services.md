---
title: 创建用于重播的事件探查器跟踪 (Analysis Services) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Profiler, Analysis Services
- monitoring Analysis Services [SQL Server]
- replaying queries
- replaying discovers
- events [Analysis Services]
- replaying commands
- Profiler [SQL Server Profiler], Analysis Services
- performance [Analysis Services], replays
- traces [Analysis Services]
ms.assetid: 93b2fc46-7cfb-4ab5-abeb-1475a7d6f0f2
author: minewiskan
ms.author: owend
ms.openlocfilehash: 9822d9d2589decdde731da5f5888572962b0e612
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87689114"
---
# <a name="create-profiler-traces-for-replay-analysis-services"></a><span data-ttu-id="c6157-102">为重播创建事件探查器跟踪 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="c6157-102">Create Profiler Traces for Replay (Analysis Services)</span></span>
  <span data-ttu-id="c6157-103">若要将查询、发现和用户提交到的命令重播， [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 必须收集所需的事件。</span><span class="sxs-lookup"><span data-stu-id="c6157-103">To replay queries, discovers, and commands that are submitted by users to [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] must gather the required events.</span></span> <span data-ttu-id="c6157-104">为了启动这些事件的集合，必须在 **“跟踪属性”** 对话框的 **“事件选择”** 选项卡中选择相应的事件类。</span><span class="sxs-lookup"><span data-stu-id="c6157-104">In order to initiate collection of these events, appropriate event classes must be selected in the **Event Selection** tab of the **Trace Properties** dialog box.</span></span> <span data-ttu-id="c6157-105">例如，如果选择了 Query Begin 事件类，则将收集包含查询的事件，并将其用于重播。</span><span class="sxs-lookup"><span data-stu-id="c6157-105">For example if the Query Begin event class is selected, events that contain queries are collected and used for replay.</span></span> <span data-ttu-id="c6157-106">此外，跟踪文件还包含足够的信息，以支持在分布式环境中以原始顺序重播服务器事务。</span><span class="sxs-lookup"><span data-stu-id="c6157-106">Also, the trace file contains sufficient information to support replaying server transactions in a distributed environment in the original sequence of transactions.</span></span>  
  
## <a name="replay-for-queries"></a><span data-ttu-id="c6157-107">重播查询</span><span class="sxs-lookup"><span data-stu-id="c6157-107">Replay for Queries</span></span>  
 <span data-ttu-id="c6157-108">若要重播查询， [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 必须捕获下列事件：</span><span class="sxs-lookup"><span data-stu-id="c6157-108">To replay queries, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] must capture the following events:</span></span>  
  
-   <span data-ttu-id="c6157-109">Audit Login 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-109">Audit Login event class with all its data columns.</span></span> <span data-ttu-id="c6157-110">此事件类提供有关登录的用户以及会话设置的信息。</span><span class="sxs-lookup"><span data-stu-id="c6157-110">This event class provides information about which user logged in and about the session settings.</span></span> <span data-ttu-id="c6157-111">服务器进程 ID (SPID) 提供对用户会话的引用。</span><span class="sxs-lookup"><span data-stu-id="c6157-111">The server process ID (SPID) provides the reference to the user session.</span></span> <span data-ttu-id="c6157-112">有关详细信息，请参阅 [Security Audit Data Columns](https://docs.microsoft.com/bi-reference/trace-events/security-audit-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-112">For more information, see [Security Audit Data Columns](https://docs.microsoft.com/bi-reference/trace-events/security-audit-data-columns).</span></span>  
  
-   <span data-ttu-id="c6157-113">Query Begin 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-113">Query Begin event class with all its data columns.</span></span> <span data-ttu-id="c6157-114">此事件类提供有关提交给 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]的查询的信息。</span><span class="sxs-lookup"><span data-stu-id="c6157-114">This event class provides information about the query that was submitted to [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="c6157-115">事件子类列提供有关查询类型的信息。</span><span class="sxs-lookup"><span data-stu-id="c6157-115">The Event Subclass column provides information about the type of query.</span></span> <span data-ttu-id="c6157-116">TextData 列提供查询的实际文本。</span><span class="sxs-lookup"><span data-stu-id="c6157-116">The TextData column provides the actual text of the query.</span></span> <span data-ttu-id="c6157-117">RequestParameters 列提供参数化查询的参数，RequestProperties 列提供 XML for Analysis (XMLA) 请求的属性。</span><span class="sxs-lookup"><span data-stu-id="c6157-117">The RequestParameters column provides the parameters for parameterized queries, and the RequestProperties column provides the properties of an XML for Analysis (XMLA) request.</span></span> <span data-ttu-id="c6157-118">有关详细信息，请参阅 [Queries Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/queries-events-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-118">For more information, see [Queries Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/queries-events-data-columns).</span></span>  
  
-   <span data-ttu-id="c6157-119">Query End 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-119">Query End event class with all its data columns.</span></span> <span data-ttu-id="c6157-120">此事件类验证查询执行的状态。</span><span class="sxs-lookup"><span data-stu-id="c6157-120">This event class verifies the status of the query execution.</span></span> <span data-ttu-id="c6157-121">有关详细信息，请参阅 [Queries Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/queries-events-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-121">For more information, see [Queries Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/queries-events-data-columns).</span></span>  
  
## <a name="replay-for-discovers"></a><span data-ttu-id="c6157-122">重播发现</span><span class="sxs-lookup"><span data-stu-id="c6157-122">Replay for Discovers</span></span>  
 <span data-ttu-id="c6157-123">若要重播发现， [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 必须捕获下列事件：</span><span class="sxs-lookup"><span data-stu-id="c6157-123">To replay discovers, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] must capture the following events:</span></span>  
  
-   <span data-ttu-id="c6157-124">Audit Login 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-124">Audit Login event class with all its data columns.</span></span> <span data-ttu-id="c6157-125">此事件类提供有关登录的用户以及会话设置的信息。</span><span class="sxs-lookup"><span data-stu-id="c6157-125">This event class provides information about which user logged in and about the session settings.</span></span> <span data-ttu-id="c6157-126">SPID 提供对用户会话的引用。</span><span class="sxs-lookup"><span data-stu-id="c6157-126">The SPID provides the reference to the user session.</span></span> <span data-ttu-id="c6157-127">有关详细信息，请参阅 [Security Audit Data Columns](https://docs.microsoft.com/bi-reference/trace-events/security-audit-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-127">For more information, see [Security Audit Data Columns](https://docs.microsoft.com/bi-reference/trace-events/security-audit-data-columns).</span></span>  
  
-   <span data-ttu-id="c6157-128">Discover Begin 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-128">Discover Begin event class with all its data columns.</span></span> <span data-ttu-id="c6157-129">TextData 列提供 \<RequestType> 发现请求的部分，RequestProperties 列提供 \<Properties> 发现请求的部分。</span><span class="sxs-lookup"><span data-stu-id="c6157-129">The TextData column provides the \<RequestType> portion of the discover request, and the RequestProperties column provides the \<Properties> portion of the discover request.</span></span> <span data-ttu-id="c6157-130">EventSubclass 列提供发现类型。</span><span class="sxs-lookup"><span data-stu-id="c6157-130">The EventSubclass column provides the discover type.</span></span> <span data-ttu-id="c6157-131">有关详细信息，请参阅 [Discover Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/discover-events-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-131">For more information, see [Discover Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/discover-events-data-columns).</span></span>  
  
-   <span data-ttu-id="c6157-132">Discover End 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-132">Discover End event class with all its data columns.</span></span> <span data-ttu-id="c6157-133">此事件类验证发现请求的状态。</span><span class="sxs-lookup"><span data-stu-id="c6157-133">This event class verifies the status of the discover request.</span></span> <span data-ttu-id="c6157-134">有关详细信息，请参阅 [Discover Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/discover-events-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-134">For more information, see [Discover Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/discover-events-data-columns).</span></span>  
  
## <a name="replay-for-commands"></a><span data-ttu-id="c6157-135">重播命令</span><span class="sxs-lookup"><span data-stu-id="c6157-135">Replay for Commands</span></span>  
 <span data-ttu-id="c6157-136">若要重播命令， [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 必须捕获下列事件：</span><span class="sxs-lookup"><span data-stu-id="c6157-136">To replay commands, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] must capture the following events:</span></span>  
  
-   <span data-ttu-id="c6157-137">Command Begin 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-137">Command Begin event class with all its data columns.</span></span> <span data-ttu-id="c6157-138">TextData 列提供有关命令的详细信息，如进程类型、数据库 ID 和多维数据集 ID。</span><span class="sxs-lookup"><span data-stu-id="c6157-138">The TextData column provides the command details, such as the process type, database ID, and cube ID.</span></span> <span data-ttu-id="c6157-139">RequestParameters 列提供参数化命令的参数，RequestProperties 列提供 XMLA 请求的属性。</span><span class="sxs-lookup"><span data-stu-id="c6157-139">The RequestParameters column provides the parameters for parameterized command, and the RequestProperties column provides the properties of an XMLA request.</span></span> <span data-ttu-id="c6157-140">有关详细信息，请参阅 [Command Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/command-events-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-140">For more information, see [Command Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/command-events-data-columns).</span></span>  
  
-   <span data-ttu-id="c6157-141">Command End 事件类及其所有数据列。</span><span class="sxs-lookup"><span data-stu-id="c6157-141">Command End event class with all its data columns.</span></span> <span data-ttu-id="c6157-142">此事件类验证命令的状态。</span><span class="sxs-lookup"><span data-stu-id="c6157-142">This event class verifies the status of the command.</span></span> <span data-ttu-id="c6157-143">有关详细信息，请参阅 [Command Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/command-events-data-columns)。</span><span class="sxs-lookup"><span data-stu-id="c6157-143">For more information, see [Command Events Data Columns](https://docs.microsoft.com/bi-reference/trace-events/command-events-data-columns).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c6157-144">另请参阅</span><span class="sxs-lookup"><span data-stu-id="c6157-144">See Also</span></span>  
 <span data-ttu-id="c6157-145">[Analysis Services 跟踪事件](https://docs.microsoft.com/bi-reference/trace-events/analysis-services-trace-events) </span><span class="sxs-lookup"><span data-stu-id="c6157-145">[Analysis Services Trace Events](https://docs.microsoft.com/bi-reference/trace-events/analysis-services-trace-events) </span></span>  
 [<span data-ttu-id="c6157-146">通过 SQL Server Profiler 监视 Analysis Services 简介</span><span class="sxs-lookup"><span data-stu-id="c6157-146">Introduction to Monitoring Analysis Services with SQL Server Profiler</span></span>](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md)  
  
  
