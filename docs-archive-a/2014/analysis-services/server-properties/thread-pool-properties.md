---
title: 线程池属性 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- PriorityRatio property
- threads [Analysis Services]
- MinThreads property
- NumThreads property
- MaxThreads property
- Concurrency property
ms.assetid: e2697bb6-6d3f-4621-b9fd-575ac39c2185
author: minewiskan
ms.author: owend
ms.openlocfilehash: 3a7c8ab1ae97cc00e7c46060db85fa48eff700ab
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87691922"
---
# <a name="thread-pool-properties"></a><span data-ttu-id="4ea0c-102">线程池属性</span><span class="sxs-lookup"><span data-stu-id="4ea0c-102">Thread Pool Properties</span></span>
  [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="4ea0c-103">使用多线程处理许多操作，通过并行运行多个作业提高总体服务器性能。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-103">uses multi-threading for many operations, improving overall server performance by running multiple jobs in parallel.</span></span> <span data-ttu-id="4ea0c-104">为了更高效地管理线程， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 使用线程池预分配线程并提高下一作业的线程可用性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-104">To manage threads more efficiently, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses thread pools to preallocate threads and facilitate thread availability for the next job.</span></span>

 <span data-ttu-id="4ea0c-105">每个 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例都维护自己的一组线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-105">Each instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] maintains its own set of thread pools.</span></span> <span data-ttu-id="4ea0c-106">表格实例和多维实例在使用线程池的方式上有着重大区别。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-106">There are significant differences in how tabular and multidimensional instances use thread pools.</span></span> <span data-ttu-id="4ea0c-107">最重要的区别在于，只有多维解决方案才能使用 `IOProcess` 线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-107">The most important difference is that only multidimensional solutions use the `IOProcess` thread pool.</span></span> <span data-ttu-id="4ea0c-108">因此，本主题中描述的 `PerNumaNode` 属性对表格实例没有意义。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-108">As such, the `PerNumaNode` property, described in this topic, is not meaningful for Tabular instances.</span></span>

 <span data-ttu-id="4ea0c-109">本主题包含以下各节：</span><span class="sxs-lookup"><span data-stu-id="4ea0c-109">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="4ea0c-110">Analysis Services 中的线程管理</span><span class="sxs-lookup"><span data-stu-id="4ea0c-110">Thread Management in Analysis Services</span></span>](#bkmk_threadarch)

-   [<span data-ttu-id="4ea0c-111">线程池属性参考</span><span class="sxs-lookup"><span data-stu-id="4ea0c-111">Thread Pool Property Reference</span></span>](#bkmk_propref)

-   [<span data-ttu-id="4ea0c-112">将 GroupAffinity 设置为关联线程到处理器组中的处理器</span><span class="sxs-lookup"><span data-stu-id="4ea0c-112">Set GroupAffinity to affinitize threads to processors in a processor group</span></span>](#bkmk_groupaffinity)

-   [<span data-ttu-id="4ea0c-113">设置 PerNumaNode 以使 IO 线程与 NUMA 节点中的处理器关联</span><span class="sxs-lookup"><span data-stu-id="4ea0c-113">Set PerNumaNode to affinitize IO threads to processors in a NUMA node</span></span>](#bkmk_pernumanode)

-   [<span data-ttu-id="4ea0c-114">确定当前线程池设置</span><span class="sxs-lookup"><span data-stu-id="4ea0c-114">Determine current thread pool settings</span></span>](#bkmk_currentsettings)

-   [<span data-ttu-id="4ea0c-115">依赖或相关属性</span><span class="sxs-lookup"><span data-stu-id="4ea0c-115">Dependent or Related Properties</span></span>](#bkmk_related)

-   [<span data-ttu-id="4ea0c-116">关于 MSMDSRV.INI</span><span class="sxs-lookup"><span data-stu-id="4ea0c-116">About MSMDSRV.INI</span></span>](#bkmk_msmdrsrvini)

> [!NOTE]
>  <span data-ttu-id="4ea0c-117">NUMA 系统上的表格部署不在本主题讨论范围内。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-117">Tabular deployment on NUMA systems is out of scope for this topic.</span></span> <span data-ttu-id="4ea0c-118">虽然表格解决方案可以成功部署在 NUMA 系统上，但在高度纵向扩展的体系结构中，表格模型使用的内存中数据库技术的性能特性所展现出的优点可能有限。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-118">Although tabular solutions can be successfully deployed on NUMA systems, the performance characteristics of the in-memory database technology used by tabular models may show limited benefits on a highly scaled up architectures.</span></span> <span data-ttu-id="4ea0c-119">有关详细信息，请参阅 [Analysis Services 案例研究：在大型商业解决方案中使用表格模型](https://msdn.microsoft.com/library/dn751533.aspx) 和 [调整表格解决方案大小的硬件](https://go.microsoft.com/fwlink/?LinkId=330359)。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-119">For more information, see [Analysis Services Case Study: Using Tabular Models in Large-scale Commercial Solutions](https://msdn.microsoft.com/library/dn751533.aspx) and [Hardware Sizing a Tabular Solution](https://go.microsoft.com/fwlink/?LinkId=330359).</span></span>

##  <a name="thread-management-in-analysis-services"></a><a name="bkmk_threadarch"></a><span data-ttu-id="4ea0c-120">Analysis Services 中的线程管理</span><span class="sxs-lookup"><span data-stu-id="4ea0c-120">Thread Management in Analysis Services</span></span>
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="4ea0c-121">使用多线程通过增加并行执行的任务数来充分利用可用的 CPU 资源。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-121">uses multi-threading to take advantage of the available CPU resources by increasing the number of tasks executing in parallel.</span></span> <span data-ttu-id="4ea0c-122">存储引擎是多线程的。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-122">The storage engine is multi-threaded.</span></span> <span data-ttu-id="4ea0c-123">例如，在存储引擎内执行的多线程作业包括并行处理对象或处理已推送到存储引擎的离散查询，或返回查询所请求的数据值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-123">Examples of multi-threaded jobs that execute within the storage engine include processing objects in parallel or handling discrete queries that have been pushed to the storage engine, or returning data values requested by a query.</span></span> <span data-ttu-id="4ea0c-124">由于公式引擎计算的串行特性，它将进行单线程处理。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-124">The formula engine, due to the serial nature of the calculations it evaluates, is single threaded.</span></span> <span data-ttu-id="4ea0c-125">每个查询主要在单线程中执行，发出请求后往往需要等待存储引擎返回数据。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-125">Each query executes primarily on a single thread, requesting and often waiting for data returned by the storage engine.</span></span> <span data-ttu-id="4ea0c-126">查询线程的执行时间较长，仅当整个查询完成后才会将其释放。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-126">Query threads have longer executions, and are released only after the entire query is completed.</span></span>

 <span data-ttu-id="4ea0c-127">默认情况下，在 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 和更高版本上， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将使用所有可用的逻辑处理器，在运行较高版本的 Windows 和 SQL Server 的系统上最多使用 640 个。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-127">By default, on versions [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] and later, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will use all available logical processors, up to 640 on systems running higher editions of Windows and SQL Server.</span></span> <span data-ttu-id="4ea0c-128">启动时，msmdsrv.exe 进程将分配给特定处理器组，但随着时间的推移，可在任何处理器组的任意逻辑处理器上对线程进行计划。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-128">Upon start up, the msmdsrv.exe process will be assigned to a specific processor group, but over time threads can be scheduled on any logical processor, in any processor group.</span></span>

 <span data-ttu-id="4ea0c-129">使用大量处理器的一个副作用是，有时候您可能会遇到性能降级情况，因为查询和处理负荷被分散在大量处理器上，对共享数据结构的争用将会加剧。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-129">One side-effect of using a large number of processors is that you can sometimes experience performance degradation as query and processing loads are spread out across a large number of processors and contention for shared data structures increase.</span></span> <span data-ttu-id="4ea0c-130">这种情况主要发生在采用 NUMA 体系结构的高端系统上，但在同一硬件上运行多个需要处理大量数据的应用程序的非 NUMA 系统上也会出现这种情况。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-130">This can occur particularly on high-end systems that use NUMA architecture, but also on non-NUMA systems running multiple data intensive applications on the same hardware.</span></span>

 <span data-ttu-id="4ea0c-131">若要缓解此问题，您可以在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 操作类型和一组特定逻辑处理器之间设置关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-131">To alleviate this problem, you can set affinity between types of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] operations and a specific set of logical processors.</span></span> <span data-ttu-id="4ea0c-132">使用 `GroupAffinity` 属性，您可以创建自定义关联掩码，用于为 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 管理的每个线程池类型指定所使用的系统资源。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-132">The `GroupAffinity` property lets you create custom affinity masks that specify which system resource to use for each of the thread pool types managed by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>

 <span data-ttu-id="4ea0c-133">对于用于各种 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 工作负载的五个线程池，都可以设置自定义关联：</span><span class="sxs-lookup"><span data-stu-id="4ea0c-133">Custom affinity can be set on any of the five thread pools used for various [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] workloads:</span></span>

-   <span data-ttu-id="4ea0c-134">**解析\短**  是用于短请求的解析池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-134">**Parsing \ Short**  is a parsing pool for short requests.</span></span> <span data-ttu-id="4ea0c-135">可容纳在单个网络消息内的请求被视为简短请求。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-135">Requests that fit within a single network message are considered short.</span></span>

-   <span data-ttu-id="4ea0c-136">**解析\长**  是用于不可纳入单一网络消息中的所有其他请求的解析池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-136">**Parsing \ Long**  is a parsing pool for all other requests that do not fit within a single network message.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="4ea0c-137">来自两种解析池的线程都可以用来执行查询。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-137">A thread from either parsing pool can be used to execute a query.</span></span> <span data-ttu-id="4ea0c-138">诸如快速发现或取消请求等快速执行的查询有时会立即执行，而不是排队进入查询线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-138">Queries that execute quickly, such as a fast Discover or Cancel request, are sometimes executed immediately rather than queued to the Query thread pool.</span></span>

-   <span data-ttu-id="4ea0c-139">`Query`是执行所有不由分析线程池处理的请求的线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-139">`Query` is the thread pool that executes all requests that are not handled by the parsing thread pool.</span></span> <span data-ttu-id="4ea0c-140">此线程池中的线程将执行所有类型的操作，如发现、MDX、DAX、DMX 和 DDL 命令。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-140">Threads in this thread pool will execute all types of operations, such as Discovers, MDX, DAX, DMX, and DDL commands.</span></span>

-   <span data-ttu-id="4ea0c-141">`IOProcess`用于与多维引擎中的存储引擎查询关联的 IO 作业。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-141">`IOProcess` is used for IO jobs associated with storage engine queries in the multidimensional engine.</span></span> <span data-ttu-id="4ea0c-142">这些线程所做的工作应该不依赖于其他线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-142">The work done by these threads is expected to not have dependencies on other threads.</span></span> <span data-ttu-id="4ea0c-143">这些线程通常将扫描单个分区段，并对段数据执行筛选和聚合操作。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-143">These threads will typically be scanning a single segment of a partition and performing filtering and aggregation on the segment data.</span></span> <span data-ttu-id="4ea0c-144">`IOProcess`线程对 NUMA 硬件配置特别敏感。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-144">`IOProcess` threads are particularly sensitive to NUMA hardware configurations.</span></span> <span data-ttu-id="4ea0c-145">因此，此线程池具有 `PerNumaNode` 可用于根据需要优化性能的配置属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-145">As such, this thread pool has the `PerNumaNode` configuration property which can be used to tune the performance if needed.</span></span>

-   <span data-ttu-id="4ea0c-146">`Process`适用于持续时间较长的存储引擎作业，包括聚合、索引和提交操作。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-146">`Process` is for longer duration storage engine jobs, including aggregations, indexing, and commit operations.</span></span> <span data-ttu-id="4ea0c-147">ROLAP 存储模式还使用“处理”线程池中的线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-147">ROLAP storage mode also uses threads from the Processing thread pool.</span></span>

> [!NOTE]
>  <span data-ttu-id="4ea0c-148">尽管 Msmdsrv.ini 在部分中具有线程池设置 `VertiPaq` ，但 `VertiPaq` \\ `ThreadPool` \\ `GroupAffinity` `ThreadPool` \\ `CPUs` 却有刻意记录。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-148">Although Msmdsrv.ini has thread pool settings in the `VertiPaq` section, `VertiPaq`\\`ThreadPool`\\`GroupAffinity` and `ThreadPool`\\`CPUs` are purposely undocumented.</span></span> <span data-ttu-id="4ea0c-149">这些属性当前不起作用，保留供日后使用。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-149">These properties are currently inoperative and are reserved for future use.</span></span>

 <span data-ttu-id="4ea0c-150">为了向请求提供服务， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 可能会超出最大线程池限制，并请求执行工作所必需的其他线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-150">To service requests, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] may exceed the maximum thread pool limit, requesting additional threads if they are necessary to perform the work.</span></span> <span data-ttu-id="4ea0c-151">但是，当某一线程执行完自己的任务后，如果当前线程数超过最大限制，则该线程即会终止，而不是返回线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-151">However, when a thread finishes executing its task, if the current count of threads is greater than the maximum limit, the thread is simply ended, rather than returned to the thread pool.</span></span>

> [!NOTE]
>  <span data-ttu-id="4ea0c-152">超出最大线程池计数是只有在出现某些死锁情况时才调用的保护。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-152">Exceeding the maximum thread pool count is a protection invoked only when certain deadlock conditions arise.</span></span> <span data-ttu-id="4ea0c-153">为了避免超出该最大值的失控线程创建，应在达到了该最大限值后逐步创建线程（在短暂延迟后）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-153">To prevent runaway thread creation beyond the maximum, threads are created gradually (after a short delay) after the maximum limit has been reached.</span></span> <span data-ttu-id="4ea0c-154">超出该最大线程池计数可能会导致任务执行速度减慢。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-154">Exceeding maximum thread count can lead to a slowdown in task execution.</span></span> <span data-ttu-id="4ea0c-155">如果性能计数器显示线程计数定期超出该线程池最大大小，则您可以考虑将其作为指示器，指示线程池大小对于要从系统请求的并发度而言太小。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-155">If the performance counters show the thread counts are regularly beyond the thread pool maximum size, you might consider that as an indicator that thread pool sizes are too small for the degree of concurrency being requested from the system.</span></span>

 <span data-ttu-id="4ea0c-156">默认情况下，线程池大小由 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]确定并且基于内核数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-156">By default, thread pool size is determined by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], and is based on the number of cores.</span></span> <span data-ttu-id="4ea0c-157">服务器启动后，您可以通过检查 msmdsrv.log 文件来观察选定的默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-157">You can observe the selected default values by examining the msmdsrv.log file after server startup.</span></span> <span data-ttu-id="4ea0c-158">作为一项性能调节练习，您可以选择增加线程池的大小以及其他属性，以此来提高查询或处理性能。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-158">As a performance tuning exercise, you might choose to increase the size of the thread pool, as well as other properties, to improve query or processing performance.</span></span>

##  <a name="thread-pool-property-reference"></a><a name="bkmk_propref"></a><span data-ttu-id="4ea0c-159">线程池属性参考</span><span class="sxs-lookup"><span data-stu-id="4ea0c-159">Thread Pool Property Reference</span></span>
 <span data-ttu-id="4ea0c-160">本节介绍在每个 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的 msmdsrv.ini 文件中找到的线程池属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-160">This section describes the thread pool properties found in the msmdsrv.ini file of each [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance.</span></span> <span data-ttu-id="4ea0c-161">这些属性中的一部分也出现在 SQL Server Management Studio 中。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-161">A subset of these properties also appears in SQL Server Management Studio.</span></span>

 <span data-ttu-id="4ea0c-162">按字母顺序列出属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-162">Properties are listed in alphabetical order.</span></span>

|<span data-ttu-id="4ea0c-163">名称</span><span class="sxs-lookup"><span data-stu-id="4ea0c-163">Name</span></span>|<span data-ttu-id="4ea0c-164">类型</span><span class="sxs-lookup"><span data-stu-id="4ea0c-164">Type</span></span>|<span data-ttu-id="4ea0c-165">说明</span><span class="sxs-lookup"><span data-stu-id="4ea0c-165">Description</span></span>|<span data-ttu-id="4ea0c-166">默认</span><span class="sxs-lookup"><span data-stu-id="4ea0c-166">Default</span></span>|<span data-ttu-id="4ea0c-167">指南</span><span class="sxs-lookup"><span data-stu-id="4ea0c-167">Guidance</span></span>|
|----------|----------|-----------------|-------------|--------------|
|`IOProcess` \ `Concurrency`|<span data-ttu-id="4ea0c-168">Double</span><span class="sxs-lookup"><span data-stu-id="4ea0c-168">double</span></span>|<span data-ttu-id="4ea0c-169">一个双精度浮点值，确定用于设置可同时排队的线程数目标的算法。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-169">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="4ea0c-170">2.0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-170">2.0</span></span>|<span data-ttu-id="4ea0c-171">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-171">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-172">并发用于初始化线程池，这些线程池使用 Windows 中的 IO 完成端口来实施。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-172">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="4ea0c-173">有关详细信息，请参阅 [I/O 完成端口](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-173">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span><br /><br /> <span data-ttu-id="4ea0c-174">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-174">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `GroupAffinity`|<span data-ttu-id="4ea0c-175">string</span><span class="sxs-lookup"><span data-stu-id="4ea0c-175">string</span></span>|<span data-ttu-id="4ea0c-176">一个十六进制值的数组，这些值与系统上的处理器组相对应，用于设置 IOProcess 线程池中的线程与每个处理器组中的逻辑处理器的关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-176">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of threads in the IOProcess thread pool to logical processors in each processor group.</span></span>|<span data-ttu-id="4ea0c-177">无</span><span class="sxs-lookup"><span data-stu-id="4ea0c-177">none</span></span>|<span data-ttu-id="4ea0c-178">可以使用此属性创建自定义关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-178">You can use this property to create custom affinities.</span></span> <span data-ttu-id="4ea0c-179">该属性默认为空。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-179">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="4ea0c-180">有关详细信息，请参阅 [设置 GroupAffinity 以便将线程关联到处理器组中的处理器](#bkmk_groupaffinity) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-180">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span><br /><br /> <span data-ttu-id="4ea0c-181">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-181">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `MaxThreads`|<span data-ttu-id="4ea0c-182">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-182">int</span></span>|<span data-ttu-id="4ea0c-183">有符号 32 位整数，用于指定线程池中要包含的最大线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-183">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="4ea0c-184">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-184">0</span></span>|<span data-ttu-id="4ea0c-185">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-185">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-186">默认情况下，服务器将此值设置为 64 或设置为逻辑处理器数的 10 倍，以较大者为准。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-186">By default, the server either sets this value to 64, or to 10 times the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="4ea0c-187">例如，在采用超线程的 4 核系统上，线程池最大值是 80 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-187">For example, on a 4-core system with hyperthreading, the thread pool maximum is 80 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-188">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-188">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="4ea0c-189">例如，当在具有 32 个逻辑处理器的服务器上设置为 -10 时，最大值是 320 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-189">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-190">最大值取决于按以前定义的任何自定义关联掩码可用的处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-190">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="4ea0c-191">例如，如果您已将线程池关联设置为使用 32 个处理器中的 8 个，并且现在将 MaxThreads 设置为 -10，则线程池的上限将为 10 乘以 8（即 80 个线程）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-191">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-192">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-192">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="4ea0c-193">可在 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)中找到有关优化线程池设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-193">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span><br /><br /> <span data-ttu-id="4ea0c-194">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-194">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `MinThreads`|<span data-ttu-id="4ea0c-195">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-195">int</span></span>|<span data-ttu-id="4ea0c-196">一种 32 位有符号整数，用于指定为线程池预分配的最小线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-196">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="4ea0c-197">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-197">0</span></span>|<span data-ttu-id="4ea0c-198">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-198">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-199">默认情况下，最小值为 1。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-199">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="4ea0c-200">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-200">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="4ea0c-201">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-201">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="4ea0c-202">可在 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)中找到有关优化线程池设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-202">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span><br /><br /> <span data-ttu-id="4ea0c-203">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-203">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `PerNumaNode`|<span data-ttu-id="4ea0c-204">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-204">int</span></span>|<span data-ttu-id="4ea0c-205">有符号 32 位整数，用于确定为 msmdsrv 进程创建的线程池数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-205">A signed 32-bit integer that determines the number of thread pools created for the msmdsrv process.</span></span>|<span data-ttu-id="4ea0c-206">-1</span><span class="sxs-lookup"><span data-stu-id="4ea0c-206">-1</span></span>|<span data-ttu-id="4ea0c-207">有效值为 -1、0、1、2</span><span class="sxs-lookup"><span data-stu-id="4ea0c-207">Valid values are -1, 0, 1, 2</span></span><br /><br /> <span data-ttu-id="4ea0c-208">-1 = 服务器根据 NUMA 节点数选择不同的 IO 线程池策略。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-208">-1 = The server selects a different IO Thread Pool strategy based on the number of NUMA nodes.</span></span> <span data-ttu-id="4ea0c-209">在 NUMA 节点数少于 4 个的系统上，服务器行为与值为 0 时的行为相同（为系统创建一个 IOProcess 线程池）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-209">On systems having fewer than 4 NUMA nodes, the server behavior is the same as 0 (one IOProcess thread pool is created for the system).</span></span> <span data-ttu-id="4ea0c-210">在具有 4 个或更多个节点的系统中，行为与 1 相同（为每个节点创建 IOProcess 线程池）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-210">On systems having 4 or more nodes, the behavior is the same as 1 (IOProcess thread pools are created for each node).</span></span><br /><br /> <span data-ttu-id="4ea0c-211">0 = 禁用每节点 NUMA 多个线程池，以便 msmdsrv.exe 进程仅使用一个 IOProcess 线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-211">0 = Disables per NUMA node thread pools so that there is only one IOProcess thread pool used by the msmdsrv.exe process.</span></span><br /><br /> <span data-ttu-id="4ea0c-212">1 = 为每个 NUMA 节点启用一个 IOProcess 线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-212">1 = Enables one IOProcess thread pool per NUMA node.</span></span><br /><br /> <span data-ttu-id="4ea0c-213">2 = 每个逻辑处理器一个 IOProcess 线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-213">2 = One IOProcess thread pool per logical processor.</span></span> <span data-ttu-id="4ea0c-214">每个线程池中的线程数与逻辑处理器的 NUMA 节点关联，且理想处理器设置为逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-214">Threads in each thread pool are affinitized to the NUMA node of the logical processor, with the ideal processor set to the logical processor.</span></span><br /><br /> <span data-ttu-id="4ea0c-215">有关详细信息，请参阅 [设置 PerNumaNode 以使 IO 线程与 NUMA 节点中的处理器关联](#bkmk_pernumanode) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-215">See [Set PerNumaNode to affinitize IO threads to processors in a NUMA node](#bkmk_pernumanode) for details.</span></span><br /><br /> <span data-ttu-id="4ea0c-216">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-216">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `PriorityRatio`|<span data-ttu-id="4ea0c-217">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-217">int</span></span>|<span data-ttu-id="4ea0c-218">有符号 32 位整数，可用于确保即使高优先级队列不为空，有时也能执行低优先级线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-218">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="4ea0c-219">2</span><span class="sxs-lookup"><span data-stu-id="4ea0c-219">2</span></span>|<span data-ttu-id="4ea0c-220">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-220">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-221">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-221">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `StackSizeKB`|<span data-ttu-id="4ea0c-222">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-222">int</span></span>|<span data-ttu-id="4ea0c-223">一种 32 位有符号整数，可用于调整线程执行期间的内存分配。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-223">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="4ea0c-224">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-224">0</span></span>|<span data-ttu-id="4ea0c-225">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-225">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-226">仅适用于多维模型。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-226">Applies to multidimensional models only.</span></span>|
|<span data-ttu-id="4ea0c-227">**正在**  \ `Long` \ `Concurrency`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-227">**Parsing**  \ `Long` \ `Concurrency`</span></span>|<span data-ttu-id="4ea0c-228">Double</span><span class="sxs-lookup"><span data-stu-id="4ea0c-228">double</span></span>|<span data-ttu-id="4ea0c-229">一个双精度浮点值，确定用于设置可同时排队的线程数目标的算法。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-229">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="4ea0c-230">2.0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-230">2.0</span></span>|<span data-ttu-id="4ea0c-231">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-231">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-232">并发用于初始化线程池，这些线程池使用 Windows 中的 IO 完成端口来实施。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-232">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="4ea0c-233">有关详细信息，请参阅 [I/O 完成端口](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-233">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|<span data-ttu-id="4ea0c-234">**正在**  \ `Long` \ `GroupAffinity`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-234">**Parsing**  \ `Long` \ `GroupAffinity`</span></span>|<span data-ttu-id="4ea0c-235">string</span><span class="sxs-lookup"><span data-stu-id="4ea0c-235">string</span></span>|<span data-ttu-id="4ea0c-236">一个十六进制值的数组，这些值与系统上的处理器组相对应，用于设置分析线程与每个处理器组中的逻辑处理器的关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-236">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of parsing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="4ea0c-237">无</span><span class="sxs-lookup"><span data-stu-id="4ea0c-237">none</span></span>|<span data-ttu-id="4ea0c-238">可以使用此属性创建自定义关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-238">You can use this property to create custom affinities.</span></span> <span data-ttu-id="4ea0c-239">该属性默认为空。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-239">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="4ea0c-240">有关详细信息，请参阅 [设置 GroupAffinity 以便将线程关联到处理器组中的处理器](#bkmk_groupaffinity) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-240">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|<span data-ttu-id="4ea0c-241">**正在**  \ `Long` \ `NumThreads`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-241">**Parsing**  \ `Long` \ `NumThreads`</span></span>|<span data-ttu-id="4ea0c-242">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-242">int</span></span>|<span data-ttu-id="4ea0c-243">有符号 32 位整数属性，用于定义可为长命令创建的线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-243">A signed 32-bit integer property that defines the number of threads that can be created for long commands.</span></span>|<span data-ttu-id="4ea0c-244">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-244">0</span></span>|<span data-ttu-id="4ea0c-245">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-245">0 indicates that the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-246">默认行为是将 `NumThreads` 设置为绝对值 4，或逻辑处理器数的两倍，取两者中的较大值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-246">The default behavior is to set `NumThreads` to an absolute value of 4, or 2 times the number of logical processors, whichever is higher.</span></span><br /><br /> <span data-ttu-id="4ea0c-247">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-247">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="4ea0c-248">例如，当在具有 32 个逻辑处理器的服务器上设置为 -10 时，最大值是 320 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-248">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-249">最大值取决于按以前定义的任何自定义关联掩码可用的处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-249">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="4ea0c-250">例如，如果已将线程池关联设置为使用 32 个处理器中的 8 个，并且现在将 NumThreads 设置为 -10，则线程池的上限将为 10 乘以 8，即 80 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-250">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set NumThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-251">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-251">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span>|
|<span data-ttu-id="4ea0c-252">**正在**  \ `Long` \ `PriorityRatio`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-252">**Parsing**  \ `Long` \ `PriorityRatio`</span></span>|<span data-ttu-id="4ea0c-253">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-253">int</span></span>|<span data-ttu-id="4ea0c-254">有符号 32 位整数，可用于确保即使高优先级队列不为空，有时也能执行低优先级线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-254">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="4ea0c-255">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-255">0</span></span>|<span data-ttu-id="4ea0c-256">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-256">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="4ea0c-257">**正在**  \ `Long` \ `StackSizeKB`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-257">**Parsing**  \ `Long` \ `StackSizeKB`</span></span>|<span data-ttu-id="4ea0c-258">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-258">int</span></span>|<span data-ttu-id="4ea0c-259">一种 32 位有符号整数，可用于调整线程执行期间的内存分配。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-259">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="4ea0c-260">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-260">0</span></span>|<span data-ttu-id="4ea0c-261">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-261">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="4ea0c-262">**正在**  \ `Short` \ `Concurrency`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-262">**Parsing**  \ `Short` \ `Concurrency`</span></span>|<span data-ttu-id="4ea0c-263">Double</span><span class="sxs-lookup"><span data-stu-id="4ea0c-263">double</span></span>|<span data-ttu-id="4ea0c-264">一个双精度浮点值，确定用于设置可同时排队的线程数目标的算法。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-264">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="4ea0c-265">2.0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-265">2.0</span></span>|<span data-ttu-id="4ea0c-266">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-266">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-267">并发用于初始化线程池，这些线程池使用 Windows 中的 IO 完成端口来实施。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-267">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="4ea0c-268">有关详细信息，请参阅 [I/O 完成端口](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-268">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|<span data-ttu-id="4ea0c-269">**正在**  \ `Short` \ `GroupAffinity`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-269">**Parsing**  \ `Short` \ `GroupAffinity`</span></span>|<span data-ttu-id="4ea0c-270">string</span><span class="sxs-lookup"><span data-stu-id="4ea0c-270">string</span></span>|<span data-ttu-id="4ea0c-271">一个十六进制值的数组，这些值与系统上的处理器组相对应，用于设置分析线程与每个处理器组中的逻辑处理器的关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-271">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of parsing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="4ea0c-272">无</span><span class="sxs-lookup"><span data-stu-id="4ea0c-272">none</span></span>|<span data-ttu-id="4ea0c-273">可以使用此属性创建自定义关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-273">You can use this property to create custom affinities.</span></span> <span data-ttu-id="4ea0c-274">该属性默认为空。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-274">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="4ea0c-275">有关详细信息，请参阅 [设置 GroupAffinity 以便将线程关联到处理器组中的处理器](#bkmk_groupaffinity) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-275">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|<span data-ttu-id="4ea0c-276">**正在**  \ `Short` \ `NumThreads`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-276">**Parsing**  \ `Short` \ `NumThreads`</span></span>|<span data-ttu-id="4ea0c-277">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-277">int</span></span>|<span data-ttu-id="4ea0c-278">有符号 32 位整数属性，用于定义可为短命令创建的线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-278">A signed 32-bit integer property that defines the number of threads that can be created for short commands.</span></span>|<span data-ttu-id="4ea0c-279">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-279">0</span></span>|<span data-ttu-id="4ea0c-280">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-280">0 indicates that the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-281">默认行为是将 `NumThreads` 设置为绝对值 4，或逻辑处理器数的两倍，取两者中的较大值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-281">The default behavior is to set `NumThreads` to an absolute value of 4, or 2 times the number of logical processors, whichever is higher.</span></span><br /><br /> <span data-ttu-id="4ea0c-282">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-282">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="4ea0c-283">例如，当在具有 32 个逻辑处理器的服务器上设置为 -10 时，最大值是 320 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-283">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-284">最大值取决于按以前定义的任何自定义关联掩码可用的处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-284">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="4ea0c-285">例如，如果已将线程池关联设置为使用 32 个处理器中的 8 个，并且现在将 NumThreads 设置为 -10，则线程池的上限将为 10 乘以 8，即 80 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-285">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set NumThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-286">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-286">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span>|
|<span data-ttu-id="4ea0c-287">**正在**  \ `Short` \ `PriorityRatio`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-287">**Parsing**  \ `Short` \ `PriorityRatio`</span></span>|<span data-ttu-id="4ea0c-288">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-288">int</span></span>|<span data-ttu-id="4ea0c-289">有符号 32 位整数，可用于确保即使高优先级队列不为空，有时也能执行低优先级线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-289">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="4ea0c-290">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-290">0</span></span>|<span data-ttu-id="4ea0c-291">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-291">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="4ea0c-292">**正在**  \ `Short` \ `StackSizeKB`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-292">**Parsing**  \ `Short` \ `StackSizeKB`</span></span>|<span data-ttu-id="4ea0c-293">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-293">int</span></span>|<span data-ttu-id="4ea0c-294">一种 32 位有符号整数，可用于调整线程执行期间的内存分配。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-294">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="4ea0c-295">64 \* 逻辑处理器数</span><span class="sxs-lookup"><span data-stu-id="4ea0c-295">64 \* logical processors</span></span>|<span data-ttu-id="4ea0c-296">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-296">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Process` \ `Concurrency`|<span data-ttu-id="4ea0c-297">Double</span><span class="sxs-lookup"><span data-stu-id="4ea0c-297">double</span></span>|<span data-ttu-id="4ea0c-298">一个双精度浮点值，确定用于设置可同时排队的线程数目标的算法。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-298">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="4ea0c-299">2.0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-299">2.0</span></span>|<span data-ttu-id="4ea0c-300">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-300">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-301">并发用于初始化线程池，这些线程池使用 Windows 中的 IO 完成端口来实施。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-301">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="4ea0c-302">有关详细信息，请参阅 [I/O 完成端口](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-302">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|`Process` \ `GroupAffinity`|<span data-ttu-id="4ea0c-303">string</span><span class="sxs-lookup"><span data-stu-id="4ea0c-303">string</span></span>|<span data-ttu-id="4ea0c-304">一个十六进制值的数组，这些值与系统上的处理器组相对应，用于设置处理线程与每个处理器组中的逻辑处理器的关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-304">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of processing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="4ea0c-305">无</span><span class="sxs-lookup"><span data-stu-id="4ea0c-305">none</span></span>|<span data-ttu-id="4ea0c-306">可以使用此属性创建自定义关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-306">You can use this property to create custom affinities.</span></span> <span data-ttu-id="4ea0c-307">该属性默认为空。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-307">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="4ea0c-308">有关详细信息，请参阅 [设置 GroupAffinity 以便将线程关联到处理器组中的处理器](#bkmk_groupaffinity) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-308">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|`Process` \ `MaxThreads`|<span data-ttu-id="4ea0c-309">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-309">int</span></span>|<span data-ttu-id="4ea0c-310">有符号 32 位整数，用于指定线程池中要包含的最大线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-310">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="4ea0c-311">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-311">0</span></span>|<span data-ttu-id="4ea0c-312">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-312">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-313">默认情况下，服务器将此值设置为绝对值 64，或逻辑处理器数，取两者中的较大值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-313">By default, the server either sets this value to an absolute value of 64, or the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="4ea0c-314">例如，在启用超线程的 64 核系统上（一共 128 个逻辑处理器），线程池最大值是 128 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-314">For example, on a 64-core system with hyperthreading enabled (resulting in 128 logical processors), the thread pool maximum is 128 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-315">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-315">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="4ea0c-316">例如，当在具有 32 个逻辑处理器的服务器上设置为 -10 时，最大值是 320 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-316">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-317">最大值取决于按以前定义的任何自定义关联掩码可用的处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-317">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="4ea0c-318">例如，如果您已将线程池关联设置为使用 32 个处理器中的 8 个，并且现在将 MaxThreads 设置为 -10，则线程池的上限将为 10 乘以 8（即 80 个线程）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-318">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-319">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-319">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="4ea0c-320">可在 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)中找到有关优化线程池设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-320">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Process` \ `MinThreads`|<span data-ttu-id="4ea0c-321">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-321">int</span></span>|<span data-ttu-id="4ea0c-322">一种 32 位有符号整数，用于指定为线程池预分配的最小线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-322">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="4ea0c-323">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-323">0</span></span>|<span data-ttu-id="4ea0c-324">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-324">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-325">默认情况下，最小值为 1。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-325">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="4ea0c-326">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-326">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="4ea0c-327">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-327">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="4ea0c-328">可在 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)中找到有关优化线程池设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-328">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Process` \ `PriorityRatio`|<span data-ttu-id="4ea0c-329">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-329">int</span></span>|<span data-ttu-id="4ea0c-330">有符号 32 位整数，可用于确保即使高优先级队列不为空，有时也能执行低优先级线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-330">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="4ea0c-331">2</span><span class="sxs-lookup"><span data-stu-id="4ea0c-331">2</span></span>|<span data-ttu-id="4ea0c-332">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-332">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Process` \ `StackSizeKB`|<span data-ttu-id="4ea0c-333">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-333">int</span></span>|<span data-ttu-id="4ea0c-334">一种 32 位有符号整数，可用于调整线程执行期间的内存分配。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-334">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="4ea0c-335">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-335">0</span></span>|<span data-ttu-id="4ea0c-336">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-336">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Query`  \ `Concurrency`|<span data-ttu-id="4ea0c-337">Double</span><span class="sxs-lookup"><span data-stu-id="4ea0c-337">double</span></span>|<span data-ttu-id="4ea0c-338">一个双精度浮点值，确定用于设置可同时排队的线程数目标的算法。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-338">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="4ea0c-339">2.0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-339">2.0</span></span>|<span data-ttu-id="4ea0c-340">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-340">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="4ea0c-341">并发用于初始化线程池，这些线程池使用 Windows 中的 IO 完成端口来实施。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-341">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="4ea0c-342">有关详细信息，请参阅 [I/O 完成端口](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-342">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|`Query` \ `GroupAffinity`|<span data-ttu-id="4ea0c-343">string</span><span class="sxs-lookup"><span data-stu-id="4ea0c-343">string</span></span>|<span data-ttu-id="4ea0c-344">一个十六进制值的数组，这些值与系统上的处理器组相对应，用于设置处理线程与每个处理器组中的逻辑处理器的关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-344">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of processing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="4ea0c-345">无</span><span class="sxs-lookup"><span data-stu-id="4ea0c-345">none</span></span>|<span data-ttu-id="4ea0c-346">可以使用此属性创建自定义关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-346">You can use this property to create custom affinities.</span></span> <span data-ttu-id="4ea0c-347">该属性默认为空。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-347">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="4ea0c-348">有关详细信息，请参阅 [设置 GroupAffinity 以便将线程关联到处理器组中的处理器](#bkmk_groupaffinity) 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-348">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|`Query`  \ `MaxThreads`|<span data-ttu-id="4ea0c-349">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-349">int</span></span>|<span data-ttu-id="4ea0c-350">有符号 32 位整数，用于指定线程池中要包含的最大线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-350">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="4ea0c-351">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-351">0</span></span>|<span data-ttu-id="4ea0c-352">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-352">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-353">默认情况下，服务器将此值设置为绝对值 10 或逻辑处理器数的 2 倍，以较大者为准。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-353">By default, the server either sets this value to an absolute value of 10, or 2 times the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="4ea0c-354">例如，在 4 核超线程系统上，最大线程数 16。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-354">For example, on a 4-core system with hyperthreading, the maximum thread count is 16.</span></span><br /><br /> <span data-ttu-id="4ea0c-355">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-355">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="4ea0c-356">例如，当在具有 32 个逻辑处理器的服务器上设置为 -10 时，最大值是 320 个线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-356">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-357">最大值取决于按以前定义的任何自定义关联掩码可用的处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-357">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="4ea0c-358">例如，如果您已将线程池关联设置为使用 32 个处理器中的 8 个，并且现在将 MaxThreads 设置为 -10，则线程池的上限将为 10 乘以 8（即 80 个线程）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-358">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="4ea0c-359">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-359">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="4ea0c-360">可在 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)中找到有关优化线程池设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-360">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Query` \ `MinThreads`|<span data-ttu-id="4ea0c-361">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-361">int</span></span>|<span data-ttu-id="4ea0c-362">一种 32 位有符号整数，用于指定为线程池预分配的最小线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-362">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="4ea0c-363">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-363">0</span></span>|<span data-ttu-id="4ea0c-364">0 指示由服务器确定默认值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-364">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="4ea0c-365">默认情况下，最小值为 1。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-365">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="4ea0c-366">如果将此值设置为负值，则服务器将该值乘以逻辑处理器数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-366">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="4ea0c-367">服务启动时，此线程池属性所使用的实际值即会写入 msmdsrv log 文件。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-367">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="4ea0c-368">可在 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)中找到有关优化线程池设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-368">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Query` \ `PriorityRatio`|<span data-ttu-id="4ea0c-369">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-369">int</span></span>|<span data-ttu-id="4ea0c-370">有符号 32 位整数，可用于确保即使高优先级队列不为空，有时也能执行低优先级线程。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-370">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="4ea0c-371">2</span><span class="sxs-lookup"><span data-stu-id="4ea0c-371">2</span></span>|<span data-ttu-id="4ea0c-372">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-372">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Query`  \ `StackSizeKB`|<span data-ttu-id="4ea0c-373">int</span><span class="sxs-lookup"><span data-stu-id="4ea0c-373">int</span></span>|<span data-ttu-id="4ea0c-374">一种 32 位有符号整数，可用于调整线程执行期间的内存分配。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-374">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="4ea0c-375">0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-375">0</span></span>|<span data-ttu-id="4ea0c-376">这是一项高级属性，除非有 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技术支持的指导，否则不应更改此属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-376">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|

##  <a name="set-groupaffinity-to-affinitize-threads-to-processors-in-a-processor-group"></a><a name="bkmk_groupaffinity"></a> <span data-ttu-id="4ea0c-377">设置 GroupAffinity 以便将线程关联到处理器组中的处理器</span><span class="sxs-lookup"><span data-stu-id="4ea0c-377">Set GroupAffinity to affinitize threads to processors in a processor group</span></span>
 <span data-ttu-id="4ea0c-378">提供 `GroupAffinity` 仅用于高级优化用途。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-378">`GroupAffinity` is provided for advanced tuning purposes.</span></span> <span data-ttu-id="4ea0c-379">可以使用 `GroupAffinity` 属性在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 线程池和特定处理器之间设置关联；但是，对于大多数安装，[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 在它可以使用所有可用逻辑处理器时的性能最佳。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-379">You can use the `GroupAffinity` property to set affinity between [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] thread pools and specific processors; however, for most installations, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] performs best when it can use all available logical processors.</span></span> <span data-ttu-id="4ea0c-380">相应地，默认情况下不指定组关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-380">Accordingly, group affinity is unspecified by default.</span></span>

 <span data-ttu-id="4ea0c-381">如果性能测试表明需要进行 CPU 优化，则可以考虑高级方法，例如，使用 Windows Server Resource Manager 在逻辑处理器和服务器进程之间设置关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-381">Should performance testing indicate a need for CPU optimization, you might consider a higher level approach, such as using Windows Server Resource Manager to set affinity between logical processors and a server process.</span></span> <span data-ttu-id="4ea0c-382">与定义个别线程池的自定义关联相比，这种方法可以简化实施和管理。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-382">Such an approach can be simpler to implement and manage than defining custom affinities for individual thread pools.</span></span>

 <span data-ttu-id="4ea0c-383">如果该方法还不够，则可以通过定义线程池的自定义关联来实现更高的精度。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-383">If that approach is insufficient, you can achieve greater precision by defining custom affinities for thread pools.</span></span> <span data-ttu-id="4ea0c-384">自定义关联设置比较可能建议在大型多核系统（NUMA 或非 NUMA）上使用，由于线程池分布于范围过宽的一系列处理器上，可能导致这些系统出现性能下降。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-384">Customizing affinity settings is more likely to be recommended on large multi-core systems (either NUMA or non-NUMA) experiencing performance degradation due to thread pools spread out over too-wide a range of processors.</span></span> <span data-ttu-id="4ea0c-385">虽然可以在少于 64 个逻辑处理器的系统上设置 `GroupAffinity`，但所带来的益处几乎可以忽略不计，甚至可能会导致性能下降。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-385">Although you can set `GroupAffinity` on systems having fewer than 64 logical processors, the benefit is negligible and might even degrade performance.</span></span>

> [!NOTE]
>  <span data-ttu-id="4ea0c-386">`GroupAffinity` 受版本的约束，版本将会限制 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 使用的内核数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-386">`GroupAffinity` is constrained by editions that limit the number of cores used by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="4ea0c-387">在启动时，[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 使用版本信息和 `GroupAffinity` 属性为 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 管理的 5 个线程池中的每个线程池计算关联掩码。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-387">At startup, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses edition information and the `GroupAffinity` properties to compute affinity masks for each of the 5 thread pools managed by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="4ea0c-388">Standard 版本可使用最多 16 个内核。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-388">Standard edition can use a maximum of 16 cores.</span></span> <span data-ttu-id="4ea0c-389">如果在内核数超过 16 的大型多核系统上安装 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 标准版本， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将仅使用其中 16 个内核。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-389">If you install [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] standard edition on a large multi-core system that has more than 16 cores, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will only use 16 of them.</span></span> <span data-ttu-id="4ea0c-390">如果您升级之前版本的 Enterprise 实例，则最多可以使用 20 个内核。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-390">If you upgrade an Enterprise instance of an earlier version, you will be limited to 20 cores.</span></span> <span data-ttu-id="4ea0c-391">有关版本和许可的详细信息，请参阅 [SQL Server 2012 许可概述](https://go.microsoft.com/fwlink/?LinkId=246061)。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-391">For more information about editions and licensing, see [SQL Server 2012 Licensing Overview](https://go.microsoft.com/fwlink/?LinkId=246061).</span></span>

### <a name="syntax"></a><span data-ttu-id="4ea0c-392">语法</span><span class="sxs-lookup"><span data-stu-id="4ea0c-392">Syntax</span></span>
 <span data-ttu-id="4ea0c-393">该值是每个处理器组对应的十六进制值，其中十六进制表示 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 在为给定线程池分配线程时首先尝试使用的逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-393">The value is hexadecimal for each processor group, with the hexadecimal representing the logical processors that [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] attempts to use first when allocating threads for a given thread pool.</span></span>

 <span data-ttu-id="4ea0c-394">**逻辑处理器的位掩码**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-394">**Bitmask for Logical Processors**</span></span>

 <span data-ttu-id="4ea0c-395">一个处理器组中最多可包含 64 个逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-395">You can have up to 64 logical processors within a single processor group.</span></span> <span data-ttu-id="4ea0c-396">对于组中由某个线程池使用（或未使用）的逻辑处理器，其位掩码为 1（或 0）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-396">The bitmask is 1 (or 0) for each logical processor in the group that is used (or not used) by a thread pool.</span></span> <span data-ttu-id="4ea0c-397">计算位掩码后，即可计算十六进制值作为的值 `GroupAffinity` 。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-397">Once you compute the bitmask, you then calculate the hexadecimal value as the value for `GroupAffinity`.</span></span>

 <span data-ttu-id="4ea0c-398">**多个处理器组**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-398">**Multiple processor groups**</span></span>

 <span data-ttu-id="4ea0c-399">处理器组在系统启动时确定。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-399">Processor groups are determined on system startup.</span></span> <span data-ttu-id="4ea0c-400">`GroupAffinity`接受逗号分隔列表中每个处理器组的十六进制值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-400">`GroupAffinity` accepts hexadecimal values for each processor group in a comma delimited list.</span></span> <span data-ttu-id="4ea0c-401">给定多个处理器组（高端系统上最多 10 个）时，您可以通过指定 0x0 绕过个别组。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-401">Given multiple processor groups (up to 10 on higher end systems), you can bypass individual groups by specifying 0x0.</span></span> <span data-ttu-id="4ea0c-402">例如，在具有四个处理器组（0、1、2、3）的系统上，您可以为第一个和第三个值输入 0x0，从而排除组 0 和组 2。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-402">For example, on a system with four processor groups (0, 1, 2, 3), you could exclude groups 0 and 2 by entering 0x0 for the first and third values.</span></span>

 `<GroupAffinity>0x0, 0xFF, 0x0, 0xFF</GroupAffinity>`

### <a name="steps-for-computing-the-processor-affinity-mask"></a><span data-ttu-id="4ea0c-403">计算处理器关联掩码的步骤</span><span class="sxs-lookup"><span data-stu-id="4ea0c-403">Steps for computing the processor affinity mask</span></span>
 <span data-ttu-id="4ea0c-404">可以在 `GroupAffinity` SQL Server Management Studio 中 msmdsrv.ini 或服务器属性页中设置。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-404">You can set `GroupAffinity` in msmdsrv.ini or in server property pages in SQL Server Management Studio.</span></span>

1.  <span data-ttu-id="4ea0c-405">**确定处理器和处理器组的数目**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-405">**Determine the number of processors and processor groups**</span></span>

     <span data-ttu-id="4ea0c-406">可以 [从 winsysinternals 下载 Coreinfo 实用工具](https://technet.microsoft.com/sysinternals/cc835722.aspx)。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-406">You can download [Coreinfo utility from winsysinternals](https://technet.microsoft.com/sysinternals/cc835722.aspx).</span></span>

     <span data-ttu-id="4ea0c-407">运行 **coreinfo** ，从“逻辑处理器到组映射”部分获取此信息。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-407">Run **coreinfo** to get this information from the Logical Processor to Group Map section.</span></span> <span data-ttu-id="4ea0c-408">为每个逻辑处理器生成单独一行。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-408">A separate line is generated for each logical processor.</span></span>

2.  <span data-ttu-id="4ea0c-409">按从右到左顺序排列处理器： `7654 3210`</span><span class="sxs-lookup"><span data-stu-id="4ea0c-409">Sequence the processors, from right to left: `7654 3210`</span></span>

     <span data-ttu-id="4ea0c-410">本例仅显示 8 个处理器（0 到 7），但一个处理器组最多可有 64 个逻辑处理器，而企业级 Windows 服务器中最多可有 10 个处理器组。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-410">The example shows only 8 processors (0 through 7), but a processor group can have a maximum of 64 logical processors, and there can be up to 10 processor groups in an enterprise-class Windows server.</span></span>

3.  <span data-ttu-id="4ea0c-411">**计算想要使用的处理器组的位掩码**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-411">**Compute the bitmask for the processor groups you want to use**</span></span>

     `7654 3210`

     <span data-ttu-id="4ea0c-412">使用 0 或 1 替换数字，具体取决于要排除还是包括逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-412">Replace the number with a 0 or 1, depending on whether you want to exclude or include the logical processor.</span></span> <span data-ttu-id="4ea0c-413">在具有 8 个处理器的系统上，如果要将处理器 7、6、5、4 和 1 用于 Analysis Services，则计算结果可能如下所示：</span><span class="sxs-lookup"><span data-stu-id="4ea0c-413">On a system having eight processors, your calculation might look like this if you wanted to use processors 7, 6, 5, 4, and 1 for Analysis Services:</span></span>

     `1111 0010`

4.  <span data-ttu-id="4ea0c-414">**将二进制数字转换为十六进制值**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-414">**Convert the binary number to a Hex value**</span></span>

     <span data-ttu-id="4ea0c-415">使用计算器或转换工具，将二进制数转换为其对应的十六进制数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-415">Using a calculator or conversion tool, convert the binary number to its hexadecimal equivalent.</span></span> <span data-ttu-id="4ea0c-416">在我们的示例中， `1111 0010` 转换为 `0xF2`。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-416">In our example, `1111 0010` converts to `0xF2`.</span></span>

5.  <span data-ttu-id="4ea0c-417">**在 GroupAffinity 属性中输入该十六进制值**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-417">**Enter the hex value in the GroupAffinity property**</span></span>

     <span data-ttu-id="4ea0c-418">在 msmdsrv.ini 或 Management Studio 的服务器属性页中，将设置 `GroupAffinity` 为在步骤4中计算的值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-418">In msmdsrv.ini or in the server property page in Management Studio, set `GroupAffinity` to the value calculated in step 4.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="4ea0c-419">设置 `GroupAffinity` 是包含多个步骤的手动任务。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-419">Setting `GroupAffinity` is a manual task encompassing multiple steps.</span></span> <span data-ttu-id="4ea0c-420">计算时 `GroupAffinity` ，请仔细检查你的计算。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-420">When computing `GroupAffinity`, check your calculations carefully.</span></span> <span data-ttu-id="4ea0c-421">尽管 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 会在整个掩码无效时返回错误，但有效和无效设置的组合会使 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 忽略该属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-421">Although [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will return an error if the entire mask is invalid, a combination of valid and invalid settings results in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ignoring the property.</span></span> <span data-ttu-id="4ea0c-422">例如，如果位掩码包含额外值，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 忽略该设置，并使用系统上的所有处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-422">For example, if the bitmask includes extra values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ignores the setting, using all processors on the system.</span></span> <span data-ttu-id="4ea0c-423">进行此操作时没有错误或警告可提醒您，但您可检查 msmdsrv.log 文件以了解实际如何设置这些关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-423">There is no error or warning to alert you when this action occurs, but you can check the msmdsrv.log file to learn how the affinities are actually set.</span></span>

##  <a name="set-pernumanode-to-affinitize-io-threads-to-processors-in-a-numa-node"></a><a name="bkmk_pernumanode"></a><span data-ttu-id="4ea0c-424">设置 PerNumaNode 以关联 IO 线程与 NUMA 节点中的处理器</span><span class="sxs-lookup"><span data-stu-id="4ea0c-424">Set PerNumaNode to affinitize IO threads to processors in a NUMA node</span></span>
 <span data-ttu-id="4ea0c-425">对于多维 Analysis Services 实例，您可以对 `PerNumaNode` `IOProcess` 线程池设置，以便进一步优化线程计划和执行。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-425">For multidimensional Analysis Services instances, you can set `PerNumaNode` on the `IOProcess` thread pool to further optimize thread scheduling and execution.</span></span> <span data-ttu-id="4ea0c-426">`GroupAffinity`标识要对给定线程池使用哪组逻辑处理器，而是 `PerNumaNode` 指定是否创建多个线程池，进一步关联允许的逻辑处理器的某个子集。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-426">Whereas `GroupAffinity` identifies which set of logical processors to use for a given thread pool, `PerNumaNode` goes one step further by specifying whether to create multiple thread pools, further affinitized to some subset of the allowed logical processors.</span></span>

> [!NOTE]
>  <span data-ttu-id="4ea0c-427">在 Windows Server 2012 上，使用任务管理器查看计算机上的 NUMA 节点数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-427">On Windows Server 2012, use Task Manager to view the number of NUMA nodes on the computer.</span></span> <span data-ttu-id="4ea0c-428">在任务管理器中的“性能”选项卡上，选择 **“CPU”** ，然后右键单击图形区以查看 NUMA 节点。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-428">In Task Manager, on the Performance tab, select **CPU** and then right-click the graph area to view NUMA nodes.</span></span> <span data-ttu-id="4ea0c-429">或者，从 Windows Sysinternals [下载](https://technet.microsoft.com/sysinternals/cc835722.aspx) Coreinfo 实用工具，然后运行 `coreinfo -n` 以返回 NUMA 节点和每个节点中的逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-429">Alternatively, [download](https://technet.microsoft.com/sysinternals/cc835722.aspx) the Coreinfo utility from Windows Sysinternals and run `coreinfo -n` to return NUMA nodes and logical processors in each node.</span></span>

 <span data-ttu-id="4ea0c-430">的有效值为 `PerNumaNode` -1、0、1、2，如本主题中的 "[线程池属性参考](#bkmk_propref)" 一节中所述。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-430">Valid values for `PerNumaNode` are -1, 0, 1, 2, as described in the [Thread Pool Property Reference](#bkmk_propref) section in this topic.</span></span>

### <a name="default-recommended"></a><span data-ttu-id="4ea0c-431">默认值（建议）</span><span class="sxs-lookup"><span data-stu-id="4ea0c-431">Default (Recommended)</span></span>
 <span data-ttu-id="4ea0c-432">在具有 NUMA 节点的系统上，建议使用默认设置 PerNumaNode=-1，允许 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 基于节点计数调整线程池数及其线程关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-432">On systems having NUMA nodes, we recommend using the default setting of PerNumaNode=-1, allowing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to adjust the number of thread pools and their thread affinity based on node count.</span></span> <span data-ttu-id="4ea0c-433">如果系统的节点数少于4个，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实现 = 0 所描述的行为 `PerNumaNode` ，而 `PerNumaNode` = 1 则在具有4个或更多节点的系统上使用。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-433">If the system has fewer than 4 nodes, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] implements the behaviors described by `PerNumaNode`=0, whereas `PerNumaNode`=1 is used on systems having 4 or more nodes.</span></span>

### <a name="choosing-a-value"></a><span data-ttu-id="4ea0c-434">选择值</span><span class="sxs-lookup"><span data-stu-id="4ea0c-434">Choosing a value</span></span>
 <span data-ttu-id="4ea0c-435">还可以覆盖默认值以使用其他有效值。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-435">You can also override the default to use another valid value.</span></span>

 <span data-ttu-id="4ea0c-436">**设置 PerNumaNode=0**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-436">**Setting PerNumaNode=0**</span></span>

 <span data-ttu-id="4ea0c-437">忽略 NUMA 节点。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-437">NUMA nodes are ignored.</span></span> <span data-ttu-id="4ea0c-438">将只有一个 IOProcess 线程池，并将使该线程池中的所有线程与所有逻辑处理器关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-438">There will be just one IOProcess thread pool, and all threads in that thread pool will be affinitized to all logical processors.</span></span> <span data-ttu-id="4ea0c-439">默认情况下（其中 PerNumaNode=-1），如果计算机具有的 NUMA 节点少于 4 个，则这是合适的设置。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-439">By default (where PerNumaNode=-1), this is the operative setting if the computer has fewer than 4 NUMA nodes.</span></span>

 <span data-ttu-id="4ea0c-440">![Numa、处理器和线程池的通信](../media/ssas-threadpool-numaex0.PNG "Numa、处理器和线程池的通信")</span><span class="sxs-lookup"><span data-stu-id="4ea0c-440">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex0.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="4ea0c-441">**设置 PerNumaNode=1**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-441">**Setting PerNumaNode=1**</span></span>

 <span data-ttu-id="4ea0c-442">为每个 NUMA 节点创建 IOProcess 线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-442">IOProcess thread pools are created for each NUMA node.</span></span> <span data-ttu-id="4ea0c-443">具有不同的线程池可改进对本地资源（如 NUMA 节点上的本地缓存）的协调访问。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-443">Having separate thread pools improves coordinated access to local resources, such as local cache on a NUMA node.</span></span>

 <span data-ttu-id="4ea0c-444">![Numa、处理器和线程池的通信](../media/ssas-threadpool-numaex1.PNG "Numa、处理器和线程池的通信")</span><span class="sxs-lookup"><span data-stu-id="4ea0c-444">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex1.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="4ea0c-445">**设置 PerNumaNode=2**</span><span class="sxs-lookup"><span data-stu-id="4ea0c-445">**Setting PerNumaNode=2**</span></span>

 <span data-ttu-id="4ea0c-446">此设置适用于运行高强度 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 工作负荷的非常高端的系统。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-446">This setting is for very high-end systems running intensive [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] workloads.</span></span> <span data-ttu-id="4ea0c-447">此属性会在其最高粒度级别上设置 IOProcess 线程池关联，在逻辑处理器层面创建和关联单独的线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-447">This property sets IOProcess thread pool affinity at its most granular level, creating and affinitizing separate thread pools at the logical processor level.</span></span>

 <span data-ttu-id="4ea0c-448">在以下示例中，在具有4个 NUMA 节点和32逻辑处理器的系统上，将设置 `PerNumaNode` 为2将导致 32 IOProcess 线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-448">In the following example, on a system having 4 NUMA nodes and 32 logical processors, setting `PerNumaNode` to 2 would result in 32 IOProcess thread pools.</span></span> <span data-ttu-id="4ea0c-449">前 8 个线程池中的线程将关联到 NUMA 节点 0 中的所有逻辑处理器，但理想的处理器设置为 0、1、2 直到 7。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-449">The threads in the first 8 thread pools would be affinitized to all the logical processors in the NUMA node 0, but with the ideal processor set to 0, 1, 2, up to 7.</span></span> <span data-ttu-id="4ea0c-450">接下来的 8 个线程池将关联到 NUMA 节点 1 中的所有逻辑处理器，而理想的处理器设置为 8、9、10 直到 15，以此类推。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-450">The next 8 thread pools would be affinitized to all the logical processors in NUMA node 1, with the ideal processor set to 8, 9, 10, up to 15, and so on.</span></span>

 <span data-ttu-id="4ea0c-451">![Numa、处理器和线程池的通信](../media/ssas-threadpool-numaex2.PNG "Numa、处理器和线程池的通信")</span><span class="sxs-lookup"><span data-stu-id="4ea0c-451">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex2.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="4ea0c-452">在此关联水平上，计划程序始终会尝试先使用首选 NUMA 节点内的理想逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-452">At this level of affinity, the scheduler always attempts to use the ideal logical processor first, within the preferred NUMA node.</span></span> <span data-ttu-id="4ea0c-453">如果逻辑处理器不可用，计划程序将选择同一节点内的另一个处理器，或在其他线程不可用时选择同一处理器组中的处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-453">If the logical processor is unavailable, the scheduler chooses another processor within the same node, or within the same processor group if no other threads are available.</span></span> <span data-ttu-id="4ea0c-454">有关详细信息和示例，请参阅 [Analysis Services 2012 配置设置（Wordpress 博客）](https://go.microsoft.com/fwlink/?LinkId=330387)。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-454">For more information and examples, see [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387).</span></span>

###  <a name="work-distribution-among-ioprocess-threads"></a><a name="bkmk_workdistrib"></a> <span data-ttu-id="4ea0c-455">IOProcess 线程间的工作分配</span><span class="sxs-lookup"><span data-stu-id="4ea0c-455">Work distribution among IOProcess threads</span></span>
 <span data-ttu-id="4ea0c-456">当您考虑是否设置属性时 `PerNumaNode` ，知道 `IOProcess` 线程的使用方式可帮助您做出更明智的决策。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-456">As you consider whether to set the `PerNumaNode` property, knowing how `IOProcess` threads are used can help you make a more informed decision.</span></span>

 <span data-ttu-id="4ea0c-457">请记住， `IOProcess` 用于与多维引擎中的存储引擎查询关联的 IO 作业。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-457">Recall that `IOProcess` is used for IO jobs associated with storage engine queries in the multidimensional engine.</span></span>

 <span data-ttu-id="4ea0c-458">扫描某段后，引擎将识别该段所属的分区，并尝试将该段作业排入该分区所用线程池的队列。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-458">When a segment is scanned, the engine identifies the partition to which the segment belongs, and attempts to queue the segment job to the thread pool used by the partition.</span></span> <span data-ttu-id="4ea0c-459">一般而言，属于分区的所有段都将其任务排入同一线程池的队列。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-459">In general, all segments belonging to a partition will queue their tasks to the same thread pool.</span></span> <span data-ttu-id="4ea0c-460">在 NUMA 系统中，此行为尤其具有优势，因为对分区的所有扫描都将使用文件系统缓存中在本地分配给该 NUMA 节点的内存。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-460">On NUMA systems, this behavior is particularly advantageous because all scans for a partition will use memory in the file system cache that is allocated locally to that NUMA node.</span></span>

 <span data-ttu-id="4ea0c-461">以下方案提出一些建议调整，在某些情况下可提高对 NUMA 系统的查询性能：</span><span class="sxs-lookup"><span data-stu-id="4ea0c-461">The following scenarios suggest adjustments that can sometimes improve query performance on NUMA systems:</span></span>

-   <span data-ttu-id="4ea0c-462">对于分区不足的度量值组（例如，具有一个分区），请增加分区数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-462">For measure groups that are under-partitioned (for example, having a single partition), increase the number of partitions.</span></span> <span data-ttu-id="4ea0c-463">只使用一个分区会使该引擎始终将任务排队进入一个线程池（线程池 0）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-463">Using just one partition will cause the engine to always queue tasks to one thread pool (thread pool 0).</span></span> <span data-ttu-id="4ea0c-464">添加更多分区使该引擎可以使用其他线程池。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-464">Adding more partitions allows the engine to use additional thread pools.</span></span>

     <span data-ttu-id="4ea0c-465">或者，如果无法创建其他分区，请尝试设置 `PerNumaNode` = 0，以增加可供线程池0使用的线程数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-465">Alternatively, if you cannot create additional partitions, try setting `PerNumaNode`=0 as a way to increase the number of threads available to thread pool 0.</span></span>

-   <span data-ttu-id="4ea0c-466">对于段扫描均匀分布在多个分区中的数据库，将设置 `PerNumaNode` 为1或2可以提高查询性能，因为这会增加 `IOProcess` 系统使用的线程池的总数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-466">For databases in which segment scans are evenly distributed across multiple partitions, setting `PerNumaNode` to 1 or 2 can improve query performance because it increases the overall number of `IOProcess` thread pools used by the system.</span></span>

-   <span data-ttu-id="4ea0c-467">对于具有多个分区但只有一个分区被频繁扫描的解决方案，请尝试设置 `PerNumaNode` = 0 以查看它是否可以提高性能。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-467">For solutions that have multiple partitions, but only one is heavily scanned, try setting `PerNumaNode`=0 to see if it improves performance.</span></span>

 <span data-ttu-id="4ea0c-468">尽管分区和维度扫描都使用 `IOProcess` 线程池，但维度扫描仅使用线程池0。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-468">Although both partition and dimension scans use the `IOProcess` thread pool, dimension scans only use thread pool 0.</span></span> <span data-ttu-id="4ea0c-469">这样可导致该线程池上的负载略有不均，但这种不平衡只是暂时性的，因为维度扫描往往速度很快且不常见。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-469">This can result in a slightly uneven load on that thread pool, but the imbalance should be temporary, as dimension scans tend to be very fast and infrequent.</span></span>

> [!NOTE]
>  <span data-ttu-id="4ea0c-470">在更改服务器属性时，请记住，配置选项适用于在当前实例上运行的所有数据库。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-470">When changing a server property, remember that the configuration option applies to all databases running on the current instance.</span></span> <span data-ttu-id="4ea0c-471">选择可使最重要数据库或最大数量的数据库受益的设置。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-471">Choose settings that benefit the most important databases, or the greatest number of databases.</span></span> <span data-ttu-id="4ea0c-472">无法在数据库级别设置处理器关联，也无法在个别分区与特定处理器之间设置关联。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-472">You cannot set processor affinity at the database level, nor can you set affinity between individual partitions and specific processors.</span></span>

 <span data-ttu-id="4ea0c-473">有关作业体系结构的详细信息，请参阅 [SQL Server 2008 Analysis Services 性能指南](https://www.microsoft.com/download/details.aspx?id=17303)中的 2.2 节。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-473">For more information about job architecture, see section 2.2 in [SQL Server 2008 Analysis Services Performance Guide](https://www.microsoft.com/download/details.aspx?id=17303).</span></span>

##  <a name="dependent-or-related-properties"></a><a name="bkmk_related"></a><span data-ttu-id="4ea0c-474">依赖或相关属性</span><span class="sxs-lookup"><span data-stu-id="4ea0c-474">Dependent or Related Properties</span></span>
 <span data-ttu-id="4ea0c-475">如[Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)第2.4 节中所述，如果增加处理线程池，则应确保 `CoordinatorExecutionMode` 设置以及设置的值使 `CoordinatorQueryMaxThreads` 您能够充分利用增加的线程池大小。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-475">As explained in section 2.4 of the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx), if you increase the processing thread pool, you should make sure that the `CoordinatorExecutionMode` settings, as well as the `CoordinatorQueryMaxThreads` settings, have values that enable you to make full use of the increased thread pool size.</span></span>

 <span data-ttu-id="4ea0c-476">Analysis Services 使用一种协调器线程来收集必要的数据，以便完成处理或查询请求。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-476">Analysis Services uses a coordinator thread for gathering the data needed to complete a processing or query request.</span></span> <span data-ttu-id="4ea0c-477">对于必须触及的每个分区，协调器首先将一个作业加入队列。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-477">The coordinator first queues up one job for each partition that must be touched.</span></span> <span data-ttu-id="4ea0c-478">随后，每个作业继续将更多作业加入队列，具体取决于分区中必须扫描的段数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-478">Each of those jobs then continues to queue up more jobs, depending on the total number of segments that must be scanned in the partition.</span></span>

 <span data-ttu-id="4ea0c-479">`CoordinatorExecutionMode` 的默认值为 -4，表示每个内核并行执行的作业限制为 4 个，这限制了存储引擎中的子多维数据集请求可并行执行的协调器作业总数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-479">The default value for `CoordinatorExecutionMode` is -4, meaning a limit of 4 jobs in parallel per core, which constrains the total number of coordinator jobs that can be executed in parallel by a subcube request in the storage engine.</span></span>

 <span data-ttu-id="4ea0c-480">`CoordinatorQueryMaxThreads` 的默认值为 16，限制可为每个分区并行执行的段作业数。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-480">The default value for `CoordinatorQueryMaxThreads` is 16, which limits the number of segment jobs that can be executed in parallel for each partition.</span></span>

##  <a name="determine-current-thread-pool-settings"></a><a name="bkmk_currentsettings"></a><span data-ttu-id="4ea0c-481">确定当前线程池设置</span><span class="sxs-lookup"><span data-stu-id="4ea0c-481">Determine current thread pool settings</span></span>
 <span data-ttu-id="4ea0c-482">服务每次启动时， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 都会将当前线程池设置输出到 msmdsrv.log 文件中，包括最小和最大线程数、处理器关联掩码和并发度。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-482">At each service startup, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] outputs the current thread pool settings into the msmdsrv.log file, including minimum and maximum threads, processor affinity mask, and concurrency.</span></span>

 <span data-ttu-id="4ea0c-483">以下示例摘自该日志文件，显示启用超线程的 4 核系统上的查询线程池默认设置（MinThread=0、MaxThread=0、Concurrency=2）。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-483">The following example is an excerpt from the log file, showing the default settings for the Query thread pool (MinThread=0, MaxThread=0, Concurrency=2), on a 4-core system with hyper-threading enabled.</span></span> <span data-ttu-id="4ea0c-484">关联掩码为 0xFF，表示有 8 个逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-484">The affinity mask is 0xFF, indicating 8 logical processors.</span></span> <span data-ttu-id="4ea0c-485">请注意，掩码以前导零为前缀。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-485">Notice that leading zeros are prepended to the mask.</span></span> <span data-ttu-id="4ea0c-486">可以忽略前导零。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-486">You can ignore the leading zeros.</span></span>

 `"10/28/2013 9:20:52 AM) Message: The Query thread pool now has 1 minimum threads, 16 maximum threads, and a concurrency of 16.  Its thread pool affinity mask is 0x00000000000000ff. (Source: \\?\C:\Program Files\Microsoft SQL Server\MSAS11.MSSQLSERVER\OLAP\Log\msmdsrv.log, Type: 1, Category: 289, Event ID: 0x4121000A)"`

 <span data-ttu-id="4ea0c-487">请记住，用于设置 **MinThread** 和 **MaxThread** 的算法包括系统配置，具体说就是处理器数目。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-487">Recall that the algorithm for setting **MinThread** and **MaxThread** incorporates system configuration, particularly the number of processors.</span></span> <span data-ttu-id="4ea0c-488">以下博客文章深入介绍了这些值的计算方式： [Analysis Services 2012 配置设置（Wordpress 博客）](https://go.microsoft.com/fwlink/?LinkId=330387)。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-488">The following blog post offers insights into how the values are calculated: [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387).</span></span> <span data-ttu-id="4ea0c-489">请注意，这些设置和行为会在后续版本中做出调整。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-489">Note that these settings and behaviors are subject to adjustment in subsequent releases.</span></span>

 <span data-ttu-id="4ea0c-490">以下列表显示在处理器的不同组合下其他关联掩码设置的示例：</span><span class="sxs-lookup"><span data-stu-id="4ea0c-490">The following list shows examples of other affinity mask settings, for different combinations of processors:</span></span>

-   <span data-ttu-id="4ea0c-491">8 核系统上处理器 3-2-1-0 的关联生成位掩码 00001111 和十六进制值 0xF</span><span class="sxs-lookup"><span data-stu-id="4ea0c-491">Affinity for processors 3-2-1-0 on an 8 core system results in this bitmask: 00001111, and a hexadecimal value: 0xF</span></span>

-   <span data-ttu-id="4ea0c-492">8 核系统上处理器 7-6-5-4 的关联生成位掩码 11110000 和十六进制值 0xF0</span><span class="sxs-lookup"><span data-stu-id="4ea0c-492">Affinity for processors 7-6-5-4 on an 8 core system results in this bitmask: 11110000, and a hexadecimal value: 0xF0</span></span>

-   <span data-ttu-id="4ea0c-493">8 核系统上处理器 5-4-3-2 的关联生成位掩码 00111100 和十六进制值 0x3C</span><span class="sxs-lookup"><span data-stu-id="4ea0c-493">Affinity for processors 5-4-3-2 on an 8 core system results in this bitmask: 00111100, and a hexadecimal value: 0x3C</span></span>

-   <span data-ttu-id="4ea0c-494">8 核系统上处理器 7-6-1-0 的关联生成位掩码 11000011 和十六进制值 0xC3</span><span class="sxs-lookup"><span data-stu-id="4ea0c-494">Affinity for processors 7-6-1-0 on an 8 core system results in this bitmask: 11000011, and a hexadecimal value: 0xC3</span></span>

 <span data-ttu-id="4ea0c-495">回想一下，在具有多个处理器组的系统上，系统会以逗号分隔列表的形式为每个组生成单独的关联掩码。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-495">Recall that on systems having multiple processor groups, a separate affinity mask is generated for each group, in a comma separated list.</span></span>

##  <a name="about-msmdsrvini"></a><a name="bkmk_msmdrsrvini"></a><span data-ttu-id="4ea0c-496">关于 MSMDSRV.INI</span><span class="sxs-lookup"><span data-stu-id="4ea0c-496">About MSMDSRV.INI</span></span>
 <span data-ttu-id="4ea0c-497">msmdsrv.ini 文件包含 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的配置设置，会影响运行在该实例上的所有数据库。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-497">The msmdsrv.ini file contains configuration settings for an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance, affecting all databases running on that instance.</span></span> <span data-ttu-id="4ea0c-498">您不能使用服务器配置属性仅优化一个数据库的性能，而将所有其他数据库排除在外。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-498">You cannot use server configuration properties to optimize performance of just one database to the exclusion of all others.</span></span> <span data-ttu-id="4ea0c-499">但是，您可以安装多个 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例并将每个实例配置为使用将使具有类似特征或工作负荷的数据库受益的属性。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-499">However, you can install multiple instances of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] and configure each instance to use properties that benefit databases sharing similar characteristics or workloads.</span></span>

 <span data-ttu-id="4ea0c-500">所有服务器配置属性都包括在 msmdsrv.ini 文件中。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-500">All server configuration properties are included in the msmdsrv.ini file.</span></span> <span data-ttu-id="4ea0c-501">很可能要修改的部分属性还出现诸如 SSMS 的管理工具中。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-501">Subsets of the properties more likely to be modified also appear in administration tools, such as SSMS.</span></span>

 <span data-ttu-id="4ea0c-502">表格和多维 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]实例的 msmdsrv.ini 内容是相同的。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-502">The contents of msmdsrv.ini are identical for both Tabular and Multidimensional instances of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="4ea0c-503">但是，有些设置仅适用于一种模式。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-503">However, some settings apply to one mode only.</span></span> <span data-ttu-id="4ea0c-504">基于服务器模式的行为差异记录在属性参考文档中。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-504">Differences in behavior based on server mode are noted in property reference documentation.</span></span>

> [!NOTE]
>  <span data-ttu-id="4ea0c-505">有关如何设置属性的说明，请参阅 [Configure Server Properties in Analysis Services](server-properties-in-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="4ea0c-505">For instructions on how to set properties, see [Configure Server Properties in Analysis Services](server-properties-in-analysis-services.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="4ea0c-506">另请参阅</span><span class="sxs-lookup"><span data-stu-id="4ea0c-506">See Also</span></span>
 <span data-ttu-id="4ea0c-507">[关于进程和线程](/windows/desktop/ProcThread/about-processes-and-threads)[多处理器](/windows/desktop/ProcThread/multiple-processors)[处理器组](/windows/desktop/ProcThread/processor-groups) [Analysis Services SQL Server 2012 Analysis Services 2012 配置设置中的线程池更改](https://blogs.msdn.com/b/psssql/archive/2012/01/31/analysis-services-thread-pool-changes-in-sql-server-2012.aspx) [ (Wordpress 博客) ](https://go.microsoft.com/fwlink/?LinkId=330387) [支持具有超过64个处理器的系统](https://msdn.microsoft.com/library/windows/hardware/gg463349.aspx) [SQL Server 2008 R2 Analysis Services 操作指南](https://go.microsoft.com/fwlink/?LinkID=225539)</span><span class="sxs-lookup"><span data-stu-id="4ea0c-507">[About Processes and Threads](/windows/desktop/ProcThread/about-processes-and-threads) [Multiple Processors](/windows/desktop/ProcThread/multiple-processors) [Processor Groups](/windows/desktop/ProcThread/processor-groups) [Analysis Services Thread Pool Changes in SQL Server 2012](https://blogs.msdn.com/b/psssql/archive/2012/01/31/analysis-services-thread-pool-changes-in-sql-server-2012.aspx) [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387) [Supporting Systems That Have More Than 64 Processors](https://msdn.microsoft.com/library/windows/hardware/gg463349.aspx) [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?LinkID=225539)</span></span>


