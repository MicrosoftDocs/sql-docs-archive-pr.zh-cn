---
title: 多维模型中的分区 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 26e01dc7-fa49-4b1f-99eb-7799d1b4dcd2
author: minewiskan
ms.author: owend
ms.openlocfilehash: 60d14551344e6898d7bb0add41b5931282c8861d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87579847"
---
# <a name="partitions-in-multidimensional-models"></a><span data-ttu-id="32872-102">多维模型中的分区</span><span class="sxs-lookup"><span data-stu-id="32872-102">Partitions in Multidimensional Models</span></span>
  <span data-ttu-id="32872-103">在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]中，“分区” \*\* 提供加载到度量值组中的事实数据的物理存储。</span><span class="sxs-lookup"><span data-stu-id="32872-103">In [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], a *partition* provides the physical storage of fact data loaded into a measure group.</span></span> <span data-ttu-id="32872-104">对于每个度量值组都会自动创建一个分区，但是，常见的情况是创建更多分区以进一步对数据进行分段，从而使处理更高效，查询性能更佳。</span><span class="sxs-lookup"><span data-stu-id="32872-104">A single partition is created for each measure group automatically, but it is common to create additional partitions that further segment the data, resulting in more efficient processing and faster query performance.</span></span>  
  
 <span data-ttu-id="32872-105">处理更高效是因为分区可以在一个或多个服务器上以并行方式独立处理。</span><span class="sxs-lookup"><span data-stu-id="32872-105">Processing is more efficient because partitions can be processed independently and in parallel, on one or more servers.</span></span> <span data-ttu-id="32872-106">查询运行得更快是因为每个分区都可配置为具有存储模式和聚合优化，从而缩短响应时间。</span><span class="sxs-lookup"><span data-stu-id="32872-106">Queries run faster because each partition can be configured to have storage modes and aggregation optimizations that result in shorter response times.</span></span> <span data-ttu-id="32872-107">例如，为包含较新数据的分区选择 MOLAP 存储通常比选择 ROLAP 存储要快。</span><span class="sxs-lookup"><span data-stu-id="32872-107">For example, choosing MOLAP storage for partitions containing newer data is typically faster than ROLAP.</span></span> <span data-ttu-id="32872-108">同样，如果您按日期选择分区，则包含较新数据的分区比包含较旧数据且较少访问的分区可进行更多优化。</span><span class="sxs-lookup"><span data-stu-id="32872-108">Likewise, if you partition by date, partitions containing newer data can have more optimizations than partitions containing older data that is accessed less frequently.</span></span> <span data-ttu-id="32872-109">请注意，不断变化的存储和按分区的聚合设计对以后的合并操作有不利影响。</span><span class="sxs-lookup"><span data-stu-id="32872-109">Note that varying storage and aggregation design by partition will have a negative impact on future merge operations.</span></span> <span data-ttu-id="32872-110">在优化各个分区之前，请务必考虑合并操作对于您的分区管理策略而言是否是必要的。</span><span class="sxs-lookup"><span data-stu-id="32872-110">Be sure to consider whether merging is an essential component of your partition management strategy before optimizing individual partitions.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="32872-111">在 Business Intelligence Edition 和 Enterprise Edition 中，提供多分区支持。</span><span class="sxs-lookup"><span data-stu-id="32872-111">Support for multiple partitions is available in the business intelligence edition and enterprise edition.</span></span> <span data-ttu-id="32872-112">Standard Edition 不支持多分区。</span><span class="sxs-lookup"><span data-stu-id="32872-112">The standard edition does not support multiple partitions.</span></span> <span data-ttu-id="32872-113">有关详细信息，请参阅 [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="32872-113">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="important-considerations-when-designing-a-partitioning-strategy"></a><span data-ttu-id="32872-114">设计分区策略时需要考虑的重要事项</span><span class="sxs-lookup"><span data-stu-id="32872-114">Important considerations when designing a partitioning strategy</span></span>  
 <span data-ttu-id="32872-115">多维数据集数据的完整性依赖于数据在多维数据集的分区上的分布情况，要求各个分区上的数据不重复。</span><span class="sxs-lookup"><span data-stu-id="32872-115">The integrity of a cube's data relies on the data being distributed among the partitions of the cube such that no data is duplicated among the partitions.</span></span> <span data-ttu-id="32872-116">从分区汇总数据时，将汇总在多个分区中存在的任何数据元素，就好像它们是不同的数据元素。</span><span class="sxs-lookup"><span data-stu-id="32872-116">When data is summarized from the partitions, any data elements that are present in more than one partition will be summarized as if they were different data elements.</span></span> <span data-ttu-id="32872-117">这可能导致不正确的汇总和向最终用户提供错误的数据。</span><span class="sxs-lookup"><span data-stu-id="32872-117">This can result in incorrect summaries and erroneous data provided to the end user.</span></span> <span data-ttu-id="32872-118">例如，如果产品 X 的销售交易在两个分区的事实表中是重复的，汇总产品 X 的销售额可能包含对重复交易的双倍计入。</span><span class="sxs-lookup"><span data-stu-id="32872-118">For example, if a sales transaction for Product X is duplicated in the fact tables for two partitions, summaries of Product X sales can include a double accounting of the duplicated transaction.</span></span>  
  
 <span data-ttu-id="32872-119">分区可以合并；您可以在总体存储和数据更新策略中使用此功能。</span><span class="sxs-lookup"><span data-stu-id="32872-119">Partitions can be merged; you can use this feature in your overall storage and data update strategy.</span></span> <span data-ttu-id="32872-120">仅当分区具有相同的存储模式和聚合设计时，才能合并它们。</span><span class="sxs-lookup"><span data-stu-id="32872-120">Partitions can be merged only if they have the same storage mode and aggregation design.</span></span> <span data-ttu-id="32872-121">为了创建已备以后合并的候选分区，在创建分区时可以复制另一个分区的聚合设计。</span><span class="sxs-lookup"><span data-stu-id="32872-121">To create partitions that are candidates for later merging, you can copy the aggregation design of another partition when you create partitions.</span></span> <span data-ttu-id="32872-122">在创建分区以复制另一个分区的聚合设计后，还可以编辑该分区。</span><span class="sxs-lookup"><span data-stu-id="32872-122">You can also edit a partition after it has been created to copy the aggregation design of another partition.</span></span> <span data-ttu-id="32872-123">在进行分区合并时还必须小心，以避免最终分区中的数据重复，这可能导致多维数据集数据不准确。</span><span class="sxs-lookup"><span data-stu-id="32872-123">Merging partitions must also be performed carefully to avoid duplication of data in the resulting partition, which can cause cube data to be inaccurate.</span></span>  
  
## <a name="local-partitions"></a><span data-ttu-id="32872-124">本地分区</span><span class="sxs-lookup"><span data-stu-id="32872-124">Local Partitions</span></span>  
 <span data-ttu-id="32872-125">本地分区是在一个服务器上定义、处理和存储的分区。</span><span class="sxs-lookup"><span data-stu-id="32872-125">Local partitions are partitions that are defined, processed, and stored on one server.</span></span> <span data-ttu-id="32872-126">如果多维数据集中有大型度量值组，则可能要对其分区，以便可以进行跨分区并行处理。</span><span class="sxs-lookup"><span data-stu-id="32872-126">If you have large measure groups in a cube, you might want to partition them out so that processing occurs in parallel across the partitions.</span></span> <span data-ttu-id="32872-127">其优点在于并行处理的执行速度更快。</span><span class="sxs-lookup"><span data-stu-id="32872-127">The advantage is that parallel processing provides faster execution.</span></span> <span data-ttu-id="32872-128">因为单分区处理作业不必等到一个作业结束之后才能启动另一个作业，所以可以并行运行。</span><span class="sxs-lookup"><span data-stu-id="32872-128">Because one partition processing job does not have to finish before another starts, they can run in parallel.</span></span> <span data-ttu-id="32872-129">有关详细信息，请参阅 [创建和管理本地分区 (Analysis Services)](create-and-manage-a-local-partition-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="32872-129">For more information, see [Create and Manage a Local Partition &#40;Analysis Services&#41;](create-and-manage-a-local-partition-analysis-services.md).</span></span>  
  
## <a name="remote-partitions"></a><span data-ttu-id="32872-130">远程分区</span><span class="sxs-lookup"><span data-stu-id="32872-130">Remote Partitions</span></span>  
 <span data-ttu-id="32872-131">远程分区是指在一个服务器上定义，但在其他服务器上处理和存储的分区。</span><span class="sxs-lookup"><span data-stu-id="32872-131">Remote partitions are partitions that are defined on one server, but are processed and stored on another.</span></span> <span data-ttu-id="32872-132">如果要将数据和元数据的存储分布到多个服务器上，则可使用远程分区。</span><span class="sxs-lookup"><span data-stu-id="32872-132">If you want to distribute storage of your data and metadata across multiple servers, use remote partitions.</span></span> <span data-ttu-id="32872-133">通常，从开发转换到生产时，分析中的数据规模会增大好几倍。</span><span class="sxs-lookup"><span data-stu-id="32872-133">Ordinarily, when you transition from development to production, the size of data under analysis grows several times over.</span></span> <span data-ttu-id="32872-134">在数据块区如此大的情况下，一个可能的选择就是将该数据分布到多个计算机上。</span><span class="sxs-lookup"><span data-stu-id="32872-134">With such large chunks of data, one possible alternative is to distribute that data over multiple computers.</span></span> <span data-ttu-id="32872-135">这不仅是因为数据超过了一台计算机的容量，还因为您可以使用多台计算机来并行处理数据。</span><span class="sxs-lookup"><span data-stu-id="32872-135">This is not just because one computer cannot hold all the data, but because you will want more than one computer processing the data in parallel.</span></span> <span data-ttu-id="32872-136">有关详细信息，请参阅 [创建和管理远程分区 (Analysis Services)](create-and-manage-a-remote-partition-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="32872-136">For more information, see [Create and Manage a Remote Partition &#40;Analysis Services&#41;](create-and-manage-a-remote-partition-analysis-services.md).</span></span>  
  
## <a name="aggregations"></a><span data-ttu-id="32872-137">聚合</span><span class="sxs-lookup"><span data-stu-id="32872-137">Aggregations</span></span>  
 <span data-ttu-id="32872-138">聚合是预先计算的多维数据集数据的汇总，可帮助启用 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 以提供快速的查询响应。</span><span class="sxs-lookup"><span data-stu-id="32872-138">Aggregations are precalculated summaries of cube data that help enable [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to provide rapid query responses.</span></span> <span data-ttu-id="32872-139">您可以通过设置存储限制、性能提升，或在聚合生成进程运行一段时间之后随意停止该进程来控制为度量值组创建的聚合数。</span><span class="sxs-lookup"><span data-stu-id="32872-139">You can control the number of aggregations created for a measure group by setting limits on storage, performance gains, or arbitrarily stopping the aggregation build process after it has been running for a while.</span></span> <span data-ttu-id="32872-140">聚合并不一定越多越好。</span><span class="sxs-lookup"><span data-stu-id="32872-140">More aggregations are not necessarily better.</span></span> <span data-ttu-id="32872-141">每增加一个聚合都会带来一定成本，包括硬盘空间和处理时间方面的成本。</span><span class="sxs-lookup"><span data-stu-id="32872-141">Every new aggregation comes at a cost, both in terms of disk space and processing time.</span></span> <span data-ttu-id="32872-142">我们建议以提升 30% 的性能为标准来创建聚合，然后仅当有测试或体验保证时才增加聚合数量。有关详细信息，请参阅[设计聚合（Analysis Services - 多维）](designing-aggregations-analysis-services-multidimensional.md)。</span><span class="sxs-lookup"><span data-stu-id="32872-142">We recommend creating aggregations for a thirty percent performance gain, and then raising the number only if testing or experience warrants it.For more information, see [Designing Aggregations &#40;Analysis Services - Multidimensional&#41;](designing-aggregations-analysis-services-multidimensional.md).</span></span>  
  
## <a name="partition-merging-and-editing"></a><span data-ttu-id="32872-143">分区合并和编辑</span><span class="sxs-lookup"><span data-stu-id="32872-143">Partition Merging and Editing</span></span>  
 <span data-ttu-id="32872-144">如果两个分区使用同样的聚合设计，则可以将两个分区合并为一个。</span><span class="sxs-lookup"><span data-stu-id="32872-144">If two partitions use the same aggregation design, you can merge those two partitions into one.</span></span> <span data-ttu-id="32872-145">例如，如果有一个按月分区的库存维度，则在每个日历月月末，可以将该月分区与现有的年初至今分区合并。</span><span class="sxs-lookup"><span data-stu-id="32872-145">For example, if you have an inventory dimension that is partitioned by month, then at the end of each calendar month, you can merge that month partition with the existing year-to-date partition.</span></span> <span data-ttu-id="32872-146">这样一来，就可对当前月分区进行快速处理和分析，而该年剩下的月只需要在合并时重新处理。</span><span class="sxs-lookup"><span data-stu-id="32872-146">This way, the current month partition can be processed and analyzed quickly, while the rest of the year in months only has to be reprocessed when merged.</span></span> <span data-ttu-id="32872-147">此类重新处理需要较长的处理时间，运行效率也可能较低。</span><span class="sxs-lookup"><span data-stu-id="32872-147">That reprocess requires longer processing time, and can be run less frequently.</span></span> <span data-ttu-id="32872-148">有关管理分区合并过程的详细信息，请参阅 [在 Analysis Services 中合并分区（SSAS - 多维）](merge-partitions-in-analysis-services-ssas-multidimensional.md)。</span><span class="sxs-lookup"><span data-stu-id="32872-148">For more information about managing the partition merging process, see [Merge Partitions in Analysis Services &#40;SSAS - Multidimensional&#41;](merge-partitions-in-analysis-services-ssas-multidimensional.md).</span></span> <span data-ttu-id="32872-149">若要使用多维数据集设计器中的 "**分区**" 选项卡编辑多维数据集分区，请参阅[编辑或删除 Analysis Services 多维&#41;&#40;分区](edit-or-delete-partitions-analyisis-services-multidimensional.md)。</span><span class="sxs-lookup"><span data-stu-id="32872-149">To edit cube partitions by using the **Partitions** tab in Cube Designer, see [Edit or Delete Partitions &#40;Analysis Services - Multidimensional&#41;](edit-or-delete-partitions-analyisis-services-multidimensional.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="32872-150">相关主题</span><span class="sxs-lookup"><span data-stu-id="32872-150">Related Topics</span></span>  
  
|<span data-ttu-id="32872-151">主题</span><span class="sxs-lookup"><span data-stu-id="32872-151">Topic</span></span>|<span data-ttu-id="32872-152">说明</span><span class="sxs-lookup"><span data-stu-id="32872-152">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="32872-153">创建和管理本地分区 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="32872-153">Create and Manage a Local Partition &#40;Analysis Services&#41;</span></span>](create-and-manage-a-local-partition-analysis-services.md)|<span data-ttu-id="32872-154">包含有关如何使用筛选器或不含重复数据的不同事实表对数据分区的信息。</span><span class="sxs-lookup"><span data-stu-id="32872-154">Contains information about how to partition data using filters or different fact tables without duplicating data.</span></span>|  
|[<span data-ttu-id="32872-155">设置分区存储（Analysis Services - 多维）</span><span class="sxs-lookup"><span data-stu-id="32872-155">Set Partition Storage &#40;Analysis Services - Multidimensional&#41;</span></span>](set-partition-storage-analysis-services-multidimensional.md)|<span data-ttu-id="32872-156">说明如何为分区配置存储。</span><span class="sxs-lookup"><span data-stu-id="32872-156">Describes how to configure storage for partitions.</span></span>|  
|[<span data-ttu-id="32872-157">编辑或删除分区 &#40;Analysis Services 多维&#41;</span><span class="sxs-lookup"><span data-stu-id="32872-157">Edit or Delete Partitions &#40;Analysis Services - Multidimensional&#41;</span></span>](edit-or-delete-partitions-analyisis-services-multidimensional.md)|<span data-ttu-id="32872-158">说明如何查看和编辑分区。</span><span class="sxs-lookup"><span data-stu-id="32872-158">Describes how to view and edit partitions.</span></span>|  
|[<span data-ttu-id="32872-159">在 Analysis Services 中合并分区（SSAS - 多维）</span><span class="sxs-lookup"><span data-stu-id="32872-159">Merge Partitions in Analysis Services &#40;SSAS - Multidimensional&#41;</span></span>](merge-partitions-in-analysis-services-ssas-multidimensional.md)|<span data-ttu-id="32872-160">包含有关如何合并分区的信息，这些分区具有不同的事实表或数据切片而不含重复数据。</span><span class="sxs-lookup"><span data-stu-id="32872-160">Contains information about how to merge partitions that have different fact tables or different data slices without duplicating data.</span></span>|  
|[<span data-ttu-id="32872-161">设置分区写回</span><span class="sxs-lookup"><span data-stu-id="32872-161">Set Partition Writeback</span></span>](set-partition-writeback.md)|<span data-ttu-id="32872-162">提供有关对分区启用写操作的说明。</span><span class="sxs-lookup"><span data-stu-id="32872-162">Provides instructions on write-enabling a partition.</span></span>|  
|[<span data-ttu-id="32872-163">创建和管理远程分区 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="32872-163">Create and Manage a Remote Partition &#40;Analysis Services&#41;</span></span>](create-and-manage-a-remote-partition-analysis-services.md)|<span data-ttu-id="32872-164">说明如何创建和管理远程分区。</span><span class="sxs-lookup"><span data-stu-id="32872-164">Describes how to create and manage a remote partition.</span></span>|  
  
  
