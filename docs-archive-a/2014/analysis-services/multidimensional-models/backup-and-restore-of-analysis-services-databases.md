---
title: 备份和还原 Analysis Services 数据库 |Microsoft Docs
ms.custom: ''
ms.date: 03/25/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.ssmsimbi.Backup.f1
- sql12.asvs.ssmsimbi.Restore.f1
helpviewer_keywords:
- backing up databases [Analysis Services]
- encryption [Analysis Services]
- databases [Analysis Services], restoring
- cryptography [Analysis Services]
- databases [Analysis Services], backing up
- restoring databases [Analysis Services]
- recovery [Analysis Services]
ms.assetid: 947eebd2-3622-479e-8aa6-57c11836e4ec
author: minewiskan
ms.author: owend
ms.openlocfilehash: 00a05fa39b57836490dde3dc6d4a1095e4b3ccaa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87690183"
---
# <a name="backup-and-restore-of-analysis-services-databases"></a><span data-ttu-id="97b0e-102">备份和还原 Analysis Services 数据库</span><span class="sxs-lookup"><span data-stu-id="97b0e-102">Backup and Restore of Analysis Services Databases</span></span>
  [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="97b0e-103">包括备份和还原功能，以便您能从特定时间点恢复数据库及其对象。</span><span class="sxs-lookup"><span data-stu-id="97b0e-103">includes backup and restore so that you can recover a database and its objects from a particular point in time.</span></span> <span data-ttu-id="97b0e-104">此外，备份和还原是一项用于将数据库迁移到升级后的服务器、在服务器之间移动数据库或将数据库部署到生产服务器的有效方法。</span><span class="sxs-lookup"><span data-stu-id="97b0e-104">Backup and restore is also a valid technique for migrating databases to upgraded servers, moving databases between servers, or deploying a database to a production server.</span></span> <span data-ttu-id="97b0e-105">出于数据恢复目的，如果您还没有制定备份计划并且您的数据十分重要，则应尽快设计和实施备份计划。</span><span class="sxs-lookup"><span data-stu-id="97b0e-105">For the purposes of data recovery, if you do not already have a backup plan and your data is valuable, you should design and implement a plan as soon as possible.</span></span>  
  
 <span data-ttu-id="97b0e-106">对已部署的 Analysis Services 数据库执行备份和还原命令。</span><span class="sxs-lookup"><span data-stu-id="97b0e-106">The backup and restore commands are performed on a deployed Analysis Services database.</span></span> <span data-ttu-id="97b0e-107">对于 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]中的项目和解决方案，您应该使用源控制来确保可以还原特定版本的源文件，然后为您所使用的源控制系统的存储库创建数据恢复计划。</span><span class="sxs-lookup"><span data-stu-id="97b0e-107">For your projects and solutions in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you should use source control to ensure you can recover specific versions of your source files, and then create a data recovery plan for the repository of the source control system you are using.</span></span>  
  
 <span data-ttu-id="97b0e-108">若要进行包括源数据在内的完整备份，则必须备份包含详细数据的数据库。</span><span class="sxs-lookup"><span data-stu-id="97b0e-108">For a full backup that includes source data, you have to back up the database which contains detail data.</span></span> <span data-ttu-id="97b0e-109">具体而言，如果使用的是 ROLAP 或 DirectQuery 数据库存储，则详细信息数据存储在与 Analysis Services 数据库分开的外部 SQL Server 关系数据库中。</span><span class="sxs-lookup"><span data-stu-id="97b0e-109">Specifically, if you are using ROLAP or DirectQuery database storage, detail data is stored in an external SQL Server relational database that is distinct from the Analysis Services database.</span></span> <span data-ttu-id="97b0e-110">否则，如果所有对象都是表格或多维对象，Analysis Services 备份将既包含元数据又包含源数据。</span><span class="sxs-lookup"><span data-stu-id="97b0e-110">Otherwise, if all objects are tabular or multidimensional, the Analysis Services backup will include both the metadata and source data.</span></span>  
  
 <span data-ttu-id="97b0e-111">自动备份的一个显著优点是：数据快照将按照自动备份频率所规定的时间或间隔始终保持最新状态。</span><span class="sxs-lookup"><span data-stu-id="97b0e-111">One clear benefit of automating backup is that the data snapshot will always be as up-to-date as the automated frequency of backup specifies.</span></span> <span data-ttu-id="97b0e-112">自动计划程序可确保备份不会被忘记。</span><span class="sxs-lookup"><span data-stu-id="97b0e-112">Automated schedulers ensure that backups are not forgotten.</span></span> <span data-ttu-id="97b0e-113">此外，还原数据库也可以自动进行，并且是一种复制数据的好方法，但务必要备份所复制实例的加密密钥文件。</span><span class="sxs-lookup"><span data-stu-id="97b0e-113">Restoring a database can also be automated, and can be a good way to replicate data, but be sure to back up the encryption key file on the instance you replicate to.</span></span> <span data-ttu-id="97b0e-114">同步功能专门用于复制 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库，但仅限过期数据。</span><span class="sxs-lookup"><span data-stu-id="97b0e-114">The synchronization feature is dedicated to replication of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] databases, but only for the data that is out of date.</span></span> <span data-ttu-id="97b0e-115">此处提及的所有功能都可以通过用户界面、XML/A 命令实现或通过 AMO 以编程方式运行。</span><span class="sxs-lookup"><span data-stu-id="97b0e-115">All of the features mentioned here can be implemented through the user interface, by way of XML/A commands or programmatically run through AMO.</span></span>  
  
 <span data-ttu-id="97b0e-116">本主题包含下列部分：</span><span class="sxs-lookup"><span data-stu-id="97b0e-116">This topic includes the following sections:</span></span>  
  
-   [<span data-ttu-id="97b0e-117">准备备份</span><span class="sxs-lookup"><span data-stu-id="97b0e-117">Preparing for Backup</span></span>](#bkmk_prep)  
  
-   [<span data-ttu-id="97b0e-118">备份多维或表格数据库</span><span class="sxs-lookup"><span data-stu-id="97b0e-118">Backing Up a Multidimensional or a Tabular Database</span></span>](#bkmk_cube)  
  
-   [<span data-ttu-id="97b0e-119">还原 Analysis Services 数据库</span><span class="sxs-lookup"><span data-stu-id="97b0e-119">Restoring an Analysis Services Database</span></span>](#bkmk_restore)  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a><span data-ttu-id="97b0e-120">先决条件</span><span class="sxs-lookup"><span data-stu-id="97b0e-120">Prerequisites</span></span>  
 <span data-ttu-id="97b0e-121">您必须对 Analysis Services 实例具有管理权限，或对要备份的数据库拥有完全控制（管理员）权限。</span><span class="sxs-lookup"><span data-stu-id="97b0e-121">You must have administrative permissions on the Analysis Services instance or Full Control (Administrator) permissions on the database you are backing up.</span></span>  
  
 <span data-ttu-id="97b0e-122">还原位置所在的 Analysis Services 实例版本必须与执行备份的实例版本相同或比它更高的版本。</span><span class="sxs-lookup"><span data-stu-id="97b0e-122">Restore location must be an Analysis Services instance that is the same version, or a newer version, as the instance from which the backup was taken.</span></span> <span data-ttu-id="97b0e-123">尽管你不能将数据库从 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 实例还原到更低版本的 Analysis Services，但是通常可在更高的 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 实例上还原更低版本的数据库（如 SQL Server 2012）。</span><span class="sxs-lookup"><span data-stu-id="97b0e-123">Although you cannot restore a database from a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] instance to an earlier version of Analysis Services, it is common practice to restore an older version database, such as SQL Server 2012, on a newer [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] instance.</span></span>  
  
 <span data-ttu-id="97b0e-124">还原位置必须是相同的服务器类型。</span><span class="sxs-lookup"><span data-stu-id="97b0e-124">Restore location must be the same server type.</span></span> <span data-ttu-id="97b0e-125">表格数据库只能还原到在表格模式下运行的 Analysis Services。</span><span class="sxs-lookup"><span data-stu-id="97b0e-125">Tabular databases can only be restored to Analysis Services running in tabular mode.</span></span> <span data-ttu-id="97b0e-126">多维数据库需要在多维模式下运行的实例。</span><span class="sxs-lookup"><span data-stu-id="97b0e-126">Multidimensional databases require an instance running in multidimensional mode.</span></span>  
  
##  <a name="preparing-for-backup"></a><a name="bkmk_prep"></a><span data-ttu-id="97b0e-127">准备备份</span><span class="sxs-lookup"><span data-stu-id="97b0e-127">Preparing for Backup</span></span>  
 <span data-ttu-id="97b0e-128">使用以下核对清单来准备备份：</span><span class="sxs-lookup"><span data-stu-id="97b0e-128">Use the following checklist to prepare for backup:</span></span>  
  
-   <span data-ttu-id="97b0e-129">检查要存储备份文件的位置。</span><span class="sxs-lookup"><span data-stu-id="97b0e-129">Check the location where the backup file will be stored.</span></span> <span data-ttu-id="97b0e-130">如果使用远程位置，您必须将其指定为 UNC 文件夹。</span><span class="sxs-lookup"><span data-stu-id="97b0e-130">If you are using a remote location, you must specify it as a UNC folder.</span></span> <span data-ttu-id="97b0e-131">确认您可以访问该 UNC 路径。</span><span class="sxs-lookup"><span data-stu-id="97b0e-131">Verify that you can access the UNC path.</span></span>  
  
-   <span data-ttu-id="97b0e-132">检查针对该文件夹的权限，确保 Analysis Services 服务帐户对该文件夹具有读/写权限。</span><span class="sxs-lookup"><span data-stu-id="97b0e-132">Check the permissions on the folder to ensure that the Analysis Services service account has Read/Write permissions on the folder.</span></span>  
  
-   <span data-ttu-id="97b0e-133">检查目标服务器上是否有足够的磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="97b0e-133">Check for sufficient disk space on the target server.</span></span>  
  
-   <span data-ttu-id="97b0e-134">检查是否有同名的现有文件。</span><span class="sxs-lookup"><span data-stu-id="97b0e-134">Check for existing files of the same name.</span></span> <span data-ttu-id="97b0e-135">如果已存在同名文件，则备份将失败，除非您指定用于覆盖此文件的选项。</span><span class="sxs-lookup"><span data-stu-id="97b0e-135">If a file of the same name already exists, backup will fail unless you specify options to overwrite the file.</span></span>  
  
##  <a name="backing-up-a-multidimensional-or-a-tabular-database"></a><a name="bkmk_cube"></a> <span data-ttu-id="97b0e-136">备份多维或表格数据库</span><span class="sxs-lookup"><span data-stu-id="97b0e-136">Backing Up a Multidimensional or a Tabular Database</span></span>  
 <span data-ttu-id="97b0e-137">管理员可以将 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库备份到单个 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 备份文件 (.abf)，这与数据库的大小无关。</span><span class="sxs-lookup"><span data-stu-id="97b0e-137">Administrators can back up an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database to a single [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] backup file (.abf), regardless of size of the database.</span></span> <span data-ttu-id="97b0e-138">有关分步说明，请参阅 [如何备份 Analysis Services 数据库 (TechMantra)](http://www.mytechmantra.com/LearnSQLServer/Backup_an_Analysis_Services_Database.html) 和 [自动备份 Analysis Services 数据库 (TechMantra)](http://www.mytechmantra.com/LearnSQLServer/Automate_Backup_of_Analysis_Services_Database.html)。</span><span class="sxs-lookup"><span data-stu-id="97b0e-138">For step by step instructions, see [How to Backup an Analysis Services Database (TechMantra)](http://www.mytechmantra.com/LearnSQLServer/Backup_an_Analysis_Services_Database.html) and [Automate Backup an Analysis Services Database (TechMantra)](http://www.mytechmantra.com/LearnSQLServer/Automate_Backup_of_Analysis_Services_Database.html).</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)]<span data-ttu-id="97b0e-139">（用于在 SharePoint 环境中加载并查询 PowerPivot 数据模型）从 SharePoint 内容数据库加载其模型。</span><span class="sxs-lookup"><span data-stu-id="97b0e-139">, used for loading and querying PowerPivot data models in a SharePoint environment, loads its models from SharePoint content databases.</span></span> <span data-ttu-id="97b0e-140">这些内容数据库是相关的且运行于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 关系数据库引擎上。</span><span class="sxs-lookup"><span data-stu-id="97b0e-140">These content databases are relational and run on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] relational database engine.</span></span> <span data-ttu-id="97b0e-141">同样，没有针对 PowerPivot 数据模型的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 备份和还原策略。</span><span class="sxs-lookup"><span data-stu-id="97b0e-141">As such, there is no [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] backup and restore strategy for PowerPivot data models.</span></span> <span data-ttu-id="97b0e-142">如果您有针对 SharePoint 内容的灾难恢复计划，则该计划包含存储在内容数据库中的 PowerPivot 数据模型。</span><span class="sxs-lookup"><span data-stu-id="97b0e-142">If you have a disaster recovery plan in place for SharePoint content, that plan encompasses the PowerPivot data models stored in the content databases.</span></span>  
  
 <span data-ttu-id="97b0e-143">**远程分区**</span><span class="sxs-lookup"><span data-stu-id="97b0e-143">**Remote Partitions**</span></span>  
  
 <span data-ttu-id="97b0e-144">如果 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库包含远程分区，则还应备份这些远程分区。</span><span class="sxs-lookup"><span data-stu-id="97b0e-144">If the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database contains remote partitions, the remote partitions should also be backed up.</span></span> <span data-ttu-id="97b0e-145">在备份包含远程分区的数据库时，每台远程服务器上的所有远程分区将分别备份到该远程服务器上的单个文件中。</span><span class="sxs-lookup"><span data-stu-id="97b0e-145">When you back up a database with remote partitions, all the remote partitions on each remote server are backed up to a single file on each of those remote servers respectively.</span></span> <span data-ttu-id="97b0e-146">因此，如果脱离各自主机创建这些远程备份，则必须手动将这些文件复制到指定的存储区域。</span><span class="sxs-lookup"><span data-stu-id="97b0e-146">Therefore, if you want to create those remote backups off their respective host computers, you will have to manually copy those files to the designated storage areas.</span></span>  
  
 <span data-ttu-id="97b0e-147">**备份文件的内容**</span><span class="sxs-lookup"><span data-stu-id="97b0e-147">**Contents of a backup file**</span></span>  
  
 <span data-ttu-id="97b0e-148">备份 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库时会生成一个备份文件，其内容因数据库对象所使用的存储模式而异。</span><span class="sxs-lookup"><span data-stu-id="97b0e-148">Backing up an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database produces a backup file whose contents vary depending upon the storage mode used by the database objects.</span></span> <span data-ttu-id="97b0e-149">之所以出现备份内容差异，原因在于每个存储模式实际上都存储了 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库中的不同信息集。</span><span class="sxs-lookup"><span data-stu-id="97b0e-149">This difference in backup content results from the fact that each storage mode actually stores a different set of information within an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database.</span></span> <span data-ttu-id="97b0e-150">例如，多维混合 OLAP (HOLAP) 分区和维度存储 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库中的聚合和元数据，而关系 OLAP (ROLAP) 分区和维度则只存储 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库中的元数据。</span><span class="sxs-lookup"><span data-stu-id="97b0e-150">For example, multidimensional hybrid OLAP (HOLAP) partitions and dimensions store aggregations and metadata in the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, while relational OLAP (ROLAP) partitions and dimensions only store metadata in the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database.</span></span> <span data-ttu-id="97b0e-151">由于 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库的实际内容因每个分区的存储模式而异，所以备份文件的内容也会有所不同。</span><span class="sxs-lookup"><span data-stu-id="97b0e-151">Because the actual contents of an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database vary based on the storage mode of each partition, the contents of the backup file also vary.</span></span> <span data-ttu-id="97b0e-152">下表将备份文件的内容与对象所使用的存储模式关联起来。</span><span class="sxs-lookup"><span data-stu-id="97b0e-152">The following table associates the contents of the backup file to the storage mode used by the objects.</span></span>  
  
|<span data-ttu-id="97b0e-153">存储模式</span><span class="sxs-lookup"><span data-stu-id="97b0e-153">Storage Mode</span></span>|<span data-ttu-id="97b0e-154">备份文件的内容</span><span class="sxs-lookup"><span data-stu-id="97b0e-154">Contents of backup file</span></span>|  
|------------------|-----------------------------|  
|<span data-ttu-id="97b0e-155">多维 MOLAP 分区和维度</span><span class="sxs-lookup"><span data-stu-id="97b0e-155">Multidimensional MOLAP partitions and dimensions</span></span>|<span data-ttu-id="97b0e-156">元数据、源数据和聚合</span><span class="sxs-lookup"><span data-stu-id="97b0e-156">Metadata, source data, and aggregations</span></span>|  
|<span data-ttu-id="97b0e-157">多维 HOLAP 分区和维度</span><span class="sxs-lookup"><span data-stu-id="97b0e-157">Multidimensional HOLAP partitions and dimensions</span></span>|<span data-ttu-id="97b0e-158">元数据和聚合</span><span class="sxs-lookup"><span data-stu-id="97b0e-158">Metadata and aggregations</span></span>|  
|<span data-ttu-id="97b0e-159">多维 ROLAP 分区和维度</span><span class="sxs-lookup"><span data-stu-id="97b0e-159">Multidimensional ROLAP partitions and dimensions</span></span>|<span data-ttu-id="97b0e-160">元数据</span><span class="sxs-lookup"><span data-stu-id="97b0e-160">Metadata</span></span>|  
|<span data-ttu-id="97b0e-161">表格内存中模型</span><span class="sxs-lookup"><span data-stu-id="97b0e-161">Tabular In-Memory Models</span></span>|<span data-ttu-id="97b0e-162">元数据和源数据</span><span class="sxs-lookup"><span data-stu-id="97b0e-162">Metadata and source data</span></span>|  
|<span data-ttu-id="97b0e-163">表格 DirectQuery 模型</span><span class="sxs-lookup"><span data-stu-id="97b0e-163">Tabular DirectQuery Models</span></span>|<span data-ttu-id="97b0e-164">仅元数据</span><span class="sxs-lookup"><span data-stu-id="97b0e-164">Metadata only</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="97b0e-165">备份 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库时不备份任何基础数据源（如关系数据库）中的数据。</span><span class="sxs-lookup"><span data-stu-id="97b0e-165">Backing up an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database does not back up the data in any underlying data sources, such as a relational database.</span></span> <span data-ttu-id="97b0e-166">只备份 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库的内容。</span><span class="sxs-lookup"><span data-stu-id="97b0e-166">Only the contents of the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database are backed up.</span></span>  
  
 <span data-ttu-id="97b0e-167">备份 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库时，可做出如下选择：</span><span class="sxs-lookup"><span data-stu-id="97b0e-167">When you back up an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, you can choose from the following options:</span></span>  
  
-   <span data-ttu-id="97b0e-168">是否压缩所有数据库备份。</span><span class="sxs-lookup"><span data-stu-id="97b0e-168">Whether to compress all database backups.</span></span> <span data-ttu-id="97b0e-169">默认情况下压缩备份。</span><span class="sxs-lookup"><span data-stu-id="97b0e-169">The default is to compress backups.</span></span>  
  
-   <span data-ttu-id="97b0e-170">是否加密备份文件内容并需要密码才能解密和还原文件。</span><span class="sxs-lookup"><span data-stu-id="97b0e-170">Whether to encrypt the contents of the backup files and require a password before the file can be unencrypted and restored.</span></span> <span data-ttu-id="97b0e-171">默认情况下，不加密备份数据。</span><span class="sxs-lookup"><span data-stu-id="97b0e-171">By default, the backed up data is not encrypted.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="97b0e-172">对于每个备份文件，运行备份命令的用户必须对每个文件的指定备份位置拥有写入权限。</span><span class="sxs-lookup"><span data-stu-id="97b0e-172">For each backup file, the user who runs the backup command must have permission to write to the backup location specified for each file.</span></span> <span data-ttu-id="97b0e-173">此外，用户必须具有以下角色之一：针对 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的服务器角色成员，或对要备份的数据库拥有完全控制（管理员）权限的数据库角色成员。</span><span class="sxs-lookup"><span data-stu-id="97b0e-173">Also, the user must have one of the following roles: a member of a server role for the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance, or a member of a database role with Full Control (Administrator) permissions on the database to be backed up.</span></span>  
  
 <span data-ttu-id="97b0e-174">有关备份 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库的详细信息，请参阅 [备份选项](backup-options.md)。</span><span class="sxs-lookup"><span data-stu-id="97b0e-174">For more information about backing up an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, see [Backup Options](backup-options.md).</span></span>  
  
##  <a name="restoring-an-analysis-services-database"></a><a name="bkmk_restore"></a><span data-ttu-id="97b0e-175">还原 Analysis Services 数据库</span><span class="sxs-lookup"><span data-stu-id="97b0e-175">Restoring an Analysis Services Database</span></span>  
 <span data-ttu-id="97b0e-176">管理员可以从一个或多个备份文件中还原 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库。</span><span class="sxs-lookup"><span data-stu-id="97b0e-176">Administrators can restore an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database from one or more backup files.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="97b0e-177">如果备份文件已加密，则必须提供在备份期间指定的密码，才能使用该文件还原 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库。</span><span class="sxs-lookup"><span data-stu-id="97b0e-177">If a backup file is encrypted, you must provide the password specified during backup before you can use that file to restore an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database.</span></span>  
  
 <span data-ttu-id="97b0e-178">在还原期间，您有如下选择：</span><span class="sxs-lookup"><span data-stu-id="97b0e-178">During restoration, you have the following options:</span></span>  
  
-   <span data-ttu-id="97b0e-179">可以使用原始数据库名还原数据库，也可以指定一个新数据库名。</span><span class="sxs-lookup"><span data-stu-id="97b0e-179">You can restore the database using the original database name, or you can specify a new database name.</span></span>  
  
-   <span data-ttu-id="97b0e-180">可以覆盖现有数据库。</span><span class="sxs-lookup"><span data-stu-id="97b0e-180">You can overwrite an existing database.</span></span> <span data-ttu-id="97b0e-181">如果选择覆盖数据库，必须明确指定要覆盖现有数据库。</span><span class="sxs-lookup"><span data-stu-id="97b0e-181">If you choose to overwrite the database, you must expressly specify that you want to overwrite the existing database.</span></span>  
  
-   <span data-ttu-id="97b0e-182">可以选择是还原现有安全信息还是跳过安全成员身份信息。</span><span class="sxs-lookup"><span data-stu-id="97b0e-182">You can choose whether to restore existing security information or skip security membership information.</span></span>  
  
-   <span data-ttu-id="97b0e-183">可以选择使用还原命令为所还原的每个分区更改还原文件夹。</span><span class="sxs-lookup"><span data-stu-id="97b0e-183">You can choose to have the restore command change the restoration folder for each partition being restored.</span></span> <span data-ttu-id="97b0e-184">本地分区可以还原到数据库所还原到的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的任意本地文件夹位置。</span><span class="sxs-lookup"><span data-stu-id="97b0e-184">Local partitions can be restored to any folder location that is local to the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance to which the database is being restored.</span></span> <span data-ttu-id="97b0e-185">远程分区可以还原到除本地服务器之外的任意服务器上的任意文件夹；远程分区不能还原到本地。</span><span class="sxs-lookup"><span data-stu-id="97b0e-185">Remote partitions can be restored to any folder on any server, other than the local server; remote partitions cannot become local.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="97b0e-186">对于每个备份文件，运行还原命令的用户必须对每个文件的指定备份位置具有读取权限。</span><span class="sxs-lookup"><span data-stu-id="97b0e-186">For each backup file, the user who runs the restore command must have permission to read from the backup location specified for each file.</span></span> <span data-ttu-id="97b0e-187">若要还原未在服务器上安装的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库，用户还必须是此 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的服务器角色成员。</span><span class="sxs-lookup"><span data-stu-id="97b0e-187">To restore an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database that is not installed on the server, the user must also be a member of the server role for that [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance.</span></span> <span data-ttu-id="97b0e-188">若要覆盖 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库，用户必须具有以下角色之一： [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的服务器角色成员，或对要还原的数据库拥有完全控制（管理员）权限的数据库角色成员。</span><span class="sxs-lookup"><span data-stu-id="97b0e-188">To overwrite an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, the user must have one of the following roles: a member of the server role for the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance, or a member of a database role with Full Control (Administrator) permissions on the database to be restored.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="97b0e-189">还原现有数据库之后，还原了此数据库的用户可能会失去对还原后的数据库的访问权限。</span><span class="sxs-lookup"><span data-stu-id="97b0e-189">After restoring an existing database, the user who restored the database might lose access to the restored database.</span></span> <span data-ttu-id="97b0e-190">如果在执行备份时用户不是服务器角色成员或者不是拥有完全控制（管理员）权限的数据库角色成员，则会出现这种失去访问权限的情形。</span><span class="sxs-lookup"><span data-stu-id="97b0e-190">This loss of access can occur if, at the time that the backup was performed, the user was not a member of the server role or was not a member of the database role with Full Control (Administrator) permissions.</span></span>  
  
 <span data-ttu-id="97b0e-191">有关还原 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库的详细信息，请参阅 [还原选项](restore-options.md)。</span><span class="sxs-lookup"><span data-stu-id="97b0e-191">For more information about restoring an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, see [Restore Options](restore-options.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="97b0e-192">另请参阅</span><span class="sxs-lookup"><span data-stu-id="97b0e-192">See Also</span></span>  
 <span data-ttu-id="97b0e-193">[&#40;XMLA&#41;备份、还原和同步数据库](../multidimensional-models-scripting-language-assl-xmla/backing-up-restoring-and-synchronizing-databases-xmla.md) </span><span class="sxs-lookup"><span data-stu-id="97b0e-193">[Backing Up, Restoring, and Synchronizing Databases &#40;XMLA&#41;](../multidimensional-models-scripting-language-assl-xmla/backing-up-restoring-and-synchronizing-databases-xmla.md) </span></span>  
 [<span data-ttu-id="97b0e-194">Analysis Services PowerShell</span><span class="sxs-lookup"><span data-stu-id="97b0e-194">Analysis Services PowerShell</span></span>](../analysis-services-powershell.md)  
  
  
