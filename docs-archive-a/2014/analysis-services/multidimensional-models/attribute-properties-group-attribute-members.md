---
title: 将属性成员分组 (离散化) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- NameColumn property
- discretization [Analysis Services]
- member groups [Analysis Services]
- grouping members
- DiscretizationNumber property
- sort orders [Analysis Services]
- DiscretizationMethod property
- adding members to member group
- number of member groups
- members [Analysis Services], groups
- names [Analysis Services], member groups
ms.assetid: 5cf2f407-accc-4baf-b54f-7703af338325
author: minewiskan
ms.author: owend
ms.openlocfilehash: bce2a72787d0b49c3f1fc60afe7b2177dcfdb351
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87693557"
---
# <a name="group-attribute-members-discretization"></a><span data-ttu-id="7f335-102">对属性成员分组（离散化）</span><span class="sxs-lookup"><span data-stu-id="7f335-102">Group Attribute Members (Discretization)</span></span>
  <span data-ttu-id="7f335-103">成员组是系统生成的连续维度成员的集合。</span><span class="sxs-lookup"><span data-stu-id="7f335-103">A member group is a system-generated collection of consecutive dimension members.</span></span> <span data-ttu-id="7f335-104">在中 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ，可以通过名为离散化的进程将属性的成员分组到多个成员组中。</span><span class="sxs-lookup"><span data-stu-id="7f335-104">In [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], members of an attribute can be grouped into a number of member groups through a process called discretization.</span></span> <span data-ttu-id="7f335-105">层次结构中的级别或者包含成员组，或者包含成员，但是不能同时包含二者。</span><span class="sxs-lookup"><span data-stu-id="7f335-105">A level in a hierarchy contains either member groups or members, but not both.</span></span> <span data-ttu-id="7f335-106">业务用户浏览包含成员组的级别时，将看见成员组的名称和单元值。</span><span class="sxs-lookup"><span data-stu-id="7f335-106">When business users browse a level that contains member groups, they see the names and cell values of the member groups.</span></span> <span data-ttu-id="7f335-107">由 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 为了支持成员组而生成的成员称为分组成员，看上去与普通成员相同。</span><span class="sxs-lookup"><span data-stu-id="7f335-107">The members generated by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to support member groups are called grouping members, and look like ordinary members.</span></span>  
  
 <span data-ttu-id="7f335-108">特性的 `DiscretizationMethod` 属性控制成员的分组方式。</span><span class="sxs-lookup"><span data-stu-id="7f335-108">The `DiscretizationMethod` property on an attribute controls how the members are grouped.</span></span>  
  
|<span data-ttu-id="7f335-109">`DiscretizationMethod` 设置</span><span class="sxs-lookup"><span data-stu-id="7f335-109">`DiscretizationMethod` Setting</span></span>|<span data-ttu-id="7f335-110">说明</span><span class="sxs-lookup"><span data-stu-id="7f335-110">Description</span></span>|  
|--------------------------------------|-----------------|  
|`None`|<span data-ttu-id="7f335-111">显示成员。</span><span class="sxs-lookup"><span data-stu-id="7f335-111">Displays the members.</span></span>|  
|`Automatic`|<span data-ttu-id="7f335-112">选择最佳数据表示法： `EqualAreas` 方法或 `Clusters` 方法。</span><span class="sxs-lookup"><span data-stu-id="7f335-112">Selects the method that best represents the data: either the `EqualAreas` method or the `Clusters` method.</span></span>|  
|`EqualAreas`|<span data-ttu-id="7f335-113">尝试将属性中的成员分成若干包含相同数量成员的组。</span><span class="sxs-lookup"><span data-stu-id="7f335-113">Tries to divide the members in the attribute into groups that contain an equal number of members.</span></span>|  
|`Clusters`|<span data-ttu-id="7f335-114">尝试通过抽样定型数据、初始化为大量随机点和运行几次期望最大化 (EM) 聚类分析算法的迭代来将属性中的成员分成若干组。</span><span class="sxs-lookup"><span data-stu-id="7f335-114">Tries to divide the members in the attribute into groups by sampling the training data, initializing to a number of random points, and running several iterations of the Expectation-Maximization (EM) clustering algorithm.</span></span><br /><br /> <span data-ttu-id="7f335-115">本方法的好处是适用于任何分布曲线，但就处理时间而言开销较大。</span><span class="sxs-lookup"><span data-stu-id="7f335-115">This method is useful because it works on any distribution curve, but is more expensive in terms of processing time.</span></span>|  
  
 <span data-ttu-id="7f335-116">特性的 `DiscretizationNumber` 属性指定要显示的组数。</span><span class="sxs-lookup"><span data-stu-id="7f335-116">The `DiscretizationNumber` property on attributes specifies the number of groups to display.</span></span> <span data-ttu-id="7f335-117">如果将属性设置为默认值 0，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将通过对数据进行抽样或读取（具体取决于 `DiscretizationMethod` 属性的设置）来确定组数。</span><span class="sxs-lookup"><span data-stu-id="7f335-117">If the property is set to the default value of 0, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] determines the number of groups by either sampling or reading the data, depending on the setting of the `DiscretizationMethod` property.</span></span>  
  
 <span data-ttu-id="7f335-118">使用特性的 `OrderBy` 属性可以控制成员在成员组中的排序顺序。</span><span class="sxs-lookup"><span data-stu-id="7f335-118">The sort order of members in the member groups is controlled by using the `OrderBy` property of the attribute.</span></span> <span data-ttu-id="7f335-119">基于该排序顺序，成员组中的各成员将连续排列。</span><span class="sxs-lookup"><span data-stu-id="7f335-119">Based on this sort order, the members in a member group are ordered consecutively.</span></span>  
  
 <span data-ttu-id="7f335-120">成员组的通常用法是从有很少成员的级别深化到有很多成员的级别。</span><span class="sxs-lookup"><span data-stu-id="7f335-120">A common use for member groups is to drill down from a level with few members to a level with many members.</span></span> <span data-ttu-id="7f335-121">若要允许用户在级别之间深化，请将包含大量成员的级别特性的 `DiscretizationMethod` 属性从 `None` 更改为上表中所述的离散化方法之一。</span><span class="sxs-lookup"><span data-stu-id="7f335-121">To enable users to drill down between levels, change the `DiscretizationMethod` property on the attribute for the level that contains numerous members from `None` to one of the discretization methods described in the previous table.</span></span> <span data-ttu-id="7f335-122">例如，“客户端”维度包含具有 500,000 个成员的“客户端名称”属性层次结构。</span><span class="sxs-lookup"><span data-stu-id="7f335-122">For example, a Client dimension contains a Client Name attribute hierarchy with 500,000 members.</span></span> <span data-ttu-id="7f335-123">您可以重命名该特性“客户端组”并将 `DiscretizationMethod` 属性设置为 `Automatic`，以显示特性层次结构成员级别中的各成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-123">You can rename this attribute Client Groups and set the `DiscretizationMethod` property to `Automatic` to display member groups on the attribute hierarchy member level.</span></span>  
  
 <span data-ttu-id="7f335-124">若要深化到每个组中的各个客户端，可以创建另一个绑定到相同表列的“客户端名称”属性层次结构。</span><span class="sxs-lookup"><span data-stu-id="7f335-124">To drill down to individual clients in each group, you can create another Client Name attribute hierarchy bound to the same table column.</span></span> <span data-ttu-id="7f335-125">然后根据两个属性创建新的用户层次结构。</span><span class="sxs-lookup"><span data-stu-id="7f335-125">Then, create a new user hierarchy based on the two attributes.</span></span> <span data-ttu-id="7f335-126">顶级将基于“客户端组”属性，而较低级别基于“客户端名称”属性。</span><span class="sxs-lookup"><span data-stu-id="7f335-126">The top level would be based on the Client Groups attribute and the lower level would be based on the Client Name attribute.</span></span> <span data-ttu-id="7f335-127">两个特性的 `IsAggregatable` 属性将为 `True`。</span><span class="sxs-lookup"><span data-stu-id="7f335-127">The `IsAggregatable` property would be `True` on both attributes.</span></span> <span data-ttu-id="7f335-128">然后，用户可以展开层次结构上的“（所有）”级别以查看组成员，并展开组成员以查看层次结构的叶成员。</span><span class="sxs-lookup"><span data-stu-id="7f335-128">The user could then expand the (All) level on the hierarchy to view the group members, and expand the group members to view the leaf members of the hierarchy.</span></span> <span data-ttu-id="7f335-129">若要隐藏组或客户端级别，您可以将相应特性的 `AttributeHierarchyVisible` 属性设置为 `False`。</span><span class="sxs-lookup"><span data-stu-id="7f335-129">To hide either group or client level, you could set the `AttributeHierarchyVisible` property to `False` on the corresponding attribute.</span></span>  
  
## <a name="naming-template"></a><span data-ttu-id="7f335-130">命名模板</span><span class="sxs-lookup"><span data-stu-id="7f335-130">Naming Template</span></span>  
 <span data-ttu-id="7f335-131">当创建成员组时，会自动生成成员组的名称。</span><span class="sxs-lookup"><span data-stu-id="7f335-131">Member group names are generated automatically when the member groups are created.</span></span> <span data-ttu-id="7f335-132">除非您指定了一个命名模板，否则使用默认的命名模板。</span><span class="sxs-lookup"><span data-stu-id="7f335-132">Unless you specify a naming template, the default naming template is used.</span></span> <span data-ttu-id="7f335-133">通过在某个特性的 `Format` 属性的 `NameColumn` 选项中指定命名模板，可以更改此命名方法。</span><span class="sxs-lookup"><span data-stu-id="7f335-133">You can change this method of naming by specifying a naming template in the `Format` option for the `NameColumn` property of an attribute.</span></span> <span data-ttu-id="7f335-134">可以针对列绑定（用于特性的 `Translations` 属性）的 `NameColumn` 集合中指定的每种语言重新定义不同的命名模板。</span><span class="sxs-lookup"><span data-stu-id="7f335-134">Different naming templates can be redefined for every language specified in the `Translations` collection of the column binding that was used for the `NameColumn` property of the attribute.</span></span>  
  
 <span data-ttu-id="7f335-135">`Format` 设置使用以下字符串表达式来定义命名模板：</span><span class="sxs-lookup"><span data-stu-id="7f335-135">The `Format` setting uses the following string expression to define the naming template:</span></span>  
  
 `<Naming template> ::= <First definition> [;<Intermediate definition>;<Last definition>]`  
  
 `<First definition> ::= <Name expression>`  
  
 `<Intermediate definition> ::= <Name expression>`  
  
 `<Last definition> ::= <Name expression>`  
  
 <span data-ttu-id="7f335-136">`<First definition>` 参数只应用于第一个成员组或由离散化方法生成的成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-136">The `<First definition>` parameter applies only to the first or only member group generated by the discretization method.</span></span> <span data-ttu-id="7f335-137">如果未提供可选参数 `<Intermediate definition>` 和 `<Last definition>` ，则 `<First definition>` 参数将用于为该属性生成的所有度量值组。</span><span class="sxs-lookup"><span data-stu-id="7f335-137">If the optional parameters `<Intermediate definition>` and `<Last definition>` are not provided, the `<First definition>` parameter is used for all measure groups generated for that attribute.</span></span>  
  
 <span data-ttu-id="7f335-138">`<Last definition>` 参数只应用于由离散化方法生成的最后一个成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-138">The `<Last definition>` parameter applies only to the last member group generated by the discretization method.</span></span>  
  
 <span data-ttu-id="7f335-139">`<Intermediate bucket name>` 参数应用于每个成员组，而不是由离散化方法生成的第一个或最后一个成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-139">The `<Intermediate bucket name>` parameter applies to every member group other than the first or last member group generated by the discretization method.</span></span> <span data-ttu-id="7f335-140">如果生成的成员组仅为两个或更少，则忽略此参数。</span><span class="sxs-lookup"><span data-stu-id="7f335-140">If two or fewer member groups are generated, this parameter is ignored.</span></span>  
  
 <span data-ttu-id="7f335-141">`<Bucket name>` 参数是一个字符串表达式，可以合并一组变量以将成员或成员组信息表示为成员组名称的一部分：</span><span class="sxs-lookup"><span data-stu-id="7f335-141">The `<Bucket name>` parameter is a string expression that can incorporate a set of variables to represent member or member group information as part of the name of the member group:</span></span>  
  
|<span data-ttu-id="7f335-142">变量</span><span class="sxs-lookup"><span data-stu-id="7f335-142">Variable</span></span>|<span data-ttu-id="7f335-143">说明</span><span class="sxs-lookup"><span data-stu-id="7f335-143">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="7f335-144">%{First bucket member}</span><span class="sxs-lookup"><span data-stu-id="7f335-144">%{First bucket member}</span></span>|<span data-ttu-id="7f335-145">包含在当前成员组中的第一个成员的名称。</span><span class="sxs-lookup"><span data-stu-id="7f335-145">The member name of the first member to be included in the current member group.</span></span>|  
|<span data-ttu-id="7f335-146">%{Last bucket member}</span><span class="sxs-lookup"><span data-stu-id="7f335-146">%{Last bucket member}</span></span>|<span data-ttu-id="7f335-147">包含在当前成员组中的最后一个成员的名称。</span><span class="sxs-lookup"><span data-stu-id="7f335-147">The member name of the last member to be included in the current member group.</span></span>|  
|<span data-ttu-id="7f335-148">%{Previous bucket last member}</span><span class="sxs-lookup"><span data-stu-id="7f335-148">%{Previous bucket last member}</span></span>|<span data-ttu-id="7f335-149">分配到上一个成员组的最后一个成员的名称。</span><span class="sxs-lookup"><span data-stu-id="7f335-149">The member name of the last member assigned to the previous member group.</span></span>|  
|<span data-ttu-id="7f335-150">%{Next bucket first member}</span><span class="sxs-lookup"><span data-stu-id="7f335-150">%{Next bucket first member}</span></span>|<span data-ttu-id="7f335-151">分配到下一个成员组的第一个成员的名称。</span><span class="sxs-lookup"><span data-stu-id="7f335-151">The member name of the first member to be assigned to the next member group.</span></span>|  
|<span data-ttu-id="7f335-152">%{Bucket Min}</span><span class="sxs-lookup"><span data-stu-id="7f335-152">%{Bucket Min}</span></span>|<span data-ttu-id="7f335-153">要分配到当前成员组的最小成员数。</span><span class="sxs-lookup"><span data-stu-id="7f335-153">The minimum value of the members to be assigned to the current member group.</span></span>|  
|<span data-ttu-id="7f335-154">%{Bucket Max}</span><span class="sxs-lookup"><span data-stu-id="7f335-154">%{Bucket Max}</span></span>|<span data-ttu-id="7f335-155">要分配到当前成员组的最大成员数。</span><span class="sxs-lookup"><span data-stu-id="7f335-155">The maximum value of the members to be assigned to the current member group.</span></span>|  
|<span data-ttu-id="7f335-156">%{Previous Bucket Max}</span><span class="sxs-lookup"><span data-stu-id="7f335-156">%{Previous Bucket Max}</span></span>|<span data-ttu-id="7f335-157">要分配到上一个成员组的最大成员数。</span><span class="sxs-lookup"><span data-stu-id="7f335-157">The maximum value of the members to be assigned to the previous member group.</span></span>|  
|<span data-ttu-id="7f335-158">%{Next Bucket Min}</span><span class="sxs-lookup"><span data-stu-id="7f335-158">%{Next Bucket Min}</span></span>|<span data-ttu-id="7f335-159">要分配到下一个成员组的最小成员数。</span><span class="sxs-lookup"><span data-stu-id="7f335-159">The minimum value of the members to be assigned to the next member group.</span></span>|  
  
 <span data-ttu-id="7f335-160">为了与更早版本的 `"%{First bucket member} - %{Last bucket member}"`兼容，默认的命名模板为 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7f335-160">The default naming template is `"%{First bucket member} - %{Last bucket member}"`, to provide compatibility with earlier versions of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7f335-161">若要在命名模板中包含一个作为文字字符的分号 (;)，请在它前面加上一个百分号 (%) 字符。</span><span class="sxs-lookup"><span data-stu-id="7f335-161">To include a semicolon (;) as a literal character in the naming template, prefix it with the percent (%) character.</span></span>  
  
### <a name="example"></a><span data-ttu-id="7f335-162">示例</span><span class="sxs-lookup"><span data-stu-id="7f335-162">Example</span></span>  
 <span data-ttu-id="7f335-163">以下字符串表达式可用于对 [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] 示例 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库中“客户”维度的“年收入”属性（其中，“年收入”属性使用了成员分组）进行分类：</span><span class="sxs-lookup"><span data-stu-id="7f335-163">The following string expression could be used to classify the Yearly Income attribute of the Customer dimension in the [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] sample [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database, where the Yearly Income attribute uses member grouping:</span></span>  
  
 <span data-ttu-id="7f335-164">"Less than %{Next Bucket Min};Between %{First bucket member} and %{Last bucket member};Greater than %{Previous Bucket Max}"</span><span class="sxs-lookup"><span data-stu-id="7f335-164">"Less than %{Next Bucket Min};Between %{First bucket member} and %{Last bucket member};Greater than %{Previous Bucket Max}"</span></span>  
  
## <a name="adding-new-members-to-existing-member-groups"></a><span data-ttu-id="7f335-165">向现有的成员组中添加新成员</span><span class="sxs-lookup"><span data-stu-id="7f335-165">Adding New Members to Existing Member Groups</span></span>  
 <span data-ttu-id="7f335-166">如果向维度中添加新成员，则这些成员便会通过比较成员值和当前成员组布局被分配到相应的成员组中。</span><span class="sxs-lookup"><span data-stu-id="7f335-166">If new members are added to the dimension, they are assigned to the appropriate member groups by comparing the value of the member against the current member group layout.</span></span>  
  
 <span data-ttu-id="7f335-167">如果在上一个成员组的最后一个成员和下一个成员组的第一个成员之间插入成员，则新成员便会成为上一个成员组的最后一个成员。</span><span class="sxs-lookup"><span data-stu-id="7f335-167">If a member is inserted between the last member of the previous member group and the first member of the next member group, the new member becomes the last member of the previous member group.</span></span>  
  
## <a name="updating-a-dimension-with-discretized-attributes"></a><span data-ttu-id="7f335-168">使用离散化属性更新维度</span><span class="sxs-lookup"><span data-stu-id="7f335-168">Updating a Dimension with Discretized Attributes</span></span>  
 <span data-ttu-id="7f335-169">处理维度时，离散化属性只在完全更新 (ProcessFull) 中进行重新离散化。</span><span class="sxs-lookup"><span data-stu-id="7f335-169">When you process a dimension, a discretized attribute is rediscretized only with a full update (ProcessFull).</span></span> <span data-ttu-id="7f335-170">若要对属性进行重新离散化，必须对维度执行完全更新。</span><span class="sxs-lookup"><span data-stu-id="7f335-170">To rediscretize an attribute, you must perform a full update of the dimension.</span></span> <span data-ttu-id="7f335-171">如果离散化属性的维度表已更新，并且您使用增量式更新 (ProcessAdd) 处理该维度，则离散化属性不会进行重新离散化。</span><span class="sxs-lookup"><span data-stu-id="7f335-171">If the dimension table of a discretized attribute is updated and you process the dimension with an incremental update (ProcessAdd), the discretized attribute is not rediscretized.</span></span> <span data-ttu-id="7f335-172">新存储桶的名称和子级将保持不变。</span><span class="sxs-lookup"><span data-stu-id="7f335-172">The names and children of the new buckets remain the same.</span></span> <span data-ttu-id="7f335-173">有关处理维度的详细信息，请参阅 [处理 Analysis Services 对象](processing-analysis-services-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="7f335-173">For more information about processing dimensions, see [Processing Analysis Services Objects](processing-analysis-services-objects.md).</span></span>  
  
## <a name="usage-limitations"></a><span data-ttu-id="7f335-174">使用限制</span><span class="sxs-lookup"><span data-stu-id="7f335-174">Usage Limitations</span></span>  
  
-   <span data-ttu-id="7f335-175">不能在层次结构的最顶层或最底层中创建成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-175">You cannot create member groups in the topmost or bottommost level of a hierarchy.</span></span> <span data-ttu-id="7f335-176">如果您必须这样做，则可以添加一个级别，以使将在其中创建成员组的级别不再处于顶层或底层。</span><span class="sxs-lookup"><span data-stu-id="7f335-176">However, if you need to do this, you can add a level in such a way that the level in which you want to create member groups is no longer the top or bottom level.</span></span> <span data-ttu-id="7f335-177">可以将级别的 `Visible` 属性设置为 `False` 来隐藏所添加的级别。</span><span class="sxs-lookup"><span data-stu-id="7f335-177">You can hide the added level by setting its `Visible` property to `False`.</span></span>  
  
-   <span data-ttu-id="7f335-178">不能在层次结构的两个连续级别中创建成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-178">You cannot create member groups in two consecutive levels of a hierarchy.</span></span>  
  
-   <span data-ttu-id="7f335-179">使用 ROLAP 存储模式的维度不支持成员组。</span><span class="sxs-lookup"><span data-stu-id="7f335-179">Member groups are not supported for dimensions that use the ROLAP storage mode.</span></span>  
  
-   <span data-ttu-id="7f335-180">如果成员组所在维度的维度表经过更新，并且该维度随后得到完全处理，则会生成一个新的成员组集。</span><span class="sxs-lookup"><span data-stu-id="7f335-180">If the dimension table of a dimension that contains member groups is updated, and the dimension is subsequently fully processed, a new set of member groups is generated.</span></span> <span data-ttu-id="7f335-181">新成员组的名称和子级可能与旧成员组的不同。</span><span class="sxs-lookup"><span data-stu-id="7f335-181">The names and children of the new member groups may be different from the old member groups.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7f335-182">另请参阅</span><span class="sxs-lookup"><span data-stu-id="7f335-182">See Also</span></span>  
 [<span data-ttu-id="7f335-183">属性和属性层次结构</span><span class="sxs-lookup"><span data-stu-id="7f335-183">Attributes and Attribute Hierarchies</span></span>](../multidimensional-models-olap-logical-dimension-objects/attributes-and-attribute-hierarchies.md)  
  
  
