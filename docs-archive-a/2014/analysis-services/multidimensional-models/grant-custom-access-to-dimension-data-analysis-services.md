---
title: 授予对维度数据的自定义访问 (Analysis Services) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.roledesignerdialog.dimensiondata.f1
helpviewer_keywords:
- dimensions [Analysis Services], security
- AllowedSet property
- IsAllowed property
- DeniedSet property
- user access rights [Analysis Services], dimensions
- custom dimension data access [Analysis Services]
- permissions [Analysis Services], dimensions
- DefaultMember property
- VisualTotals property
- ApplyDenied property
ms.assetid: b028720d-3785-4381-9572-157d13ec4291
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4d3f91fef6410e05bfd9014f3f2db67530e83e5e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87682414"
---
# <a name="grant-custom-access-to-dimension-data-analysis-services"></a><span data-ttu-id="e567d-102">授予对维度数据的自定义访问权限 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="e567d-102">Grant custom access to dimension data (Analysis Services)</span></span>
  <span data-ttu-id="e567d-103">启用对多维数据集的读取访问权限后，可以设置明确允许或拒绝访问维度成员的其他权限（包括包含在度量值维度中的度量值，此维度包含在多维数据集中使用的全部度量值）。</span><span class="sxs-lookup"><span data-stu-id="e567d-103">After enabling read access to a cube, you can set additional permissions that explicitly allow or deny access to dimension members (including measures contained in the Measures Dimension containing all of the measures used in a cube).</span></span> <span data-ttu-id="e567d-104">例如，假设有多个经销商类别，您可能想要设置权限以排除某个具体业务类型的数据。</span><span class="sxs-lookup"><span data-stu-id="e567d-104">For example, given multiple categories of resellers, you might want to set permissions to exclude data for a specific business type.</span></span> <span data-ttu-id="e567d-105">下图是拒绝访问“经销商”维度中“仓库”业务类型的前后对比效果。</span><span class="sxs-lookup"><span data-stu-id="e567d-105">The following illustration is a before-and-after effect of denying access to the Warehouse business type in the Reseller dimension.</span></span>  
  
 <span data-ttu-id="e567d-106">![包含和不包含维度成员的数据透视表](../media/ssas-permsdimdenied.png "包含和不包含维度成员的数据透视表")</span><span class="sxs-lookup"><span data-stu-id="e567d-106">![PivotTables with and without a dimension member](../media/ssas-permsdimdenied.png "PivotTables with and without a dimension member")</span></span>  
  
 <span data-ttu-id="e567d-107">默认情况下，如果可以读取 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 多维数据集中的数据，则自动拥有对该多维数据集关联的所有度量值和维度成员的读取权限。</span><span class="sxs-lookup"><span data-stu-id="e567d-107">By default, if you can read data from an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] cube, you automatically have read permissions on all measures and dimension members associated with that cube.</span></span> <span data-ttu-id="e567d-108">虽然这种行为可能足够应对许多方案，但有时安全要求需要一个更细化的授权策略，不同用户在同一维度的访问权限级别不同。</span><span class="sxs-lookup"><span data-stu-id="e567d-108">While this behavior might be sufficient for many scenarios, sometimes security requirements call for a more segmented authorization strategy, with varying levels of access for different users, on the same dimension.</span></span>  
  
 <span data-ttu-id="e567d-109">可通过选择允许 (AllowedSet) 或拒绝 (DeniedSet) 访问的成员来限制访问。</span><span class="sxs-lookup"><span data-stu-id="e567d-109">You can restrict access by choosing which members to allow (AllowedSet) or deny (DeniedSet) access.</span></span> <span data-ttu-id="e567d-110">可通过选择或取消选择维度成员，从而使角色包括或去除所选成员来实现此目的。</span><span class="sxs-lookup"><span data-stu-id="e567d-110">You do this by either selecting or deselecting dimension members to include or exclude from the role.</span></span>  
  
 <span data-ttu-id="e567d-111">基本维度安全性最容易；只需选择要在角色中包括或去除的维度属性和属性层次结构即可。</span><span class="sxs-lookup"><span data-stu-id="e567d-111">Basic dimension security is the easiest; you simply select which dimension attributes and attribute hierarchies to include or exclude in the role.</span></span> <span data-ttu-id="e567d-112">高级安全性更复杂，要求擅长 MDX 脚本编写。</span><span class="sxs-lookup"><span data-stu-id="e567d-112">Advanced security is more complex and requires expertise in MDX scripting.</span></span> <span data-ttu-id="e567d-113">下面将介绍这两种方法。</span><span class="sxs-lookup"><span data-stu-id="e567d-113">Both approaches are described below.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e567d-114">先决条件</span><span class="sxs-lookup"><span data-stu-id="e567d-114">Prerequisites</span></span>  
 <span data-ttu-id="e567d-115">并非所有度量值或维度成员都可用于自定义访问方案。</span><span class="sxs-lookup"><span data-stu-id="e567d-115">Not all measures or dimension members can be used in custom access scenarios.</span></span> <span data-ttu-id="e567d-116">如果某个角色限制访问默认度量值或成员，或者限制访问属于度量值表达式的度量值，则连接将失败。</span><span class="sxs-lookup"><span data-stu-id="e567d-116">A connection will fail if a role restricts access to a default measure or member, or restricts access to measures that are part of measure expressions.</span></span>  
  
 <span data-ttu-id="e567d-117">**检查对维度安全性的阻碍：默认度量值、默认成员和度量值表达式中使用的度量值**</span><span class="sxs-lookup"><span data-stu-id="e567d-117">**Check for obstructions to dimension security: default measures, default members, and measures used in measure expressions**</span></span>  
  
1.  <span data-ttu-id="e567d-118">在 SQL Server Management Studio 中，右键单击多维数据集，然后选择 "**编写多维数据集脚本为**"  |  **以更改为**  |  **新的查询编辑器窗口**。</span><span class="sxs-lookup"><span data-stu-id="e567d-118">In SQL Server Management Studio, right-click a cube and select **Script Cube as** | **ALTER To** | **New Query Editor Window**.</span></span>  
  
2.  <span data-ttu-id="e567d-119">搜索 `DefaultMeasure`。</span><span class="sxs-lookup"><span data-stu-id="e567d-119">Search for `DefaultMeasure`.</span></span> <span data-ttu-id="e567d-120">应发现一个针对多维数据集的度量值和一个针对每个透视的度量值。</span><span class="sxs-lookup"><span data-stu-id="e567d-120">You should find one for the cube, and one for each perspective.</span></span> <span data-ttu-id="e567d-121">定义维度安全性时，避免限制访问默认度量值。</span><span class="sxs-lookup"><span data-stu-id="e567d-121">When defining dimension security, avoid restricting access to default measures.</span></span>  
  
3.  <span data-ttu-id="e567d-122">然后，搜索 `MeasureExpression`。</span><span class="sxs-lookup"><span data-stu-id="e567d-122">Next, search for `MeasureExpression`.</span></span> <span data-ttu-id="e567d-123">度量值表达式是基于计算的度量值表达式，该计算通常包含其他度量值。</span><span class="sxs-lookup"><span data-stu-id="e567d-123">A measure expression is a measure, based on a calculation, where the calculation often includes other measures.</span></span> <span data-ttu-id="e567d-124">确认表达式中未使用要限制的度量值。</span><span class="sxs-lookup"><span data-stu-id="e567d-124">Verify that the measure you want to restrict is not used in an expression.</span></span> <span data-ttu-id="e567d-125">或者，继续操作并限制访问，只需确保在整个多维数据集内同样排除对该度量值的所有引用。</span><span class="sxs-lookup"><span data-stu-id="e567d-125">Alternatively, go ahead and restrict access, just make sure to also exclude all references to that measure throughout the cube.</span></span>  
  
4.  <span data-ttu-id="e567d-126">最后，搜索 `DefaultMember`。</span><span class="sxs-lookup"><span data-stu-id="e567d-126">Finally, search for `DefaultMember`.</span></span> <span data-ttu-id="e567d-127">请记录用作属性的默认成员的任何属性。</span><span class="sxs-lookup"><span data-stu-id="e567d-127">Make a note of any attributes that serve as a default member of an attribute.</span></span> <span data-ttu-id="e567d-128">设置维度安全性时，避免对这些属性施加限制。</span><span class="sxs-lookup"><span data-stu-id="e567d-128">Avoid putting restrictions on those attributes when setting up dimension security.</span></span>  
  
## <a name="basic-dimension-security"></a><span data-ttu-id="e567d-129">基本维度安全性</span><span class="sxs-lookup"><span data-stu-id="e567d-129">Basic dimension security</span></span>  
  
1.  <span data-ttu-id="e567d-130">在中 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ，连接到实例 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ，在对象资源管理器中展开相应数据库的 "**角色**"，然后单击 "数据库角色" (或 "创建新的数据库角色) "。</span><span class="sxs-lookup"><span data-stu-id="e567d-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], expand **Roles** for the appropriate database in Object Explorer, and then click a database role (or create a new database role).</span></span>  
  
     <span data-ttu-id="e567d-131">此角色应已具有对多维数据集的读取访问权限。</span><span class="sxs-lookup"><span data-stu-id="e567d-131">The role should already have read access to the cube.</span></span> <span data-ttu-id="e567d-132">有关详细信息，请参阅 [授予多维数据集或模型权限 (Analysis Services)](grant-cube-or-model-permissions-analysis-services.md) 。</span><span class="sxs-lookup"><span data-stu-id="e567d-132">See [Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) if you need help with this step.</span></span>  
  
2.  <span data-ttu-id="e567d-133">在 "**维度数据**" "  |  **基本**" 上，选择要为其设置权限的维度。</span><span class="sxs-lookup"><span data-stu-id="e567d-133">On **Dimension Data** | **Basic**, select the dimension for which you are setting permissions.</span></span>  
  
3.  <span data-ttu-id="e567d-134">选择属性层次结构。</span><span class="sxs-lookup"><span data-stu-id="e567d-134">Choose the attribute hierarchy.</span></span> <span data-ttu-id="e567d-135">并非所有属性都可用。</span><span class="sxs-lookup"><span data-stu-id="e567d-135">Not all attributes will be available.</span></span> <span data-ttu-id="e567d-136">只有那些具有“AttributeHierarchyEnabled” \*\*\*\* 的属性才出现在 \*\*\*\* “属性层次结构”列表中。</span><span class="sxs-lookup"><span data-stu-id="e567d-136">Only those attributes having **AttributeHierarchyEnabled** appear in the **Attribute Hierarchy** list.</span></span>  
  
4.  <span data-ttu-id="e567d-137">选择要允许或拒绝访问的成员类型。</span><span class="sxs-lookup"><span data-stu-id="e567d-137">Choose which members to allow or deny access.</span></span> <span data-ttu-id="e567d-138">默认情况下，通过“选择所有成员” \*\*\*\* 选项允许访问。</span><span class="sxs-lookup"><span data-stu-id="e567d-138">Allowing access, through the **Select all members** option, is the default.</span></span> <span data-ttu-id="e567d-139">建议保持此默认设置，然后清除通过此角色对“成员身份” \*\*\*\* 窗格中的 Windows 用户和组帐户不可见的个别成员。</span><span class="sxs-lookup"><span data-stu-id="e567d-139">We suggest you keep this default and then clear individual members that should not be visible to the Windows user and group accounts in the **Memberships** pane via this role.</span></span> <span data-ttu-id="e567d-140">这样做的好处在于，在未来处理操作中添加的新成员将自动对通过该角色进行连接的人员可用。</span><span class="sxs-lookup"><span data-stu-id="e567d-140">The advantage is that new members added in future processing operations are automatically available to people connecting through this role.</span></span>  
  
     <span data-ttu-id="e567d-141">或者，你可以“取消选择所有成员” \*\*\*\* 以撤消所有访问权限，然后选择要允许的成员。</span><span class="sxs-lookup"><span data-stu-id="e567d-141">Alternatively, you can **Deselect all members** to revoke access overall, and then pick which members to allow.</span></span> <span data-ttu-id="e567d-142">在未来处理操作中，新成员将不可见，直到手动编辑维度数据安全性以允许对其进行访问。</span><span class="sxs-lookup"><span data-stu-id="e567d-142">In future processing operations, new members are not visible until you manually edit dimension data security to allow access to them.</span></span>  
  
5.  <span data-ttu-id="e567d-143">（可选）单击 "**高级**" 以启用 `Visual Totals` 此属性层次结构。</span><span class="sxs-lookup"><span data-stu-id="e567d-143">Optionally, click **Advanced** to enable `Visual Totals` for this attribute hierarchy.</span></span> <span data-ttu-id="e567d-144">此选项根据通过该角色可用的成员重新计算聚合。</span><span class="sxs-lookup"><span data-stu-id="e567d-144">This option recalculates aggregations based on the members available through the role.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e567d-145">应用剪裁维度成员的权限时，不会自动重新计算聚合合计。</span><span class="sxs-lookup"><span data-stu-id="e567d-145">When applying permissions that trim dimension members, aggregated totals are not recalculated automatically.</span></span> <span data-ttu-id="e567d-146">假设在 `All` 应用权限之前，属性层次结构的成员返回的计数为200。</span><span class="sxs-lookup"><span data-stu-id="e567d-146">Suppose the `All` member of an attribute hierarchy returns a count of 200 before permissions are applied.</span></span> <span data-ttu-id="e567d-147">应用拒绝访问某些成员的权限之后， `All` 即使对用户可见的成员值要少得多，也仍会返回200。</span><span class="sxs-lookup"><span data-stu-id="e567d-147">After applying permissions that deny access to some members, `All` still returns 200, even though the member values visible to the user are much less.</span></span> <span data-ttu-id="e567d-148">为了避免混淆多维数据集的使用者，可以将 `All` 成员配置为仅是角色成员的成员的聚合，而不是属性层次结构的所有成员的聚合。</span><span class="sxs-lookup"><span data-stu-id="e567d-148">To avoid confusing the consumers of your cube, you can configure the `All` member be the aggregate of just those members to which role members, rather than the aggregate of all of the members of the attribute hierarchy.</span></span> <span data-ttu-id="e567d-149">若要调用此行为，可以 `Visual Totals` 在配置维度安全性时在 "**高级**" 选项卡上启用。</span><span class="sxs-lookup"><span data-stu-id="e567d-149">To invoke this behavior, you can enable `Visual Totals` on the **Advanced** tab when configuring dimension security.</span></span> <span data-ttu-id="e567d-150">启用后，将在查询时间计算聚合，而不是从预先计算的聚合中检索。</span><span class="sxs-lookup"><span data-stu-id="e567d-150">Once enabled, the aggregate is calculated at query time rather than retrieved from pre-calculated aggregations.</span></span> <span data-ttu-id="e567d-151">这对查询性能有显著影响，因此仅在必要时使用。</span><span class="sxs-lookup"><span data-stu-id="e567d-151">This can have a noticeable effect on query performance, so use it only when necessary.</span></span>  
  
## <a name="hiding-measures"></a><span data-ttu-id="e567d-152">隐藏度量值</span><span class="sxs-lookup"><span data-stu-id="e567d-152">Hiding measures</span></span>  
 <span data-ttu-id="e567d-153">在 [授予单元数据的自定义访问权限 (Analysis Services)](grant-custom-access-to-cell-data-analysis-services.md)中，已介绍了完全隐藏度量值的所有可视方面（不只其单元数据）要求具有对维度成员的权限。</span><span class="sxs-lookup"><span data-stu-id="e567d-153">In [Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md), it was explained that fully hiding all visual aspects of a measure, and not just its cell data, requires permissions on dimension members.</span></span> <span data-ttu-id="e567d-154">本节将介绍如何拒绝访问度量值的对象元数据。</span><span class="sxs-lookup"><span data-stu-id="e567d-154">This section explains how to deny access to the object metadata of a measure.</span></span>  
  
1.  <span data-ttu-id="e567d-155">在**维度数据**"  |  **基本**" 上，向下滚动到 "维度" 列表，直到到达多维数据集维度，然后选择 "**度量值维度**"。</span><span class="sxs-lookup"><span data-stu-id="e567d-155">On **Dimension Data** | **Basic**, scroll down the Dimension list until you reach cube dimensions, and then select **Measures Dimension**.</span></span>  
  
2.  <span data-ttu-id="e567d-156">从度量值列表中，清除不应对通过该角色连接的用户显示的度量值复选框。</span><span class="sxs-lookup"><span data-stu-id="e567d-156">From the list of measures, clear the check box for measures that should not appear to users connecting via this role.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e567d-157">检查先决条件，了解如何标识可能中断角色安全性的度量值。</span><span class="sxs-lookup"><span data-stu-id="e567d-157">Check the Prerequisites to learn how to identify measures that can break role security.</span></span>  
  
## <a name="advanced-dimension-security"></a><span data-ttu-id="e567d-158">高级维度安全性</span><span class="sxs-lookup"><span data-stu-id="e567d-158">Advanced dimension security</span></span>  
 <span data-ttu-id="e567d-159">如果您具备 MDX 专业知识，另一种方法则是编写 MDX 表达式，设置允许或拒绝访问的成员的标准。</span><span class="sxs-lookup"><span data-stu-id="e567d-159">If you have MDX expertise, another approach is to write MDX expressions that set the criteria for which members are allowed or denied access.</span></span> <span data-ttu-id="e567d-160">单击 "**创建角色**  |  **维度数据**"  |  "**高级**" 以提供该脚本。</span><span class="sxs-lookup"><span data-stu-id="e567d-160">Click **Create Role** | **Dimension Data** | **Advanced** to provide the script.</span></span>  
  
 <span data-ttu-id="e567d-161">可以使用 MDX 生成器编写 MDX 语句。</span><span class="sxs-lookup"><span data-stu-id="e567d-161">You can the MDX Builder to write the MDX statement.</span></span> <span data-ttu-id="e567d-162">有关详细信息，请参阅 [MDX 生成器（Analysis Services -多维数据）](../mdx-builder-analysis-services-multidimensional-data.md)。</span><span class="sxs-lookup"><span data-stu-id="e567d-162">See [MDX Builder &#40;Analysis Services - Multidimensional Data&#41;](../mdx-builder-analysis-services-multidimensional-data.md) for details.</span></span> <span data-ttu-id="e567d-163">**“高级”** 选项卡包含以下选项：</span><span class="sxs-lookup"><span data-stu-id="e567d-163">The **Advanced** tab has the following options:</span></span>  
  
 <span data-ttu-id="e567d-164">**特性**</span><span class="sxs-lookup"><span data-stu-id="e567d-164">**Attribute**</span></span>  
 <span data-ttu-id="e567d-165">选择要管理成员安全性的属性。</span><span class="sxs-lookup"><span data-stu-id="e567d-165">Select the attribute for which you want to manage member security.</span></span>  
  
 <span data-ttu-id="e567d-166">**允许的成员集**</span><span class="sxs-lookup"><span data-stu-id="e567d-166">**Allowed member set**</span></span>  
 <span data-ttu-id="e567d-167">AllowedSet 可以解析为“无成员”（默认）、“全部成员”或“部分成员”。</span><span class="sxs-lookup"><span data-stu-id="e567d-167">The AllowedSet can resolve to no members (default), all members, or some members.</span></span> <span data-ttu-id="e567d-168">如果允许访问某个特性，但未定义允许集的成员，则授予对所有成员的权限。</span><span class="sxs-lookup"><span data-stu-id="e567d-168">If you allow access to an attribute and do not define any members of the allowed set, access to all members is granted.</span></span> <span data-ttu-id="e567d-169">如果允许访问属性并且定义了一组特定属性成员，则只有显式允许的成员才可见。</span><span class="sxs-lookup"><span data-stu-id="e567d-169">If you allow access to an attribute and define a specific set of attribute members, only the explicitly allowed members are visible.</span></span>  
  
 <span data-ttu-id="e567d-170">创建 AllowedSet 会在该属性加入多层层次结构时产生波纹效果。</span><span class="sxs-lookup"><span data-stu-id="e567d-170">Creating an AllowedSet has a ripple effect when the attribute participates in a multi-level hierarchy.</span></span> <span data-ttu-id="e567d-171">例如，假设角色允许访问“华盛顿州”（假设这样一个场景：角色为公司华盛顿州销售部门授予权限）。</span><span class="sxs-lookup"><span data-stu-id="e567d-171">For example, suppose a role allows access to Washington state (assume a scenario where the role is granting permissions to a company's Washington state sales division).</span></span> <span data-ttu-id="e567d-172">对于通过该角色连接的用户，包括上级（美国）或下级（西雅图和雷德蒙德）的查询将只能查看包括华盛顿州在内的链中的成员。</span><span class="sxs-lookup"><span data-stu-id="e567d-172">For people connecting through this role, queries that include ancestors (United States) or descendants (Seattle and Redmond) will only see members in a chain including Washington state.</span></span> <span data-ttu-id="e567d-173">由于其他州未获得显式允许，因此效果将如同其被拒绝访问一样。</span><span class="sxs-lookup"><span data-stu-id="e567d-173">Because other states are not explicitly allowed, the effect will be the same as if they were denied.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e567d-174">如果您定义了一个空集 ({} 属性成员) ，则该属性的成员将对数据库角色可见。</span><span class="sxs-lookup"><span data-stu-id="e567d-174">If you define an empty set ({}) of attribute members, no members of the attribute will be visible to the database role.</span></span> <span data-ttu-id="e567d-175">缺少允许集不会被解释为空集。</span><span class="sxs-lookup"><span data-stu-id="e567d-175">The absence of an allowed set is not interpreted as an empty set.</span></span>  
  
 <span data-ttu-id="e567d-176">**拒绝的成员集**</span><span class="sxs-lookup"><span data-stu-id="e567d-176">**Denied member set**</span></span>  
 <span data-ttu-id="e567d-177">DeniedSet 属性可以解析为“无成员”、“全部成员”（默认）或“部分属性成员”。</span><span class="sxs-lookup"><span data-stu-id="e567d-177">The DeniedSet property can resolve to no members, all members (default), or some attribute members.</span></span> <span data-ttu-id="e567d-178">当拒绝集只包含一组特定属性成员时，将仅对那些特定成员和下级（如果该属性位于多层层次结构中）拒绝访问数据库角色。</span><span class="sxs-lookup"><span data-stu-id="e567d-178">When the denied set contains only a specific set of attribute members, the database role is denied access only to those specific members, as well as descendants if the attribute is in a multi-level hierarchy.</span></span> <span data-ttu-id="e567d-179">以华盛顿州销售部门为例。</span><span class="sxs-lookup"><span data-stu-id="e567d-179">Consider the Washington state sales division example.</span></span> <span data-ttu-id="e567d-180">如果“华盛顿”位于 DeniedSet，则通过该角色连接的用户可以看到除华盛顿及其下级属性以外的所有其他州。</span><span class="sxs-lookup"><span data-stu-id="e567d-180">If Washington is placed in the DeniedSet, people connecting through this role will see all other states except Washington and its descendent attributes.</span></span>  
  
 <span data-ttu-id="e567d-181">回顾上一节可知，拒绝集是一个固定集合。</span><span class="sxs-lookup"><span data-stu-id="e567d-181">Recall from the previous section that the denied set is a fixed collection.</span></span> <span data-ttu-id="e567d-182">如果后续处理时引入了同样应被拒绝访问的新成员，则需编辑该角色，以将这些成员添加到列表。</span><span class="sxs-lookup"><span data-stu-id="e567d-182">If processing subsequently introduces new members that should also be denied access, you will need to edit this role to add those members to the list.</span></span>  
  
 <span data-ttu-id="e567d-183">**默认成员**</span><span class="sxs-lookup"><span data-stu-id="e567d-183">**Default member**</span></span>  
 <span data-ttu-id="e567d-184">如果查询中未明确包含属性，DefaultMember 属性将确定返回到客户端的数据集。</span><span class="sxs-lookup"><span data-stu-id="e567d-184">The DefaultMember property determines the data set returned to a client when an attribute is not explicitly included in a query.</span></span> <span data-ttu-id="e567d-185">如果未显式包含特性，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将使用特性的以下默认成员之一：</span><span class="sxs-lookup"><span data-stu-id="e567d-185">When the attribute is not explicitly included, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses one of the following default members for the attribute:</span></span>  
  
-   <span data-ttu-id="e567d-186">如果数据库角色为特性定义了一个默认成员，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将使用该默认成员。</span><span class="sxs-lookup"><span data-stu-id="e567d-186">If the database role defines a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses this default member.</span></span>  
  
-   <span data-ttu-id="e567d-187">如果数据库角色没有为特性定义默认成员，则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将使用自己为该特性定义的默认成员。</span><span class="sxs-lookup"><span data-stu-id="e567d-187">If the database role does not define a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the default member that is defined for the attribute itself.</span></span> <span data-ttu-id="e567d-188">除非另行指定，否则特性的默认成员为 `All` 成员（特性定义为不可聚合时除外）。</span><span class="sxs-lookup"><span data-stu-id="e567d-188">The default member for an attribute, unless you specify otherwise, is the `All` member (unless the attribute is defined as non-aggregatable).</span></span>  
  
 <span data-ttu-id="e567d-189">例如，假设数据库角色指定 `Male` 为 `Gender` 属性的默认成员。</span><span class="sxs-lookup"><span data-stu-id="e567d-189">For example, suppose a database role specifies `Male` as the default member for the `Gender` attribute.</span></span> <span data-ttu-id="e567d-190">除非查询在显式包含 `Gender` 特性的同时又为此特性指定了其他成员，否则 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 将返回仅包含男性客户的数据集。</span><span class="sxs-lookup"><span data-stu-id="e567d-190">Unless a query both explicitly includes the `Gender` attribute and specifies a different member for this attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would return a data set that included only male customers.</span></span> <span data-ttu-id="e567d-191">有关设置默认成员的详细信息，请参阅 [定义默认成员](attribute-properties-define-a-default-member.md)。</span><span class="sxs-lookup"><span data-stu-id="e567d-191">For more information about setting the default member, see [Define a Default Member](attribute-properties-define-a-default-member.md).</span></span>  
  
 <span data-ttu-id="e567d-192">**启用直观合计**</span><span class="sxs-lookup"><span data-stu-id="e567d-192">**Enable Visual Total**</span></span>  
 <span data-ttu-id="e567d-193">VisualTotals 属性指示是根据所有单元值还是仅根据数据库角色可见的单元值来计算显示的聚合单元值。</span><span class="sxs-lookup"><span data-stu-id="e567d-193">The VisualTotals property indicates whether the aggregated cell values that are displayed are calculated according to all cell values or only according to the cell values that are visible to the database role.</span></span>  
  
 <span data-ttu-id="e567d-194">默认情况下，VisualTotals 属性被禁用 (设置为 `False`) 。</span><span class="sxs-lookup"><span data-stu-id="e567d-194">By default, the VisualTotals property is disabled (set to `False`).</span></span> <span data-ttu-id="e567d-195">此默认设置可以最大程度地利用性能，因为 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 可以快速计算所有单元值的合计值，而不必花时间选择要计算的单元值。</span><span class="sxs-lookup"><span data-stu-id="e567d-195">This default setting maximizes performance because [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can quickly calculate the total of all cell values, instead of having to spend time selecting which cells values to calculate.</span></span>  
  
 <span data-ttu-id="e567d-196">但是，如果用户可以使用聚合集单元值来推导用户的数据库角色无权访问的特性成员的值，则禁用 VisualTotals 属性可能产生安全性问题。</span><span class="sxs-lookup"><span data-stu-id="e567d-196">However, having the VisualTotals property disabled could create a security issue if a user can use the aggregated cell values to deduce values for attribute members to which the user's database role does not have access.</span></span> <span data-ttu-id="e567d-197">例如， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 使用三个特性成员的值来计算一个聚合单元值。</span><span class="sxs-lookup"><span data-stu-id="e567d-197">For example, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the values for three attribute members to calculate an aggregated cell value.</span></span> <span data-ttu-id="e567d-198">数据库角色有权限查看这三个特性成员中的两个。</span><span class="sxs-lookup"><span data-stu-id="e567d-198">The database role has access to view two of these three attribute members.</span></span> <span data-ttu-id="e567d-199">如果使用聚合单元值，此数据库角色的成员将能推导第三个特性成员的值。</span><span class="sxs-lookup"><span data-stu-id="e567d-199">Using the aggregated cell value, a member of this database role would be able to deduce the value for the third attribute member.</span></span>  
  
 <span data-ttu-id="e567d-200">将 VisualTotals 属性设置为 `True` 可以消除这种风险。</span><span class="sxs-lookup"><span data-stu-id="e567d-200">Setting VisualTotals property to `True` can eliminate this risk.</span></span> <span data-ttu-id="e567d-201">如果启用了 VisualTotals 属性，则数据库角色只能查看该角色有权访问的维度成员的聚合合计值。</span><span class="sxs-lookup"><span data-stu-id="e567d-201">When you enable the VisualTotals property, a database role can only view aggregated totals for dimension members to which the role has permission.</span></span>  
  
 <span data-ttu-id="e567d-202">**检查**</span><span class="sxs-lookup"><span data-stu-id="e567d-202">**Check**</span></span>  
 <span data-ttu-id="e567d-203">单击以测试此页面上定义的 MDX 语法。</span><span class="sxs-lookup"><span data-stu-id="e567d-203">Click to test the MDX syntax defined on this page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e567d-204">另请参阅</span><span class="sxs-lookup"><span data-stu-id="e567d-204">See Also</span></span>  
 <span data-ttu-id="e567d-205">[&#40;Analysis Services 授予多维数据集或模型权限&#41;](grant-cube-or-model-permissions-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="e567d-205">[Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) </span></span>  
 <span data-ttu-id="e567d-206">[授予对单元数据的自定义访问权限 &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="e567d-206">[Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span></span>  
 <span data-ttu-id="e567d-207">[授予对数据挖掘结构和模型的权限 &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="e567d-207">[Grant permissions on data mining structures and models &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span></span>  
 [<span data-ttu-id="e567d-208">授予数据源对象的权限 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="e567d-208">Grant permissions on a data source object &#40;Analysis Services&#41;</span></span>](grant-permissions-on-a-data-source-object-analysis-services.md)  
  
  
