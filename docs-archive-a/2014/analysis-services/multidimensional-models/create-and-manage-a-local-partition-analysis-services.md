---
title: 创建和管理本地分区 (Analysis Services) |Microsoft Docs
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- local partitions [Analysis Services]
- partitions [Analysis Services], local
- partitions [Analysis Services], creating
ms.assetid: eaa95278-9ce9-47d5-a6b6-1046e7076599
author: minewiskan
ms.author: owend
ms.openlocfilehash: 7251f9e9422a79c214d27d913112a28ff43d56b1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87577013"
---
# <a name="create-and-manage-a-local-partition-analysis-services"></a><span data-ttu-id="fdc7b-102">创建和管理本地分区 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="fdc7b-102">Create and Manage a Local Partition (Analysis Services)</span></span>
  <span data-ttu-id="fdc7b-103">您可以为度量值组创建更多分区以提高处理性能。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-103">You can create additional partitions for a measure group to improve processing performance.</span></span> <span data-ttu-id="fdc7b-104">通过多个分区，您可以跨本地以及远程服务器上对应数目的物理数据文件分配事实数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-104">Having multiple partitions allows you to allocate fact data across a corresponding number of physical data files on local as well as remote servers.</span></span> <span data-ttu-id="fdc7b-105">在 Analysis Services 中，可以独立和并行处理分区，从而可更好地控制服务器上的处理工作负荷。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-105">In Analysis Services, partitions can be processed independently and in parallel, giving you more control over processing workloads on the server.</span></span>

 <span data-ttu-id="fdc7b-106">可以在模型设计期间在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] 中创建分区，或在部署解决方案后使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 或 XMLA 来创建分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-106">Partitions can be created in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] during model design, or after the solution is deployed using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or XMLA.</span></span> <span data-ttu-id="fdc7b-107">建议您仅选择一种方法。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-107">We recommend that you choose one approach only.</span></span> <span data-ttu-id="fdc7b-108">如果您交替使用这些工具，可能会发现，在随后从 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 重新部署该解决方案时，在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]中对已部署的数据库所进行的更改将被覆盖。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-108">If you alternate between tools, you might find that changes made to a deployed database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] are overwritten when you subsequently redeploy the solution from [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span>

## <a name="before-you-start"></a><span data-ttu-id="fdc7b-109">准备工作</span><span class="sxs-lookup"><span data-stu-id="fdc7b-109">Before you start</span></span>
 <span data-ttu-id="fdc7b-110">检查所用版本是否为 Business Intelligence 或 Enterprise。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-110">Check whether you have either the business intelligence edition or enterprise edition.</span></span> <span data-ttu-id="fdc7b-111">Standard 版不支持多个分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-111">Standard edition does not support multiple partitions.</span></span> <span data-ttu-id="fdc7b-112">若要检查版本，请在中右键单击服务器节点， [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 然后选择 "**报表**" "  |  **常规**"。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-112">To check the edition, right-click the server node in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] and choose **Reports** | **General**.</span></span> <span data-ttu-id="fdc7b-113">有关功能可用性的详细信息，请参阅[SQL Server 2014 的各个版本支持的功能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-113">For more information about feature availability, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

 <span data-ttu-id="fdc7b-114">如果您想以后将分区合并，则从一开始就须知道各分区必须具有相同的聚合设计。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-114">From the outset, it's important to understand that partitions must share the same aggregation design if you want to merge them later.</span></span> <span data-ttu-id="fdc7b-115">仅当分区具有相同的聚合设计和存储模式时，才能将分区合并。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-115">Partitions can be merged only if they have identical aggregation designs and storage modes.</span></span>

> [!TIP]
>  <span data-ttu-id="fdc7b-116">浏览数据源视图 (DSV) 中的数据以了解要进行分区的数据的范围和深度。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-116">Explore the data in Data Source View (DSV) to understand the range and depth of the data you are partitioning.</span></span> <span data-ttu-id="fdc7b-117">例如，如果按日期进行分区，则可以对日期列进行排序以确定每个分区的上限和下限。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-117">For example, if partitioning by date, you can sort on a date column to determine the upper and lower bounds of each partition.</span></span>

## <a name="choose-an-approach"></a><span data-ttu-id="fdc7b-118">选择方法</span><span class="sxs-lookup"><span data-stu-id="fdc7b-118">Choose an approach</span></span>
 <span data-ttu-id="fdc7b-119">创建分区时的最重要问题是将数据分段，以便消除重复的行。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-119">The most important consideration when creating partitions is to segment the data so that there are no duplicate rows.</span></span> <span data-ttu-id="fdc7b-120">必须将数据存储在一个（仅一个）分区中以避免对任何行双重计数。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-120">Data must be stored in one, and only one, partition to avoid double counting any rows.</span></span> <span data-ttu-id="fdc7b-121">因此，通常按“日期”进行分区，这样就可以定义各分区间的清晰边界。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-121">As such, it's common to partition by DATE so that you can define clear boundaries between each partition.</span></span>

 <span data-ttu-id="fdc7b-122">您可以通过两种方法之一跨多个分区分配事实数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-122">You can use either technique to distribute the fact data across multiple partitions.</span></span> <span data-ttu-id="fdc7b-123">以下方法可用于将数据分段。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-123">The following techniques can be used to segment the data.</span></span>

|<span data-ttu-id="fdc7b-124">方法</span><span class="sxs-lookup"><span data-stu-id="fdc7b-124">Technique</span></span>|<span data-ttu-id="fdc7b-125">建议</span><span class="sxs-lookup"><span data-stu-id="fdc7b-125">Recommendations</span></span>|
|---------------|---------------------|
|<span data-ttu-id="fdc7b-126">使用 SQL 查询将事实数据分段</span><span class="sxs-lookup"><span data-stu-id="fdc7b-126">Use SQL queries to segment fact data</span></span>|<span data-ttu-id="fdc7b-127">分区可以来源于 SQL 查询。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-127">Partitions can be sourced from SQL queries.</span></span> <span data-ttu-id="fdc7b-128">处理期间，SQL 查询将会检索数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-128">During processing, the SQL query is to retrieve the data.</span></span> <span data-ttu-id="fdc7b-129">该查询的 WHERE 子句提供了对每个分区的数据进行分段的筛选器。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-129">The query's WHERE clause provides the filter that segments the data for each partition.</span></span> <span data-ttu-id="fdc7b-130">Analysis Services 自动生成查询，但是您必须填入 WHERE 子句以便正确对数据分段。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-130">Analysis Services generates the query for you, but you must fill in the WHERE clause to properly segment the data.</span></span><br /><br /> <span data-ttu-id="fdc7b-131">这种方法的主要优点是可以方便地对单个源表的数据进行分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-131">The primary advantage of this approach is the ease with which you can partition data from a single source table.</span></span> <span data-ttu-id="fdc7b-132">如果所有源数据都源自一个大型事实数据表，则您可以生成查询以将该数据筛选到不同分区中，而不必在数据源视图 (DSV) 中创建其他数据结构。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-132">If all of the source data originates from a large fact table, you can build queries that filter that data into discrete partitions, without having to create additional data structures in the Data Source View (DSV).</span></span><br /><br /> <span data-ttu-id="fdc7b-133">此方法的一个缺点是使用查询会中断分区与 DSV 之间的绑定。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-133">One disadvantage is that using queries will break the binding between the partition and the DSV.</span></span> <span data-ttu-id="fdc7b-134">如果您随后在 Analysis Services 项目中更新 DSV（例如，向该事实数据表添加列），则必须手动为每个分区编辑这些查询以包括进新列。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-134">If you later update the DSV in the Analysis Services project, such as adding columns to the fact table, you must manually edit the queries for each partition to include the new column.</span></span> <span data-ttu-id="fdc7b-135">接下来讨论的第二种方法没有这个缺点。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-135">The second approach, discussed next, does not have this disadvantage.</span></span>|
|<span data-ttu-id="fdc7b-136">使用 DSV 中的表将事实数据分段</span><span class="sxs-lookup"><span data-stu-id="fdc7b-136">Use tables in the DSV to segment fact data</span></span>|<span data-ttu-id="fdc7b-137">可以将分区绑定到 DSV 中的表、命名查询或视图。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-137">You can bind a partition to a table, named query, or view in the DSV.</span></span> <span data-ttu-id="fdc7b-138">作为分区的基础，所有这三项在功能上是等效的。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-138">As the basis of a partition, all three are functionally equivalent.</span></span> <span data-ttu-id="fdc7b-139">整个表、命名查询或视图都向单一分区提供所有数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-139">The entire table, named query, or view provides all of the data to a single partition.</span></span><br /><br /> <span data-ttu-id="fdc7b-140">使用表、视图或命名查询会在 DSV 中放置所有数据选择逻辑，随着时间的推移更便于管理和维护。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-140">Using a table, view, or named query places all of the data selection logic in the DSV, which can be easier to manage and maintain over time.</span></span> <span data-ttu-id="fdc7b-141">此方法的一个重要优点是会保留表绑定。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-141">An important advantage to this approach is that table bindings are preserved.</span></span> <span data-ttu-id="fdc7b-142">如果随后对源表进行更新，则不必修改使用该源表的分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-142">If you update the source table later, you do not have to modify the partitions that use it.</span></span> <span data-ttu-id="fdc7b-143">其次，所有表、命名查询和视图都位于一个公共工作区中，这就使更新更加方便，不必单独打开并编辑分区查询。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-143">Secondly, all of the tables, named queries and views exist in a common work space, making updates more convenient than having to open and edit partition queries individually.</span></span>|

## <a name="option-1-filter-a-fact-table-for-multiple-partitions"></a><span data-ttu-id="fdc7b-144">方法 1：筛选多个分区的事实数据表</span><span class="sxs-lookup"><span data-stu-id="fdc7b-144">Option 1: Filter a Fact Table for Multiple Partitions</span></span>
 <span data-ttu-id="fdc7b-145">若要创建多个分区，首先要修改默认分区的 **“源”** 属性。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-145">To create multiple partitions, you begin by modifying the **Source** property of the default partition.</span></span> <span data-ttu-id="fdc7b-146">默认情况下，将使用绑定到 DSV 中单个表的单个分区来创建度量值组。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-146">By default, a measure group is created using a single partition that is bound to a single table in the DSV.</span></span> <span data-ttu-id="fdc7b-147">在添加更多分区之前，必须首先修改原始分区以仅包含一部分事实数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-147">Before you can add more partitions, you must first modify the original partition to contain just a portion of the fact data.</span></span> <span data-ttu-id="fdc7b-148">随后可以继续创建其他分区以存储其余数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-148">You can then proceed to create additional partitions for storing the remainder of the data.</span></span>

 <span data-ttu-id="fdc7b-149">对筛选器进行构造，使得数据不会在各分区中重复。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-149">Construct your filters such that data is not duplicated among the partitions.</span></span> <span data-ttu-id="fdc7b-150">分区的筛选指定事实数据表中哪些数据应用于分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-150">A partition's filter specifies which data in the fact table is used in the partition.</span></span> <span data-ttu-id="fdc7b-151">多维数据集中对于所有分区的筛选必须从事实数据表中提取互斥的数据集。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-151">It is important that the filters for all partitions in a cube extract mutually exclusive datasets from the fact table.</span></span> <span data-ttu-id="fdc7b-152">如果同一事实数据出现在多个分区中，则可能会对该事实数据双重计数。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-152">The same fact data might be double-counted if it appears in multiple partitions.</span></span>

1.  <span data-ttu-id="fdc7b-153">在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] 中的解决方案资源管理器中，双击该多维数据集以在多维数据集设计器中将其打开，然后单击“分区”选项卡。\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="fdc7b-153">In [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], in Solution Explorer, double-click the cube to open it in Cube Designer, and then click the **Partitions** tab.</span></span>

2.  <span data-ttu-id="fdc7b-154">展开要添加分区的度量值组。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-154">Expand the measure group for which are adding partitions.</span></span> <span data-ttu-id="fdc7b-155">默认情况下，每个度量值组具有一个分区，此分区绑定到 DSV 中的事实数据表。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-155">By default, each measure group has one partition, bound to a fact table in the DSV.</span></span>

3.  <span data-ttu-id="fdc7b-156">在“源”列中，单击浏览 (</span><span class="sxs-lookup"><span data-stu-id="fdc7b-156">In the Source column, click the browse (.</span></span> <span data-ttu-id="fdc7b-157">.) 按钮打开“分区源”对话框。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-157">.) button to open the Partition Source dialog box.</span></span>

     <span data-ttu-id="fdc7b-158">![“分区”窗格中的源列](../media/ssas-partitionsource.png "“分区”窗格中的源列")</span><span class="sxs-lookup"><span data-stu-id="fdc7b-158">![Source column in Partition pane](../media/ssas-partitionsource.png "Source column in Partition pane")</span></span>

4.  <span data-ttu-id="fdc7b-159">在“绑定类型”中，选择 **“查询绑定”**。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-159">In Binding Type, select **Query Binding**.</span></span> <span data-ttu-id="fdc7b-160">将自动显示用于选择数据的 SQL 查询。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-160">The SQL query that selects the data appears automatically.</span></span>

5.  <span data-ttu-id="fdc7b-161">在底部的 WHERE 子句中，添加用于将此分区的数据分段的筛选器。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-161">In the WHERE clause at the bottom, add a filter that segments data for this partition.</span></span>

     <span data-ttu-id="fdc7b-162">WHERE 子句语法的示例如 `WHERE OrderDateKey >= '20060101'` 或 `WHERE OrderDateKey BETWEEN '20051001' AND '20051201'`。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-162">Examples of WHERE clause syntax include `WHERE OrderDateKey >= '20060101'` or `WHERE OrderDateKey BETWEEN '20051001' AND '20051201'`.</span></span> <span data-ttu-id="fdc7b-163">有关其他示例，请参阅 [WHERE (Transact-SQL)](/sql/t-sql/queries/where-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-163">For other examples, see [WHERE &#40;Transact-SQL&#41;](/sql/t-sql/queries/where-transact-sql).</span></span>

     <span data-ttu-id="fdc7b-164">请注意，下列筛选器在每个集合内是互斥的：</span><span class="sxs-lookup"><span data-stu-id="fdc7b-164">Notice that the following filters are mutually exclusive within each set:</span></span>

    |||
    |-|-|
    |<span data-ttu-id="fdc7b-165">第 1 集合：</span><span class="sxs-lookup"><span data-stu-id="fdc7b-165">Set 1:</span></span>|<span data-ttu-id="fdc7b-166">"SaleYear" = 2012</span><span class="sxs-lookup"><span data-stu-id="fdc7b-166">"SaleYear" = 2012</span></span><br /><br /> <span data-ttu-id="fdc7b-167">"SaleYear" = 2013</span><span class="sxs-lookup"><span data-stu-id="fdc7b-167">"SaleYear" = 2013</span></span>|
    |<span data-ttu-id="fdc7b-168">第 2 集合：</span><span class="sxs-lookup"><span data-stu-id="fdc7b-168">Set 2:</span></span>|<span data-ttu-id="fdc7b-169">"Continent" = 'NorthAmerica'</span><span class="sxs-lookup"><span data-stu-id="fdc7b-169">"Continent" = 'NorthAmerica'</span></span><br /><br /> <span data-ttu-id="fdc7b-170">"Continent" = 'Europe'</span><span class="sxs-lookup"><span data-stu-id="fdc7b-170">"Continent" = 'Europe'</span></span><br /><br /> <span data-ttu-id="fdc7b-171">"Continent" = 'SouthAmerica'</span><span class="sxs-lookup"><span data-stu-id="fdc7b-171">"Continent" = 'SouthAmerica'</span></span>|
    |<span data-ttu-id="fdc7b-172">第 3 集合：</span><span class="sxs-lookup"><span data-stu-id="fdc7b-172">Set 3:</span></span>|<span data-ttu-id="fdc7b-173">"Country" = 'USA'</span><span class="sxs-lookup"><span data-stu-id="fdc7b-173">"Country" = 'USA'</span></span><br /><br /> <span data-ttu-id="fdc7b-174">"Country" = 'Mexico'</span><span class="sxs-lookup"><span data-stu-id="fdc7b-174">"Country" = 'Mexico'</span></span><br /><br /> <span data-ttu-id="fdc7b-175">("Country" <> 'USA' AND "Country" <> 'Mexico')</span><span class="sxs-lookup"><span data-stu-id="fdc7b-175">("Country" <> 'USA' AND "Country" <> 'Mexico')</span></span>|

6.  <span data-ttu-id="fdc7b-176">单击 **“检查”** 检查语法错误，然后单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-176">Click **Check** to check for syntax errors, and then click **OK**.</span></span>

7.  <span data-ttu-id="fdc7b-177">重复前面的步骤以创建其余分区，每次修改 WHERE 子句都选择下一个数据切片。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-177">Repeat the previous steps to create the remaining partitions, modifying the WHERE clause each time to select the next data slice.</span></span>

8.  <span data-ttu-id="fdc7b-178">部署解决方案或对分区进行处理以加载数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-178">Deploy the solution or process the partition to load the data.</span></span> <span data-ttu-id="fdc7b-179">请确保处理所有分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-179">Be sure to process all partitions.</span></span>

9. <span data-ttu-id="fdc7b-180">浏览该多维数据集以验证是否返回了正确的数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-180">Browse the cube to verify the correct data is returned.</span></span>

 <span data-ttu-id="fdc7b-181">在您拥有一个使用多个度量值组的度量值组后，可以在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]中创建其他分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-181">After you have a measure group that uses multiple measure groups, you can create additional partitions in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="fdc7b-182">在一个度量值组下，右键单击“分区”文件夹，然后选择“新建分区”以启动向导。\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="fdc7b-182">Under a measure group, right-click the Partitions folder and select **New Partitions** to start the wizard.</span></span>

> [!NOTE]
>  <span data-ttu-id="fdc7b-183">您无需筛选分区中的数据，而是可以使用同一查询在 DSV 中创建命名查询，然后使分区基于该命名查询。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-183">Instead of filtering data in a partition, you can use the same query to create a name query in the DSV, and then base the partition on the named query.</span></span>

## <a name="option-2-use-tables-views-or-named-queries"></a><span data-ttu-id="fdc7b-184">方法 2：使用表、视图或命名查询</span><span class="sxs-lookup"><span data-stu-id="fdc7b-184">Option 2: Use Tables, Views, or Named Queries</span></span>
 <span data-ttu-id="fdc7b-185">如果 DSV 以将事实数据组织到各个表中（例如，按年或按季度），则您可以基于某个表来创建分区，其中每个分区都具有自己的数据源表。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-185">If the DSV already organizes facts into individual tables (for example, by year or quarter), you can create partitions based on an individual table, where each partition has its own data source table.</span></span> <span data-ttu-id="fdc7b-186">这基本上是对度量值组默认进行分区的方式，但是在具有多个分区时，您需要将原始分区细分为多个分区，并将每个新的分区映射到提供数据的数据源表。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-186">This is essentially how measure groups are partitioned by default but in the case of multiple partitions, you break the original partition into multiple partitions, and map each new partition to the data source table providing the data.</span></span>

 <span data-ttu-id="fdc7b-187">视图和命名查询在功能上与表是等效的，原因是所有三个对象都在 DSV 中进行定义，并使用“分区源”对话框中的“表绑定”选项绑定到分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-187">Views and named queries are functional equivalent to tables, in that all three objects are defined in the DSV and bound to a partition using the Table Binding option in the Partition Source dialog box.</span></span> <span data-ttu-id="fdc7b-188">您可以创建视图或命名查询以生成每个分区所需的数据段。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-188">You can create a view or named query to generate the data segment needed for each partition.</span></span> <span data-ttu-id="fdc7b-189">有关详细信息，请参阅[在数据源视图中定义命名查询 (Analysis Services)](define-named-queries-in-a-data-source-view-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-189">For more information, see [Define Named Queries in a Data Source View &#40;Analysis Services&#41;](define-named-queries-in-a-data-source-view-analysis-services.md).</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="fdc7b-190">在 DSV 中手动为分区创建互斥的命名查询时，请确保分区的组合数据包含您希望包括在多维数据集中的度量值组中的所有数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-190">When you create mutually exclusive named queries for partitions in a DSV, ensure that the combined data for the partitions includes all data from a measure group that you want to include in the cube.</span></span> <span data-ttu-id="fdc7b-191">请确保没有让默认分区基于该度量值组的整个表，否则，基于该查询的分区将会与基于完整表的查询有重叠部分。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-191">Make sure that you do not leave a default partition based on the entire table for the measure group, or else the query based partitions will overlap the query based on the complete table.</span></span>

1.  <span data-ttu-id="fdc7b-192">创建一个或多个命名查询以用作分区源。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-192">Create one or more named queries to use as the partition source.</span></span> <span data-ttu-id="fdc7b-193">有关详细信息，请参阅[在数据源视图中定义命名查询 (Analysis Services)](define-named-queries-in-a-data-source-view-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-193">For more information, see [Define Named Queries in a Data Source View &#40;Analysis Services&#41;](define-named-queries-in-a-data-source-view-analysis-services.md).</span></span>

     <span data-ttu-id="fdc7b-194">该命名查询必须基于与该度量值组关联的事实数据表。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-194">The named query must be based on the fact table associated with the measure group.</span></span> <span data-ttu-id="fdc7b-195">例如，如果对 FactInternetSales 度量值组进行分区，则 DSV 中的命名查询必须在 FROM 语句中指定 FactInternetSales 表。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-195">For example, if you are partitioning the FactInternetSales measure group, the named queries in the DSV must specify the FactInternetSales table in the FROM statement.</span></span>

2.  <span data-ttu-id="fdc7b-196">在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] 中的解决方案资源管理器中，双击该多维数据集以在多维数据集设计器中将其打开，然后单击“分区”选项卡。\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="fdc7b-196">In [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], in Solution Explorer, double-click the cube to open it in Cube Designer, and then click the **Partitions** tab.</span></span>

3.  <span data-ttu-id="fdc7b-197">展开要添加分区的度量值组。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-197">Expand the measure group for which are adding partitions.</span></span>

4.  <span data-ttu-id="fdc7b-198">单击 **“新建分区”** 以启动分区向导。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-198">Click **New Partition** to start the Partition Wizard.</span></span> <span data-ttu-id="fdc7b-199">如果您使用绑定到该度量值组的事实数据表创建了命名查询，则应看到在上一步骤中创建的每个命名查询。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-199">If you created the named queries using the fact table bound to the measure group, you should see each of the named queries you created in the previous step.</span></span>

5.  <span data-ttu-id="fdc7b-200">在“指定源信息”中，选择在上一步骤中创建的一个命名查询。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-200">In Specify Source Information, choose one of the named queries you created in a previous step.</span></span> <span data-ttu-id="fdc7b-201">如果您没有看到任何命名查询，则返回到 DSV，然后检查 FROM 语句。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-201">If you do not see any named queries, go back to the DSV and check the FROM statement.</span></span>

6.  <span data-ttu-id="fdc7b-202">单击 **“下一步”** 接受每个后续页的默认值。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-202">Click **Next** to accept the default values for each subsequent page.</span></span>

7.  <span data-ttu-id="fdc7b-203">在最后的“完成向导”页上，为分区提供一个描述性名称。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-203">On the last page, Completing the Wizard, give the partition a descriptive name.</span></span>

8.  <span data-ttu-id="fdc7b-204">单击“完成”。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-204">Click **Finish**.</span></span>

9. <span data-ttu-id="fdc7b-205">重复前面的步骤以创建其余分区，每次选择不同的命名查询以选择下一个数据切片。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-205">Repeat the previous steps to create the remaining partitions, choosing a different named query each time to select the next data slice.</span></span>

10. <span data-ttu-id="fdc7b-206">部署解决方案或对分区进行处理以加载数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-206">Deploy the solution or process the partition to load the data.</span></span> <span data-ttu-id="fdc7b-207">请确保处理所有分区。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-207">Be sure to process all partitions.</span></span>

11. <span data-ttu-id="fdc7b-208">浏览该多维数据集以验证是否返回了正确的数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-208">Browse the cube to verify the correct data is returned.</span></span>

## <a name="next-step"></a><span data-ttu-id="fdc7b-209">下一步</span><span class="sxs-lookup"><span data-stu-id="fdc7b-209">Next Step</span></span>
 <span data-ttu-id="fdc7b-210">在为分区创建互斥查询时，应确保组合分区数据包含需要多维数据集包含的所有数据。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-210">When you create mutually exclusive queries for partitions, ensure that the combined partition data includes all data you want to include in the cube.</span></span>

 <span data-ttu-id="fdc7b-211">在最后一个步骤中，通常需要删除基于表本身的默认分区（如果该分区仍存在），否则基于分区的查询将与基于完整表的查询重叠。</span><span class="sxs-lookup"><span data-stu-id="fdc7b-211">As a final step, you normally want to remove the default partition that was based on the table itself (if it still exists), or else the query based partitions will overlap the query based on the complete table.</span></span>

## <a name="see-also"></a><span data-ttu-id="fdc7b-212">另请参阅</span><span class="sxs-lookup"><span data-stu-id="fdc7b-212">See Also</span></span>
 <span data-ttu-id="fdc7b-213">[分区 &#40;Analysis Services 多维数据&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) [远程分区](../multidimensional-models-olap-logical-cube-objects/partitions-remote-partitions.md)[在 ANALYSIS SERVICES 中合并分区 &#40;SSAS-多维&#41;](merge-partitions-in-analysis-services-ssas-multidimensional.md)</span><span class="sxs-lookup"><span data-stu-id="fdc7b-213">[Partitions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) [Remote Partitions](../multidimensional-models-olap-logical-cube-objects/partitions-remote-partitions.md) [Merge Partitions in Analysis Services &#40;SSAS - Multidimensional&#41;](merge-partitions-in-analysis-services-ssas-multidimensional.md)</span></span>


