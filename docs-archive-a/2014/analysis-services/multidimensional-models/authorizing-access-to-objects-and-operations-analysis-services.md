---
title: 授权 (Analysis Services) 的对象和操作的访问权限 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.roledesignerdialog.membership.f1
- sql12.asvs.roledesignerdialog.general.f1
helpviewer_keywords:
- access rights [Analysis Services], users
- permissions [Analysis Services], users
- security [Analysis Services], user access
- user access rights [Analysis Services]
- granting permissions [Analysis Services], users
ms.assetid: af28524e-5eca-4dce-a050-da4f406ee1c7
author: minewiskan
ms.author: owend
ms.openlocfilehash: 34a91283d735730bcc5f011377b1f1e729e7e753
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87693553"
---
# <a name="authorizing-access-to-objects-and-operations-analysis-services"></a><span data-ttu-id="3dc3f-102">授予对对象和操作的访问权限 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="3dc3f-102">Authorizing access to objects and operations (Analysis Services)</span></span>
  <span data-ttu-id="3dc3f-103">非管理用户对 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库内的多维数据集、维度和挖掘模型的访问权限可通过一个或多个数据库角色的成员身份获得。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-103">Non-administrative user access to cubes, dimensions, and mining models within an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database is granted through membership in one or more database roles.</span></span> [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="3dc3f-104">管理员创建这些数据库角色，从而授予对 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 对象的读取或读/写权限，然后向每个角色分配 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 用户和组。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-104">administrators create these database roles, granting Read or Read/Write permissions on [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] objects, and then assigning [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows users and groups to each role.</span></span>  
  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="3dc3f-105">通过将与用户或组所属的每个数据库角色关联的权限组合起来，以此确定特定 Windows 用户或组的有效权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-105">determines the effective permissions for a specific Windows user or group by combining the permissions that are associated with each database role to which the user or group belongs.</span></span> <span data-ttu-id="3dc3f-106">因此，如果一个数据库角色没有授予用户或组对维度、度量值或属性的查看权限，但另一个数据库角色授予了该用户或组此项权限，则该用户或组将有权查看对象。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-106">As a result, if one database role does not give a user or group permission to view a dimension, measure, or attribute, but a different database role does give that user or group permission, the user or group will have permission to view the object.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3dc3f-107">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 服务器管理员角色的成员和具有“完全控制”（管理员）权限的数据库角色成员可以访问数据库中的所有数据和元数据，并且查看特定对象时无需额外权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-107">Members of the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] Server Administrator role and members of a database role having Full Control (Administrator) permissions can access all data and metadata in the database and need no additional permissions to view specific objects.</span></span> <span data-ttu-id="3dc3f-108">而且，不能拒绝 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 服务器角色的成员访问任何数据库中任何对象，也不能拒绝在数据库中具有“完全控制”（管理员）权限的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 数据库角色的成员访问该数据库中的任何对象。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-108">Moreover, members of the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] server role cannot be denied access to any object in any database, and members of an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database role that has Full Control (Administrator) permissions within a database cannot be denied access to any object within that database.</span></span> <span data-ttu-id="3dc3f-109">可通过具有较少权限的单独角色对专门的管理操作（如处理）进行授权。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-109">Specialized administrative operations, such as processing, can be authorized through separate roles having less permission.</span></span> <span data-ttu-id="3dc3f-110">有关详细信息，请参阅[授予处理权限 (Analysis Services)](grant-process-permissions-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-110">See [Grant process permissions &#40;Analysis Services&#41;](grant-process-permissions-analysis-services.md) for details.</span></span>  
  
## <a name="list-roles-defined-for-your-database"></a><span data-ttu-id="3dc3f-111">列出为你的数据库所定义的角色</span><span class="sxs-lookup"><span data-stu-id="3dc3f-111">List roles defined for your database</span></span>  
 <span data-ttu-id="3dc3f-112">管理员可以在 SQL Server Management Studio 中运行一个简单的 DMV 查询，获取在服务器上定义的全部角色的列表。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-112">Administrators can run a simple DMV query in SQL Server Management Studio to get a list of all roles defined on the server.</span></span>  
  
1.  <span data-ttu-id="3dc3f-113">在 SSMS 中，右键单击数据库，然后选择 "**新建查询**  |  **MDX**"。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-113">In SSMS, right-click a database and select **New Query** | **MDX**.</span></span>  
  
2.  <span data-ttu-id="3dc3f-114">键入以下查询并按下 F5 执行：</span><span class="sxs-lookup"><span data-stu-id="3dc3f-114">Type the following query and press F5 to execute:</span></span>  
  
    ```sql  
    Select * from $SYSTEM.DBSCHEMA_CATALOGS  
    ```  
  
     <span data-ttu-id="3dc3f-115">结果包括数据库名称、说明、角色名称和上次修改的日期。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-115">Results include the database name, description, role name, and the date last modified.</span></span> <span data-ttu-id="3dc3f-116">将此信息用作起点，你可以继续进入到单独数据库以检查特定角色的成员身份和权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-116">Using this information as a starting point, you can proceed to individual databases to check membership and permissions of a specific role.</span></span>  
  
## <a name="top-down-overview-of-analysis-services-authorization"></a><span data-ttu-id="3dc3f-117">Analysis Services 授权的自上而下的概述</span><span class="sxs-lookup"><span data-stu-id="3dc3f-117">Top-down overview of Analysis Services authorization</span></span>  
 <span data-ttu-id="3dc3f-118">本节涵盖了配置权限的基本工作流。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-118">This section covers the basic workflow for configuring permissions.</span></span>  
  
 <span data-ttu-id="3dc3f-119">**步骤 1：服务器管理**</span><span class="sxs-lookup"><span data-stu-id="3dc3f-119">**Step 1: Server Administration**</span></span>  
  
 <span data-ttu-id="3dc3f-120">作为第一步，请决定谁将具有服务器级别的管理员权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-120">As a first step, decide who will have administrator rights at the server level.</span></span> <span data-ttu-id="3dc3f-121">安装过程中，安装 SQL Server 的本地管理员根据要求需指定一个或多个 Windows 账户作为 Analysis Services 服务器管理员。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-121">During installation, the local administrator who installs SQL Server is required to specify one or more Windows accounts as the Analysis Services server administrator.</span></span> <span data-ttu-id="3dc3f-122">服务器管理员具有对服务器的全部可能的权限，包括查看、修改和删除服务器上的任何对象，或查看关联数据的权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-122">Server administrators have all possible permissions on a server, including the permission to view, modify, and delete any object on the server, or view associated data.</span></span> <span data-ttu-id="3dc3f-123">安装完成后，服务器管理员可以添加或删除账户以更改此角色的成员身份。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-123">After installation is complete, a server administrator can add or remove accounts to change membership of this role.</span></span> <span data-ttu-id="3dc3f-124">有关此权限级别的详细信息，请参阅[授予服务器管理员权限 &#40;Analysis Services&#41;](../instances/grant-server-admin-rights-to-an-analysis-services-instance.md) 。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-124">See [Grant Server Administrator Permissions &#40;Analysis Services&#41;](../instances/grant-server-admin-rights-to-an-analysis-services-instance.md) for details about this permission level.</span></span>  
  
 <span data-ttu-id="3dc3f-125">**步骤 2：数据库管理**</span><span class="sxs-lookup"><span data-stu-id="3dc3f-125">**Step 2: Database Administration**</span></span>  
  
 <span data-ttu-id="3dc3f-126">接下来，创建了表格或多维解决方案后，将其作为数据库部署至服务器。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-126">Next, after a tabular or multidimensional solution is created, it is deployed to the server as a database.</span></span> <span data-ttu-id="3dc3f-127">服务器管理员可以通过定义具有对所讨论数据库的完全控制权限的角色来委托数据库管理任务。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-127">A server administrator can delegate database administration tasks by defining a role that has Full Control permissions for the database in question.</span></span> <span data-ttu-id="3dc3f-128">此角色的成员可以处理或查询该数据库中的对象，以及创建其他角色以访问数据库自身内的多维数据集、维度和其他对象。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-128">Members of this role can process or query objects in the database, as well as create additional roles for accessing cubes, dimensions, and other objects within the database itself.</span></span> <span data-ttu-id="3dc3f-129">有关详细信息，请参阅[授予数据库权限 (Analysis Services)](grant-database-permissions-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-129">See [Grant database permissions &#40;Analysis Services&#41;](grant-database-permissions-analysis-services.md) for more information.</span></span>  
  
 <span data-ttu-id="3dc3f-130">**步骤 3：启用多维数据集或模型访问以查询和处理工作负载**</span><span class="sxs-lookup"><span data-stu-id="3dc3f-130">**Step 3: Enable cube or model access for query and processing workloads**</span></span>  
  
 <span data-ttu-id="3dc3f-131">默认情况下，仅服务器和数据库管理员拥有对多维数据集或表格模型的访问权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-131">By default, only server and database administrators have access to cubes or tabular models.</span></span> <span data-ttu-id="3dc3f-132">将这些数据结构提供给组织中的其他人员需要能够将 Windows 用户和组帐户映射到多维数据集或模型的其他角色分配以及可以指定 `Read` 特权的权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-132">Making these data structures available to other people in your organization requires additional role assignments that map Windows user and group accounts to cubes or models, along with permissions that specify `Read` privileges.</span></span> <span data-ttu-id="3dc3f-133">有关详细信息，请参阅[授予多维数据集或模型权限 (Analysis Services)](grant-cube-or-model-permissions-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-133">See [Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) for details.</span></span>  
  
 <span data-ttu-id="3dc3f-134">处理任务可与其他管理功能隔离，允许服务器和数据库管理员将此任务委派给其他人员，或通过指定运行计划软件的服务帐户配置无人参与的处理。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-134">Processing tasks can be isolated from other administrative functions, allowing server and database administrators to delegate this task to other people, or to configure unattended processing by specifying service accounts that run scheduling software.</span></span> <span data-ttu-id="3dc3f-135">有关详细信息，请参阅[授予处理权限 (Analysis Services)](grant-process-permissions-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-135">See [Grant process permissions &#40;Analysis Services&#41;](grant-process-permissions-analysis-services.md) for details.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3dc3f-136">用户不需要对基础关系数据库（ [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 从该数据库加载其数据）中的关系表的任何权限，也不需要对运行 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 实例的计算机的任何文件级别权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-136">Users do not require any permissions to the relational tables in the underlying relational database from which [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] loads its data, and do not require any file level permissions on the computer on which the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] is running.</span></span>  
  
 <span data-ttu-id="3dc3f-137">**步骤 4（可选）：允许或拒绝访问内部多维数据集对象**</span><span class="sxs-lookup"><span data-stu-id="3dc3f-137">**Step 4 (Optional): Allow or deny access to interior cube objects**</span></span>  
  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="3dc3f-138">为设置单个对象的权限提供了安全设置，其中包括数据模型中的维度成员和单元。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-138">provides security settings for setting permissions on individual objects, including dimension members and cells within a data model.</span></span> <span data-ttu-id="3dc3f-139">有关详细信息，请参阅[授予对维度数据的自定义访问权限 (Analysis Services)](grant-custom-access-to-dimension-data-analysis-services.md) 和[授予单元格数据的自定义访问权限 (Analysis Services)](grant-custom-access-to-cell-data-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-139">For details, see [Grant custom access to dimension data &#40;Analysis Services&#41;](grant-custom-access-to-dimension-data-analysis-services.md) and [Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md).</span></span>  
  
 <span data-ttu-id="3dc3f-140">你还可以根据用户标识更改权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-140">You can also vary permissions based on user identity.</span></span> <span data-ttu-id="3dc3f-141">通常这称为动态安全，可使用 [UserName (MDX)](/sql/mdx/username-mdx) 函数实现</span><span class="sxs-lookup"><span data-stu-id="3dc3f-141">This is often referred to as dynamic security, and is implemented using the [UserName &#40;MDX&#41;](/sql/mdx/username-mdx) function</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="3dc3f-142">最佳做法</span><span class="sxs-lookup"><span data-stu-id="3dc3f-142">Best practices</span></span>  
 <span data-ttu-id="3dc3f-143">要更好地管理权限，建议采取类似于以下所述的方法：</span><span class="sxs-lookup"><span data-stu-id="3dc3f-143">To better manage permissions, we suggest an approach similar to the following:</span></span>  
  
1.  <span data-ttu-id="3dc3f-144">按函数（例如，dbadmin、cubedeveloper、processadmin）创建角色，这样，维护这些角色的任何人都可以一眼看出角色所允许的权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-144">Create roles by function (for example, dbadmin, cubedeveloper, processadmin) so that whoever maintains the roles can see at glance what the role allows.</span></span> <span data-ttu-id="3dc3f-145">正如其他地方所述，你可以在模型定义中定义角色，从而在后续解决方案的部署中保留这些角色。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-145">As noted elsewhere, you can define roles in the model definition, thus preserving those roles over subsequent solution deployments.</span></span>  
  
2.  <span data-ttu-id="3dc3f-146">在 Active Directory 中创建相应的 Windows 安全组，然后在 Active Directory 中维护此安全组，确保它包含适当的个人帐户。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-146">Create a corresponding Windows security group in Active Directory, and then maintain the security group in Active Directory to insure it contains the appropriate individual accounts.</span></span> <span data-ttu-id="3dc3f-147">这就使安全组的成员身份的责任落实到熟悉组织中用于帐户维护的工具和流程的安全专家身上。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-147">This places the responsibility of security group membership on security specialists who are already have proficiency with the tools and processes used for account maintenance in your organization.</span></span>  
  
3.  <span data-ttu-id="3dc3f-148">在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中生成脚本，这样，当模型从其源文件重新部署到服务器时就可以快速复制角色分配。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-148">Generate scripts in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] so that you can quickly replicate role assignments whenever the model is redeployed from its source files to a server.</span></span> <span data-ttu-id="3dc3f-149">有关如何快速生成脚本的详细信息，请参阅[授予多维数据集或模型权限 (Analysis Services)](grant-cube-or-model-permissions-analysis-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-149">See [Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) for details on how to quickly generate a script.</span></span>  
  
4.  <span data-ttu-id="3dc3f-150">采用反映角色范围和成员身份的命名约定。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-150">Adopt a naming convention that reflects the scope and membership of the role.</span></span> <span data-ttu-id="3dc3f-151">只有在设计和管理工具中才能看到角色名，因此请使用适合多维数据集安全专家的命名约定。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-151">Role names are only visible in design and administration tools, so use a naming convention that makes sense to your cube security specialists.</span></span> <span data-ttu-id="3dc3f-152">例如， **processadmin-windowsgroup1** 表示组织中人员的读取访问和处理权限，他们的个人 Windows 用户帐户是 **windowsgroup1** 安全组的成员。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-152">For example, **processadmin-windowsgroup1** indicates read access, plus processing rights, to people in your organization whose individual Windows user accounts are members of the **windowsgroup1** security group.</span></span>  
  
     <span data-ttu-id="3dc3f-153">包含帐户信息有助于跟踪各种角色中所用的帐户。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-153">Including account information can help you keep track of which accounts are used in various roles.</span></span> <span data-ttu-id="3dc3f-154">由于角色可累加，因此与 **windowsgroup1** 关联的组合角色构成了为属于该安全组的人员设置的有效权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-154">Because roles are additive, the combined roles associated with **windowsgroup1** make up the effective permission set for people belonging to that security group.</span></span>  
  
5.  <span data-ttu-id="3dc3f-155">多维数据集开发人员需具有对开发中的模型和数据库的“完全控制”权限，但当数据库推广到生产服务器后，只需具有“读取”权限即可。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-155">Cube developers will require Full Control permissions for models and databases under development, but only need Read permissions once a database is rolled out to a production server.</span></span> <span data-ttu-id="3dc3f-156">请务必为所有方案（包括开发、测试和生产部署）开发角色定义和分配。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-156">Remember to develop role definitions and assignments for all scenarios, including development, test, and production deployments.</span></span>  
  
 <span data-ttu-id="3dc3f-157">使用与此类似的方法最大限度减少改动模型中的角色定义和角色成员身份，使角色分配可视化，从而轻松实现和维护多维数据集权限。</span><span class="sxs-lookup"><span data-stu-id="3dc3f-157">Using an approach like this one minimizes churn to role definitions and role membership in the model, and provides visibility into role assignments that makes cube permissions easier to implement and maintain.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3dc3f-158">另请参阅</span><span class="sxs-lookup"><span data-stu-id="3dc3f-158">See Also</span></span>  
 <span data-ttu-id="3dc3f-159">[&#40;Analysis Services 授予服务器管理员权限&#41;](../instances/grant-server-admin-rights-to-an-analysis-services-instance.md) </span><span class="sxs-lookup"><span data-stu-id="3dc3f-159">[Grant Server Administrator Permissions &#40;Analysis Services&#41;](../instances/grant-server-admin-rights-to-an-analysis-services-instance.md) </span></span>  
 <span data-ttu-id="3dc3f-160">[角色和权限 &#40;Analysis Services&#41;](roles-and-permissions-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="3dc3f-160">[Roles and Permissions &#40;Analysis Services&#41;](roles-and-permissions-analysis-services.md) </span></span>  
 [<span data-ttu-id="3dc3f-161">Analysis Services 支持的身份验证方法</span><span class="sxs-lookup"><span data-stu-id="3dc3f-161">Authentication methodologies supported by Analysis Services</span></span>](../instances/authentication-methodologies-supported-by-analysis-services.md)  
  
  
