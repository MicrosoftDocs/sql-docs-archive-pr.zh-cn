---
title: 在 SSIS 服务器上启用包执行的日志记录 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 8930c63c-bc6f-46c2-b428-b3c29ee89a7d
author: chugugrace
ms.author: chugu
ms.openlocfilehash: bb0ca1e03466e6cad277905093262b9aec048c71
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87587513"
---
# <a name="enable-logging-for-package-execution-on-the-ssis-server"></a><span data-ttu-id="f0984-102">在 SSIS 服务器上启用包执行的日志记录</span><span class="sxs-lookup"><span data-stu-id="f0984-102">Enable Logging for Package Execution on the SSIS Server</span></span>
  <span data-ttu-id="f0984-103">本过程介绍在执行已经部署到 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务器的包时，如何设置或更改该包的日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="f0984-103">This procedure describes how to set or change the logging level for a package when you execute a package that you have deployed to the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] server.</span></span> <span data-ttu-id="f0984-104">在执行包时设置的日志记录级别优先于使用 [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)] 配置的包日志记录。</span><span class="sxs-lookup"><span data-stu-id="f0984-104">The logging level you set when you execute the package overrides the package logging you configure using [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="f0984-105">有关详细信息，请参阅 [在 SQL Server Data Tools 中启用包日志记录](../../2014/integration-services/enable-package-logging-in-sql-server-data-tools.md) 。</span><span class="sxs-lookup"><span data-stu-id="f0984-105">See [Enable Package Logging in SQL Server Data Tools](../../2014/integration-services/enable-package-logging-in-sql-server-data-tools.md) for more information.</span></span>  
  
 <span data-ttu-id="f0984-106">可使用下列方法之一指定日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="f0984-106">You can specify the logging level by using one of the following methods.</span></span> <span data-ttu-id="f0984-107">本主题涵盖第一种方法。</span><span class="sxs-lookup"><span data-stu-id="f0984-107">This topic covers the first method.</span></span>  
  
-   <span data-ttu-id="f0984-108">通过使用“执行包”对话框配置包执行的实例</span><span class="sxs-lookup"><span data-stu-id="f0984-108">Configuring an instance of a package execution by using the Execute Package dialog box</span></span>  
  
-   <span data-ttu-id="f0984-109">通过使用 [catalog.set_execution_parameter_value（SSISDB 数据库）](/sql/integration-services/system-stored-procedures/catalog-set-execution-parameter-value-ssisdb-database)设置执行实例的参数</span><span class="sxs-lookup"><span data-stu-id="f0984-109">Setting parameters for an instance of an execution by using the [catalog.set_execution_parameter_value &#40;SSISDB Database&#41;](/sql/integration-services/system-stored-procedures/catalog-set-execution-parameter-value-ssisdb-database)</span></span>  
  
-   <span data-ttu-id="f0984-110">通过使用“新建作业步骤”对话框配置包执行的 SQL Server 代理作业。</span><span class="sxs-lookup"><span data-stu-id="f0984-110">Configuring a SQL Server Agent job for a package execution by using the New Job Step dialog box.</span></span>  
  
### <a name="to-set-the-logging-level-for-a-package-by-using-the-execute-package-dialog-box"></a><span data-ttu-id="f0984-111">通过使用“执行包”对话框设置包的日志记录级别</span><span class="sxs-lookup"><span data-stu-id="f0984-111">To set the logging level for a package by using the Execute Package dialog box</span></span>  
  
1.  <span data-ttu-id="f0984-112">在 [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]中，导航到对象资源管理器中的包。</span><span class="sxs-lookup"><span data-stu-id="f0984-112">In [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)], navigate to the package in Object Explorer.</span></span>  
  
2.  <span data-ttu-id="f0984-113">右键单击包，然后选择“执行”。</span><span class="sxs-lookup"><span data-stu-id="f0984-113">Right-click the package and select **Execute**.</span></span>  
  
3.  <span data-ttu-id="f0984-114">在 **“执行包”** 对话框中，选择 **“高级”** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="f0984-114">Select the **Advanced** tab in the **Execute Package** dialog box.</span></span>  
  
4.  <span data-ttu-id="f0984-115">在 **“日志记录级别”** 下，选择日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="f0984-115">Under **Logging level**, select the logging level.</span></span> <span data-ttu-id="f0984-116">有关可用值的说明，请参阅下表。</span><span class="sxs-lookup"><span data-stu-id="f0984-116">See the table below for a description of available values.</span></span>  
  
5.  <span data-ttu-id="f0984-117">完成所有其他包配置，然后单击 **“确定”** 运行该包。</span><span class="sxs-lookup"><span data-stu-id="f0984-117">Complete any other package configurations, then click **OK** to run the package.</span></span>  
  
 <span data-ttu-id="f0984-118">以下日志记录级别可用。</span><span class="sxs-lookup"><span data-stu-id="f0984-118">The following logging levels are available.</span></span>  
  
|<span data-ttu-id="f0984-119">“日志记录级别”</span><span class="sxs-lookup"><span data-stu-id="f0984-119">Logging Level</span></span>|<span data-ttu-id="f0984-120">说明</span><span class="sxs-lookup"><span data-stu-id="f0984-120">Description</span></span>|  
|-------------------|-----------------|  
|<span data-ttu-id="f0984-121">无</span><span class="sxs-lookup"><span data-stu-id="f0984-121">None</span></span>|<span data-ttu-id="f0984-122">关闭日志记录。</span><span class="sxs-lookup"><span data-stu-id="f0984-122">Logging is turned off.</span></span> <span data-ttu-id="f0984-123">仅记录包执行状态。</span><span class="sxs-lookup"><span data-stu-id="f0984-123">Only the package execution status is logged.</span></span>|  
|<span data-ttu-id="f0984-124">基本</span><span class="sxs-lookup"><span data-stu-id="f0984-124">Basic</span></span>|<span data-ttu-id="f0984-125">除了自定义事件和诊断事件之外，记录其余所有事件。</span><span class="sxs-lookup"><span data-stu-id="f0984-125">All events are logged, except custom and diagnostic events.</span></span> <span data-ttu-id="f0984-126">这是默认值。</span><span class="sxs-lookup"><span data-stu-id="f0984-126">This is the default value.</span></span>|  
|<span data-ttu-id="f0984-127">性能</span><span class="sxs-lookup"><span data-stu-id="f0984-127">Performance</span></span>|<span data-ttu-id="f0984-128">仅记录性能统计信息、OnError 和 OnWarning 事件。</span><span class="sxs-lookup"><span data-stu-id="f0984-128">Only performance statistics, and OnError and OnWarning events, are logged.</span></span><br /><br /> <span data-ttu-id="f0984-129">**“执行性能”** 报表显示包数据流组件的活动时间和总时间。</span><span class="sxs-lookup"><span data-stu-id="f0984-129">The **Execution Performance** report displays Active Time and Total Time for package data flow components.</span></span> <span data-ttu-id="f0984-130">仅当上次包执行的日志记录级别设置为 **“性能”** 或 **“详细”** 时，此信息才可用。</span><span class="sxs-lookup"><span data-stu-id="f0984-130">This information is available when the logging level of the last package execution was set to **Performance** or **Verbose**.</span></span> <span data-ttu-id="f0984-131">有关详细信息，请参阅 [Reports for the Integration Services Server](../../2014/integration-services/reports-for-the-integration-services-server.md)。</span><span class="sxs-lookup"><span data-stu-id="f0984-131">For more information, see [Reports for the Integration Services Server](../../2014/integration-services/reports-for-the-integration-services-server.md).</span></span><br /><br /> <span data-ttu-id="f0984-132">[catalog.execution_component_phases](/sql/integration-services/system-views/catalog-execution-component-phases) 视图显示数据流组件在执行的每个阶段的开始时间和结束时间。</span><span class="sxs-lookup"><span data-stu-id="f0984-132">The [catalog.execution_component_phases](/sql/integration-services/system-views/catalog-execution-component-phases) view displays the start and end times for the data flow components, for each phase of an execution.</span></span> <span data-ttu-id="f0984-133">仅当包执行的日志记录级别设置为 **“性能”** 或 **“详细”** 时，此视图才会为这些组件显示以上信息。</span><span class="sxs-lookup"><span data-stu-id="f0984-133">This view displays this information for these components only when the logging level of the package execution is set to **Performance** or **Verbose**.</span></span>|  
|<span data-ttu-id="f0984-134">“详细”</span><span class="sxs-lookup"><span data-stu-id="f0984-134">Verbose</span></span>|<span data-ttu-id="f0984-135">记录所有事件，包括自定义事件和诊断事件。</span><span class="sxs-lookup"><span data-stu-id="f0984-135">All events are logged, including custom and diagnostic events.</span></span><br /><br /> <span data-ttu-id="f0984-136">诊断事件的一个例子就是 DiagnosticEx 事件。</span><span class="sxs-lookup"><span data-stu-id="f0984-136">An example of a diagnostic event, is the DiagnosticEx event.</span></span> <span data-ttu-id="f0984-137">每当执行包任务执行子包时，都会记录此事件。</span><span class="sxs-lookup"><span data-stu-id="f0984-137">Whenever an Execute Package task executes a child package, it logs this event.</span></span> <span data-ttu-id="f0984-138">事件消息包含传递给子包的参数值</span><span class="sxs-lookup"><span data-stu-id="f0984-138">The event message consists of the parameter values passed to child packages</span></span><br /><br /> <span data-ttu-id="f0984-139">DiagnosticEx 的消息列的值是 XML 文本。</span><span class="sxs-lookup"><span data-stu-id="f0984-139">The value of the message column for DiagnosticEx is XML text.</span></span> <span data-ttu-id="f0984-140">.</span><span class="sxs-lookup"><span data-stu-id="f0984-140">.</span></span> <span data-ttu-id="f0984-141">若要查看包执行的消息文本，请查询 [catalog.operation_messages（SSISDB 数据库）](/sql/integration-services/system-views/catalog-operation-messages-ssisdb-database)视图。</span><span class="sxs-lookup"><span data-stu-id="f0984-141">To view the message text for a package execution, query the [catalog.operation_messages &#40;SSISDB Database&#41;](/sql/integration-services/system-views/catalog-operation-messages-ssisdb-database) view.</span></span><br /><br /> <span data-ttu-id="f0984-142">注意：自定义事件包括任务记录的那些事件 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="f0984-142">Note: Custom events include those events that are logged by [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] tasks.</span></span> <span data-ttu-id="f0984-143">有关详细信息，请参阅 [Custom Messages for Logging](../../2014/integration-services/custom-messages-for-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="f0984-143">For more information, see [Custom Messages for Logging](../../2014/integration-services/custom-messages-for-logging.md).</span></span><br /><br /> <span data-ttu-id="f0984-144">每当数据流组件向下游组件发送数据时， [catalog.execution_data_statistics](../relational-databases/statistics/statistics.md) 视图就会显示一行。</span><span class="sxs-lookup"><span data-stu-id="f0984-144">The [catalog.execution_data_statistics](../relational-databases/statistics/statistics.md) view displays a row each time a data flow component sends data to a downstream component, for a package execution.</span></span> <span data-ttu-id="f0984-145">日志记录级别必须设置为 **“详细”** ，才能在该视图中捕获此信息。</span><span class="sxs-lookup"><span data-stu-id="f0984-145">The logging level must be set to **Verbose** to capture this information in the view.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="f0984-146">另请参阅</span><span class="sxs-lookup"><span data-stu-id="f0984-146">See Also</span></span>  
 <span data-ttu-id="f0984-147">[Integration Services &#40;SSIS&#41; 日志记录](performance/integration-services-ssis-logging.md) </span><span class="sxs-lookup"><span data-stu-id="f0984-147">[Integration Services &#40;SSIS&#41; Logging](performance/integration-services-ssis-logging.md) </span></span>  
 [<span data-ttu-id="f0984-148">在 SQL Server Data Tools 中启用包日志记录</span><span class="sxs-lookup"><span data-stu-id="f0984-148">Enable Package Logging in SQL Server Data Tools</span></span>](../../2014/integration-services/enable-package-logging-in-sql-server-data-tools.md)  
  
  
