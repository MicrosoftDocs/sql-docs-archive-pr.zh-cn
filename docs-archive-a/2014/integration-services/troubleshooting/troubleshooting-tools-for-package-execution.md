---
title: 包执行的疑难解答工具 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Integration Services packages, troubleshooting
- SSIS packages, troubleshooting
- Integration Services, troubleshooting
- errors [Integration Services], troubleshooting
- packages [Integration Services], troubleshooting
ms.assetid: f18d6ff6-e881-444c-a399-730b52130e7c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: cbb19cddd202ac58cbea5622b4965449c15ba325
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578940"
---
# <a name="troubleshooting-tools-for-package-execution"></a><span data-ttu-id="2b9d6-102">对包执行进行故障排除的工具</span><span class="sxs-lookup"><span data-stu-id="2b9d6-102">Troubleshooting Tools for Package Execution</span></span>
  [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="2b9d6-103">包括可用于在包完成和部署以后的执行过程中进行故障排除的功能和工具。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-103">includes features and tools that you can use to troubleshoot packages when you execute them after they have been completed and deployed.</span></span>  
  
 <span data-ttu-id="2b9d6-104">在设计时， [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 提供了用于暂停包的执行的断点、“进度”窗口和用于在数据通过数据流时查看数据的数据查看器。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-104">At design time, [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] provides breakpoints to pause package execution, the Progress window, and data viewers to watch your data as it passes through the data flow.</span></span> <span data-ttu-id="2b9d6-105">但是，这些功能在包部署后运行包时不再可用。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-105">However, these features are not available when you are running packages that have been deployed.</span></span> <span data-ttu-id="2b9d6-106">用于排除已部署包故障的主要技术如下：</span><span class="sxs-lookup"><span data-stu-id="2b9d6-106">The main techniques for troubleshooting deployed packages are as follows:</span></span>  
  
-   <span data-ttu-id="2b9d6-107">使用事件处理程序捕获和处理包错误。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-107">Catch and handle package errors by using event handlers.</span></span>  
  
-   <span data-ttu-id="2b9d6-108">使用错误输出捕获错误数据。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-108">Capture bad data by using error outputs.</span></span>  
  
-   <span data-ttu-id="2b9d6-109">使用日志记录跟踪包的执行步骤。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-109">Track the steps of package execution by using logging.</span></span>  
  
 <span data-ttu-id="2b9d6-110">还可以使用下列技巧和技术避免正在运行的包的问题</span><span class="sxs-lookup"><span data-stu-id="2b9d6-110">You can also use the following tips and techniques to avoid problems with running packages</span></span>  
  
-   <span data-ttu-id="2b9d6-111">**使用事务帮助确保数据的完整性**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-111">**Help to ensure data integrity by using transactions**.</span></span> <span data-ttu-id="2b9d6-112">有关详细信息，请参阅 [Integration Services 事务](../integration-services-transactions.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-112">For more information, see [Integration Services Transactions](../integration-services-transactions.md).</span></span>  
  
-   <span data-ttu-id="2b9d6-113">**使用检查点从故障点重新启动包**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-113">**Restart packages from the point of failure by using checkpoints**.</span></span> <span data-ttu-id="2b9d6-114">有关详细信息，请参阅 [通过使用检查点重新启动包](../packages/restart-packages-by-using-checkpoints.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-114">For more information, see [Restart Packages by Using Checkpoints](../packages/restart-packages-by-using-checkpoints.md).</span></span>  
  
## <a name="catch-and-handle-package-errors-by-using-event-handlers"></a><span data-ttu-id="2b9d6-115">使用事件处理程序捕获和处理包错误</span><span class="sxs-lookup"><span data-stu-id="2b9d6-115">Catch and Handle Package Errors by Using Event Handlers</span></span>  
 <span data-ttu-id="2b9d6-116">通过使用事件处理程序，您可以响应许多由包和包中的对象引发的事件。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-116">You can respond to the many events that are raised by the package and the objects in the package by using event handlers.</span></span>  
  
-   <span data-ttu-id="2b9d6-117">**创建 OnError 事件的事件处理程序**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-117">**Create an event handler for the OnError event**.</span></span> <span data-ttu-id="2b9d6-118">在事件处理程序中，您可以使用发送邮件任务将故障通知给管理员，使用脚本任务和自定义逻辑获取用于故障排除的系统信息或者清除临时资源或不完整的输出。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-118">In the event handler, you can use a Send Mail task to notify an administrator of the failure, use a Script task and custom logic to obtain system information for troubleshooting, or clean up temporary resources or incomplete output.</span></span> <span data-ttu-id="2b9d6-119">有关详细信息，请参阅 [Integration Services (SSIS) 事件处理程序](../integration-services-ssis-event-handlers.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-119">For more information, see [Integration Services &#40;SSIS&#41; Event Handlers](../integration-services-ssis-event-handlers.md).</span></span>  
  
## <a name="troubleshoot-bad-data-by-using-error-outputs"></a><span data-ttu-id="2b9d6-120">使用错误输出对错误数据进行故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-120">Troubleshoot Bad Data by Using Error Outputs</span></span>  
 <span data-ttu-id="2b9d6-121">您可以使用对许多数据流组件可用的错误输出将包含错误的行定向到单独的目标中，供以后分析。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-121">You can use the error output available on many data flow components to direct rows that contain errors to a separate destination for later analysis.</span></span>  
  
-   <span data-ttu-id="2b9d6-122">**使用错误输出捕获错误数据**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-122">**Capture bad data by using error outputs**.</span></span> <span data-ttu-id="2b9d6-123">将包含错误的行发送到单独的目标（如错误表或文本文件）。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-123">Send rows that contain errors to a separate destination such as an error table or a text file.</span></span> <span data-ttu-id="2b9d6-124">错误输出自动添加两个数值列（包含导致该行被拒绝的错误的编号）以及发生该错误的列的 ID。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-124">The error output automatically adds two numeric columns that contain the number of the error that caused the row to be rejected, and the ID of the column in which the error occurred.</span></span> <span data-ttu-id="2b9d6-125">有关详细信息，请参阅 [数据中的错误处理](../data-flow/error-handling-in-data.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-125">For more information, see [Error Handling in Data](../data-flow/error-handling-in-data.md).</span></span>  
  
-   <span data-ttu-id="2b9d6-126">**向错误输出添加易于理解的信息**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-126">**Add friendly information to the error outputs**.</span></span> <span data-ttu-id="2b9d6-127">除了由错误输出提供的两个数字标识符外，您还可以添加说明性信息以便更容易分析错误输出。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-127">You can make it easier to analyze the error output by adding descriptive information in addition to the two numeric identifiers that are supplied by the error output.</span></span>  
  
     <span data-ttu-id="2b9d6-128">**添加错误说明**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-128">**Add the description of the error**.</span></span> <span data-ttu-id="2b9d6-129">使用脚本组件查找错误说明是很容易的。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-129">It is easy to look up the error description by using a Script component.</span></span> <span data-ttu-id="2b9d6-130">有关详细信息，请参阅[增强脚本组件的错误输出](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-130">For more information, see [Enhancing an Error Output for the Script Component](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span></span>  
  
     <span data-ttu-id="2b9d6-131">**添加错误列的名称**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-131">**Add the name of the error column**.</span></span> <span data-ttu-id="2b9d6-132">在脚本组件中无法轻易查找与错误输出保存的列 ID 对应的列名，需要其他的步骤。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-132">Looking up the column name that corresponds to the column ID saved by the error output cannot easily be done in the Script component and requires additional steps.</span></span> <span data-ttu-id="2b9d6-133">数据流中的每个列 ID 在该数据流任务中都是唯一的，并且设计时在包中保持不变。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-133">Each column ID in a data flow is unique within that Data Flow task, and is persisted in the package at design time.</span></span> <span data-ttu-id="2b9d6-134">建议采用下列方法向错误输出中添加列名。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-134">The following approach is one suggestion for adding the column name to the error output.</span></span> 
  
    1.  <span data-ttu-id="2b9d6-135">**创建列名称的查找表**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-135">**Create a lookup table of column names**.</span></span> <span data-ttu-id="2b9d6-136">创建另一个应用程序，该应用程序使用 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] API 对每个已保存的包、包中的每个数据流、数据流中的每个对象以及数据流对象中的每个输入和输出进行迭代。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-136">Create a separate application that uses the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] API to iterate over each saved package, each data flow in the package, each object in the data flow, and each input and output in the data flow object.</span></span> <span data-ttu-id="2b9d6-137">应用程序应当将每一列的列 ID 和名称以及父数据流任务的 ID 和包的 ID 持久化到查找表。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-137">The application should persist the column ID and name of each column to a lookup table, along with the ID of the parent Data Flow task and the ID of the package.</span></span>  
  
    2.  <span data-ttu-id="2b9d6-138">**将列名称添加到输出**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-138">**Add the column name to the output**.</span></span> <span data-ttu-id="2b9d6-139">将查找转换添加到错误输出中，此错误输出在上述步骤创建的查找表中查找列名。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-139">Add a Lookup transformation to the error output that looks up the column name in the lookup table created in the preceding step.</span></span> <span data-ttu-id="2b9d6-140">查找可以使用错误输出中的列 ID、包 ID（在系统变量 System::PackageID 中）以及数据流任务的 ID（在系统变量 System::TaskID 中）。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-140">The lookup can use the column ID in the error output, the package ID (available in the system variable System::PackageID), and the ID of the Data Flow task (available in the system variable System::TaskID).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-operations-reports"></a><span data-ttu-id="2b9d6-141">使用操作报告对包执行进行故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-141">Troubleshoot Package Execution by Using Operations Reports</span></span>  
 <span data-ttu-id="2b9d6-142">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中提供标准操作报告，帮助您监视部署到 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 目录的 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 包。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-142">Standard operations reports are available in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to help you monitor [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] packages that have been deployed to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] catalog.</span></span> <span data-ttu-id="2b9d6-143">这些包报告有助于您查看包状态和历史记录，并根据需要确定执行失败的原因。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-143">These package reports help you to view package status and history, and, if necessary, identify the cause of failures.</span></span>  
  
 <span data-ttu-id="2b9d6-144">有关详细信息，请参阅 [对包执行进行故障排除的报告](troubleshooting-reports-for-package-execution.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-144">For more information, see [Troubleshooting Reports for Package Execution](troubleshooting-reports-for-package-execution.md).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-ssisdb-views"></a><span data-ttu-id="2b9d6-145">使用 SSISDB 视图对包执行进行故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-145">Troubleshoot Package Execution by Using SSISDB Views</span></span>  
 <span data-ttu-id="2b9d6-146">提供了一些 SSISDB 数据库视图，您可以查询它们来监视包执行和其他操作信息。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-146">A number of SSISDB database views are available that you can query to monitor package execution and other operations information.</span></span> <span data-ttu-id="2b9d6-147">有关详细信息，请参阅[监视包执行和其他操作](../performance/monitor-running-packages-and-other-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-147">For more information, see [Monitoring for Package Executions and Other Operations](../performance/monitor-running-packages-and-other-operations.md).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-logging"></a><span data-ttu-id="2b9d6-148">使用日志记录对包执行进行故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-148">Troubleshoot Package Execution by Using Logging</span></span>  
 <span data-ttu-id="2b9d6-149">通过启用日志记录，您可以跟踪正在运行的包中所发生的大部分问题。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-149">You can track much of what occurs in your running packages by enabling logging.</span></span> <span data-ttu-id="2b9d6-150">日志提供程序捕获有关指定事件的信息供以后分析，并且以数据库表、平面文件、XML 文件或支持的其他输出格式保存该信息。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-150">Log providers capture information about the specified events for later analysis, and save that information in a database table, a flat file, an XML file, or another supported output format.</span></span>  
  
-   <span data-ttu-id="2b9d6-151">**启用日志记录**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-151">**Enable logging**.</span></span> <span data-ttu-id="2b9d6-152">您可以只选择所要捕获的事件以及只选择所要捕获的信息项，以修改日志记录输出。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-152">You can refine the logging output by selecting only the events and only the items of information that you want to capture.</span></span> <span data-ttu-id="2b9d6-153">有关详细信息，请参阅 [Integration Services (SSIS) 日志记录](../performance/integration-services-ssis-logging.md)和 [Integration Services (SSIS) 日志记录](../performance/integration-services-ssis-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-153">For more information, see [Integration Services &#40;SSIS&#41; Logging](../performance/integration-services-ssis-logging.md) and [Integration Services &#40;SSIS&#41; Logging](../performance/integration-services-ssis-logging.md).</span></span>  
  
-   <span data-ttu-id="2b9d6-154">**选择包的“诊断”事件对访问接口问题进行故障排除。**</span><span class="sxs-lookup"><span data-stu-id="2b9d6-154">**Select the package's Diagnostic event to troubleshoot provider issues.**</span></span> <span data-ttu-id="2b9d6-155">一些日志记录消息可以帮助您对包与外部数据源的交互情况进行故障排除。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-155">There are logging messages that help you troubleshoot a package's interaction with external data sources.</span></span> <span data-ttu-id="2b9d6-156">有关详细信息，请参阅 [对包连接进行故障排除的工具](troubleshooting-tools-for-package-connectivity.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-156">For more information, see [Troubleshooting Tools Package Connectivity](troubleshooting-tools-for-package-connectivity.md).</span></span>  
  
-   <span data-ttu-id="2b9d6-157">**增强默认日志记录输出**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-157">**Enhance the default logging output**.</span></span> <span data-ttu-id="2b9d6-158">通常，每次该包运行时日志记录都会向日志记录目标中追加行。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-158">Logging typically appends rows to the logging destination each time that a package is run.</span></span> <span data-ttu-id="2b9d6-159">虽然日志记录输出的每一行都使用包的名称和唯一标识符来标识包，也通过唯一的 ExecutionID 来标识包的执行，但单一列表中的大量日志记录输出会使分析变得困难。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-159">Although each row of logging output identifies the package by its name and unique identifier, and also identifies the execution of the package by a unique ExecutionID, the large quantity of logging output in a single list can become difficult to analyze.</span></span>  
  
     <span data-ttu-id="2b9d6-160">建议采用下列方法增强默认日志记录输出并使其更容易生成报告：</span><span class="sxs-lookup"><span data-stu-id="2b9d6-160">The following approach is one suggestion for enhancing the default logging output and making it easier to generate reports:</span></span>  
  
    1.  <span data-ttu-id="2b9d6-161">**创建记录包的每次执行情况的父表**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-161">**Create a parent table that logs each execution of a package**.</span></span> <span data-ttu-id="2b9d6-162">此父表只有一行用于包的每次执行，并使用 ExecutionID 链接到 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 日志记录表中的子记录。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-162">This parent table has only a single row for each execution of a package, and uses the ExecutionID to link to the child records in the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logging table.</span></span> <span data-ttu-id="2b9d6-163">您可以在每个包的开始使用一个执行 SQL 任务创建此新行并记录开始时间。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-163">You can use an Execute SQL task at the beginning of each package to create this new row and to record the start time.</span></span> <span data-ttu-id="2b9d6-164">然后您可以在包的结尾使用另一个执行 SQL 任务，用结束时间、持续时间和状态来更新该行。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-164">Then you can use another Execute SQL task at the end of the package to update the row with the end time, duration, and status.</span></span>  
  
    2.  <span data-ttu-id="2b9d6-165">**将审核信息添加到数据流**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-165">**Add auditing information to the data flow**.</span></span> <span data-ttu-id="2b9d6-166">您可以使用审核转换将有关创建或修改每一行的包执行的信息添加到数据流的行中。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-166">You can use the Audit transformation to add information to rows in the data flow about the package execution that created or modified each row.</span></span> <span data-ttu-id="2b9d6-167">审核转换可以提供九条信息，包括 PackageName 和 ExecutionInstanceGUID。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-167">The Audit transformation makes nine pieces of information available, including the PackageName and ExecutionInstanceGUID.</span></span> <span data-ttu-id="2b9d6-168">有关详细信息，请参阅 [审核转换](../data-flow/transformations/audit-transformation.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-168">For more information, see [Audit Transformation](../data-flow/transformations/audit-transformation.md).</span></span> <span data-ttu-id="2b9d6-169">如果您希望在每一行中包括自定义信息以便审核，可以使用派生列转换将此信息添加到数据流的行中。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-169">If you have custom information that you would also like to include in each row for auditing purposes, you can add this information to rows in the data flow by using a Derived Column transformation.</span></span> <span data-ttu-id="2b9d6-170">有关详细信息，请参阅 [派生列转换](../data-flow/transformations/derived-column-transformation.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-170">For more information, see [Derived Column Transformation](../data-flow/transformations/derived-column-transformation.md).</span></span>  
  
    3.  <span data-ttu-id="2b9d6-171">**考虑捕获行计数数据**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-171">**Consider capturing row count data**.</span></span> <span data-ttu-id="2b9d6-172">考虑另行创建一个表，用于存储行计数信息。其中，每个包执行实例均由其 ExecutionID 标识。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-172">Consider creating a separate table for row count information, where each instance of package execution is identified by its ExecutionID.</span></span> <span data-ttu-id="2b9d6-173">使用行计数转换在数据流的关键点将行计数保存到一系列变量中。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-173">Use the Row Count transformation to save the row count into a series of variables at critical points in the data flow.</span></span> <span data-ttu-id="2b9d6-174">数据流结束后，请使用执行 SQL 任务将该系列值插入到表的行中，供以后分析和报告。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-174">After the data flow ends, use an Execute SQL task to insert the series of values into a row in the table for later analysis and reporting.</span></span>  
  
     <span data-ttu-id="2b9d6-175">有关此方法的详细信息，请参阅 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 白皮书 [Project REAL：Business Intelligence ETL 设计实践](https://www.microsoft.com/download/details.aspx?id=14582)中的“ETL 审核和日志记录”一节。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-175">For more information about this approach, see the section, "ETL Auditing and Logging," in the [!INCLUDE[msCoName](../../includes/msconame-md.md)] white paper, [Project REAL: Business Intelligence ETL Design Practices](https://www.microsoft.com/download/details.aspx?id=14582).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-debug-dump-files"></a><span data-ttu-id="2b9d6-176">使用调试转储文件对包执行进行故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-176">Troubleshoot Package Execution by Using Debug Dump Files</span></span>  
 <span data-ttu-id="2b9d6-177">在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]中，可以创建提供包执行信息的调试转储文件。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-177">In [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], you can create debug dump files that provide information about the execution of a package.</span></span> <span data-ttu-id="2b9d6-178">有关详细信息，请参阅 [生成包执行的转储文件](generating-dump-files-for-package-execution.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-178">For more information, see [Generating Dump Files for Package Execution](generating-dump-files-for-package-execution.md).</span></span>  
  
## <a name="troubleshoot-run-time-validation-issues"></a><span data-ttu-id="2b9d6-179">针对运行时验证问题进行故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-179">Troubleshoot Run-time Validation Issues</span></span>  
 <span data-ttu-id="2b9d6-180">有时在包中前一个任务执行完成之前，您也许不能连接到数据源，或者无法验证包的某些部分。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-180">Sometimes you might not be able to connect to your data sources, or portions of your package cannot be validated, until prior tasks in the package have executed.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="2b9d6-181">包括以下功能，可帮助您避免由这些情况导致的验证错误：</span><span class="sxs-lookup"><span data-stu-id="2b9d6-181">includes the following features to help you avoid the validation errors that would otherwise result from these conditions:</span></span>  
  
-   <span data-ttu-id="2b9d6-182">**配置加载包时无效包元素的 DelayValidation 属性**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-182">**Configure the DelayValidation property on package elements that are not valid when the package is loaded**.</span></span> <span data-ttu-id="2b9d6-183">您可以将具有无效配置的包元素的 `DelayValidation` 设置为 `True`，以防止包加载时的验证错误。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-183">You can set `DelayValidation` to `True` on package elements whose configuration is not valid, to prevent validation errors when the package is loaded.</span></span> <span data-ttu-id="2b9d6-184">例如，可以使用只有在运行时通过执行 SQL 任务创建才存在的目标表来执行数据流任务。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-184">For example, you may have a Data Flow task that uses a destination table that does not exist until an Execute SQL task creates the table at run time.</span></span> <span data-ttu-id="2b9d6-185">可以在包级或包中的各个任务和容器级启用 `DelayValidation` 属性。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-185">The `DelayValidation` property can be enabled at the package level, or at the level of the individual tasks and containers that the package includes.</span></span>  
  
     <span data-ttu-id="2b9d6-186">可以对数据流任务设置 `DelayValidation` 属性，但不能对单个数据流组件设置该属性。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-186">The `DelayValidation` property can be set on a Data Flow task, but not on individual data flow components.</span></span> <span data-ttu-id="2b9d6-187">可以通过将单个数据流组件的 <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> 属性设置为 `false` 来实现类似的效果。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-187">You can achieve a similar effect by setting the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> property of individual data flow components to `false`.</span></span> <span data-ttu-id="2b9d6-188">但是，当此属性的值为 `false` 时，该组件不能识别外部数据源的元数据的更改。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-188">However, when the value of this property is `false`, the component is not aware of changes to the metadata of external data sources.</span></span> <span data-ttu-id="2b9d6-189">设置为 `true` 时，<xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> 属性可帮助避免数据库中由于锁定导致的阻塞问题，特别是在包使用事务时。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-189">When set to `true`, the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> property can help to avoid blocking issues caused by locking in the database, especially when the package is using transactions.</span></span>  
  
## <a name="troubleshoot-run-time-permissions-issues"></a><span data-ttu-id="2b9d6-190">运行时权限问题的故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-190">Troubleshoot Run-time Permissions Issues</span></span>  
 <span data-ttu-id="2b9d6-191">如果您在尝试使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理运行已部署的包时遇到错误，则代理所使用的帐户可能不具备必需的权限。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-191">If you encounter errors when trying to run deployed packages by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the accounts used by Agent might not have the required permissions.</span></span> <span data-ttu-id="2b9d6-192">有关如何对从 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理作业运行的包进行故障排除的信息，请参阅 [从 SQL Server 代理作业步骤调用 SSIS 包时 SSIS 包不运行](https://support.microsoft.com/kb/918760)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-192">For information on how to troubleshoot packages that are run from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs, see [An SSIS package does not run when you call the SSIS package from a SQL Server Agent job step](https://support.microsoft.com/kb/918760).</span></span> <span data-ttu-id="2b9d6-193">有关如何从 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理作业运行包的详细信息，请参阅 [包的 SQL Server 代理作业](../packages/sql-server-agent-jobs-for-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-193">For more information on how to run packages from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs, see [SQL Server Agent Jobs for Packages](../packages/sql-server-agent-jobs-for-packages.md).</span></span>  
  
 <span data-ttu-id="2b9d6-194">若要连接到 Excel 或 Access 数据源， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 代理要求帐户具有在 TEMP 和 TMP 环境变量所指定的在文件夹中读取、写入、创建和删除临时文件的权限。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-194">To connect to Excel or Access data sources, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent requires an account that has permission to read, write, create, and delete temporary files in the folder that is specified by the TEMP and TMP environment variables.</span></span>  
  
## <a name="troubleshoot-64-bit-issues"></a><span data-ttu-id="2b9d6-195">64 位问题的故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-195">Troubleshoot 64-bit Issues</span></span>  
  
-   <span data-ttu-id="2b9d6-196">**部分数据访问接口在 64 位平台上不可用**。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-196">**Some data providers are not available on the 64-bit platform**.</span></span> <span data-ttu-id="2b9d6-197">尤其是，需要连接到 Excel 或 Access 数据源的 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Jet OLE DB 访问接口在 64 位版本中不可用。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-197">In particular, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Jet OLE DB Provider that is required to connect to Excel or Access data sources is not available in a 64-bit version.</span></span>  
  
## <a name="troubleshoot-errors-without-a-description"></a><span data-ttu-id="2b9d6-198">无说明错误的故障排除</span><span class="sxs-lookup"><span data-stu-id="2b9d6-198">Troubleshoot Errors without a Description</span></span>  
 <span data-ttu-id="2b9d6-199">如果遇到了没有附带说明的 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 错误，您可以根据其错误号在 [Integration Services 错误和消息引用](../integration-services-error-and-message-reference.md) 中查找错误来找到说明。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-199">If you encounter an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] error that does not have an accompanying description, you can locate the description in [Integration Services Error and Message Reference](../integration-services-error-and-message-reference.md) by looking up the error by its number.</span></span> <span data-ttu-id="2b9d6-200">目前该列表中不包括故障排除信息。</span><span class="sxs-lookup"><span data-stu-id="2b9d6-200">The list does not include troubleshooting information at this time.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="2b9d6-201">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="2b9d6-201">Related Tasks</span></span>  
 [<span data-ttu-id="2b9d6-202">在数据流组件中配置错误输出</span><span class="sxs-lookup"><span data-stu-id="2b9d6-202">Configure an Error Output in a Data Flow Component</span></span>](../configure-an-error-output-in-a-data-flow-component.md)  
  
  
