---
title: 对包中敏感数据的访问控制 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- passwords [Integration Services]
- packages [Integration Services], security
- protection levels for packages [Integration Services]
- configuration files [Integration Services]
- encryption [Integration Services]
- cryptography [Integration Services]
- security [Integration Services], protection levels
ms.assetid: d4b073c4-4238-41fc-a258-4e114216e185
author: chugugrace
ms.author: chugu
ms.openlocfilehash: af1c29f2871d0cb43436fa065d16b24cb78fcce7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578947"
---
# <a name="access-control-for-sensitive-data-in-packages"></a><span data-ttu-id="b69e6-102">对包中敏感数据的访问控制</span><span class="sxs-lookup"><span data-stu-id="b69e6-102">Access Control for Sensitive Data in Packages</span></span>
  <span data-ttu-id="b69e6-103">为了保护 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 包中的数据，可以设置保护级别，以帮助仅保护包中的敏感数据或包中的所有数据。</span><span class="sxs-lookup"><span data-stu-id="b69e6-103">To protect the data in an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package, you can set a protection level that helps protect just sensitive data or all the data in the package.</span></span> <span data-ttu-id="b69e6-104">另外，可以采用密码或用户密钥对数据加密，或依靠数据库对数据进行加密。</span><span class="sxs-lookup"><span data-stu-id="b69e6-104">Furthermore, you can encrypt this data with a password or a user key, or rely on the database to encrypt the data.</span></span> <span data-ttu-id="b69e6-105">另外，您对包所采用的保护级别不一定是静态的，而是在包的整个生命周期内可能变化。</span><span class="sxs-lookup"><span data-stu-id="b69e6-105">Also, the protection level that you use for a package is not necessarily static, but changes throughout the life cycle of the package.</span></span> <span data-ttu-id="b69e6-106">通常，您可以在包开发阶段设置一个保护级别，在包部署阶段设置另一个保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-106">You often set one protection level during development and another as soon as you deploy the package.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b69e6-107">除了本主题中所述的保护级别外，还可以使用固定数据库级角色保护保存到 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 服务器的包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-107">In addition to the protection levels described in this topic, you can use fixed database-level roles to protect packages that are saved to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span>  
  
## <a name="definition-of-sensitive-information"></a><span data-ttu-id="b69e6-108">定义敏感信息</span><span class="sxs-lookup"><span data-stu-id="b69e6-108">Definition of Sensitive Information</span></span>  
 <span data-ttu-id="b69e6-109">在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 包中，下列信息定义为“敏感”  信息：</span><span class="sxs-lookup"><span data-stu-id="b69e6-109">In an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package, the following information is defined as *sensitive*:</span></span>  
  
-   <span data-ttu-id="b69e6-110">连接字符串的密码部分。</span><span class="sxs-lookup"><span data-stu-id="b69e6-110">The password part of a connection string.</span></span> <span data-ttu-id="b69e6-111">但是，如果选择加密所有数据的选项，则整个连接字符串都将被视为敏感信息。</span><span class="sxs-lookup"><span data-stu-id="b69e6-111">However, if you select an option that encrypts everything, the whole connection string will be considered sensitive.</span></span>  
  
-   <span data-ttu-id="b69e6-112">标记为敏感的任务生成的 XML 节点。</span><span class="sxs-lookup"><span data-stu-id="b69e6-112">The task-generated XML nodes that are tagged as sensitive.</span></span> <span data-ttu-id="b69e6-113">XML 节点的标记由 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 控制，用户无法更改。</span><span class="sxs-lookup"><span data-stu-id="b69e6-113">The tagging of XML nodes is controlled by [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] and cannot by changed by users.</span></span>  
  
-   <span data-ttu-id="b69e6-114">标记为敏感的所有变量。</span><span class="sxs-lookup"><span data-stu-id="b69e6-114">Any variable that is marked as sensitive.</span></span> <span data-ttu-id="b69e6-115">标记的变量由 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]控制。</span><span class="sxs-lookup"><span data-stu-id="b69e6-115">The marking of variables is controlled by [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="b69e6-116">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 认为属性是否敏感，主要取决于 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 组件（连接管理器或任务）的开发人员是否将该属性指定为敏感。</span><span class="sxs-lookup"><span data-stu-id="b69e6-116">Whether [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] considers a property sensitive depends on whether the developer of the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] component, such as a connection manager or task, has designated the property as sensitive.</span></span> <span data-ttu-id="b69e6-117">用户不能向被视为敏感的属性列表添加属性，也不能从该列表删除属性。</span><span class="sxs-lookup"><span data-stu-id="b69e6-117">Users cannot add properties to, nor can they remove properties from, the list of properties that are considered sensitive.</span></span>  
  
## <a name="encryption"></a><span data-ttu-id="b69e6-118">加密</span><span class="sxs-lookup"><span data-stu-id="b69e6-118">Encryption</span></span>  
 <span data-ttu-id="b69e6-119">加密（包保护级别所使用的加密）是通过使用 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 数据保护 API (DPAPI) 来执行的，DPAPI 是 Cryptography API (CryptoAPI) 的一部分。</span><span class="sxs-lookup"><span data-stu-id="b69e6-119">Encryption, as used by package protection levels, is performed by using the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Data Protection API (DPAPI), which is part of the Cryptography API (CryptoAPI).</span></span>  
  
 <span data-ttu-id="b69e6-120">使用密码加密包的包保护级别还要求您提供密码。</span><span class="sxs-lookup"><span data-stu-id="b69e6-120">The package protection levels that encrypt packages by using passwords require that you provide a password also.</span></span> <span data-ttu-id="b69e6-121">如果将保护级别从不使用密码的级别更改为使用密码的级别，则系统将提示您输入密码。</span><span class="sxs-lookup"><span data-stu-id="b69e6-121">If you change the protection level from a level that does not use a password to one that does, you will be prompted for a password.</span></span>  
  
 <span data-ttu-id="b69e6-122">另外，对于使用密码的保护级别， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 会使用 Triple DES 加密算法（其密钥长度为 192 位）， [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 类库 (FCL) 中提供该算法。</span><span class="sxs-lookup"><span data-stu-id="b69e6-122">Also, for the protection levels that use a password, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] uses the Triple DES cipher algorithm with a key length of 192 bits, available in the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] Class Library (FCL).</span></span>  
  
## <a name="protection-levels"></a><span data-ttu-id="b69e6-123">保护级别</span><span class="sxs-lookup"><span data-stu-id="b69e6-123">Protection Levels</span></span>  
 <span data-ttu-id="b69e6-124">下表介绍 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 提供的保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-124">The following table describes the protection levels that [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] provides.</span></span> <span data-ttu-id="b69e6-125">括号中的值是来自 <xref:Microsoft.SqlServer.Dts.Runtime.DTSProtectionLevel> 枚举的值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-125">The values in parentheses are values from the <xref:Microsoft.SqlServer.Dts.Runtime.DTSProtectionLevel> enumeration.</span></span> <span data-ttu-id="b69e6-126">在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]中处理包时，这些值出现在用来配置包属性的“属性”窗口中。</span><span class="sxs-lookup"><span data-stu-id="b69e6-126">These values appear in the Properties window that you use to configure the properties of the package when you work with packages in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
|<span data-ttu-id="b69e6-127">保护级别</span><span class="sxs-lookup"><span data-stu-id="b69e6-127">Protection level</span></span>|<span data-ttu-id="b69e6-128">说明</span><span class="sxs-lookup"><span data-stu-id="b69e6-128">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="b69e6-129">不保存敏感数据 (`DontSaveSensitive`)</span><span class="sxs-lookup"><span data-stu-id="b69e6-129">Do not save sensitive (`DontSaveSensitive`)</span></span>|<span data-ttu-id="b69e6-130">保存包时不保存包中敏感属性的值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-130">Suppresses the values of sensitive properties in the package when the package is saved.</span></span> <span data-ttu-id="b69e6-131">这种保护级别不进行加密，但它防止标记为敏感的属性随包一起保存，因此其他用户将无法使用这些敏感数据。</span><span class="sxs-lookup"><span data-stu-id="b69e6-131">This protection level does not encrypt, but instead it prevents properties that are marked sensitive from being saved with the package and therefore makes the sensitive data unavailable to other users.</span></span> <span data-ttu-id="b69e6-132">如果其他用户打开该包，敏感信息将被替换为空白，用户必须提供这些敏感信息。</span><span class="sxs-lookup"><span data-stu-id="b69e6-132">If a different user opens the package, the sensitive information is replaced with blanks and the user must provide the sensitive information.</span></span><br /><br /> <span data-ttu-id="b69e6-133">当与 **dtutil** 实用工具 (dtutil.exe) 一起使用时，此保护级别对应的值为 0。</span><span class="sxs-lookup"><span data-stu-id="b69e6-133">When used with the **dtutil** utility (dtutil.exe), this protection level corresponds to the value of 0.</span></span>|  
|<span data-ttu-id="b69e6-134">使用密码加密所有数据 (`EncryptAllWithPassword`)</span><span class="sxs-lookup"><span data-stu-id="b69e6-134">Encrypt all with password (`EncryptAllWithPassword`)</span></span>|<span data-ttu-id="b69e6-135">使用密码加密整个包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-135">Uses a password to encrypt the whole package.</span></span> <span data-ttu-id="b69e6-136">使用用户在创建包或导出包时提供的密码加密包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-136">The package is encrypted by using a password that the user supplies when the package is created or exported.</span></span> <span data-ttu-id="b69e6-137">用户必须提供包密码，才能在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器中打开包，或使用 **dtexec** 命令提示符实用工具运行包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-137">To open the package in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or run the package by using the **dtexec** command prompt utility, the user must provide the package password.</span></span> <span data-ttu-id="b69e6-138">如果没有密码，用户将无法访问或运行包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-138">Without the password the user cannot access or run the package.</span></span><br /><br /> <span data-ttu-id="b69e6-139">当与 **dtutil** 实用工具一起使用时，此保护级别对应的值为 3。</span><span class="sxs-lookup"><span data-stu-id="b69e6-139">When used with the **dtutil** utility, this protection level corresponds to the value of 3.</span></span>|  
|<span data-ttu-id="b69e6-140">使用用户密钥加密所有数据 (`EncryptAllWithUserKey`)</span><span class="sxs-lookup"><span data-stu-id="b69e6-140">Encrypt all with user key (`EncryptAllWithUserKey`)</span></span>|<span data-ttu-id="b69e6-141">使用基于当前用户配置文件的密钥加密整个包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-141">Uses a key that is based on the current user profile to encrypt the whole package.</span></span> <span data-ttu-id="b69e6-142">只有创建或导出了包的用户才能在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器中打开包，或使用 **dtexec** 命令提示符实用工具运行包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-142">Only the user who created or exported the package can open the package in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or run the package by using the **dtexec** command prompt utility.</span></span><br /><br /> <span data-ttu-id="b69e6-143">当与 **dtutil** 实用工具一起使用时，此保护级别对应的值为 4。</span><span class="sxs-lookup"><span data-stu-id="b69e6-143">When used with the **dtutil** utility, this protection level corresponds to the value of 4.</span></span><br /><br /> <span data-ttu-id="b69e6-144">注意：对于使用用户密钥的保护级别，[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 使用 DPAPI 标准。</span><span class="sxs-lookup"><span data-stu-id="b69e6-144">Note: For protection levels that use a user key, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] uses DPAPI standards.</span></span> <span data-ttu-id="b69e6-145">有关 DPAPI 的详细信息，请参阅 MSDN Library [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408)。</span><span class="sxs-lookup"><span data-stu-id="b69e6-145">For more information about DPAPI, see the MSDN Library at [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408).</span></span>|  
|<span data-ttu-id="b69e6-146">使用密码加密敏感数据 (`EncryptSensitiveWithPassword`)</span><span class="sxs-lookup"><span data-stu-id="b69e6-146">Encrypt sensitive with password (`EncryptSensitiveWithPassword`)</span></span>|<span data-ttu-id="b69e6-147">使用密码只加密包中敏感属性的值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-147">Uses a password to encrypt only the values of sensitive properties in the package.</span></span> <span data-ttu-id="b69e6-148">DPAPI 用于此加密。</span><span class="sxs-lookup"><span data-stu-id="b69e6-148">DPAPI is used for this encryption.</span></span> <span data-ttu-id="b69e6-149">敏感数据作为包的一部分保存，但数据是使用当前用户在创建包或导出包时提供的密码加密的。</span><span class="sxs-lookup"><span data-stu-id="b69e6-149">Sensitive data is saved as a part of the package, but that data is encrypted by using a password that the current user supplies when the package is created or exported.</span></span> <span data-ttu-id="b69e6-150">若要在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器中打开包，用户必须提供包密码。</span><span class="sxs-lookup"><span data-stu-id="b69e6-150">To open the package in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, the user must provide the package password.</span></span> <span data-ttu-id="b69e6-151">如果不提供该密码，则包虽然可以打开但其中不包含敏感数据，当前用户必须为敏感数据提供新值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-151">If the password is not provided, the package opens without the sensitive data and the current user must provide new values for sensitive data.</span></span> <span data-ttu-id="b69e6-152">如果用户试图在不提供密码的情况下执行包，则包执行将会失败。</span><span class="sxs-lookup"><span data-stu-id="b69e6-152">If the user tries to execute the package without providing the password, package execution fails.</span></span> <span data-ttu-id="b69e6-153">有关密码和命令行执行的详细信息，请参阅 [dtexec Utility](../packages/dtexec-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="b69e6-153">For more information about passwords and command line execution, see [dtexec Utility](../packages/dtexec-utility.md).</span></span><br /><br /> <span data-ttu-id="b69e6-154">当与 **dtutil** 实用工具一起使用时，此保护级别对应的值为 2。</span><span class="sxs-lookup"><span data-stu-id="b69e6-154">When used with the **dtutil** utility, this protection level corresponds to the value of 2.</span></span>|  
|<span data-ttu-id="b69e6-155">使用用户密钥加密敏感数据 (`EncryptSensitiveWithUserKey`)</span><span class="sxs-lookup"><span data-stu-id="b69e6-155">Encrypt sensitive with user key (`EncryptSensitiveWithUserKey`)</span></span>|<span data-ttu-id="b69e6-156">使用基于当前用户配置文件的密钥只加密包中敏感属性的值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-156">Uses a key that is based on the current user profile to encrypt only the values of sensitive properties in the package.</span></span> <span data-ttu-id="b69e6-157">只有使用同一配置文件的同一个用户才能加载此包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-157">Only the same user who uses the same profile can load the package.</span></span> <span data-ttu-id="b69e6-158">如果其他用户打开该包，敏感信息将被替换为空白，当前用户必须为敏感数据提供新值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-158">If a different user opens the package, the sensitive information is replaced with blanks and the current user must provide new values for the sensitive data.</span></span> <span data-ttu-id="b69e6-159">如果用户试图执行该包，则包执行将会失败。</span><span class="sxs-lookup"><span data-stu-id="b69e6-159">If the user attempts to execute the package, package execution fails.</span></span> <span data-ttu-id="b69e6-160">DPAPI 用于此加密。</span><span class="sxs-lookup"><span data-stu-id="b69e6-160">DPAPI is used for this encryption.</span></span><br /><br /> <span data-ttu-id="b69e6-161">当与 **dtutil** 实用工具一起使用时，此保护级别对应的值为 1。</span><span class="sxs-lookup"><span data-stu-id="b69e6-161">When used with the **dtutil** utility, this protection level corresponds to the value of 1.</span></span><br /><br /> <span data-ttu-id="b69e6-162">注意：对于使用用户密钥的保护级别，[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 使用 DPAPI 标准。</span><span class="sxs-lookup"><span data-stu-id="b69e6-162">Note: For protection levels that use a user key, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] uses DPAPI standards.</span></span> <span data-ttu-id="b69e6-163">有关 DPAPI 的详细信息，请参阅 MSDN Library [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408)。</span><span class="sxs-lookup"><span data-stu-id="b69e6-163">For more information about DPAPI, see the MSDN Library at [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408).</span></span>|  
|<span data-ttu-id="b69e6-164">依靠服务器存储进行加密 (`ServerStorage`)</span><span class="sxs-lookup"><span data-stu-id="b69e6-164">Rely on server storage for encryption (`ServerStorage`)</span></span>|<span data-ttu-id="b69e6-165">使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库角色保护整个包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-165">Protects the whole package using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database roles.</span></span> <span data-ttu-id="b69e6-166">将包保存到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] msdb 数据库后，支持此选项。</span><span class="sxs-lookup"><span data-stu-id="b69e6-166">This option is supported when a package is saved to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] msdb database.</span></span> <span data-ttu-id="b69e6-167">此外，SSISDB 目录使用 `ServerStorage` 保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-167">In addition, the SSISDB catalog uses the `ServerStorage` protection level</span></span><br /><br /> <span data-ttu-id="b69e6-168">在将包从 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]保存到文件系统时，不支持此选项。</span><span class="sxs-lookup"><span data-stu-id="b69e6-168">This option is not supported when a package is saved to the file system from [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>|  
  
## <a name="protection-level-setting-and-the-ssisdb-catalog"></a><span data-ttu-id="b69e6-169">保护级别设置和 SSISDB 目录</span><span class="sxs-lookup"><span data-stu-id="b69e6-169">Protection Level Setting and the SSISDB Catalog</span></span>  
 <span data-ttu-id="b69e6-170">SSISDB 目录使用 `ServerStorage` 保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-170">The SSISDB catalog uses the `ServerStorage` protection level.</span></span> <span data-ttu-id="b69e6-171">在向 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 服务器部署 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 项目时，该目录会自动对包数据和敏感值加密。</span><span class="sxs-lookup"><span data-stu-id="b69e6-171">When you deploy an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] project to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server, the catalog automatically encrypts the package data and sensitive values.</span></span> <span data-ttu-id="b69e6-172">该目录还会在检索数据时自动解密数据。</span><span class="sxs-lookup"><span data-stu-id="b69e6-172">The catalog also automatically decrypts the data when you retrieve it.</span></span>  
  
 <span data-ttu-id="b69e6-173">若将项目（.ispac 文件）从 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 服务器导出到文件系统，该系统会将保护级别自动更改为 `EncryptSensitiveWithUserKey`。</span><span class="sxs-lookup"><span data-stu-id="b69e6-173">If you export the project (.ispac file) from the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server to the file system, the system automatically changes the protection level to `EncryptSensitiveWithUserKey`.</span></span> <span data-ttu-id="b69e6-174">如果使用中的 " **Integration Services 导入项目向导**" 导入项目 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] ，"**属性**" 窗口中的**ProtectionLevel**属性将显示值 `EncryptSensitiveWithUserKey` 。</span><span class="sxs-lookup"><span data-stu-id="b69e6-174">If you import the project by using the **Integration Services Import Project Wizard** in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the **ProtectionLevel** property in the **Properties** window shows a value of `EncryptSensitiveWithUserKey`.</span></span>  
  
## <a name="protection-level-setting-based-on-package-life-cycle"></a><span data-ttu-id="b69e6-175">基于包的生命周期设置保护级别</span><span class="sxs-lookup"><span data-stu-id="b69e6-175">Protection Level Setting Based on Package Life Cycle</span></span>  
 <span data-ttu-id="b69e6-176">在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 中初次开发 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 包时，可以设置该包的保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-176">You set the protection level of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package when you first develop it in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="b69e6-177">以后当部署包时，在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 中将包导入 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]或从中导出包时，或者在将包从 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 复制到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 包存储区或文件系统时，都可以更新包的保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-177">Later, when the package is deployed, imported or exported from [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], or copied from [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the [!INCLUDE[ssIS](../../includes/ssis-md.md)] Package Store, or the file system, you can update the package protection level.</span></span> <span data-ttu-id="b69e6-178">例如，如果在计算机上使用某个用户密钥保护级别选项创建并保存包，则在将包提供给其他用户时，很可能需要更改保护级别，否则，他们将无法打开该包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-178">For example, if you create and save packages on your computer with one of the user key protection level options, you likely would want to change the protection level when you give the package to other users; otherwise they cannot open the package.</span></span>  
  
 <span data-ttu-id="b69e6-179">通常，您可以按下面列出的步骤更改保护级别：</span><span class="sxs-lookup"><span data-stu-id="b69e6-179">Typically, you change the protection level as listed in the following steps:</span></span>  
  
1.  <span data-ttu-id="b69e6-180">在部署期间，将包的保护级别保留为默认值 `EncryptSensitiveWithUserKey`。</span><span class="sxs-lookup"><span data-stu-id="b69e6-180">During development, leave the protection level of packages set to the default value, `EncryptSensitiveWithUserKey`.</span></span> <span data-ttu-id="b69e6-181">此设置可以保证只有开发人员可以看到包中的敏感值。</span><span class="sxs-lookup"><span data-stu-id="b69e6-181">This setting helps ensure that only the developer sees sensitive values in the package.</span></span> <span data-ttu-id="b69e6-182">或者，您可以考虑使用 `EncryptAllWithUserKey` 或 `DontSaveSensitive`。</span><span class="sxs-lookup"><span data-stu-id="b69e6-182">Or, you can consider using `EncryptAllWithUserKey`, or `DontSaveSensitive`.</span></span>  
  
2.  <span data-ttu-id="b69e6-183">部署包时，您需要将保护级别更改为不依靠开发人员用户密钥的保护级别。</span><span class="sxs-lookup"><span data-stu-id="b69e6-183">When it is time to deploy the packages, you have to change the protection level to one that does not depend on the developer's user key.</span></span> <span data-ttu-id="b69e6-184">因此，通常需要选择 `EncryptSensitiveWithPassword` 或 `EncryptAllWithPassword`。</span><span class="sxs-lookup"><span data-stu-id="b69e6-184">Therefore you typically have to select `EncryptSensitiveWithPassword`, or `EncryptAllWithPassword`.</span></span> <span data-ttu-id="b69e6-185">通过分配一个生产环境中运营团队也知道的临时强密码来加密包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-185">Encrypt the packages by assigning a temporary strong password that is also known to the operations team in the production environment.</span></span>  
  
3.  <span data-ttu-id="b69e6-186">在将包部署到生产环境后，运营团队可以通过分配一个只有他们自己知道的强密码来重新加密部署的包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-186">After the packages have been deployed to the production environment, the operations team can re-encrypt the deployed packages by assigning a strong password that is known only to them.</span></span> <span data-ttu-id="b69e6-187">他们也可以通过选择 `EncryptSensitiveWithUserKey` 或 `EncryptAllWithUserKey`，并使用要运行包的帐户的本地凭据来加密部署的包。</span><span class="sxs-lookup"><span data-stu-id="b69e6-187">Or, they can encrypt the deployed packages by selecting `EncryptSensitiveWithUserKey` or `EncryptAllWithUserKey`, and using the local credentials of the account that will run the packages.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="b69e6-188">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="b69e6-188">Related Tasks</span></span>  
  
-   [<span data-ttu-id="b69e6-189">设置或更改包的保护级别</span><span class="sxs-lookup"><span data-stu-id="b69e6-189">Set or Change the Protection Level of Packages</span></span>](../set-or-change-the-protection-level-of-packages.md)  
  
## <a name="see-also"></a><span data-ttu-id="b69e6-190">另请参阅</span><span class="sxs-lookup"><span data-stu-id="b69e6-190">See Also</span></span>  
 <span data-ttu-id="b69e6-191">[&#40;SSIS 服务导入和导出包&#41;](../import-and-export-packages-ssis-service.md) </span><span class="sxs-lookup"><span data-stu-id="b69e6-191">[Import and Export Packages &#40;SSIS Service&#41;](../import-and-export-packages-ssis-service.md) </span></span>  
 <span data-ttu-id="b69e6-192">[Integration Services &#40;SSIS&#41; 包](../integration-services-ssis-packages.md) </span><span class="sxs-lookup"><span data-stu-id="b69e6-192">[Integration Services &#40;SSIS&#41; Packages](../integration-services-ssis-packages.md) </span></span>  
 [<span data-ttu-id="b69e6-193">安全性概述 (Integration Services)</span><span class="sxs-lookup"><span data-stu-id="b69e6-193">Security Overview &#40;Integration Services&#41;</span></span>](security-overview-integration-services.md)  
  
  
