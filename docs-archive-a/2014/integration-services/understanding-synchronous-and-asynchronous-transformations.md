---
title: 了解同步和异步转换 | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: reference
helpviewer_keywords:
- transformations [Integration Services], synchronous and asynchronous
- asynchronous transformations [Integration Services]
- data flow components [Integration Services], synchronous and asynchronous
- synchronous transformations [Integration Services]
ms.assetid: 0bc2bda5-3f8a-49c2-aaf1-01dbe4c3ebba
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 386d3786cb969ad93a92b8ebae2a41f046fb39bf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578938"
---
# <a name="understanding-synchronous-and-asynchronous-transformations"></a><span data-ttu-id="ebfad-102">了解同步和异步转换</span><span class="sxs-lookup"><span data-stu-id="ebfad-102">Understanding Synchronous and Asynchronous Transformations</span></span>
  <span data-ttu-id="ebfad-103">若要了解 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 中同步转换与异步转换之间的区别，最好先了解同步转换。</span><span class="sxs-lookup"><span data-stu-id="ebfad-103">To understand the difference between a synchronous and an asynchronous transformation in [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)], it is easiest to start with an understanding of a synchronous transformation.</span></span> <span data-ttu-id="ebfad-104">如果同步转换无法满足您的需要，您的设计可能需要异步转换。</span><span class="sxs-lookup"><span data-stu-id="ebfad-104">If a synchronous transformation does not meet your needs, your design might require an asynchronous transformation.</span></span>

## <a name="synchronous-transformations"></a><span data-ttu-id="ebfad-105">同步转换</span><span class="sxs-lookup"><span data-stu-id="ebfad-105">Synchronous Transformations</span></span>
 <span data-ttu-id="ebfad-106">同步转换以一次一行的方式处理传入行并在数据流中传递它们。</span><span class="sxs-lookup"><span data-stu-id="ebfad-106">A synchronous transformation processes incoming rows and passes them on in the data flow one row at a time.</span></span> <span data-ttu-id="ebfad-107">输出与输入同步，这意味着输出与输入同时发生。</span><span class="sxs-lookup"><span data-stu-id="ebfad-107">Output is synchronous with input, meaning that it occurs at the same time.</span></span> <span data-ttu-id="ebfad-108">因此，若要处理一个给定行，转换不需要数据集中其他行的信息。</span><span class="sxs-lookup"><span data-stu-id="ebfad-108">Therefore, to process a given row, the transformation does not need information about other rows in the data set.</span></span> <span data-ttu-id="ebfad-109">在实际实现中，行在从一个组件传递到下一个组件时分组到多个缓冲区中，但是这些缓冲区对于用户是透明的，您可以假定每一行都单独进行处理。</span><span class="sxs-lookup"><span data-stu-id="ebfad-109">In the actual implementation, rows are grouped into buffers as they pass from one component to the next, but these buffers are transparent to the user, and you can assume that each row is processed separately.</span></span>

 <span data-ttu-id="ebfad-110">“数据转换”这种转换是同步转换的一个示例。</span><span class="sxs-lookup"><span data-stu-id="ebfad-110">An example of a synchronous transformation is the Data Conversion transformation.</span></span> <span data-ttu-id="ebfad-111">对于每个传入行，它都转换指定列中的值，然后将其向下游发送。</span><span class="sxs-lookup"><span data-stu-id="ebfad-111">For each incoming row, it converts the value in the specified column and sends the row on its way.</span></span> <span data-ttu-id="ebfad-112">每个单独的转换操作都与数据集中的其他所有行无关。</span><span class="sxs-lookup"><span data-stu-id="ebfad-112">Each discrete conversion operation is independent of all the other rows in the data set.</span></span>

 <span data-ttu-id="ebfad-113">在 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 脚本和编程中，通过查找组件的输入的 ID 并将其分配给组件的输出的属性来指定同步转换 `SynchronousInputID` 。</span><span class="sxs-lookup"><span data-stu-id="ebfad-113">In [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] scripting and programming, you specify a synchronous transformation by looking up the ID of a component's input and assigning it to the `SynchronousInputID` property of the component's outputs.</span></span> <span data-ttu-id="ebfad-114">这可以使数据流引擎处理输入中的每一行，然后自动将每行发送给指定输出。</span><span class="sxs-lookup"><span data-stu-id="ebfad-114">This tells the data flow engine to process each row from the input and send each row automatically to the specified outputs.</span></span> <span data-ttu-id="ebfad-115">如果希望每一行都产生一个输出，则不必再编写任何其他代码来输出数据。</span><span class="sxs-lookup"><span data-stu-id="ebfad-115">If you want every row to go to every output, you do not have to write any additional code to output the data.</span></span> <span data-ttu-id="ebfad-116">如果使用 `ExclusionGroup` 属性指定各行的输出只应归为一个或另一个输出组，就像有条件拆分转换中那样，则必须调用 `DirectRow` 方法来为每一行选择相应的目标。</span><span class="sxs-lookup"><span data-stu-id="ebfad-116">If you use the `ExclusionGroup` property to specify that rows should only go to one or another of a group of outputs, as in the Conditional Split transformation, you must call the `DirectRow` method to select the appropriate destination for each row.</span></span> <span data-ttu-id="ebfad-117">如果存在错误输出，必须调用 `DirectErrorRow` 将存在错误的行发送到错误输出，而不是默认输出。</span><span class="sxs-lookup"><span data-stu-id="ebfad-117">When you have an error output, you must call `DirectErrorRow` to send rows with problems to the error output instead of the default output.</span></span>

## <a name="asynchronous-transformations"></a><span data-ttu-id="ebfad-118">异步转换</span><span class="sxs-lookup"><span data-stu-id="ebfad-118">Asynchronous Transformations</span></span>
 <span data-ttu-id="ebfad-119">如果处理每一行时无法独立于其他所有行，则您的设计可能需要异步转换。</span><span class="sxs-lookup"><span data-stu-id="ebfad-119">You might decide that your design requires an asynchronous transformation when it is not possible to process each row independently of all other rows.</span></span> <span data-ttu-id="ebfad-120">换言之，您不能在处理每一行时在数据流中传递该行，而必须使输出数据与输入异步，即两者不同时发生。</span><span class="sxs-lookup"><span data-stu-id="ebfad-120">In other words, you cannot pass each row along in the data flow as it is processed, but instead must output data asynchronously, or at a different time, than the input.</span></span> <span data-ttu-id="ebfad-121">例如，以下情况需要异步转换：</span><span class="sxs-lookup"><span data-stu-id="ebfad-121">For example, the following scenarios require an asynchronous transformation:</span></span>

-   <span data-ttu-id="ebfad-122">组件必须获得多个数据缓冲区后才能执行处理。</span><span class="sxs-lookup"><span data-stu-id="ebfad-122">The component has to acquire multiple buffers of data before it can perform its processing.</span></span> <span data-ttu-id="ebfad-123">例如排序转换，在该转换中，组件必须在一个操作中处理整个行集。</span><span class="sxs-lookup"><span data-stu-id="ebfad-123">An example is the Sort transformation, where the component has to process the complete set of rows in a single operation.</span></span>

-   <span data-ttu-id="ebfad-124">组件必须组合多个输入中的行。</span><span class="sxs-lookup"><span data-stu-id="ebfad-124">The component has to combine rows from multiple inputs.</span></span> <span data-ttu-id="ebfad-125">例如合并转换，在该转换中，组件必须检查来自各个输入的多个行，然后按照排列好的顺序将这些行合并。</span><span class="sxs-lookup"><span data-stu-id="ebfad-125">An example is the Merge transformation, where the component has to examine multiple rows from each input and then merge them in sorted order.</span></span>

-   <span data-ttu-id="ebfad-126">在输入行和输出行之间不存在一对一的对应关系。</span><span class="sxs-lookup"><span data-stu-id="ebfad-126">There is no one-to-one correspondence between input rows and output rows.</span></span> <span data-ttu-id="ebfad-127">例如聚合转换，在该转换中，组件必须向输出添加一行来保存计算的聚合值。</span><span class="sxs-lookup"><span data-stu-id="ebfad-127">An example is the Aggregate transformation, where the component has to add a row to the output to hold the computed aggregate values.</span></span>

 <span data-ttu-id="ebfad-128">在编写 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 脚本和编程时，可以通过为组件的输出的 `SynchronousInputID` 属性赋予值 0 来指定异步转换。</span><span class="sxs-lookup"><span data-stu-id="ebfad-128">In [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] scripting and programming, you specify an asynchronous transformation by assigning a value of 0 to the `SynchronousInputID` property of the component's outputs.</span></span> <span data-ttu-id="ebfad-129">。</span><span class="sxs-lookup"><span data-stu-id="ebfad-129">.</span></span> <span data-ttu-id="ebfad-130">这可以使数据流引擎不自动将每一行发送到输出中。</span><span class="sxs-lookup"><span data-stu-id="ebfad-130">This tells the data flow engine not to send each row automatically to the outputs.</span></span> <span data-ttu-id="ebfad-131">这样，您就必须编写代码将每一行显式发送到相应的输出中，方法是将该行添加到为异步转换的输出创建的新输出缓冲区中。</span><span class="sxs-lookup"><span data-stu-id="ebfad-131">Then you must write code to send each row explicitly to the appropriate output by adding it to the new output buffer that is created for the output of an asynchronous transformation.</span></span>

> [!NOTE]
>  <span data-ttu-id="ebfad-132">由于源组件也必须显式将从数据源读取的每一行添加到该组件的输出缓冲区中，因此源与具有异步输出的转换很相似。</span><span class="sxs-lookup"><span data-stu-id="ebfad-132">Since a source component must also explicitly add each row that it reads from the data source to its output buffers, a source resembles a transformation with asynchronous outputs.</span></span>

 <span data-ttu-id="ebfad-133">还可以创建一个模拟同步转换的异步转换，方法是显式将每个输入行复制到输出中。</span><span class="sxs-lookup"><span data-stu-id="ebfad-133">It would also be possible to create an asynchronous transformation that emulates a synchronous transformation by explicitly copying each input row to the output.</span></span> <span data-ttu-id="ebfad-134">使用此方法可以重命名列或者转换数据类型或格式。</span><span class="sxs-lookup"><span data-stu-id="ebfad-134">By using this approach, you could rename columns or convert data types or formats.</span></span> <span data-ttu-id="ebfad-135">但是，此方法会降低性能。</span><span class="sxs-lookup"><span data-stu-id="ebfad-135">However this approach degrades performance.</span></span> <span data-ttu-id="ebfad-136">您可以使用内置 Integration Services 组件（如复制列或数据转换）达到同样的效果，但是性能更佳。</span><span class="sxs-lookup"><span data-stu-id="ebfad-136">You can achieve the same results with better performance by using built-in Integration Services components, such as Copy Column or Data Conversion.</span></span>

<span data-ttu-id="ebfad-137">![Integration Services 图标 (小型) ](media/dts-16.gif "集成服务图标（小）")  **随时保持最新 Integration Services**</span><span class="sxs-lookup"><span data-stu-id="ebfad-137">![Integration Services icon (small)](media/dts-16.gif "Integration Services icon (small)")  **Stay Up to Date with Integration Services**</span></span><br /> <span data-ttu-id="ebfad-138">若要从 Microsoft 获得最新的下载内容、文章、示例和视频，以及从社区获得所选解决方案，请访问 MSDN 上的 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 页：</span><span class="sxs-lookup"><span data-stu-id="ebfad-138">For the latest downloads, articles, samples, and videos from Microsoft, as well as selected solutions from the community, visit the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] page on MSDN:</span></span><br /><br /> [<span data-ttu-id="ebfad-139">访问 MSDN 上的 Integration Services 页</span><span class="sxs-lookup"><span data-stu-id="ebfad-139">Visit the Integration Services page on MSDN</span></span>](https://go.microsoft.com/fwlink/?LinkId=136655)<br /><br /> <span data-ttu-id="ebfad-140">若要获得有关这些更新的自动通知，请订阅该页上提供的 RSS 源。</span><span class="sxs-lookup"><span data-stu-id="ebfad-140">For automatic notification of these updates, subscribe to the RSS feeds available on the page.</span></span>

## <a name="see-also"></a><span data-ttu-id="ebfad-141">另请参阅</span><span class="sxs-lookup"><span data-stu-id="ebfad-141">See Also</span></span>
 <span data-ttu-id="ebfad-142">[使用脚本组件创建同步转换](data-flow/transformations/script-component.md)使用[脚本组件创建异步转换](extending-packages-scripting-data-flow-script-component-types/creating-an-asynchronous-transformation-with-the-script-component.md)[开发自定义转换组件和同步输出](extending-packages-custom-objects-data-flow-types/developing-a-custom-transformation-component-with-synchronous-outputs.md)[开发带有异步输出的自定义转换组件](extending-packages-custom-objects-data-flow-types/developing-a-custom-transformation-component-with-asynchronous-outputs.md)</span><span class="sxs-lookup"><span data-stu-id="ebfad-142">[Creating a Synchronous Transformation with the Script Component](data-flow/transformations/script-component.md) [Creating an Asynchronous Transformation with the Script Component](extending-packages-scripting-data-flow-script-component-types/creating-an-asynchronous-transformation-with-the-script-component.md) [Developing a Custom Transformation Component with Synchronous Outputs](extending-packages-custom-objects-data-flow-types/developing-a-custom-transformation-component-with-synchronous-outputs.md) [Developing a Custom Transformation Component with Asynchronous Outputs](extending-packages-custom-objects-data-flow-types/developing-a-custom-transformation-component-with-asynchronous-outputs.md)</span></span>


