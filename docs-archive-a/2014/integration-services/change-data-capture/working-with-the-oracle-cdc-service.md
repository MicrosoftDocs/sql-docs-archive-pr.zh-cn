---
title: 使用 Oracle CDC 服务 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 04be5896-2301-45f5-a8ce-5f4ef2b69aa5
author: chugugrace
ms.author: chugu
ms.openlocfilehash: d1946e6b329bfbd0155123707a604e971cd7d65f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87577766"
---
# <a name="working-with-the-oracle-cdc-service"></a><span data-ttu-id="5c3f7-102">使用 Oracle CDC 服务</span><span class="sxs-lookup"><span data-stu-id="5c3f7-102">Working with the Oracle CDC Service</span></span>
  <span data-ttu-id="5c3f7-103">本节介绍 Oracle CDC 服务的一些重要概念。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-103">This section describes some important concepts of the Oracle CDC Service.</span></span> <span data-ttu-id="5c3f7-104">本节中包含的概念是：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-104">The concepts included in this section are:</span></span>  
  
-   [<span data-ttu-id="5c3f7-105">MSXDBCDC 数据库</span><span class="sxs-lookup"><span data-stu-id="5c3f7-105">The MSXDBCDC Database</span></span>](#BKMK_MSXDBCDC)  
  
     <span data-ttu-id="5c3f7-106">本节介绍在此数据库中包含的表及其对 CDC 的重要性。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-106">This section describes the tables that are included in this database and how it is important to CDC.</span></span>  
  
-   [<span data-ttu-id="5c3f7-107">CDC 数据库</span><span class="sxs-lookup"><span data-stu-id="5c3f7-107">The CDC Databases</span></span>](#BKMK_CDCdatabase)  
  
     <span data-ttu-id="5c3f7-108">本节提供了对 CDC 数据库的简要说明。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-108">This section provides a brief description of the CDC databases.</span></span> <span data-ttu-id="5c3f7-109">这些数据库是使用 Oracle CDC 设计器控制台创建的。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-109">These databases are created using the Oracle CDC Designer Console.</span></span> <span data-ttu-id="5c3f7-110">有关 CDC 数据库的详细信息，请参阅您安装的 CDC 设计器控制台随附的文档。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-110">See the documentation included with your installation of the CDC Designer Console for more information about the CDC databases.</span></span>  
  
-   [<span data-ttu-id="5c3f7-111">使用命令行配置 CDC 服务</span><span class="sxs-lookup"><span data-stu-id="5c3f7-111">Using the Command Line to Configure the CDC Service</span></span>](#BKMK_CommandConfigCDC)  
  
     <span data-ttu-id="5c3f7-112">本节介绍了可用于配置 Oracle CDC 服务的命令行命令。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-112">This section describes the command-line commands that can be used to configure the Oracle CDC Service.</span></span>  
  
##  <a name="the-msxdbcdc-database"></a><a name="BKMK_MSXDBCDC"></a> <span data-ttu-id="5c3f7-113">MSXDBCDC 数据库</span><span class="sxs-lookup"><span data-stu-id="5c3f7-113">The MSXDBCDC Database</span></span>  
 <span data-ttu-id="5c3f7-114">MSXDBCDC (Microsoft External-Database CDC) 数据库是一种特殊的数据库，在您将 Oracle CDC 服务用于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例时需要此类数据库。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-114">The MSXDBCDC (Microsoft External-Database CDC) database is a special database that is required when using the CDC Service for Oracle with a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="5c3f7-115">此数据库的名称无法更改。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-115">The name of this database cannot be changed.</span></span> <span data-ttu-id="5c3f7-116">如果名为 MSXDBCDC 的数据库在主 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例上存在并且包含并非 Oracle CDC 服务定义的其他表，则该主 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例将无法使用。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-116">If a database called MSXDBCDC exists on the host [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and contains tables other than those defined by the CDC Service for Oracle, the host [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance cannot be used.</span></span>  
  
 <span data-ttu-id="5c3f7-117">此数据库的主要用途是：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-117">The main uses for this database are to:</span></span>  
  
-   <span data-ttu-id="5c3f7-118">作为与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例相关联的 Oracle CDC 服务的注册表。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-118">Serve as a registry of Oracle CDC Services associated with a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-119">此信息用于服务配置和设计组件，并且用于支持对不同节点上同名的多个 CDC 服务进行协调，以便指定哪一服务是活动服务。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-119">This information is used for the service configuration and design components and to support coordination of multiple CDC services by the same name on different nodes over which one is the active one.</span></span>  
  
-   <span data-ttu-id="5c3f7-120">作为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例中包含的 Oracle CDC 实例的注册表、处理各实例的 CDC 服务以及每个服务使用的配置版本。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-120">Serve as a registry of the Oracle CDC instances contained in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance, the CDC service that handles each instance, and the configuration version each uses.</span></span> <span data-ttu-id="5c3f7-121">此信息等效于 master 数据库的 **sys.databases** 表中的 **is_cdc_enabled** 列。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-121">This information is equivalent to the **is_cdc_enabled** column in the **sys.databases** table of the master database.</span></span> <span data-ttu-id="5c3f7-122">该 CDC 服务将定期扫描 **dbo.xdbcdc_databases** 表以便标识对 CDC 配置或捕获实例列表的更改。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-122">The CDC service periodically scans the **dbo.xdbcdc_databases** table to identify changes made to the CDC configuration or to the list of captured instances.</span></span>  
  
-   <span data-ttu-id="5c3f7-123">持有 **sysadmin**所有的用于帮助创建和维护 CDC 实例的存储过程。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-123">Hold **sysadmin**-owned stored procedures that help create and maintain CDC instances.</span></span> <span data-ttu-id="5c3f7-124">这些存储过程类似于用于实现 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC 功能的系统过程。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-124">These are similar to the system procedures that are used for the implementation of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC feature.</span></span>  
  
### <a name="creating-the-msxdbcdc-database"></a><span data-ttu-id="5c3f7-125">创建 MSXDBCDC 数据库</span><span class="sxs-lookup"><span data-stu-id="5c3f7-125">Creating the MSXDBCDC Database</span></span>  
 <span data-ttu-id="5c3f7-126">必须首先创建 MSXDBCDC 数据库，然后才能定义 Oracle CDC 服务。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-126">An MSXDBCDC database must be created before the Oracle CDC Service can be defined.</span></span> <span data-ttu-id="5c3f7-127">在一个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例上只能创建一个 MSXDBCDC 数据库。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-127">You can create only one MSXDBCDC database on a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-128">在您为 Oracle CDC 准备 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库时创建 MSXDBCDC 数据库。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-128">The MSXDBCDC database is created when you prepare a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database for Oracle CDC.</span></span> <span data-ttu-id="5c3f7-129">此操作可通过使用 Oracle CDC 服务配置控制台或通过运行 CDC 服务配置控制台生成的创建脚本来完成。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-129">This can be done by using the Oracle CDC Service Configuration Console or by running a creation script that is generated by the CDC Service Configuration Console.</span></span>  
  
 <span data-ttu-id="5c3f7-130">此数据库的所有者是 Oracle CDC 服务管理员，该管理员控制在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例下承载的所有 Oracle CDC 实例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-130">The owner of this database is the Oracle CDC Service Administrator, who can control all of the Oracle CDC instances hosted under the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="5c3f7-131">**请参阅：**</span><span class="sxs-lookup"><span data-stu-id="5c3f7-131">**See also:**</span></span>  
  
 [<span data-ttu-id="5c3f7-132">如何为 CDC 准备 SQL Server</span><span class="sxs-lookup"><span data-stu-id="5c3f7-132">How to Prepare SQL Server for CDC</span></span>](prepare-sql-server-for-cdc.md)  
  
### <a name="the-msxdbcdc-database-tables"></a><span data-ttu-id="5c3f7-133">MSXDBCDC 数据库表</span><span class="sxs-lookup"><span data-stu-id="5c3f7-133">The MSXDBCDC Database Tables</span></span>  
 <span data-ttu-id="5c3f7-134">本节介绍 MSXDBCDC 数据库中的以下表。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-134">This section describes the following tables in the MSXDBCDC database.</span></span>  
  
-   [<span data-ttu-id="5c3f7-135">dbo.xdbcdc_trace</span><span class="sxs-lookup"><span data-stu-id="5c3f7-135">dbo.xdbcdc_trace</span></span>](#BKMK_dboxdbcdc_trace)  
  
-   [<span data-ttu-id="5c3f7-136">dbo.xdbcdc_databases</span><span class="sxs-lookup"><span data-stu-id="5c3f7-136">dbo.xdbcdc_databases</span></span>](#BKMK_dboxdbcdc_databases)  
  
-   [<span data-ttu-id="5c3f7-137">dbo.xdbcdc_services</span><span class="sxs-lookup"><span data-stu-id="5c3f7-137">dbo.xdbcdc_services</span></span>](#BKMK_dboxdbcdc_services)  
  
###  <a name="dboxdbcdc_trace"></a><a name="BKMK_dboxdbcdc_trace"></a> <span data-ttu-id="5c3f7-138">dbo.xdbcdc_trace</span><span class="sxs-lookup"><span data-stu-id="5c3f7-138">dbo.xdbcdc_trace</span></span>  
 <span data-ttu-id="5c3f7-139">此表存储 Oracle CDC 服务的跟踪信息。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-139">This table stores tracing information for the Oracle CDC Service.</span></span> <span data-ttu-id="5c3f7-140">此表中存储的信息包括显著的状态更改和跟踪记录。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-140">The information stored in this table includes notable status changes and trace records.</span></span>  
  
 <span data-ttu-id="5c3f7-141">Oracle CDC 服务将错误记录和某些信息记录写入 Windows 事件日志以及跟踪表。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-141">The Oracle CDC Service writes error records and some of the information records to both the Windows event log and the trace table.</span></span> <span data-ttu-id="5c3f7-142">在某些情况下，该跟踪表可能无法访问，此时，可从事件日志访问错误信息。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-142">In some cases the trace table may not be accessible, in which case the error information is accessible from the event log.</span></span>  
  
 <span data-ttu-id="5c3f7-143">下面介绍在 **dbo.xdbcdc_trace** 表中包括的项。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-143">The following describes the items that are included in the **dbo.xdbcdc_trace** table.</span></span>  
  
|<span data-ttu-id="5c3f7-144">Item</span><span class="sxs-lookup"><span data-stu-id="5c3f7-144">Item</span></span>|<span data-ttu-id="5c3f7-145">说明</span><span class="sxs-lookup"><span data-stu-id="5c3f7-145">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="5c3f7-146">timestamp</span><span class="sxs-lookup"><span data-stu-id="5c3f7-146">timestamp</span></span>|<span data-ttu-id="5c3f7-147">写入跟踪日志时的准确 UTC 时间戳。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-147">The exact UTC timestamp when the trace record was written.</span></span>|  
|<span data-ttu-id="5c3f7-148">type</span><span class="sxs-lookup"><span data-stu-id="5c3f7-148">type</span></span>|<span data-ttu-id="5c3f7-149">包含以下值之一。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-149">Contains one of the following values.</span></span><br /><br /> <span data-ttu-id="5c3f7-150">ERROR</span><span class="sxs-lookup"><span data-stu-id="5c3f7-150">ERROR</span></span><br /><br /> <span data-ttu-id="5c3f7-151">INFO</span><span class="sxs-lookup"><span data-stu-id="5c3f7-151">INFO</span></span><br /><br /> <span data-ttu-id="5c3f7-152">TRACE</span><span class="sxs-lookup"><span data-stu-id="5c3f7-152">TRACE</span></span>|  
|<span data-ttu-id="5c3f7-153">节点</span><span class="sxs-lookup"><span data-stu-id="5c3f7-153">node</span></span>|<span data-ttu-id="5c3f7-154">写入记录的节点的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-154">The name of the node on which the record was written.</span></span>|  
|<span data-ttu-id="5c3f7-155">status</span><span class="sxs-lookup"><span data-stu-id="5c3f7-155">status</span></span>|<span data-ttu-id="5c3f7-156">状态表使用的状态代码。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-156">The status code that is used by the state table.</span></span>|  
|<span data-ttu-id="5c3f7-157">sub_status</span><span class="sxs-lookup"><span data-stu-id="5c3f7-157">sub_status</span></span>|<span data-ttu-id="5c3f7-158">状态表使用的子状态代码。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-158">The substatus code that is used by the state table.</span></span>|  
|<span data-ttu-id="5c3f7-159">status_message</span><span class="sxs-lookup"><span data-stu-id="5c3f7-159">status_message</span></span>|<span data-ttu-id="5c3f7-160">状态表使用的状态消息。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-160">The status message that is used by the state table.</span></span>|  
|<span data-ttu-id="5c3f7-161">target</span><span class="sxs-lookup"><span data-stu-id="5c3f7-161">source</span></span>|<span data-ttu-id="5c3f7-162">生成了跟踪记录的 Oracle CDC 组件的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-162">The name of the Oracle CDC component that produced the trace record.</span></span>|  
|<span data-ttu-id="5c3f7-163">text_data</span><span class="sxs-lookup"><span data-stu-id="5c3f7-163">text_data</span></span>|<span data-ttu-id="5c3f7-164">在错误或跟踪记录包含文本负载时的附加文本数据。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-164">Additional text data for cases when the error or trace record contains a textual payload.</span></span>|  
|<span data-ttu-id="5c3f7-165">binary_data</span><span class="sxs-lookup"><span data-stu-id="5c3f7-165">binary_data</span></span>|<span data-ttu-id="5c3f7-166">在错误或跟踪记录包含二进制负载时的附加二进制数据。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-166">Additional binary data for cases when the error or trace record contains a binary payload.</span></span>|  
  
 <span data-ttu-id="5c3f7-167">Oracle CDC 实例将根据更改表保持策略删除旧的跟踪表行。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-167">The Oracle CDC instance will delete old trace table rows according to the change tables retention policy.</span></span>  
  
###  <a name="dboxdbcdc_databases"></a><a name="BKMK_dboxdbcdc_databases"></a> <span data-ttu-id="5c3f7-168">dbo.xdbcdc_databases</span><span class="sxs-lookup"><span data-stu-id="5c3f7-168">dbo.xdbcdc_databases</span></span>  
 <span data-ttu-id="5c3f7-169">此表包含当前 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例中用于 Oracle CDC 数据库的 CDC 服务的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-169">This table contains the names of CDC Service for Oracle CDC databases in the current [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-170">每个数据库都对应于一个 Oracle CDC 实例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-170">Each database corresponds to an Oracle CDC instance.</span></span> <span data-ttu-id="5c3f7-171">Oracle CDC 服务使用此表来确定哪些实例要启动或停止以及哪些实例要重新配置。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-171">The Oracle CDC Service uses this table to determine which instances to start or stop and which instances to reconfigure.</span></span>  
  
 <span data-ttu-id="5c3f7-172">下表介绍在 **dbo.xdbcdc_databases** 表中包括的项。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-172">The following table describes the items that are included in the **dbo.xdbcdc_databases** table.</span></span>  
  
|<span data-ttu-id="5c3f7-173">Item</span><span class="sxs-lookup"><span data-stu-id="5c3f7-173">Item</span></span>|<span data-ttu-id="5c3f7-174">说明</span><span class="sxs-lookup"><span data-stu-id="5c3f7-174">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="5c3f7-175">name</span><span class="sxs-lookup"><span data-stu-id="5c3f7-175">name</span></span>|<span data-ttu-id="5c3f7-176">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例中 Oracle 数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-176">The name of the Oracle database in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>|  
|<span data-ttu-id="5c3f7-177">config_version</span><span class="sxs-lookup"><span data-stu-id="5c3f7-177">config_version</span></span>|<span data-ttu-id="5c3f7-178">相应 CDC 数据库 **xdbcdc_config** 表中上次更改的时间戳 (UTC) 或者此表中当前行的时间戳 (UTC)。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-178">The timestamp (UTC) for the last change in the corresponding CDC database **xdbcdc_config** table or the timestamp (UTC) for the current row in this table.</span></span><br /><br /> <span data-ttu-id="5c3f7-179">UPDATE 触发器将此项的值强制为 GETUTCDATE()。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-179">The UPDATE trigger enforces a value of GETUTCDATE() for this item.</span></span> <span data-ttu-id="5c3f7-180">**config_version** 使 CDC 服务可以标识需要检查是否有配置更改或启用/禁用的 CDC 实例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-180">**config_version** lets the CDC service identify the CDC instance that needs to be checked for configuration change or for enabling/disabling.</span></span>|  
|<span data-ttu-id="5c3f7-181">cdc_service_name</span><span class="sxs-lookup"><span data-stu-id="5c3f7-181">cdc_service_name</span></span>|<span data-ttu-id="5c3f7-182">此项确定哪一 Oracle CDC 服务处理所选 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-182">This item determines which Oracle CDC Service handles the selected Oracle database.</span></span>|  
|<span data-ttu-id="5c3f7-183">已启用</span><span class="sxs-lookup"><span data-stu-id="5c3f7-183">enabled</span></span>|<span data-ttu-id="5c3f7-184">指示 Oracle CDC 实例是处于活动状态 (1) 还是被禁用 (0)。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-184">Indicates whether the Oracle CDC instance is active (1) or disabled (0).</span></span> <span data-ttu-id="5c3f7-185">在 Oracle CDC 服务启动时，只启动标记有启用 (1) 的实例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-185">When the Oracle CDC Service starts only the instances marked enable (1) are started.</span></span><br /><br /> <span data-ttu-id="5c3f7-186">**注意**：Oracle CDC 实例可能会由于无法重试的错误而成为禁用的实例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-186">**Note**: An Oracle CDC instance can become disabled due to an error that is not retryable.</span></span> <span data-ttu-id="5c3f7-187">在此情况下，必须在解决错误后手动重新启动该实例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-187">In this case, the instance must be restarted manually after the error is resolved.</span></span>|  
  
###  <a name="dboxdbcdc_services"></a><a name="BKMK_dboxdbcdc_services"></a> <span data-ttu-id="5c3f7-188">dbo.xdbcdc_services</span><span class="sxs-lookup"><span data-stu-id="5c3f7-188">dbo.xdbcdc_services</span></span>  
 <span data-ttu-id="5c3f7-189">此表列出了与主 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例相关联的 CDC 服务。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-189">This table lists the CDC services associated with the host [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-190">此表由 CDC 设计器控制台用来确定为本地 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例配置的 CDC 服务的列表。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-190">This table is used by the CDC Designer Console to determine the list of CDC services that are configured for the local [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-191">CDC 服务还使用该表确保只有一个正在运行的 Windows 服务处理给定的 Oracle CDC 服务名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-191">It is also used by the CDC service to ensure that only one running Windows service handles a given Oracle CDC Service name.</span></span>  
  
 <span data-ttu-id="5c3f7-192">下表介绍在 **dbo.xdbcdc_databases** 表中包括的捕获状态项。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-192">The following describes the capture state items that are included in the **dbo.xdbcdc_databases** table.</span></span>  
  
|<span data-ttu-id="5c3f7-193">Item</span><span class="sxs-lookup"><span data-stu-id="5c3f7-193">Item</span></span>|<span data-ttu-id="5c3f7-194">说明</span><span class="sxs-lookup"><span data-stu-id="5c3f7-194">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="5c3f7-195">cdc_service_name</span><span class="sxs-lookup"><span data-stu-id="5c3f7-195">cdc_service_name</span></span>|<span data-ttu-id="5c3f7-196">Oracle CDC 服务的名称（Windows 服务名称）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-196">The name of the Oracle CDC Service (the Windows service name).</span></span>|  
|<span data-ttu-id="5c3f7-197">cdc_service_sql_login</span><span class="sxs-lookup"><span data-stu-id="5c3f7-197">cdc_service_sql_login</span></span>|<span data-ttu-id="5c3f7-198">Oracle CDC 服务用于连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 登录名。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-198">The name of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login used by the Oracle CDC Service to connect to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-199">将创建一个名为 cdc_service 的新的 SQL 用户并且与该登录名相关联，然后将其作为 db_ddladmin、db_datareader 和 db_datawriter 固定数据库角色的成员为该服务处理的每个 CDC 数据库添加。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-199">A new SQL User named cdc_service is created and associated with this login name and is then added as a member of the db_ddladmin, db_datareader and db_datawriter fixed database roles for each CDC database handled by the service.</span></span>|  
|<span data-ttu-id="5c3f7-200">ref_count</span><span class="sxs-lookup"><span data-stu-id="5c3f7-200">ref_count</span></span>|<span data-ttu-id="5c3f7-201">此项对安装了同一个 Oracle CDC 服务的计算机的数目进行计数。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-201">This item counts the number of machines where the same Oracle CDC Service is installed.</span></span> <span data-ttu-id="5c3f7-202">每增加一个同名的 Oracle CDC 服务，该计数就会递增，并且在删除此类服务时该计数将递减。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-202">It gets incremented with each addition of same-named Oracle CDC service, and it is decremented when such a service is removed.</span></span> <span data-ttu-id="5c3f7-203">当该计数器达到零时，将删除此行。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-203">When the counter reaches zero, this row is deleted.</span></span>|  
|<span data-ttu-id="5c3f7-204">active_service_node</span><span class="sxs-lookup"><span data-stu-id="5c3f7-204">active_service_node</span></span>|<span data-ttu-id="5c3f7-205">当前正处理 CDC 服务的 Windows 节点的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-205">The name of the Windows node that currently handles the CDC service.</span></span> <span data-ttu-id="5c3f7-206">在该服务正确停止后，该列将设置为 Null，指示不再有处于活动状态的服务。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-206">When the service is stopped correctly, this column is set to null, indicating that there is no longer an active service.</span></span>|  
|<span data-ttu-id="5c3f7-207">active_service_heartbeat</span><span class="sxs-lookup"><span data-stu-id="5c3f7-207">active_service_heartbeat</span></span>|<span data-ttu-id="5c3f7-208">此项跟踪当前 CDC 服务以便确定该服务是否仍处于活动状态。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-208">This item tracks the current CDC service to determine if it still active.</span></span><br /><br /> <span data-ttu-id="5c3f7-209">此项将定期使用处于活动状态的 CDC 服务的当前数据库 UTC 时间戳进行更新。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-209">This item is updated with the current database UTC timestamp for the active CDC service at regular intervals.</span></span> <span data-ttu-id="5c3f7-210">默认时间间隔为 30 秒，但可以配置该时间间隔。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-210">The default interval is 30 seconds, however the interval is configurable.</span></span><br /><br /> <span data-ttu-id="5c3f7-211">在某一挂起的 CDC 服务检测到在经过了配置的时间间隔后检测信号未更新，则该挂起的服务将尝试接管处于活动状态的 CDC 服务角色。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-211">When a pending CDC service detects that the heartbeat was not updated after the configured interval has passed, the pending service attempts to take over the active CDC service role.</span></span>|  
|<span data-ttu-id="5c3f7-212">选项</span><span class="sxs-lookup"><span data-stu-id="5c3f7-212">options</span></span>|<span data-ttu-id="5c3f7-213">此项指定辅助选项，例如，跟踪或优化。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-213">This item specifies the secondary options, such as tracing or tuning.</span></span> <span data-ttu-id="5c3f7-214">它是以 **name[=value][; ]** 的形式编写的。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-214">It is written in the form of **name[=value][; ]**.</span></span> <span data-ttu-id="5c3f7-215">该选项字符串使用与 ODBC 连接字符串相同的语义。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-215">The options string uses the same semantics as the ODBC connection string.</span></span> <span data-ttu-id="5c3f7-216">如果该选项为布尔值（值为 yes/no），则该值只能包含名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-216">If the option is Boolean (with a value of yes/no), the value can include the name only.</span></span><br /><br /> <span data-ttu-id="5c3f7-217">跟踪具有以下可能值：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-217">trace has the following possible values:</span></span><br /><br /> <span data-ttu-id="5c3f7-218">是</span><span class="sxs-lookup"><span data-stu-id="5c3f7-218">true</span></span><br /><br /> <span data-ttu-id="5c3f7-219">on</span><span class="sxs-lookup"><span data-stu-id="5c3f7-219">on</span></span><br /><br /> <span data-ttu-id="5c3f7-220">false</span><span class="sxs-lookup"><span data-stu-id="5c3f7-220">false</span></span><br /><br /> <span data-ttu-id="5c3f7-221">关闭</span><span class="sxs-lookup"><span data-stu-id="5c3f7-221">off</span></span><br /><br /> <span data-ttu-id="5c3f7-222">\<class name>[,class name>]</span><span class="sxs-lookup"><span data-stu-id="5c3f7-222">\<class name>[,class name>]</span></span><br /><br /> <span data-ttu-id="5c3f7-223">默认值是 **false**秒。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-223">The default value is **false**.</span></span><br /><br /> <br /><br /> <span data-ttu-id="5c3f7-224">**service_heartbeat_interval** 是服务更新 active_service_heartbeat 列的时间间隔（秒）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-224">**service_heartbeat_interval** is the time interval (in seconds) for the service to update the active_service_heartbeat column.</span></span> <span data-ttu-id="5c3f7-225">默认值为 **30**。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-225">The default value is **30**.</span></span> <span data-ttu-id="5c3f7-226">最大值为 **3600**。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-226">The maximum value is **3600**.</span></span><br /><br /> <span data-ttu-id="5c3f7-227">**service_config_polling_interval** 是 CDC 服务检查配置更改的轮询时间间隔（秒）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-227">**service_config_polling_interval** is the polling interval (in seconds) for the CDC service to check for configuration changes.</span></span> <span data-ttu-id="5c3f7-228">默认值为 **30**。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-228">The default value is **30**.</span></span> <span data-ttu-id="5c3f7-229">最大值为 **3600**。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-229">The maximum value is **3600**.</span></span><br /><br /> <span data-ttu-id="5c3f7-230">**sql_command_timeout** 是使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的命令超时值。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-230">**sql_command_timeout** is the command timeout that works with the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5c3f7-231">默认值是 **1**秒。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-231">The default value is **1**.</span></span> <span data-ttu-id="5c3f7-232">最大值为 **3600**。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-232">The maximum value is **3600**.</span></span>|  
||  
  
### <a name="the-msxdbcdc-database-stored-procedures"></a><span data-ttu-id="5c3f7-233">MSXDBCDC 数据库存储过程</span><span class="sxs-lookup"><span data-stu-id="5c3f7-233">The MSXDBCDC Database Stored Procedures</span></span>  
 <span data-ttu-id="5c3f7-234">本节介绍 MSXDBCDC 数据库中的以下存储过程。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-234">This section describes the following stored procedures in the MSXDBCDC database.</span></span>  
  
-   [<span data-ttu-id="5c3f7-235">dbo.xcbcdc_reset_db（数据库名称）</span><span class="sxs-lookup"><span data-stu-id="5c3f7-235">dbo.xcbcdc_reset_db(Database Name)</span></span>](#BKMK_dboxcbcdc_reset_db)  
  
-   [<span data-ttu-id="5c3f7-236">dbo.xdbcdc_disable_db(dbname)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-236">dbo.xdbcdc_disable_db(dbname)</span></span>](#BKMK_dboxdbcdc_disable_db)  
  
-   [<span data-ttu-id="5c3f7-237">dbo.xcbcdc_add_service(svcname,sqlusr)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-237">dbo.xcbcdc_add_service(svcname,sqlusr)</span></span>](#BKMK_dboxcbcdc_add_service)  
  
-   [<span data-ttu-id="5c3f7-238">dbo.xdbcdc_start(dbname)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-238">dbo.xdbcdc_start(dbname)</span></span>](#BKMK_dboxdbcdc_start)  
  
-   [<span data-ttu-id="5c3f7-239">dbo.xdbcdc_stop(dbname)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-239">dbo.xdbcdc_stop(dbname)</span></span>](#BKMK_dboxdbcdc_stop)  
  
###  <a name="dboxcbcdc_reset_dbdatabase-name"></a><a name="BKMK_dboxcbcdc_reset_db"></a> <span data-ttu-id="5c3f7-240">dbo.xcbcdc_reset_db（数据库名称）</span><span class="sxs-lookup"><span data-stu-id="5c3f7-240">dbo.xcbcdc_reset_db(Database Name)</span></span>  
 <span data-ttu-id="5c3f7-241">此过程将清除 Oracle CDC 实例的数据。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-241">This procedure clears the data of an Oracle CDC instance.</span></span> <span data-ttu-id="5c3f7-242">在以下情况下将使用该过程：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-242">It is used:</span></span>  
  
-   <span data-ttu-id="5c3f7-243">重新启动数据捕获并且忽略以前的数据，例如以下源数据库恢复或以下某些 Oracle 事务日志不可用的非活动情况。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-243">To restart data capturing while disregarding previous data, for example following source database recovery or following inactivity where some of the Oracle transaction logs are not available.</span></span>  
  
-   <span data-ttu-id="5c3f7-244">在 CDC 状态存在损坏时（特别是在任何 cdc.\*tables 数据中）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-244">When there is a corruption in the CDC state (specifically in the any cdc.\*tables data).</span></span>  
  
 <span data-ttu-id="5c3f7-245">**dbo.xcbcdc_reset_db** 过程执行以下任务：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-245">The **dbo.xcbcdc_reset_db** procedure performs the following tasks:</span></span>  
  
-   <span data-ttu-id="5c3f7-246">停止 CDC 实例（如果处于活动状态）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-246">Stops the CDC instance (if active).</span></span>  
  
-   <span data-ttu-id="5c3f7-247">截断更改表、 **cdc_lsn_mapping** 表和 **cdc_ddl_history** 表。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-247">Truncates the change tables, the **cdc_lsn_mapping** table, and the **cdc_ddl_history** table.</span></span>  
  
-   <span data-ttu-id="5c3f7-248">清除 **cdc_xdbcdc_state** 表。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-248">Clears the **cdc_xdbcdc_state** table.</span></span>  
  
-   <span data-ttu-id="5c3f7-249">清除每一行 **cdc_change_table**的 start_lsn 列。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-249">Clears the start_lsn column for each row of the **cdc_change_table**.</span></span>  
  
 <span data-ttu-id="5c3f7-250">若要使用 **dbo.xcbcdc_reset_db** 过程，用户必须是要命名的 CDC 实例数据库的 **db_owner** 数据库角色的成员，或者是 **sysadmin** 或 **serveradmin** 固定服务器角色的成员。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-250">To use the **dbo.xcbcdc_reset_db** procedure, the user must be a member of the **db_owner** database role for the CDC Instance database being named or else member of the **sysadmin** or **serveradmin** fixed server role.</span></span>  
  
 <span data-ttu-id="5c3f7-251">有关 CDC 表的详细信息，请参阅 CDC 设计器控制台的帮助系统中的“CDC 数据库”  。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-251">For more information about the CDC tables, see *The CDC Databases* in the help system in the CDC Designer Console.</span></span>  
  
###  <a name="dboxdbcdc_disable_dbdbname"></a><a name="BKMK_dboxdbcdc_disable_db"></a> <span data-ttu-id="5c3f7-252">dbo.xdbcdc_disable_db(dbname)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-252">dbo.xdbcdc_disable_db(dbname)</span></span>  
 <span data-ttu-id="5c3f7-253">**dbo.xcbcdc_disable_db** 过程执行以下任务：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-253">The **dbo.xcbcdc_disable_db** procedure performs the following task:</span></span>  
  
-   <span data-ttu-id="5c3f7-254">删除 MSXDBCDC.xdbcdc_databases 表中所选 CDC 数据库的条目。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-254">Removes the entry for the selected CDC database in the MSXDBCDC.xdbcdc_databases table.</span></span>  
  
 <span data-ttu-id="5c3f7-255">若要使用 **dbo.xcbcdc_disable_db** 过程，用户必须是要命名的 CDC 实例的 **db_owner** 数据库角色的成员，或者是 **sysadmin** 或 **serveradmin** 固定服务器角色的成员。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-255">To use the **dbo.xcbcdc_disable_db** procedure, the user must be a member of the **db_owner** database role for the CDC instance being named or a member of the **sysadmin** or **serveradmin** fixed server role.</span></span>  
  
 <span data-ttu-id="5c3f7-256">有关 CDC 表的详细信息，请参阅 CDC 设计器控制台的帮助系统中的“CDC 数据库”。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-256">For more information about the CDC tables, see The CDC Databases in the help system in the CDC Designer Console.</span></span>  
  
###  <a name="dboxcbcdc_add_servicesvcnamesqlusr"></a><a name="BKMK_dboxcbcdc_add_service"></a> <span data-ttu-id="5c3f7-257">dbo.xcbcdc_add_service(svcname,sqlusr)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-257">dbo.xcbcdc_add_service(svcname,sqlusr)</span></span>  
 <span data-ttu-id="5c3f7-258">**dbo.xcbcdc_add_service** 过程将一个条目添加到 **MSXDBCDC.xdbcdc_services** 表，并且以 1 为增量加到 **MSXDBCDC.xdbcdc_services** 表中该服务名称的 ref_count 列上。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-258">The **dbo.xcbcdc_add_service** procedure adds an entry to the **MSXDBCDC.xdbcdc_services** table and adds an increment of one to the ref_count column for the service name in the **MSXDBCDC.xdbcdc_services** table.</span></span> <span data-ttu-id="5c3f7-259">当 **ref_count** 为 0 时，将删除该行。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-259">When the **ref_count** is 0, it deletes the row.</span></span>  
  
 <span data-ttu-id="5c3f7-260">若要使用 dbo.xcbcdc_add_service \<service name, username> 过程，用户必须是要命名的 CDC 实例数据库的 db_owner 数据库角色的成员，或者是 sysadmin 或 serveradmin 固定服务器角色的成员   。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-260">To use the **dbo.xcbcdc_add_service\<service name, username>** procedure, the user must be a member of the **db_owner** database role for the CDC instance database being named or a member of the **sysadmin** or **serveradmin** fixed server role.</span></span>  
  
###  <a name="dboxdbcdc_startdbname"></a><a name="BKMK_dboxdbcdc_start"></a> <span data-ttu-id="5c3f7-261">dbo.xdbcdc_start(dbname)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-261">dbo.xdbcdc_start(dbname)</span></span>  
 <span data-ttu-id="5c3f7-262">**dbo.xdbcdc_start** 过程将一个开始请求发送到处理所选 CDC 实例的 CDC 服务，以便开始更改处理。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-262">The **dbo.xdbcdc_start** procedure sends a start request to the CDC service that handles the selected CDC instance to start the change processing.</span></span>  
  
 <span data-ttu-id="5c3f7-263">若要使用 **dbo.xcdcdc_start** 过程，用户必须是 CDC 数据库的 **db_owner** 数据库角色的成员，或者是 **实例的** sysadmin **或** serveradmin [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 角色的成员。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-263">To use the **dbo.xcdcdc_start** procedure, the user must be a member of the **db_owner** database role for the CDC database or be a member of either the **sysadmin** or **serveradmin** roles for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
###  <a name="dboxdbcdc_stopdbname"></a><a name="BKMK_dboxdbcdc_stop"></a> <span data-ttu-id="5c3f7-264">dbo.xdbcdc_stop(dbname)</span><span class="sxs-lookup"><span data-stu-id="5c3f7-264">dbo.xdbcdc_stop(dbname)</span></span>  
 <span data-ttu-id="5c3f7-265">**dbo.xdbcdc_stop** 过程将一个停止请求发送到处理所选 CDC 实例的 CDC 服务，以便停止更改处理。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-265">The **dbo.xdbcdc_stop** procedure sends a stop request to the CDC service that handles the selected CDC instance to stop the change processing.</span></span>  
  
 <span data-ttu-id="5c3f7-266">若要使用 **dbo.xcdcdc_stop** 过程，用户必须是 CDC 数据库的 **db_owner** 数据库角色的成员，或者是 **实例的** sysadmin **或** serveradmin [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 角色的成员。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-266">To use the **dbo.xcdcdc_stop** procedure, the user must be a member of the **db_owner** database role for the CDC database or be a member of either the **sysadmin** or **serveradmin** roles for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
##  <a name="the-cdc-databases"></a><a name="BKMK_CDCdatabase"></a> <span data-ttu-id="5c3f7-267">CDC 数据库</span><span class="sxs-lookup"><span data-stu-id="5c3f7-267">The CDC Databases</span></span>  
 <span data-ttu-id="5c3f7-268">在 CDC 服务中使用的每个 Oracle CDC 实例都与称作 CDC 数据库的特定 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库相关联。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-268">Each Oracle CDC instance used in a CDC service is associated with a specific [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database called the CDC Database.</span></span> <span data-ttu-id="5c3f7-269">此 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库在与 Oracle CDC 服务相关联的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例中承载。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-269">This [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database is hosted in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance associated with the Oracle CDC Service.</span></span>  
  
 <span data-ttu-id="5c3f7-270">该 CDC 数据库包含特殊的 cdc 架构。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-270">The CDC Database contains a special cdc schema.</span></span> <span data-ttu-id="5c3f7-271">Oracle CDC 服务通过前缀为 **xdbcdc_** 的表名称使用此架构。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-271">The Oracle CDC Service uses this schema with table names with the prefix **xdbcdc_**.</span></span> <span data-ttu-id="5c3f7-272">为安全和一致性目的使用此架构。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-272">This schema is used for security and consistency purposes.</span></span>  
  
 <span data-ttu-id="5c3f7-273">Oracle CDC 实例和 CDC 数据库都是使用 Oracle CDC 设计器控制台创建的。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-273">Both the Oracle CDC instance and the CDC databases are created using the Oracle CDC Designer Console.</span></span> <span data-ttu-id="5c3f7-274">有关 CDC 数据库的详细信息，请参阅您安装的 Oracle CDC 设计器控制台随附的文档。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-274">For more information about the CDC databases, see the documentation included with your installation of the Oracle CDC Designer Console.</span></span>  
  
##  <a name="using-the-command-line-to-configure-the-cdc-service"></a><a name="BKMK_CommandConfigCDC"></a> <span data-ttu-id="5c3f7-275">使用命令行配置 CDC 服务</span><span class="sxs-lookup"><span data-stu-id="5c3f7-275">Using the Command Line to Configure the CDC Service</span></span>  
 <span data-ttu-id="5c3f7-276">您可以从命令行操作 Oracle CDC 服务程序 (xdbcdcsvc.exe)。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-276">You can operate the Oracle CDC Service program (xdbcdcsvc.exe) from the command line.</span></span> <span data-ttu-id="5c3f7-277">该 CDC 服务程序是一种本机 32 位/64 位 Windows 可执行文件。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-277">The CDC service program is a native 32-bit/64-bit Windows executable file.</span></span>  
  
 <span data-ttu-id="5c3f7-278">**另请参阅**</span><span class="sxs-lookup"><span data-stu-id="5c3f7-278">**See also**</span></span>  
  
 [<span data-ttu-id="5c3f7-279">如何使用 CDC 服务命令行界面</span><span class="sxs-lookup"><span data-stu-id="5c3f7-279">How to Use the CDC Service Command-Line Interface</span></span>](how-to-use-the-cdc-service-command-line-interface.md)  
  
### <a name="service-program-commands"></a><span data-ttu-id="5c3f7-280">服务程序命令</span><span class="sxs-lookup"><span data-stu-id="5c3f7-280">Service Program Commands</span></span>  
 <span data-ttu-id="5c3f7-281">本节介绍用于配置 CDC 服务的以下命令。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-281">The section describes the following commands that are used to configure the CDC service.</span></span>  
  
-   [<span data-ttu-id="5c3f7-282">Config</span><span class="sxs-lookup"><span data-stu-id="5c3f7-282">Config</span></span>](#BKMK_config)  
  
-   [<span data-ttu-id="5c3f7-283">创建</span><span class="sxs-lookup"><span data-stu-id="5c3f7-283">Create</span></span>](#BKMK_create)  
  
-   [<span data-ttu-id="5c3f7-284">删除</span><span class="sxs-lookup"><span data-stu-id="5c3f7-284">Delete</span></span>](#BKMK_delete)  
  
###  <a name="config"></a><a name="BKMK_config"></a> <span data-ttu-id="5c3f7-285">Config</span><span class="sxs-lookup"><span data-stu-id="5c3f7-285">Config</span></span>  
 <span data-ttu-id="5c3f7-286">使用 `Config` 可从脚本更新 Oracle CDC 服务配置。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-286">Use `Config` to update an Oracle CDC Service configuration from a script.</span></span> <span data-ttu-id="5c3f7-287">该命令可用于仅更新 CDC 服务配置的特定部分（例如，在不知道非对称密钥密码的情况下仅更新连接字符串）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-287">The command can be used to update only specific parts of the CDC service configuration (for example, only the connection string without knowing the asymmetric key password).</span></span> <span data-ttu-id="5c3f7-288">该命令必须由计算机管理员运行。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-288">The command must be run by a computer administrator.</span></span> <span data-ttu-id="5c3f7-289">以下是 `Config` 命令的一个示例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-289">The following is an example of the `Config` command.</span></span>  
  
```  
"<path>xdbcdcsvc.exe" config  
     <cdc-service-name>  
     [connect= <sql-server-connection-string>]  
     [key= <asym-key-password>]  
     [svcacct= <windows-account> <windows-password>]  
     [sqlacct= <sql-username> <sql-password>]  
  
```  
  
 <span data-ttu-id="5c3f7-290">其中：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-290">Where:</span></span>  
  
 <span data-ttu-id="5c3f7-291">**cdc-service-name** 是要更新的 CDC 服务的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-291">**cdc-service-name** is the name of the CDC service to be updated.</span></span> <span data-ttu-id="5c3f7-292">这是必需参数。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-292">This is a required parameter.</span></span>  
  
 <span data-ttu-id="5c3f7-293">**sql-server-connection-string** 是要更新的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-293">**sql-server-connection-string** is the connect string to be updated.</span></span> <span data-ttu-id="5c3f7-294">如果该连接字符串包含空格或引号，则必须用双重引号 (") 将其括起来。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-294">If the connect string contains spaces or quotes then it must be wrapped in double-quotation marks (").</span></span> <span data-ttu-id="5c3f7-295">嵌入的引号通过双重引号转义。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-295">Embedded quotes are escaped by doubling the quotation marks.</span></span>  
  
 <span data-ttu-id="5c3f7-296">**asym-key-password** 是要更新的密码。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-296">**asym-key-password** is the password to be updated.</span></span>  
  
 <span data-ttu-id="5c3f7-297">**windows-account**、 **windows-password** 是要更新的服务的 Windows 帐户凭据。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-297">**windows-account**, **windows-password** are the Windows account credentials for the service that is being updated.</span></span>  
  
 <span data-ttu-id="5c3f7-298">**sql-username**、 **sql-password** 是要更新的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 身份验证凭据。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-298">**sql-username**, **sql-password** are the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] authentication credentials being updated.</span></span> <span data-ttu-id="5c3f7-299">如果 sqlacct 具有空的用户名和空的密码，则 Oracle CDC 服务将使用 Windows 身份验证连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-299">If sqlacct has both an empty username and empty password, then the Oracle CDC Service connects to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using Windows authentication.</span></span>  
  
 <span data-ttu-id="5c3f7-300">**注意**：包含空格或双引号的任何参数都必须用双引号 (") 括起来。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-300">**Note**: Any parameter that contains spaces or double quotes must be wrapped with double quotes (").</span></span> <span data-ttu-id="5c3f7-301">嵌入的双引号必须双重使用（例如，若要使用 **"A#B" D** 作为密码，应输入 **""A#B"" D"** ）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-301">Embedded double quotation marks must be doubled (for example to use **"A#B" D** as a password enter **""A#B"" D"**).</span></span>  
  
###  <a name="create"></a><a name="BKMK_create"></a> <span data-ttu-id="5c3f7-302">创建</span><span class="sxs-lookup"><span data-stu-id="5c3f7-302">Create</span></span>  
 <span data-ttu-id="5c3f7-303">使用 `Create` 可从脚本创建 Oracle CDC 服务配置。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-303">Use `Create` to create an Oracle CDC Service from a script.</span></span> <span data-ttu-id="5c3f7-304">该命令必须由计算机管理员运行。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-304">The command must be run by a computer administrator.</span></span> <span data-ttu-id="5c3f7-305">以下是 `Create` 命令的一个示例：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-305">The following is an example of the `Create` command:</span></span>  
  
```  
"<path>xdbcdcsvc.exe" create  
     <cdc-service-name>  
     [connect= "<sql-server-connection-string>"]  
     [key= <asym-key-password>]  
     [svcacct <windows-account> <windows-password>]  
     [sqlacct <sql-username> <sql-password>]  
```  
  
 <span data-ttu-id="5c3f7-306">其中：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-306">Where:</span></span>  
  
 <span data-ttu-id="5c3f7-307">**cdc-service-name** 是新创建的服务的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-307">**cdc-service-name** is the name of the newly created service.</span></span> <span data-ttu-id="5c3f7-308">如果已经有一个具有此名称的服务，则该程序将返回错误。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-308">If there is already a service with this name, the program returns an error.</span></span> <span data-ttu-id="5c3f7-309">不应使用包含空格的长名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-309">You should not use long names or names with spaces.</span></span> <span data-ttu-id="5c3f7-310">字符 "/" 和 "\\" 在服务名称中是无效字符。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-310">The characters "/" and "\\" are not valid characters in a service name.</span></span> <span data-ttu-id="5c3f7-311">这是必需参数。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-311">This is a required parameter.</span></span>  
  
 <span data-ttu-id="5c3f7-312">**sql-server-connection-string** 是用于连接到与新的 Oracle CDC 服务相关联的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-312">**sql-server-connection-string** is the connect string to use to connect to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance that is associated with the new Oracle CDC Service.</span></span>  
  
 <span data-ttu-id="5c3f7-313">**asym-key-password** 是保护用于存储源数据库日志挖掘凭据的非对称密钥的密码。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-313">**asym-key-password** is the password that protects the asymmetric key used for storing the source database log-mining credentials.</span></span>  
  
 <span data-ttu-id="5c3f7-314">**windows-account**、 **windows-password** 是与要创建的 Oracle CDC 服务相关联的帐户名称和密码。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-314">**windows-account**, **windows-password** are the account name and password associated with the Oracle CDC Service being created.</span></span>  
  
 <span data-ttu-id="5c3f7-315">**sql-username**、 **sql-password** 是用于连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 帐户名称和密码。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-315">**sql-username**, **sql-password** are the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account name and password used to connect to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="5c3f7-316">如果上述这些参数是空的，则 Oracle CDC 服务将使用 Windows 身份验证连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-316">If both of these parameters are empty, then CDC Service for Oracle connects to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using Windows authentication.</span></span>  
  
 <span data-ttu-id="5c3f7-317">**注意**：包含空格或双引号的任何参数都必须用双引号 (") 括起来。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-317">**Note**: Any parameter that contains spaces or double quotes must be wrapped with double quotes (").</span></span> <span data-ttu-id="5c3f7-318">嵌入的双引号必须双重使用（例如，若要使用 **"A#B" D** 作为密码，应输入 **""A#B"" D"** ）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-318">Embedded double quotation marks must be doubled (for example to use **"A#B" D** as a password enter **""A#B"" D"**.</span></span>  
  
###  <a name="delete"></a><a name="BKMK_delete"></a> <span data-ttu-id="5c3f7-319">删除</span><span class="sxs-lookup"><span data-stu-id="5c3f7-319">Delete</span></span>  
 <span data-ttu-id="5c3f7-320">使用 `Delete` 可从脚本完全删除 Oracle CDC 服务。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-320">Use `Delete` to cleanly delete the Oracle CDC Service from a script.</span></span> <span data-ttu-id="5c3f7-321">此命令必须由计算机管理员运行。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-321">This command must be run by a computer administrator.</span></span> <span data-ttu-id="5c3f7-322">以下是 `Delete` 命令的一个示例。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-322">The following is an example of the `Delete` command.</span></span>  
  
```  
"<path>xdbcdcsvc.exe" delete  
    <cdc-service-name>  
  
```  
  
 <span data-ttu-id="5c3f7-323">其中：</span><span class="sxs-lookup"><span data-stu-id="5c3f7-323">Where:</span></span>  
  
 <span data-ttu-id="5c3f7-324">**cdc-service-name** 是要删除的 CDC 服务的名称。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-324">**cdc-service-name** is the name of the CDC service to be deleted.</span></span>  
  
 <span data-ttu-id="5c3f7-325">**注意**：包含空格或双引号的任何参数都必须用双引号 (") 括起来。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-325">**Note**: Any parameter that contains spaces or double quotes must be wrapped with double quotes (").</span></span> <span data-ttu-id="5c3f7-326">嵌入的双引号必须双重使用（例如，若要使用 **"A#B" D** 作为密码，应输入 **""A#B"" D"** ）。</span><span class="sxs-lookup"><span data-stu-id="5c3f7-326">Embedded double quotation marks must be doubled (for example to use **"A#B" D** as a password enter **""A#B"" D"**).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5c3f7-327">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5c3f7-327">See Also</span></span>  
 <span data-ttu-id="5c3f7-328">[如何使用 CDC 服务命令行界面](how-to-use-the-cdc-service-command-line-interface.md) </span><span class="sxs-lookup"><span data-stu-id="5c3f7-328">[How to Use the CDC Service Command-Line Interface](how-to-use-the-cdc-service-command-line-interface.md) </span></span>  
 [<span data-ttu-id="5c3f7-329">如何为 CDC 准备 SQL Server</span><span class="sxs-lookup"><span data-stu-id="5c3f7-329">How to Prepare SQL Server for CDC</span></span>](prepare-sql-server-for-cdc.md)  
