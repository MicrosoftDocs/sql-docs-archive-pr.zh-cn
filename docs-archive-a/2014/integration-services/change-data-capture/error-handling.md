---
title: 错误处理 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: ff79e19d-afca-42a4-81b0-62d759380d11
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 083af496c60fb11afaf85068ba980e54986134d4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87683029"
---
# <a name="error-handling"></a><span data-ttu-id="aa0d1-102">错误处理</span><span class="sxs-lookup"><span data-stu-id="aa0d1-102">Error Handling</span></span>
  <span data-ttu-id="aa0d1-103">Oracle CDC 实例从单个 Oracle 源数据库（一个 Oracle RAC 群集被视为单个数据库）挖掘更改并且将提交的更改写入目标 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的 CDC 数据库的更改表中。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-103">An Oracle CDC Instance mines changes from a single Oracle source database (an Oracle RAC cluster is considered a single database) and writes the committed changes to change tables in a CDC database in the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="aa0d1-104">CDC 实例在称作 **cdc.xdbcdc_state**的系统表中维护其状态。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-104">A CDC Instance maintains its state in a system table called **cdc.xdbcdc_state**.</span></span> <span data-ttu-id="aa0d1-105">可随时对此表进行查询以便查找 CDC 实例的状态。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-105">This table can be queried any time to find the state of the CDC Instance.</span></span> <span data-ttu-id="aa0d1-106">有关 cdc.xdbcdc_state 表的详细信息，请参阅 [cdc.xdbcdc_state](the-oracle-cdc-databases.md#bkmk_cdcxdbcdc_state)。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-106">For more information about the cdc.xdbcdc_state table, see [cdc.xdbcdc_state](the-oracle-cdc-databases.md#bkmk_cdcxdbcdc_state).</span></span>  
  
 <span data-ttu-id="aa0d1-107">下表说明 xdbcdc_state 表中的 CDC 实例状态。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-107">The table below describes the CDC Instance states in the xdbcdc_state table.</span></span>  
  
 <span data-ttu-id="aa0d1-108">对于每个状态，在 cdc.xdbcdc_state 表的相应列中将显示以下两个指示：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-108">For each state, the following two indications are shown for the corresponding columns in the cdc.xdbcdc_state table:</span></span>  
  
-   <span data-ttu-id="aa0d1-109">实例未处于活动状态（没有当前正在处理它的 Windows 进程）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-109">Instance is not active (there is no Windows process currently handling it).</span></span> <span data-ttu-id="aa0d1-110">如果“活动”列的值为 1，则处理此特定 Oracle CDC 实例的 Oracle CDC 服务的子进程正在运行。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-110">If the **active** column value is 1, a subprocess of the Oracle CDC Service handling this specific Oracle CDC Instance is running.</span></span>  
  
-   <span data-ttu-id="aa0d1-111">如果“错误”列的值为 0，则 Oracle CDC 实例未处于错误条件。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-111">If the **error** column value is 0, the Oracle CDC Instance is not in an error condition.</span></span> <span data-ttu-id="aa0d1-112">如果“错误”列的值为 1，则存在阻止 Oracle CDC 实例处理更改的错误。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-112">If the **error** column value is 1, there is an error that prevents the Oracle CDC Instance from processing changes.</span></span>  
  
     <span data-ttu-id="aa0d1-113">如果“错误”列的值为 1 并且“活动”列的值也是 1，则对于 Oracle CDC 实例正在发生可恢复的错误，此错误可自动解决。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-113">If the **error** column has a value of 1 and the **active** column value is also 1, then a recoverable error is occurring for the Oracle CDC Instance, which can be resolved automatically.</span></span> <span data-ttu-id="aa0d1-114">如果“错误”列的值为 1 并且“活动”列的值为 0，则在大多数情况下，可能需要手动解决该问题，然后处理才会恢复。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-114">If the error column has a value of 1 and the active column has a value of 0, then in most cases a manual workaround may be needed to resolve the problem before processing can be resumed.</span></span>  
  
 <span data-ttu-id="aa0d1-115">下表描述 Oracle CDC 实例可在其状态表中报告的不同的状态代码。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-115">The following table describes the various status codes that the Oracle CDC Instance may report in its state table.</span></span>  
  
|<span data-ttu-id="aa0d1-116">状态</span><span class="sxs-lookup"><span data-stu-id="aa0d1-116">Status</span></span>|<span data-ttu-id="aa0d1-117">活动状态代码</span><span class="sxs-lookup"><span data-stu-id="aa0d1-117">Active Status Code</span></span>|<span data-ttu-id="aa0d1-118">错误状态代码</span><span class="sxs-lookup"><span data-stu-id="aa0d1-118">Error Status Code</span></span>|<span data-ttu-id="aa0d1-119">说明</span><span class="sxs-lookup"><span data-stu-id="aa0d1-119">Descriptions</span></span>|  
|------------|------------------------|-----------------------|------------------|  
|<span data-ttu-id="aa0d1-120">ABORTED</span><span class="sxs-lookup"><span data-stu-id="aa0d1-120">ABORTED</span></span>|<span data-ttu-id="aa0d1-121">0</span><span class="sxs-lookup"><span data-stu-id="aa0d1-121">0</span></span>|<span data-ttu-id="aa0d1-122">1</span><span class="sxs-lookup"><span data-stu-id="aa0d1-122">1</span></span>|<span data-ttu-id="aa0d1-123">Oracle CDC 实例未运行。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-123">The Oracle CDC Instance is not running.</span></span> <span data-ttu-id="aa0d1-124">ABORTED 子状态指示 Oracle CDC 实例曾处于活动状态但之后已意外停止。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-124">The ABORTED substatus indicates that the Oracle CDC Instance was ACTIVE and then has stopped unexpectedly.</span></span><br /><br /> <span data-ttu-id="aa0d1-125">ABORTED 子状态在 Oracle CDC 服务主实例检测到 Oracle CDC 实例未运行而其状态为 ACTIVE 时建立。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-125">The ABORTED substatus is established by the Oracle CDC Service main instance when it detects that the Oracle CDC Instance is not running while its status is ACTIVE.</span></span>|  
|<span data-ttu-id="aa0d1-126">ERROR</span><span class="sxs-lookup"><span data-stu-id="aa0d1-126">ERROR</span></span>|<span data-ttu-id="aa0d1-127">0</span><span class="sxs-lookup"><span data-stu-id="aa0d1-127">0</span></span>|<span data-ttu-id="aa0d1-128">1</span><span class="sxs-lookup"><span data-stu-id="aa0d1-128">1</span></span>|<span data-ttu-id="aa0d1-129">Oracle CDC 实例未运行。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-129">The Oracle CDC Instance is not running.</span></span> <span data-ttu-id="aa0d1-130">ERROR 状态指示 CDC 实例曾处于活动状态但之后遇到了无法恢复的错误并且禁用了自身。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-130">The ERROR status indicates that the CDC instance was ACTIVE but then encountered an error that is not recoverable and disabled itself.</span></span> <span data-ttu-id="aa0d1-131">ERROR 状态包含以下子状态代码：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-131">The ERROR status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="aa0d1-132">MISCONFIGURED：检测到无法恢复的配置错误。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-132">MISCONFIGURED: An unrecoverable configuration error was detected.</span></span><br /><br /> <span data-ttu-id="aa0d1-133">PASSWORD-REQUIRED：没有为适用于 Oracle 的 Attunity 更改数据捕获设计器设置密码或者配置的密码无效。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-133">PASSWORD-REQUIRED: There is no password set for the Change Data Capture Designer for Oracle by Attunity or the configured password is not valid.</span></span> <span data-ttu-id="aa0d1-134">这可能是因为对服务的非对称密钥密码进行的更改。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-134">This can be because of a change to the service asymmetric key password.</span></span>|  
|<span data-ttu-id="aa0d1-135">RUNNING</span><span class="sxs-lookup"><span data-stu-id="aa0d1-135">RUNNING</span></span>|<span data-ttu-id="aa0d1-136">1</span><span class="sxs-lookup"><span data-stu-id="aa0d1-136">1</span></span>|<span data-ttu-id="aa0d1-137">0</span><span class="sxs-lookup"><span data-stu-id="aa0d1-137">0</span></span>|<span data-ttu-id="aa0d1-138">CDC 实例正在运行并且正在处理更改记录。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-138">The CDC instance is running and is processing change records.</span></span> <span data-ttu-id="aa0d1-139">RUNNING 状态包含以下子状态代码：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-139">The RUNNING status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="aa0d1-140">IDLE：所有更改记录都已处理并存储在目标控制 (_CT) 表中。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-140">IDLE: All change records were processed and stored into the target control (**_CT**) tables.</span></span> <span data-ttu-id="aa0d1-141">没有针对控制表的活动事务。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-141">There is no active transaction with the control tables.</span></span><br /><br /> <span data-ttu-id="aa0d1-142">PROCESSING：存在正处理、但尚未写入控制 (_CT) 表的更改记录。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-142">PROCESSING: There are change records being processed that are not yet written to the control (**_CT**) tables.</span></span>|  
|<span data-ttu-id="aa0d1-143">STOPPED</span><span class="sxs-lookup"><span data-stu-id="aa0d1-143">STOPPED</span></span>|<span data-ttu-id="aa0d1-144">0</span><span class="sxs-lookup"><span data-stu-id="aa0d1-144">0</span></span>|<span data-ttu-id="aa0d1-145">0</span><span class="sxs-lookup"><span data-stu-id="aa0d1-145">0</span></span>|<span data-ttu-id="aa0d1-146">CDC 实例未在运行。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-146">The CDC instance is not running.</span></span> <span data-ttu-id="aa0d1-147">STOP 子状态指示 CDC 实例曾处于活动状态并且之后已正确停止。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-147">The STOP substatus indicates that the CDC instance was ACTIVE and then was stopped correctly.</span></span>|  
|<span data-ttu-id="aa0d1-148">SUSPENDED</span><span class="sxs-lookup"><span data-stu-id="aa0d1-148">SUSPENDED</span></span>|<span data-ttu-id="aa0d1-149">1</span><span class="sxs-lookup"><span data-stu-id="aa0d1-149">1</span></span>|<span data-ttu-id="aa0d1-150">1</span><span class="sxs-lookup"><span data-stu-id="aa0d1-150">1</span></span>|<span data-ttu-id="aa0d1-151">CDC 实例正在运行，但由于无法恢复的错误处理已挂起。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-151">The CDC instance is running but processing is suspended due to a recoverable error.</span></span> <span data-ttu-id="aa0d1-152">SUSPENDED 状态包含以下子状态代码：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-152">The SUSPENDED status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="aa0d1-153">DISCONNECTED：无法建立与源 Oracle 数据库的连接。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-153">DISCONNECTED: The connection with the source Oracle database cannot be established.</span></span> <span data-ttu-id="aa0d1-154">在连接恢复后会继续处理。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-154">Processing will resume once connection is restored.</span></span><br /><br /> <span data-ttu-id="aa0d1-155">STORAGE：存储已满。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-155">STORAGE: The storage is full.</span></span> <span data-ttu-id="aa0d1-156">在存储变为可用时将继续处理。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-156">Processing will resume when storage becomes available.</span></span> <span data-ttu-id="aa0d1-157">在某些情况下，此状态可能不会出现，因为状态表无法更新。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-157">In some cases, this status may not appear because the status table cannot be updated.</span></span><br /><br /> <span data-ttu-id="aa0d1-158">LOGGER：记录器连接到 Oracle，但由于临时问题而无法读取 Oracle 事务日志。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-158">LOGGER: The logger is connected to Oracle but it cannot read the Oracle transaction logs because of a temporary problem.</span></span>|  
|<span data-ttu-id="aa0d1-159">DATAERROR</span><span class="sxs-lookup"><span data-stu-id="aa0d1-159">DATAERROR</span></span>|<span data-ttu-id="aa0d1-160">x</span><span class="sxs-lookup"><span data-stu-id="aa0d1-160">x</span></span>|<span data-ttu-id="aa0d1-161">x</span><span class="sxs-lookup"><span data-stu-id="aa0d1-161">x</span></span>|<span data-ttu-id="aa0d1-162">此状态代码仅用于 **xdbcdc_trace** 表。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-162">This status code is only used for the **xdbcdc_trace** table.</span></span> <span data-ttu-id="aa0d1-163">它不显示在 **xdbcdc_state** 表中。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-163">It does not appear in the **xdbcdc_state** table.</span></span> <span data-ttu-id="aa0d1-164">具有此状态的跟踪记录指示 Oracle 日志记录存在问题。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-164">Trace records with this status indicate a problem with an Oracle log record.</span></span> <span data-ttu-id="aa0d1-165">错误日志记录以 BLOB 形式存储于“数据”列中。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-165">The bad log record is stored in the **data** column as a BLOB.</span></span> <span data-ttu-id="aa0d1-166">DATAERROR 状态包含以下子状态代码：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-166">The DATAERROR status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="aa0d1-167">BADRECORD：无法分析附加的日志记录。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-167">BADRECORD: The attached log record could not be parsed.</span></span><br /><br /> <span data-ttu-id="aa0d1-168">CONVERT-ERROR:某些列中的数据无法转换到捕获表中的目标列。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-168">CONVERT-ERROR: The data in some columns could not be converted to the target columns in the capture table.</span></span> <span data-ttu-id="aa0d1-169">只有在配置指定换错误应生成跟踪记录的情况下，才可能会出现此状态。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-169">This status may appear only if the configuration specifies that conversion errors should produce trace records.</span></span>|  
  
 <span data-ttu-id="aa0d1-170">因为 Oracle CDC 服务状态存储于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中，所以，有时候数据库中的状态值可能不会反映服务的实际状态。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-170">Because the Oracle CDC Service state is stored in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], there may be cases where the state value in the database might not reflect the actual state of the service.</span></span> <span data-ttu-id="aa0d1-171">最常见的情形是服务丢失其与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的连接并且无法恢复（由于任何原因）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-171">The most common scenario is when the service loses its connection to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and cannot resume it (for any reason).</span></span> <span data-ttu-id="aa0d1-172">在该情况下，存储在 **cdc.xdbcdc_state** 中的状态会变得陈旧。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-172">In that case, the state stored in **cdc.xdbcdc_state** becomes stale.</span></span> <span data-ttu-id="aa0d1-173">如果上次更新时间戳 (UTC) 不止早 1 分钟，则状态可能是陈旧的。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-173">If the last update timestamp (UTC) is more than a minute old, the state is probably stale.</span></span> <span data-ttu-id="aa0d1-174">在此情况下，使用 Windows 事件查看器可以查找与服务状态有关的附加信息。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-174">In this case, use the Windows Event Viewer to find additional information about the status of the service.</span></span>  
  
## <a name="error-handling"></a><span data-ttu-id="aa0d1-175">错误处理</span><span class="sxs-lookup"><span data-stu-id="aa0d1-175">Error Handling</span></span>  
 <span data-ttu-id="aa0d1-176">本节介绍 Oracle CDC 服务如何处理错误。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-176">This section describes how the Oracle CDC Service handles errors.</span></span>  
  
### <a name="logging"></a><span data-ttu-id="aa0d1-177">日志记录</span><span class="sxs-lookup"><span data-stu-id="aa0d1-177">Logging</span></span>  
 <span data-ttu-id="aa0d1-178">Oracle CDC 服务在下列位置之一中创建错误信息。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-178">The Oracle CDC Service creates error information in one of the following places.</span></span>  
  
-   <span data-ttu-id="aa0d1-179">Windows 事件日志，用于记录错误以及指示 Oracle CDC 服务生命周期事件（开始、停止、连接到/重新连接到目标 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-179">The Windows event log, which is used with logging errors and to indicate Oracle CDC Service life cycle events (starting, stopping, (re)connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance).</span></span>  
  
-   <span data-ttu-id="aa0d1-180">MSXDBCDC.dbo.xdbcdc_trace 表，用于 Oracle CDC 服务主进程进行的一般日志记录和跟踪。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-180">The MSXDBCDC.dbo.xdbcdc_trace table, which is used for general logging and tracing by the Oracle CDC Service main process.</span></span>  
  
-   <span data-ttu-id="aa0d1-181">\<cdc-database>.cdc.xdbcdc_trace 表，用于 Oracle CDC 实例进行的常规日志记录和跟踪。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-181">The \<cdc-database>.cdc.xdbcdc_trace table, which is used for general logging and tracing by Oracle CDC Instances.</span></span> <span data-ttu-id="aa0d1-182">这意味着与特定 Oracle CDC 实例相关的错误将记录到该实例的跟踪表中。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-182">This means that errors related to a specific Oracle CDC Instance are logged to that instance's trace table.</span></span>  
  
 <span data-ttu-id="aa0d1-183">在对该服务执行以下操作时 Oracle CDC 服务会将信息记入日志：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-183">Information is logged by the Oracle CDC service when the service:</span></span>  
  
-   <span data-ttu-id="aa0d1-184">服务控制管理器启动或停止该服务。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-184">Is started or stopped by the service control manager.</span></span>  
  
-   <span data-ttu-id="aa0d1-185">无法连接到关联的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例以及在失败后成功建立连接时。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-185">Cannot connect to the associated [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and when it successfully establishes a connection following a failure.</span></span>  
  
-   <span data-ttu-id="aa0d1-186">启动 Oracle CDC 服务实例时遇到错误。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-186">Encounters an error starting Oracle CDC Service instances.</span></span>  
  
-   <span data-ttu-id="aa0d1-187">检测到 Oracle CDC 实例已中止。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-187">Detects that an Oracle CDC Instance has aborted.</span></span>  
  
-   <span data-ttu-id="aa0d1-188">遇到意外错误。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-188">Encounters an unexpected error.</span></span>  
  
 <span data-ttu-id="aa0d1-189">在对实例执行以下操作时 Oracle CDC 实例会将信息记入日志：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-189">Information is logged by the CDC instance when the instance:</span></span>  
  
-   <span data-ttu-id="aa0d1-190">启用或禁用实例。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-190">Is enabled or disabled.</span></span>  
  
-   <span data-ttu-id="aa0d1-191">遇到错误。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-191">Encounters an error.</span></span>  
  
-   <span data-ttu-id="aa0d1-192">从可恢复的错误中恢复。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-192">Recovers from a recoverable error.</span></span>  
  
 <span data-ttu-id="aa0d1-193">跟踪表也用来记录详细跟踪信息以便进行故障排除。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-193">The trace table is also used for recording detailed trace information for troubleshooting.</span></span>  
  
### <a name="handling-source-oracle-connection-errors"></a><span data-ttu-id="aa0d1-194">处理源 Oracle 连接错误</span><span class="sxs-lookup"><span data-stu-id="aa0d1-194">Handling Source Oracle Connection Errors</span></span>  
 <span data-ttu-id="aa0d1-195">Oracle CDC 服务需要与源 Oracle 数据库永久连接。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-195">The Oracle CDC Service needs a persistent connection with the source Oracle database.</span></span> <span data-ttu-id="aa0d1-196">许多与服务配置无关的连接错误（例如网络错误）被认为是暂时的。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-196">Many connection errors that are unrelated to the service configuration (such as networking errors) are considered transient.</span></span> <span data-ttu-id="aa0d1-197">因此，如果 Oracle CDC 服务无法建立与 Oracle 数据库的连接（在启动时或在断开连接后的工作期间），该服务会将其状态更改为 SUSPENDED/DISCONNECTED 并进入重试循环，在此循环中，将定期重试连接。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-197">Therefore, if the Oracle CDC Service cannot establish connection with the Oracle database (either on start or during work following a disconnection), the service changes its state to SUSPENDED/DISCONNECTED and enters a retry loop where the connection is retried at regular intervals.</span></span> <span data-ttu-id="aa0d1-198">在重新建立连接后，将继续处理。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-198">When the connection is re-established, processing continues.</span></span>  
  
 <span data-ttu-id="aa0d1-199">其他类型的连接错误不是暂时的（例如，错误的凭据、权限不足以及错误的数据库地址）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-199">Other types of connection errors are not transient (for example, bad credentials, insufficient privileges, and bad database address).</span></span> <span data-ttu-id="aa0d1-200">在发生这些错误时，Oracle CDC 服务状态将设置为 ERROR/MISCONFIGURED 或 ERROR/PASSWORD-REQUIRED，并且该服务将被禁用。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-200">When these errors occur, the Oracle CDC Service state is set to ERROR/MISCONFIGURED or to ERROR/PASSWORD-REQUIRED and the service is disabled.</span></span> <span data-ttu-id="aa0d1-201">在用户修复基础错误后，应手动重新启用 Oracle CDC 实例以便继续处理。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-201">When the user fixes the underlying error, the Oracle CDC Instance should be manually re-enabled for processing to resume.</span></span>  
  
 <span data-ttu-id="aa0d1-202">如果不清楚错误是否是暂时的，则最好将其视为暂时的。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-202">When it is not clear whether the error is transient, it is best to assume it is transient.</span></span>  
  
### <a name="handling-target-sql-server-connection-errors"></a><span data-ttu-id="aa0d1-203">处理目标 SQL Server 连接错误</span><span class="sxs-lookup"><span data-stu-id="aa0d1-203">Handling Target SQL Server Connection Errors</span></span>  
 <span data-ttu-id="aa0d1-204">Oracle CDC 服务需要与目标 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的持久连接。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-204">The Oracle CDC Service needs a persistent connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="aa0d1-205">此连接用于：</span><span class="sxs-lookup"><span data-stu-id="aa0d1-205">This connection is used to:</span></span>  
  
-   <span data-ttu-id="aa0d1-206">确保目前没有同名称的其他服务正在使用此 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-206">Ensure that there are no other services by the same name currently working with this [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
-   <span data-ttu-id="aa0d1-207">检查启用或禁用了哪一 Oracle CDC 实例并且开始（或停止）其子进程。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-207">Check which Oracle CDC Instance is enabled or disabled and start (or stop) its subprocess.</span></span>  
  
 <span data-ttu-id="aa0d1-208">在服务建立与目标 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的连接并且确认它是按此名称正在工作的唯一 Oracle CDC 服务后，可检查启用了哪些 Oracle CDC 实例并且开始其处理进程（之后，该服务将在禁用这些进程后停止它们）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-208">When the service establishes a connection with the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and verifies that it is the only Oracle CDC service by this name that is working, it can check which Oracle CDC instances are enabled and start their handling processes (afterward the service stops these processes when they are disabled).</span></span> <span data-ttu-id="aa0d1-209">Oracle CDC 实例使用其 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 连接来处理 Oracle CDC 实例的 CDC 数据库。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-209">The Oracle CDC instances use their [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] connections to work with the CDC database of the Oracle CDC instance.</span></span>  
  
 <span data-ttu-id="aa0d1-210">在与目标 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的连接失败时如何处理错误取决于这些错误是否是暂时的。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-210">How errors are handled when the connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] fails depends on whether the errors are transient.</span></span>  
  
 <span data-ttu-id="aa0d1-211">对于已知的非暂时错误（例如错误的凭据、权限不足、错误的连接信息），该服务会将错误记录到 Windows 事件日志并停止运行（该服务无法写入跟踪表，因为它无法连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-211">For known non-transient errors (such as bad credentials, insufficient privileges, bad connection information), the service logs an error to the Windows event log and stops (it cannot write to the trace table because it cannot connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="aa0d1-212">在此情况下，用户必须解决该错误，然后重新启动 Oracle CDC Windows 服务。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-212">In this case, the user must resolve the error and restart the Oracle CDC Windows service.</span></span>  
  
 <span data-ttu-id="aa0d1-213">对于临时错误和意外错误，将重试几次该操作，并且如果在较长的一段时间中仍继续失败，则该 CDC 服务将停止其 CDC 实例子进程并且返回其初始连接重试（在此时，其他计算机上的 Oracle CDC 服务可能已控制该命名 CDC 服务）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-213">For transient errors and unexpected errors, the operation is retried several times and if the failure persists for a significant time period, the CDC Service stops its CDC Instance subprocesses and goes back to its initial connection attempt (by this time, an Oracle CDC Service on another machine may have already taken control of the named CDC service).</span></span>  
  
### <a name="handling-target-sql-server-storage-full-errors"></a><span data-ttu-id="aa0d1-214">处理目标 SQL Server 存储已满错误</span><span class="sxs-lookup"><span data-stu-id="aa0d1-214">Handling Target SQL Server Storage Full Errors</span></span>  
 <span data-ttu-id="aa0d1-215">在 Oracle CDC 服务检测到它无法将新的更改数据插入目标 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC 数据库后，它会将警告写入事件日志并且尝试插入跟踪记录（尽管出于同样原因可能失败）。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-215">When the Oracle CDC Service detects that it cannot insert new change data into the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC database, it writes a warning to the event log and tries to insert a trace record (although that may fail for the same reason).</span></span> <span data-ttu-id="aa0d1-216">然后，它将按照特定的间隔重试操作，直到操作成功。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-216">It then retries the operation in a specific interval until it is successful.</span></span>  
  
### <a name="handling-oracle-cdc-errors"></a><span data-ttu-id="aa0d1-217">处理 Oracle CDC 错误</span><span class="sxs-lookup"><span data-stu-id="aa0d1-217">Handling Oracle CDC Errors</span></span>  
 <span data-ttu-id="aa0d1-218">Oracle CDC 实例读取 Oracle 事务日志并对其进行处理。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-218">The Oracle CDC Instance reads the Oracle transaction log and processes it.</span></span> <span data-ttu-id="aa0d1-219">如果 CDC 处理遇到错误，则会在 **cdc.xdbcdc_state** 表中报告该错误，并且用户需要基于所报告的错误手动进行干预。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-219">If the CDC processing encounters an error, it is reported in the **cdc.xdbcdc_state** table and the user needs to manually intervene based on the reported error.</span></span>  
  
 <span data-ttu-id="aa0d1-220">例如，Oracle CDC 实例可能在延长的时间段中未处于活动状态，并且所需 Oracle 事务日志文件不再可用。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-220">For example, the Oracle CDC Instance may not be active for an extended duration and the required Oracle transaction log files are no longer available.</span></span> <span data-ttu-id="aa0d1-221">在此情况下，Oracle DBA 必须还原 Oracle CDC 实例的所需日志以便继续处理。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-221">In this case, the Oracle DBA must restore the required logs for the Oracle CDC Instance to resume processing.</span></span>  
  
### <a name="handling-unexpected-oracle-cdc-instance-failures"></a><span data-ttu-id="aa0d1-222">处理意外的 Oracle CDC 实例失败</span><span class="sxs-lookup"><span data-stu-id="aa0d1-222">Handling Unexpected Oracle CDC Instance Failures</span></span>  
 <span data-ttu-id="aa0d1-223">Oracle CDC 服务监视其 CDC 实例子进程。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-223">The Oracle CDC Service monitors its CDC Instance subprocesses.</span></span> <span data-ttu-id="aa0d1-224">在某一 CDC 实例子进程中止后，CDC 服务将在 MSXDBCDC.dbo.xdbcdc_databases 表中禁用该子进程，并且将其 cdc.xdbcdc_state 状态更新为 ABORTED。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-224">When a CDC Instance subprocess aborts, the CDC Service disables it in the MSXDBCDC.dbo.xdbcdc_databases table and updates its cdc.xdbcdc_state status to ABORTED.</span></span> <span data-ttu-id="aa0d1-225">在此情况下，将使用标准的 Windows 错误报告对话框来报告此错误，以便进一步进行分析。</span><span class="sxs-lookup"><span data-stu-id="aa0d1-225">In this case, the standard Windows Error Reporting dialog box is used to report this error for further analysis.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aa0d1-226">另请参阅</span><span class="sxs-lookup"><span data-stu-id="aa0d1-226">See Also</span></span>  
 <span data-ttu-id="aa0d1-227">[Change Data Capture Designer for Oracle by Attunity](change-data-capture-designer-for-oracle-by-attunity.md) </span><span class="sxs-lookup"><span data-stu-id="aa0d1-227">[Change Data Capture Designer for Oracle by Attunity](change-data-capture-designer-for-oracle-by-attunity.md) </span></span>  
 [<span data-ttu-id="aa0d1-228">Oracle CDC 实例</span><span class="sxs-lookup"><span data-stu-id="aa0d1-228">The Oracle CDC Instance</span></span>](the-oracle-cdc-instance.md)  
