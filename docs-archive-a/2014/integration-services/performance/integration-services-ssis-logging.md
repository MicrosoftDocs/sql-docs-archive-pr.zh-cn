---
title: Integration Services (SSIS) 日志 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- containers [Integration Services], logs
- Windows Event log provider [Integration Services]
- XML File log provider [Integration Services]
- SQL Server Profiler, log provider
- SQL Server Integration Services packages, logs
- SSIS packages, logs
- tasks [Integration Services], logs
- logs [Integration Services], log providers
- Integration Services packages, logs
- log providers [Integration Services]
- packages [Integration Services], logs
- Text File log provider
- SQL Server log provider
ms.assetid: 65e17889-371f-4951-9a7e-9932b2d0dcde
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f79a8bf7889948a17671f9373bec30e8fdf78ba2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87578282"
---
# <a name="integration-services-ssis-logging"></a><span data-ttu-id="d2a19-102">Integration Services (SSIS) 日志记录</span><span class="sxs-lookup"><span data-stu-id="d2a19-102">Integration Services (SSIS) Logging</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d2a19-103">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 包含可用来在包、容器和任务中执行日志记录的日志提供程序。</span><span class="sxs-lookup"><span data-stu-id="d2a19-103">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes log providers that you can use to implement logging in packages, containers, and tasks.</span></span> <span data-ttu-id="d2a19-104">通过日志记录可以捕获有关包的运行时信息，从而帮助您在每次运行包时对其进行审核和故障排除。</span><span class="sxs-lookup"><span data-stu-id="d2a19-104">With logging, you can capture run-time information about a package, helping you audit and troubleshoot a package every time it is run.</span></span> <span data-ttu-id="d2a19-105">例如，日志可以捕获运行包的操作员的姓名以及包开始和完成的时间。</span><span class="sxs-lookup"><span data-stu-id="d2a19-105">For example, a log can capture the name of the operator who ran the package and the time the package began and finished.</span></span>  
  
 <span data-ttu-id="d2a19-106">您可以配置在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 服务器上执行包的过程中出现的日志记录范围。</span><span class="sxs-lookup"><span data-stu-id="d2a19-106">You can configure the scope of logging that occurs during a package execution on the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span> <span data-ttu-id="d2a19-107">有关详细信息，请参阅 [在 SSIS 服务器上启用包执行的日志记录](../enable-logging-for-package-execution-on-the-ssis-server.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-107">For more information, see [Enable Logging for Package Execution on the SSIS Server](../enable-logging-for-package-execution-on-the-ssis-server.md).</span></span>  
  
 <span data-ttu-id="d2a19-108">在使用 **dtexec** 命令提示实用工具运行包时，还可以包括日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-108">You can also include logging when you run a package using the **dtexec** command prompt utility.</span></span> <span data-ttu-id="d2a19-109">有关支持日志记录的命令提示参数的详细信息，请参阅 [dtexec Utility](../packages/dtexec-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-109">For more information about the command prompt arguments that support logging, see [dtexec Utility](../packages/dtexec-utility.md).</span></span>  
  
## <a name="configure-logging-in-sql-server-data-tools"></a><span data-ttu-id="d2a19-110">在 SQL Server Data Tools 中配置日志记录</span><span class="sxs-lookup"><span data-stu-id="d2a19-110">Configure Logging in SQL Server Data Tools</span></span>  
 <span data-ttu-id="d2a19-111">日志与包关联，而且可以在包级进行配置。</span><span class="sxs-lookup"><span data-stu-id="d2a19-111">Logs are associated with packages and are configured at the package level.</span></span> <span data-ttu-id="d2a19-112">包中的每项任务或容器都可以将信息记录到任何包日志中。</span><span class="sxs-lookup"><span data-stu-id="d2a19-112">Each task or container in a package can log information to any package log.</span></span> <span data-ttu-id="d2a19-113">即使不对包本身启用日志记录，也可以对包中的任务和容器启用日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-113">The tasks and containers in a package can be enabled for logging even if the package itself is not.</span></span> <span data-ttu-id="d2a19-114">例如，您可以对执行 SQL 任务启用日志记录，而不对父包启用日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-114">For example, you can enable logging on an Execute SQL task without enabling logging on the parent package.</span></span> <span data-ttu-id="d2a19-115">包、容器或任务都可以将信息写入多个日志中。</span><span class="sxs-lookup"><span data-stu-id="d2a19-115">A package, container, or task can write to multiple logs.</span></span> <span data-ttu-id="d2a19-116">可以只在包上启用日志记录，也可以选择在包所包括的任何单个任务或容器上启用日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-116">You can enable logging on the package only, or you can choose to enable logging on any individual task or container that the package includes.</span></span>  
  
 <span data-ttu-id="d2a19-117">将日志添加到包时，请选择日志提供程序和日志的位置。</span><span class="sxs-lookup"><span data-stu-id="d2a19-117">When you add the log to a package, you choose the log provider and the location of the log.</span></span> <span data-ttu-id="d2a19-118">日志提供程序指定日志数据的格式：例如 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库或文本文件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-118">The log provider specifies the format for the log data: for example, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database or text file.</span></span>  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="d2a19-119">包含下列日志提供程序：</span><span class="sxs-lookup"><span data-stu-id="d2a19-119">includes the following log providers:</span></span>  
  
-   <span data-ttu-id="d2a19-120">文本文件日志提供程序，将日志项以逗号分隔值 (CSV) 格式写到 ASCII 文本文件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-120">The Text File log provider, which writes log entries to ASCII text files in a comma-separated value (CSV) format.</span></span> <span data-ttu-id="d2a19-121">这种提供程序的默认文件扩展名是 .log。</span><span class="sxs-lookup"><span data-stu-id="d2a19-121">The default file name extension for this provider is .log.</span></span>  
  
-   <span data-ttu-id="d2a19-122">[!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 日志提供程序，写入可用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 事件探查器查看的跟踪。</span><span class="sxs-lookup"><span data-stu-id="d2a19-122">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider, which writes traces that you can view using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler.</span></span> <span data-ttu-id="d2a19-123">这种提供程序的默认文件扩展名是 .trc。</span><span class="sxs-lookup"><span data-stu-id="d2a19-123">The default file name extension for this provider is .trc.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d2a19-124">无法在以 64 位模式运行的包中使用 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 日志提供程序。</span><span class="sxs-lookup"><span data-stu-id="d2a19-124">You cannot use the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider in a package that is running in 64-bit mode.</span></span>  
  
-   <span data-ttu-id="d2a19-125">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]日志提供程序，它将日志项写入 `sysssislog` 数据库中的表 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="d2a19-125">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider, which writes log entries to the `sysssislog` table in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span>  
  
-   <span data-ttu-id="d2a19-126">Windows 事件日志提供程序，将日志项写入本地计算机上 Windows 事件日志中的应用程序日志。</span><span class="sxs-lookup"><span data-stu-id="d2a19-126">The Windows Event log provider, which writes entries to the Application log in the Windows Event log on the local computer.</span></span>  
  
-   <span data-ttu-id="d2a19-127">XML 文件日志提供程序，将日志文件写入 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-127">The XML File log provider, which writes log files to an XML file.</span></span> <span data-ttu-id="d2a19-128">这种提供程序的默认文件扩展名是 .xml。</span><span class="sxs-lookup"><span data-stu-id="d2a19-128">The default file name extension for this provider is .xml.</span></span>  
  
 <span data-ttu-id="d2a19-129">如果要将日志提供程序添加到包或者以编程方式配置日志记录，可以使用 ProgID 或 ClassID 标识日志提供程序，而不必使用 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器在 **“配置 SSIS 日志”** 对话框中显示的名称。</span><span class="sxs-lookup"><span data-stu-id="d2a19-129">If you add a log provider to a package or configure logging programmatically, you can use either a ProgID or ClassID to identify the log provider, instead of using the names that [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer displays in the **Configure SSIS Logs** dialog box.</span></span>  
  
 <span data-ttu-id="d2a19-130">下表列出了用于 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 所包含日志提供程序的 ProgID 和 ClassID，以及日志提供程序写入的日志的位置。</span><span class="sxs-lookup"><span data-stu-id="d2a19-130">The following table lists the ProgID and ClassID for the log providers that [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes, and the location of the logs to which log providers write.</span></span>  
  
|<span data-ttu-id="d2a19-131">日志提供程序</span><span class="sxs-lookup"><span data-stu-id="d2a19-131">Log provider</span></span>|<span data-ttu-id="d2a19-132">ProgID</span><span class="sxs-lookup"><span data-stu-id="d2a19-132">ProgID</span></span>|<span data-ttu-id="d2a19-133">ClassID</span><span class="sxs-lookup"><span data-stu-id="d2a19-133">ClassID</span></span>|<span data-ttu-id="d2a19-134">位置</span><span class="sxs-lookup"><span data-stu-id="d2a19-134">Location</span></span>|  
|------------------|------------|-------------|--------------|  
|<span data-ttu-id="d2a19-135">文本文件</span><span class="sxs-lookup"><span data-stu-id="d2a19-135">Text file</span></span>|<span data-ttu-id="d2a19-136">DTS.LogProviderTextFile</span><span class="sxs-lookup"><span data-stu-id="d2a19-136">DTS.LogProviderTextFile</span></span>|<span data-ttu-id="d2a19-137">{0A039101-ACC1-4E06-943F-279948323883}</span><span class="sxs-lookup"><span data-stu-id="d2a19-137">{0A039101-ACC1-4E06-943F-279948323883}</span></span>|<span data-ttu-id="d2a19-138">日志提供程序使用的文件连接管理器指定此文本文件的路径。</span><span class="sxs-lookup"><span data-stu-id="d2a19-138">The File connection manager that the log provider uses specifies the path of the text file.</span></span>|  
|<span data-ttu-id="d2a19-139">SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="d2a19-139">SQL Server Profiler</span></span>|<span data-ttu-id="d2a19-140">DTS.LogProviderSQLProfiler</span><span class="sxs-lookup"><span data-stu-id="d2a19-140">DTS.LogProviderSQLProfiler</span></span>|<span data-ttu-id="d2a19-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span><span class="sxs-lookup"><span data-stu-id="d2a19-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span></span>|<span data-ttu-id="d2a19-142">日志提供程序使用的文件连接管理器指定 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]所使用的文件的路径。</span><span class="sxs-lookup"><span data-stu-id="d2a19-142">The File connection manager that the log provider uses specifies the path of the file used by [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>|  
|<span data-ttu-id="d2a19-143">SQL Server</span><span class="sxs-lookup"><span data-stu-id="d2a19-143">SQL Server</span></span>|<span data-ttu-id="d2a19-144">DTS.LogProviderSQLServer</span><span class="sxs-lookup"><span data-stu-id="d2a19-144">DTS.LogProviderSQLServer</span></span>|<span data-ttu-id="d2a19-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span><span class="sxs-lookup"><span data-stu-id="d2a19-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span></span>|<span data-ttu-id="d2a19-146">日志提供程序使用的 OLE DB 连接管理器指定包含存储日志项的 sysssislog 表的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 数据库。</span><span class="sxs-lookup"><span data-stu-id="d2a19-146">The OLE DB connection manager that the log provider uses specifies the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database that contains the sysssislog table with the log entries.</span></span>|  
|<span data-ttu-id="d2a19-147">Windows 事件日志</span><span class="sxs-lookup"><span data-stu-id="d2a19-147">Windows Event Log</span></span>|<span data-ttu-id="d2a19-148">DTS.LogProviderEventLog</span><span class="sxs-lookup"><span data-stu-id="d2a19-148">DTS.LogProviderEventLog</span></span>|<span data-ttu-id="d2a19-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span><span class="sxs-lookup"><span data-stu-id="d2a19-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span></span>|<span data-ttu-id="d2a19-150">Windows 事件查看器中的应用程序日志包含 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 日志信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-150">The Application log in Windows Event Viewer contains the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log information.</span></span>|  
|<span data-ttu-id="d2a19-151">XML 文件</span><span class="sxs-lookup"><span data-stu-id="d2a19-151">XML File</span></span>|<span data-ttu-id="d2a19-152">DTS.LogProviderXMLFile</span><span class="sxs-lookup"><span data-stu-id="d2a19-152">DTS.LogProviderXMLFile</span></span>|<span data-ttu-id="d2a19-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span><span class="sxs-lookup"><span data-stu-id="d2a19-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span></span>|<span data-ttu-id="d2a19-154">日志提供程序使用的文件连接管理器指定 XML 文件的路径。</span><span class="sxs-lookup"><span data-stu-id="d2a19-154">The File connection manager that the log provider uses specifies the path of the XML file.</span></span>|  
  
 <span data-ttu-id="d2a19-155">也可以创建自定义日志提供程序。</span><span class="sxs-lookup"><span data-stu-id="d2a19-155">You can also create custom log providers.</span></span> <span data-ttu-id="d2a19-156">有关详细信息，请参阅 [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-156">For more information, see [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md).</span></span>  
  
 <span data-ttu-id="d2a19-157">包中的日志提供程序是该包的日志提供程序集合的成员。</span><span class="sxs-lookup"><span data-stu-id="d2a19-157">The log providers in a package are members of the log providers collection of the package.</span></span> <span data-ttu-id="d2a19-158">在使用 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器创建包并实现日志记录时，您可以在 **设计器的** “包资源管理器” **选项卡上的** “日志提供程序” [!INCLUDE[ssIS](../../includes/ssis-md.md)] 文件夹中看到集合成员列表。</span><span class="sxs-lookup"><span data-stu-id="d2a19-158">When you create a package and implement logging by using [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you can see a list of the collection members in the **Log Provider** folders on the **Package Explorer** tab of [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
 <span data-ttu-id="d2a19-159">请提供日志提供程序的名称和说明，并指定日志提供程序使用的连接管理器，以配置日志提供程序。</span><span class="sxs-lookup"><span data-stu-id="d2a19-159">You configure a log provider by providing a name and description for the log provider and specifying the connection manager that the log provider uses.</span></span> <span data-ttu-id="d2a19-160">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 日志提供程序使用 OLE DB 连接管理器。</span><span class="sxs-lookup"><span data-stu-id="d2a19-160">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider uses an OLE DB connection manager.</span></span> <span data-ttu-id="d2a19-161">文本文件、 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]和 XML 文件日志提供程序全都使用文件连接管理器。</span><span class="sxs-lookup"><span data-stu-id="d2a19-161">The Text File, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], and XML File log providers all use File connection managers.</span></span> <span data-ttu-id="d2a19-162">Windows 事件日志提供程序不使用连接管理器，因为它直接写入 Windows 事件日志。</span><span class="sxs-lookup"><span data-stu-id="d2a19-162">The Windows Event log provider does not use a connection manager, because it writes directly to the Windows Event log.</span></span> <span data-ttu-id="d2a19-163">有关详细信息，请参阅 [OLE DB Connection Manager](../connection-manager/ole-db-connection-manager.md) 和 [File Connection Manager](../connection-manager/file-connection-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-163">For more information, see [OLE DB Connection Manager](../connection-manager/ole-db-connection-manager.md) and [File Connection Manager](../connection-manager/file-connection-manager.md).</span></span>  
  
### <a name="logging-customization"></a><span data-ttu-id="d2a19-164">自定义日志记录</span><span class="sxs-lookup"><span data-stu-id="d2a19-164">Logging Customization</span></span>  
 <span data-ttu-id="d2a19-165">为了自定义事件或自定义消息的日志记录， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 提供了要包括在日志项中的常用记录信息的架构。</span><span class="sxs-lookup"><span data-stu-id="d2a19-165">To customize the logging of an event or custom message, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] provides a schema of commonly logged information to include in log entries.</span></span> <span data-ttu-id="d2a19-166">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 日志架构定义您可以记录的信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-166">The [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log schema defines the information that you can log.</span></span> <span data-ttu-id="d2a19-167">您可以从日志架构中为每个日志项选择元素。</span><span class="sxs-lookup"><span data-stu-id="d2a19-167">You can select elements from the log schema for each log entry.</span></span>  
  
 <span data-ttu-id="d2a19-168">包及其容器和任务不必记录相同的信息，同一包或容器内的任务可以记录不同的信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-168">A package and its containers and tasks do not have to log the same information, and tasks within the same package or container can log different information.</span></span> <span data-ttu-id="d2a19-169">例如，包可以在包启动时记录操作员信息，一个任务可以记录任务失败的原因，而另一个任务可以在出现错误时记录信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-169">For example, a package can log operator information when the package starts, one task can log the source of the task's failure, and another task can log information when errors occur.</span></span> <span data-ttu-id="d2a19-170">如果包及其容器和任务使用多个日志，则相同信息会写入所有日志中。</span><span class="sxs-lookup"><span data-stu-id="d2a19-170">If a package and its containers and tasks use multiple logs, the same information is written to all the logs.</span></span>  
  
 <span data-ttu-id="d2a19-171">通过指定要记录的事件以及要为每个事件记录的信息，您可以选择满足自己需求的日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="d2a19-171">You can select a level of logging that suits your needs by specifying the events to log and the information to log for each event.</span></span> <span data-ttu-id="d2a19-172">您可能会发现一些事件提供的信息更为有用。</span><span class="sxs-lookup"><span data-stu-id="d2a19-172">You may find that some events provide more useful information than others.</span></span> <span data-ttu-id="d2a19-173">例如，对于 **PreExecute** 事件，您希望仅记录计算机名和操作员姓名，而对于 **Error** 事件，您希望记录所有可用的信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-173">For example, you might want to log only the computer and operator names for the **PreExecute** event but all available information for the **Error** event.</span></span>  
  
 <span data-ttu-id="d2a19-174">若要防止日志文件占用大量的磁盘空间或者避免过多的日志记录（这可能会降低性能），可以通过选择记录特定的事件和信息项来限制日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-174">To prevent log files from using large amounts of disk space, or to avoid excessive logging, which could degrade performance, you can limit logging by selecting specific events and information items to log.</span></span> <span data-ttu-id="d2a19-175">例如，您可以将日志配置为仅捕获每个错误的日期和计算机名。</span><span class="sxs-lookup"><span data-stu-id="d2a19-175">For example, you can configure a log to capture only the date and the computer name for each error.</span></span>  
  
 <span data-ttu-id="d2a19-176">在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器中，您可以使用 **“配置 SSIS 日志”** 对话框来定义日志记录选项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-176">In [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you define the logging options by using the **Configure SSIS Logs** dialog box.</span></span>  
  
#### <a name="log-schema"></a><span data-ttu-id="d2a19-177">日志架构</span><span class="sxs-lookup"><span data-stu-id="d2a19-177">Log Schema</span></span>  
 <span data-ttu-id="d2a19-178">下表介绍了日志架构中的元素：</span><span class="sxs-lookup"><span data-stu-id="d2a19-178">The following table describes the elements in the log schema.</span></span>  
  
|<span data-ttu-id="d2a19-179">元素</span><span class="sxs-lookup"><span data-stu-id="d2a19-179">Element</span></span>|<span data-ttu-id="d2a19-180">说明</span><span class="sxs-lookup"><span data-stu-id="d2a19-180">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="d2a19-181">Computer</span><span class="sxs-lookup"><span data-stu-id="d2a19-181">Computer</span></span>|<span data-ttu-id="d2a19-182">发生日志事件的计算机的名称。</span><span class="sxs-lookup"><span data-stu-id="d2a19-182">The name of the computer on which the log event occurred.</span></span>|  
|<span data-ttu-id="d2a19-183">操作员</span><span class="sxs-lookup"><span data-stu-id="d2a19-183">Operator</span></span>|<span data-ttu-id="d2a19-184">启动包的用户的标识。</span><span class="sxs-lookup"><span data-stu-id="d2a19-184">The identity of the user who launched the package.</span></span>|  
|<span data-ttu-id="d2a19-185">SourceName</span><span class="sxs-lookup"><span data-stu-id="d2a19-185">SourceName</span></span>|<span data-ttu-id="d2a19-186">发生日志事件的容器或任务的名称。</span><span class="sxs-lookup"><span data-stu-id="d2a19-186">The name of the container or task in which the log event occurred.</span></span>|  
|<span data-ttu-id="d2a19-187">SourceID</span><span class="sxs-lookup"><span data-stu-id="d2a19-187">SourceID</span></span>|<span data-ttu-id="d2a19-188">发生日志事件的包、 For 循环容器、Foreach 循环容器、序列容器或任务的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="d2a19-188">The unique identifier of the package; the For Loop, Foreach Loop, or Sequence container; or the task in which the log event occurred.</span></span>|  
|<span data-ttu-id="d2a19-189">ExecutionID</span><span class="sxs-lookup"><span data-stu-id="d2a19-189">ExecutionID</span></span>|<span data-ttu-id="d2a19-190">包执行实例的 GUID。</span><span class="sxs-lookup"><span data-stu-id="d2a19-190">The GUID of the package execution instance.</span></span><br /><br /> <span data-ttu-id="d2a19-191">注意：运行单个包可能会创建具有不同的 ExecutionID 元素的值的日志条目。</span><span class="sxs-lookup"><span data-stu-id="d2a19-191">Note: Running a single package might create log entries with different values for the ExecutionID element.</span></span> <span data-ttu-id="d2a19-192">例如，当在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]中运行包时，验证阶段可能会创建 ExecutionID 元素与 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]对应的日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-192">For example, when you run a package in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], the validation phase might create log entries with an ExecutionID element that corresponds to [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="d2a19-193">但是，执行阶段可能会创建 ExecutionID 元素与 dtshost.exe 对应的日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-193">However, the execution phase might create log entries with an ExecutionID element that corresponds to dtshost.exe.</span></span> <span data-ttu-id="d2a19-194">再比如，当运行包含“执行包”任务的包时，这些任务中的每个任务都会运行子包。</span><span class="sxs-lookup"><span data-stu-id="d2a19-194">For another example, when you run a package that contains Execute Package tasks, each of these tasks runs a child package.</span></span> <span data-ttu-id="d2a19-195">这些子包创建的日志项所具有的 ExecutionID 元素可能不同于父包创建的日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-195">These child packages might create log entries that have a different ExecutionID element than the log entries that the parent package creates.</span></span>|  
|<span data-ttu-id="d2a19-196">MessageText</span><span class="sxs-lookup"><span data-stu-id="d2a19-196">MessageText</span></span>|<span data-ttu-id="d2a19-197">与日志项关联的消息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-197">A message associated with the log entry.</span></span>|  
|<span data-ttu-id="d2a19-198">DataBytes</span><span class="sxs-lookup"><span data-stu-id="d2a19-198">DataBytes</span></span>|<span data-ttu-id="d2a19-199">日志项特定的字节数组。</span><span class="sxs-lookup"><span data-stu-id="d2a19-199">A byte array specific to the log entry.</span></span> <span data-ttu-id="d2a19-200">此字段的意义因日志项的不同而不同。</span><span class="sxs-lookup"><span data-stu-id="d2a19-200">The meaning of this field varies by log entry.</span></span>|  
  
 <span data-ttu-id="d2a19-201">下表介绍日志架构中三个附加元素，这些元素在 **“配置 SSIS 日志”** 对话框的 **“详细信息”** 选项卡中不可用。</span><span class="sxs-lookup"><span data-stu-id="d2a19-201">The following table describes three additional elements in the log schema that are not available on the **Details** tab of the **Configure SSIS Logs** dialog box.</span></span>  
  
|<span data-ttu-id="d2a19-202">元素</span><span class="sxs-lookup"><span data-stu-id="d2a19-202">Element</span></span>|<span data-ttu-id="d2a19-203">说明</span><span class="sxs-lookup"><span data-stu-id="d2a19-203">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="d2a19-204">StartTime</span><span class="sxs-lookup"><span data-stu-id="d2a19-204">StartTime</span></span>|<span data-ttu-id="d2a19-205">容器或任务开始运行的时间。</span><span class="sxs-lookup"><span data-stu-id="d2a19-205">The time at which the container or task starts to run.</span></span>|  
|<span data-ttu-id="d2a19-206">EndTime</span><span class="sxs-lookup"><span data-stu-id="d2a19-206">EndTime</span></span>|<span data-ttu-id="d2a19-207">容器或任务停止运行的时间。</span><span class="sxs-lookup"><span data-stu-id="d2a19-207">The time at which the container or task stops running.</span></span>|  
|<span data-ttu-id="d2a19-208">DataCode</span><span class="sxs-lookup"><span data-stu-id="d2a19-208">DataCode</span></span>|<span data-ttu-id="d2a19-209">可选整数值通常包含 <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> 枚举值，该枚举值指示运行该容器或任务的结果：</span><span class="sxs-lookup"><span data-stu-id="d2a19-209">An optional integer value that typically contains a value from the <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> enumeration that indicates the result of running the container or task:</span></span><br /><br /> <span data-ttu-id="d2a19-210">0 – 成功</span><span class="sxs-lookup"><span data-stu-id="d2a19-210">0 - Success</span></span><br /><br /> <span data-ttu-id="d2a19-211">1 - 失败</span><span class="sxs-lookup"><span data-stu-id="d2a19-211">1 - Failure</span></span><br /><br /> <span data-ttu-id="d2a19-212">2 – 已完成</span><span class="sxs-lookup"><span data-stu-id="d2a19-212">2 - Completed</span></span><br /><br /> <span data-ttu-id="d2a19-213">3 – 已取消</span><span class="sxs-lookup"><span data-stu-id="d2a19-213">3 - Canceled</span></span>|  
  
##### <a name="log-entries"></a><span data-ttu-id="d2a19-214">日志项</span><span class="sxs-lookup"><span data-stu-id="d2a19-214">Log Entries</span></span>  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="d2a19-215">支持预定义事件的日志项，并提供了可用于很多 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 对象的自定义日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-215">supports log entries on predefined events and provides custom log entries for many [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] objects.</span></span> <span data-ttu-id="d2a19-216">**设计器中的** “配置 SSIS 日志” [!INCLUDE[ssIS](../../includes/ssis-md.md)] 对话框列出了这些事件和自定义日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-216">The **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer lists these events and custom log entries.</span></span>  
  
 <span data-ttu-id="d2a19-217">下表描述了可以在发生运行时事件时启用日志项写入功能的预定义事件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-217">The following table describes the predefined events that can be enabled to write log entries when run-time events occur.</span></span> <span data-ttu-id="d2a19-218">这些日志项将应用到可执行文件、包以及包中的任务和容器。</span><span class="sxs-lookup"><span data-stu-id="d2a19-218">These log entries apply to executables, the package, and the tasks and containers that the package includes.</span></span> <span data-ttu-id="d2a19-219">日志项的名称与引发并导致写入日志项的运行时事件的名称相同。</span><span class="sxs-lookup"><span data-stu-id="d2a19-219">The name of the log entry is the same as the name of the run-time event that was raised and caused the log entry to be written.</span></span>  
  
|<span data-ttu-id="d2a19-220">事件</span><span class="sxs-lookup"><span data-stu-id="d2a19-220">Events</span></span>|<span data-ttu-id="d2a19-221">说明</span><span class="sxs-lookup"><span data-stu-id="d2a19-221">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="d2a19-222">**OnError**</span><span class="sxs-lookup"><span data-stu-id="d2a19-222">**OnError**</span></span>|<span data-ttu-id="d2a19-223">出现错误时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-223">Writes a log entry when an error occurs.</span></span>|  
|<span data-ttu-id="d2a19-224">**OnExecStatusChanged**</span><span class="sxs-lookup"><span data-stu-id="d2a19-224">**OnExecStatusChanged**</span></span>|<span data-ttu-id="d2a19-225">在提示期间挂起或恢复任务（而非容器时），写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-225">Writes a log entry when a task (not a container) is suspended or resumed during debugging.</span></span>|  
|<span data-ttu-id="d2a19-226">**OnInformation**</span><span class="sxs-lookup"><span data-stu-id="d2a19-226">**OnInformation**</span></span>|<span data-ttu-id="d2a19-227">在验证和执行可执行文件的过程中写入报告信息的日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-227">Writes a log entry during the validation and execution of an executable to report information.</span></span>|  
|<span data-ttu-id="d2a19-228">**OnPostExecute**</span><span class="sxs-lookup"><span data-stu-id="d2a19-228">**OnPostExecute**</span></span>|<span data-ttu-id="d2a19-229">在可执行文件运行完成后立即写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-229">Writes a log entry immediately after the executable has finished running.</span></span>|  
|<span data-ttu-id="d2a19-230">**OnPostValidate**</span><span class="sxs-lookup"><span data-stu-id="d2a19-230">**OnPostValidate**</span></span>|<span data-ttu-id="d2a19-231">在可执行文件的验证完成时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-231">Writes a log entry when the validation of the executable finishes.</span></span>|  
|<span data-ttu-id="d2a19-232">**OnPreExecute**</span><span class="sxs-lookup"><span data-stu-id="d2a19-232">**OnPreExecute**</span></span>|<span data-ttu-id="d2a19-233">在可执行文件即将运行前写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-233">Writes a log entry immediately before the executable runs.</span></span>|  
|<span data-ttu-id="d2a19-234">**OnPreValidate**</span><span class="sxs-lookup"><span data-stu-id="d2a19-234">**OnPreValidate**</span></span>|<span data-ttu-id="d2a19-235">可执行文件的验证开始时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-235">Writes a log entry when the validation of the executable starts.</span></span>|  
|<span data-ttu-id="d2a19-236">**OnProgress**</span><span class="sxs-lookup"><span data-stu-id="d2a19-236">**OnProgress**</span></span>|<span data-ttu-id="d2a19-237">在可执行文件的进度可度量时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-237">Writes a log entry when measurable progress is made by the executable.</span></span>|  
|<span data-ttu-id="d2a19-238">**OnQueryCancel**</span><span class="sxs-lookup"><span data-stu-id="d2a19-238">**OnQueryCancel**</span></span>|<span data-ttu-id="d2a19-239">在任务处理过程中可以取消执行的任何时刻写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-239">Writes a log entry at any juncture in the task processing where it is feasible to cancel execution.</span></span>|  
|<span data-ttu-id="d2a19-240">**OnTaskFailed**</span><span class="sxs-lookup"><span data-stu-id="d2a19-240">**OnTaskFailed**</span></span>|<span data-ttu-id="d2a19-241">在任务失败时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-241">Writes a log entry when a task fails.</span></span>|  
|<span data-ttu-id="d2a19-242">**OnVariableValueChanged**</span><span class="sxs-lookup"><span data-stu-id="d2a19-242">**OnVariableValueChanged**</span></span>|<span data-ttu-id="d2a19-243">在变量的值更改时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-243">Writes a log entry when the value of a variable changes.</span></span>|  
|<span data-ttu-id="d2a19-244">**OnWarning**</span><span class="sxs-lookup"><span data-stu-id="d2a19-244">**OnWarning**</span></span>|<span data-ttu-id="d2a19-245">在出现警告时写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-245">Writes a log entry when a warning occurs.</span></span>|  
|<span data-ttu-id="d2a19-246">**PipelineComponentTime**</span><span class="sxs-lookup"><span data-stu-id="d2a19-246">**PipelineComponentTime**</span></span>|<span data-ttu-id="d2a19-247">对于每个数据流组件，为验证和执行的每个阶段写入日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-247">For each data flow component, writes a log entry for each phase of validation and execution.</span></span> <span data-ttu-id="d2a19-248">该日志条目为每个阶段指定处理时间。</span><span class="sxs-lookup"><span data-stu-id="d2a19-248">The log entry specifies the processing time for each phase.</span></span>|  
|<span data-ttu-id="d2a19-249">**诊断**</span><span class="sxs-lookup"><span data-stu-id="d2a19-249">**Diagnostic**</span></span>|<span data-ttu-id="d2a19-250">写入提供诊断信息的日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-250">Writes a log entry that provides diagnostic information.</span></span><br /><br /> <span data-ttu-id="d2a19-251">例如，您可以在每次调用外部数据访问接口之前和之后记录消息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-251">For example, you can log a message before and after every call to an external data provider.</span></span> <span data-ttu-id="d2a19-252">有关详细信息，请参阅 [包执行的疑难解答工具](../troubleshooting/troubleshooting-tools-for-package-execution.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-252">For more information, see [Troubleshooting Tools for Package Execution](../troubleshooting/troubleshooting-tools-for-package-execution.md).</span></span>|  
  
 <span data-ttu-id="d2a19-253">包和很多任务都有可以启用日志记录功能的自定义日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-253">The package and many tasks have custom log entries that can be enabled for logging.</span></span> <span data-ttu-id="d2a19-254">例如，发送邮件任务提供了 **SendMailTaskBegin** 自定义日志项，该日志项在发送邮件任务开始运行时（但在发送电子邮件消息之前）记录信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-254">For example, the Send Mail task provides the **SendMailTaskBegin** custom log entry, which logs information when the Send Mail task starts to run, but before the task sends an e-mail message.</span></span> <span data-ttu-id="d2a19-255">有关详细信息，请参阅 [Custom Messages for Logging](../custom-messages-for-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-255">For more information, see [Custom Messages for Logging](../custom-messages-for-logging.md).</span></span>  
  
### <a name="differentiating-package-copies"></a><span data-ttu-id="d2a19-256">区分包副本</span><span class="sxs-lookup"><span data-stu-id="d2a19-256">Differentiating Package Copies</span></span>  
 <span data-ttu-id="d2a19-257">日志数据包括日志项所属的包的名称和 GUID。</span><span class="sxs-lookup"><span data-stu-id="d2a19-257">Log data includes the name and the GUID of the package to which the log entries belong.</span></span> <span data-ttu-id="d2a19-258">如果通过复制现有包而创建了新的包，则现有包的名称和 GUID 也会被复制。</span><span class="sxs-lookup"><span data-stu-id="d2a19-258">If you create a new package by copying an existing package, the name and the GUID of the existing package are also copied.</span></span> <span data-ttu-id="d2a19-259">结果，可能有两个包具有相同的 GUID 和名称，这将使您难以区分日志数据中的包。</span><span class="sxs-lookup"><span data-stu-id="d2a19-259">As a result, you may have two packages that have the same GUID and name, making it difficult to differentiate between the packages in the log data.</span></span>  
  
 <span data-ttu-id="d2a19-260">若要消除这种不明确性，应当更新新包的名称和 GUID。</span><span class="sxs-lookup"><span data-stu-id="d2a19-260">To eliminate this ambiguity, you should update the name and the GUID of the new packages.</span></span> <span data-ttu-id="d2a19-261">在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 中，可以在 `ID` 属性中重新生成 GUID，并在“属性”窗口中更新 `Name` 属性的值。</span><span class="sxs-lookup"><span data-stu-id="d2a19-261">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can regenerate the GUID in the `ID` property and update the value of the `Name` property in the Properties window.</span></span> <span data-ttu-id="d2a19-262">还可以通过编程或使用 **dtutil** 命令提示符工具来更改 GUID 和名称。</span><span class="sxs-lookup"><span data-stu-id="d2a19-262">You can also change the GUID and the name programmatically, or by using the **dtutil** command prompt.</span></span> <span data-ttu-id="d2a19-263">有关详细信息，请参阅 [设置包属性](../set-package-properties.md) 和 [dtutil 实用工具](../dtutil-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-263">For more information, see [Set Package Properties](../set-package-properties.md) and [dtutil Utility](../dtutil-utility.md).</span></span>  
  
### <a name="parent-logging-options"></a><span data-ttu-id="d2a19-264">父日志记录选项</span><span class="sxs-lookup"><span data-stu-id="d2a19-264">Parent Logging Options</span></span>  
 <span data-ttu-id="d2a19-265">通常，任务以及 For 循环、Foreach 循环和序列容器的日志记录选项与包或父容器的日志记录选项匹配。</span><span class="sxs-lookup"><span data-stu-id="d2a19-265">Frequently, the logging options of tasks and For Loop, Foreach Loop, and Sequence containers match those of the package or a parent container.</span></span> <span data-ttu-id="d2a19-266">在这种情况下，您可以将它们配置为继承其父容器的日志记录选项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-266">In that case, you can configure them to inherit their logging options from their parent container.</span></span> <span data-ttu-id="d2a19-267">例如，在包括执行 SQL 任务的 For 循环容器中，执行 SQL 任务可以使用已对 For 循环容器设置的日志记录选项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-267">For example, in a For Loop container that includes an Execute SQL task, the Execute SQL task can use the logging options that are set on the For Loop container.</span></span> <span data-ttu-id="d2a19-268">若要使用父日志记录选项，可以将容器的 LoggingMode 属性设置为 **UseParentSetting**。</span><span class="sxs-lookup"><span data-stu-id="d2a19-268">To use the parent logging options, you set the LoggingMode property of the container to **UseParentSetting**.</span></span> <span data-ttu-id="d2a19-269">可以在 **的** “属性” [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 窗口中设置此属性，也可以通过 **设计器中的** “配置 SSIS 日志” [!INCLUDE[ssIS](../../includes/ssis-md.md)] 对话框设置此属性。</span><span class="sxs-lookup"><span data-stu-id="d2a19-269">You can set this property in the **Properties** window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or through the **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
### <a name="logging-templates"></a><span data-ttu-id="d2a19-270">日志记录模板</span><span class="sxs-lookup"><span data-stu-id="d2a19-270">Logging Templates</span></span>  
 <span data-ttu-id="d2a19-271">在 **“配置 SSIS 日志”** 对话框中，还可以创建经常使用的日志记录配置并将其保存为模板，然后在多个包中使用这些模板。</span><span class="sxs-lookup"><span data-stu-id="d2a19-271">In the **Configure SSIS Logs** dialog box, you can also create and save frequently used logging configurations as templates, and then use the templates in multiple packages.</span></span> <span data-ttu-id="d2a19-272">这样便于对多个包应用一致的日志记录策略，以及通过更新并应用模板来修改包的日志设置。</span><span class="sxs-lookup"><span data-stu-id="d2a19-272">This makes it easy to apply a consistent logging strategy across multiple packages and to modify log settings on packages by updating and then applying the templates.</span></span> <span data-ttu-id="d2a19-273">这些模板存储为 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-273">The templates are stored in XML files.</span></span>  
  
 <span data-ttu-id="d2a19-274">**使用“配置 SSIS 日志”对话框配置日志记录**</span><span class="sxs-lookup"><span data-stu-id="d2a19-274">**To configure logging using the Configure SSIS Logs dialog box**</span></span>  
  
1.  <span data-ttu-id="d2a19-275">为包及其任务启用日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-275">Enable the package and its tasks for logging.</span></span> <span data-ttu-id="d2a19-276">可以在包级、容器级以及任务级进行日志记录。</span><span class="sxs-lookup"><span data-stu-id="d2a19-276">Logging can occur at the package, the container, and the task level.</span></span> <span data-ttu-id="d2a19-277">可以为包、容器和任务指定不同的日志。</span><span class="sxs-lookup"><span data-stu-id="d2a19-277">You can specify different logs for packages, containers, and tasks.</span></span>  
  
2.  <span data-ttu-id="d2a19-278">选择日志提供程序并为包添加日志。</span><span class="sxs-lookup"><span data-stu-id="d2a19-278">Select a log provider and add a log for the package.</span></span> <span data-ttu-id="d2a19-279">可以仅在包级创建日志，任务或容器必须使用为包创建的日志之一。</span><span class="sxs-lookup"><span data-stu-id="d2a19-279">Logs can be created only at the package level, and a task or container must use one of the logs created for the package.</span></span> <span data-ttu-id="d2a19-280">每个日志都与下列某个日志提供程序关联：文本文件、 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、Windows 事件日志或 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-280">Each log is associated with one of the following log providers: Text file, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Windows Event Log, or XML file.</span></span> <span data-ttu-id="d2a19-281">有关详细信息，请参阅 [在 SQL Server Data Tools 中启用包日志记录](../enable-package-logging-in-sql-server-data-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-281">For more information, see [Enable Package Logging in SQL Server Data Tools](../enable-package-logging-in-sql-server-data-tools.md).</span></span>  
  
3.  <span data-ttu-id="d2a19-282">选择要在日志中捕获的事件以及每个事件的日志架构信息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-282">Select the events and the log schema information about each event you want to capture in the log.</span></span> <span data-ttu-id="d2a19-283">有关详细信息，请参阅 [使用保存的配置文件配置日志记录](../configure-logging-by-using-a-saved-configuration-file.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-283">For more information, see [Configure Logging by Using a Saved Configuration File](../configure-logging-by-using-a-saved-configuration-file.md).</span></span>  
  
### <a name="configuration-of-log-provider"></a><span data-ttu-id="d2a19-284">日志提供程序的配置</span><span class="sxs-lookup"><span data-stu-id="d2a19-284">Configuration of Log Provider</span></span>  
 <span data-ttu-id="d2a19-285">可以通过 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 设计器或以编程方式来设置属性。</span><span class="sxs-lookup"><span data-stu-id="d2a19-285">You can set properties through [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="d2a19-286">作为在包中实现日志记录的一个步骤来创建和配置日志提供程序。</span><span class="sxs-lookup"><span data-stu-id="d2a19-286">A log provider is created and configured as a step in implementing logging in a package.</span></span> <span data-ttu-id="d2a19-287">有关详细信息，请参阅[Integration Services 日志记录](integration-services-ssis-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-287">For more information, see [Integration Services Logging](integration-services-ssis-logging.md).</span></span>  
  
 <span data-ttu-id="d2a19-288">创建日志提供程序后，可以在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]的“属性”窗口中查看和修改其属性。</span><span class="sxs-lookup"><span data-stu-id="d2a19-288">After you create a log provider, you can view and modify its properties in the Properties window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="d2a19-289">有关如何以编程方式设置这些属性的信息，请参阅 <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> 类的文档。</span><span class="sxs-lookup"><span data-stu-id="d2a19-289">For information about programmatically setting these properties, see the documentation for the <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> class.</span></span>  
  
### <a name="logging-for-data-flow-tasks"></a><span data-ttu-id="d2a19-290">数据流任务的日志记录</span><span class="sxs-lookup"><span data-stu-id="d2a19-290">Logging for Data Flow Tasks</span></span>  
 <span data-ttu-id="d2a19-291">数据流任务提供了许多可用于监视和调整性能的自定义日志项。</span><span class="sxs-lookup"><span data-stu-id="d2a19-291">The Data Flow task provides many custom log entries that can be used to monitor and adjust performance.</span></span> <span data-ttu-id="d2a19-292">例如，您可以监视可能会导致内存泄漏的组件，或者跟踪特定组件运行所用的时间。</span><span class="sxs-lookup"><span data-stu-id="d2a19-292">For example, you can monitor components that might cause memory leaks, or keep track of how long it takes to run a particular component.</span></span> <span data-ttu-id="d2a19-293">有关这些自定义日志项的列表和日志记录输出示例，请参阅 [Data Flow Task](../control-flow/data-flow-task.md)。</span><span class="sxs-lookup"><span data-stu-id="d2a19-293">For a list of these custom log entries and sample logging output, see [Data Flow Task](../control-flow/data-flow-task.md).</span></span>  
  
#### <a name="use-the-pipelinecomponenttime-event"></a><span data-ttu-id="d2a19-294">使用 PipelineComponentTime 事件</span><span class="sxs-lookup"><span data-stu-id="d2a19-294">Use the PipelineComponentTime Event</span></span>  
 <span data-ttu-id="d2a19-295">最有用的自定义日志项可能是 PipelineComponentTime 事件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-295">Perhaps the most useful custom log entry is the PipelineComponentTime event.</span></span> <span data-ttu-id="d2a19-296">该日志项报告数据流中的每个组件执行五个主要处理步骤中的每个步骤所用的毫秒数。</span><span class="sxs-lookup"><span data-stu-id="d2a19-296">This log entry reports the number of milliseconds that each component in the data flow spends on each of the five major processing steps.</span></span> <span data-ttu-id="d2a19-297">下表说明了这些处理步骤。</span><span class="sxs-lookup"><span data-stu-id="d2a19-297">The following table describes these processing steps.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="d2a19-298">开发人员会将这些步骤标识为 <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>。</span><span class="sxs-lookup"><span data-stu-id="d2a19-298">developers will recognize these steps as the principal methods of a <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>.</span></span>  
  
|<span data-ttu-id="d2a19-299">步骤</span><span class="sxs-lookup"><span data-stu-id="d2a19-299">Step</span></span>|<span data-ttu-id="d2a19-300">说明</span><span class="sxs-lookup"><span data-stu-id="d2a19-300">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="d2a19-301">验证</span><span class="sxs-lookup"><span data-stu-id="d2a19-301">Validate</span></span>|<span data-ttu-id="d2a19-302">该组件查看有效的属性值和配置设置。</span><span class="sxs-lookup"><span data-stu-id="d2a19-302">The component checks for valid property values and configuration settings.</span></span>|  
|<span data-ttu-id="d2a19-303">PreExecute</span><span class="sxs-lookup"><span data-stu-id="d2a19-303">PreExecute</span></span>|<span data-ttu-id="d2a19-304">该组件在开始处理数据行之前执行一次性处理。</span><span class="sxs-lookup"><span data-stu-id="d2a19-304">The component performs one-time processing before it starts to process rows of data.</span></span>|  
|<span data-ttu-id="d2a19-305">PostExecute</span><span class="sxs-lookup"><span data-stu-id="d2a19-305">PostExecute</span></span>|<span data-ttu-id="d2a19-306">该组件在处理所有数据行之后执行一次性处理。</span><span class="sxs-lookup"><span data-stu-id="d2a19-306">The component performs one-time processing after it has processed all rows of data.</span></span>|  
|<span data-ttu-id="d2a19-307">ProcessInput</span><span class="sxs-lookup"><span data-stu-id="d2a19-307">ProcessInput</span></span>|<span data-ttu-id="d2a19-308">转换或目标组件处理由上游源或转换传递的传入数据行。</span><span class="sxs-lookup"><span data-stu-id="d2a19-308">The transformation or destination component processes the incoming rows of data that an upstream source or transformation has passed to it.</span></span>|  
|<span data-ttu-id="d2a19-309">PrimeOutput</span><span class="sxs-lookup"><span data-stu-id="d2a19-309">PrimeOutput</span></span>|<span data-ttu-id="d2a19-310">源或转换组件填充数据缓冲区，以传递给下游转换或目标组件。</span><span class="sxs-lookup"><span data-stu-id="d2a19-310">The source or transformation component fills the buffers of data to be passed to a downstream transformation or destination component.</span></span>|  
  
 <span data-ttu-id="d2a19-311">启用 PipelineComponentTime 事件时， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 将针对每个组件执行的各处理步骤记录一则消息。</span><span class="sxs-lookup"><span data-stu-id="d2a19-311">When you enable the PipelineComponentTime event, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logs one message for each processing step performed by each component.</span></span> <span data-ttu-id="d2a19-312">以下日志项显示 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns 包示例记录的消息的子集。</span><span class="sxs-lookup"><span data-stu-id="d2a19-312">The following log entries show a subset of the messages that the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns package sample logs:</span></span>  
  
 `The component "Calculate LineItemTotalCost" (3522) spent 356 milliseconds in ProcessInput.`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 79 milliseconds in ProcessInput.`  
  
 `The component "Calculate Average Cost" (3662) spent 16 milliseconds in ProcessInput.`  
  
 `The component "Sort by ProductID" (3717) spent 125 milliseconds in ProcessInput.`  
  
 `The component "Load Data" (3773) spent 0 milliseconds in ProcessInput.`  
  
 `The component "Extract Data" (3869) spent 688 milliseconds in PrimeOutput filling buffers on output "OLE DB Source Output" (3879).`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 141 milliseconds in PrimeOutput filling buffers on output "Aggregate Output 1" (3621).`  
  
 `The component "Sort by ProductID" (3717) spent 16 milliseconds in PrimeOutput filling buffers on output "Sort Output" (3719).`  
  
 <span data-ttu-id="d2a19-313">下列日志项显示数据流任务在下列步骤中消耗了大多数时间，如下所示（按降序排序）：</span><span class="sxs-lookup"><span data-stu-id="d2a19-313">These log entries show that the data flow task spent the most time on the following steps, shown here in descending order:</span></span>  
  
-   <span data-ttu-id="d2a19-314">名为“Extract Data”的 OLE DB 源在加载数据期间耗时 688 毫秒</span><span class="sxs-lookup"><span data-stu-id="d2a19-314">The OLE DB source that is named "Extract Data" spent 688 ms.</span></span> <span data-ttu-id="d2a19-315">加载数据。</span><span class="sxs-lookup"><span data-stu-id="d2a19-315">loading data.</span></span>  
  
-   <span data-ttu-id="d2a19-316">名为“Calculate LineItemTotalCost”的派生列转换</span><span class="sxs-lookup"><span data-stu-id="d2a19-316">The Derived Column transformation that is named "Calculate LineItemTotalCost" spent 356 ms.</span></span> <span data-ttu-id="d2a19-317">在对传入行执行计算期间耗时 356 毫秒。</span><span class="sxs-lookup"><span data-stu-id="d2a19-317">performing calculations on incoming rows.</span></span>  
  
-   <span data-ttu-id="d2a19-318">名为“Sum Quantity and LineItemTotalCost”的聚合转换在执行计算和将数据传递到下一转换期间共耗时 220 毫秒，其中有 141 毫秒用于 PrimeOutput，有 79 毫秒用于 ProcessInput。</span><span class="sxs-lookup"><span data-stu-id="d2a19-318">The Aggregate transformation that is named "Sum Quantity and LineItemTotalCost" spent a combined 220 ms-141 in PrimeOutput and 79 in ProcessInput-performing calculations and passing the data to the next transformation.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="d2a19-319">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="d2a19-319">Related Tasks</span></span>  
 <span data-ttu-id="d2a19-320">下面的列表包含一些链接，这些链接指向的主题说明如何执行与日志记录功能相关的任务。</span><span class="sxs-lookup"><span data-stu-id="d2a19-320">The following list contains links to topics that show how to perform tasks related to the logging feature.</span></span>  
  
-   [<span data-ttu-id="d2a19-321">"配置 SSIS 日志" 对话框</span><span class="sxs-lookup"><span data-stu-id="d2a19-321">Configure SSIS Logs Dialog Box</span></span>](../configure-ssis-logs-dialog-box.md)  
  
-   [<span data-ttu-id="d2a19-322">在 SQL Server Data Tools 中启用包日志记录</span><span class="sxs-lookup"><span data-stu-id="d2a19-322">Enable Package Logging in SQL Server Data Tools</span></span>](../enable-package-logging-in-sql-server-data-tools.md)  
  
-   [<span data-ttu-id="d2a19-323">在 SSIS 服务器上启用包执行的日志记录</span><span class="sxs-lookup"><span data-stu-id="d2a19-323">Enable Logging for Package Execution on the SSIS Server</span></span>](../enable-logging-for-package-execution-on-the-ssis-server.md)  
  
-   [<span data-ttu-id="d2a19-324">在“日志事件”窗口中查看日志项</span><span class="sxs-lookup"><span data-stu-id="d2a19-324">View Log Entries in the Log Events Window</span></span>](../view-log-entries-in-the-log-events-window.md)  
  
## <a name="related-content"></a><span data-ttu-id="d2a19-325">相关内容</span><span class="sxs-lookup"><span data-stu-id="d2a19-325">Related Content</span></span>  
 [<span data-ttu-id="d2a19-326">用于完整和详细日志记录的 DTLoggedExec 工具（CodePlex 项目）</span><span class="sxs-lookup"><span data-stu-id="d2a19-326">DTLoggedExec Tool for Full and Detail Logging (CodePlex Project)</span></span>](https://go.microsoft.com/fwlink/?LinkId=150579)  
  
## <a name="see-also"></a><span data-ttu-id="d2a19-327">另请参阅</span><span class="sxs-lookup"><span data-stu-id="d2a19-327">See Also</span></span>  
 [<span data-ttu-id="d2a19-328">在“日志事件”窗口中查看日志项</span><span class="sxs-lookup"><span data-stu-id="d2a19-328">View Log Entries in the Log Events Window</span></span>](../view-log-entries-in-the-log-events-window.md)  
  
  
