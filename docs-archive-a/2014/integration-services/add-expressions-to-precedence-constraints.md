---
title: 将表达式添加到优先约束 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- precedence executables [Integration Services]
- precedence constraints [Integration Services], adding expressions
- adding expressions
- constrained executables [Integration Services]
- combining constraints
- expressions [Integration Services], constraints
ms.assetid: 5574d89a-a68e-4b84-80ea-da93305e5ca1
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 6dfc73a484020a51738b8ef93e20d96d16edbf1c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87585941"
---
# <a name="add-expressions-to-precedence-constraints"></a><span data-ttu-id="60bc1-102">将表达式添加到优先约束</span><span class="sxs-lookup"><span data-stu-id="60bc1-102">Add Expressions to Precedence Constraints</span></span>
  <span data-ttu-id="60bc1-103">优先约束可用表达式定义两个可执行文件之间的约束：优先可执行文件和受约束的可执行文件。</span><span class="sxs-lookup"><span data-stu-id="60bc1-103">A precedence constraint can use an expression to define the constraint between two executables: the precedence executable and the constrained executable.</span></span> <span data-ttu-id="60bc1-104">可执行文件可以是任务或容器。</span><span class="sxs-lookup"><span data-stu-id="60bc1-104">The executables can be tasks or containers.</span></span> <span data-ttu-id="60bc1-105">表达式可以单独使用，也可以与优先可执行文件的执行结果结合使用。</span><span class="sxs-lookup"><span data-stu-id="60bc1-105">The expression can be used alone or in combination with the execution result of the precedence executable.</span></span> <span data-ttu-id="60bc1-106">可执行文件的执行结果或者为成功，或者为失败。</span><span class="sxs-lookup"><span data-stu-id="60bc1-106">The execution result of an executable is either success or failure.</span></span> <span data-ttu-id="60bc1-107">配置优先约束的执行结果时，可以将执行结果设置为 `Success`、`Failure` 或 `Completion`。</span><span class="sxs-lookup"><span data-stu-id="60bc1-107">When you configure the execution result of a precedence constraint, you can set the execution result to `Success`, `Failure`, or `Completion`.</span></span> <span data-ttu-id="60bc1-108">`Success` 要求优先可执行文件成功；`Failure` 要求优先可执行文件失败；而 `Completion` 则指示无论优先任务成功或失败，受约束的可执行文件都应运行。</span><span class="sxs-lookup"><span data-stu-id="60bc1-108">`Success` requires that the precedence executable succeed, `Failure` requires that the precedence executable fail, and `Completion` indicates that the constrained executable should run regardless of whether the precedence task succeeds or fails.</span></span> <span data-ttu-id="60bc1-109">有关详细信息，请参阅 [优先约束](control-flow/precedence-constraints.md)。</span><span class="sxs-lookup"><span data-stu-id="60bc1-109">For more information, see [Precedence Constraints](control-flow/precedence-constraints.md).</span></span>  
  
 <span data-ttu-id="60bc1-110">表达式的值必须为 `True` 或 `False`，并且此表达式必须为有效的 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 表达式。</span><span class="sxs-lookup"><span data-stu-id="60bc1-110">The expression must evaluate to `True` or `False` and it must be a valid [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] expression.</span></span> <span data-ttu-id="60bc1-111">此表达式可以使用文字、系统变量和自定义变量以及 [!INCLUDE[ssIS](../includes/ssis-md.md)] 表达式语法提供的函数和运算符。</span><span class="sxs-lookup"><span data-stu-id="60bc1-111">The expression can use literals, system and custom variables, and the functions and operators that the [!INCLUDE[ssIS](../includes/ssis-md.md)] expression grammar provides.</span></span> <span data-ttu-id="60bc1-112">例如，表达式 `@Count == SQRT(144) + 10` 使用了变量 `Count`、SQRT 函数以及等号 (==) 和加号 (+) 运算符。</span><span class="sxs-lookup"><span data-stu-id="60bc1-112">For example, the expression `@Count == SQRT(144) + 10` uses the variable `Count`, the SQRT function , and the equal (==) and add (+) operators.</span></span> <span data-ttu-id="60bc1-113">有关详细信息，请参阅 [Integration Services (SSIS) 表达式](expressions/integration-services-ssis-expressions.md)。</span><span class="sxs-lookup"><span data-stu-id="60bc1-113">For more information, see [Integration Services &#40;SSIS&#41; Expressions](expressions/integration-services-ssis-expressions.md).</span></span>  
  
 <span data-ttu-id="60bc1-114">在下图中，使用一个执行结果和一个表达式的优先约束将任务 A 和任务 B 链接在一起。</span><span class="sxs-lookup"><span data-stu-id="60bc1-114">In the following illustration, task A and task B are linked by a precedence constraint that uses an execution result and an expression.</span></span> <span data-ttu-id="60bc1-115">此约束值设置为 `Success`，表达式为 `@X >== @Z`。</span><span class="sxs-lookup"><span data-stu-id="60bc1-115">The constraint value is set to `Success` and the expression is  `@X >== @Z`.</span></span> <span data-ttu-id="60bc1-116">仅当任务 A 成功完成且变量 `X` 的值大于或等于变量 `Z` 的值时，受约束的任务 B 才运行。</span><span class="sxs-lookup"><span data-stu-id="60bc1-116">Task B, the constrained task, runs only if task A completes successfully and the value of variable `X` is greater than or equal to the value of variable `Z`.</span></span>  
  
 <span data-ttu-id="60bc1-117">![两个任务之间的优先约束](media/mw-dts-03.gif "两个任务之间的优先约束")</span><span class="sxs-lookup"><span data-stu-id="60bc1-117">![Precedence constraint between two tasks](media/mw-dts-03.gif "Precedence constraint between two tasks")</span></span>  
  
 <span data-ttu-id="60bc1-118">也可以用包含不同表达式的多个优先约束来链接可执行文件。</span><span class="sxs-lookup"><span data-stu-id="60bc1-118">Executables can also be linked by using multiple precedence constraints that contain different expressions.</span></span> <span data-ttu-id="60bc1-119">例如，在下图中，使用执行结果和表达式的优先约束将任务 B 和任务 C 链接到任务 A。</span><span class="sxs-lookup"><span data-stu-id="60bc1-119">For example, in the following illustration, tasks B and C are linked to task A by precedence constraints that use execution results and expressions.</span></span> <span data-ttu-id="60bc1-120">两个约束的值都设置为 `Success.`，一个优先约束包含表达式 `@X >== @Z`，而另一个优先约束包含表达式 `@X < @Z`。</span><span class="sxs-lookup"><span data-stu-id="60bc1-120">Both of the constraint values are set to `Success.` One precedence constraint includes the expression `@X >== @Z`, and the other precedence constraint includes the expression `@X < @Z`.</span></span> <span data-ttu-id="60bc1-121">变量 `X` 和变量 `Z` 的值决定是任务 C 运行还是任务 B 运行。</span><span class="sxs-lookup"><span data-stu-id="60bc1-121">Depending on the values of variable `X` and variable `Z`, either task C or task B runs.</span></span>  
  
 <span data-ttu-id="60bc1-122">![优先约束表达式](media/mw-dts-04.gif "优先约束表达式")</span><span class="sxs-lookup"><span data-stu-id="60bc1-122">![Expressions on precedence constraints](media/mw-dts-04.gif "Expressions on precedence constraints")</span></span>  
  
 <span data-ttu-id="60bc1-123">可使用 **设计器中的** “优先约束编辑器” [!INCLUDE[ssIS](../includes/ssis-md.md)] 和 [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)] 提供的“属性”窗口来添加或修改表达式。</span><span class="sxs-lookup"><span data-stu-id="60bc1-123">You can add or modify an expression by using the **Precedence Constraint Editor** in [!INCLUDE[ssIS](../includes/ssis-md.md)] Designer and the Properties window that [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)] provides.</span></span> <span data-ttu-id="60bc1-124">但是，“属性”窗口不提供表达式语法验证。</span><span class="sxs-lookup"><span data-stu-id="60bc1-124">However, the Properties window does not provide verification of the expression syntax.</span></span>  
  
 <span data-ttu-id="60bc1-125">如果优先约束包含表达式，那么在 **“控制流”** 选项卡的设计图面上会有一个图标出现在该优先约束旁边，图标上的 ToolTip 显示此表达式。</span><span class="sxs-lookup"><span data-stu-id="60bc1-125">If a precedence constraint includes an expression, an icon appears on the design surface of the **Control Flow** tab, next to the precedence constraint, and the ToolTip on the icon displays the expression.</span></span>  
  
## <a name="combining-execution-values-and-expressions"></a><span data-ttu-id="60bc1-126">将执行值和表达式组合起来。</span><span class="sxs-lookup"><span data-stu-id="60bc1-126">Combining Execution Values and Expressions</span></span>  
 <span data-ttu-id="60bc1-127">下表介绍把执行值约束和表达式组合在优先约束中的效果。</span><span class="sxs-lookup"><span data-stu-id="60bc1-127">The following table describes the effects of combining an execution value constraint and an expression in a precedence constraint.</span></span>  
  
|<span data-ttu-id="60bc1-128">求值运算</span><span class="sxs-lookup"><span data-stu-id="60bc1-128">Evaluation operation</span></span>|<span data-ttu-id="60bc1-129">约束的计算结果为</span><span class="sxs-lookup"><span data-stu-id="60bc1-129">Constraint evaluates to</span></span>|<span data-ttu-id="60bc1-130">表达式的计算结果为</span><span class="sxs-lookup"><span data-stu-id="60bc1-130">Expression evaluates to</span></span>|<span data-ttu-id="60bc1-131">受约束的可执行文件运行</span><span class="sxs-lookup"><span data-stu-id="60bc1-131">Constrained executable runs</span></span>|  
|--------------------------|-----------------------------|-----------------------------|---------------------------------|  
|<span data-ttu-id="60bc1-132">约束</span><span class="sxs-lookup"><span data-stu-id="60bc1-132">Constraint</span></span>|<span data-ttu-id="60bc1-133">正确</span><span class="sxs-lookup"><span data-stu-id="60bc1-133">True</span></span>|<span data-ttu-id="60bc1-134">空值</span><span class="sxs-lookup"><span data-stu-id="60bc1-134">N/A</span></span>|<span data-ttu-id="60bc1-135">正确</span><span class="sxs-lookup"><span data-stu-id="60bc1-135">True</span></span>|  
|<span data-ttu-id="60bc1-136">约束</span><span class="sxs-lookup"><span data-stu-id="60bc1-136">Constraint</span></span>|<span data-ttu-id="60bc1-137">错误</span><span class="sxs-lookup"><span data-stu-id="60bc1-137">False</span></span>|<span data-ttu-id="60bc1-138">空值</span><span class="sxs-lookup"><span data-stu-id="60bc1-138">N/A</span></span>|<span data-ttu-id="60bc1-139">错误</span><span class="sxs-lookup"><span data-stu-id="60bc1-139">False</span></span>|  
|<span data-ttu-id="60bc1-140">Expression</span><span class="sxs-lookup"><span data-stu-id="60bc1-140">Expression</span></span>|<span data-ttu-id="60bc1-141">空值</span><span class="sxs-lookup"><span data-stu-id="60bc1-141">N/A</span></span>|<span data-ttu-id="60bc1-142">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-142">True</span></span>|<span data-ttu-id="60bc1-143">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-143">True</span></span>|  
|<span data-ttu-id="60bc1-144">Expression</span><span class="sxs-lookup"><span data-stu-id="60bc1-144">Expression</span></span>|<span data-ttu-id="60bc1-145">空值</span><span class="sxs-lookup"><span data-stu-id="60bc1-145">N/A</span></span>|<span data-ttu-id="60bc1-146">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-146">False</span></span>|<span data-ttu-id="60bc1-147">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-147">False</span></span>|  
|<span data-ttu-id="60bc1-148">约束和表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-148">Constraint and Expression</span></span>|<span data-ttu-id="60bc1-149">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-149">True</span></span>|<span data-ttu-id="60bc1-150">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-150">True</span></span>|<span data-ttu-id="60bc1-151">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-151">True</span></span>|  
|<span data-ttu-id="60bc1-152">约束和表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-152">Constraint and Expression</span></span>|<span data-ttu-id="60bc1-153">正确</span><span class="sxs-lookup"><span data-stu-id="60bc1-153">True</span></span>|<span data-ttu-id="60bc1-154">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-154">False</span></span>|<span data-ttu-id="60bc1-155">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-155">False</span></span>|  
|<span data-ttu-id="60bc1-156">约束和表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-156">Constraint and Expression</span></span>|<span data-ttu-id="60bc1-157">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-157">False</span></span>|<span data-ttu-id="60bc1-158">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-158">True</span></span>|<span data-ttu-id="60bc1-159">错误</span><span class="sxs-lookup"><span data-stu-id="60bc1-159">False</span></span>|  
|<span data-ttu-id="60bc1-160">约束和表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-160">Constraint and Expression</span></span>|<span data-ttu-id="60bc1-161">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-161">False</span></span>|<span data-ttu-id="60bc1-162">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-162">False</span></span>|<span data-ttu-id="60bc1-163">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-163">False</span></span>|  
|<span data-ttu-id="60bc1-164">约束或表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-164">Constraint or Expression</span></span>|<span data-ttu-id="60bc1-165">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-165">True</span></span>|<span data-ttu-id="60bc1-166">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-166">True</span></span>|<span data-ttu-id="60bc1-167">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-167">True</span></span>|  
|<span data-ttu-id="60bc1-168">约束或表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-168">Constraint or Expression</span></span>|<span data-ttu-id="60bc1-169">正确</span><span class="sxs-lookup"><span data-stu-id="60bc1-169">True</span></span>|<span data-ttu-id="60bc1-170">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-170">False</span></span>|<span data-ttu-id="60bc1-171">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-171">True</span></span>|  
|<span data-ttu-id="60bc1-172">约束或表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-172">Constraint or Expression</span></span>|<span data-ttu-id="60bc1-173">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-173">False</span></span>|<span data-ttu-id="60bc1-174">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-174">True</span></span>|<span data-ttu-id="60bc1-175">True</span><span class="sxs-lookup"><span data-stu-id="60bc1-175">True</span></span>|  
|<span data-ttu-id="60bc1-176">约束或表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-176">Constraint or Expression</span></span>|<span data-ttu-id="60bc1-177">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-177">False</span></span>|<span data-ttu-id="60bc1-178">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-178">False</span></span>|<span data-ttu-id="60bc1-179">False</span><span class="sxs-lookup"><span data-stu-id="60bc1-179">False</span></span>|  
  
### <a name="to-add-an-expression-to-a-precedence-constraint"></a><span data-ttu-id="60bc1-180">将表达式添加到优先约束</span><span class="sxs-lookup"><span data-stu-id="60bc1-180">To add an expression to a precedence constraint</span></span>  
  
-   [<span data-ttu-id="60bc1-181">在优先约束中使用表达式</span><span class="sxs-lookup"><span data-stu-id="60bc1-181">Use an Expression in a Precedence Constraint</span></span>](../../2014/integration-services/use-an-expression-in-a-precedence-constraint.md)  
  
-   [<span data-ttu-id="60bc1-182">设置优先约束的属性</span><span class="sxs-lookup"><span data-stu-id="60bc1-182">Set the Properties of a Precedence Constraint</span></span>](../../2014/integration-services/set-the-properties-of-a-precedence-constraint.md)  
  
## <a name="external-resources"></a><span data-ttu-id="60bc1-183">外部资源</span><span class="sxs-lookup"><span data-stu-id="60bc1-183">External Resources</span></span>  
 <span data-ttu-id="60bc1-184">social.technet.microsoft.com 上的技术文章 [SSIS 表达式示例](https://go.microsoft.com/fwlink/?LinkId=220761)</span><span class="sxs-lookup"><span data-stu-id="60bc1-184">Technical article, [SSIS Expression Examples](https://go.microsoft.com/fwlink/?LinkId=220761), on social.technet.microsoft.com</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="60bc1-185">另请参阅</span><span class="sxs-lookup"><span data-stu-id="60bc1-185">See Also</span></span>  
 <span data-ttu-id="60bc1-186">[多个优先约束](../../2014/integration-services/multiple-precedence-constraints.md) </span><span class="sxs-lookup"><span data-stu-id="60bc1-186">[Multiple Precedence Constraints](../../2014/integration-services/multiple-precedence-constraints.md) </span></span>  
 [<span data-ttu-id="60bc1-187">优先约束</span><span class="sxs-lookup"><span data-stu-id="60bc1-187">Precedence Constraints</span></span>](control-flow/precedence-constraints.md)  
  
  
