---
title: Azure SQL DW 上传任务 | Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- SQL12.DTS.DESIGNER.AFPDWUPTASK.F1
- SQL11.DTS.DESIGNER.AFPDWUPTASK.F1
ms.assetid: 112cf764-f85a-4c1a-b732-d299d717c0d4
author: yualan
ms.author: chugu
ms.openlocfilehash: d90cc36b5e8beb35313b76ecef2ed95f065dcb89
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87579014"
---
# <a name="azure-sql-dw-upload-task"></a><span data-ttu-id="a8c4e-102">Azure SQL DW 上传任务</span><span class="sxs-lookup"><span data-stu-id="a8c4e-102">Azure SQL DW Upload Task</span></span>
<span data-ttu-id="a8c4e-103">“Azure SQL DW 上传任务” \*\*\*\* 使 SSIS 包可将本地数据上传到 Azure SQL 数据仓库 (DW) 中的表。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-103">The **Azure SQL DW Upload Task** enables an SSIS package to upload local data to a table in Azure SQL Data Warehouse (DW).</span></span> <span data-ttu-id="a8c4e-104">当前支持的源数据文件格式是采用 UTF8 编码的带分隔符的文本。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-104">The currently supported source data file format is delimited text in UTF8 encoding.</span></span> <span data-ttu-id="a8c4e-105">上传过程遵循有效的 PolyBase 方法。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-105">The uploading process follows the efficient PolyBase approach.</span></span> <span data-ttu-id="a8c4e-106">具体而言，数据首先将上传到 Azure Blob 存储，然后上传到 Azure SQL DW。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-106">Specifically, data will first be uploaded to Azure Blob Storage, and then to Azure SQL DW.</span></span> <span data-ttu-id="a8c4e-107">因此，需要 Azure Blob 存储帐户才可使用此任务。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-107">Therefore, an Azure Blob Storage account is needed to use this task.</span></span>

<span data-ttu-id="a8c4e-108">若要添加“Azure SQL DW 上传任务”  ，请将其从 SSIS 工具栏拖放到设计器画布中，双击或右键单击它，然后单击“编辑”  ，查看任务编辑器对话框。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-108">To add an **Azure SQL DW Upload Task**, drag-drop it from SSIS Toolbox to the designer canvas, and double-click or right-click and click **Edit** to see the task editor dialog box.</span></span>

<span data-ttu-id="a8c4e-109">在“常规”  页上配置以下属性。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-109">On the **General** page, configure the following properties.</span></span>

<span data-ttu-id="a8c4e-110">字段</span><span class="sxs-lookup"><span data-stu-id="a8c4e-110">Field</span></span>|<span data-ttu-id="a8c4e-111">说明</span><span class="sxs-lookup"><span data-stu-id="a8c4e-111">Description</span></span>
-----|-----------
<span data-ttu-id="a8c4e-112">LocalDirectory</span><span class="sxs-lookup"><span data-stu-id="a8c4e-112">LocalDirectory</span></span>|<span data-ttu-id="a8c4e-113">指定包含待上传数据文件的本地目录。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-113">Specifies the local directory that contains the data files to be uploaded.</span></span>
<span data-ttu-id="a8c4e-114">Recursively</span><span class="sxs-lookup"><span data-stu-id="a8c4e-114">Recursively</span></span>|<span data-ttu-id="a8c4e-115">指定是否以递归方式搜索子目录。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-115">Specifies whether to recursively search sub-directories.</span></span>
<span data-ttu-id="a8c4e-116">FileName</span><span class="sxs-lookup"><span data-stu-id="a8c4e-116">FileName</span></span>|<span data-ttu-id="a8c4e-117">指定用于选择具有特定名称模式的文件的名称筛选器。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-117">Specifies a name filter to select files with certain name pattern.</span></span> <span data-ttu-id="a8c4e-118">例如</span><span class="sxs-lookup"><span data-stu-id="a8c4e-118">E.g.</span></span> <span data-ttu-id="a8c4e-119">MySheet\*.xls\* 将包含如 MySheet001.xsl 和 MySheetABC.xslx 等文件。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-119">MySheet\*.xsl\* will include files such as MySheet001.xsl and MySheetABC.xslx.</span></span>
<span data-ttu-id="a8c4e-120">RowDelimiter</span><span class="sxs-lookup"><span data-stu-id="a8c4e-120">RowDelimiter</span></span>|<span data-ttu-id="a8c4e-121">指定标记每一行末尾的字符。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-121">Specifies the character(s) that marks the end of each row.</span></span>
<span data-ttu-id="a8c4e-122">ColumnDelimiter</span><span class="sxs-lookup"><span data-stu-id="a8c4e-122">ColumnDelimiter</span></span>|<span data-ttu-id="a8c4e-123">指定标记每一列末尾的一个或多个字符。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-123">Specifies one or more characters that mark the end of each column.</span></span> <span data-ttu-id="a8c4e-124">例如</span><span class="sxs-lookup"><span data-stu-id="a8c4e-124">E.g.</span></span> <span data-ttu-id="a8c4e-125">&#124;（管道）、\t（制表符）、'（单引号），"（双引号）以及 0x5c（反斜杠）。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-125">&#124; (pipe), \t (tab), ' (single quote), " (double quote), and 0x5c (backslash).</span></span>
<span data-ttu-id="a8c4e-126">IsFirstRowHeader</span><span class="sxs-lookup"><span data-stu-id="a8c4e-126">IsFirstRowHeader</span></span>|<span data-ttu-id="a8c4e-127">指定每个数据文件的第一行是否包含列名称，而非实际数据。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-127">Specifies whether the first row in each data file contains column names instead of actual data.</span></span>
<span data-ttu-id="a8c4e-128">AzureStorageConnection</span><span class="sxs-lookup"><span data-stu-id="a8c4e-128">AzureStorageConnection</span></span>|<span data-ttu-id="a8c4e-129">指定 Azure 存储连接管理器。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-129">Specifies an Azure Storage connection manager.</span></span>
<span data-ttu-id="a8c4e-130">BlobContainer</span><span class="sxs-lookup"><span data-stu-id="a8c4e-130">BlobContainer</span></span>|<span data-ttu-id="a8c4e-131">指定通过 PolyBase 将本地数据上传并转送到 Azure DW 的目标 blob 容器名称。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-131">Specifies the name of blob container to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span> <span data-ttu-id="a8c4e-132">如果此容器不存在，则将创建新容器。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-132">A new container will be created if it does not exist.</span></span>
<span data-ttu-id="a8c4e-133">BlobDirectory</span><span class="sxs-lookup"><span data-stu-id="a8c4e-133">BlobDirectory</span></span>|<span data-ttu-id="a8c4e-134">指定通过 PolyBase 将本地数据上传并转送到 Azure DW 的目标 blob 目录（虚拟层次结构）。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-134">Specifies the blob directory (virtual hierarchical structure) to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span>
<span data-ttu-id="a8c4e-135">RetainFiles</span><span class="sxs-lookup"><span data-stu-id="a8c4e-135">RetainFiles</span></span>|<span data-ttu-id="a8c4e-136">指定是否保留已上传到 Azure 存储的文件。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-136">Specifies whether to retain the files uploaded to Azure Storage.</span></span>
<span data-ttu-id="a8c4e-137">CompressionType</span><span class="sxs-lookup"><span data-stu-id="a8c4e-137">CompressionType</span></span>|<span data-ttu-id="a8c4e-138">指定将文件上传到 Azure 存储时使用的压缩格式。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-138">Specifies the compression format to use upon uploading files to Azure Storage.</span></span> <span data-ttu-id="a8c4e-139">本地源不受影响。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-139">Local source is not affected.</span></span>
<span data-ttu-id="a8c4e-140">CompressionLevel</span><span class="sxs-lookup"><span data-stu-id="a8c4e-140">CompressionLevel</span></span>|<span data-ttu-id="a8c4e-141">指定用于压缩格式的压缩级别。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-141">Specifies the compression level to use for the compression format.</span></span>
<span data-ttu-id="a8c4e-142">AzureDwConnection</span><span class="sxs-lookup"><span data-stu-id="a8c4e-142">AzureDwConnection</span></span>|<span data-ttu-id="a8c4e-143">指定 Azure SQL DW 的 ADO.NET 连接管理器。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-143">Specifies an ADO.NET connection manager for Azure SQL DW.</span></span>
<span data-ttu-id="a8c4e-144">TableName</span><span class="sxs-lookup"><span data-stu-id="a8c4e-144">TableName</span></span>|<span data-ttu-id="a8c4e-145">指定目标表的名称。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-145">Specifies name of the destination table.</span></span> <span data-ttu-id="a8c4e-146">可选择现有的表名称，或选择“\<New Table ...>”创建一个新表。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-146">Either choose an existing table name, or create a new one by choosing **\<New Table ...>**.</span></span>
<span data-ttu-id="a8c4e-147">TableDistribution</span><span class="sxs-lookup"><span data-stu-id="a8c4e-147">TableDistribution</span></span>|<span data-ttu-id="a8c4e-148">指定新表的分发方法。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-148">Specifies the distribution method for new table.</span></span> <span data-ttu-id="a8c4e-149">已为 **TableName**指定新的表名称时适用。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-149">Applies if a new table name is specified for **TableName**.</span></span>
<span data-ttu-id="a8c4e-150">HashColumnName</span><span class="sxs-lookup"><span data-stu-id="a8c4e-150">HashColumnName</span></span>|<span data-ttu-id="a8c4e-151">指定用于哈希表分发的列。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-151">Specifies the column used for hash table distribution.</span></span> <span data-ttu-id="a8c4e-152">已为 **TableDistribution** 指定 **HASH**时适用。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-152">Applies if **HASH** is specified for **TableDistribution**.</span></span>

<span data-ttu-id="a8c4e-153">根据是上传到新表还是现有表，看到的“映射” \*\*\*\* 页面会有所不同。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-153">You will see a different **Mappings** page depending on whether you are uploading to a new table or to an existing one.</span></span> <span data-ttu-id="a8c4e-154">如果是前者，请在待创建目标表中配置要映射到的源列及其对应名称。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-154">In the former case, configure which source columns are to be mapped and their corresponding names in the to-be-created destination table.</span></span> <span data-ttu-id="a8c4e-155">如果是后者，请配置源和目标列之间的映射关系。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-155">In the latter case, configure the mapping relationships between source and destination columns.</span></span>

<span data-ttu-id="a8c4e-156">在“列”  页上，配置每个源列的数据类型属性。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-156">On the **Columns** page, configure the data type properties for each source column.</span></span>

<span data-ttu-id="a8c4e-157">“T-SQL”  页显示用于将数据从 Azure Blob 存储加载到 Azure SQL DW 的 T-SQL。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-157">The **T-SQL** page shows the T-SQL used to load data from Azure Blob Storage to Azure SQL DW.</span></span> <span data-ttu-id="a8c4e-158">T-SQL 从其他页面的配置中自动生成，并在任务执行的过程中执行。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-158">The T-SQL is automatically generated from configurations on the other pages, and will be executed as part of the task execution.</span></span> <span data-ttu-id="a8c4e-159">若要满足特定需求，可通过单击“编辑”  按钮选择手动编辑已生成的 T-SQL。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-159">You may choose to manually edit the generated T-SQL to meet your particular needs by clicking the **Edit** button.</span></span> <span data-ttu-id="a8c4e-160">之后可单击“重置”  按钮还原为自动生成的 T-SQL。</span><span class="sxs-lookup"><span data-stu-id="a8c4e-160">You can revert to the automatically generated one later on by clicking the **Reset** button.</span></span>
