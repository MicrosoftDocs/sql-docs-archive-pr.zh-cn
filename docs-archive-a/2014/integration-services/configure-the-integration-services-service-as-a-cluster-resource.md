---
title: 将 Integration Services 服务配置为群集资源 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 367835aa-9855-4791-a989-b3d08402ad4c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f55b07f5587720130646b9637b91afbb8f179998
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692491"
---
# <a name="configure-the-integration-services-service-as-a-cluster-resource"></a><span data-ttu-id="99525-102">将 Integration Services 服务配置为群集资源</span><span class="sxs-lookup"><span data-stu-id="99525-102">Configure the Integration Services Service as a Cluster Resource</span></span>
  <span data-ttu-id="99525-103">对于那些认为将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务配置为群集资源所带来的优点大于缺点的客户，本节包含必要的配置说明。</span><span class="sxs-lookup"><span data-stu-id="99525-103">For those customers who conclude that the advantages of configuring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource outweigh the disadvantages, this section contains the necessary configuration instructions.</span></span> <span data-ttu-id="99525-104">但是， [!INCLUDE[msCoName](../includes/msconame-md.md)] 不建议将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务配置为群集资源。</span><span class="sxs-lookup"><span data-stu-id="99525-104">However, [!INCLUDE[msCoName](../includes/msconame-md.md)] does not recommend that the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service be configured as a cluster resource.</span></span>  
  
 <span data-ttu-id="99525-105">若要将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务配置为群集资源，您需要完成以下任务。</span><span class="sxs-lookup"><span data-stu-id="99525-105">To configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource, you need to complete the following tasks.</span></span>  
  
-   <span data-ttu-id="99525-106">在群集上安装 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="99525-106">Install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on a cluster.</span></span>  
  
     <span data-ttu-id="99525-107">若要在群集上安装 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] ，必须将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 安装在群集的每个节点上。</span><span class="sxs-lookup"><span data-stu-id="99525-107">To install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on a cluster, you must install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on each node in the cluster.</span></span>  
  
-   <span data-ttu-id="99525-108">将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 配置为群集资源。</span><span class="sxs-lookup"><span data-stu-id="99525-108">Configure [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource.</span></span>  
  
     <span data-ttu-id="99525-109">在将 Integration Services 安装在群集的每个节点上之后，需要将 Integration Services 配置为群集资源。</span><span class="sxs-lookup"><span data-stu-id="99525-109">With Integration Services installed on each node in the cluster, you need to configure Integration Services as a cluster resource.</span></span> <span data-ttu-id="99525-110">在将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务配置为群集资源时，可以向与 [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)]相同或不同的资源组中添加该服务。</span><span class="sxs-lookup"><span data-stu-id="99525-110">When you configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource, you can add the service to the same resource group as the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)], or to a different group.</span></span> <span data-ttu-id="99525-111">下表描述了在选择资源组时可能存在的优缺点。</span><span class="sxs-lookup"><span data-stu-id="99525-111">The following table describes the possible advantages and disadvantages in selecting a resource group.</span></span>  
  
    |<span data-ttu-id="99525-112">当 Integration Services 和 SQL Server 位于同一个资源组中时</span><span class="sxs-lookup"><span data-stu-id="99525-112">When Integration Services and SQL Server are in the same resource group</span></span>|<span data-ttu-id="99525-113">当 Integration Services 和 SQL Server 位于不同的资源组中时</span><span class="sxs-lookup"><span data-stu-id="99525-113">When Integration Services and SQL Server are in different resource groups</span></span>|  
    |-----------------------------------------------------------------------------|-------------------------------------------------------------------------------|  
    |<span data-ttu-id="99525-114">客户端计算机可以使用 [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] 来管理存储在 msdb 数据库中的包，因为 [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] 和 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务运行于同一台虚拟服务器上。</span><span class="sxs-lookup"><span data-stu-id="99525-114">Client computers can use [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] to manage packages stored in the msdb database because both the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] and [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service are running on the same virtual server.</span></span> <span data-ttu-id="99525-115">此配置避免了双跃点方案中的委托问题。</span><span class="sxs-lookup"><span data-stu-id="99525-115">This configuration avoids the delegation issues of the double-hop scenario.</span></span>|<span data-ttu-id="99525-116">客户端计算机不能使用 [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] 来管理存储在 msdb 数据库中的包。</span><span class="sxs-lookup"><span data-stu-id="99525-116">Client computers cannot use [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] to manage packages stored in the msdb database.</span></span> <span data-ttu-id="99525-117">客户端可以连接到运行 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务的虚拟服务器。</span><span class="sxs-lookup"><span data-stu-id="99525-117">The client can connect to the virtual server on which the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is running.</span></span> <span data-ttu-id="99525-118">但是，客户端计算机不能将用户的凭据委托给运行 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 的虚拟服务器。</span><span class="sxs-lookup"><span data-stu-id="99525-118">However, that computer cannot delegate the user's credentials to the virtual server on which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="99525-119">这称作双跃点方案。</span><span class="sxs-lookup"><span data-stu-id="99525-119">This is known as a double-hop scenario.</span></span>|  
    |<span data-ttu-id="99525-120">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务在 CPU 和其他计算机资源方面能够与其他 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 服务竞争。</span><span class="sxs-lookup"><span data-stu-id="99525-120">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service competes with other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services for CPU and other computer resources.</span></span>|<span data-ttu-id="99525-121">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务在 CPU 和其他计算机资源方面不能与其他 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 服务竞争，因为不同的节点上配置了不同的资源组。</span><span class="sxs-lookup"><span data-stu-id="99525-121">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service does not compete with other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services for CPU and other computer resources because the different resource groups are configured on different nodes.</span></span>|  
    |<span data-ttu-id="99525-122">将包加载和保存到 msdb 数据库的速度会加快，生成的网络通信流量会较少，因为这两项服务运行于同一台计算机上。</span><span class="sxs-lookup"><span data-stu-id="99525-122">The loading and saving of packages to the msdb database is faster and generates less network traffic because both services are running on the same computer.</span></span>|<span data-ttu-id="99525-123">将包加载和保存到 msdb 数据库的速度可能会减慢，生成的网络通信流量会较多。</span><span class="sxs-lookup"><span data-stu-id="99525-123">The loading and saving of packages to the msdb database might be slower and generate more network traffic.</span></span>|  
    |<span data-ttu-id="99525-124">这两项服务同时联机或脱机。</span><span class="sxs-lookup"><span data-stu-id="99525-124">Both services are online or offline at the same time.</span></span>|<span data-ttu-id="99525-125">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务可以在 [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] 处于脱机状态时联机。</span><span class="sxs-lookup"><span data-stu-id="99525-125">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service might be online while the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] is offline.</span></span> <span data-ttu-id="99525-126">因此，存储在 [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] 的 msdb 数据库中的包不可用。</span><span class="sxs-lookup"><span data-stu-id="99525-126">Thus, the packages stored in the msdb database of the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] are unavailable.</span></span>|  
    |<span data-ttu-id="99525-127">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务不能根据需要快速移动到另一个节点。</span><span class="sxs-lookup"><span data-stu-id="99525-127">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service cannot be moved quickly to another node if it is required.</span></span>|<span data-ttu-id="99525-128">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务可以根据需要更快地移动到另一个节点。</span><span class="sxs-lookup"><span data-stu-id="99525-128">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service can be moved more quickly to another node if it is required.</span></span>|  
  
     <span data-ttu-id="99525-129">在确定了要向哪个资源组添加 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]之后，必须在该组中将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 配置为群集资源。</span><span class="sxs-lookup"><span data-stu-id="99525-129">After you have decided to which resource group you will add [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)], you have to configure [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource in that group.</span></span>  
  
-   <span data-ttu-id="99525-130">配置 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务和包存储区。</span><span class="sxs-lookup"><span data-stu-id="99525-130">Configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service and package store.</span></span>  
  
     <span data-ttu-id="99525-131">在将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 配置为群集资源之后，必须针对群集内每个节点上的 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务，修改配置文件的位置和内容。</span><span class="sxs-lookup"><span data-stu-id="99525-131">Having configured [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource, you must modify the location and the content of the configuration file for the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service on each node in the cluster.</span></span> <span data-ttu-id="99525-132">这些修改会使得配置文件和包存储区在发生故障转移时对于所有的节点可用。</span><span class="sxs-lookup"><span data-stu-id="99525-132">These modifications make both the configuration file and the package store available to all nodes if there is a failover.</span></span> <span data-ttu-id="99525-133">在修改配置文件的位置和内容之后，必须将该服务联机。</span><span class="sxs-lookup"><span data-stu-id="99525-133">After you modify the location and content of the configuration file, you have to bring the service online.</span></span>  
  
-   <span data-ttu-id="99525-134">将 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务作为群集资源联机。</span><span class="sxs-lookup"><span data-stu-id="99525-134">Bring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service online as a cluster resource.</span></span>  
  
 <span data-ttu-id="99525-135">在群集或任何服务器上配置 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务后，可能需要配置 DCOM 权限才能从客户端计算机连接到该服务。</span><span class="sxs-lookup"><span data-stu-id="99525-135">After configuring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service on a cluster, or on any server, you might have to configure DCOM permissions before you can connect to the service from a client computer.</span></span> <span data-ttu-id="99525-136">有关详细信息，请参阅[连接到远程 Integration Services 服务器（SSIS 服务）](../../2014/integration-services/connect-to-a-remote-integration-services-server-ssis-service.md)。</span><span class="sxs-lookup"><span data-stu-id="99525-136">For more information, see [Connect to a Remote Integration Services Server &#40;SSIS Service&#41;](../../2014/integration-services/connect-to-a-remote-integration-services-server-ssis-service.md).</span></span>  
  
 <span data-ttu-id="99525-137">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务不能委托凭据。</span><span class="sxs-lookup"><span data-stu-id="99525-137">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service cannot delegate credentials.</span></span> <span data-ttu-id="99525-138">因此，在满足下列条件时，不能使用 [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] 来管理存储在 msdb 数据库中的包：</span><span class="sxs-lookup"><span data-stu-id="99525-138">Therefore, you cannot use [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] to manage packages stored in the msdb database when the following conditions are true:</span></span>  
  
-   <span data-ttu-id="99525-139">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务和 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 运行于不同的服务器或虚拟服务器上。</span><span class="sxs-lookup"><span data-stu-id="99525-139">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service and [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] are running on separate servers or virtual servers.</span></span>  
  
-   <span data-ttu-id="99525-140">运行 [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] 的客户端是第三台计算机。</span><span class="sxs-lookup"><span data-stu-id="99525-140">The client that is running [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] is a third computer.</span></span>  
  
 <span data-ttu-id="99525-141">客户端可以连接到运行 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务的虚拟服务器。</span><span class="sxs-lookup"><span data-stu-id="99525-141">The client can connect to the virtual server on which the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is running.</span></span> <span data-ttu-id="99525-142">但是，客户端计算机不能将用户的凭据委托给运行 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 的虚拟服务器。</span><span class="sxs-lookup"><span data-stu-id="99525-142">However, that computer cannot delegate the user's credentials to the virtual server on which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="99525-143">这称作双跃点方案。</span><span class="sxs-lookup"><span data-stu-id="99525-143">This is known as a double-hop scenario.</span></span>  
  
### <a name="to-install-integration-services-on-a-cluster"></a><span data-ttu-id="99525-144">在群集上安装 Integration Services</span><span class="sxs-lookup"><span data-stu-id="99525-144">To Install Integration Services on a Cluster</span></span>  
  
1.  <span data-ttu-id="99525-145">安装并配置具有一个或更多节点的群集。</span><span class="sxs-lookup"><span data-stu-id="99525-145">Install and configure a cluster with one or more nodes.</span></span>  
  
2.  <span data-ttu-id="99525-146">（可选）安装群集服务（如 [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)]）。</span><span class="sxs-lookup"><span data-stu-id="99525-146">(Optional) Install clustered services, such as the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)].</span></span>  
  
3.  <span data-ttu-id="99525-147">在群集的每个节点上安装 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="99525-147">Install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on each node of the cluster.</span></span>  
  
### <a name="to-configure-integration-services-as-a-cluster-resource"></a><span data-ttu-id="99525-148">将 Integration Services 配置为群集资源</span><span class="sxs-lookup"><span data-stu-id="99525-148">To Configure Integration Services as a Cluster Resource</span></span>  
  
1.  <span data-ttu-id="99525-149">打开 **“群集管理器”** 。</span><span class="sxs-lookup"><span data-stu-id="99525-149">Open the **Cluster Administrator**.</span></span>  
  
2.  <span data-ttu-id="99525-150">在控制台树中选择 Groups 文件夹。</span><span class="sxs-lookup"><span data-stu-id="99525-150">In the console tree, select the Groups folder.</span></span>  
  
3.  <span data-ttu-id="99525-151">在结果窗格中，选择计划添加 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]的组：</span><span class="sxs-lookup"><span data-stu-id="99525-151">In the results pane, select the group to which you plan to add [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]:</span></span>  
  
    -   <span data-ttu-id="99525-152">若要将 Integrations Services 作为群集资源添加到与 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]相同的资源组中，请选择 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 所属的组。</span><span class="sxs-lookup"><span data-stu-id="99525-152">To add Integrations Services as a cluster resource to the same resource group as [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], select the group to which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] belongs.</span></span>  
  
    -   <span data-ttu-id="99525-153">若要将 Integrations Services 作为群集资源添加到不同于 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]的组中，请选择 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 所属的组以外的组。</span><span class="sxs-lookup"><span data-stu-id="99525-153">To add Integrations Services as a cluster resource to a different group than [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], select a group other than the group to which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] belongs.</span></span>  
  
4.  <span data-ttu-id="99525-154">在 **“文件”** 菜单上，指向 **“新建”** ，再单击 **“资源”** 。</span><span class="sxs-lookup"><span data-stu-id="99525-154">On the **File** menu, point to **New**, and then click **Resource**.</span></span>  
  
5.  <span data-ttu-id="99525-155">在“资源向导”的“新资源”页上，键入名称并选择“一般服务”作为“服务类型”    。</span><span class="sxs-lookup"><span data-stu-id="99525-155">On the **New Resource** page of the Resource Wizard, type a name and select **"Generic Service"** as the **Service Type**.</span></span> <span data-ttu-id="99525-156">不要更改 **“组”** 的值。</span><span class="sxs-lookup"><span data-stu-id="99525-156">Do not change the value of **Group**.</span></span> <span data-ttu-id="99525-157">单击“下一步”。 </span><span class="sxs-lookup"><span data-stu-id="99525-157">Click **Next**.</span></span>  
  
6.  <span data-ttu-id="99525-158">在 **“可能的所有者”** 页上，将群集的节点作为可能的资源所有者来添加或删除。</span><span class="sxs-lookup"><span data-stu-id="99525-158">On the **Possible Owners** page, add or remove the nodes of the cluster as the possible owners of the resource.</span></span> <span data-ttu-id="99525-159">单击“下一步”。 </span><span class="sxs-lookup"><span data-stu-id="99525-159">Click **Next**.</span></span>  
  
7.  <span data-ttu-id="99525-160">若要添加依赖关系，请在 **“依赖关系”** 页上的 **“可用资源”** 下选择一项资源，然后单击 **“添加”** 。</span><span class="sxs-lookup"><span data-stu-id="99525-160">To add dependencies, on the **Dependencies** page, select a resource under **Available resources**, and then click **Add**.</span></span> <span data-ttu-id="99525-161">对于故障转移情况， [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 和用来存储 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 包的共享磁盘应在 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 联机前重新联机。</span><span class="sxs-lookup"><span data-stu-id="99525-161">In case of a failover, both [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] and the shared disk that stores [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] packages should come back online before [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] is brought online.</span></span> <span data-ttu-id="99525-162">在选择依赖关系之后，单击 **“下一步”** 。</span><span class="sxs-lookup"><span data-stu-id="99525-162">After you have selected the dependencies, click **Next**.</span></span>  
  
     <span data-ttu-id="99525-163">有关详细信息，请参阅 [Add Dependencies to a SQL Server Resource](../sql-server/failover-clusters/windows/add-dependencies-to-a-sql-server-resource.md)。</span><span class="sxs-lookup"><span data-stu-id="99525-163">For more information, see [Add Dependencies to a SQL Server Resource](../sql-server/failover-clusters/windows/add-dependencies-to-a-sql-server-resource.md).</span></span>  
  
8.  <span data-ttu-id="99525-164">在“一般服务参数”  页上，输入 **MsDtsServer** 作为服务名。</span><span class="sxs-lookup"><span data-stu-id="99525-164">On the **Generic Service Parameters** page, enter **MsDtsServer** as the name of the service.</span></span> <span data-ttu-id="99525-165">单击“下一步”。 </span><span class="sxs-lookup"><span data-stu-id="99525-165">Click **Next**.</span></span>  
  
9. <span data-ttu-id="99525-166">在 **“注册表复制”** 页上单击 **“添加”** ，以添加用来标识 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务的配置文件位置的注册表项。</span><span class="sxs-lookup"><span data-stu-id="99525-166">On the **Registry Replication** page, click **Add** to add the registry key that identifies the location of the configuration file for the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span> <span data-ttu-id="99525-167">此文件必须位于 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务所在资源组中的共享磁盘上。</span><span class="sxs-lookup"><span data-stu-id="99525-167">This file must be located on a shared disk that is in the same resource group as the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span>  
  
10. <span data-ttu-id="99525-168">在“注册表项”   对话框中，键入 SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile。</span><span class="sxs-lookup"><span data-stu-id="99525-168">In the **Registry Key** dialog box, type **SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile**.</span></span> <span data-ttu-id="99525-169">单击 **“确定”** ，然后单击 **“完成”** 。</span><span class="sxs-lookup"><span data-stu-id="99525-169">Click **OK**, and then click **Finish**.</span></span>  
  
     <span data-ttu-id="99525-170">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务现已添加为群集资源。</span><span class="sxs-lookup"><span data-stu-id="99525-170">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service has now been added as a cluster resource.</span></span>  
  
### <a name="to-configure-the-integration-services-service-and-package-store"></a><span data-ttu-id="99525-171">配置 Integration Services 服务和包存储区</span><span class="sxs-lookup"><span data-stu-id="99525-171">To Configure the Integration Services Service and Package Store</span></span>  
  
1.  <span data-ttu-id="99525-172">在 %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn\MsDtsSrvr.ini.xml 中找到该配置文件。</span><span class="sxs-lookup"><span data-stu-id="99525-172">Locate the configuration file at %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn\MsDtsSrvr.ini.xml.</span></span> <span data-ttu-id="99525-173">将该文件复制到已添加 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务的组的共享磁盘上。</span><span class="sxs-lookup"><span data-stu-id="99525-173">Copy it to the shared disk for the group to which you added the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span>  
  
2.  <span data-ttu-id="99525-174">在共享磁盘上，创建一个名为 **Packages** 的新文件夹来充当包存储区。</span><span class="sxs-lookup"><span data-stu-id="99525-174">On the shared disk, create a new folder named **Packages** to serve as the package store.</span></span> <span data-ttu-id="99525-175">为适当的用户和组授予对这个新文件夹的“列出文件夹”和“写入”权限。</span><span class="sxs-lookup"><span data-stu-id="99525-175">Grant List Folders and Write permissions on the new folder to appropriate users and groups.</span></span>  
  
3.  <span data-ttu-id="99525-176">在共享磁盘上，用文本编辑器或 XML 编辑器打开配置文件。</span><span class="sxs-lookup"><span data-stu-id="99525-176">On the shared disk, open the configuration file in a text or XML editor.</span></span> <span data-ttu-id="99525-177">将 `ServerName` 元素的值更改为同一资源组中虚拟 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 的名称。</span><span class="sxs-lookup"><span data-stu-id="99525-177">Change the value of the `ServerName` element to the name of the virtual [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that is in the same resource group.</span></span>  
  
4.  <span data-ttu-id="99525-178">将元素的值更改 `StorePath` 为在上一步骤中在共享磁盘上创建的 "**包**" 文件夹的完全限定路径。</span><span class="sxs-lookup"><span data-stu-id="99525-178">Change the value of the `StorePath` element to the fully-qualified path of the **Packages** folder created on the shared disk in a previous step.</span></span>  
  
5.  <span data-ttu-id="99525-179">将注册表中的 **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile** 值更新为共享磁盘上服务配置文件的完全限定路径和文件名。</span><span class="sxs-lookup"><span data-stu-id="99525-179">Update the value of **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile** in the Registry to the fully-qualified path and file name of the service configuration file on the shared disk.</span></span>  
  
### <a name="to-bring-the-integration-services-service-online"></a><span data-ttu-id="99525-180">将 Integration Services 服务联机</span><span class="sxs-lookup"><span data-stu-id="99525-180">To bring the Integration Services service online</span></span>  
  
-   <span data-ttu-id="99525-181">在  “群集管理器”中选择 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务，单击右键，然后在弹出菜单中选择“联机”  。</span><span class="sxs-lookup"><span data-stu-id="99525-181">In the **Cluster Administrator**, select the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service, right-click, and select **Bring Online** from the popup menu.</span></span> <span data-ttu-id="99525-182">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] 服务现已作为群集资源联机。</span><span class="sxs-lookup"><span data-stu-id="99525-182">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is now online as a cluster resource.</span></span>  
  
  
