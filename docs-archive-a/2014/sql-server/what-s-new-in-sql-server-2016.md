---
title: SQL Server 2014 中的新增功能 |Microsoft Docs
ms.custom: ''
ms.date: 12/10/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- new features [SQL Server]
- SQL Server, what's new
- SQL Server 2008 what's new
- what's new [SQL Server]
- sql server 2014 sp1
- sql server 2014 sp2
ms.assetid: 6a428023-e3cc-4626-a88a-4c13ccbd7db0
author: rothja
ms.author: jroth
ms.openlocfilehash: 787a9c1cb22af1ef04b933012517fcce46cccef5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692128"
---
# <a name="whats-new-in-sql-server-2014"></a><span data-ttu-id="b999d-102">SQL Server 2014 中的新增功能</span><span class="sxs-lookup"><span data-stu-id="b999d-102">What's New in SQL Server 2014</span></span>

<span data-ttu-id="b999d-103">本主题概述了中的新功能的详细链接 [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] ，并汇总了的服务包[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b999d-103">This topic summarizes detailed links to new features in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] and summarizes services packs for [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span></span>  
 
<span data-ttu-id="b999d-104">**试用：** ![Azure 虚拟机小型虚拟机 ](./media/what-s-new-in-sql-server-2016/azure-virtual-machine-small.png) 有一个 azure 帐户？</span><span class="sxs-lookup"><span data-stu-id="b999d-104">**Try it out:** ![Azure Virtual Machine small](./media/what-s-new-in-sql-server-2016/azure-virtual-machine-small.png)     Have an Azure account?</span></span>  <span data-ttu-id="b999d-105">转到 https://ms.portal.azure.com/?flight=1#create/Microsoft.SQLServer2014sp1EnterpriseWindowsServer2012R2 ，加速已安装 SQL Server 2014 Service Pack 1 (SP1) 虚拟机。</span><span class="sxs-lookup"><span data-stu-id="b999d-105">Go to https://ms.portal.azure.com/?flight=1#create/Microsoft.SQLServer2014sp1EnterpriseWindowsServer2012R2 to spin up a Virtual Machine with SQL Server 2014 Service Pack 1 (SP1) already installed.</span></span>

> [!TIP]
> <span data-ttu-id="b999d-106">[单击此处](../index.yml)了解 SQL Server 2014 的 "主页" 文档页。</span><span class="sxs-lookup"><span data-stu-id="b999d-106">[Click here](../index.yml) for the home documentation page of SQL Server 2014.</span></span>

<!--
Do not let this file's filename fool you.
This filename contains "2016", but nevertheless...
This file, at this exact GitHub path, is dedicated to SQL Server version 2014.
-->

## <a name="whats-new-articles"></a><span data-ttu-id="b999d-107">新增功能文章</span><span class="sxs-lookup"><span data-stu-id="b999d-107">What's New articles</span></span>

-   [<span data-ttu-id="b999d-108">新增功能 &#40;数据库引擎&#41;</span><span class="sxs-lookup"><span data-stu-id="b999d-108">What's New &#40;Database Engine&#41;</span></span>](../database-engine/whats-new-in-sql-server-2016.md)  
  
-   [<span data-ttu-id="b999d-109">Analysis Services 和 Business Intelligence 中的新增功能</span><span class="sxs-lookup"><span data-stu-id="b999d-109">What's New in Analysis Services and Business Intelligence</span></span>](https://docs.microsoft.com/analysis-services/what-s-new-in-analysis-services)  
  
-   [<span data-ttu-id="b999d-110">SQL Server 安装中的新增功能</span><span class="sxs-lookup"><span data-stu-id="b999d-110">What's New in SQL Server Installation</span></span>](install/what-s-new-in-sql-server-installation.md)  
  
 <span data-ttu-id="b999d-111">**[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]尚未引入以下功能的重要新功能：**</span><span class="sxs-lookup"><span data-stu-id="b999d-111">**[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] has not introduced significant new features to the following features:**</span></span>  
  
-   [<span data-ttu-id="b999d-112">新增功能 &#40;Integration Services&#41;</span><span class="sxs-lookup"><span data-stu-id="b999d-112">What's New &#40;Integration Services&#41;</span></span>](../integration-services/what-s-new-in-integration-services-in-sql-server-2016.md)  
  
-   [<span data-ttu-id="b999d-113">新增功能 &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="b999d-113">What's New &#40;Reporting Services&#41;</span></span>](../reporting-services/what-s-new-reporting-services.md)  
  
## <a name="sssql14-service-pack-1-sp1"></a>[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]<span data-ttu-id="b999d-114">Service Pack 1 (SP1)</span><span class="sxs-lookup"><span data-stu-id="b999d-114">Service Pack 1 (SP1)</span></span>
[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] <span data-ttu-id="b999d-115">(SP1) 不会引入重大的新功能。</span><span class="sxs-lookup"><span data-stu-id="b999d-115">(SP1) did not introduce significant new features.</span></span>
-  <span data-ttu-id="b999d-116">[SQL Server 2014 Service Pack 1 版本信息](https://support.microsoft.com/kb/3058865)。</span><span class="sxs-lookup"><span data-stu-id="b999d-116">[SQL Server 2014 Service Pack 1 release information](https://support.microsoft.com/kb/3058865).</span></span>
-  <span data-ttu-id="b999d-117">[ ![ 下载 Microsoft SQL Server 2014 的 service pack 1](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=46694) ，[下载 Microsoft SQL Server 2014 的 service pack 1](https://www.microsoft.com/download/details.aspx?id=46694)。</span><span class="sxs-lookup"><span data-stu-id="b999d-117">[![Download Service Pack 1 for Microsoft SQL Server 2014](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=46694) [Download Service Pack 1 for Microsoft SQL Server 2014](https://www.microsoft.com/download/details.aspx?id=46694).</span></span>


## <a name="sssql14-service-pack-2-sp2"></a>[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]<span data-ttu-id="b999d-118">Service Pack 2 (SP2) </span><span class="sxs-lookup"><span data-stu-id="b999d-118">Service Pack 2 (SP2)</span></span>
- <span data-ttu-id="b999d-119">[SQL Server 2014 Service Pack 2 版本信息](https://support.microsoft.com/kb/3171021)。</span><span class="sxs-lookup"><span data-stu-id="b999d-119">[SQL Server 2014 Service Pack 2 release information](https://support.microsoft.com/kb/3171021).</span></span>
-  <span data-ttu-id="b999d-120">下载适用于[ ![ Microsoft SQL Server 2014 的 service pack 2](./media/what-s-new-in-sql-server-2016/download.png)](https://go.microsoft.com/fwlink/?LinkID=821558) [下载 service pack 2 Microsoft SQL Server 2014](https://go.microsoft.com/fwlink/?LinkID=821558)。</span><span class="sxs-lookup"><span data-stu-id="b999d-120">[![Download Service Pack 2 for Microsoft SQL Server 2014](./media/what-s-new-in-sql-server-2016/download.png)](https://go.microsoft.com/fwlink/?LinkID=821558) [Download Service Pack 2 for Microsoft SQL Server 2014](https://go.microsoft.com/fwlink/?LinkID=821558).</span></span>
-  <span data-ttu-id="b999d-121">[ ![ 下载 SQL SERVER 2014 Sp2 功能包](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=53164)[下载 SQL Server 2014 sp2 功能包](https://www.microsoft.com/download/details.aspx?id=53164)。</span><span class="sxs-lookup"><span data-stu-id="b999d-121">[![Download SQL Server 2014 SP2 Feature Pack](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=53164) [Download the SQL Server 2014 SP2 Feature Pack](https://www.microsoft.com/download/details.aspx?id=53164).</span></span>

[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] <span data-ttu-id="b999d-122">(SP2) 包含以下改进：</span><span class="sxs-lookup"><span data-stu-id="b999d-122">(SP2) Includes the following improvements:</span></span>

### <a name="performance-and-scalability-improvements"></a><span data-ttu-id="b999d-123">性能和可伸缩性改进</span><span class="sxs-lookup"><span data-stu-id="b999d-123">Performance and Scalability Improvements</span></span> 
-   <span data-ttu-id="b999d-124">**自动软 NUMA 分区：** 对于 [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2，在实例启动期间启用跟踪标志8079时，会启用自动软 NUMA。</span><span class="sxs-lookup"><span data-stu-id="b999d-124">**Automatic Soft NUMA partitioning:** With [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2, Automatic Soft NUMA is enabled when Trace Flag 8079 is turned on during instance startup.</span></span> <span data-ttu-id="b999d-125">如果在启动期间启用跟踪标志8079， [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 将询问硬件布局，并在报告每个 NUMA 节点8个或更多 cpu 的系统上自动配置软 NUMA。</span><span class="sxs-lookup"><span data-stu-id="b999d-125">When Trace Flag 8079 is enabled during startup, [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 will interrogate the hardware layout and automatically configure Soft NUMA on systems reporting 8 or more CPUs per NUMA node.</span></span> <span data-ttu-id="b999d-126">自动、软 NUMA 行为是) 感知 (HT/逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="b999d-126">The automatic, soft NUMA behavior is Hyperthread (HT/logical processor) aware.</span></span> <span data-ttu-id="b999d-127">通过提高侦听器数、缩放和网络与加密功能，其他节点的分区和创建会缩放后台处理。</span><span class="sxs-lookup"><span data-stu-id="b999d-127">The partitioning and creation of additional nodes scales background processing by increasing the number of listeners, scaling, and network and encryption capabilities.</span></span> <span data-ttu-id="b999d-128">建议先用自动软 NUMA 测试性能工作负荷，然后再在生产环境中对其进行调整。</span><span class="sxs-lookup"><span data-stu-id="b999d-128">We recommend that you first test the performance workload with Auto-Soft NUMA, before tuning it in production.</span></span> <span data-ttu-id="b999d-129">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/psssql/2016/03/30/sql-2016-it-just-runs-faster-automatic-soft-numa/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-129">[For more information, see the blog](https://blogs.msdn.microsoft.com/psssql/2016/03/30/sql-2016-it-just-runs-faster-automatic-soft-numa/).</span></span> 
-  <span data-ttu-id="b999d-130">**动态内存对象缩放：** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]SP2 根据节点数和核心数动态地将内存对象分区，以在新式硬件上缩放。</span><span class="sxs-lookup"><span data-stu-id="b999d-130">**Dynamic Memory Object Scaling:** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 dynamically partitions memory objects based on number of nodes and cores to scale on modern hardware.</span></span> <span data-ttu-id="b999d-131">动态升级的目标是 (CMEMTHREAD) 自动将线程安全内存对象分区，如果它成为瓶颈。</span><span class="sxs-lookup"><span data-stu-id="b999d-131">The goal of dynamic promotion is to automatically partition a thread safe memory object (CMEMTHREAD) if it becomes a bottleneck.</span></span> <span data-ttu-id="b999d-132">可按节点 (分区数等于 NUMA 节点数) ，对非分区内存对象进行动态分区。</span><span class="sxs-lookup"><span data-stu-id="b999d-132">Non-partitioned memory objects can be dynamically partitioned by node (number of partitions equals number of NUMA nodes).</span></span> <span data-ttu-id="b999d-133">按节点分区的内存对象可以通过 CPU 进行进一步分区 (分区数等于 Cpu) 数。</span><span class="sxs-lookup"><span data-stu-id="b999d-133">Memory objects partitioned by node can by further partitioned by CPU (number of partitions equals number of CPUs).</span></span> <span data-ttu-id="b999d-134">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/psssql/2016/04/06/sql-2016-it-just-runs-faster-dynamic-memory-object-cmemthread-partitioning/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-134">[For more information, see the blog](https://blogs.msdn.microsoft.com/psssql/2016/04/06/sql-2016-it-just-runs-faster-dynamic-memory-object-cmemthread-partitioning/).</span></span>
-  <span data-ttu-id="b999d-135">**DBCC CHECK 命令的 MAXDOP 提示 \* ：** 此改进解决了[) 468694 (的连接反馈](https://connect.microsoft.com/SQLServer/feedback/details/468694/maxdop-option-in-dbcc-checkdb)。</span><span class="sxs-lookup"><span data-stu-id="b999d-135">**MAXDOP hint for DBCC CHECK\* commands:** This improvement addresses [connect feedback (468694)](https://connect.microsoft.com/SQLServer/feedback/details/468694/maxdop-option-in-dbcc-checkdb).</span></span> <span data-ttu-id="b999d-136">你现在可以使用除 sp_configure 值以外的 MAXDOP 设置运行 DBCC CHECKDB。</span><span class="sxs-lookup"><span data-stu-id="b999d-136">You can now run DBCC CHECKDB with a MAXDOP setting other than the sp_configure value.</span></span> <span data-ttu-id="b999d-137">如果 MAXDOP 超出使用资源调控器配置的值，则数据库引擎会使用资源调控器 MAXDOP 值（如 ALTER WORKLOAD GROUP (Transact-SQL) 中所述）。</span><span class="sxs-lookup"><span data-stu-id="b999d-137">If MAXDOP exceeds the value configured with Resource Governor, the Database Engine uses the Resource Governor MAXDOP value, described in ALTER WORKLOAD GROUP (Transact-SQL).</span></span> <span data-ttu-id="b999d-138">当使用 MAXDOP 查询提示时，所有和 max degree of parallelism 配置选项一起使用的语义规则均适用。</span><span class="sxs-lookup"><span data-stu-id="b999d-138">All semantic rules used with the max degree of parallelism configuration option are applicable when you use the MAXDOP query hint.</span></span> <span data-ttu-id="b999d-139">有关详细信息，请参阅[DBCC CHECKDB (transact-sql) ](https://msdn.microsoft.com/library/ms176064.aspx)。</span><span class="sxs-lookup"><span data-stu-id="b999d-139">For more information, see [DBCC CHECKDB (Transact-SQL)](https://msdn.microsoft.com/library/ms176064.aspx).</span></span>
-   <span data-ttu-id="b999d-140">**为缓冲池启用 >8 TB：** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]SP2 为缓冲池使用启用了 128 TB 的虚拟地址空间。</span><span class="sxs-lookup"><span data-stu-id="b999d-140">**Enable >8 TB for Buffer Pool:** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 enables 128 TB of virtual address space for buffer pool usage.</span></span> <span data-ttu-id="b999d-141">此改进使 SQL Server 缓冲池可在新式硬件上扩展到 8 TB 以上。</span><span class="sxs-lookup"><span data-stu-id="b999d-141">This improvement enables SQL Server Buffer Pool to scale beyond 8 TB on modern hardware.</span></span>
-   <span data-ttu-id="b999d-142">**SOS_RWLock 旋转锁改进：** SOS_RWLock 是在整个 SQL Server 基本代码的不同位置中使用的同步基元。</span><span class="sxs-lookup"><span data-stu-id="b999d-142">**SOS_RWLock spinlock Improvement:** The SOS_RWLock is a synchronization primitive used in various places throughout the SQL Server code base.</span></span>  <span data-ttu-id="b999d-143">顾名思义，代码可以有多个共享 (读取器) 或单个 (编写器) 所有权。</span><span class="sxs-lookup"><span data-stu-id="b999d-143">As the name implies, the code can have multiple shared (readers) or single (writer) ownership.</span></span> <span data-ttu-id="b999d-144">此改进不再需要对 SOS_RWLock 的旋转锁，而是使用类似于内存中 OLTP 的无锁技术。</span><span class="sxs-lookup"><span data-stu-id="b999d-144">This improvement removes the need for spinlock for SOS_RWLock and instead uses lock-free techniques similar to in-memory OLTP.</span></span> <span data-ttu-id="b999d-145">进行此更改后，许多线程可以并行读取受 SOS_RWLock 保护的数据结构，而无需彼此阻止。</span><span class="sxs-lookup"><span data-stu-id="b999d-145">With this change, many threads can read a data structure protected by SOS_RWLock in parallel, without blocking each other.</span></span> <span data-ttu-id="b999d-146">这种并行化提高了可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="b999d-146">This parallelization provides increased scalability.</span></span> <span data-ttu-id="b999d-147">在此更改之前，旋转锁实现一次只允许一个线程获取 SOS_RWLock，甚至读取数据结构。</span><span class="sxs-lookup"><span data-stu-id="b999d-147">Prior to this change, the spinlock implementation allowed only one thread to acquire the SOS_RWLock at a time, even to read a data structure.</span></span> <span data-ttu-id="b999d-148">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/psssql/2016/04/07/sql-2016-it-just-runs-faster-sos_rwlock-redesign/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-148">[For more information, see the blog](https://blogs.msdn.microsoft.com/psssql/2016/04/07/sql-2016-it-just-runs-faster-sos_rwlock-redesign/).</span></span>
-    <span data-ttu-id="b999d-149">**空间本机实现：** 通过本机实现，在 SP2 中引入了大量的空间查询性能改进 [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="b999d-149">**Spatial Native Implementation:** Significant improvement in spatial query performance is introduced in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 through native implementation.</span></span> <span data-ttu-id="b999d-150">有关详细信息，请参阅[知识库文章 KB3107399](https://support.microsoft.com/kb/3107399)。</span><span class="sxs-lookup"><span data-stu-id="b999d-150">For more information, see the [knowledge base article KB3107399](https://support.microsoft.com/kb/3107399).</span></span>

### <a name="supportability-and-diagnostics-improvements"></a><span data-ttu-id="b999d-151">可支持性和诊断改进</span><span class="sxs-lookup"><span data-stu-id="b999d-151">Supportability and Diagnostics Improvements</span></span>
-   <span data-ttu-id="b999d-152">**数据库克隆：** Clone 数据库是一种新的 DBCC 命令，可通过克隆不包含数据的架构和元数据来增强现有生产数据库的故障。</span><span class="sxs-lookup"><span data-stu-id="b999d-152">**Database Cloning:** Clone database is a new DBCC command that enhances troubleshooting existing production databases by cloning the schema and metadata without the data.</span></span> <span data-ttu-id="b999d-153">该克隆是通过命令创建的 `DBCC clonedatabase('source_database_name', 'clone_database_name')` 。</span><span class="sxs-lookup"><span data-stu-id="b999d-153">The clone is created with the command `DBCC clonedatabase('source_database_name', 'clone_database_name')`.</span></span>  <span data-ttu-id="b999d-154">**注意：** 不应在生产环境中使用克隆的数据库。</span><span class="sxs-lookup"><span data-stu-id="b999d-154">**Note:** Cloned databases should not be used in production environments.</span></span> <span data-ttu-id="b999d-155">使用以下命令确定是否已从克隆的数据库生成数据库： `select DATABASEPROPERTYEX('clonedb', 'isClone')` 。</span><span class="sxs-lookup"><span data-stu-id="b999d-155">Use the following command determine if a database has been generated from a cloned database: `select DATABASEPROPERTYEX('clonedb', 'isClone')`.</span></span> <span data-ttu-id="b999d-156">返回值**1**表示数据库是从 clonedatabase 创建的，而**0**表示该数据库不是克隆。</span><span class="sxs-lookup"><span data-stu-id="b999d-156">The return value of **1** indicates the database is created from clonedatabase while **0** indicates it is not a clone.</span></span>
-   <span data-ttu-id="b999d-157">**Tempdb 可支持性：** 一个新的错误日志消息，指示在启动时启动 tempdb 文件的数目，以及 tempdb 数据文件的大小和自动增长。</span><span class="sxs-lookup"><span data-stu-id="b999d-157">**Tempdb supportability:**  A new error log message that indicates at start-up both the number of tempdb files, and the size and autogrowth of tempdb data files.</span></span>
-   <span data-ttu-id="b999d-158">**数据库即时文件初始化日志记录：** 一个新的错误日志消息，指示服务器启动时数据库即时文件初始化状态 (启用/禁用 ") 。</span><span class="sxs-lookup"><span data-stu-id="b999d-158">**Database Instant File Initialization Logging:** A new error log message that indicates on server startup, the status of Database Instant File Initialization (enabled/disabled).</span></span>
-   <span data-ttu-id="b999d-159">**调用堆栈中的模块名称：** 扩展事件 (XEvent) 调用堆栈现在包含模块名称加上偏移量，而不是绝对地址。</span><span class="sxs-lookup"><span data-stu-id="b999d-159">**Module names in callstack:** The extended event (XEvent) callstack now includes modules names plus offset, instead of absolute addresses.</span></span>
-   <span data-ttu-id="b999d-160">**递增统计信息的新 DMF：** 此改进解决了[ (797156) 的连接反馈](https://connect.microsoft.com/SQLServer/feedback/details/797156/display-sys-dm-db-stats-properties-per-partition-for-incremental-statistics)，以便能够在分区级别跟踪增量统计信息。</span><span class="sxs-lookup"><span data-stu-id="b999d-160">**New DMF for incremental statistics:** This improvement addresses [connect feedback (797156)](https://connect.microsoft.com/SQLServer/feedback/details/797156/display-sys-dm-db-stats-properties-per-partition-for-incremental-statistics) to enable tracking the incremental statistics at the partition level.</span></span> <span data-ttu-id="b999d-161">引入了新的 DMF sys.databases dm_db_incremental_stats_properties 来公开每个分区的信息以获取增量统计信息。</span><span class="sxs-lookup"><span data-stu-id="b999d-161">A new DMF sys.dm_db_incremental_stats_properties is introduced to expose information per-partition for incremental stats.</span></span>
-   <span data-ttu-id="b999d-162">**索引使用情况 DMV 行为已更新：** 这项改进解决了来自客户的[ (739566) 的连接反馈](https://connect.microsoft.com/SQLServer/feedback/details/739566/rebuilding-an-index-clears-stats-from-sys-dm-db-index-usage-stats)，在这种情况下，重新生成索引将*不*会清除该索引的 dm_db_index_usage_stats sys.databases 中的任何现有行条目。</span><span class="sxs-lookup"><span data-stu-id="b999d-162">**Index Usage DMV behavior updated:** This improvement addresses [connect feedback (739566)](https://connect.microsoft.com/SQLServer/feedback/details/739566/rebuilding-an-index-clears-stats-from-sys-dm-db-index-usage-stats) from customers where rebuilding an index will *not* clear any existing row entry from sys.dm_db_index_usage_stats for that index.</span></span> <span data-ttu-id="b999d-163">此行为现在与 SQL 2008 和 SQL Server 2016 相同。</span><span class="sxs-lookup"><span data-stu-id="b999d-163">The behavior will now be the same as in SQL 2008 and SQL Server 2016.</span></span> <span data-ttu-id="b999d-164">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/sql_server_team/index-usage-dmv-behavior-updated/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-164">[For more information, see the blog](https://blogs.msdn.microsoft.com/sql_server_team/index-usage-dmv-behavior-updated/).</span></span>
-   <span data-ttu-id="b999d-165">**改善了诊断 XE 和 dmv 之间的相关性：** 此改进解决了[ (1934583) 的连接反馈](https://connect.microsoft.com/SQLServer/feedback/details/1934583/extended-events-query-hash-and-query-plan-hash-data-types)。</span><span class="sxs-lookup"><span data-stu-id="b999d-165">**Improved correlation between diagnostics XE and DMVs:** This improvement addresses [connect feedback (1934583)](https://connect.microsoft.com/SQLServer/feedback/details/1934583/extended-events-query-hash-and-query-plan-hash-data-types).</span></span> <span data-ttu-id="b999d-166">`Query_hash`和 `query_plan_hash` 用于唯一标识查询。</span><span class="sxs-lookup"><span data-stu-id="b999d-166">`Query_hash` and `query_plan_hash` are used for identifying a query uniquely.</span></span> <span data-ttu-id="b999d-167">DMV 将二者定义为 varbinary(8)，而 XEvent 将其定义为 UINT64。</span><span class="sxs-lookup"><span data-stu-id="b999d-167">DMV defines them as varbinary(8), while XEvent defines them as UINT64.</span></span> <span data-ttu-id="b999d-168">由于 SQL server 不具有 "无符号 bigint"，因此强制转换并不总是有效。</span><span class="sxs-lookup"><span data-stu-id="b999d-168">Because SQL server does not have "unsigned bigint", casting does not always work.</span></span> <span data-ttu-id="b999d-169">此改进引入了新的 XEvent 操作和筛选列。</span><span class="sxs-lookup"><span data-stu-id="b999d-169">This improvement introduces new XEvent action and filter columns.</span></span> <span data-ttu-id="b999d-170">列等效于 `query_hash` 和 `query_plan_hash` ，只不过它们定义为 INT64。</span><span class="sxs-lookup"><span data-stu-id="b999d-170">The columns are equivalent to `query_hash` and `query_plan_hash`, except they are defined as INT64.</span></span> <span data-ttu-id="b999d-171">INT64 定义有助于关联 XE 和 Dmv 之间的查询。</span><span class="sxs-lookup"><span data-stu-id="b999d-171">The INT64 definition helps to correlate queries between XE and DMVs.</span></span>
-   <span data-ttu-id="b999d-172">**支持 BULK INSERT 和 BCP 中的 utf-8：** 此改进解决了[ (370419) 的连接反馈](https://connect.microsoft.com/SQLServer/feedback/details/370419/bulk-insert-and-bcp-does-not-recognize-codepage-65001)。</span><span class="sxs-lookup"><span data-stu-id="b999d-172">**Support for UTF-8 in BULK INSERT and BCP:** This improvement addresses [connect feedback (370419)](https://connect.microsoft.com/SQLServer/feedback/details/370419/bulk-insert-and-bcp-does-not-recognize-codepage-65001).</span></span> <span data-ttu-id="b999d-173">BULK INSERT 和 BCP 现在可以导出或导入以 UTF-8 字符集编码的数据。</span><span class="sxs-lookup"><span data-stu-id="b999d-173">BULK INSERT and BCP can now export or import data that is encoded in the UTF-8 character set.</span></span>
-   <span data-ttu-id="b999d-174">**每个运算符的查询执行的轻型分析：** 显示计划提供有关计划中每个运算符的成本的信息。</span><span class="sxs-lookup"><span data-stu-id="b999d-174">**Lightweight profiling of query execution per-operator:** Showplan provides information on the cost of each operator in the plan.</span></span> <span data-ttu-id="b999d-175">但实际的运行时统计信息对于 CPU、i/o 读取和每个线程的运行时间等因素而言是有限的。</span><span class="sxs-lookup"><span data-stu-id="b999d-175">But actual run-time statistics are limited for things such as CPU, I/O Reads, and elapsed time per-thread.</span></span> <span data-ttu-id="b999d-176">SQL Server 2014 SP2 介绍了显示计划中每个运算符的这些附加运行时统计信息。</span><span class="sxs-lookup"><span data-stu-id="b999d-176">SQL Server 2014 SP2 introduces these additional runtime statistics per operator in the Showplan.</span></span> <span data-ttu-id="b999d-177">R2 还引入了一个名 `query_thread_profile` 为的 XEvent，以帮助对查询性能进行故障排除。</span><span class="sxs-lookup"><span data-stu-id="b999d-177">R2 also introduces an XEvent named `query_thread_profile` to assist the troubleshooting of query performance.</span></span> <span data-ttu-id="b999d-178">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/sql_server_team/added-per-operator-level-performance-stats-for-query-processing/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-178">[For more information, see the blog](https://blogs.msdn.microsoft.com/sql_server_team/added-per-operator-level-performance-stats-for-query-processing/).</span></span>
-   <span data-ttu-id="b999d-179">**更改跟踪清理：** 引入了一个新的存储过程 `sp_flush_CT_internal_table_on_demand` ，用于根据需要清理更改跟踪内部表。</span><span class="sxs-lookup"><span data-stu-id="b999d-179">**Change Tracking Cleanup:** A new stored procedure `sp_flush_CT_internal_table_on_demand` is introduced to clean the change tracking internal tables on demand.</span></span>
-   <span data-ttu-id="b999d-180">**AlwaysON 租约超时日志记录**添加了新的租约超时消息的日志记录功能，以便记录当前时间和预期的续订时间。</span><span class="sxs-lookup"><span data-stu-id="b999d-180">**AlwaysON Lease Timeout Logging** Added new logging capability for Lease Timeout messages so that the current time and the expected renewal times are logged.</span></span> <span data-ttu-id="b999d-181">此外，在 SQL 错误日志中引入了与超时有关的新消息。</span><span class="sxs-lookup"><span data-stu-id="b999d-181">Also a new message was introduced in the SQL Error log regarding the timeouts.</span></span> <span data-ttu-id="b999d-182">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/alwaysonpro/2016/02/23/improved-alwayson-availability-group-lease-timeout-diagnostics/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-182">[For more information, see the blog](https://blogs.msdn.microsoft.com/alwaysonpro/2016/02/23/improved-alwayson-availability-group-lease-timeout-diagnostics/).</span></span>
-   <span data-ttu-id="b999d-183">**用于在 SQL Server 中检索输入缓冲区的新 DMF：** 用于检索会话/请求的输入缓冲区的新 DMF (dm_exec_input_buffer) 现已可用。</span><span class="sxs-lookup"><span data-stu-id="b999d-183">**New DMF for retrieving input buffer in SQL Server:** A new DMF for retrieving the input buffer for a session/request (sys.dm_exec_input_buffer) is now available.</span></span> <span data-ttu-id="b999d-184">此 DMF 在功能上等效于 DBCC INPUTBUFFER。</span><span class="sxs-lookup"><span data-stu-id="b999d-184">This DMF is functionally equivalent to DBCC INPUTBUFFER.</span></span> <span data-ttu-id="b999d-185">[有关详细信息，请参阅博客](https://blogs.msdn.microsoft.com/sql_server_team/new-dmf-for-retrieving-input-buffer-in-sql-server/)。</span><span class="sxs-lookup"><span data-stu-id="b999d-185">[For more information, see the blog](https://blogs.msdn.microsoft.com/sql_server_team/new-dmf-for-retrieving-input-buffer-in-sql-server/).</span></span>
-   <span data-ttu-id="b999d-186">**对低估和 overestimated 内存授予的缓解措施：** 通过 MIN_GRANT_PERCENT 和 MAX_GRANT_PERCENT 为 Resource Governor 添加了新的查询提示。</span><span class="sxs-lookup"><span data-stu-id="b999d-186">**Mitigation for underestimated and overestimated memory grant:** Added a new query hints for Resource Governor through MIN_GRANT_PERCENT and MAX_GRANT_PERCENT.</span></span> <span data-ttu-id="b999d-187">这一新查询允许您在运行查询时通过限制其内存授予来利用这些提示，以防止内存争夺。</span><span class="sxs-lookup"><span data-stu-id="b999d-187">This new query allows you to leverage these hints while running queries, by capping their memory grants to prevent memory contention.</span></span> <span data-ttu-id="b999d-188">有关详细信息，请参阅[知识库文章 KB310740](https://support.microsoft.com/kb/3107401)。</span><span class="sxs-lookup"><span data-stu-id="b999d-188">For more information, see [knowledge base article KB310740](https://support.microsoft.com/kb/3107401).</span></span>
-   <span data-ttu-id="b999d-189">**更好的内存授予和使用情况诊断：** 已将名为的新扩展事件 `query_memory_grant_usage` 添加到 SQL Server 中的跟踪功能的列表中。</span><span class="sxs-lookup"><span data-stu-id="b999d-189">**Better memory grant and usage diagnostics:** A new extended event named `query_memory_grant_usage` was added to the list of tracing capabilities in SQL Server.</span></span> <span data-ttu-id="b999d-190">此事件跟踪请求和授予的内存授予。</span><span class="sxs-lookup"><span data-stu-id="b999d-190">This event tracks memory grants requested and granted.</span></span> <span data-ttu-id="b999d-191">此事件提供更好的跟踪和分析功能，用于排查与内存授予相关的任何查询执行问题。</span><span class="sxs-lookup"><span data-stu-id="b999d-191">This event provides better tracing and analysis capabilities for troubleshooting any query execution issues related to memory grants.</span></span> <span data-ttu-id="b999d-192">有关详细信息，请参阅[知识库文章 KB3107173](https://support.microsoft.com/kb/3107173)。</span><span class="sxs-lookup"><span data-stu-id="b999d-192">For more information, see [knowledge base article KB3107173](https://support.microsoft.com/kb/3107173).</span></span>
-   <span data-ttu-id="b999d-193">**Tempdb 溢出的查询执行诊断：**-哈希警告和排序警告现在具有用于跟踪物理 i/o 统计信息、使用的内存和受影响的行的其他列。</span><span class="sxs-lookup"><span data-stu-id="b999d-193">**Query execution diagnostics for tempdb spill:**- Hash Warning and Sort Warnings now have additional columns to track physical I/O statistics, memory used, and rows affected.</span></span> <span data-ttu-id="b999d-194">我们还引入了一个新的 hash_spill_details 扩展事件。</span><span class="sxs-lookup"><span data-stu-id="b999d-194">We also introduced a new hash_spill_details extended event.</span></span> <span data-ttu-id="b999d-195">现在，你可以跟踪更详细的信息，以便 ([KB3107172](https://support.microsoft.com/kb/3107172)) 的哈希和排序警告。</span><span class="sxs-lookup"><span data-stu-id="b999d-195">Now you can track more granular information for your hash and sort warnings ([KB3107172](https://support.microsoft.com/kb/3107172)).</span></span> <span data-ttu-id="b999d-196">此项改进现在还通过 XML 查询计划以新属性的形式通过 SpillToTempDbType 复杂类型 ([KB3107400](https://support.microsoft.com/kb/3107400)) 的形式公开。</span><span class="sxs-lookup"><span data-stu-id="b999d-196">This improvement is also now exposed through the XML Query Plans in the form of a new attribute to the SpillToTempDbType complex type ([KB3107400](https://support.microsoft.com/kb/3107400)).</span></span> <span data-ttu-id="b999d-197">Set statistics `ON` 现在显示排序工作表统计信息。</span><span class="sxs-lookup"><span data-stu-id="b999d-197">Set statistics `ON` now shows sort worktable statistics.</span></span>
-   <span data-ttu-id="b999d-198">**改善了涉及驻留谓词下推的查询执行计划的诊断：** 此时将在查询执行计划中报告读取的实际行，以帮助提高查询性能故障排除。</span><span class="sxs-lookup"><span data-stu-id="b999d-198">**Improved diagnostics for query execution plans that involve residual predicate pushdown:** The actual rows read are now reported in the query execution plans, to help improve query performance troubleshooting.</span></span> <span data-ttu-id="b999d-199">这些行不必单独捕获 SET STATISTICS IO。</span><span class="sxs-lookup"><span data-stu-id="b999d-199">These rows negate the need to capture SET STATISTICS IO separately.</span></span> <span data-ttu-id="b999d-200">使用这些行，还可以在查询计划中查看与剩余谓词推送有关的信息。</span><span class="sxs-lookup"><span data-stu-id="b999d-200">These rows also allow you to see information related to a residual predicate push-down in a query plan.</span></span> <span data-ttu-id="b999d-201">有关详细信息，请参阅[知识库文章 KB3107397](https://support.microsoft.com/kb/3107397)。</span><span class="sxs-lookup"><span data-stu-id="b999d-201">For more information, see [knowledge base article KB3107397](https://support.microsoft.com/kb/3107397).</span></span>


## <a name="additional-information"></a><span data-ttu-id="b999d-202">其他信息</span><span class="sxs-lookup"><span data-stu-id="b999d-202">Additional Information</span></span>  
 [<span data-ttu-id="b999d-203">SQL Server 2014 资源</span><span class="sxs-lookup"><span data-stu-id="b999d-203">SQL Server 2014 Resources</span></span>](../index.yml)  
  
 [<span data-ttu-id="b999d-204">SQL Server 2014 Release Notes</span><span class="sxs-lookup"><span data-stu-id="b999d-204">SQL Server 2014 Release Notes</span></span>](https://go.microsoft.com/fwlink/p/?linkID=296445)  
  
 [<span data-ttu-id="b999d-205">SQL Server 2014 资源中心</span><span class="sxs-lookup"><span data-stu-id="b999d-205">SQL Server 2014 Resource Center</span></span>](https://msdn.microsoft.com/sqlserver/dn135309)  
  
 [<span data-ttu-id="b999d-206">SQLCat 网站</span><span class="sxs-lookup"><span data-stu-id="b999d-206">SQLCat Web Site</span></span>](https://go.microsoft.com/fwlink/p/?linkID=220963)  
