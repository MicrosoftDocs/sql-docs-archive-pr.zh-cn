---
title: 在升级过程中，验证是否为所有数据文件和日志文件启用了自动增长 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- log files [SQL Server], size
- data files [SQL Server], size
- tempdb [SQL Server], size
- autogrow [SQL Server]
ms.assetid: a5860904-e2be-4224-8a51-df18a10d3fb9
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 8ca12075598bce210a905cbdfba89f2d879cf09b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87694211"
---
# <a name="verify-autogrow-is-turned-on-for-all-data-and-log-files-during-the-upgrade-process"></a><span data-ttu-id="2bcd8-102">升级期间，确保为所有数据文件和日志文件启用了自动增长功能</span><span class="sxs-lookup"><span data-stu-id="2bcd8-102">Verify autogrow is turned on for all data and log files during the upgrade process</span></span>
  <span data-ttu-id="2bcd8-103">升级顾问检测到未设置为自动增长的数据或日志文件。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-103">Upgrade Advisor detected data or log files that are not set to autogrow.</span></span> <span data-ttu-id="2bcd8-104">新增功能和增强功能需要额外的磁盘空间来用于用户数据库和**tempdb**系统数据库。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-104">New and enhanced features require additional disk space for user databases and the **tempdb** system database.</span></span> <span data-ttu-id="2bcd8-105">为了确保在升级和后续生产操作期间资源可以容纳更大的大小，建议在升级前将所有用户数据和日志文件以及**tempdb**数据和日志文件的自动增长设置为 ON。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-105">To ensure resources can accommodate size increases during upgrade and subsequent production operations, we recommend setting autogrow to ON for all user data and log files and the **tempdb** data and log files before upgrading.</span></span>  
  
 <span data-ttu-id="2bcd8-106">升级并测试工作负载后，可能需要关闭用户数据和日志文件的自动增长，或者相应地对 FILEGROWTH 增量进行调整。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-106">After you have upgraded and tested your workloads, you may want to turn autogrow off or adjust the FILEGROWTH increment accordingly for user data and log files.</span></span> <span data-ttu-id="2bcd8-107">建议对**tempdb**系统数据库保持启用自动增长。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-107">We recommend that autogrow remain on for the **tempdb** system database.</span></span> <span data-ttu-id="2bcd8-108">有关详细信息，请参阅 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 联机丛书中的“tempdb 容量规划”。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-108">For more information, see "Capacity Planning for tempdb" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="component"></a><span data-ttu-id="2bcd8-109">组件</span><span class="sxs-lookup"><span data-stu-id="2bcd8-109">Component</span></span>  
 [!INCLUDE[ssDE](../../includes/ssde-md.md)]  
  
## <a name="description"></a><span data-ttu-id="2bcd8-110">说明</span><span class="sxs-lookup"><span data-stu-id="2bcd8-110">Description</span></span>  
 <span data-ttu-id="2bcd8-111">**数据文件**</span><span class="sxs-lookup"><span data-stu-id="2bcd8-111">**Data files**</span></span>  
  
 <span data-ttu-id="2bcd8-112">下表列出对 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 功能的更改，这些更改导致用户定义数据文件需要更多的磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-112">The following table lists changes to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] features that result in additional disk space requirements for user-defined data files.</span></span>  
  
|<span data-ttu-id="2bcd8-113">功能</span><span class="sxs-lookup"><span data-stu-id="2bcd8-113">Feature</span></span>|<span data-ttu-id="2bcd8-114">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中引入的更改</span><span class="sxs-lookup"><span data-stu-id="2bcd8-114">Changes Introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|-------------|-----------------------------------------------------|  
|<span data-ttu-id="2bcd8-115">全文</span><span class="sxs-lookup"><span data-stu-id="2bcd8-115">Full-text</span></span>|<span data-ttu-id="2bcd8-116">文档 ID (DOCID) 映射存储在数据文件中，而不是全文目录中。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-116">The document ID (DOCID) map is stored in the data file instead of in the full-text catalog.</span></span>|  
|<span data-ttu-id="2bcd8-117">`text`、`ntext` 和 `image` 列</span><span class="sxs-lookup"><span data-stu-id="2bcd8-117">`text`, `ntext`, and `image` columns</span></span>|<span data-ttu-id="2bcd8-118">定义为 `text`、`ntext` 或 `image` 数据类型的大型对象 (LOB) 列要求为每列额外增加 40 字节的磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-118">Large object (LOB) columns defined as `text`, `ntext`, or `image` data types require an additional 40 bytes of disk space per column.</span></span> <span data-ttu-id="2bcd8-119">在每个 LOB 列的第一次更新过程中会出现这种一次性空间增长。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-119">This one-time space increase occurs during the first update of each LOB column.</span></span>|  
|<span data-ttu-id="2bcd8-120">metadata</span><span class="sxs-lookup"><span data-stu-id="2bcd8-120">metadata</span></span>|<span data-ttu-id="2bcd8-121">在每个用户数据库的 PRIMARY 文件组中，将针对数据库对象和用户权限创建和维护附加的系统元数据。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-121">Additional system metadata is created and maintained in the PRIMARY filegroup of each user database for database objects and user permissions.</span></span> <span data-ttu-id="2bcd8-122">例如，在早期版本的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中，与授权者或被授权者相关联的权限作为位图存储在单独一行中。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-122">For example, in earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the permissions associated with a grantor or grantee is stored in a single row as a bitmap.</span></span> <span data-ttu-id="2bcd8-123">位图已扩展为多行。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-123">The bitmap is expanded into multiple rows.</span></span><br /><br /> <span data-ttu-id="2bcd8-124">在升级过程中，必须有足够的磁盘空间来存储旧元数据和新元数据。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-124">During the upgrade process, there must be enough disk space to store both the old and new metadata.</span></span> <span data-ttu-id="2bcd8-125">在升级完成后，删除旧的元数据。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-125">The old metadata is deleted after the upgrade is complete.</span></span>|  
  
 <span data-ttu-id="2bcd8-126">**事务日志文件**</span><span class="sxs-lookup"><span data-stu-id="2bcd8-126">**Transaction log files**</span></span>  
  
 <span data-ttu-id="2bcd8-127">下表列出对 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 功能的更改，这些更改导致用户定义的事务日志文件需要更多的磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-127">The following table lists changes to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] features that result in additional disk space requirements for user-defined transaction log files.</span></span>  
  
|<span data-ttu-id="2bcd8-128">功能</span><span class="sxs-lookup"><span data-stu-id="2bcd8-128">Feature</span></span>|<span data-ttu-id="2bcd8-129">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中引入的更改</span><span class="sxs-lookup"><span data-stu-id="2bcd8-129">Changes Introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|-------------|-----------------------------------------------------|  
|<span data-ttu-id="2bcd8-130">还原和恢复</span><span class="sxs-lookup"><span data-stu-id="2bcd8-130">Restore and recovery</span></span>|<span data-ttu-id="2bcd8-131">在崩溃恢复的撤消阶段，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 允许用户访问数据库。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-131">During the undo phase of a crash recovery, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] allows users to access the database.</span></span> <span data-ttu-id="2bcd8-132">这是因为崩溃发生时未提交的事务将重新获取它们在崩溃前持有的所有锁。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-132">This is possible because the transactions that were uncommitted when the crash occurred reacquire any locks they held before the crash.</span></span> <span data-ttu-id="2bcd8-133">在回滚事务时，它们的锁会防止用户干扰。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-133">While transactions are being rolled back, their locks protect them from interference by users.</span></span> <span data-ttu-id="2bcd8-134">必须在事务日志中维护此附加锁定信息。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-134">This additional locking information must be maintained in the transaction log.</span></span>|  
  
 <span data-ttu-id="2bcd8-135">**tempdb 数据和日志文件**</span><span class="sxs-lookup"><span data-stu-id="2bcd8-135">**tempdb data and log files**</span></span>  
  
 <span data-ttu-id="2bcd8-136">在的早期版本中 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ， **tempdb**数据库用于存储下列对象：</span><span class="sxs-lookup"><span data-stu-id="2bcd8-136">In earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the **tempdb** database is used to store the following objects:</span></span>  
  
-   <span data-ttu-id="2bcd8-137">显式创建的临时对象，例如表、存储过程、表变量或游标。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-137">Temporary objects explicitly created such as tables, stored procedures, table variables, or cursors.</span></span>  
  
-   <span data-ttu-id="2bcd8-138">[!INCLUDE[ssDE](../../includes/ssde-md.md)]创建的内部工作表。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-138">Internal work tables created by the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
-   <span data-ttu-id="2bcd8-139">创建或重建索引时来自临时排序的结果（如果指定了 SORT_IN_TEMPDB）。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-139">Results from temporary sorts when you create or rebuild indexes, if SORT_IN_TEMPDB is specified.</span></span>  
  
 <span data-ttu-id="2bcd8-140">其他对象也使用**tempdb**数据库。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-140">Additional objects also use the **tempdb** database.</span></span> <span data-ttu-id="2bcd8-141">下表列出了对 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 导致**tempdb**数据和日志文件的额外磁盘空间需求的功能的更改或添加。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-141">The following table lists changes or additions to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] features that result in additional disk space requirements for **tempdb** data and log files.</span></span>  
  
|<span data-ttu-id="2bcd8-142">功能</span><span class="sxs-lookup"><span data-stu-id="2bcd8-142">Feature</span></span>|<span data-ttu-id="2bcd8-143">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中引入的更改</span><span class="sxs-lookup"><span data-stu-id="2bcd8-143">Changes Introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|-------------|-----------------------------------------------------|  
|<span data-ttu-id="2bcd8-144">行版本控制</span><span class="sxs-lookup"><span data-stu-id="2bcd8-144">Row versioning</span></span>|<span data-ttu-id="2bcd8-145">行版本控制是 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中的常规框架，可以用于：</span><span class="sxs-lookup"><span data-stu-id="2bcd8-145">Row versioning is a general framework in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that is used to:</span></span><br /><br /> <span data-ttu-id="2bcd8-146">支持触发器：生成触发器中插入的和删除的表。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-146">Support triggers: Build the inserted and deleted tables in triggers.</span></span> <span data-ttu-id="2bcd8-147">对任何由触发器修改的行都将生成副本。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-147">Any rows modified by the trigger are versioned.</span></span> <span data-ttu-id="2bcd8-148">这包括由启动触发器的语句修改的行，以及由触发器进行的任何数据修改。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-148">This includes the rows modified by the statement that launched the trigger, as well as any data modifications made by the trigger.</span></span> <span data-ttu-id="2bcd8-149">AFTER 触发器使用**tempdb**的版本存储区来保存触发器更改的行的前像。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-149">AFTER triggers use the version store of **tempdb** to hold the before images of the rows changed by the trigger.</span></span> <span data-ttu-id="2bcd8-150">当您在启用触发器的情况下大容量加载数据时，将在版本存储区中为每一行添加一个副本。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-150">When you bulkload data with triggers enabled, a copy of each row is added to the version store.</span></span><br /><br /> <span data-ttu-id="2bcd8-151">支持多个活动的结果集 (MARS)。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-151">Support Multiple Active Result Sets (MARS).</span></span> <span data-ttu-id="2bcd8-152">如果 MARS 会话发出一条数据修改语句（例如 INSERT、UPDATE 或 DELETE）时存在活动的结果集，则对受修改语句影响的行都将生成副本。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-152">If a MARS session issues a data modification statement (such as INSERT, UPDATE, or DELETE) at a time there is an active result set, the rows affected by the modification statement are versioned.</span></span><br /><br /> <span data-ttu-id="2bcd8-153">支持指定 ONLINE 选项的索引操作。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-153">Support index operations that specify the ONLINE option.</span></span> <span data-ttu-id="2bcd8-154">联机索引操作使用行版本控制来使索引操作不受其他事务所做的修改的影响。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-154">Online index operations use row versioning to isolate the index operation from the effects of modifications made by other transactions.</span></span> <span data-ttu-id="2bcd8-155">这就不需要对已经读取的行请求共享锁。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-155">This avoids the need for requesting share locks on rows that have been read.</span></span> <span data-ttu-id="2bcd8-156">此外，在联机索引操作期间，并发用户更新和删除操作需要对**tempdb**中的版本记录进行空间。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-156">In addition, concurrent user update and delete operations during online index operations require space for version records in **tempdb**.</span></span><br /><br /> <span data-ttu-id="2bcd8-157">支持基于行版本控制的事务隔离级别：新的已提交读隔离级别的实现，该实现使用行版本控制来提供语句级读取一致性。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-157">Support row versioning-based transaction isolation levels: A new implementation of read committed isolation level that uses row versioning to provide statement-level read consistency.</span></span> <span data-ttu-id="2bcd8-158">新快照隔离级别，提供事务级的读取一致性。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-158">A new isolation level, snapshot, to provide transaction-level read consistency.</span></span><br /><br /> <br /><br /> <span data-ttu-id="2bcd8-159">行版本保存在**tempdb**版本存储区中的时间足以满足在基于行版本控制的隔离级别下运行的事务的要求。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-159">Row versions are held in the **tempdb** version store long enough to satisfy the requirements of transactions running under row versioning-based isolation levels.</span></span><br /><br /> <span data-ttu-id="2bcd8-160">有关行版本控制和版本存储区的详细信息，请参阅 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 联机丛书中的“了解基于行版本控制的隔离级别”主题。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-160">For more information about row versioning and the version store, see the topic "Understanding Row Versioning-based Isolation Levels" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>|  
|<span data-ttu-id="2bcd8-161">缓存临时表和临时变量元数据</span><span class="sxs-lookup"><span data-stu-id="2bcd8-161">Caching of temp table and temp variable metadata</span></span>|<span data-ttu-id="2bcd8-162">对于缓存在元数据缓存中的临时表和临时变量的每个元数据 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，将为**tempdb**分配两个额外的页。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-162">For every metadata of temp table and temp variable cached in the metadata cache by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], two extra pages are allocated for **tempdb**.</span></span><br /><br /> <span data-ttu-id="2bcd8-163">如果存储过程或触发器创建临时表或临时变量，则在存储过程或触发器完成执行时不会删除临时对象，</span><span class="sxs-lookup"><span data-stu-id="2bcd8-163">If a stored procedure or trigger creates a temp table or temp variable, the temporary object is not deleted when the procedure or trigger completes execution.</span></span> <span data-ttu-id="2bcd8-164">而是将临时对象截断至一页，并在下次执行过程或触发器时重新使用。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-164">Instead, the temporary object is truncated to one page and reused the next time the procedure or trigger is executed.</span></span>|  
|<span data-ttu-id="2bcd8-165">对已分区表的索引</span><span class="sxs-lookup"><span data-stu-id="2bcd8-165">Indexes on partitioned tables</span></span>|<span data-ttu-id="2bcd8-166">当 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 执行排序以生成已分区索引时，如果指定了 SORT_IN_TEMPDB 索引选项，则**tempdb**中需要足够的空间来保存每个分区的中间排序运行。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-166">When the [!INCLUDE[ssDE](../../includes/ssde-md.md)] performs sorting to build partitioned indexes, enough space to hold the intermediate sort runs of each partition is required in **tempdb** if the SORT_IN_TEMPDB index option is specified.</span></span>|  
|[!INCLUDE[ssSB](../../includes/sssb-md.md)]|[!INCLUDE[ssSB](../../includes/sssb-md.md)]<span data-ttu-id="2bcd8-167">在保留无法保留在内存中的现有对话框上下文时显式使用**tempdb** (每个对话框) 大约为 1 KB。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-167">explicitly uses **tempdb** when preserving existing dialog context that cannot stay in memory (approximately 1 KB per dialog).</span></span><br /><br /> [!INCLUDE[ssSB](../../includes/sssb-md.md)]<span data-ttu-id="2bcd8-168">在查询执行的上下文中通过缓存对象隐式地使用**tempdb** 。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-168">implicitly uses **tempdb** through the caching of objects in the context of query execution.</span></span> <span data-ttu-id="2bcd8-169">例如，会为计时器事件和后台传递的会话使用工作表。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-169">For example, work tables used for timer events and background delivered conversations.</span></span><br /><br /> <span data-ttu-id="2bcd8-170">数据库邮件、事件通知和查询通知功能会隐式地使用 [!INCLUDE[ssSB](../../includes/sssb-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-170">The features DBMail, event notifications, and query notifications implicitly use [!INCLUDE[ssSB](../../includes/sssb-md.md)].</span></span>|  
|<span data-ttu-id="2bcd8-171">大对象 (LOB) 数据类型</span><span class="sxs-lookup"><span data-stu-id="2bcd8-171">Large object (LOB) data type</span></span><br /><br /> <span data-ttu-id="2bcd8-172">LOB 变量和参数</span><span class="sxs-lookup"><span data-stu-id="2bcd8-172">LOB variables and parameters</span></span>|<span data-ttu-id="2bcd8-173">数据类型 `varchar(max)` 、 `nvarchar(max)` 、 **varbinary (max) 文本**、 `ntext` `image,` 和 `xml` 是大型对象类型。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-173">The data types `varchar(max)`, `nvarchar(max)`, **varbinary(max)text**, `ntext`, `image,` and `xml` are large object types.</span></span><br /><br /> <span data-ttu-id="2bcd8-174">如果对数据库启用了基于行版本控制的事务隔离级别并且对大型对象进行了修改，则 LOB 的已更改片段将被复制到**tempdb**中的版本存储区。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-174">When a row versioning-based transaction isolation level is enabled on the database and modifications of large objects are made, the changed fragment of the LOB is copied to the version store in **tempdb**.</span></span><br /><br /> <span data-ttu-id="2bcd8-175">定义为大型对象数据类型的参数存储在**tempdb**中。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-175">Parameters defined as a large object data type are stored in **tempdb**.</span></span>|  
|<span data-ttu-id="2bcd8-176"> (Cte 的公用表表达式) </span><span class="sxs-lookup"><span data-stu-id="2bcd8-176">Common table expressions (CTEs)</span></span>|<span data-ttu-id="2bcd8-177">执行公用表表达式查询时，会在**tempdb**中创建用于假脱机操作的临时工作表。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-177">Temporary work tables for spool operations are created in **tempdb** when common table expression queries are executed.</span></span>|  
  
## <a name="corrective-action"></a><span data-ttu-id="2bcd8-178">纠正措施</span><span class="sxs-lookup"><span data-stu-id="2bcd8-178">Corrective Action</span></span>  
 <span data-ttu-id="2bcd8-179">若要将数据或日志文件设置为自动增长，请修改下列语句以指定数据库的数据和日志。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-179">To set a data or log file to autogrow, modify the following statements to specify the data and log for your database.</span></span> <span data-ttu-id="2bcd8-180">应当将 FILEGROWTH 增量调整为适合您的环境的值。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-180">You should adjust the FILEGROWTH increment to a value that is appropriate for your environment.</span></span>  
  
```  
ALTER DATABASE tempdb  
MODIFY FILE  
    (NAME = tempdev,  
    FILEGROWTH = 20MB);  
GO  
ALTER DATABASE tempdb  
MODIFY FILE  
    (NAME = templog,  
    FILEGROWTH = 10MB);  
```  
  
 <span data-ttu-id="2bcd8-181">数据文件的默认增量为 1 MB。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-181">The default growth increment for data files is 1 MB.</span></span> <span data-ttu-id="2bcd8-182">日志文件默认为 10%。</span><span class="sxs-lookup"><span data-stu-id="2bcd8-182">The log file default is10%.</span></span> <span data-ttu-id="2bcd8-183">建议在设置 FILEGROWTH 增量时遵循以下通用原则：</span><span class="sxs-lookup"><span data-stu-id="2bcd8-183">We recommend the following general guidelines when setting the FILEGROWTH increment:</span></span>  
  
|<span data-ttu-id="2bcd8-184">文件大小</span><span class="sxs-lookup"><span data-stu-id="2bcd8-184">File size</span></span>|<span data-ttu-id="2bcd8-185">FILEGROWTH 增量</span><span class="sxs-lookup"><span data-stu-id="2bcd8-185">FILEGROWTH increment</span></span>|  
|---------------|--------------------------|  
|<span data-ttu-id="2bcd8-186">0-50MB</span><span class="sxs-lookup"><span data-stu-id="2bcd8-186">0-50MB</span></span>|<span data-ttu-id="2bcd8-187">10MB</span><span class="sxs-lookup"><span data-stu-id="2bcd8-187">10MB</span></span>|  
|<span data-ttu-id="2bcd8-188">100-200MB</span><span class="sxs-lookup"><span data-stu-id="2bcd8-188">100-200MB</span></span>|<span data-ttu-id="2bcd8-189">MB</span><span class="sxs-lookup"><span data-stu-id="2bcd8-189">20MB</span></span>|  
|<span data-ttu-id="2bcd8-190">500MB 或更多</span><span class="sxs-lookup"><span data-stu-id="2bcd8-190">500MB or more</span></span>|<span data-ttu-id="2bcd8-191">10%</span><span class="sxs-lookup"><span data-stu-id="2bcd8-191">10%</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="2bcd8-192">另请参阅</span><span class="sxs-lookup"><span data-stu-id="2bcd8-192">See Also</span></span>  
 <span data-ttu-id="2bcd8-193">[数据库引擎升级问题](../../../2014/sql-server/install/database-engine-upgrade-issues.md) </span><span class="sxs-lookup"><span data-stu-id="2bcd8-193">[Database Engine Upgrade Issues](../../../2014/sql-server/install/database-engine-upgrade-issues.md) </span></span>  
 [<span data-ttu-id="2bcd8-194">SQL Server 2014 升级顾问 &#91;新&#93;</span><span class="sxs-lookup"><span data-stu-id="2bcd8-194">SQL Server 2014 Upgrade Advisor &#91;new&#93;</span></span>](sql-server-2014-upgrade-advisor.md)  
  
  
