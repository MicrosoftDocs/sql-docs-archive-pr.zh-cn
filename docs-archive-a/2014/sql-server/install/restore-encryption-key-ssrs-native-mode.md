---
title: " (SSRS 本机模式) 还原加密密钥 |Microsoft Docs"
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
f1_keywords:
- SQL12.rsconfigtool.restoreencryptionkey.F1
ms.assetid: 11ce51e5-f5d4-40b6-88d8-9360fb50e66c
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 3047e81b3f79219064f81a3492afe6460e1e4966
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87577223"
---
# <a name="restore-encryption-key-ssrs-native-mode"></a><span data-ttu-id="a1f26-102">还原加密密钥（SSRS 本机模式）</span><span class="sxs-lookup"><span data-stu-id="a1f26-102">Restore Encryption Key (SSRS Native Mode)</span></span>
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="a1f26-103">使用加密密钥来保护存储在报表服务器数据库中的敏感数据。</span><span class="sxs-lookup"><span data-stu-id="a1f26-103">uses an encryption key to secure sensitive data that is stored in the report server database.</span></span> <span data-ttu-id="a1f26-104">为确保您可以继续访问加密数据，请务必创建加密密钥的备份，以备以后因服务帐户发生变化而需要还原它或需要将它作为计划迁移的一部分还原时使用。</span><span class="sxs-lookup"><span data-stu-id="a1f26-104">To ensure that you have continued access to encrypted data, it is important that you create a backup of the encryption key in case you need to restore it later due to changes in the service account or as part of a planned migration.</span></span> <span data-ttu-id="a1f26-105">本主题概括了如何使用 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 配置管理器来还原密钥。</span><span class="sxs-lookup"><span data-stu-id="a1f26-105">This topic is an overview of how to use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager to restore keys.</span></span>  
  
 [!INCLUDE[applies](../../includes/applies-md.md)]<span data-ttu-id="a1f26-106">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]本机模式。</span><span class="sxs-lookup"><span data-stu-id="a1f26-106">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native mode.</span></span>  
  
 <span data-ttu-id="a1f26-107">若要还原此密钥，事先必须将此密钥的备份副本保存到受密码保护的文件中。</span><span class="sxs-lookup"><span data-stu-id="a1f26-107">To restore the key, you must have previously saved a backup copy of the key to a password protected file.</span></span> <span data-ttu-id="a1f26-108">在密钥还原过程中，报表服务器将用在受密码保护的文件中找到的密钥替换现有密钥。</span><span class="sxs-lookup"><span data-stu-id="a1f26-108">During key restoration, the report server will replace an existing key with the key that is found in the password protected file.</span></span> <span data-ttu-id="a1f26-109">该文件中的密钥必须与用于加密和解密数据的密钥相同。</span><span class="sxs-lookup"><span data-stu-id="a1f26-109">The key that is inside the file must be identical to the key that is used to encrypt and decrypt data.</span></span>  
  
 <span data-ttu-id="a1f26-110">若要验证是否还原了有效的密钥，请使用报表管理器来查看订阅或具有使用存储凭据的数据源的任何报表。</span><span class="sxs-lookup"><span data-stu-id="a1f26-110">To verify whether you restored a valid key, use Report Manager to view subscriptions or any report that has a data source that uses stored credentials.</span></span> <span data-ttu-id="a1f26-111">如果在试图打开订阅定义页时出现“报表服务器无法访问加密数据”错误，或者在打开此前将存储凭据用于报表数据源的报表时，系统提示您输入凭据，则表明您还原的是无效密钥。</span><span class="sxs-lookup"><span data-stu-id="a1f26-111">If you receive "The report server is unable to access encrypted data" error when attempting to open a subscription definition page, or if you are prompted to enter credentials when opening a report that previously used stored credentials for the report data source, you restored an invalid key.</span></span>  
  
 <span data-ttu-id="a1f26-112">如果还原的是无效密钥，而不是用于加密数据的密钥，则无法解密当前存储在报表服务器数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="a1f26-112">If you restore an invalid key that is different from the one used to encrypt the data, it will be impossible to decrypt data that is currently stored in the report server database.</span></span> <span data-ttu-id="a1f26-113">如果还原的是无效密钥，则应立即还原正确密钥的备份副本（如果有的话）。</span><span class="sxs-lookup"><span data-stu-id="a1f26-113">If you restore an invalid key, you should immediately restore a backup copy of the correct key if it is available.</span></span> <span data-ttu-id="a1f26-114">如果没有用于加密数据的密钥的备份副本，则必须删除所有加密数据。</span><span class="sxs-lookup"><span data-stu-id="a1f26-114">If you do not have a backup copy of the key that was used to encrypt data, you must delete all encrypted data.</span></span> <span data-ttu-id="a1f26-115">请单击 **加密密钥** 页上的 [“删除”](../../../2014/sql-server/install/encryption-keys-ssrs-native-mode.md) 按钮以执行此步骤。</span><span class="sxs-lookup"><span data-stu-id="a1f26-115">Click the **Delete** button on the [Encryption Keys](../../../2014/sql-server/install/encryption-keys-ssrs-native-mode.md) page to perform this step.</span></span> <span data-ttu-id="a1f26-116">在删除加密内容之后，必须手动更新所有订阅并重新指定为报表定义的所有存储凭据以及报表服务器上的所有数据驱动订阅。</span><span class="sxs-lookup"><span data-stu-id="a1f26-116">After you delete the encrypted content, you must manually update all subscriptions and re-specify all stored credentials defined for reports and data-driven subscriptions on the report server.</span></span>  
  
## <a name="restore-encryption-key-dialog"></a><span data-ttu-id="a1f26-117">“还原加密密钥”对话框</span><span class="sxs-lookup"><span data-stu-id="a1f26-117">Restore Encryption Key Dialog</span></span>  
 <span data-ttu-id="a1f26-118">有关在何处查找 Configuration Manager 的信息 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] ，请参阅[Reporting Services 配置管理器 &#40;本机模式&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-native-mode.md)。</span><span class="sxs-lookup"><span data-stu-id="a1f26-118">For information on where to find the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager, see [Reporting Services Configuration Manager &#40;Native Mode&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-native-mode.md).</span></span>  
  
 <span data-ttu-id="a1f26-119">若要打开“还原加密密钥”对话框，请单击 **配置管理器导航窗格中的** “加密密钥” [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] ，然后单击 **“还原”**。</span><span class="sxs-lookup"><span data-stu-id="a1f26-119">To open the Restore Encryption Key dialog box, click **Encryption Keys** in the navigation pane of the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager, and then click **Restore**.</span></span> <span data-ttu-id="a1f26-120">当使用 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 配置管理器中的“服务帐户”页更新服务帐户时，也会显示此对话框。</span><span class="sxs-lookup"><span data-stu-id="a1f26-120">This dialog box also appears when you update the service account using the Service Account page in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager.</span></span> <span data-ttu-id="a1f26-121">有关更多信息</span><span class="sxs-lookup"><span data-stu-id="a1f26-121">For more information on the</span></span>  
  
## <a name="options"></a><span data-ttu-id="a1f26-122">选项</span><span class="sxs-lookup"><span data-stu-id="a1f26-122">Options</span></span>  
 <span data-ttu-id="a1f26-123">**文件位置**</span><span class="sxs-lookup"><span data-stu-id="a1f26-123">**File Location**</span></span>  
 <span data-ttu-id="a1f26-124">选择包含对称密钥副本的受密码保护的文件。</span><span class="sxs-lookup"><span data-stu-id="a1f26-124">Select the password-protected file that contains a copy of the symmetric key.</span></span> <span data-ttu-id="a1f26-125">默认的文件扩展名为 .snk。</span><span class="sxs-lookup"><span data-stu-id="a1f26-125">The default file extension is .snk.</span></span>  
  
 <span data-ttu-id="a1f26-126">**密码**</span><span class="sxs-lookup"><span data-stu-id="a1f26-126">**Password**</span></span>  
 <span data-ttu-id="a1f26-127">输入用于解锁该文件的密码。</span><span class="sxs-lookup"><span data-stu-id="a1f26-127">Enter the password that unlocks the file.</span></span> <span data-ttu-id="a1f26-128">只有知道密码的用户才可还原密钥。</span><span class="sxs-lookup"><span data-stu-id="a1f26-128">Only users who know the password can restore the key.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="a1f26-129">强制实施强密码策略。</span><span class="sxs-lookup"><span data-stu-id="a1f26-129">enforces a strong password policy.</span></span> <span data-ttu-id="a1f26-130">密码必须至少包含 8 个字符，并且应由大小写字母数字字符和至少一个符号字符组合而成。</span><span class="sxs-lookup"><span data-stu-id="a1f26-130">The password must contain at least 8 characters and include a combination of uppercase and lowercase alphanumeric characters and at least one symbol character.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a1f26-131">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a1f26-131">See Also</span></span>  
 <span data-ttu-id="a1f26-132">[Reporting Services 配置管理器的 F1 帮助主题 &#40;SSRS 本机模式&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-f1-help-topics-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="a1f26-132">[Reporting Services Configuration Manager F1 Help Topics &#40;SSRS Native Mode&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-f1-help-topics-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="a1f26-133">[备份和还原 Reporting Services 加密密钥](../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="a1f26-133">[Back Up and Restore Reporting Services Encryption Keys](../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span></span>  
 <span data-ttu-id="a1f26-134">[删除和重新创建加密密钥（SSRS 配置管理器）](../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="a1f26-134">[Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span></span>  
 <span data-ttu-id="a1f26-135">[初始化 Report Server（SSRS 配置管理器）](../../reporting-services/install-windows/ssrs-encryption-keys-initialize-a-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="a1f26-135">[Initialize a Report Server &#40;SSRS Configuration Manager&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-initialize-a-report-server.md) </span></span>  
 <span data-ttu-id="a1f26-136">[存储加密的 Report Server 数据（SSRS 配置管理器）](../../reporting-services/install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span><span class="sxs-lookup"><span data-stu-id="a1f26-136">[Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span></span>  
 [<span data-ttu-id="a1f26-137">SSRS 本机模式 &#40;的加密密钥&#41;</span><span class="sxs-lookup"><span data-stu-id="a1f26-137">Encryption Keys &#40;SSRS Native Mode&#41;</span></span>](../../../2014/sql-server/install/encryption-keys-ssrs-native-mode.md)  
  
  
