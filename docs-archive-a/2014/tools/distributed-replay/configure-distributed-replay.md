---
title: 配置 Distributed Replay |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: aee11dde-daad-439b-b594-9f4aeac94335
author: stevestein
ms.author: sstein
ms.openlocfilehash: 97aadd2fdf78f286fbfd8bb720307a145b4704be
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87586028"
---
# <a name="configure-distributed-replay"></a><span data-ttu-id="5bee4-102">Configure Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="5bee4-102">Configure Distributed Replay</span></span>
  <span data-ttu-id="5bee4-103">[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay 配置详细信息在 Distributed Replay 控制器、客户端以及安装有管理工具的位置的 XML 文件中指定。</span><span class="sxs-lookup"><span data-stu-id="5bee4-103">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay configuration details are specified in XML files on the Distributed Replay controller, clients, and where the administration tool is installed.</span></span> <span data-ttu-id="5bee4-104">这些文件包括下面的文件：</span><span class="sxs-lookup"><span data-stu-id="5bee4-104">These files include the following:</span></span>  
  
-   [<span data-ttu-id="5bee4-105">控制器配置文件</span><span class="sxs-lookup"><span data-stu-id="5bee4-105">Controller configuration file</span></span>](#DReplayController)  
  
-   [<span data-ttu-id="5bee4-106">客户端配置文件</span><span class="sxs-lookup"><span data-stu-id="5bee4-106">Client configuration file</span></span>](#DReplayClient)  
  
-   [<span data-ttu-id="5bee4-107">预处理配置文件</span><span class="sxs-lookup"><span data-stu-id="5bee4-107">Preprocess configuration file</span></span>](#PreprocessConfig)  
  
-   [<span data-ttu-id="5bee4-108">重播配置文件</span><span class="sxs-lookup"><span data-stu-id="5bee4-108">Replay configuration file</span></span>](#ReplayConfig)  
  
##  <a name="controller-configuration-file-dreplaycontrollerconfig"></a><a name="DReplayController"></a><span data-ttu-id="5bee4-109">控制器配置文件：DReplayController.config</span><span class="sxs-lookup"><span data-stu-id="5bee4-109">Controller Configuration File: DReplayController.config</span></span>  
 <span data-ttu-id="5bee4-110">当 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 分布式重播控制器服务启动时，它将从控制器配置文件 `DReplayController.config`加载日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="5bee4-110">When the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay controller service starts, it loads the logging level from the controller configuration file, `DReplayController.config`.</span></span> <span data-ttu-id="5bee4-111">此文件位于安装有分布式重播控制器服务的文件夹内：</span><span class="sxs-lookup"><span data-stu-id="5bee4-111">This file is located in the folder where you installed the Distributed Replay controller service:</span></span>  
  
 <span data-ttu-id="5bee4-112">**\<controller installation path>\DReplayController.config**</span><span class="sxs-lookup"><span data-stu-id="5bee4-112">**\<controller installation path>\DReplayController.config**</span></span>  
  
 <span data-ttu-id="5bee4-113">控制器配置文件指定的日志记录级别包括：</span><span class="sxs-lookup"><span data-stu-id="5bee4-113">The logging level specified by the controller configuration file includes the following:</span></span>  
  
|<span data-ttu-id="5bee4-114">设置</span><span class="sxs-lookup"><span data-stu-id="5bee4-114">Setting</span></span>|<span data-ttu-id="5bee4-115">XML 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-115">XML Element</span></span>|<span data-ttu-id="5bee4-116">说明</span><span class="sxs-lookup"><span data-stu-id="5bee4-116">Description</span></span>|<span data-ttu-id="5bee4-117">允许的值</span><span class="sxs-lookup"><span data-stu-id="5bee4-117">Allowed Values</span></span>|<span data-ttu-id="5bee4-118">必选</span><span class="sxs-lookup"><span data-stu-id="5bee4-118">Required</span></span>|  
|-------------|-----------------|-----------------|--------------------|--------------|  
|<span data-ttu-id="5bee4-119">日志记录级别</span><span class="sxs-lookup"><span data-stu-id="5bee4-119">Logging level</span></span>|`<LoggingLevel>`|<span data-ttu-id="5bee4-120">为控制器服务指定日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="5bee4-120">Specifies the logging level for the controller service.</span></span>|<span data-ttu-id="5bee4-121">`INFORMATION` &#124; `WARNING` &#124; `CRITICAL`</span><span class="sxs-lookup"><span data-stu-id="5bee4-121">`INFORMATION` &#124; `WARNING` &#124; `CRITICAL`</span></span>|<span data-ttu-id="5bee4-122">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-122">No.</span></span> <span data-ttu-id="5bee4-123">默认情况下，该值为 `CRITICAL`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-123">By default, the value is `CRITICAL`.</span></span>|  
  
### <a name="example"></a><span data-ttu-id="5bee4-124">示例</span><span class="sxs-lookup"><span data-stu-id="5bee4-124">Example</span></span>  
 <span data-ttu-id="5bee4-125">本示例显示一个控制器配置文件，该文件已经过修改以便消除 `INFORMATION` 和 `WARNING` 日志条目。</span><span class="sxs-lookup"><span data-stu-id="5bee4-125">This example shows a controller configuration file that has been modified to suppress `INFORMATION` and `WARNING` log entries.</span></span>  
  
```  
<?xml version='1.0'?>  
<Options>  
<LoggingLevel>CRITICAL</LoggingLevel>  
</Options>  
```  
  
##  <a name="client-configuration-file-dreplayclientconfig"></a><a name="DReplayClient"></a><span data-ttu-id="5bee4-126">客户端配置文件：DReplayClient.config</span><span class="sxs-lookup"><span data-stu-id="5bee4-126">Client Configuration File: DReplayClient.config</span></span>  
 <span data-ttu-id="5bee4-127">当 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 分布式重播客户端服务启动时，它将从客户端配置文件 `DReplayClient.config`加载配置设置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-127">When the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay client service starts, it loads configuration settings from the client configuration file, `DReplayClient.config`.</span></span> <span data-ttu-id="5bee4-128">此文件位于每台客户端上安装有分布式重播客户端服务的文件夹内：</span><span class="sxs-lookup"><span data-stu-id="5bee4-128">This file is located on each client, in the folder where you installed the Distributed Replay client service:</span></span>  
  
 <span data-ttu-id="5bee4-129">**\<client installation path>\DReplayClient.config**</span><span class="sxs-lookup"><span data-stu-id="5bee4-129">**\<client installation path>\DReplayClient.config**</span></span>  
  
 <span data-ttu-id="5bee4-130">客户端配置文件指定的设置包括：</span><span class="sxs-lookup"><span data-stu-id="5bee4-130">The settings specified by the client configuration file include the following:</span></span>  
  
|<span data-ttu-id="5bee4-131">设置</span><span class="sxs-lookup"><span data-stu-id="5bee4-131">Setting</span></span>|<span data-ttu-id="5bee4-132">XML 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-132">XML Element</span></span>|<span data-ttu-id="5bee4-133">说明</span><span class="sxs-lookup"><span data-stu-id="5bee4-133">Description</span></span>|<span data-ttu-id="5bee4-134">允许的值</span><span class="sxs-lookup"><span data-stu-id="5bee4-134">Allowed Values</span></span>|<span data-ttu-id="5bee4-135">必选</span><span class="sxs-lookup"><span data-stu-id="5bee4-135">Required</span></span>|  
|-------------|-----------------|-----------------|--------------------|--------------|  
|<span data-ttu-id="5bee4-136">控制器</span><span class="sxs-lookup"><span data-stu-id="5bee4-136">Controller</span></span>|`<Controller>`|<span data-ttu-id="5bee4-137">指定控制器的计算机名称。</span><span class="sxs-lookup"><span data-stu-id="5bee4-137">Specifies the computer name of the controller.</span></span> <span data-ttu-id="5bee4-138">客户端将尝试通过联系控制器在分布式重播环境中注册。</span><span class="sxs-lookup"><span data-stu-id="5bee4-138">The client will attempt to register with the Distributed Replay environment by contacting the controller.</span></span>|<span data-ttu-id="5bee4-139">可以用“`localhost`”或“`.`”指代本地计算机。</span><span class="sxs-lookup"><span data-stu-id="5bee4-139">You can use "`localhost`" or "`.`" to refer to the local computer.</span></span>|<span data-ttu-id="5bee4-140">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-140">No.</span></span> <span data-ttu-id="5bee4-141">默认情况下，客户端会尝试向在本地运行的控制器实例 (“`.`”)（如果存在）注册。</span><span class="sxs-lookup"><span data-stu-id="5bee4-141">By default, the client tries to register with the controller instance that is running locally ("`.`"), if it exists.</span></span>|  
|<span data-ttu-id="5bee4-142">客户端工作目录</span><span class="sxs-lookup"><span data-stu-id="5bee4-142">Client working directory</span></span>|`<WorkingDirectory>`|<span data-ttu-id="5bee4-143">客户端上用于保存调度文件的本地路径。</span><span class="sxs-lookup"><span data-stu-id="5bee4-143">Is the local path on the client where the dispatch files are saved.</span></span><br /><br /> <span data-ttu-id="5bee4-144">此目录中的文件在下一次重播时会被覆盖。</span><span class="sxs-lookup"><span data-stu-id="5bee4-144">The files in this directory are overwritten on the next replay.</span></span>|<span data-ttu-id="5bee4-145">以驱动器号开头的完整目录名称。</span><span class="sxs-lookup"><span data-stu-id="5bee4-145">A full directory name, starting with the drive letter.</span></span>|<span data-ttu-id="5bee4-146">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-146">No.</span></span> <span data-ttu-id="5bee4-147">如果未指定任何值，则调度文件将与默认客户端配置文件保存在同一位置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-147">If no value is specified, the dispatch files will be saved in the same location as the default client configuration file.</span></span> <span data-ttu-id="5bee4-148">如果指定一个值，而该文件夹在客户端上不存在，则客户端服务不会启动。</span><span class="sxs-lookup"><span data-stu-id="5bee4-148">If a value is specified and that folder does not exist on the client, the client service will not start.</span></span>|  
|<span data-ttu-id="5bee4-149">客户端结果目录</span><span class="sxs-lookup"><span data-stu-id="5bee4-149">Client result directory</span></span>|`<ResultDirectory>`|<span data-ttu-id="5bee4-150">客户端上用于保存重播活动（针对客户端）的结果跟踪文件的本地路径。</span><span class="sxs-lookup"><span data-stu-id="5bee4-150">Is the local path on the client where the result trace file from the replay activity (for the client) is saved.</span></span><br /><br /> <span data-ttu-id="5bee4-151">此目录中的文件在下一次重播时会被覆盖。</span><span class="sxs-lookup"><span data-stu-id="5bee4-151">The files in this directory are overwritten on the next replay.</span></span>|<span data-ttu-id="5bee4-152">以驱动器号开头的完整目录名称。</span><span class="sxs-lookup"><span data-stu-id="5bee4-152">A full directory name, starting with the drive letter.</span></span>|<span data-ttu-id="5bee4-153">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-153">No.</span></span> <span data-ttu-id="5bee4-154">如果未指定任何值，则结果跟踪文件将与默认客户端配置文件保存在同一位置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-154">If no value is specified, the result trace file will be saved in the same location as the default client configuration file.</span></span> <span data-ttu-id="5bee4-155">如果指定一个值，而该文件夹在客户端上不存在，则客户端服务不会启动。</span><span class="sxs-lookup"><span data-stu-id="5bee4-155">If a value is specified and that folder does not exist on the client, the client service will not start.</span></span>|  
|<span data-ttu-id="5bee4-156">日志记录级别</span><span class="sxs-lookup"><span data-stu-id="5bee4-156">Logging level</span></span>|`<LoggingLevel>`|<span data-ttu-id="5bee4-157">客户端服务的日志记录级别。</span><span class="sxs-lookup"><span data-stu-id="5bee4-157">Is the logging level for the client service.</span></span>|<span data-ttu-id="5bee4-158">`INFORMATION` &#124; `WARNING` &#124; `CRITICAL`</span><span class="sxs-lookup"><span data-stu-id="5bee4-158">`INFORMATION` &#124; `WARNING` &#124; `CRITICAL`</span></span>|<span data-ttu-id="5bee4-159">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-159">No.</span></span> <span data-ttu-id="5bee4-160">默认情况下，该值为 `CRITICAL`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-160">By default, the value is `CRITICAL`.</span></span>|  
  
### <a name="example"></a><span data-ttu-id="5bee4-161">示例</span><span class="sxs-lookup"><span data-stu-id="5bee4-161">Example</span></span>  
 <span data-ttu-id="5bee4-162">此示例显示一个客户端配置文件，该文件已经过修改，以指定控制器服务正在名为 `Controller1`的另一台计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="5bee4-162">This example shows a client configuration file that has been modified to specify that the controller service is running on a different computer, a computer named `Controller1`.</span></span> <span data-ttu-id="5bee4-163">`WorkingDirectory` 和 `ResultDirectory` 元素配置为分别使用文件夹 `c:\ClientWorkingDir` 和 `c:\ResultTraceDir`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-163">The `WorkingDirectory` and `ResultDirectory` elements have been configured to use folders `c:\ClientWorkingDir` and `c:\ResultTraceDir`, respectively.</span></span> <span data-ttu-id="5bee4-164">日志记录级别已从默认值改为消除 `INFORMATION` 和 `WARNING` 日志条目。</span><span class="sxs-lookup"><span data-stu-id="5bee4-164">The logging level has been changed from the default value to suppress `INFORMATION` and `WARNING` log entries.</span></span>  
  
```  
<?xml version='1.0'?>  
<Options>  
    <Controller>Controller1</Controller>  
    <WorkingDirectory>c:\ClientWorkingDir</WorkingDirectory>  
    <ResultDirectory>c:\ResultTraceDir</ResultDirectory>  
    <LoggingLevel>CRITICAL</LoggingLevel>  
</Options>  
```  
  
##  <a name="preprocess-configuration-file-dreplayexepreprocessconfig"></a><a name="PreprocessConfig"></a><span data-ttu-id="5bee4-165">预处理配置文件：DReplay.exe.preprocess.config</span><span class="sxs-lookup"><span data-stu-id="5bee4-165">Preprocess Configuration File: DReplay.exe.preprocess.config</span></span>  
 <span data-ttu-id="5bee4-166">当您使用管理工具启动预处理阶段时，管理工具将从预处理配置文件 `DReplay.exe.preprocess.config` 加载预处理设置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-166">When you use the administration tool to initiate the preprocess stage, the administration tool loads the preprocess settings from the preprocess configuration file, `DReplay.exe.preprocess.config`.</span></span>  
  
 <span data-ttu-id="5bee4-167">使用默认配置文件或使用管理工具的 **-c** 参数来指定修改过的预处理配置文件的位置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-167">Use the default configuration file or use the administration tool **-c** parameter to specify the location of a modified preprocess configuration file.</span></span> <span data-ttu-id="5bee4-168">有关使用管理工具的预处理选项的详细信息，请参阅[预处理选项（分布式重播管理工具）](preprocess-option-distributed-replay-administration-tool.md)。</span><span class="sxs-lookup"><span data-stu-id="5bee4-168">For more information about using the preprocess option of the administration tool, see [Preprocess Option &#40;Distributed Replay Administration Tool&#41;](preprocess-option-distributed-replay-administration-tool.md).</span></span>  
  
 <span data-ttu-id="5bee4-169">默认情况下，预处理配置文件位于安装有管理工具的文件夹中：</span><span class="sxs-lookup"><span data-stu-id="5bee4-169">The default preprocess configuration file is located in the folder where you installed the administration tool:</span></span>  
  
 <span data-ttu-id="5bee4-170">**\<administration tool installation path>\DReplayAdmin\DReplay.exe.preprocess.config**</span><span class="sxs-lookup"><span data-stu-id="5bee4-170">**\<administration tool installation path>\DReplayAdmin\DReplay.exe.preprocess.config**</span></span>  
  
 <span data-ttu-id="5bee4-171">预处理配置设置在预处理配置文件的 `<PreprocessModifiers>` 元素的子级 XML 元素中指定。</span><span class="sxs-lookup"><span data-stu-id="5bee4-171">The preprocess configuration settings are specified in XML elements that are children of the `<PreprocessModifiers>` element in the preprocess configuration file.</span></span> <span data-ttu-id="5bee4-172">这些设置包括：</span><span class="sxs-lookup"><span data-stu-id="5bee4-172">These settings include the following:</span></span>  
  
|<span data-ttu-id="5bee4-173">设置</span><span class="sxs-lookup"><span data-stu-id="5bee4-173">Setting</span></span>|<span data-ttu-id="5bee4-174">XML 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-174">XML Element</span></span>|<span data-ttu-id="5bee4-175">说明</span><span class="sxs-lookup"><span data-stu-id="5bee4-175">Description</span></span>|<span data-ttu-id="5bee4-176">允许的值</span><span class="sxs-lookup"><span data-stu-id="5bee4-176">Allowed Values</span></span>|<span data-ttu-id="5bee4-177">必选</span><span class="sxs-lookup"><span data-stu-id="5bee4-177">Required</span></span>|  
|-------------|-----------------|-----------------|--------------------|--------------|  
|<span data-ttu-id="5bee4-178">包括系统会话活动</span><span class="sxs-lookup"><span data-stu-id="5bee4-178">Include system session activities</span></span>|`<IncSystemSession>`|<span data-ttu-id="5bee4-179">指示重播期间是否包括捕获过程中的系统会话活动。</span><span class="sxs-lookup"><span data-stu-id="5bee4-179">Indicates whether system session activities during the capture will be included during replay.</span></span>|<span data-ttu-id="5bee4-180">`Yes` &#124; `No`</span><span class="sxs-lookup"><span data-stu-id="5bee4-180">`Yes` &#124; `No`</span></span>|<span data-ttu-id="5bee4-181">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-181">No.</span></span> <span data-ttu-id="5bee4-182">默认情况下，该值为 `No`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-182">By default, the value is `No`.</span></span>|  
|<span data-ttu-id="5bee4-183">最长空闲时间</span><span class="sxs-lookup"><span data-stu-id="5bee4-183">Maximum idle time</span></span>|`<MaxIdleTime>`|<span data-ttu-id="5bee4-184">将空闲时间的上限设为某个绝对值（以秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="5bee4-184">Caps the idle time to an absolute number (in seconds).</span></span>|<span data-ttu-id="5bee4-185">一个 >=-1 的整数</span><span class="sxs-lookup"><span data-stu-id="5bee4-185">An integer that is >= -1</span></span><br /><br /> <span data-ttu-id="5bee4-186">`-1` 表示原始跟踪文件中的原始值没有变化。</span><span class="sxs-lookup"><span data-stu-id="5bee4-186">`-1` indicates no change from the original value in the original trace file.</span></span><br /><br /> <span data-ttu-id="5bee4-187">`0` 表示在任意给定时间点有某个活动正在进行。</span><span class="sxs-lookup"><span data-stu-id="5bee4-187">`0` indicates that there is some activity going on at any given point in time.</span></span>|<span data-ttu-id="5bee4-188">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-188">No.</span></span> <span data-ttu-id="5bee4-189">默认情况下，该值为 `-1`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-189">By default, the value is `-1`.</span></span>|  
  
### <a name="example"></a><span data-ttu-id="5bee4-190">示例</span><span class="sxs-lookup"><span data-stu-id="5bee4-190">Example</span></span>  
 <span data-ttu-id="5bee4-191">默认预处理配置文件：</span><span class="sxs-lookup"><span data-stu-id="5bee4-191">The default preprocess configuration file:</span></span>  
  
```  
<?xml version='1.0'?>  
<Options>  
    <PreprocessModifiers>  
        <IncSystemSession>No</IncSystemSession>  
        <MaxIdleTime>-1</MaxIdleTime>  
    </PreprocessModifiers>  
</Options>  
```  
  
##  <a name="replay-configuration-file-dreplayexereplayconfig"></a><a name="ReplayConfig"></a><span data-ttu-id="5bee4-192">重播配置文件：DReplay.exe.replay.config</span><span class="sxs-lookup"><span data-stu-id="5bee4-192">Replay Configuration File: DReplay.exe.replay.config</span></span>  
 <span data-ttu-id="5bee4-193">当您使用管理工具启动事件重播阶段时，管理工具将从重播配置文件 `DReplay.exe.replay.config` 加载重播设置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-193">When you use the administration tool to initiate the event replay stage, the administration tool loads the replay settings from the replay configuration file, `DReplay.exe.replay.config`.</span></span>  
  
 <span data-ttu-id="5bee4-194">使用默认配置文件或使用管理工具的 **-c** 参数来指定修改过的重播配置文件的位置。</span><span class="sxs-lookup"><span data-stu-id="5bee4-194">Use the default configuration file or use the administration tool **-c** parameter to specify the location of a modified replay configuration file.</span></span> <span data-ttu-id="5bee4-195">有关使用管理工具的重播选项的详细信息，请参阅[重播选项（分布式重播管理工具）](replay-option-distributed-replay-administration-tool.md)。</span><span class="sxs-lookup"><span data-stu-id="5bee4-195">For more information about using the replay option of the administration tool, see [Replay Option &#40;Distributed Replay Administration Tool&#41;](replay-option-distributed-replay-administration-tool.md).</span></span>  
  
 <span data-ttu-id="5bee4-196">默认情况下，重播配置文件位于安装有管理工具的文件夹中：</span><span class="sxs-lookup"><span data-stu-id="5bee4-196">The default replay configuration file is located in the folder where you installed the administration tool:</span></span>  
  
 <span data-ttu-id="5bee4-197">**\<administration tool installation path>\DReplayAdmin\DReplay.exe.replay.config**</span><span class="sxs-lookup"><span data-stu-id="5bee4-197">**\<administration tool installation path>\DReplayAdmin\DReplay.exe.replay.config**</span></span>  
  
 <span data-ttu-id="5bee4-198">重播配置设置在重播配置文件的 `<ReplayOptions>` 和 `<OutputOptions>` 元素的子级 XML 元素中指定。</span><span class="sxs-lookup"><span data-stu-id="5bee4-198">The replay configuration settings are specified in XML elements that are children of the `<ReplayOptions>` and `<OutputOptions>` elements of the replay configuration file.</span></span>  
  
### <a name="replayoptions-element"></a><span data-ttu-id="5bee4-199">\<ReplayOptions> 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-199">\<ReplayOptions> Element</span></span>  
 <span data-ttu-id="5bee4-200">重播配置文件在 `<ReplayOptions>` 元素中指定的设置包括：</span><span class="sxs-lookup"><span data-stu-id="5bee4-200">The settings specified by the replay configuration file in the `<ReplayOptions>` element include the following:</span></span>  
  
|<span data-ttu-id="5bee4-201">设置</span><span class="sxs-lookup"><span data-stu-id="5bee4-201">Setting</span></span>|<span data-ttu-id="5bee4-202">XML 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-202">XML Element</span></span>|<span data-ttu-id="5bee4-203">说明</span><span class="sxs-lookup"><span data-stu-id="5bee4-203">Description</span></span>|<span data-ttu-id="5bee4-204">允许的值</span><span class="sxs-lookup"><span data-stu-id="5bee4-204">Allowed Values</span></span>|<span data-ttu-id="5bee4-205">必选</span><span class="sxs-lookup"><span data-stu-id="5bee4-205">Required</span></span>|  
|-------------|-----------------|-----------------|--------------------|--------------|  
|<span data-ttu-id="5bee4-206">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 目标实例（测试服务器）</span><span class="sxs-lookup"><span data-stu-id="5bee4-206">Target instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (the test server)</span></span>|`<Server>`|<span data-ttu-id="5bee4-207">指定要连接的服务器名和 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例名。</span><span class="sxs-lookup"><span data-stu-id="5bee4-207">Specifies the name of the server and instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to connect to.</span></span>|<span data-ttu-id="5bee4-208">*server_name*[\\*instance_name*]</span><span class="sxs-lookup"><span data-stu-id="5bee4-208">*server_name*[\\*instance_name*]</span></span><br /><br /> <span data-ttu-id="5bee4-209">不能使用“`localhost`”或“`.`”来表示本地主机。</span><span class="sxs-lookup"><span data-stu-id="5bee4-209">You cannot use "`localhost`" or "`.`" to represent the local host.</span></span>|<span data-ttu-id="5bee4-210">否，如果已通过使用管理工具的 **-s**_target server_ 参数和“重播”  选项指定服务器名称。</span><span class="sxs-lookup"><span data-stu-id="5bee4-210">No, if the server name is already specified by using the **-s**_target server_ parameter with the **replay** option of the administration tool.</span></span>|  
|<span data-ttu-id="5bee4-211">顺序模式</span><span class="sxs-lookup"><span data-stu-id="5bee4-211">Sequencing mode</span></span>|`<SequencingMode>`|<span data-ttu-id="5bee4-212">指定用于事件计划的模式。</span><span class="sxs-lookup"><span data-stu-id="5bee4-212">Specifies the mode that is used for event scheduling.</span></span>|<span data-ttu-id="5bee4-213">`synchronization` &#124; `stress`</span><span class="sxs-lookup"><span data-stu-id="5bee4-213">`synchronization` &#124; `stress`</span></span>|<span data-ttu-id="5bee4-214">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-214">No.</span></span> <span data-ttu-id="5bee4-215">默认情况下，该值为 `stress`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-215">By default, the value is `stress`.</span></span>|  
|<span data-ttu-id="5bee4-216">压力调整粒度</span><span class="sxs-lookup"><span data-stu-id="5bee4-216">Stress scale granularity</span></span>|`<StressScaleGranularity>`|<span data-ttu-id="5bee4-217">指定服务配置文件标识符 (SPID) 上的所有连接在压力模式下是应该一起调整 (SPID) 还是单独调整 (Connection)。</span><span class="sxs-lookup"><span data-stu-id="5bee4-217">Specifies whether all connections on the Service Profile Identifier (SPID) should be scaled together (SPID) or independently (Connection) under stress mode.</span></span>|<span data-ttu-id="5bee4-218">SPID &#124; Connection</span><span class="sxs-lookup"><span data-stu-id="5bee4-218">SPID &#124; Connection</span></span>|<span data-ttu-id="5bee4-219">是的。</span><span class="sxs-lookup"><span data-stu-id="5bee4-219">Yes.</span></span> <span data-ttu-id="5bee4-220">默认情况下，该值为 `SPID`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-220">By default, the value is `SPID`.</span></span>|  
|<span data-ttu-id="5bee4-221">连接时间刻度</span><span class="sxs-lookup"><span data-stu-id="5bee4-221">Connect time scale</span></span>|`<ConnectTimeScale>`|<span data-ttu-id="5bee4-222">用于调整压力模式下的连接时间。</span><span class="sxs-lookup"><span data-stu-id="5bee4-222">Is used to scale the connect time in stress mode.</span></span>|<span data-ttu-id="5bee4-223">介于 `1` 和 `100`之间的整数。</span><span class="sxs-lookup"><span data-stu-id="5bee4-223">An integer between `1` and `100`.</span></span>|<span data-ttu-id="5bee4-224">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-224">No.</span></span> <span data-ttu-id="5bee4-225">默认情况下，该值为 `100`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-225">By default, the value is `100`.</span></span>|  
|<span data-ttu-id="5bee4-226">思考时间刻度</span><span class="sxs-lookup"><span data-stu-id="5bee4-226">Think time scale</span></span>|`<ThinkTimeScale>`|<span data-ttu-id="5bee4-227">用于调整压力模式下的思考时间。</span><span class="sxs-lookup"><span data-stu-id="5bee4-227">Is used to scale think time in stress mode.</span></span>|<span data-ttu-id="5bee4-228">介于 `0` 和 `100`之间的整数。</span><span class="sxs-lookup"><span data-stu-id="5bee4-228">An integer between `0` and `100`.</span></span>|<span data-ttu-id="5bee4-229">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-229">No.</span></span> <span data-ttu-id="5bee4-230">默认情况下，该值为 `100`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-230">By default, the value is `100`.</span></span>|  
|<span data-ttu-id="5bee4-231">使用连接池</span><span class="sxs-lookup"><span data-stu-id="5bee4-231">Use connection pooling</span></span>|`<UseConnectionPooling>`|<span data-ttu-id="5bee4-232">指定是否将在每个分布式重播客户端上启用连接池。</span><span class="sxs-lookup"><span data-stu-id="5bee4-232">Specifies whether connection pooling will be enabled on each Distributed Replay client.</span></span>|<span data-ttu-id="5bee4-233">是 &#124; 否</span><span class="sxs-lookup"><span data-stu-id="5bee4-233">Yes &#124; No</span></span>|<span data-ttu-id="5bee4-234">是的。</span><span class="sxs-lookup"><span data-stu-id="5bee4-234">Yes.</span></span> <span data-ttu-id="5bee4-235">默认情况下，该值为 `Yes`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-235">By default, the value is `Yes`.</span></span>|  
|<span data-ttu-id="5bee4-236">Health Monitor 间隔时间</span><span class="sxs-lookup"><span data-stu-id="5bee4-236">Health monitor interval</span></span>|`<HealthmonInterval>`|<span data-ttu-id="5bee4-237">指示运行 Health Monitor 的频率（以秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="5bee4-237">Indicates how often to run the health monitor (in seconds).</span></span><br /><br /> <span data-ttu-id="5bee4-238">只在同步模式下才使用该值。</span><span class="sxs-lookup"><span data-stu-id="5bee4-238">This value is only used in synchronization mode.</span></span>|<span data-ttu-id="5bee4-239">>= 1 的整数</span><span class="sxs-lookup"><span data-stu-id="5bee4-239">Integer >= 1</span></span><br /><br /> <span data-ttu-id="5bee4-240">（`-1` 为禁用）</span><span class="sxs-lookup"><span data-stu-id="5bee4-240">(`-1` to disable)</span></span>|<span data-ttu-id="5bee4-241">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-241">No.</span></span> <span data-ttu-id="5bee4-242">默认情况下，该值为 `60`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-242">By default, the value is `60`.</span></span>|  
|<span data-ttu-id="5bee4-243">查询超时</span><span class="sxs-lookup"><span data-stu-id="5bee4-243">Query time-out</span></span>|`<QueryTimeout>`|<span data-ttu-id="5bee4-244">指定查询超时值（以秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="5bee4-244">Specifies the query time-out value, in seconds.</span></span> <span data-ttu-id="5bee4-245">返回第一行后该值才会生效。</span><span class="sxs-lookup"><span data-stu-id="5bee4-245">This value is only effective until the first row has been returned.</span></span>|<span data-ttu-id="5bee4-246">>= 1 的整数</span><span class="sxs-lookup"><span data-stu-id="5bee4-246">Integer >= 1</span></span><br /><br /> <span data-ttu-id="5bee4-247">（`-1` 为禁用）</span><span class="sxs-lookup"><span data-stu-id="5bee4-247">(`-1` to disable)</span></span>|<span data-ttu-id="5bee4-248">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-248">No.</span></span> <span data-ttu-id="5bee4-249">默认情况下，该值为 `3600`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-249">By default, the value is `3600`.</span></span>|  
|<span data-ttu-id="5bee4-250">每个客户端的线程数</span><span class="sxs-lookup"><span data-stu-id="5bee4-250">Threads per client</span></span>|`<ThreadsPerClient>`|<span data-ttu-id="5bee4-251">指定要用于每个重播客户端的重播线程数。</span><span class="sxs-lookup"><span data-stu-id="5bee4-251">Specifies the number of replay threads to use for each replay client.</span></span>|<span data-ttu-id="5bee4-252">介于 `1` 和 `512`之间的整数。</span><span class="sxs-lookup"><span data-stu-id="5bee4-252">An integer between `1` and `512`.</span></span>|<span data-ttu-id="5bee4-253">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-253">No.</span></span> <span data-ttu-id="5bee4-254">如果未指定，分布式重播将使用值 `255`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-254">If not specified, Distributed Replay will use a value of `255`.</span></span>|  
  
### <a name="outputoptions-element"></a><span data-ttu-id="5bee4-255">\<OutputOptions> 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-255">\<OutputOptions> Element</span></span>  
 <span data-ttu-id="5bee4-256">重播配置文件在 `<OutputOptions>` 元素中指定的设置包括：</span><span class="sxs-lookup"><span data-stu-id="5bee4-256">The settings specified by the replay configuration file in the `<OutputOptions>` element include the following:</span></span>  
  
|<span data-ttu-id="5bee4-257">设置</span><span class="sxs-lookup"><span data-stu-id="5bee4-257">Setting</span></span>|<span data-ttu-id="5bee4-258">XML 元素</span><span class="sxs-lookup"><span data-stu-id="5bee4-258">XML Element</span></span>|<span data-ttu-id="5bee4-259">说明</span><span class="sxs-lookup"><span data-stu-id="5bee4-259">Description</span></span>|<span data-ttu-id="5bee4-260">允许的值</span><span class="sxs-lookup"><span data-stu-id="5bee4-260">Allowed Values</span></span>|<span data-ttu-id="5bee4-261">必选</span><span class="sxs-lookup"><span data-stu-id="5bee4-261">Required</span></span>|  
|-------------|-----------------|-----------------|--------------------|--------------|  
|<span data-ttu-id="5bee4-262">记录行计数</span><span class="sxs-lookup"><span data-stu-id="5bee4-262">Record row count</span></span>|`<RecordRowCount>`|<span data-ttu-id="5bee4-263">指示是否应记录每个结果集的行计数。</span><span class="sxs-lookup"><span data-stu-id="5bee4-263">Indicates whether the row count should be recorded for each result set.</span></span>|<span data-ttu-id="5bee4-264">`Yes` &#124; `No`</span><span class="sxs-lookup"><span data-stu-id="5bee4-264">`Yes` &#124; `No`</span></span>|<span data-ttu-id="5bee4-265">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-265">No.</span></span> <span data-ttu-id="5bee4-266">默认情况下，该值为 `Yes`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-266">By default, the value is `Yes`.</span></span>|  
|<span data-ttu-id="5bee4-267">记录结果集</span><span class="sxs-lookup"><span data-stu-id="5bee4-267">Record result set</span></span>|`<RecordResultSet>`|<span data-ttu-id="5bee4-268">指示是否应记录所有结果集的内容。</span><span class="sxs-lookup"><span data-stu-id="5bee4-268">Indicates whether the content of all result sets should be recorded.</span></span>|<span data-ttu-id="5bee4-269">`Yes` &#124; `No`</span><span class="sxs-lookup"><span data-stu-id="5bee4-269">`Yes` &#124; `No`</span></span>|<span data-ttu-id="5bee4-270">不是。</span><span class="sxs-lookup"><span data-stu-id="5bee4-270">No.</span></span> <span data-ttu-id="5bee4-271">默认情况下，该值为 `No`。</span><span class="sxs-lookup"><span data-stu-id="5bee4-271">By default, the value is `No`.</span></span>|  
  
### <a name="example"></a><span data-ttu-id="5bee4-272">示例</span><span class="sxs-lookup"><span data-stu-id="5bee4-272">Example</span></span>  
 <span data-ttu-id="5bee4-273">默认重播配置文件：</span><span class="sxs-lookup"><span data-stu-id="5bee4-273">The default replay configuration file:</span></span>  
  
```  
<?xml version='1.0'?>  
<Options>  
    <ReplayOptions>  
        <Server></Server>  
        <SequencingMode>stress</SequencingMode>  
        <ConnectTimeScale></ConnectTimeScale>  
        <ThinkTimeScale></ThinkTimeScale>  
        <HealthmonInterval>60</HealthmonInterval>  
        <QueryTimeout>3600</QueryTimeout>  
        <ThreadsPerClient></ThreadsPerClient>  
    </ReplayOptions>  
    <OutputOptions>  
        <ResultTrace>  
            <RecordRowCount>Yes</RecordRowCount>  
            <RecordResultSet>No</RecordResultSet>  
        </ResultTrace>  
    </OutputOptions>  
</Options>  
```  
  
## <a name="see-also"></a><span data-ttu-id="5bee4-274">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5bee4-274">See Also</span></span>  
 <span data-ttu-id="5bee4-275">[管理工具命令行选项（Distributed Replay 实用工具）](administration-tool-command-line-options-distributed-replay-utility.md) </span><span class="sxs-lookup"><span data-stu-id="5bee4-275">[Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;](administration-tool-command-line-options-distributed-replay-utility.md) </span></span>  
 <span data-ttu-id="5bee4-276">[SQL Server 分布式重播](sql-server-distributed-replay.md) </span><span class="sxs-lookup"><span data-stu-id="5bee4-276">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span></span>  
 <span data-ttu-id="5bee4-277">[SQL Server 分布式重播论坛](https://social.technet.microsoft.com/Forums/sl/sqldru/) </span><span class="sxs-lookup"><span data-stu-id="5bee4-277">[SQL Server Distributed Replay Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) </span></span>  
 <span data-ttu-id="5bee4-278">[使用 Distributed Replay 对 SQL Server 进行负载测试 - 第 2 部分](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) </span><span class="sxs-lookup"><span data-stu-id="5bee4-278">[Using Distributed Replay to Load Test Your SQL Server - Part 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) </span></span>  
 [<span data-ttu-id="5bee4-279">使用 Distributed Replay 对 SQL Server 进行负载测试 – 第 1 部分</span><span class="sxs-lookup"><span data-stu-id="5bee4-279">Using Distributed Replay to Load Test Your SQL Server - Part 1</span></span>](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)  
  
  
