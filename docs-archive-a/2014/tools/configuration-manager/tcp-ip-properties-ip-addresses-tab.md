---
title: TCP-IP 属性 (IP 地址 "选项卡) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- ports [SQL Server], listening on
- listening [SQL Server], on ports
ms.assetid: 4c17ed45-9da7-4bec-bce6-970109fe7365
author: stevestein
ms.author: sstein
ms.openlocfilehash: af157a5826d98b31cb98a2a9e203f847ed37df10
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87577987"
---
# <a name="tcp-ip-properties-ip-addresses-tab"></a><span data-ttu-id="628e1-102">TCP-IP 属性 (IP 地址 "选项卡) </span><span class="sxs-lookup"><span data-stu-id="628e1-102">TCP-IP Properties (IP Addresses Tab)</span></span>
  <span data-ttu-id="628e1-103">使用 **“TCP/IP 属性（‘IP 地址’选项卡）”** 对话框，可以配置特定 IP 地址的 TCP/IP 协议选项。</span><span class="sxs-lookup"><span data-stu-id="628e1-103">Use the **TCP/IP Properties (IP Addresses Tab)** dialog box to configure the TCP/IP protocol options for a specific IP address.</span></span> <span data-ttu-id="628e1-104">只有选中 **“IP All”** ，才能一次配置所有地址的 **“TCP 动态端口”** 和 **“TCP 端口”** 。</span><span class="sxs-lookup"><span data-stu-id="628e1-104">Only **TCP Dynamic Ports** and **TCP Port** can be configured for all addresses at once by selecting **IP All**.</span></span>  
  
 <span data-ttu-id="628e1-105">当 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 重新启动时，更改将生效。</span><span class="sxs-lookup"><span data-stu-id="628e1-105">Changes take effect when [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is restarted.</span></span> <span data-ttu-id="628e1-106">有关启动和停止 SQL Server Browser 服务的信息，请参阅联机丛书中的“如何：启动和停止 SQL Server Browser 服务”。</span><span class="sxs-lookup"><span data-stu-id="628e1-106">For information about starting and stopping the SQL Server Browser service, see How to: Start and Stop the SQL Server Browser Service in Books Online.</span></span>  
  
## <a name="static-vs-dynamic-ports"></a><span data-ttu-id="628e1-107">静态端口与动态端口</span><span class="sxs-lookup"><span data-stu-id="628e1-107">Static vs. Dynamic Ports</span></span>  
 <span data-ttu-id="628e1-108">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的默认实例侦听端口 1433 上传入的连接。</span><span class="sxs-lookup"><span data-stu-id="628e1-108">The default instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] listens for incoming connections on port 1433.</span></span> <span data-ttu-id="628e1-109">可以出于安全原因或客户端应用程序要求更改此端口。</span><span class="sxs-lookup"><span data-stu-id="628e1-109">The port can be changed for security reasons or because of a client application requirement.</span></span> <span data-ttu-id="628e1-110">默认情况下，命名实例（包含 SQL Server Express）被配置为侦听动态端口。</span><span class="sxs-lookup"><span data-stu-id="628e1-110">By default, named instances (including SQL Server Express) are configured to listen on dynamic ports.</span></span> <span data-ttu-id="628e1-111">若要配置静态端口，请将 **“TCP 动态端口”** 框保留为空，并在 **“TCP 端口”** 框中提供一个可用的端口号。</span><span class="sxs-lookup"><span data-stu-id="628e1-111">To configure a static port, leave the **TCP Dynamic Ports** box blank and provide an available port number in the **TCP Port** box.</span></span> <span data-ttu-id="628e1-112">有关打开防火墙中的端口的详细信息，请参阅联机丛书中的“配置 Windows 防火墙以允许 SQL Server 访问”。</span><span class="sxs-lookup"><span data-stu-id="628e1-112">For more information about opening ports in the firewall, see Configuring the Windows Firewall to Allow SQL Server Access in Books Online.</span></span>  
  
## <a name="dynamic-ports"></a><span data-ttu-id="628e1-113">动态端口</span><span class="sxs-lookup"><span data-stu-id="628e1-113">Dynamic Ports</span></span>  
 <span data-ttu-id="628e1-114">如果某个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例已配置为侦听动态端口，则在启动时，该实例将检查操作系统中的可用端口，并为该端口打开一个端点。</span><span class="sxs-lookup"><span data-stu-id="628e1-114">At startup, when an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is configured to listen on dynamic ports, it checks with the operating system for an available port, and opens an endpoint for that port.</span></span> <span data-ttu-id="628e1-115">传入连接必须指定要连接的端口号。</span><span class="sxs-lookup"><span data-stu-id="628e1-115">Incoming connections must specify that port number to connect.</span></span> <span data-ttu-id="628e1-116">由于每次启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 时端口号都可能会改变，因此 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 提供 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务监视端口，并将传入连接指向该实例的当前端口。</span><span class="sxs-lookup"><span data-stu-id="628e1-116">Since the port number can change each time [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] starts, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser Service, to monitor the ports, and direct incoming connections to the current port for that instance.</span></span> <span data-ttu-id="628e1-117">使用动态端口会增加通过防火墙连接 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的复杂性，因为重新启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 时端口号可能会改变，从而需要更改防火墙设置。</span><span class="sxs-lookup"><span data-stu-id="628e1-117">Using dynamic ports complicates connecting [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] through a firewall because the port number may change when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is restarted, requiring changes to the firewall settings.</span></span> <span data-ttu-id="628e1-118">若要避免通过防火墙连接的问题，请将 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置为使用静态端口。</span><span class="sxs-lookup"><span data-stu-id="628e1-118">To avoid connection problems through a firewall, configure [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use a static port.</span></span>  
  
## <a name="options"></a><span data-ttu-id="628e1-119">选项</span><span class="sxs-lookup"><span data-stu-id="628e1-119">Options</span></span>  
 <span data-ttu-id="628e1-120">**活动**</span><span class="sxs-lookup"><span data-stu-id="628e1-120">**Active**</span></span>  
 <span data-ttu-id="628e1-121">指示该 IP 地址在计算机上处于活动状态。</span><span class="sxs-lookup"><span data-stu-id="628e1-121">Indicates that the IP address is active on the computer.</span></span> <span data-ttu-id="628e1-122">不适用于 **“IPAll”** 。</span><span class="sxs-lookup"><span data-stu-id="628e1-122">Not available for **IPAll**.</span></span>  
  
 <span data-ttu-id="628e1-123">**已启用**</span><span class="sxs-lookup"><span data-stu-id="628e1-123">**Enabled**</span></span>  
 <span data-ttu-id="628e1-124">如果 **“TCP/IP 属性(‘协议’选项卡)”** 上的 **“全部侦听”** 属性设为 **“否”** ，则该属性指示 SQL Server 是否侦听 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="628e1-124">If the **Listen All** property on the **TCP/IP Properties (Protocol Tab)** is set to **No**, this property indicates whether SQL Server is listening on the IP address.</span></span> <span data-ttu-id="628e1-125">如果 **“TCP/IP 属性(‘协议’选项卡)”** 上的 **“全部侦听”** 属性设为 **“是”** ，则表示忽略该属性。</span><span class="sxs-lookup"><span data-stu-id="628e1-125">If the **Listen All** property on the **TCP/IP Properties (Protocol Tab)** is set to **Yes**, the property is disregarded.</span></span> <span data-ttu-id="628e1-126">不适用于 **“IPAll”** 。</span><span class="sxs-lookup"><span data-stu-id="628e1-126">Not available for **IPAll**.</span></span>  
  
 <span data-ttu-id="628e1-127">**IP 地址**</span><span class="sxs-lookup"><span data-stu-id="628e1-127">**IP Address**</span></span>  
 <span data-ttu-id="628e1-128">查看或更改此连接使用的 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="628e1-128">View or change the IP address used by this connection.</span></span> <span data-ttu-id="628e1-129">列出计算机使用的 IP 地址以及 IP 环回地址 127.0.0.1。</span><span class="sxs-lookup"><span data-stu-id="628e1-129">Lists the IP address used by the computer, and the IP loopback address, 127.0.0.1.</span></span> <span data-ttu-id="628e1-130">不适用于 **“IPAll”** 。</span><span class="sxs-lookup"><span data-stu-id="628e1-130">Not available for **IPAll**.</span></span> <span data-ttu-id="628e1-131">该 IP 地址可以为 IPv4 格式或 IPv6 格式。</span><span class="sxs-lookup"><span data-stu-id="628e1-131">The IP address can be in either IPv4 or IPv6 format.</span></span>  
  
 <span data-ttu-id="628e1-132">**“IP All”**</span><span class="sxs-lookup"><span data-stu-id="628e1-132">**TCP Dynamic Ports**</span></span>  
 <span data-ttu-id="628e1-133">如果未启用动态端口，则为空。</span><span class="sxs-lookup"><span data-stu-id="628e1-133">Blank, if dynamic ports are not enabled.</span></span> <span data-ttu-id="628e1-134">若要使用动态端口，请设置为 0。</span><span class="sxs-lookup"><span data-stu-id="628e1-134">To use dynamic ports, set to 0.</span></span>  
  
 <span data-ttu-id="628e1-135">对于 **“IPAll”** ，将显示所用动态端口的端口号。</span><span class="sxs-lookup"><span data-stu-id="628e1-135">For **IPAll**, displays the port number of the dynamic port used.</span></span>  
  
 <span data-ttu-id="628e1-136">**“TCP 动态端口”**</span><span class="sxs-lookup"><span data-stu-id="628e1-136">**TCP Port**</span></span>  
 <span data-ttu-id="628e1-137">查看或更改 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 侦听的端口。</span><span class="sxs-lookup"><span data-stu-id="628e1-137">View or change the port on which [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] listens.</span></span> <span data-ttu-id="628e1-138">默认情况下， [!INCLUDE[ssDE](../../includes/ssde-md.md)] 的默认实例侦听端口 1433。</span><span class="sxs-lookup"><span data-stu-id="628e1-138">By default, the default instance of [!INCLUDE[ssDE](../../includes/ssde-md.md)] listens on port 1433.</span></span>  
  
 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]<span data-ttu-id="628e1-139">可以侦听同一 IP 地址的多个端口，端口以逗号分隔的格式列出：1433,1500,1501。</span><span class="sxs-lookup"><span data-stu-id="628e1-139">can listen on multiple ports on the same IP address, list the ports, separated by commas, in the format 1433,1500,1501.</span></span> <span data-ttu-id="628e1-140">此字段最多允许 2047 个字符。</span><span class="sxs-lookup"><span data-stu-id="628e1-140">This field is limited to 2047 characters.</span></span>  
  
 <span data-ttu-id="628e1-141">若要配置单个 IP 地址以侦听多个端口，还必须将“TCP/IP 属性”对话框的“协议”选项卡上的“全部侦听”参数设置为“否”     。</span><span class="sxs-lookup"><span data-stu-id="628e1-141">To configure a single IP address to listen on multiple ports, the **Listen All** parameter must also be set to **No**, on the **Protocols Tab** of the **TCP/IP Properties** dialog box.</span></span> <span data-ttu-id="628e1-142">有关详细信息，请参阅“如何：将数据库引擎配置为侦听多个 TCP 端口”（在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 联机丛书中）。</span><span class="sxs-lookup"><span data-stu-id="628e1-142">For more information, see "How to: Configure the Database Engine to Listen on Multiple TCP Ports" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="adding-or-removing-ip-addresses"></a><span data-ttu-id="628e1-143">添加或删除 IP 地址</span><span class="sxs-lookup"><span data-stu-id="628e1-143">Adding or Removing IP Addresses</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="628e1-144">配置管理器显示安装 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 时可用的 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="628e1-144">Configuration Manager displays the IP addresses that were available at the time [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] was installed.</span></span> <span data-ttu-id="628e1-145">如果发生以下情况，可用的 IP 地址也会随之改变：添加或删除网卡、动态分配的 IP 地址过期、重新配置网络结构或计算机的物理位置发生改变（例如便携式计算机在另一座大楼连接到网络）。</span><span class="sxs-lookup"><span data-stu-id="628e1-145">The available IP addresses can change when network cards are added or removed, when a dynamically assigned IP address expires, when the network structure is reconfigured, or when the computer changes its physical location such as a laptop computer connecting to the network in a different building.</span></span> <span data-ttu-id="628e1-146">若要更改 IP 地址，可以编辑 **“IP 地址”** 框，然后重新启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="628e1-146">To change an IP address, edit the **IP Address** box, and then restart [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="628e1-147">另请参阅</span><span class="sxs-lookup"><span data-stu-id="628e1-147">See Also</span></span>  
 <span data-ttu-id="628e1-148">[选择网络协议](../../../2014/tools/configuration-manager/choosing-a-network-protocol.md) </span><span class="sxs-lookup"><span data-stu-id="628e1-148">[Choosing a Network Protocol](../../../2014/tools/configuration-manager/choosing-a-network-protocol.md) </span></span>  
 <span data-ttu-id="628e1-149">[使用 TCP IP 创建有效的连接字符串](../../../2014/tools/configuration-manager/creating-a-valid-connection-string-using-tcp-ip.md) </span><span class="sxs-lookup"><span data-stu-id="628e1-149">[Creating a Valid Connection String Using TCP IP](../../../2014/tools/configuration-manager/creating-a-valid-connection-string-using-tcp-ip.md) </span></span>  
 [<span data-ttu-id="628e1-150">SQL Server Browser 服务</span><span class="sxs-lookup"><span data-stu-id="628e1-150">SQL Server Browser Service</span></span>](../../../2014/tools/configuration-manager/sql-server-browser-service.md)  
  
  
