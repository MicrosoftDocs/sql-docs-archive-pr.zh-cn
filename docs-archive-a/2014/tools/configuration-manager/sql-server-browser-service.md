---
title: SQL Server Browser 服务 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- services [SQL Server], security
- SQL Browser service (See SQL Server Browser Service)
- Browser Service
- SQL Server Browser service
ms.assetid: 3cc00d3a-487c-4cd9-a155-655f02485fa0
author: stevestein
ms.author: sstein
ms.openlocfilehash: df2edf99f05b9f579e480b2f482c574dc713efb9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87692042"
---
# <a name="sql-server-browser-service"></a><span data-ttu-id="dfdc0-102">SQL Server Browser Service</span><span class="sxs-lookup"><span data-stu-id="dfdc0-102">SQL Server Browser Service</span></span>
  <span data-ttu-id="dfdc0-103">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]浏览器程序以 Windows 服务的形式运行。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-103">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]Browser program runs as a Windows service.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-104">浏览器侦听对 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 资源的传入请求，并提供计算机上安装的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例的相关信息。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-104">Browser listens for incoming requests for [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] resources and provides information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instances installed on the computer.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-105">浏览器可用于执行下列操作：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-105">Browser contributes to the following actions:</span></span>  
  
-   <span data-ttu-id="dfdc0-106">浏览可用服务器列表</span><span class="sxs-lookup"><span data-stu-id="dfdc0-106">Browsing a list of available servers</span></span>  
  
-   <span data-ttu-id="dfdc0-107">连接到正确的服务器实例</span><span class="sxs-lookup"><span data-stu-id="dfdc0-107">Connecting to the correct server instance</span></span>  
  
-   <span data-ttu-id="dfdc0-108">连接到专用管理员连接 (DAC) 端点</span><span class="sxs-lookup"><span data-stu-id="dfdc0-108">Connecting to dedicated administrator connection (DAC) endpoints</span></span>  
  
 <span data-ttu-id="dfdc0-109">[!INCLUDE[ssDE](../../includes/ssde-md.md)] Browser 服务 (sqlbrowser) 为 [!INCLUDE[ssAS](../../includes/ssas-md.md)]和 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的每个实例提供实例名称和版本号。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-109">For each instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssAS](../../includes/ssas-md.md)], the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service (sqlbrowser) provides the instance name and the version number.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-110">浏览器随 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]一起安装。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-110">Browser is installed with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-111">浏览器可以在安装过程中进行配置，也可以使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器进行配置。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-111">Browser can be configured during setup or by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span> <span data-ttu-id="dfdc0-112">默认情况下， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务会自动启动：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-112">By default, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service starts automatically:</span></span>  
  
-   <span data-ttu-id="dfdc0-113">升级安装时。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-113">When upgrading an installation.</span></span>  
  
-   <span data-ttu-id="dfdc0-114">在群集上安装时。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-114">When installing on a cluster.</span></span>  
  
-   <span data-ttu-id="dfdc0-115">安装包括所有 SQL Server Express 实例的 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 的命名实例时。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-115">When installing a named instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] including all instances of SQL Server Express.</span></span>  
  
-   <span data-ttu-id="dfdc0-116">安装 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]的命名实例时。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-116">When installing a named instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
## <a name="background"></a><span data-ttu-id="dfdc0-117">背景</span><span class="sxs-lookup"><span data-stu-id="dfdc0-117">Background</span></span>  
 <span data-ttu-id="dfdc0-118">在 [!INCLUDE[ssVersion2000](../../includes/ssversion2000-md.md)]之前，一台计算机上只能安装一个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-118">Prior to [!INCLUDE[ssVersion2000](../../includes/ssversion2000-md.md)], only one instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] could be installed on a computer.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-119">侦听 1433 端口上的传入请求，该端口由官方的 Internet 号码分配机构 (IANA) 分配给 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-119">listened for incoming requests on port 1433, assigned to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by the official Internet Assigned Numbers Authority (IANA).</span></span> <span data-ttu-id="dfdc0-120">只有 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的一个实例可以使用端口，因此，在 [!INCLUDE[ssVersion2000](../../includes/ssversion2000-md.md)] 引入了对多个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例的支持时， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 解析协议 (SSRP) 是为侦听 UDP 端口 1434 而开发的。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-120">Only one instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can use a port, so when [!INCLUDE[ssVersion2000](../../includes/ssversion2000-md.md)] introduced support for multiple instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resolution Protocol (SSRP) was developed to listen on UDP port 1434.</span></span> <span data-ttu-id="dfdc0-121">此侦听器服务使用已安装实例的名称以及该实例使用的端口或命名管道响应客户端请求。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-121">This listener service responded to client requests with the names of the installed instances, and the ports or named pipes used by the instance.</span></span> <span data-ttu-id="dfdc0-122">为了解决 SSRP 系统的限制， [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 引入了 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务来替换 SSRP。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-122">To resolve limitations of the SSRP system, [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] introduced the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service as a replacement for SSRP.</span></span>  
  
## <a name="how-sql-server-browser-works"></a><span data-ttu-id="dfdc0-123">SQL Server Browser 工作原理</span><span class="sxs-lookup"><span data-stu-id="dfdc0-123">How SQL Server Browser Works</span></span>  
 <span data-ttu-id="dfdc0-124">启动一个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例后，如果为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]启用了 TCP/IP 协议，服务器将被分配一个 TCP/IP 端口。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-124">When an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] starts, if the TCP/IP protocol is enabled for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the server is assigned a TCP/IP port.</span></span> <span data-ttu-id="dfdc0-125">如果启用了 Named Pipes 协议， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 将侦听特定的命名管道。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-125">If the named pipes protocol is enabled, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] listens on a specific named pipe.</span></span> <span data-ttu-id="dfdc0-126">该特定实例将使用此端口（或“管道”）与客户端应用程序交换数据。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-126">This port, or "pipe," is used by that specific instance to exchange data with client applications.</span></span> <span data-ttu-id="dfdc0-127">在安装过程中，TCP 1433 端口和管道 `\sql\query` 将分配给默认实例，但服务器管理员可以随后使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器进行更改。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-127">During installation, TCP port 1433 and pipe `\sql\query` are assigned to the default instance, but those can be changed later by the server administrator using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span> <span data-ttu-id="dfdc0-128">由于只有一个 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例可以使用端口或管道，因此，会将不同的端口号和管道名称分配给命名实例，包括 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-128">Because only one instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can use a port or pipe, different port numbers and pipe names are assigned for named instances, including [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)].</span></span> <span data-ttu-id="dfdc0-129">默认情况下，命名实例和 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 在启用时便配置为使用动态端口，也就是说，当 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 启动时就分配了可用端口。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-129">By default, when enabled, both named instances and [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] are configured to use dynamic ports, that is, an available port is assigned when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] starts.</span></span> <span data-ttu-id="dfdc0-130">如果需要，可以为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]实例分配特定端口。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-130">If you want, a specific port can be assigned to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="dfdc0-131">连接时，客户端可以指定特定端口，但是如果端口是动态分配的，端口号可能会在重新启动 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 时被更改，因此正确的端口号对于客户端来说是不确定的。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-131">When connecting, clients can specify a specific port; but if the port is dynamically assigned, the port number can change anytime [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is restarted, so the correct port number is unknown to the client.</span></span>  
  
 <span data-ttu-id="dfdc0-132">在启动后， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器将启动并使用 UDP 1434 端口。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-132">Upon startup, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser starts and claims UDP port 1434.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-133">浏览器将读取注册表，识别计算机上的所有 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例，并注明它们使用的端口和命名管道。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-133">Browser reads the registry, identifies all instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the computer, and notes the ports and named pipes that they use.</span></span> <span data-ttu-id="dfdc0-134">当一台服务器具有两个或多个网卡时， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器会为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]返回其遇到的第一个已启用的端口。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-134">When a server has two or more network cards, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser returns the first enabled port it encounters for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-135">浏览器支持 ipv6 和 ipv4。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-135">Browser support ipv6 and ipv4.</span></span>  
  
 <span data-ttu-id="dfdc0-136">当 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 客户端请求 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 资源时，客户端网络库将使用 1434 端口向服务器发送一条 UDP 消息。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-136">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] clients request [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] resources, the client network library sends a UDP message to the server using port 1434.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-137">浏览器将用请求的实例的 TCP/IP 端口或命名管道做出响应。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-137">Browser responds with the TCP/IP port or named pipe of the requested instance.</span></span> <span data-ttu-id="dfdc0-138">然后，客户端应用程序中的网络库将使用所需实例的端口或命名管道向服务器发送请求来完成连接。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-138">The network library on the client application then completes the connection by sending a request to the server using the port or named pipe of the desired instance.</span></span>  
  
 <span data-ttu-id="dfdc0-139">有关启动和停止 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务的信息，请参阅 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 联机丛书。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-139">For information about starting and stopping the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service, see [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="using-sql-server-browser"></a><span data-ttu-id="dfdc0-140">使用 SQL Server Browser</span><span class="sxs-lookup"><span data-stu-id="dfdc0-140">Using SQL Server Browser</span></span>  
 <span data-ttu-id="dfdc0-141">当 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务不运行时，如果您提供了正确的端口号或命名管道，仍可以连接到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-141">If the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service is not running, you are still able to connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] if you provide the correct port number or named pipe.</span></span> <span data-ttu-id="dfdc0-142">例如，如果 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的默认实例在 1433 端口上运行，则可以使用 TCP/IP 连接到此默认实例。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-142">For instance, you can connect to the default instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] with TCP/IP if it is running on port 1433.</span></span>  
  
 <span data-ttu-id="dfdc0-143">但是，如果 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务未运行，则以下连接无效：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-143">However, if the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service is not running, the following connections do not work:</span></span>  
  
-   <span data-ttu-id="dfdc0-144">在未完全指定所有参数（例如 TCP/IP 端口或命名管道）的情况下，组件尝试连接到命名实例。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-144">Any component that tries to connect to a named instance without fully specifying all the parameters (such as the TCP/IP port or named pipe).</span></span>  
  
-   <span data-ttu-id="dfdc0-145">生成或传递其他组件随后要用来进行重新连接的服务器/实例信息的组件。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-145">Any component that generates or passes server\instance information that could later be used by other components to reconnect.</span></span>  
  
-   <span data-ttu-id="dfdc0-146">未提供端口号或管道就连接到命名实例。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-146">Connecting to a named instance without providing the port number or pipe.</span></span>  
  
-   <span data-ttu-id="dfdc0-147">在未使用 TCP/IP 1433 端口的情况下，将 DAC 连接到命名实例或默认实例。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-147">DAC to a named instance or the default instance if not using TCP/IP port 1433.</span></span>  
  
-   <span data-ttu-id="dfdc0-148">OLAP 重定向程序服务。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-148">The OLAP redirector service.</span></span>  
  
-   <span data-ttu-id="dfdc0-149">枚举 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]、企业管理器或查询分析器中的服务器。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-149">Enumerating servers in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], Enterprise Manager, or Query Analyzer.</span></span>  
  
 <span data-ttu-id="dfdc0-150">如果在客户端服务器方案中使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] （例如，应用程序通过网络访问 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ），那么，若要停止或禁用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务，必须为每个实例分配一个特定端口号，并编写客户端应用程序代码以便始终使用该端口号。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-150">If you are using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in a client-server scenario (for example, when your application is accessing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] across a network), if you stop or disable the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service, you must assign a specific port number to each instance and write your client application code to always use that port number.</span></span> <span data-ttu-id="dfdc0-151">此方法存在如下问题：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-151">This approach has the following problems:</span></span>  
  
-   <span data-ttu-id="dfdc0-152">必须更新和维护客户端应用程序代码才能确保它连接到正确的端口。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-152">You must update and maintain client application code to ensure it is connecting to the proper port.</span></span>  
  
-   <span data-ttu-id="dfdc0-153">如果服务器上的其他服务或应用程序可以使用您为每个实例选择的端口，则会导致 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例不可用。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-153">The port you choose for each instance may be used by another service or application on the server, causing the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to be unavailable.</span></span>  
  
## <a name="clustering"></a><span data-ttu-id="dfdc0-154">群集</span><span class="sxs-lookup"><span data-stu-id="dfdc0-154">Clustering</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-155">浏览器不是群集资源，不支持从一个群集节点到其他群集节点的故障转移。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-155">Browser is not a clustered resource and does not support failover from one cluster node to the other.</span></span> <span data-ttu-id="dfdc0-156">因此，在使用群集的情况下，应安装 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器，并为群集的每个节点启用该浏览器。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-156">Therefore, in the case of a cluster, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser should be installed and turned on for each node of the cluster.</span></span> <span data-ttu-id="dfdc0-157">在群集中， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器侦听 IP_ANY。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-157">On clusters, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser listens on IP_ANY.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="dfdc0-158">侦听 IP_ANY 时，如果启用侦听特定的 IP，用户必须为每个 IP 配置相同的 TCP 端口，因为 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器将返回它遇到的第一个 IP/端口对。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-158">When listening on IP_ANY, when you enable listening on specific IPs, the user must configure the same TCP port on each IP, because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser returns the first IP/port pair that it encounters.</span></span>  
  
## <a name="installing-uninstalling-and-running-from-the-command-line"></a><span data-ttu-id="dfdc0-159">通过命令行进行安装、卸载和运行</span><span class="sxs-lookup"><span data-stu-id="dfdc0-159">Installing, Uninstalling, and Running from the Command Line</span></span>  
 <span data-ttu-id="dfdc0-160">默认情况下， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器程序安装在 C:\Program Files (x86)\Microsoft SQL Server\90\Shared\sqlbrowser.exe 中。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-160">By default, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser program is installed at C:\Program Files (x86)\Microsoft SQL Server\90\Shared\sqlbrowser.exe.</span></span>  
  
 <span data-ttu-id="dfdc0-161">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器服务在删除 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的最后一个实例后被卸载。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-161">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service is uninstalled when the last instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is removed.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-162">可以使用 **-c** 开关，通过命令提示符启动浏览器来排除故障：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-162">Browser can be started from the command prompt for troubleshooting, by using the **-c** switch:</span></span>  
  
```  
<drive>\<path>\sqlbrowser.exe -c  
```  
  
## <a name="security"></a><span data-ttu-id="dfdc0-163">安全性</span><span class="sxs-lookup"><span data-stu-id="dfdc0-163">Security</span></span>  
  
### <a name="account-privileges"></a><span data-ttu-id="dfdc0-164">帐户权限</span><span class="sxs-lookup"><span data-stu-id="dfdc0-164">Account Privileges</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-165">浏览器使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 解析协议 (SSRP) 侦听 UDP 端口，并接受未经身份验证的请求。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-165">Browser listens on a UDP port and accepts unauthenticated requests by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resolution Protocol (SSRP).</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="dfdc0-166">浏览器应该在低特权用户的安全上下文中运行，以将受到恶意攻击的几率降到最低。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-166">Browser should be run in the security context of a low privileged user to minimize exposure to a malicious attack.</span></span> <span data-ttu-id="dfdc0-167">通过使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器更改登录帐户。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-167">The logon account can be changed by using the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span> <span data-ttu-id="dfdc0-168">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器的最小用户权限如下：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-168">The minimum user rights for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser are the following:</span></span>  
  
-   <span data-ttu-id="dfdc0-169">拒绝通过网络访问该计算机</span><span class="sxs-lookup"><span data-stu-id="dfdc0-169">Deny access to this computer from the network</span></span>  
  
-   <span data-ttu-id="dfdc0-170">拒绝本地登录</span><span class="sxs-lookup"><span data-stu-id="dfdc0-170">Deny logon locally</span></span>  
  
-   <span data-ttu-id="dfdc0-171">拒绝以批处理作业登录</span><span class="sxs-lookup"><span data-stu-id="dfdc0-171">Deny Log on as a batch job</span></span>  
  
-   <span data-ttu-id="dfdc0-172">拒绝通过“终端服务”登录</span><span class="sxs-lookup"><span data-stu-id="dfdc0-172">Deny Log On Through Terminal Services</span></span>  
  
-   <span data-ttu-id="dfdc0-173">作为服务登录</span><span class="sxs-lookup"><span data-stu-id="dfdc0-173">Log on as a service</span></span>  
  
-   <span data-ttu-id="dfdc0-174">读取和写入与网络通信（端口和管道）相关的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 注册表项</span><span class="sxs-lookup"><span data-stu-id="dfdc0-174">Read and write the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] registry keys related to network communication (ports and pipes)</span></span>  
  
### <a name="default-account"></a><span data-ttu-id="dfdc0-175">默认帐户</span><span class="sxs-lookup"><span data-stu-id="dfdc0-175">Default Account</span></span>  
 <span data-ttu-id="dfdc0-176">安装程序将 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器配置为使用安装期间为服务选定的帐户。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-176">Setup configures [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser to use the account selected for services during setup.</span></span> <span data-ttu-id="dfdc0-177">其他可能的帐户包括：</span><span class="sxs-lookup"><span data-stu-id="dfdc0-177">Other possible accounts include the following:</span></span>  
  
-   <span data-ttu-id="dfdc0-178">所有“域\本地”  帐户</span><span class="sxs-lookup"><span data-stu-id="dfdc0-178">Any **domain\local** account</span></span>  
  
-   <span data-ttu-id="dfdc0-179">**“本地服务”** 帐户</span><span class="sxs-lookup"><span data-stu-id="dfdc0-179">The **local service** account</span></span>  
  
-   <span data-ttu-id="dfdc0-180">“本地系统”  帐户（不推荐使用，因为其具有不必要的权限）</span><span class="sxs-lookup"><span data-stu-id="dfdc0-180">The **local system** account (not recommended as has unnecessary privileges)</span></span>  
  
### <a name="hiding-sql-server"></a><span data-ttu-id="dfdc0-181">隐藏 SQL Server</span><span class="sxs-lookup"><span data-stu-id="dfdc0-181">Hiding SQL Server</span></span>  
 <span data-ttu-id="dfdc0-182">隐藏的实例是仅支持共享内存连接的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 实例。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-182">Hidden instances are instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that support only shared memory connections.</span></span> <span data-ttu-id="dfdc0-183">对于 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]，设置 `HideInstance` 标记来指示 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 浏览器不应对此服务器实例的相关信息做出响应。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-183">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], set the `HideInstance` flag to indicate that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser should not respond with information about this server instance.</span></span>  
  
### <a name="using-a-firewall"></a><span data-ttu-id="dfdc0-184">使用防火墙</span><span class="sxs-lookup"><span data-stu-id="dfdc0-184">Using a Firewall</span></span>  
 <span data-ttu-id="dfdc0-185">若要与有防火墙保护的服务器上的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务进行通信，除了打开 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 使用的 TCP 端口（如 1433）之外，还要打开 UDP 端口 1434。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-185">To communicate with the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser service on a server behind a firewall, open UDP port 1434, in addition to the TCP port used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (e.g., 1433).</span></span> <span data-ttu-id="dfdc0-186">有关如何使用防火墙的信息，请参阅 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 联机丛书中的“如何将防火墙配置为允许 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 访问”。</span><span class="sxs-lookup"><span data-stu-id="dfdc0-186">For information about working with a firewall, see "How to: Configure a Firewall for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Access" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dfdc0-187">另请参阅</span><span class="sxs-lookup"><span data-stu-id="dfdc0-187">See Also</span></span>  
 [<span data-ttu-id="dfdc0-188">网络协议和网络库</span><span class="sxs-lookup"><span data-stu-id="dfdc0-188">Network Protocols and Network Libraries</span></span>](../../../2014/sql-server/install/network-protocols-and-network-libraries.md)  
  
  
