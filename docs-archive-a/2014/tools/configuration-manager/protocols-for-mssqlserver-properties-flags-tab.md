---
title: MSSQLSERVER 属性的协议（“标志”选项卡）| Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- MSSQLSERVER property protocols
ms.assetid: 4d38e6e9-f95f-4e79-ae45-89f631037528
author: stevestein
ms.author: sstein
ms.openlocfilehash: c1d6141e4267a707e38a6b40e8a955ba08addfdc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/04/2020
ms.locfileid: "87588173"
---
# <a name="protocols-for-mssqlserver-properties-flags-tab"></a><span data-ttu-id="e7c81-102">MSSQLSERVER 的协议属性（“标志”选项卡）</span><span class="sxs-lookup"><span data-stu-id="e7c81-102">Protocols for MSSQLSERVER Properties (Flags Tab)</span></span>
  <span data-ttu-id="e7c81-103">当服务器上装有证书时，使用 **“MSSQLSERVER 的协议属性”** 对话框中的 **“标志”** 选项卡可以查看或指定协议加密以及隐藏实例选项。</span><span class="sxs-lookup"><span data-stu-id="e7c81-103">When a certificate is installed on the server, use the **Flags** tab on the **Protocols for MSSQLSERVER Properties** dialog box to view or specify the protocol encryption and hide instance options.</span></span> <span data-ttu-id="e7c81-104">若要启用或禁用 ForceEncryption  设置，必须重新启动 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e7c81-104">[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be restarted to enable or disable the **ForceEncryption** setting.</span></span>  
  
 <span data-ttu-id="e7c81-105">若要加密连接，应为 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 提供一个证书。</span><span class="sxs-lookup"><span data-stu-id="e7c81-105">To encrypt connections, you should provision the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] with a certificate.</span></span> <span data-ttu-id="e7c81-106">如果未安装证书，则实例启动后， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 将生成一个自签名证书。</span><span class="sxs-lookup"><span data-stu-id="e7c81-106">If a certificate is not installed, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will generate a self-signed certificate when the instance is started.</span></span> <span data-ttu-id="e7c81-107">此自签名证书可代替可信证书颁发机构颁发的证书，但它不提供身份验证，也不具有不可否认性。</span><span class="sxs-lookup"><span data-stu-id="e7c81-107">This self-signed certificate can be used instead of a certificate from a trusted certificate authority, but it does not provide authentication or non-repudiation.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="e7c81-108">使用自签名证书加密的安全套接字层 (SSL) 连接不提供强安全性。</span><span class="sxs-lookup"><span data-stu-id="e7c81-108">Secure Sockets Layer (SSL) connections encrypted using a self-signed certificate do not provide strong security.</span></span> <span data-ttu-id="e7c81-109">它们易遭受中间人攻击。</span><span class="sxs-lookup"><span data-stu-id="e7c81-109">They are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="e7c81-110">在生产环境中或在连接到 Internet 的服务器上，不应依赖使用自签名证书的 SSL。</span><span class="sxs-lookup"><span data-stu-id="e7c81-110">You should not rely on SSL using self-signed certificates in a production environment or on servers that are connected to the Internet.</span></span>  
  
 <span data-ttu-id="e7c81-111">有关加密的详细信息，请参阅 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]联机丛书中的“加密与 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的连接”。</span><span class="sxs-lookup"><span data-stu-id="e7c81-111">For more in formation on encryption, see "Encrypting Connections to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="e7c81-112">登录过程始终是加密的。</span><span class="sxs-lookup"><span data-stu-id="e7c81-112">The login process is always encrypted.</span></span> <span data-ttu-id="e7c81-113">如果将 **ForceEncryption** 设为 **“是”** ，则将对所有客户端/服务器通信进行加密，并必须将连接到 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 的客户端配置为信任服务器证书的根颁发机构。</span><span class="sxs-lookup"><span data-stu-id="e7c81-113">When **ForceEncryption** is set to **Yes**, all client/server communication is encrypted, and clients connecting to the [!INCLUDE[ssDE](../../includes/ssde-md.md)] must be configured to trust the root authority of the server certificate.</span></span> <span data-ttu-id="e7c81-114">有关详细信息，请参阅 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 联机丛书中的“如何启用[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的加密连接（ [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 配置管理器）”。</span><span class="sxs-lookup"><span data-stu-id="e7c81-114">For more information, see "How to: Enable Encrypted Connections to the [!INCLUDE[ssDE](../../includes/ssde-md.md)] ([!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager)" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="cluster-servers"></a><span data-ttu-id="e7c81-115">集群服务器</span><span class="sxs-lookup"><span data-stu-id="e7c81-115">Cluster Servers</span></span>  
 <span data-ttu-id="e7c81-116">若要在故障转移群集中使用加密，必须在故障转移群集中的所有节点上安装具有完全限定的虚拟服务器 DNS 名称的服务器证书。</span><span class="sxs-lookup"><span data-stu-id="e7c81-116">If you want to use encryption with a failover cluster, you must install the server certificate with the fully qualified DNS name of the virtual server on all nodes in the failover cluster.</span></span> <span data-ttu-id="e7c81-117">例如，如果有一个双节点群集，其中节点名为 " *\<your company>* test1."。com "和" *\<your company>* test2。com "和一个名为" virtsql "的虚拟服务器，需要为" virtsql "安装 *\<your company>* 证书。com "。</span><span class="sxs-lookup"><span data-stu-id="e7c81-117">For example, if you have a two-node cluster, with nodes named "test1.*\<your company>*.com" and "test2.*\<your company>*.com" and a virtual server named "virtsql", you need to install a certificate for "virtsql.*\<your company>*.com" on both nodes.</span></span> <span data-ttu-id="e7c81-118">然后，可以选中 **SQL Server 配置管理器** 中的 **ForceEncryption** 复选框以将故障转移群集配置为使用加密。</span><span class="sxs-lookup"><span data-stu-id="e7c81-118">You can then check the **ForceEncryption** check box on the **SQL Server Configuration Manager** to configure your failover cluster for encryption.</span></span>  
  
## <a name="options"></a><span data-ttu-id="e7c81-119">选项</span><span class="sxs-lookup"><span data-stu-id="e7c81-119">Options</span></span>  
 <span data-ttu-id="e7c81-120">**ForceEncryption**</span><span class="sxs-lookup"><span data-stu-id="e7c81-120">**ForceEncryption**</span></span>  
 <span data-ttu-id="e7c81-121">强制协议加密。</span><span class="sxs-lookup"><span data-stu-id="e7c81-121">Force protocol encryption.</span></span> <span data-ttu-id="e7c81-122">加密是通过将数据更改为不可读的形式来保密敏感信息的方法。</span><span class="sxs-lookup"><span data-stu-id="e7c81-122">Encryption is a method for keeping sensitive information confidential by changing data into an unreadable form.</span></span> <span data-ttu-id="e7c81-123">即使在传输过程中有人查看了传输数据包，加密也可以确保数据安全。</span><span class="sxs-lookup"><span data-stu-id="e7c81-123">Encryption ensures that data remains secure, even if the transmission packets are viewed during the transmission process.</span></span> <span data-ttu-id="e7c81-124">若要使用渠道绑定，请将 **“强行加密”** 设置为 **“打开”** ，并在 **“高级”** 选项卡上配置 **“扩展保护”** 。</span><span class="sxs-lookup"><span data-stu-id="e7c81-124">To use channel binding, set **Force Encryption** to **On** and configure **Extended Protection** on the **Advanced** tab.</span></span>  
  
 <span data-ttu-id="e7c81-125">**HideInstance**</span><span class="sxs-lookup"><span data-stu-id="e7c81-125">**HideInstance**</span></span>  
 <span data-ttu-id="e7c81-126">防止 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser 服务向尝试通过使用 [!INCLUDE[ssDE](../../includes/ssde-md.md)] “浏览” **按钮来查找实例的客户端计算机公开此** 实例。</span><span class="sxs-lookup"><span data-stu-id="e7c81-126">Prevent the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Browser Service from exposing this instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] to client computers that try to locate the instance by using the **Browse** button.</span></span> <span data-ttu-id="e7c81-127">在服务器上存在命名实例的情况下，若要连接，则客户端应用程序必须指定协议端点信息。</span><span class="sxs-lookup"><span data-stu-id="e7c81-127">In the case of named instances on the server, to connect, client applications must specify the protocol endpoint information.</span></span> <span data-ttu-id="e7c81-128">例如，端口号或命名管道名（如 `tcp:server,5000`）。</span><span class="sxs-lookup"><span data-stu-id="e7c81-128">For example, the port number or the named pipe name, such as `tcp:server,5000`.</span></span> <span data-ttu-id="e7c81-129">有关详细信息，请参阅 [Logging In to SQL Server](../../database-engine/configure-windows/logging-in-to-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="e7c81-129">For more information, see [Logging In to SQL Server](../../database-engine/configure-windows/logging-in-to-sql-server.md).</span></span>  
  
 <span data-ttu-id="e7c81-130">有关详细信息，请参阅 SQL Server 联机丛书中的“如何：启用数据库引擎的加密连接（SQL Server 配置管理器）”。</span><span class="sxs-lookup"><span data-stu-id="e7c81-130">For more information, see "How to: Enable Encryption Connections to the Database Engine (SQL Server Configuration Manager)" in Books Online.</span></span>  
  
  
